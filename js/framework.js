!function(){function r(a){return null!=a&&!isNaN(a)}function u(a){return a.length}function s(a,d){try{for(var b in d)Object.defineProperty(a.prototype,b,{value:d[b],enumerable:!1})}catch(c){a.prototype=d}}function t(){}function l(a){return Ud+a in this}function b(){var a=[];return this.forEach(function(d){a.push(d)}),a}function p(){var a=0,d;for(d in this)d.charCodeAt(0)===mf&&++a;return a}function m(){for(var a in this)if(a.charCodeAt(0)===mf)return!1;return!0}function k(){}function f(a,d,b){return function(){var c=
b.apply(d,arguments);return c===d?a:c}}function c(a,d){if(d in a)return d;d=d.charAt(0).toUpperCase()+d.substring(1);for(var b=0,c=Jg.length;c>b;++b){var e=Jg[b]+d;if(e in a)return e}}function e(){}function g(){}function q(a){function d(){for(var c,e=b,g=-1,f=e.length;++g<f;)(c=e[g].on)&&c.apply(this,arguments);return a}var b=[],c=new t;return d.on=function(d,e){var g,f=c.get(d);return 2>arguments.length?f&&f.on:(f&&(f.on=null,b=b.slice(0,g=b.indexOf(f)).concat(b.slice(g+1)),c.remove(d)),e&&b.push(c.set(d,
{on:e})),a)},d}function a(){F.event.preventDefault()}function d(){for(var a,d=F.event;a=d.sourceEvent;)d=a;return d}function n(a){for(var d=new g,b=0,c=arguments.length;++b<c;)d[arguments[b]]=q(d);return d.of=function(b,c){return function(e){try{var g=e.sourceEvent=F.event;e.target=a;F.event=e;d[e.type].apply(b,c)}finally{F.event=g}}},d}function v(a){return nf(a,Pa),a}function y(a){return"function"==typeof a?a:function(){return dg(a,this)}}function A(a){return"function"==typeof a?a:function(){return eg(a,
this)}}function z(a,d){function b(){this.removeAttribute(a)}function c(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,d)}function g(){this.setAttributeNS(a.space,a.local,d)}function f(){var b=d.apply(this,arguments);null==b?this.removeAttribute(a):this.setAttribute(a,b)}function n(){var b=d.apply(this,arguments);null==b?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,b)}return a=F.ns.qualify(a),null==d?a.local?c:b:"function"==typeof d?a.local?
n:f:a.local?g:e}function B(a){return a.trim().replace(/\s+/g," ")}function C(a){return RegExp("(?:^|\\s+)"+F.requote(a)+"(?:\\s+|$)","g")}function E(a,d){function b(){for(var c=-1;++c<e;)a[c](this,d)}function c(){for(var b=-1,g=d.apply(this,arguments);++b<e;)a[b](this,g)}a=a.trim().split(/^|\s+/).map(D);var e=a.length;return"function"==typeof d?c:b}function D(a){var d=C(a);return function(b,c){if(e=b.classList)return c?e.add(a):e.remove(a);var e=b.getAttribute("class")||"";c?(d.lastIndex=0,d.test(e)||
b.setAttribute("class",B(e+" "+a))):b.setAttribute("class",B(e.replace(d," ")))}}function H(a,d,b){function c(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,d,b)}function g(){var c=d.apply(this,arguments);null==c?this.style.removeProperty(a):this.style.setProperty(a,c,b)}return null==d?c:"function"==typeof d?g:e}function L(a,d){function b(){delete this[a]}function c(){this[a]=d}function e(){var b=d.apply(this,arguments);null==b?delete this[a]:this[a]=b}return null==d?b:"function"==
typeof d?e:c}function T(a){return"function"==typeof a?a:(a=F.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function I(a){return function(){return Kg(this,a)}}function Z(a){return arguments.length||(a=F.ascending),function(d,b){return d&&b?a(d.__data__,b.__data__):!d-!b}}function N(a,d){for(var b=0,c=a.length;c>b;b++)for(var e,g=a[b],f=0,n=g.length;n>f;f++)(e=g[f])&&d(e,f,b);return a}
function x(a){return nf(a,ad),a}function K(a){var d,b;return function(c,e,g){c=a[g].update;var f=c.length;g!=b&&(b=g,d=0);for(e>=d&&(d=e+1);!(e=c[d])&&++d<f;);return e}}function G(){var a=this.__transition__;a&&++a.active}function Q(a,d,b){function c(){var d=this[n];d&&(this.removeEventListener(a,d,d.$),delete this[n])}function g(){var e=q(d,od(arguments));c.call(this);this.addEventListener(a,this[n]=e,e.$=b);e._=d}function f(){var d,b=RegExp("^__on([^.]+)"+F.requote(a)+"$"),c;for(c in this)if(d=
c.match(b)){var e=this[c];this.removeEventListener(d[1],e,e.$);delete this[c]}}var n="__on"+a,k=a.indexOf("."),q=S;0<k&&(a=a.substring(0,k));var v=fg.get(a);return v&&(a=v,q=ha),k?d?g:c:d?e:f}function S(a,d){return function(b){var c=F.event;F.event=b;d[0]=this.__data__;try{a.apply(this,d)}finally{F.event=c}}}function ha(a,d){var b=S(a,d);return function(a){var d=a.relatedTarget;d&&(d===this||8&d.compareDocumentPosition(this))||b.call(this,a)}}function ba(){var d=".dragsuppress-"+ ++Ah,b="click"+d,
c=F.select(Ob).on("touchmove"+d,a).on("dragstart"+d,a).on("selectstart"+d,a);if(Te){var e=pd.style,g=e[Te];e[Te]="none"}return function(f){function n(){c.on(b,null)}c.on(d,null);Te&&(e[Te]=g);f&&(c.on(b,function(){a();n()},!0),setTimeout(n,0))}}function V(a,d){d.changedTouches&&(d=d.changedTouches[0]);var b=a.ownerSVGElement||a;if(b.createSVGPoint){var c=b.createSVGPoint();if(0>gg&&(Ob.scrollX||Ob.scrollY)){var b=F.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,
border:"none"},"important"),e=b[0][0].getScreenCTM();gg=!(e.f||e.e);b.remove()}return gg?(c.x=d.pageX,c.y=d.pageY):(c.x=d.clientX,c.y=d.clientY),c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y]}b=a.getBoundingClientRect();return[d.clientX-b.left-a.clientLeft,d.clientY-b.top-a.clientTop]}function M(a,d,b){return(d[0]-a[0])*(b[1]-a[1])-(d[1]-a[1])*(b[0]-a[0])}function U(a){return 1<a?0:-1>a?xa:Math.acos(a)}function J(a){return 1<a?ec:-1>a?-ec:Math.asin(a)}function aa(a){return((a=Math.exp(a))+
1/a)/2}function X(a){return(a=Math.sin(a/2))*a}function fa(){}function ua(a,d,b){return new va(a,d,b)}function va(a,d,b){this.h=a;this.s=d;this.l=b}function la(a,d,b){function c(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(g-e)*a/60:180>a?g:240>a?e+(g-e)*(240-a)/60:e}var e,g;return a=isNaN(a)?0:0>(a%=360)?a+360:a,d=isNaN(d)?0:0>d?0:1<d?1:d,b=0>b?0:1<b?1:b,g=0.5>=b?b*(1+d):b+d-b*d,e=2*b-g,pa(Math.round(255*c(a+120)),Math.round(255*c(a)),Math.round(255*c(a-120)))}function oa(a,d,b){return new ka(a,
d,b)}function ka(a,d,b){this.h=a;this.c=d;this.l=b}function Fa(a,d,b){return isNaN(a)&&(a=0),isNaN(d)&&(d=0),O(b,Math.cos(a*=wa)*d,Math.sin(a)*d)}function O(a,d,b){return new sa(a,d,b)}function sa(a,d,b){this.l=a;this.a=d;this.b=b}function kb(a,d,b){a=(a+16)/116;d=a+d/500;b=a-b/200;return d=Ia(d)*Lg,a=Ia(a)*Mg,b=Ia(b)*Ng,pa(Qa(3.2404542*d-1.5371385*a-0.4985314*b),Qa(-0.969266*d+1.8760108*a+0.041556*b),Qa(0.0556434*d-0.2040259*a+1.0572252*b))}function La(a,d,b){return 0<a?oa(Math.atan2(b,d)*Za,Math.sqrt(d*
d+b*b),a):oa(0/0,0/0,a)}function Ia(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Ra(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Qa(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function pb(a){return pa(a>>16,255&a>>8,255&a)+""}function pa(a,d,b){return new ca(a,d,b)}function ca(a,d,b){this.r=a;this.g=d;this.b=b}function Ma(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function cb(a,d,b){var c,e,g,f=0,n=0,k=0;
if(c=/([a-z]+)\((.*)\)/i.exec(a))switch(e=c[2].split(","),c[1]){case "hsl":return b(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return d(Ga(e[0]),Ga(e[1]),Ga(e[2]))}return(g=of.get(a))?d(g.r,g.g,g.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(f=a.charAt(1),f+=f,n=a.charAt(2),n+=n,k=a.charAt(3),k+=k):7===a.length&&(f=a.substring(1,3),n=a.substring(3,5),k=a.substring(5,7)),f=parseInt(f,16),n=parseInt(n,16),k=parseInt(k,16)),d(f,n,k))}function ma(a,d,b){var c,e,g=Math.min(a/=
255,d/=255,b/=255),f=Math.max(a,d,b),n=f-g,k=(f+g)/2;return n?(e=0.5>k?n/(f+g):n/(2-f-g),c=a==f?(d-b)/n+(b>d?6:0):d==f?(b-a)/n+2:(a-d)/n+4,c*=60):(c=0/0,e=0<k&&1>k?0:c),ua(c,e,k)}function za(a,d,b){a=R(a);d=R(d);b=R(b);var c=Ra((0.4124564*a+0.3575761*d+0.1804375*b)/Lg),e=Ra((0.2126729*a+0.7151522*d+0.072175*b)/Mg);a=Ra((0.0193339*a+0.119192*d+0.9503041*b)/Ng);return O(116*e-16,500*(c-e),200*(e-a))}function R(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Ga(a){var d=parseFloat(a);
return"%"===a.charAt(a.length-1)?Math.round(2.55*d):d}function na(a){return"function"==typeof a?a:function(){return a}}function Ca(a){return a}function $a(a){return function(d,b,c){return 2===arguments.length&&"function"==typeof b&&(c=b,b=null),hb(d,b,a,c)}}function hb(a,d,b,c){function e(){var a,d=k.status;if(!d&&k.responseText||200<=d&&300>d||304===d){try{a=b.call(g,k)}catch(c){return f.error.call(g,c),void 0}f.load.call(g,a)}else f.error.call(g,k)}var g={},f=F.dispatch("beforesend","progress",
"load","error"),n={},k=new XMLHttpRequest,q=null;return!Ob.XDomainRequest||"withCredentials"in k||!/^(http(s)?:)?\/\//.test(a)||(k=new XDomainRequest),"onload"in k?k.onload=k.onerror=e:k.onreadystatechange=function(){3<k.readyState&&e()},k.onprogress=function(a){var d=F.event;F.event=a;try{f.progress.call(g,k)}finally{F.event=d}},g.header=function(a,d){return a=(a+"").toLowerCase(),2>arguments.length?n[a]:(null==d?delete n[a]:n[a]=d+"",g)},g.mimeType=function(a){return arguments.length?(d=null==a?
null:a+"",g):d},g.responseType=function(a){return arguments.length?(q=a,g):q},g.response=function(a){return b=a,g},["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(od(arguments)))}}),g.send=function(b,c,e){if(2===arguments.length&&"function"==typeof c&&(e=c,c=null),k.open(b,a,!0),null==d||"accept"in n||(n.accept=d+",*/*"),k.setRequestHeader)for(var v in n)k.setRequestHeader(v,n[v]);return null!=d&&k.overrideMimeType&&k.overrideMimeType(d),null!=q&&(k.responseType=
q),null!=e&&g.on("error",e).on("load",function(a){e(null,a)}),f.beforesend.call(g,k),k.send(null==c?null:c),g},g.abort=function(){return k.abort(),g},F.rebind(g,f,"on"),null==c?g:g.get(ub(c))}function ub(a){return 1===a.length?function(d,b){a(null==d?b:null)}:a}function ia(){var a=Na(),a=ib()-a;24<a?(isFinite(a)&&(clearTimeout(pf),pf=setTimeout(ia,a)),qf=0):(qf=1,Og(ia))}function Na(){var a=Date.now();for(bd=rf;bd;)a>=bd.t&&(bd.f=bd.c(a-bd.t)),bd=bd.n;return a}function ib(){for(var a,d=rf,b=1/0;d;)d.f?
d=a?a.n=d.n:rf=d.n:(d.t<b&&(b=d.t),d=(a=d).n);return sf=a,b}function Wa(a,d){return d-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ta(a){var d=a.decimal,b=a.thousands,c=a.grouping,e=a.currency,g=c?function(a){for(var d=a.length,e=[],g=0,f=c[0];0<d&&0<f;)e.push(a.substring(d-=f,d+f)),f=c[g=(g+1)%c.length];return e.reverse().join(b)}:Ca;return function(a){a=Pg.exec(a);var b=a[1]||" ",c=a[2]||">",f=a[3]||"",n=a[4]||"",k=a[5],q=+a[6],v=a[7],m=a[8],l=a[9],y=1,Td="",A="",z=!1;switch(m&&(m=+m.substring(1)),
(k||"0"===b&&"="===c)&&(k=b="0",c="=",v&&(q-=Math.floor((q-1)/4))),l){case "n":v=!0;l="g";break;case "%":y=100;A="%";l="f";break;case "p":y=100;A="%";l="r";break;case "b":case "o":case "x":case "X":"#"===n&&(Td="0"+l.toLowerCase());case "c":case "d":z=!0;m=0;break;case "s":y=-1,l="r"}"$"===n&&(Td=e[0],A=e[1]);"r"!=l||m||(l="g");null!=m&&("g"==l?m=Math.max(1,Math.min(21,m)):("e"==l||"f"==l)&&(m=Math.max(0,Math.min(20,m))));var l=Bh.get(l)||ac,P=k&&v;return function(a){if(z&&a%1)return"";var e=0>a||
0===a&&0>1/a?(a=-a,"-"):f;if(0>y){var n=F.formatPrefix(a,m);a=n.scale(a);A=n.symbol}else a*=y;a=l(a,m);var p=a.lastIndexOf("."),n=0>p?a:a.substring(0,p),p=0>p?"":d+a.substring(p+1);!k&&v&&(n=g(n));var B=Td.length+n.length+p.length+(P?0:e.length),C=q>B?Array(B=q-B+1).join(b):"";return P&&(n=g(C+n)),e+=Td,a=n+p,("<"===c?e+a+C:">"===c?C+e+a:"^"===c?C.substring(0,B>>=1)+e+a+C.substring(B):e+(P?a:C+a))+A}}}function ac(a){return a+""}function Sa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,
arguments):arguments[0])}function ab(a,d,b){function c(d){var b=a(d),e=g(b,1);return e-d>d-b?b:e}function e(b){return d(b=a(new Pb(b-1)),1),b}function g(a,b){return d(a=new Pb(+a),b),a}function f(a,c,g){a=e(a);var n=[];if(1<g)for(;c>a;)b(a)%g||n.push(new Date(+a)),d(a,1);else for(;c>a;)n.push(new Date(+a)),d(a,1);return n}a.floor=a;a.round=c;a.ceil=e;a.offset=g;a.range=f;var n=a.utc=Ea(a);return n.floor=n,n.round=Ea(c),n.ceil=Ea(e),n.offset=Ea(g),n.range=function(a,d,b){try{Pb=Sa;var c=new Sa;return c._=
a,f(c,d,b)}finally{Pb=Date}},a}function Ea(a){return function(d,b){try{Pb=Sa;var c=new Sa;return c._=d,a(c,b)._}finally{Pb=Date}}}function jb(a){function d(a){function c(d){for(var b,g,f,n=[],k=-1,q=0;++k<e;)37===a.charCodeAt(k)&&(n.push(a.substring(q,k)),null!=(g=Qg[b=a.charAt(++k)])&&(b=a.charAt(++k)),(f=E[b])&&(b=f(d,null==g?"e"===b?" ":"0":g)),n.push(b),q=k+1);return n.push(a.substring(q,k)),n.join("")}var e=a.length;return c.parse=function(d){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(b(c,
a,d,0)!=d.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);d=null!=c.Z&&Pb!==Sa;var e=new (d?Sa:Pb);return"j"in c?e.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(e.setFullYear(c.y,0,1),e.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(e.getDay()+5)%7:c.w+7*c.U-(e.getDay()+6)%7)):e.setFullYear(c.y,c.m,c.d),e.setHours(c.H+Math.floor(c.Z/100),c.M+c.Z%100,c.S,c.L),d?e._:e},c.toString=function(){return a},c}function b(a,d,c,e){for(var g,f,n,k=0,q=d.length,v=c.length;q>k;){if(e>=v)return-1;if(g=d.charCodeAt(k++),
37===g){if(n=d.charAt(k++),f=W[n in Qg?d.charAt(k++):n],!f||0>(e=f(a,c,e)))return-1}else if(g!=c.charCodeAt(e++))return-1}return e}var c=a.dateTime,e=a.date,g=a.time,f=a.periods,n=a.days,k=a.shortDays,q=a.months,v=a.shortMonths;d.utc=function(a){function b(a){try{Pb=Sa;var d=new Pb;return d._=a,c(d)}finally{Pb=Date}}var c=d(a);return b.parse=function(a){try{Pb=Sa;var d=c.parse(a);return d&&d._}finally{Pb=Date}},b.toString=c.toString,b};d.multi=d.utc.multi=bb;var m=F.map(),l=lb(n),y=vb(n),A=lb(k),
z=vb(k),P=lb(q),p=vb(q),B=lb(v),C=vb(v);f.forEach(function(a,d){m.set(a.toLowerCase(),d)});var E={a:function(a){return k[a.getDay()]},A:function(a){return n[a.getDay()]},b:function(a){return v[a.getMonth()]},B:function(a){return q[a.getMonth()]},c:d(c),d:function(a,d){return Ya(a.getDate(),d,2)},e:function(a,d){return Ya(a.getDate(),d,2)},H:function(a,d){return Ya(a.getHours(),d,2)},I:function(a,d){return Ya(a.getHours()%12||12,d,2)},j:function(a,d){return Ya(1+ea.dayOfYear(a),d,3)},L:function(a,
d){return Ya(a.getMilliseconds(),d,3)},m:function(a,d){return Ya(a.getMonth()+1,d,2)},M:function(a,d){return Ya(a.getMinutes(),d,2)},p:function(a){return f[+(12<=a.getHours())]},S:function(a,d){return Ya(a.getSeconds(),d,2)},U:function(a,d){return Ya(ea.sundayOfYear(a),d,2)},w:function(a){return a.getDay()},W:function(a,d){return Ya(ea.mondayOfYear(a),d,2)},x:d(e),X:d(g),y:function(a,d){return Ya(a.getFullYear()%100,d,2)},Y:function(a,d){return Ya(a.getFullYear()%1E4,d,4)},Z:Bb,"%":function(){return"%"}},
W={a:function(a,d,b){A.lastIndex=0;return(d=A.exec(d.substring(b)))?(a.w=z.get(d[0].toLowerCase()),b+d[0].length):-1},A:function(a,d,b){l.lastIndex=0;return(d=l.exec(d.substring(b)))?(a.w=y.get(d[0].toLowerCase()),b+d[0].length):-1},b:function(a,d,b){B.lastIndex=0;return(d=B.exec(d.substring(b)))?(a.m=C.get(d[0].toLowerCase()),b+d[0].length):-1},B:function(a,d,b){P.lastIndex=0;return(d=P.exec(d.substring(b)))?(a.m=p.get(d[0].toLowerCase()),b+d[0].length):-1},c:function(a,d,c){return b(a,E.c.toString(),
d,c)},d:Da,e:Da,H:yb,I:yb,j:Ja,L:Qb,m:ga,M:Cb,p:function(a,d,b){d=m.get(d.substring(b,b+=2).toLowerCase());return null==d?-1:(a.p=d,b)},S:ja,U:Db,w:Rb,W:mb,x:function(a,d,c){return b(a,E.x.toString(),d,c)},X:function(a,d,c){return b(a,E.X.toString(),d,c)},y:Sc,Y:Oa,Z:Eb,"%":Ua};return d}function Ya(a,d,b){var c=0>a?"-":"";a=(c?-a:a)+"";var e=a.length;return c+(b>e?Array(b-e+1).join(d)+a:a)}function lb(a){return RegExp("^(?:"+a.map(F.requote).join("|")+")","i")}function vb(a){for(var d=new t,b=-1,
c=a.length;++b<c;)d.set(a[b].toLowerCase(),b);return d}function Rb(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+1)))?(a.w=+d[0],b+d[0].length):-1}function Db(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b)))?(a.U=+d[0],b+d[0].length):-1}function mb(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b)))?(a.W=+d[0],b+d[0].length):-1}function Oa(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+4)))?(a.y=+d[0],b+d[0].length):-1}function Sc(a,d,b){nb.lastIndex=0;if(d=nb.exec(d.substring(b,
b+2))){var c=+d[0];a=(a.y=c+(68<c?1900:2E3),b+d[0].length)}else a=-1;return a}function Eb(a,d,b){return/^[+-]\d{4}$/.test(d=d.substring(b,b+5))?(a.Z=+d,b+5):-1}function ga(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+2)))?(a.m=d[0]-1,b+d[0].length):-1}function Da(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+2)))?(a.d=+d[0],b+d[0].length):-1}function Ja(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+3)))?(a.j=+d[0],b+d[0].length):-1}function yb(a,d,b){nb.lastIndex=0;return(d=
nb.exec(d.substring(b,b+2)))?(a.H=+d[0],b+d[0].length):-1}function Cb(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+2)))?(a.M=+d[0],b+d[0].length):-1}function ja(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+2)))?(a.S=+d[0],b+d[0].length):-1}function Qb(a,d,b){nb.lastIndex=0;return(d=nb.exec(d.substring(b,b+3)))?(a.L=+d[0],b+d[0].length):-1}function Bb(a){var d=a.getTimezoneOffset();a=0<d?"-":"+";var b=~~(ya(d)/60),d=ya(d)%60;return a+Ya(b,"0",2)+Ya(d,"0",2)}function Ua(a,d,b){Rg.lastIndex=
0;return(a=Rg.exec(d.substring(b,b+1)))?b+a[0].length:-1}function bb(a){for(var d=a.length,b=-1;++b<d;)a[b][0]=this(a[b][0]);return function(d){for(var b=0,c=a[b];!c[1](d);)c=a[++b];return c[0](d)}}function db(){}function Jb(a,d,b){var c=b.s=a+d,e=c-a;b.t=a-(c-e)+(d-e)}function Sb(a,d){a&&Sg.hasOwnProperty(a.type)&&Sg[a.type](a,d)}function Ka(a,d,b){var c=-1,e=a.length-b;for(d.lineStart();++c<e;)b=a[c],d.point(b[0],b[1],b[2]);d.lineEnd()}function Fb(a,d){var b=-1,c=a.length;for(d.polygonStart();++b<
c;)Ka(a[b],d,1);d.polygonEnd()}function Va(){function a(d,b){d*=wa;b=b*wa/2+xa/4;var f=d-c,n=Math.cos(b),k=Math.sin(b),q=g*k,v=e*n+q*Math.cos(f),f=q*Math.sin(f);Vd.add(Math.atan2(f,v));c=d;e=n;g=k}var d,b,c,e,g;qc.point=function(f,n){qc.point=a;c=(d=f)*wa;e=Math.cos(n=(b=n)*wa/2+xa/4);g=Math.sin(n)};qc.lineEnd=function(){a(d,b)}}function ob(a){var d=a[0];a=a[1];var b=Math.cos(a);return[b*Math.cos(d),b*Math.sin(d),Math.sin(a)]}function qb(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]}function rb(a,d){return[a[1]*
d[2]-a[2]*d[1],a[2]*d[0]-a[0]*d[2],a[0]*d[1]-a[1]*d[0]]}function zc(a,d){a[0]+=d[0];a[1]+=d[1];a[2]+=d[2]}function eb(a,d){return[a[0]*d,a[1]*d,a[2]*d]}function Xa(a){var d=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=d;a[1]/=d;a[2]/=d}function ra(a){return[Math.atan2(a[1],a[0]),J(a[2])]}function fc(a,d){return ya(a[0]-d[0])<da&&ya(a[1]-d[1])<da}function gc(a,d){a*=wa;var b=Math.cos(d*=wa);Tb(b*Math.cos(a),b*Math.sin(a),Math.sin(d))}function Tb(a,d,b){++Ue;cd+=(a-cd)/Ue;dd+=(d-dd)/Ue;Tc+=(b-Tc)/
Ue}function wb(){function a(e,g){e*=wa;var f=Math.cos(g*=wa),n=f*Math.cos(e),f=f*Math.sin(e),k=Math.sin(g),q=Math.atan2(Math.sqrt((q=b*k-c*f)*q+(q=c*n-d*k)*q+(q=d*f-b*n)*q),d*n+b*f+c*k);se+=q;Ac+=q*(d+(d=n));Bc+=q*(b+(b=f));kc+=q*(c+(c=k));Tb(d,b,c)}var d,b,c;Ic.point=function(e,g){e*=wa;var f=Math.cos(g*=wa);d=f*Math.cos(e);b=f*Math.sin(e);c=Math.sin(g);Ic.point=a;Tb(d,b,c)}}function Ub(){Ic.point=gc}function ed(){function a(d,b){d*=wa;var f=Math.cos(b*=wa),n=f*Math.cos(d),f=f*Math.sin(d),k=Math.sin(b),
q=e*k-g*f,v=g*n-c*k,m=c*f-e*n,l=Math.sqrt(q*q+v*v+m*m),y=c*n+e*f+g*k,A=l&&-U(y)/l,l=Math.atan2(l,y);qd+=A*q;rd+=A*v;Uc+=A*m;se+=l;Ac+=l*(c+(c=n));Bc+=l*(e+(e=f));kc+=l*(g+(g=k));Tb(c,e,g)}var d,b,c,e,g;Ic.point=function(f,n){d=f;b=n;Ic.point=a;f*=wa;var k=Math.cos(n*=wa);c=k*Math.cos(f);e=k*Math.sin(f);g=Math.sin(n);Tb(c,e,g)};Ic.lineEnd=function(){a(d,b);Ic.lineEnd=Ub;Ic.point=gc}}function bc(){return!0}function xb(a,d,b,c,e){var g=[],f=[];if(a.forEach(function(a){if(!(0>=(d=a.length-1))){var d,
b=a[0],c=a[d];if(fc(b,c)){e.lineStart();for(c=0;d>c;++c)e.point((b=a[c])[0],b[1]);return e.lineEnd(),void 0}d=new Y(b,a,null,!0);b=new Y(b,null,d,!1);d.o=b;g.push(d);f.push(b);d=new Y(c,a,null,!1);b=new Y(c,null,d,!0);d.o=b;g.push(d);f.push(b)}}),f.sort(d),fb(g),fb(f),g.length){a=0;d=b;for(b=f.length;b>a;++a)f[a].e=d=!d;for(var n,k=g[0];;){for(var q=k,v=!0;q.v;)if((q=q.n)===k)return;d=q.z;e.lineStart();do{if(q.v=q.o.v=!0,q.e){if(v)for(a=0,b=d.length;b>a;++a)e.point((n=d[a])[0],n[1]);else c(q.x,q.n.x,
1,e);q=q.n}else{if(v)for(d=q.p.z,a=d.length-1;0<=a;--a)e.point((n=d[a])[0],n[1]);else c(q.x,q.p.x,-1,e);q=q.p}q=q.o;d=q.z;v=!v}while(!q.v);e.lineEnd()}}}function fb(a){if(d=a.length){for(var d,b,c=0,e=a[0];++c<d;)e.n=b=a[c],b.p=e,e=b;e.n=b=a[0];b.p=e}}function Y(a,d,b,c){this.x=a;this.z=d;this.o=b;this.e=c;this.v=!1;this.n=this.p=null}function lc(a,d,b,c){return function(e,g){function f(d,b){var c=e(d,b);a(d=c[0],b=c[1])&&g.point(d,b)}function n(a,d){var b=e(a,d);P.point(b[0],b[1])}function k(){B.point=
n;P.lineStart()}function q(){B.point=f;P.lineEnd()}function v(a,d){z.push([a,d]);var b=e(a,d);E.point(b[0],b[1])}function m(){E.lineStart();z=[]}function l(){v(z[0][0],z[0][1]);E.lineEnd();var a;a=E.clean();var d=C.buffer(),b=d.length;if(z.pop(),A.push(z),z=null,b){if(1&a){a=d[0];var c,b=a.length-1,d=-1;for(g.lineStart();++d<b;)g.point((c=a[d])[0],c[1]);return g.lineEnd(),void 0}1<b&&2&a&&d.push(d.pop().concat(d.shift()));y.push(d.filter(mc))}}var y,A,z,P=d(g),p=e.invert(c[0],c[1]),B={point:f,lineStart:k,
lineEnd:q,polygonStart:function(){B.point=v;B.lineStart=m;B.lineEnd=l;y=[];A=[];g.polygonStart()},polygonEnd:function(){B.point=f;B.lineStart=k;B.lineEnd=q;y=F.merge(y);var a,d=p;a=A;var c=d[0],e=d[1],n=[Math.sin(c),-Math.cos(c),0],v=0,m=0;Vd.reset();for(var l=0,z=a.length;z>l;++l){var P=a[l],Td=P.length;if(Td)for(var C=P[0],E=C[0],d=C[1]/2+xa/4,W=Math.sin(d),H=Math.cos(d),D=1;;){D===Td&&(D=0);var d=P[D],Nb=d[0],x=d[1]/2+xa/4,sb=Math.sin(x),x=Math.cos(x),L=Nb-E,r=ya(L)>xa,W=W*sb;if(Vd.add(Math.atan2(W*
Math.sin(L),H*x+W*Math.cos(L))),v+=r?L+(0<=L?nc:-nc):L,r^E>=c^Nb>=c)C=rb(ob(C),ob(d)),Xa(C),E=rb(n,C),Xa(E),E=(r^0<=L?-1:1)*J(E[2]),(e>E||e===E&&(C[0]||C[1]))&&(m+=r^0<=L?1:-1);if(!D++)break;E=Nb;W=sb;H=x;C=d}}a=(-da>v||da>v&&0>Vd)^1&m;y.length?xb(y,fd,a,b,g):a&&(g.lineStart(),b(null,null,1,g),g.lineEnd());g.polygonEnd();y=A=null},sphere:function(){g.polygonStart();g.lineStart();b(null,null,1,g);g.lineEnd();g.polygonEnd()}},C=Kb(),E=d(C);return B}}function mc(a){return 1<a.length}function Kb(){var a,
d=[];return{lineStart:function(){d.push(a=[])},point:function(d,b){a.push([d,b])},lineEnd:e,buffer:function(){var b=d;return d=[],a=null,b},rejoin:function(){1<d.length&&d.push(d.pop().concat(d.shift()))}}}function fd(a,d){return(0>(a=a.x)[0]?a[1]-ec-da:ec-a[1])-(0>(d=d.x)[0]?d[1]-ec-da:ec-d[1])}function Vb(a){function d(a,b){return Math.cos(a)*Math.cos(b)>e}function b(a,d,c){var g=ob(a),f=ob(d),n=[1,0,0],f=rb(g,f),k=qb(f,f),g=f[0],q=k-g*g;if(!q)return!c&&a;k=e*k/q;q=-e*g/q;g=rb(n,f);n=eb(n,k);f=
eb(f,q);zc(n,f);f=qb(n,g);k=qb(g,g);q=f*f-k*(qb(n,n)-1);if(!(0>q)){var v=Math.sqrt(q),q=eb(g,(-f-v)/k);if(zc(q,n),q=ra(q),!c)return q;var m;c=a[0];var l=d[0];a=a[1];d=d[1];c>l&&(m=c,c=l,l=m);var y=l-c,A=ya(y-xa)<da,z=A||da>y;if(!A&&a>d&&(m=a,a=d,d=m),z?A?0<a+d^q[1]<(ya(q[0]-c)<da?a:d):a<=q[1]&&q[1]<=d:y>xa^(c<=q[0]&&q[0]<=l))return m=eb(g,(-f+v)/k),zc(m,n),[q,ra(m)]}}function c(d,b){var e=g?a:xa-a,f=0;return-e>d?f|=1:d>e&&(f|=2),-e>b?f|=4:b>e&&(f|=8),f}var e=Math.cos(a),g=0<e,f=ya(e)>da,n=Vc(a,6*
wa);return lc(d,function(a){var e,n,k,q,v;return{lineStart:function(){q=k=!1;v=1},point:function(m,l){var y,A=[m,l],z=d(m,l),P=g?z?0:c(m,l):z?c(m+(0>m?xa:-xa),l):0;if(!e&&(q=k=z)&&a.lineStart(),z!==k&&(y=b(e,A),(fc(e,y)||fc(A,y))&&(A[0]+=da,A[1]+=da,z=d(A[0],A[1]))),z!==k)v=0,z?(a.lineStart(),y=b(A,e),a.point(y[0],y[1])):(y=b(e,A),a.point(y[0],y[1]),a.lineEnd()),e=y;else if(f&&e&&g^z){var p;P&n||!(p=b(A,e,!0))||(v=0,g?(a.lineStart(),a.point(p[0][0],p[0][1]),a.point(p[1][0],p[1][1]),a.lineEnd()):(a.point(p[1][0],
p[1][1]),a.lineEnd(),a.lineStart(),a.point(p[0][0],p[0][1])))}!z||e&&fc(e,A)||a.point(A[0],A[1]);e=A;k=z;n=P},lineEnd:function(){k&&a.lineEnd();e=null},clean:function(){return v|(q&&k)<<1}}},n,g?[0,-a]:[-xa,a-xa])}function sd(a,d,b,c){return function(e){var g,f=e.a,n=e.b,k=f.x,f=f.y,q=0,v=1,m=n.x-k,n=n.y-f;if(g=a-k,m||!(0<g)){if(g/=m,0>m){if(q>g)return;v>g&&(v=g)}else if(0<m){if(g>v)return;g>q&&(q=g)}if(g=b-k,m||!(0>g)){if(g/=m,0>m){if(g>v)return;g>q&&(q=g)}else if(0<m){if(q>g)return;v>g&&(v=g)}if(g=
d-f,n||!(0<g)){if(g/=n,0>n){if(q>g)return;v>g&&(v=g)}else if(0<n){if(g>v)return;g>q&&(q=g)}if(g=c-f,n||!(0>g)){if(g/=n,0>n){if(g>v)return;g>q&&(q=g)}else if(0<n){if(q>g)return;v>g&&(v=g)}return 0<q&&(e.a={x:k+q*m,y:f+q*n}),1>v&&(e.b={x:k+v*m,y:f+v*n}),e}}}}}}function td(a,d,b,c){function e(c,g){return ya(c[0]-a)<da?0<g?0:3:ya(c[0]-b)<da?0<g?2:1:ya(c[1]-d)<da?0<g?1:0:0<g?3:2}function g(a,d){return f(a.x,d.x)}function f(a,d){var b=e(a,1),c=e(d,1);return b!==c?b-c:0===b?d[1]-a[1]:1===b?a[0]-d[0]:2===
b?a[1]-d[1]:d[0]-a[0]}return function(n){function k(g,n,q,v){var m=0,l=0;if(null==g||(m=e(g,q))!==(l=e(n,q))||0>f(g,n)^0<q){do v.point(0===m||3===m?a:b,1<m?c:d);while((m=(m+q+4)%4)!==l)}else v.point(n[0],n[1])}function q(e,g){e>=a&&b>=e&&g>=d&&c>=g&&n.point(e,g)}function v(e,g){e=Math.max(-tf,Math.min(tf,e));g=Math.max(-tf,Math.min(tf,g));var f=e>=a&&b>=e&&g>=d&&c>=g;if(l&&y.push([e,g]),E)A=e,z=g,P=f,E=!1,f&&(n.lineStart(),n.point(e,g));else if(f&&C)n.point(e,g);else{var k={a:{x:p,y:B},b:{x:e,y:g}};
x(k)?(C||(n.lineStart(),n.point(k.a.x,k.a.y)),n.point(k.b.x,k.b.y),f||n.lineEnd(),W=!1):f&&(n.lineStart(),n.point(e,g),W=!1)}p=e;B=g;C=f}var m,l,y,A,z,P,p,B,C,E,W,H=n,D=Kb(),x=sd(a,d,b,c),L={point:q,lineStart:function(){L.point=v;l&&l.push(y=[]);E=!0;C=!1;p=B=0/0},lineEnd:function(){m&&(v(A,z),P&&C&&D.rejoin(),m.push(D.buffer()));L.point=q;C&&n.lineEnd()},polygonStart:function(){n=D;m=[];l=[];W=!0},polygonEnd:function(){n=H;m=F.merge(m);var d;d=[a,c];for(var b=0,e=l.length,f=d[1],q=0;e>q;++q)for(var v,
A=1,z=l[q],P=z.length,p=z[0];P>A;++A)v=z[A],p[1]<=f?v[1]>f&&0<M(p,v,d)&&++b:v[1]<=f&&0>M(p,v,d)&&--b,p=v;d=0!==b;b=W&&d;e=m.length;(b||e)&&(n.polygonStart(),b&&(n.lineStart(),k(null,null,1,n),n.lineEnd()),e&&xb(m,g,d,k,n),n.polygonEnd());m=l=y=null}};return L}}function Cc(a,d){function b(c,e){return c=a(c,e),d(c[0],c[1])}return a.invert&&d.invert&&(b.invert=function(b,c){return b=d.invert(b,c),b&&a.invert(b[0],b[1])}),b}function Aa(a){var d=0,b=xa/3,c=Wd(a);a=c(d,b);return a.parallels=function(a){return arguments.length?
c(d=a[0]*xa/180,b=a[1]*xa/180):[d/xa*180,b/xa*180]},a}function Xd(a,d){function b(a,d){var c=Math.sqrt(g-2*e*Math.sin(d))/e;return[c*Math.sin(a*=e),f-c*Math.cos(a)]}var c=Math.sin(a),e=(c+Math.sin(d))/2,g=1+c*(2*e-c),f=Math.sqrt(g)/e;return b.invert=function(a,d){var b=f-d;return[Math.atan2(a,b)/e,J((g-(a*a+b*b)*e*e)/(2*e))]},b}function rc(){function a(d,b){uf+=e*d-c*b;c=d;e=b}var d,b,c,e;ud.point=function(g,f){ud.point=a;d=c=g;b=e=f};ud.lineEnd=function(){a(d,b)}}function Jc(){function a(d,b){f.push("M",
d,",",b,g)}function d(a,c){f.push("M",a,",",c);n.point=b}function b(a,d){f.push("L",a,",",d)}function c(){n.point=a}function e(){f.push("Z")}var g=vd(4.5),f=[],n={point:a,lineStart:function(){n.point=d},lineEnd:c,polygonStart:function(){n.lineEnd=e},polygonEnd:function(){n.lineEnd=c;n.point=a},pointRadius:function(a){return g=vd(a),n},result:function(){if(f.length){var a=f.join("");return f=[],a}}};return n}function vd(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}
function Wb(a,d){cd+=a;dd+=d;++Tc}function wd(){function a(c,e){var g=c-d,f=e-b,g=Math.sqrt(g*g+f*f);Ac+=g*(d+c)/2;Bc+=g*(b+e)/2;kc+=g;Wb(d=c,b=e)}var d,b;Kc.point=function(c,e){Kc.point=a;Wb(d=c,b=e)}}function xd(){Kc.point=Wb}function yd(){function a(d,b){var g=d-c,f=b-e,g=Math.sqrt(g*g+f*f);Ac+=g*(c+d)/2;Bc+=g*(e+b)/2;kc+=g;g=e*d-c*b;qd+=g*(c+d);rd+=g*(e+b);Uc+=3*g;Wb(c=d,e=b)}var d,b,c,e;Kc.point=function(g,f){Kc.point=a;Wb(d=c=g,b=e=f)};Kc.lineEnd=function(){a(d,b)}}function te(a){function d(b,
c){a.moveTo(b,c);a.arc(b,c,n,0,nc)}function b(d,e){a.moveTo(d,e);k.point=c}function c(d,b){a.lineTo(d,b)}function g(){k.point=d}function f(){a.closePath()}var n=4.5,k={point:d,lineStart:function(){k.point=b},lineEnd:g,polygonStart:function(){k.lineEnd=f},polygonEnd:function(){k.lineEnd=g;k.point=d},pointRadius:function(a){return n=a,k},result:e};return k}function Dc(a){function d(a){return(n?c:b)(a)}function b(d){return sb(d,function(b,c){b=a(b,c);d.point(b[0],b[1])})}function c(d){function b(c,e){c=
a(c,e);d.point(c[0],c[1])}function g(){C=0/0;Nb.point=f;d.lineStart()}function f(b,c){var g=ob([b,c]),k=a(b,c);e(C,E,B,W,H,D,C=k[0],E=k[1],B=b,W=g[0],H=g[1],D=g[2],n,d);d.point(C,E)}function k(){Nb.point=b;d.lineEnd()}function q(){g();Nb.point=v;Nb.lineEnd=m}function v(a,d){f(l=a,d);y=C;A=E;z=W;P=H;p=D;Nb.point=f}function m(){e(C,E,B,W,H,D,y,A,l,z,P,p,n,d);Nb.lineEnd=k;k()}var l,y,A,z,P,p,B,C,E,W,H,D,Nb={point:b,lineStart:g,lineEnd:k,polygonStart:function(){d.polygonStart();Nb.lineStart=q},polygonEnd:function(){d.polygonEnd();
Nb.lineStart=g}};return Nb}function e(d,b,c,n,k,q,v,m,l,y,A,z,P,p){var B=v-d,C=m-b,E=B*B+C*C;if(E>4*g&&P--){var W=n+y,H=k+A,D=q+z,Nb=Math.sqrt(W*W+H*H+D*D),x=Math.asin(D/=Nb),L=ya(ya(D)-1)<da||ya(c-l)<da?(c+l)/2:Math.atan2(H,W),sb=a(L,x),x=sb[0],sb=sb[1],r=x-d,T=sb-b,Ba=C*r-B*T;(Ba*Ba/E>g||0.3<ya((B*r+C*T)/E-0.5)||f>n*y+k*A+q*z)&&(e(d,b,c,n,k,q,x,sb,L,W/=Nb,H/=Nb,D,P,p),p.point(x,sb),e(x,sb,L,W,H,D,v,m,l,y,A,z,P,p))}}var g=0.5,f=Math.cos(30*wa),n=16;return d.precision=function(a){return arguments.length?
(n=0<(g=a*a)&&16,d):Math.sqrt(g)},d}function Lc(a){var d=Dc(function(d,b){return a([d*Za,b*Za])});return function(a){return Yd(d(a))}}function Zd(a){this.stream=a}function sb(a,d){return{point:d,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Gb(a){return Wd(function(){return a})()}function Wd(a){function d(a){return a=n(a[0]*wa,a[1]*wa),[a[0]*l+k,q-a[1]*l]}function b(a){return a=
n.invert((a[0]-k)/l,(q-a[1])/l),a&&[a[0]*Za,a[1]*Za]}function c(){n=Cc(f=ue(p,B,C),g);var a=g(z,P);return k=y-a[0]*l,q=A+a[1]*l,e()}function e(){return v&&(v.valid=!1,v=null),d}var g,f,n,k,q,v,m=Dc(function(a,d){return a=g(a,d),[a[0]*l+k,q-a[1]*l]}),l=150,y=480,A=250,z=0,P=0,p=0,B=0,C=0,E=Tg,W=Ca,H=null,D=null;return d.stream=function(a){return v&&(v.valid=!1),v=Yd(E(f,m(W(a)))),v.valid=!0,v},d.clipAngle=function(a){return arguments.length?(E=null==a?(H=a,Tg):Vb((H=+a)*wa),e()):H},d.clipExtent=function(a){return arguments.length?
(D=a,W=a?td(a[0][0],a[0][1],a[1][0],a[1][1]):Ca,e()):D},d.scale=function(a){return arguments.length?(l=+a,c()):l},d.translate=function(a){return arguments.length?(y=+a[0],A=+a[1],c()):[y,A]},d.center=function(a){return arguments.length?(z=a[0]%360*wa,P=a[1]%360*wa,c()):[z*Za,P*Za]},d.rotate=function(a){return arguments.length?(p=a[0]%360*wa,B=a[1]%360*wa,C=2<a.length?a[2]%360*wa:0,c()):[p*Za,B*Za,C*Za]},F.rebind(d,m,"precision"),function(){return g=a.apply(this,arguments),d.invert=g.invert&&b,c()}}
function Yd(a){return sb(a,function(d,b){a.point(d*wa,b*wa)})}function oc(a,d){return[a,d]}function vf(a,d){return[a>xa?a-nc:-xa>a?a+nc:a,d]}function ue(a,d,b){return a?d||b?Cc($d(a),zd(d,b)):$d(a):d||b?zd(d,b):vf}function ve(a){return function(d,b){return d+=a,[d>xa?d-nc:-xa>d?d+nc:d,b]}}function $d(a){var d=ve(a);return d.invert=ve(-a),d}function zd(a,d){function b(a,d){var n=Math.cos(d),k=Math.cos(a)*n,n=Math.sin(a)*n,q=Math.sin(d),v=q*c+k*e;return[Math.atan2(n*g-v*f,k*c-q*e),J(v*g+n*f)]}var c=
Math.cos(a),e=Math.sin(a),g=Math.cos(d),f=Math.sin(d);return b.invert=function(a,d){var b=Math.cos(d),n=Math.cos(a)*b,b=Math.sin(a)*b,k=Math.sin(d),q=k*g-b*f;return[Math.atan2(b*g+k*f,n*c+q*e),J(q*c-n*e)]},b}function Vc(a,d){var b=Math.cos(a),c=Math.sin(a);return function(e,g,f,n){var k=f*d;null!=e?(e=Ve(b,e),g=Ve(b,g),(0<f?g>e:e>g)&&(e+=f*nc)):(e=a+f*nc,g=a-0.5*k);for(var q;0<f?e>g:g>e;e-=k)n.point((q=ra([b,-c*Math.cos(e),-c*Math.sin(e)]))[0],q[1])}}function Ve(a,d){var b=ob(d);b[0]-=a;Xa(b);var c=
U(-b[1]);return((0>-b[2]?-c:c)+2*Math.PI-da)%(2*Math.PI)}function ta(a,d,b){var c=F.range(a,d-da,b).concat(d);return function(a){return c.map(function(d){return[a,d]})}}function we(a,d,b){var c=F.range(a,d-da,b).concat(d);return function(a){return c.map(function(d){return[d,a]})}}function ae(a){return a.source}function hc(a){return a.target}function ic(a,d,b,c){var e=Math.cos(d),g=Math.sin(d),f=Math.cos(c),n=Math.sin(c),k=e*Math.cos(a),q=e*Math.sin(a),v=f*Math.cos(b),m=f*Math.sin(b),l=2*Math.asin(Math.sqrt(X(c-
d)+e*f*X(b-a))),y=1/Math.sin(l);b=l?function(a){var d=Math.sin(a*=l)*y,b=Math.sin(l-a)*y;a=b*k+d*v;var c=b*q+d*m,d=b*g+d*n;return[Math.atan2(c,a)*Za,Math.atan2(d,Math.sqrt(a*a+c*c))*Za]}:function(){return[a*Za,d*Za]};return b.distance=l,b}function Mc(a,d){function b(d,c){var e=Math.cos(d),g=Math.cos(c),e=a(e*g);return[e*g*Math.sin(d),e*Math.sin(c)]}return b.invert=function(a,b){var c=Math.sqrt(a*a+b*b),e=d(c),g=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*g,c*e),Math.asin(c&&b*g/c)]},b}function Ad(a,
d){function b(a,d){var c=ya(ya(d)-ec)<da?0:g/Math.pow(Math.tan(xa/4+d/2),e);return[c*Math.sin(e*a),g-c*Math.cos(e*a)]}var c=Math.cos(a),e=a===d?Math.sin(a):Math.log(c/Math.cos(d))/Math.log(Math.tan(xa/4+d/2)/Math.tan(xa/4+a/2)),g=c*Math.pow(Math.tan(xa/4+a/2),e)/e;return e?(b.invert=function(a,d){var b=g-d,c=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+b*b);return[Math.atan2(a,b)/e,2*Math.atan(Math.pow(g/c,1/e))-ec]},b):gd}function sc(a,d){function b(a,d){var c=g-d;return[c*Math.sin(e*a),g-c*Math.cos(e*a)]}var c=
Math.cos(a),e=a===d?Math.sin(a):(c-Math.cos(d))/(d-a),g=c/e+a;return ya(e)<da?oc:(b.invert=function(a,d){var b=g-d;return[Math.atan2(a,b)/e,g-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+b*b)]},b)}function gd(a,d){return[a,Math.log(Math.tan(xa/4+d/2))]}function We(a){var d,b=Gb(a),c=b.scale,e=b.translate,g=b.clipExtent;return b.scale=function(){var a=c.apply(b,arguments);return a===b?d?b.clipExtent(null):b:a},b.translate=function(){var a=e.apply(b,arguments);return a===b?d?b.clipExtent(null):b:a},b.clipExtent=
function(a){var f=g.apply(b,arguments);if(f===b){if(d=null==a){var n=xa*c(),k=e();g([[k[0]-n,k[1]-n],[k[0]+n,k[1]+n]])}}else d&&(f=null);return f},b.clipExtent(null)}function be(a,d){return[Math.log(Math.tan(xa/4+d/2)),-a]}function hd(a){return a[0]}function ce(a){return a[1]}function de(a){for(var d=a.length,b=[0,1],c=2,e=2;d>e;e++){for(;1<c&&0>=M(a[b[c-2]],a[b[c-1]],a[e]);)--c;b[c++]=e}return b.slice(0,c)}function xe(a,d){return a[0]-d[0]||a[1]-d[1]}function ye(a,d,b){return(b[0]-d[0])*(a[1]-d[1])<
(b[1]-d[1])*(a[0]-d[0])}function Xe(a,d,b,c){var e=a[0],g=b[0],f=d[0]-e,n=c[0]-g;a=a[1];b=b[1];d=d[1]-a;c=c[1]-b;g=(n*(a-b)-c*(e-g))/(c*f-n*d);return[e+g*f,a+g*d]}function wf(a){var d=a[0];a=a[a.length-1];return!(d[0]-a[0]||d[1]-a[1])}function ee(){fe(this);this.edge=this.site=this.circle=null}function zb(a){var d=Ug.pop()||new ee;return d.site=a,d}function ze(a){tb(a);Ae.remove(a);Ug.push(a);fe(a)}function Be(a,d){var b=a.site,c=b.x,e=b.y,g=e-d;if(!g)return c;var f=a.P;if(!f)return-1/0;var b=f.site,
f=b.x,b=b.y,n=b-d;if(!n)return f;var k=f-c,q=1/g-1/n,v=k/n;return q?(-v+Math.sqrt(v*v-2*q*(k*k/(-2*n)-b+n/2+e-g/2)))/q+c:(c+f)/2}function Bd(a){this.site=a;this.edges=[]}function Ye(a,d){return d.angle-a.angle}function Ha(){fe(this);this.x=this.y=this.arc=this.site=this.cy=null}function cc(a){var d=a.P,b=a.N;if(d&&b){var c=d.site,d=a.site,e=b.site;if(c!==e){var b=d.x,g=d.y,f=c.x-b,n=c.y-g,c=e.x-b,e=e.y-g,k=2*(f*e-n*c);if(!(k>=-hg)){var q=f*f+n*n,v=c*c+e*e,n=(e*q-n*v)/k,f=(f*v-c*q)/k,e=f+g,g=Vg.pop()||
new Ha;g.arc=a;g.site=d;g.x=n+b;g.y=e+Math.sqrt(n*n+f*f);g.cy=e;a.circle=g;a=null;for(d=Ze._;d;)if(g.y<d.y||g.y===d.y&&g.x<=d.x){if(!d.L){a=d.P;break}d=d.L}else{if(!d.R){a=d;break}d=d.R}Ze.insert(a,g);a||(ig=g)}}}}function tb(a){var d=a.circle;d&&(d.P||(ig=d.N),Ze.remove(d),Vg.push(d),fe(d),a.circle=null)}function Xb(a,d){var b=a.b;if(b)return!0;var c,e,g=a.a,b=d[0][0],f=d[1][0],n=d[0][1],k=d[1][1],q=a.l,v=a.r,m=q.x,q=q.y,l=v.x,v=v.y;e=(m+l)/2;if(v===q){if(b>e||e>=f)return;if(m>l){if(g){if(g.y>=k)return}else g=
{x:e,y:n};b={x:e,y:k}}else{if(g){if(g.y<n)return}else g={x:e,y:k};b={x:e,y:n}}}else if(c=(m-l)/(v-q),e=(q+v)/2-c*e,-1>c||1<c)if(m>l){if(g){if(g.y>=k)return}else g={x:(n-e)/c,y:n};b={x:(k-e)/c,y:k}}else{if(g){if(g.y<n)return}else g={x:(k-e)/c,y:k};b={x:(n-e)/c,y:n}}else if(v>q){if(g){if(g.x>=f)return}else g={x:b,y:c*b+e};b={x:f,y:c*f+e}}else{if(g){if(g.x<b)return}else g={x:f,y:c*f+e};b={x:b,y:c*b+e}}return a.a=g,a.b=b,!0}function tc(a,d){this.l=a;this.r=d;this.a=this.b=null}function ge(a,d,b,c){var e=
new tc(a,d);return Ce.push(e),b&&Nc(e,a,d,b),c&&Nc(e,d,a,c),he[a.i].edges.push(new Cd(e,a,d)),he[d.i].edges.push(new Cd(e,d,a)),e}function Ec(a,d,b){a=new tc(a,null);return a.a=d,a.b=b,Ce.push(a),a}function Nc(a,d,b,c){a.a||a.b?a.l===b?a.b=c:a.a=c:(a.a=c,a.l=d,a.r=b)}function Cd(a,d,b){var c=a.a,e=a.b;this.edge=a;this.site=d;this.angle=b?Math.atan2(b.y-d.y,b.x-d.x):a.l===d?Math.atan2(e.x-c.x,c.y-e.y):Math.atan2(c.x-e.x,e.y-c.y)}function Fc(){this._=null}function fe(a){a.U=a.C=a.L=a.R=a.P=a.N=null}
function Hb(a,d){var b=d.R,c=d.U;c?c.L===d?c.L=b:c.R=b:a._=b;b.U=c;d.U=b;d.R=b.L;d.R&&(d.R.U=d);b.L=d}function Dd(a,d){var b=d.L,c=d.U;c?c.L===d?c.L=b:c.R=b:a._=b;b.U=c;d.U=b;d.L=b.R;d.L&&(d.L.U=d);b.R=d}function pc(a){for(;a.L;)a=a.L;return a}function De(a,d){var b,c,e,g=a.sort(Ee).pop();Ce=[];he=Array(a.length);Ae=new Fc;for(Ze=new Fc;;)if(e=ig,g&&(!e||g.y<e.y||g.y===e.y&&g.x<e.x)){if(g.x!==b||g.y!==c){he[g.i]=new Bd(g);b=g;for(var f=c=void 0,n=void 0,k=void 0,q=b.x,v=b.y,m=Ae._;m;)if(n=Be(m,v)-
q,n>da)m=m.L;else{var l=q,y;var A=m;y=v;var z=A.N;z?y=Be(z,y):(A=A.site,y=A.y===y?A.x:1/0);if(k=l-y,!(k>da)){n>-da?(c=m.P,f=m):k>-da?(c=m,f=m.N):c=f=m;break}if(!m.R){c=m;break}m=m.R}n=zb(b);if(Ae.insert(c,n),c||f)if(c===f)tb(c),f=zb(c.site),Ae.insert(n,f),n.edge=f.edge=ge(c.site,n.site),cc(c),cc(f);else if(f){tb(c);tb(f);k=c.site;v=k.x;m=k.y;l=b.x-v;y=b.y-m;var q=f.site,A=q.x-v,z=q.y-m,P=2*(l*z-y*A),p=l*l+y*y,B=A*A+z*z,v={x:(z*p-y*B)/P+v,y:(l*B-A*p)/P+m};Nc(f.edge,k,q,v);n.edge=ge(k,b,null,v);f.edge=
ge(b,q,null,v);cc(c);cc(f)}else n.edge=ge(c.site,n.site);b=g.x;c=g.y}g=a.pop()}else{if(!e)break;q=e.arc;f=q.circle;k=f.x;v=f.cy;f={x:k,y:v};l=q.P;m=q.N;n=[q];ze(q);for(q=l;q.circle&&ya(k-q.circle.x)<da&&ya(v-q.circle.cy)<da;)l=q.P,n.unshift(q),ze(q),q=l;n.unshift(q);tb(q);for(l=m;l.circle&&ya(k-l.circle.x)<da&&ya(v-l.circle.cy)<da;)m=l.N,n.push(l),ze(l),l=m;n.push(l);tb(l);k=void 0;v=n.length;for(k=1;v>k;++k)l=n[k],q=n[k-1],Nc(l.edge,q.site,l.site,f);q=n[0];l=n[v-1];l.edge=ge(q.site,l.site,null,f);
cc(q);cc(l)}if(d){g=Ce;b=sd(d[0][0],d[0][1],d[1][0],d[1][1]);for(c=g.length;c--;)e=g[c],(!Xb(e,d)||!b(e)||ya(e.a.x-e.b.x)<da&&ya(e.a.y-e.b.y)<da)&&(e.a=e.b=null,g.splice(c,1));var C,q=d[0][0],v=d[1][0],m=d[0][1],l=d[1][1];y=he;for(A=y.length;A--;)if(C=y[A],C&&C.prepare())for(f=C.edges,n=f.length,c=0;n>c;)k=f[c].end(),g=k.x,b=k.y,z=f[++c%n].start(),e=z.x,z=z.y,(ya(g-e)>da||ya(b-z)>da)&&(f.splice(c,0,new Cd(Ec(C.site,k,ya(g-q)<da&&l-b>da?{x:q,y:ya(e-q)<da?z:l}:ya(b-l)<da&&v-g>da?{x:ya(z-l)<da?e:v,y:l}:
ya(g-v)<da&&b-m>da?{x:v,y:ya(e-v)<da?z:m}:ya(b-m)<da&&g-q>da?{x:ya(z-m)<da?e:q,y:m}:null),C.site,null)),++n)}C={cells:he,edges:Ce};return Ae=Ze=Ce=he=null,C}function Ee(a,d){return d.y-a.y||d.x-a.x}function xf(a){return a.x}function uc(a){return a.y}function Ed(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Fd(a,d,b,c,e,g){if(!a(d,b,c,e,g)){var f=0.5*(b+e),n=0.5*(c+g);d=d.nodes;d[0]&&Fd(a,d[0],b,c,f,n);d[1]&&Fd(a,d[1],f,c,e,n);d[2]&&Fd(a,d[2],b,n,f,g);d[3]&&Fd(a,d[3],f,n,e,g)}}function Gd(a,
d){a=F.rgb(a);d=F.rgb(d);var b=a.r,c=a.g,e=a.b,g=d.r-b,f=d.g-c,n=d.b-e;return function(a){return"#"+Ma(Math.round(b+g*a))+Ma(Math.round(c+f*a))+Ma(Math.round(e+n*a))}}function qa(a,d){var b,c={},e={};for(b in a)b in d?c[b]=Wc(a[b],d[b]):e[b]=a[b];for(b in d)b in a||(e[b]=d[b]);return function(a){for(b in c)e[b]=c[b](a);return e}}function jc(a,d){return d-=a=+a,function(b){return a+d*b}}function vc(a,d){var b,c,e,g,f=0,n=[],k=[];a+="";d+="";for(c=yf.lastIndex=0;b=yf.exec(d);++c)b.index&&n.push(d.substring(f,
b.index)),k.push({i:n.length,x:b[0]}),n.push(null),f=yf.lastIndex;f<d.length&&n.push(d.substring(f));c=0;for(e=k.length;(b=yf.exec(a))&&e>c;++c)if(g=k[c],g.x==b[0]){if(g.i)if(null==n[g.i+1])for(n[g.i-1]+=g.x,n.splice(g.i,1),b=c+1;e>b;++b)k[b].i--;else for(n[g.i-1]+=g.x+n[g.i+1],n.splice(g.i,2),b=c+1;e>b;++b)k[b].i-=2;else if(null==n[g.i+1])n[g.i]=g.x;else for(n[g.i]=g.x+n[g.i+1],n.splice(g.i+1,1),b=c+1;e>b;++b)k[b].i--;k.splice(c,1);e--;c--}else g.x=jc(parseFloat(b[0]),parseFloat(g.x));for(;e>c;)g=
k.pop(),null==n[g.i+1]?n[g.i]=g.x:(n[g.i]=g.x+n[g.i+1],n.splice(g.i+1,1)),e--;return 1===n.length?null==n[0]?(g=k[0].x,function(a){return g(a)+""}):function(){return d}:function(a){for(c=0;e>c;++c)n[(g=k[c]).i]=g.x(a);return n.join("")}}function Wc(a,d){for(var b,c=F.interpolators.length;0<=--c&&!(b=F.interpolators[c](a,d)););return b}function gb(a,d){var b,c=[],e=[],g=a.length,f=d.length,n=Math.min(a.length,d.length);for(b=0;n>b;++b)c.push(Wc(a[b],d[b]));for(;g>b;++b)e[b]=a[b];for(;f>b;++b)e[b]=
d[b];return function(a){for(b=0;n>b;++b)e[b]=c[b](a);return e}}function ie(a){return function(d){return 0>=d?0:1<=d?1:a(d)}}function Hd(a){return function(d){return 1-a(1-d)}}function Id(a){return function(d){return 0.5*(0.5>d?a(2*d):2-a(2-2*d))}}function jg(a){return a*a}function $e(a){return a*a*a}function af(a){if(0>=a)return 0;if(1<=a)return 1;var d=a*a,b=d*a;return 4*(0.5>a?b:3*(a-d)+b-0.75)}function Fe(a){return 1-Math.cos(a*ec)}function Ge(a){return Math.pow(2,10*(a-1))}function zf(a){return 1-
Math.sqrt(1-a*a)}function kg(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function He(a,d){return d-=a,function(b){return Math.round(a+d*b)}}function Ie(a){var d=[a.a,a.b],b=[a.c,a.d],c=Je(d),e=d[0]*b[0]+d[1]*b[1],g;g=-e;g=(b[0]+=g*d[0],b[1]+=g*d[1],b);g=Je(g)||0;d[0]*b[1]<b[0]*d[1]&&(d[0]*=-1,d[1]*=-1,c*=-1,e*=-1);this.rotate=(c?Math.atan2(d[1],d[0]):Math.atan2(-b[0],b[1]))*Za;this.translate=[a.e,a.f];
this.scale=[c,g];this.skew=g?Math.atan2(e,g)*Za:0}function Je(a){var d=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return d&&(a[0]/=d,a[1]/=d),d}function bf(a,d){var b,c=[],e=[],g=F.transform(a),f=F.transform(d),n=g.translate,k=f.translate,q=g.rotate,v=f.rotate,m=g.skew,l=f.skew,g=g.scale,f=f.scale;return n[0]!=k[0]||n[1]!=k[1]?(c.push("translate(",null,",",null,")"),e.push({i:1,x:jc(n[0],k[0])},{i:3,x:jc(n[1],k[1])})):k[0]||k[1]?c.push("translate("+k+")"):c.push(""),q!=v?(180<q-v?v+=360:180<v-q&&(q+=360),e.push({i:c.push(c.pop()+
"rotate(",null,")")-2,x:jc(q,v)})):v&&c.push(c.pop()+"rotate("+v+")"),m!=l?e.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:jc(m,l)}):l&&c.push(c.pop()+"skewX("+l+")"),g[0]!=f[0]||g[1]!=f[1]?(b=c.push(c.pop()+"scale(",null,",",null,")"),e.push({i:b-4,x:jc(g[0],f[0])},{i:b-2,x:jc(g[1],f[1])})):(1!=f[0]||1!=f[1])&&c.push(c.pop()+"scale("+f+")"),b=e.length,function(a){for(var d,g=-1;++g<b;)c[(d=e[g]).i]=d.x(a);return c.join("")}}function Jd(a,d){return d=d-(a=+a)?1/(d-a):0,function(b){return(b-a)*d}}
function Yb(a,d){return d=d-(a=+a)?1/(d-a):0,function(b){return Math.max(0,Math.min(1,(b-a)*d))}}function Kd(a){var d=a.source;a=a.target;var b;var c=a;if(d===c)b=d;else{b=Zb(d);for(var c=Zb(c),e=b.pop(),g=c.pop(),f=null;e===g;)f=e,e=b.pop(),g=c.pop();b=f}for(c=[d];d!==b;)d=d.parent,c.push(d);for(d=c.length;a!==b;)c.splice(d,0,a),a=a.parent;return c}function Zb(a){for(var d=[],b=a.parent;null!=b;)d.push(a),a=b,b=b.parent;return d.push(a),d}function lg(a){a.fixed|=2}function Xc(a){a.fixed&=-7}function Lb(a){a.fixed|=
4;a.px=a.x;a.py=a.y}function mg(a){a.fixed&=-5}function Af(a,d,b){var c=0,e=0;if(a.charge=0,!a.leaf)for(var g,f=a.nodes,n=f.length,k=-1;++k<n;)g=f[k],null!=g&&(Af(g,d,b),a.charge+=g.charge,c+=g.charge*g.cx,e+=g.charge*g.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),d*=b[a.point.index],a.charge+=a.pointCharge=d,c+=d*a.point.x,e+=d*a.point.y);a.cx=c/a.charge;a.cy=e/a.charge}function $b(a,d){return F.rebind(a,d,"sort","children","value"),a.nodes=a,a.links=ng,a}function cf(a){return a.children}
function df(a){return a.value}function og(a,d){return d.value-a.value}function ng(a){return F.merge(a.map(function(a){return(a.children||[]).map(function(d){return{source:a,target:d}})}))}function pg(a){return a.x}function je(a){return a.y}function ef(a,d,b){a.y0=d;a.y=b}function Yc(a){return F.range(a.length)}function ff(a){var d=-1;a=a[0].length;for(var b=[];++d<a;)b[d]=0;return b}function id(a){for(var d,b=1,c=0,e=a[0][1],g=a.length;g>b;++b)(d=a[b][1])>e&&(c=b,e=d);return c}function Bf(a){return a.reduce(gf,
0)}function gf(a,d){return a+d[1]}function Cf(a,d){return jd(a,Math.ceil(Math.log(d.length)/Math.LN2+1))}function jd(a,d){for(var b=-1,c=+a[0],e=(a[1]-c)/d,g=[];++b<=d;)g[b]=e*b+c;return g}function kd(a){return[F.min(a),F.max(a)]}function Df(a,d){return a.parent==d.parent?1:2}function Ld(a){var d=a.children;return d&&d.length?d[0]:a._tree.thread}function Md(a){var d,b=a.children;return b&&(d=b.length)?b[d-1]:a._tree.thread}function ke(a,d){var b=a.children;if(b&&(e=b.length))for(var c,e,g=-1;++g<
e;)0<d(c=ke(b[g],d),a)&&(a=c);return a}function Ke(a,d){return a.x-d.x}function wc(a,d){return d.x-a.x}function Ef(a,d){return a.depth-d.depth}function xc(a,d){function b(a,c){var e=a.children;if(e&&(f=e.length))for(var g,f,n=null,k=-1;++k<f;)g=e[k],b(g,n),n=g;d(a,c)}b(a,null)}function hf(a,d){return a.value-d.value}function le(a,d){var b=a._pack_next;a._pack_next=d;d._pack_prev=a;d._pack_next=b;b._pack_prev=d}function ld(a,d){a._pack_next=d;d._pack_prev=a}function Le(a,d){var b=d.x-a.x,c=d.y-a.y,
e=a.r+d.r;return 0.999*e*e>b*b+c*c}function jf(a){function d(a){v=Math.min(a.x-a.r,v);m=Math.max(a.x+a.r,m);l=Math.min(a.y-a.r,l);y=Math.max(a.y+a.r,y)}if((b=a.children)&&(q=b.length)){var b,c,e,g,f,n,k,q,v=1/0,m=-1/0,l=1/0,y=-1/0;if(b.forEach(Ff),c=b[0],c.x=-c.r,c.y=0,d(c),1<q&&(e=b[1],e.x=e.r,e.y=0,d(e),2<q))for(g=b[2],Me(c,e,g),d(g),le(c,g),c._pack_prev=g,le(g,e),e=c._pack_next,f=3;q>f;f++){Me(c,e,g=b[f]);var A=0,z=1,P=1;for(n=e._pack_next;n!==e;n=n._pack_next,z++)if(Le(n,g)){A=1;break}if(1==A)for(k=
c._pack_prev;k!==n._pack_prev&&!Le(k,g);k=k._pack_prev,P++);A?(P>z||z==P&&e.r<c.r?ld(c,e=n):ld(c=k,e),f--):(le(c,g),e=g,d(g))}c=(v+m)/2;e=(l+y)/2;for(f=n=0;q>f;f++)g=b[f],g.x-=c,g.y-=e,n=Math.max(n,g.r+Math.sqrt(g.x*g.x+g.y*g.y));a.r=n;b.forEach(me)}}function Ff(a){a._pack_next=a._pack_prev=a}function me(a){delete a._pack_next;delete a._pack_prev}function Nd(a,d,b,c){var e=a.children;if(a.x=d+=c*a.x,a.y=b+=c*a.y,a.r*=c,e){a=-1;for(var g=e.length;++a<g;)Nd(e[a],d,b,c)}}function Me(a,d,b){var c=a.r+
b.r,e=d.x-a.x,g=d.y-a.y;if(c&&(e||g)){var f=d.r+b.r,n=e*e+g*g,f=f*f,c=c*c;d=0.5+(c-f)/(2*n);f=Math.sqrt(Math.max(0,2*f*(c+n)-(c-=n)*c-f*f))/(2*n);b.x=a.x+d*e+f*g;b.y=a.y+d*g-f*e}else b.x=a.x+c,b.y=a.y}function md(a){return 1+F.max(a,function(a){return a.y})}function Ne(a){return a.reduce(function(a,d){return a+d.x},0)/a.length}function Gc(a){var d=a.children;return d&&d.length?Gc(d[0]):a}function Gf(a){var d,b=a.children;return b&&(d=b.length)?Gf(b[d-1]):a}function Od(a){return{x:a.x,y:a.y,dx:a.dx,
dy:a.dy}}function Oc(a,d){var b=a.x+d[3],c=a.y+d[0],e=a.dx-d[1]-d[3],g=a.dy-d[0]-d[2];return 0>e&&(b+=e/2,e=0),0>g&&(c+=g/2,g=0),{x:b,y:c,dx:e,dy:g}}function Pd(a){var d=a[0];a=a[a.length-1];return a>d?[d,a]:[a,d]}function Oe(a){return a.rangeExtent?a.rangeExtent():Pd(a.range())}function qg(a,d,b,c){var e=b(a[0],a[1]),g=c(d[0],d[1]);return function(a){return g(e(a))}}function Ib(a,d){var b,c=0,e=a.length-1,g=a[c],f=a[e];return g>f&&(b=c,c=e,e=b,b=g,g=f,f=b),a[c]=d.floor(g),a[e]=d.ceil(f),a}function Hf(a){return a?
{floor:function(d){return Math.floor(d/a)*a},ceil:function(d){return Math.ceil(d/a)*a}}:Ch}function ne(a,d,b,c){var e=[],g=[],f=0,n=Math.min(a.length,d.length)-1;for(a[n]<a[0]&&(a=a.slice().reverse(),d=d.slice().reverse());++f<=n;)e.push(b(a[f-1],a[f])),g.push(c(d[f-1],d[f]));return function(d){var b=F.bisect(a,d,1,n)-1;return g[b](e[b](d))}}function Pc(a,d,b,c){function e(){var k=2<Math.min(a.length,d.length)?ne:qg,q=c?Yb:Jd;return f=k(a,d,q,b),n=k(d,a,q,Wc),g}function g(a){return f(a)}var f,n;return g.invert=
function(a){return n(a)},g.domain=function(d){return arguments.length?(a=d.map(Number),e()):a},g.range=function(a){return arguments.length?(d=a,e()):d},g.rangeRound=function(a){return g.range(a).interpolate(He)},g.clamp=function(a){return arguments.length?(c=a,e()):c},g.interpolate=function(a){return arguments.length?(b=a,e()):b},g.ticks=function(d){return F.range.apply(F,dc(a,d))},g.tickFormat=function(d,b){return Pe(a,d,b)},g.nice=function(d){return Ib(a,Hf(dc(a,d)[2])),e()},g.copy=function(){return Pc(a,
d,b,c)},e()}function Qd(a,d){return F.rebind(a,d,"range","rangeRound","interpolate","clamp")}function dc(a,d){null==d&&(d=10);var b=Pd(a),c=b[1]-b[0],e=Math.pow(10,Math.floor(Math.log(c/d)/Math.LN10)),c=d/c*e;return 0.15>=c?e*=10:0.35>=c?e*=5:0.75>=c&&(e*=2),b[0]=Math.ceil(b[0]/e)*e,b[1]=Math.floor(b[1]/e)*e+0.5*e,b[2]=e,b}function Pe(a,d,b){var c=dc(a,d);return F.format(b?b.replace(Pg,function(a,d,b,e,g,f,n,k,q,v){return[d,b,e,g,f,n,k,q||"."+rg(v,c),v].join("")}):",."+Rd(c[2])+"f")}function Rd(a){return-Math.floor(Math.log(a)/
Math.LN10+0.01)}function rg(a,d){var b=Rd(d[2]);return a in Dh?Math.abs(b-Rd(Math.max(Math.abs(d[0]),Math.abs(d[1]))))+ +("e"!==a):b-2*("%"===a)}function If(a,d,b,c){function e(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(d)}function g(a){return b?Math.pow(d,a):-Math.pow(d,-a)}function f(d){return a(e(d))}return f.invert=function(d){return g(a.invert(d))},f.domain=function(d){return arguments.length?(b=0<=d[0],a.domain((c=d.map(Number)).map(e)),f):c},f.base=function(b){return arguments.length?
(d=+b,a.domain(c.map(e)),f):d},f.nice=function(){var d=Ib(c.map(e),b?Math:Eh);return a.domain(d),c=d.map(g),f},f.ticks=function(){var a=Pd(c),f=[],n=a[0],a=a[1],k=Math.floor(e(n)),q=Math.ceil(e(a)),v=d%1?2:d;if(isFinite(q-k)){if(b){for(;q>k;k++)for(var m=1;v>m;m++)f.push(g(k)*m);f.push(g(k))}else for(f.push(g(k));k++<q;)for(m=v-1;0<m;m--)f.push(g(k)*m);for(k=0;f[k]<n;k++);for(q=f.length;f[q-1]>a;q--);f=f.slice(k,q)}return f},f.tickFormat=function(a,d){if(!arguments.length)return Wg;2>arguments.length?
d=Wg:"function"!=typeof d&&(d=F.format(d));var c,n=Math.max(0.1,a/f.ticks().length),k=b?(c=1E-12,Math.ceil):(c=-1E-12,Math.floor);return function(a){return a/g(k(e(a)+c))<=n?d(a):""}},f.copy=function(){return If(a.copy(),d,b,c)},Qd(f,a)}function Jf(a,d,b){function c(d){return a(e(d))}var e=Zc(d),g=Zc(1/d);return c.invert=function(d){return g(a.invert(d))},c.domain=function(d){return arguments.length?(a.domain((b=d.map(Number)).map(e)),c):b},c.ticks=function(a){return F.range.apply(F,dc(b,a))},c.tickFormat=
function(a,d){return Pe(b,a,d)},c.nice=function(a){return c.domain(Ib(b,Hf(dc(b,a)[2])))},c.exponent=function(f){return arguments.length?(e=Zc(d=f),g=Zc(1/d),a.domain(b.map(e)),c):d},c.copy=function(){return Jf(a.copy(),d,b)},Qd(c,a)}function Zc(a){return function(d){return 0>d?-Math.pow(-d,a):Math.pow(d,a)}}function Qe(a,d){function b(c){return g[((e.get(c)||"range"===d.t&&e.set(c,a.push(c)))-1)%g.length]}function c(d,b){return F.range(a.length).map(function(a){return d+b*a})}var e,g,f;return b.domain=
function(c){if(!arguments.length)return a;a=[];e=new t;for(var g,f=-1,n=c.length;++f<n;)e.has(g=c[f])||e.set(g,a.push(g));return b[d.t].apply(b,d.a)},b.range=function(a){return arguments.length?(g=a,f=0,d={t:"range",a:arguments},b):g},b.rangePoints=function(e,n){2>arguments.length&&(n=0);var k=e[0],q=e[1],v=(q-k)/(Math.max(1,a.length-1)+n);return g=c(2>a.length?(k+q)/2:k+v*n/2,v),f=0,d={t:"rangePoints",a:arguments},b},b.rangeBands=function(e,n,k){2>arguments.length&&(n=0);3>arguments.length&&(k=n);
var q=e[1]<e[0],v=e[q-0],m=(e[1-q]-v)/(a.length-n+2*k);return g=c(v+m*k,m),q&&g.reverse(),f=m*(1-n),d={t:"rangeBands",a:arguments},b},b.rangeRoundBands=function(e,n,k){2>arguments.length&&(n=0);3>arguments.length&&(k=n);var q=e[1]<e[0],v=e[q-0],m=e[1-q],l=Math.floor((m-v)/(a.length-n+2*k));return g=c(v+Math.round((m-v-(a.length-n)*l)/2),l),q&&g.reverse(),f=Math.round(l*(1-n)),d={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return f},b.rangeExtent=function(){return Pd(d.a[0])},b.copy=
function(){return Qe(a,d)},b.domain(a)}function $c(a,d){function b(){var g=0,f=d.length;for(e=[];++g<f;)e[g-1]=F.quantile(a,g/f);return c}function c(a){return isNaN(a=+a)?void 0:d[F.bisect(e,a)]}var e;return c.domain=function(d){return arguments.length?(a=d.filter(function(a){return!isNaN(a)}).sort(F.ascending),b()):a},c.range=function(a){return arguments.length?(d=a,b()):d},c.quantiles=function(){return e},c.invertExtent=function(b){return b=d.indexOf(b),0>b?[0/0,0/0]:[0<b?e[b-1]:a[0],b<e.length?
e[b]:a[a.length-1]]},c.copy=function(){return $c(a,d)},b()}function Kf(a,d,b){function c(d){return b[Math.max(0,Math.min(f,Math.floor(g*(d-a))))]}function e(){return g=b.length/(d-a),f=b.length-1,c}var g,f;return c.domain=function(b){return arguments.length?(a=+b[0],d=+b[b.length-1],e()):[a,d]},c.range=function(a){return arguments.length?(b=a,e()):b},c.invertExtent=function(d){return d=b.indexOf(d),d=0>d?0/0:d/g+a,[d,d+1/g]},c.copy=function(){return Kf(a,d,b)},e()}function kf(a,d){function b(c){return c>=
c?d[F.bisect(a,c)]:void 0}return b.domain=function(d){return arguments.length?(a=d,b):a},b.range=function(a){return arguments.length?(d=a,b):d},b.invertExtent=function(b){return b=d.indexOf(b),[a[b-1],a[b]]},b.copy=function(){return kf(a,d)},b}function Qc(a){function d(a){return+a}return d.invert=d,d.domain=d.range=function(b){return arguments.length?(a=b.map(d),d):a},d.ticks=function(d){return F.range.apply(F,dc(a,d))},d.tickFormat=function(d,b){return Pe(a,d,b)},d.copy=function(){return Qc(a)},
d}function oe(a){return a.innerRadius}function sg(a){return a.outerRadius}function P(a){return a.startAngle}function W(a){return a.endAngle}function Ba(a){function d(f){function k(){v.push("M",g(a(m),n))}for(var q,v=[],m=[],l=-1,y=f.length,A=na(b),z=na(c);++l<y;)e.call(this,q=f[l],l)?m.push([+A.call(this,q,l),+z.call(this,q,l)]):m.length&&(k(),m=[]);return m.length&&k(),v.length?v.join(""):null}var b=hd,c=ce,e=bc,g=yc,f=g.key,n=0.7;return d.x=function(a){return arguments.length?(b=a,d):b},d.y=function(a){return arguments.length?
(c=a,d):c},d.defined=function(a){return arguments.length?(e=a,d):e},d.interpolate=function(a){return arguments.length?(f="function"==typeof a?g=a:(g=tg.get(a)||yc).key,d):f},d.tension=function(a){return arguments.length?(n=a,d):n},d}function yc(a){return a.join("L")}function ug(a){for(var d=0,b=a.length,c=a[0],e=[c[0],",",c[1]];++d<b;)e.push("V",(c=a[d])[1],"H",c[0]);return e.join("")}function vg(a){for(var d=0,b=a.length,c=a[0],e=[c[0],",",c[1]];++d<b;)e.push("H",(c=a[d])[0],"V",c[1]);return e.join("")}
function Lf(a,d){if(1>d.length||a.length!=d.length&&a.length!=d.length+2)return yc(a);var b=a.length!=d.length,c="",e=a[0],g=a[1],f=d[0],n=f,k=1;if(b&&(c+="Q"+(g[0]-2*f[0]/3)+","+(g[1]-2*f[1]/3)+","+g[0]+","+g[1],e=a[1],k=2),1<d.length)for(n=d[1],g=a[k],k++,c+="C"+(e[0]+f[0])+","+(e[1]+f[1])+","+(g[0]-n[0])+","+(g[1]-n[1])+","+g[0]+","+g[1],e=2;e<d.length;e++,k++)g=a[k],n=d[e],c+="S"+(g[0]-n[0])+","+(g[1]-n[1])+","+g[0]+","+g[1];b&&(b=a[k],c+="Q"+(g[0]+2*n[0]/3)+","+(g[1]+2*n[1]/3)+","+b[0]+","+b[1]);
return c}function Mb(a,d){for(var b,c=[],e=(1-d)/2,g=a[0],f=a[1],n=1,k=a.length;++n<k;)b=g,g=f,f=a[n],c.push([e*(f[0]-b[0]),e*(f[1]-b[1])]);return c}function Xg(a){if(3>a.length)return yc(a);var d=1,b=a.length,c=a[0],e=c[0],g=c[1],f=[e,e,e,(c=a[1])[0]],n=[g,g,g,c[1]],e=[e,",",g,"L",Hc(Sd,f),",",Hc(Sd,n)];for(a.push(a[b-1]);++d<=b;)c=a[d],f.shift(),f.push(c[0]),n.shift(),n.push(c[1]),wg(e,f,n);return a.pop(),e.push("L",c),e.join("")}function Hc(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]+a[3]*d[3]}function wg(a,
d,b){a.push("C",Hc(Yg,d),",",Hc(Yg,b),",",Hc(Zg,d),",",Hc(Zg,b),",",Hc(Sd,d),",",Hc(Sd,b))}function xg(a,d){return(d[1]-a[1])/(d[0]-a[0])}function $g(a){for(var d,b,c,e=-1,g=a.length;++e<g;)d=a[e],b=d[0],c=d[1]+pe,d[0]=b*Math.cos(c),d[1]=b*Math.sin(c);return a}function ah(a){function d(k){function l(){P.push("M",n(a(B),m),v,q(a(p.reverse()),m),"Z")}for(var y,A,z,P=[],p=[],B=[],C=-1,E=k.length,W=na(b),H=na(e),D=b===c?function(){return A}:na(c),x=e===g?function(){return z}:na(g);++C<E;)f.call(this,
y=k[C],C)?(p.push([A=+W.call(this,y,C),z=+H.call(this,y,C)]),B.push([+D.call(this,y,C),+x.call(this,y,C)])):p.length&&(l(),p=[],B=[]);return p.length&&l(),P.length?P.join(""):null}var b=hd,c=hd,e=0,g=ce,f=bc,n=yc,k=n.key,q=n,v="L",m=0.7;return d.x=function(a){return arguments.length?(b=c=a,d):c},d.x0=function(a){return arguments.length?(b=a,d):b},d.x1=function(a){return arguments.length?(c=a,d):c},d.y=function(a){return arguments.length?(e=g=a,d):g},d.y0=function(a){return arguments.length?(e=a,d):
e},d.y1=function(a){return arguments.length?(g=a,d):g},d.defined=function(a){return arguments.length?(f=a,d):f},d.interpolate=function(a){return arguments.length?(k="function"==typeof a?n=a:(n=tg.get(a)||yc).key,q=n.reverse||n,v=n.closed?"M":"L",d):k},d.tension=function(a){return arguments.length?(m=a,d):m},d}function Fh(a){return a.radius}function bh(a){return[a.x,a.y]}function Gh(a){return function(){var d=a.apply(this,arguments),b=d[0],d=d[1]+pe;return[b*Math.cos(d),b*Math.sin(d)]}}function Hh(){return 64}
function Ih(){return"circle"}function ch(a){a=Math.sqrt(a/xa);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function lf(a,d){return nf(a,Ab),a.id=d,a}function yg(a,d,b,c){var e=a.id;return N(a,"function"==typeof b?function(a,g,f){a.__transition__[e].tween.set(d,c(b.call(a,a.__data__,g,f)))}:(b=c(b),function(a){a.__transition__[e].tween.set(d,b)}))}function Jh(a){return null==a&&(a=""),function(){this.textContent=a}}function Mf(a,d,b,c){var e=a.__transition__||(a.__transition__=
{active:0,count:0}),g=e[b];if(!g){var f=c.time,g=e[b]={tween:new t,time:f,ease:c.ease,delay:c.delay,duration:c.duration};++e.count;F.timer(function(c){function n(c){return e.active>b?q():(e.active=b,g.event&&g.event.start.call(a,v,d),g.tween.forEach(function(b,c){(c=c.call(a,v,d))&&z.push(c)}),F.timer(function(){return A.c=k(c||1)?bc:k,1},0,f),void 0)}function k(c){if(e.active!==b)return q();c/=y;for(var f=m(c),n=z.length;0<n;)z[--n].call(a,f);return 1<=c?(g.event&&g.event.end.call(a,v,d),q()):void 0}
function q(){return--e.count?delete e[b]:delete a.__transition__,1}var v=a.__data__,m=g.ease,l=g.delay,y=g.duration,A=bd,z=[];return A.t=l+f,c>=l?n(c-l):(A.c=n,void 0)},0,f)}}function dh(a,d){a.attr("transform",function(a){return"translate("+d(a)+",0)"})}function eh(a,d){a.attr("transform",function(a){return"translate(0,"+d(a)+")"})}function zg(a){return a.toISOString()}function Ag(a,d,b){function c(d){return a(d)}function e(a,b){var c=(a[1]-a[0])/b,g=F.bisect(Nf,c);return g==Nf.length?[d.year,dc(a.map(function(a){return a/
31536E6}),b)[2]]:g?d[c/Nf[g-1]<Nf[g]/c?g-1:g]:[Kh,dc(a,b)[2]]}return c.invert=function(d){return qe(a.invert(d))},c.domain=function(d){return arguments.length?(a.domain(d),c):a.domain().map(qe)},c.nice=function(a,d){function b(c){return!isNaN(c)&&!a.range(c,qe(+c+1),d).length}var g=c.domain(),f=Pd(g),f=null==a?e(f,10):"number"==typeof a&&e(f,a);return f&&(a=f[0],d=f[1]),c.domain(Ib(g,1<d?{floor:function(d){for(;b(d=a.floor(d));)d=qe(d-1);return d},ceil:function(d){for(;b(d=a.ceil(d));)d=qe(+d+1);
return d}}:a))},c.ticks=function(a,d){var b=Pd(c.domain()),g=null==a?e(b,10):"number"==typeof a?e(b,a):!a.range&&[{range:a},d];return g&&(a=g[0],d=g[1]),a.range(b[0],qe(+b[1]+1),1>d?1:d)},c.tickFormat=function(){return b},c.copy=function(){return Ag(a.copy(),d,b)},Qd(c,a)}function qe(a){return new Date(a)}function Lh(a){return JSON.parse(a.responseText)}function Mh(a){var d=Rc.createRange();return d.selectNode(Rc.body),d.createContextualFragment(a.responseText)}var F={version:"3.4.1"};Date.now||(Date.now=
function(){return+new Date});var fh=[].slice,od=function(a){return fh.call(a)},Rc=document,pd=Rc.documentElement,Ob=window;try{od(pd.childNodes)[0].nodeType}catch(li){od=function(a){for(var d=a.length,b=Array(d);d--;)b[d]=a[d];return b}}try{Rc.createElement("div").style.setProperty("opacity",0,"")}catch(mi){var Of=Ob.Element.prototype,Nh=Of.setAttribute,Oh=Of.setAttributeNS,gh=Ob.CSSStyleDeclaration.prototype,Ph=gh.setProperty;Of.setAttribute=function(a,d){Nh.call(this,a,d+"")};Of.setAttributeNS=
function(a,d,b){Oh.call(this,a,d,b+"")};gh.setProperty=function(a,d,b){Ph.call(this,a,d+"",b)}}F.ascending=function(a,d){return d>a?-1:a>d?1:a>=d?0:0/0};F.descending=function(a,d){return a>d?-1:d>a?1:d>=a?0:0/0};F.min=function(a,d){var b,c,e=-1,g=a.length;if(1===arguments.length){for(;++e<g&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<g;)null!=(c=a[e])&&b>c&&(b=c)}else{for(;++e<g&&!(null!=(b=d.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<g;)null!=(c=d.call(a,a[e],e))&&b>c&&(b=c)}return b};F.max=function(a,
d){var b,c,e=-1,g=a.length;if(1===arguments.length){for(;++e<g&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<g;)null!=(c=a[e])&&c>b&&(b=c)}else{for(;++e<g&&!(null!=(b=d.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<g;)null!=(c=d.call(a,a[e],e))&&c>b&&(b=c)}return b};F.extent=function(a,d){var b,c,e,g=-1,f=a.length;if(1===arguments.length){for(;++g<f&&!(null!=(b=e=a[g])&&b>=b);)b=e=void 0;for(;++g<f;)null!=(c=a[g])&&(b>c&&(b=c),c>e&&(e=c))}else{for(;++g<f&&!(null!=(b=e=d.call(a,a[g],g))&&b>=b);)b=void 0;
for(;++g<f;)null!=(c=d.call(a,a[g],g))&&(b>c&&(b=c),c>e&&(e=c))}return[b,e]};F.sum=function(a,d){var b,c=0,e=a.length,g=-1;if(1===arguments.length)for(;++g<e;)isNaN(b=+a[g])||(c+=b);else for(;++g<e;)isNaN(b=+d.call(a,a[g],g))||(c+=b);return c};F.mean=function(a,d){var b,c=a.length,e=0,g=-1,f=0;if(1===arguments.length)for(;++g<c;)r(b=a[g])&&(e+=(b-e)/++f);else for(;++g<c;)r(b=d.call(a,a[g],g))&&(e+=(b-e)/++f);return f?e:void 0};F.quantile=function(a,d){var b=(a.length-1)*d+1,c=Math.floor(b),e=+a[c-
1];return(b-=c)?e+b*(a[c]-e):e};F.median=function(a,d){return 1<arguments.length&&(a=a.map(d)),a=a.filter(r),a.length?F.quantile(a.sort(F.ascending),0.5):void 0};F.bisector=function(a){return{left:function(d,b,c,e){3>arguments.length&&(c=0);for(4>arguments.length&&(e=d.length);e>c;){var g=c+e>>>1;a.call(d,d[g],g)<b?c=g+1:e=g}return c},right:function(d,b,c,e){3>arguments.length&&(c=0);for(4>arguments.length&&(e=d.length);e>c;){var g=c+e>>>1;b<a.call(d,d[g],g)?e=g:c=g+1}return c}}};var hh=F.bisector(function(a){return a});
F.bisectLeft=hh.left;F.bisect=F.bisectRight=hh.right;F.shuffle=function(a){for(var d,b,c=a.length;c;)b=0|Math.random()*c--,d=a[c],a[c]=a[b],a[b]=d;return a};F.permute=function(a,d){for(var b=d.length,c=Array(b);b--;)c[b]=a[d[b]];return c};F.pairs=function(a){for(var d=0,b=a.length-1,c=a[0],e=Array(0>b?0:b);b>d;)e[d]=[c,c=a[++d]];return e};F.zip=function(){if(!(c=arguments.length))return[];for(var a=-1,d=F.min(arguments,u),b=Array(d);++a<d;)for(var c,e=-1,g=b[a]=Array(c);++e<c;)g[e]=arguments[e][a];
return b};F.transpose=function(a){return F.zip.apply(F,a)};F.keys=function(a){var d=[],b;for(b in a)d.push(b);return d};F.values=function(a){var d=[],b;for(b in a)d.push(a[b]);return d};F.entries=function(a){var d=[],b;for(b in a)d.push({key:b,value:a[b]});return d};F.merge=function(a){var d,b,c,e=a.length;d=-1;for(var g=0;++d<e;)g+=a[d].length;for(b=Array(g);0<=--e;)for(c=a[e],d=c.length;0<=--d;)b[--g]=c[d];return b};var ya=Math.abs;F.range=function(a,d,b){if(3>arguments.length&&(b=1,2>arguments.length&&
(d=a,a=0)),1/0===(d-a)/b)throw Error("infinite range");var c,e=[],g;c=ya(b);for(g=1;c*g%1;)g*=10;var f=-1;if(a*=g,d*=g,b*=g,0>b)for(;(c=a+b*++f)>d;)e.push(c/g);else for(;(c=a+b*++f)<d;)e.push(c/g);return e};F.map=function(a){var d=new t;if(a instanceof t)a.forEach(function(a,b){d.set(a,b)});else for(var b in a)d.set(b,a[b]);return d};s(t,{has:l,get:function(a){return this[Ud+a]},set:function(a,d){return this[Ud+a]=d},remove:function(a){return a=Ud+a,a in this&&delete this[a]},keys:b,values:function(){var a=
[];return this.forEach(function(d,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(d,b){a.push({key:d,value:b})}),a},size:p,empty:m,forEach:function(a){for(var d in this)d.charCodeAt(0)===mf&&a.call(this,d.substring(1),this[d])}});var Ud="\x00",mf=Ud.charCodeAt(0);F.nest=function(){function a(d,f,n){if(n>=g.length)return c?c.call(e,f):b?f.sort(b):f;for(var k,q,v,m,l=-1,y=f.length,A=g[n++],z=new t;++l<y;)(m=z.get(k=A(q=f[l])))?m.push(q):z.set(k,[q]);return d?(q=d(),v=function(b,
c){q.set(b,a(d,c,n))}):(q={},v=function(b,c){q[b]=a(d,c,n)}),z.forEach(v),q}function d(a,b){if(b>=g.length)return a;var c=[],e=f[b++];return a.forEach(function(a,e){c.push({key:a,values:d(e,b)})}),e?c.sort(function(a,d){return e(a.key,d.key)}):c}var b,c,e={},g=[],f=[];return e.map=function(d,b){return a(b,d,0)},e.entries=function(b){return d(a(F.map,b,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return f[g.length-1]=a,e},e.sortValues=function(a){return b=a,e},e.rollup=function(a){return c=
a,e},e};F.set=function(a){var d=new k;if(a)for(var b=0,c=a.length;c>b;++b)d.add(a[b]);return d};s(k,{has:l,add:function(a){return this[Ud+a]=!0,a},remove:function(a){return a=Ud+a,a in this&&delete this[a]},values:b,size:p,empty:m,forEach:function(a){for(var d in this)d.charCodeAt(0)===mf&&a.call(this,d.substring(1))}});F.behavior={};F.rebind=function(a,d){for(var b,c=1,e=arguments.length;++c<e;)a[b=arguments[c]]=f(a,d,d[b]);return a};var Jg="webkit ms moz Moz o O".split(" ");F.dispatch=function(){for(var a=
new g,d=-1,b=arguments.length;++d<b;)a[arguments[d]]=q(a);return a};g.prototype.on=function(a,d){var b=a.indexOf("."),c="";if(0<=b&&(c=a.substring(b+1),a=a.substring(0,b)),a)return 2>arguments.length?this[a].on(c):this[a].on(c,d);if(2===arguments.length){if(null==d)for(a in this)this.hasOwnProperty(a)&&this[a].on(c,null);return this}};F.event=null;F.requote=function(a){return a.replace(Qh,"\\$&")};var Qh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nf={}.__proto__?function(a,d){a.__proto__=d}:function(a,d){for(var b in d)a[b]=
d[b]},dg=function(a,d){return d.querySelector(a)},eg=function(a,d){return d.querySelectorAll(a)},Rh=pd[c(pd,"matchesSelector")],Kg=function(a,d){return Rh.call(a,d)};"function"==typeof Sizzle&&(dg=function(a,d){return Sizzle(a,d)[0]||null},eg=function(a,d){return Sizzle.uniqueSort(Sizzle(a,d))},Kg=Sizzle.matchesSelector);F.selection=function(){return ih};var Pa=F.selection.prototype=[];Pa.select=function(a){var d,b,c,e,g=[];a=y(a);for(var f=-1,n=this.length;++f<n;){g.push(d=[]);d.parentNode=(c=this[f]).parentNode;
for(var k=-1,q=c.length;++k<q;)(e=c[k])?(d.push(b=a.call(e,e.__data__,k,f)),b&&"__data__"in e&&(b.__data__=e.__data__)):d.push(null)}return v(g)};Pa.selectAll=function(a){var d,b,c=[];a=A(a);for(var e=-1,g=this.length;++e<g;)for(var f=this[e],n=-1,k=f.length;++n<k;)(b=f[n])&&(c.push(d=od(a.call(b,b.__data__,n,e))),d.parentNode=b);return v(c)};var Bg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"};F.ns={prefix:Bg,qualify:function(a){var d=a.indexOf(":"),b=a;return 0<=d&&(b=a.substring(0,d),a=a.substring(d+1)),Bg.hasOwnProperty(b)?{space:Bg[b],local:a}:a}};Pa.attr=function(a,d){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=F.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(d in a)this.each(z(d,a[d]));return this}return this.each(z(a,d))};Pa.classed=function(a,d){if(2>arguments.length){if("string"==
typeof a){var b=this.node(),c=(a=a.trim().split(/^|\s+/)).length,e=-1;if(d=b.classList)for(;++e<c;){if(!d.contains(a[e]))return!1}else for(d=b.getAttribute("class");++e<c;)if(!C(a[e]).test(d))return!1;return!0}for(d in a)this.each(E(d,a[d]));return this}return this.each(E(a,d))};Pa.style=function(a,d,b){var c=arguments.length;if(3>c){if("string"!=typeof a){2>c&&(d="");for(b in a)this.each(H(b,a[b],d));return this}if(2>c)return Ob.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(H(a,
d,b))};Pa.property=function(a,d){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(d in a)this.each(L(d,a[d]));return this}return this.each(L(a,d))};Pa.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var d=a.apply(this,arguments);this.textContent=null==d?"":d}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Pa.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var d=
a.apply(this,arguments);this.innerHTML=null==d?"":d}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};Pa.append=function(a){return a=T(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};Pa.insert=function(a,d){return a=T(a),d=y(d),this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})};Pa.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};
Pa.data=function(a,d){function b(a,c){var e,g,f,v=a.length,m=c.length,l=Math.min(v,m),y=Array(m),A=Array(m),z=Array(v);if(d){var P=new t,p=new t,B=[];for(e=-1;++e<v;)l=d.call(g=a[e],g.__data__,e),P.has(l)?z[e]=g:P.set(l,g),B.push(l);for(e=-1;++e<m;)l=d.call(c,f=c[e],e),(g=P.get(l))?(y[e]=g,g.__data__=f):p.has(l)||(A[e]={__data__:f}),p.set(l,f),P.remove(l);for(e=-1;++e<v;)P.has(B[e])&&(z[e]=a[e])}else{for(e=-1;++e<l;)g=a[e],f=c[e],g?(g.__data__=f,y[e]=g):A[e]={__data__:f};for(;m>e;++e)A[e]={__data__:c[e]};
for(;v>e;++e)z[e]=a[e]}A.update=y;A.parentNode=y.parentNode=z.parentNode=a.parentNode;n.push(A);k.push(y);q.push(z)}var c,e,g=-1,f=this.length;if(!arguments.length){for(a=Array(f=(c=this[0]).length);++g<f;)(e=c[g])&&(a[g]=e.__data__);return a}var n=x([]),k=v([]),q=v([]);if("function"==typeof a)for(;++g<f;)b(c=this[g],a.call(c,c.parentNode.__data__,g));else for(;++g<f;)b(c=this[g],a);return k.enter=function(){return n},k.exit=function(){return q},k};Pa.datum=function(a){return arguments.length?this.property("__data__",
a):this.property("__data__")};Pa.filter=function(a){var d,b,c,e=[];"function"!=typeof a&&(a=I(a));for(var g=0,f=this.length;f>g;g++){e.push(d=[]);d.parentNode=(b=this[g]).parentNode;for(var n=0,k=b.length;k>n;n++)(c=b[n])&&a.call(c,c.__data__,n,g)&&d.push(c)}return v(e)};Pa.order=function(){for(var a=-1,d=this.length;++a<d;)for(var b,c=this[a],e=c.length-1,g=c[e];0<=--e;)(b=c[e])&&(g&&g!==b.nextSibling&&g.parentNode.insertBefore(b,g),g=b);return this};Pa.sort=function(a){a=Z.apply(this,arguments);
for(var d=-1,b=this.length;++d<b;)this[d].sort(a);return this.order()};Pa.each=function(a){return N(this,function(d,b,c){a.call(d,d.__data__,b,c)})};Pa.call=function(a){var d=od(arguments);return a.apply(d[0]=this,d),this};Pa.empty=function(){return!this.node()};Pa.node=function(){for(var a=0,d=this.length;d>a;a++)for(var b=this[a],c=0,e=b.length;e>c;c++){var g=b[c];if(g)return g}return null};Pa.size=function(){var a=0;return this.each(function(){++a}),a};var ad=[];F.selection.enter=x;F.selection.enter.prototype=
ad;ad.append=Pa.append;ad.empty=Pa.empty;ad.node=Pa.node;ad.call=Pa.call;ad.size=Pa.size;ad.select=function(a){for(var d,b,c,e,g,f=[],n=-1,k=this.length;++n<k;){c=(e=this[n]).update;f.push(d=[]);d.parentNode=e.parentNode;for(var q=-1,m=e.length;++q<m;)(g=e[q])?(d.push(c[q]=b=a.call(e.parentNode,g.__data__,q,n)),b.__data__=g.__data__):d.push(null)}return v(f)};ad.insert=function(a,d){return 2>arguments.length&&(d=K(this)),Pa.insert.call(this,a,d)};Pa.transition=function(){for(var a,d,b=re||++jh,c=
[],e=Pf||{time:Date.now(),ease:af,delay:0,duration:250},g=-1,f=this.length;++g<f;){c.push(a=[]);for(var n=this[g],k=-1,q=n.length;++k<q;)(d=n[k])&&Mf(d,k,b,e),a.push(d)}return lf(c,b)};Pa.interrupt=function(){return this.each(G)};F.select=function(a){a=["string"==typeof a?dg(a,Rc):a];return a.parentNode=pd,v([a])};F.selectAll=function(a){a=od("string"==typeof a?eg(a,Rc):a);return a.parentNode=pd,v([a])};var ih=F.select(pd);Pa.on=function(a,d,b){var c=arguments.length;if(3>c){if("string"!=typeof a){2>
c&&(d=!1);for(b in a)this.each(Q(b,a[b],d));return this}if(2>c)return(c=this.node()["__on"+a])&&c._;b=!1}return this.each(Q(a,d,b))};var fg=F.map({mouseenter:"mouseover",mouseleave:"mouseout"});fg.forEach(function(a){"on"+a in Rc&&fg.remove(a)});var Te="onselectstart"in Rc?null:c(pd.style,"userSelect"),Ah=0;F.mouse=function(a){return V(a,d())};var gg=/WebKit/.test(Ob.navigator.userAgent)?-1:0;F.touches=function(a,b){return 2>arguments.length&&(b=d().touches),b?od(b).map(function(d){var b=V(a,d);return b.identifier=
d.identifier,b}):[]};F.behavior.drag=function(){function a(){this.on("mousedown.drag",g).on("touchstart.drag",f)}function d(a,e,g,f){return function(){var d,n=this.parentNode,k=b.of(this,arguments),q=F.event.target,v=a(),m=null==v?"drag":"drag-"+v,l=e(n,v),y=0,A=F.select(Ob).on(g+"."+m,function(){var a=e(n,v),b=a[0]-l[0],c=a[1]-l[1];y=y|b|c;l=a;k({type:"drag",x:a[0]+d[0],y:a[1]+d[1],dx:b,dy:c})}).on(f+"."+m,function(){A.on(g+"."+m,null).on(f+"."+m,null);z(y&&F.event.target===q);k({type:"dragend"})}),
z=ba();c?(d=c.apply(this,arguments),d=[d.x-l[0],d.y-l[1]]):d=[0,0];k({type:"dragstart"})}}var b=n(a,"drag","dragstart","dragend"),c=null,g=d(e,F.mouse,"mousemove","mouseup"),f=d(function(){return F.event.changedTouches[0].identifier},function(a,d){return F.touches(a).filter(function(a){return a.identifier===d})[0]},"touchmove","touchend");return a.origin=function(d){return arguments.length?(c=d,a):c},F.rebind(a,b,"on")};var xa=Math.PI,nc=2*xa,ec=xa/2,da=1E-6,hg=da*da,wa=xa/180,Za=180/xa,Qf=Math.SQRT2,
Cg=2;F.interpolateZoom=function(a,d){function b(a){var d=a*A;if(y){a=aa(l);var f=g/(Cg*v),q,m=Qf*d+l;q=((m=Math.exp(2*m))-1)/(m+1);q*=a;var z=l,m=((z=Math.exp(z))-1/z)/2,f=f*(q-m);return[c+f*n,e+f*k,g*a/aa(Qf*d+l)]}return[c+a*n,e+a*k,g*Math.exp(Qf*d)]}var c=a[0],e=a[1],g=a[2],f=d[2],n=d[0]-c,k=d[1]-e,q=n*n+k*k,v=Math.sqrt(q),m=(f*f-g*g+4*q)/(2*g*Cg*v),q=(f*f-g*g-4*q)/(2*f*Cg*v),l=Math.log(Math.sqrt(m*m+1)-m),y=Math.log(Math.sqrt(q*q+1)-q)-l,A=(y||Math.log(f/g))/Qf;return b.duration=1E3*A,b};F.behavior.zoom=
function(){function d(a){a.on(sb,v).on(Sh+".zoom",l).on(r,y).on("dblclick.zoom",A).on(Ba,m)}function b(a){return[(a[0]-D.x)/D.k,(a[1]-D.y)/D.k]}function c(a){D.k=Math.max(L[0],Math.min(L[1],a))}function e(a,d){d=[d[0]*D.k+D.x,d[1]*D.k+D.y];D.x+=a[0]-d[0];D.y+=a[1]-d[1]}function g(){E&&E.domain(C.range().map(function(a){return(a-D.x)/D.k}).map(C.invert));H&&H.domain(W.range().map(function(a){return(a-D.y)/D.k}).map(W.invert))}function f(a){a({type:"zoomstart"})}function k(a){g();a({type:"zoom",scale:D.k,
translate:[D.x,D.y]})}function q(a){a({type:"zoomend"})}function v(){var a=this,d=t.of(a,arguments),c=F.event.target,g=0,n=F.select(Ob).on(r,function(){g=1;e(F.mouse(a),m);k(d)}).on(T,function(){n.on(r,Ob===a?y:null).on(T,null);l(g&&F.event.target===c);q(d)}),m=b(F.mouse(a)),l=ba();G.call(a);f(d)}function m(){function d(){var a=F.touches(l);return n=D.k,a.forEach(function(a){a.identifier in A&&(A[a.identifier]=b(a))}),a}function g(){for(var b=F.event.changedTouches,f=0,n=b.length;n>f;++f)A[b[f].identifier]=
null;n=d();f=Date.now();1===n.length?(500>f-B&&(b=n[0],n=A[b.identifier],c(2*D.k),e(b,n),a(),k(y)),B=f):1<n.length&&(b=n[0],n=n[1],f=b[0]-n[0],b=b[1]-n[1],z=f*f+b*b)}var n,l=this,y=t.of(l,arguments),A={},z=0,P=F.event.changedTouches[0].identifier,p="touchmove.zoom-"+P,C="touchend.zoom-"+P,E=F.select(Ob).on(p,function(){for(var a,d,b,g,f=F.touches(l),q=0,v=f.length;v>q;++q,g=null)if(b=f[q],g=A[b.identifier]){if(d)break;a=b;d=g}if(g){var m=(m=b[0]-a[0])*m+(m=b[1]-a[1])*m,f=z&&Math.sqrt(m/z);a=[(a[0]+
b[0])/2,(a[1]+b[1])/2];d=[(d[0]+g[0])/2,(d[1]+g[1])/2];c(f*n)}B=null;e(a,d);k(y)}).on(C,function(){if(F.event.touches.length){for(var a=F.event.changedTouches,b=0,c=a.length;c>b;++b)delete A[a[b].identifier];for(var e in A)return void d()}E.on(p,null).on(C,null);W.on(sb,v).on(Ba,m);H();q(y)}),W=F.select(l).on(sb,null).on(Ba,g),H=ba();G.call(l);g();f(y)}function l(){var d=t.of(this,arguments);p?clearTimeout(p):(G.call(this),f(d));p=setTimeout(function(){p=null;q(d)},50);a();var g=P||F.mouse(this);
z||(z=b(g));c(Math.pow(2,0.002*Rf())*D.k);e(g,z);k(d)}function y(){z=null}function A(){var a=t.of(this,arguments),d=F.mouse(this),g=b(d),n=Math.log(D.k)/Math.LN2;f(a);c(Math.pow(2,F.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1));e(d,g);k(a);q(a)}var z,P,p,B,C,E,W,H,D={x:0,y:0,k:1},x=[960,500],L=kh,sb="mousedown.zoom",r="mousemove.zoom",T="mouseup.zoom",Ba="touchstart.zoom",t=n(d,"zoomstart","zoom","zoomend");return d.event=function(a){a.each(function(){var a=t.of(this,arguments),d=D;re?F.select(this).transition().each("start.zoom",
function(){D=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var b=x[0],c=b/2,e=x[1]/2,g=F.interpolateZoom([(c-D.x)/D.k,(e-D.y)/D.k,b/D.k],[(c-d.x)/d.k,(e-d.y)/d.k,b/d.k]);return function(d){d=g(d);var f=b/d[2];this.__chart__=D={x:c-d[0]*f,y:e-d[1]*f,k:f};k(a)}}).each("end.zoom",function(){q(a)}):(this.__chart__=D,f(a),k(a),q(a))})},d.translate=function(a){return arguments.length?(D={x:+a[0],y:+a[1],k:D.k},g(),d):[D.x,D.y]},d.scale=function(a){return arguments.length?(D={x:D.x,y:D.y,
k:+a},g(),d):D.k},d.scaleExtent=function(a){return arguments.length?(L=null==a?kh:[+a[0],+a[1]],d):L},d.center=function(a){return arguments.length?(P=a&&[+a[0],+a[1]],d):P},d.size=function(a){return arguments.length?(x=a&&[+a[0],+a[1]],d):x},d.x=function(a){return arguments.length?(E=a,C=a.copy(),D={x:0,y:0,k:1},d):E},d.y=function(a){return arguments.length?(H=a,W=a.copy(),D={x:0,y:0,k:1},d):H},F.rebind(d,t,"on")};var Rf,kh=[0,1/0],Sh="onwheel"in Rc?(Rf=function(){return-F.event.deltaY*(F.event.deltaMode?
120:1)},"wheel"):"onmousewheel"in Rc?(Rf=function(){return F.event.wheelDelta},"mousewheel"):(Rf=function(){return-F.event.detail},"MozMousePixelScroll");fa.prototype.toString=function(){return this.rgb()+""};F.hsl=function(a,d,b){return 1===arguments.length?a instanceof va?ua(a.h,a.s,a.l):cb(""+a,ma,ua):ua(+a,+d,+b)};var Dg=va.prototype=new fa;Dg.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),ua(this.h,this.s,this.l/a)};Dg.darker=function(a){return a=Math.pow(0.7,arguments.length?
a:1),ua(this.h,this.s,a*this.l)};Dg.rgb=function(){return la(this.h,this.s,this.l)};F.hcl=function(a,d,b){return 1===arguments.length?a instanceof ka?oa(a.h,a.c,a.l):a instanceof sa?La(a.l,a.a,a.b):La((a=za((a=F.rgb(a)).r,a.g,a.b)).l,a.a,a.b):oa(+a,+d,+b)};var Eg=ka.prototype=new fa;Eg.brighter=function(a){return oa(this.h,this.c,Math.min(100,this.l+Sf*(arguments.length?a:1)))};Eg.darker=function(a){return oa(this.h,this.c,Math.max(0,this.l-Sf*(arguments.length?a:1)))};Eg.rgb=function(){return Fa(this.h,
this.c,this.l).rgb()};F.lab=function(a,d,b){return 1===arguments.length?a instanceof sa?O(a.l,a.a,a.b):a instanceof ka?Fa(a.l,a.c,a.h):za((a=F.rgb(a)).r,a.g,a.b):O(+a,+d,+b)};var Sf=18,Lg=0.95047,Mg=1,Ng=1.08883,Fg=sa.prototype=new fa;Fg.brighter=function(a){return O(Math.min(100,this.l+Sf*(arguments.length?a:1)),this.a,this.b)};Fg.darker=function(a){return O(Math.max(0,this.l-Sf*(arguments.length?a:1)),this.a,this.b)};Fg.rgb=function(){return kb(this.l,this.a,this.b)};F.rgb=function(a,d,b){return 1===
arguments.length?a instanceof ca?pa(a.r,a.g,a.b):cb(""+a,pa,la):pa(~~a,~~d,~~b)};var Tf=ca.prototype=new fa;Tf.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var d=this.r,b=this.g,c=this.b;return d||b||c?(d&&30>d&&(d=30),b&&30>b&&(b=30),c&&30>c&&(c=30),pa(Math.min(255,~~(d/a)),Math.min(255,~~(b/a)),Math.min(255,~~(c/a)))):pa(30,30,30)};Tf.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),pa(~~(a*this.r),~~(a*this.g),~~(a*this.b))};Tf.hsl=function(){return ma(this.r,this.g,
this.b)};Tf.toString=function(){return"#"+Ma(this.r)+Ma(this.g)+Ma(this.b)};var of=F.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,
springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});of.forEach(function(a,d){of.set(a,pa(d>>16,255&d>>8,255&d))});F.functor=na;F.xhr=$a(Ca);F.dsv=function(a,d){function b(a,g,f){3>arguments.length&&(f=g,g=null);var n=hb(a,d,null==g?c:e(g),f);return n.row=function(a){return arguments.length?n.response(null==(g=a)?c:e(a)):g},n}function c(a){return b.parse(a.responseText)}
function e(a){return function(d){return b.parse(d.responseText,a)}}function g(d){return d.map(f).join(a)}function f(a){return n.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var n=RegExp('["'+a+"\n]"),q=a.charCodeAt(0);return b.parse=function(a,d){var c;return b.parseRows(a,function(a,b){if(c)return c(a,b-1);var e=new Function("d","return {"+a.map(function(a,d){return JSON.stringify(a)+": d["+d+"]"}).join(",")+"}");c=d?function(a,b){return d(e(a),b)}:e})},b.parseRows=function(a,d){function b(){if(v>=k)return f;
if(e)return e=!1,g;var d=v;if(34===a.charCodeAt(d)){for(var c=d;c++<k;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}v=c+2;var n=a.charCodeAt(c+1);return 13===n?(e=!0,10===a.charCodeAt(c+2)&&++v):10===n&&(e=!0),a.substring(d+1,c).replace(/""/g,'"')}for(;k>v;){n=a.charCodeAt(v++);c=1;if(10===n)e=!0;else if(13===n)e=!0,10===a.charCodeAt(v)&&(++v,++c);else if(n!==q)continue;return a.substring(d,v-c)}return a.substring(d)}for(var c,e,g={},f={},n=[],k=a.length,v=0,m=0;(c=b())!==f;){for(var l=
[];c!==g&&c!==f;)l.push(c),c=b();d&&!(l=d(l,m++))||n.push(l)}return n},b.format=function(d){if(Array.isArray(d[0]))return b.formatRows(d);var c=new k,e=[];return d.forEach(function(a){for(var d in a)c.has(d)||e.push(c.add(d))}),[e.map(f).join(a)].concat(d.map(function(d){return e.map(function(a){return f(d[a])}).join(a)})).join("\n")},b.formatRows=function(a){return a.map(g).join("\n")},b};F.csv=F.dsv(",","text/csv");F.tsv=F.dsv("\t","text/tab-separated-values");var rf,sf,qf,pf,bd,Og=Ob[c(Ob,"requestAnimationFrame")]||
function(a){setTimeout(a,17)};F.timer=function(a,d,b){var c=arguments.length;2>c&&(d=0);3>c&&(b=Date.now());c={c:a,t:b+d,f:!1,n:null};sf?sf.n=c:rf=c;sf=c;qf||(pf=clearTimeout(pf),qf=1,Og(ia))};F.timer.flush=function(){Na();ib()};F.round=function(a,d){return d?Math.round(a*(d=Math.pow(10,d)))/d:Math.round(a)};var Th="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,d){var b=Math.pow(10,3*ya(8-d));return{scale:8<d?function(a){return a/b}:function(a){return a*b},symbol:a}});F.formatPrefix=
function(a,d){var b=0;return a&&(0>a&&(a*=-1),d&&(a=F.round(a,Wa(a,d))),b=1+Math.floor(1E-12+Math.log(a)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((0>=b?b+1:b-1)/3)))),Th[8+b/3]};var Pg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Bh=F.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,d){return a.toPrecision(d)},
e:function(a,d){return a.toExponential(d)},f:function(a,d){return a.toFixed(d)},r:function(a,d){return(a=F.round(a,Wa(a,d))).toFixed(Math.max(0,Math.min(20,Wa(a*(1+1E-15),d))))}}),ea=F.time={},Pb=Date;Sa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){nd.setUTCDate.apply(this._,arguments)},setDay:function(){nd.setUTCDay.apply(this._,arguments)},setFullYear:function(){nd.setUTCFullYear.apply(this._,arguments)},setHours:function(){nd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){nd.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){nd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){nd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){nd.setUTCSeconds.apply(this._,arguments)},setTime:function(){nd.setTime.apply(this._,arguments)}};var nd=Date.prototype;ea.year=ab(function(a){return a=ea.day(a),a.setMonth(0,1),a},function(a,d){a.setFullYear(a.getFullYear()+d)},function(a){return a.getFullYear()});ea.years=ea.year.range;ea.years.utc=ea.year.utc.range;ea.day=ab(function(a){var d=
new Pb(2E3,0);return d.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),d},function(a,d){a.setDate(a.getDate()+d)},function(a){return a.getDate()-1});ea.days=ea.day.range;ea.days.utc=ea.day.utc.range;ea.dayOfYear=function(a){var d=ea.year(a);return Math.floor((a-d-6E4*(a.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,d){d=7-d;var b=ea[a]=ab(function(a){return(a=ea.day(a)).setDate(a.getDate()-(a.getDay()+
d)%7),a},function(a,d){a.setDate(a.getDate()+7*Math.floor(d))},function(a){var b=ea.year(a).getDay();return Math.floor((ea.dayOfYear(a)+(b+d)%7)/7)-(b!==d)});ea[a+"s"]=b.range;ea[a+"s"].utc=b.utc.range;ea[a+"OfYear"]=function(a){var b=ea.year(a).getDay();return Math.floor((ea.dayOfYear(a)+(b+d)%7)/7)}});ea.week=ea.sunday;ea.weeks=ea.sunday.range;ea.weeks.utc=ea.sunday.utc.range;ea.weekOfYear=ea.sundayOfYear;var Qg={"-":"",_:" ",0:"0"},nb=/^\s*\d+/,Rg=/^%/;F.locale=function(a){return{numberFormat:Ta(a),
timeFormat:jb(a)}};var lh=F.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});F.format=lh.numberFormat;
F.geo={};db.prototype={s:0,t:0,add:function(a){Jb(a,this.t,Uf);Jb(Uf.s,this.s,this);this.s?this.t+=Uf.t:this.s=Uf.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Uf=new db;F.geo.stream=function(a,d){a&&mh.hasOwnProperty(a.type)?mh[a.type](a,d):Sb(a,d)};var mh={Feature:function(a,d){Sb(a.geometry,d)},FeatureCollection:function(a,d){for(var b=a.features,c=-1,e=b.length;++c<e;)Sb(b[c].geometry,d)}},Sg={Sphere:function(a,d){d.sphere()},Point:function(a,d){a=a.coordinates;d.point(a[0],
a[1],a[2])},MultiPoint:function(a,d){for(var b=a.coordinates,c=-1,e=b.length;++c<e;)a=b[c],d.point(a[0],a[1],a[2])},LineString:function(a,d){Ka(a.coordinates,d,0)},MultiLineString:function(a,d){for(var b=a.coordinates,c=-1,e=b.length;++c<e;)Ka(b[c],d,0)},Polygon:function(a,d){Fb(a.coordinates,d)},MultiPolygon:function(a,d){for(var b=a.coordinates,c=-1,e=b.length;++c<e;)Fb(b[c],d)},GeometryCollection:function(a,d){for(var b=a.geometries,c=-1,e=b.length;++c<e;)Sb(b[c],d)}};F.geo.area=function(a){return Re=
0,F.geo.stream(a,qc),Re};var Re,Vd=new db,qc={sphere:function(){Re+=4*xa},point:e,lineStart:e,lineEnd:e,polygonStart:function(){Vd.reset();qc.lineStart=Va},polygonEnd:function(){var a=2*Vd;Re+=0>a?4*xa+a:a;qc.lineStart=qc.lineEnd=qc.point=e}};F.geo.bounds=function(){function a(d,b){C.push(E=[v=d,l=d]);m>b&&(m=b);b>y&&(y=b)}function d(b,c){var e=ob([b*wa,c*wa]);if(p){var g=rb(p,e),g=rb([g[1],-g[0],0],g);Xa(g);var g=ra(g),f=b-A,k=0<f?1:-1,q=g[0]*Za*k,f=180<ya(f);f^(q>k*A&&k*b>q)?(g=g[1]*Za,g>y&&(y=
g)):(q=(q+360)%360-180,f^(q>k*A&&k*b>q))?(g=-g[1]*Za,m>g&&(m=g)):(m>c&&(m=c),c>y&&(y=c));f?A>b?n(v,b)>n(v,l)&&(l=b):n(b,l)>n(v,l)&&(v=b):l>=v?(v>b&&(v=b),b>l&&(l=b)):b>A?n(v,b)>n(v,l)&&(l=b):n(b,l)>n(v,l)&&(v=b)}else a(b,c);p=e;A=b}function b(){W.point=d}function c(){E[0]=v;E[1]=l;W.point=a;p=null}function e(a,b){if(p){var c=a-A;B+=180<ya(c)?c+(0<c?360:-360):c}else z=a,P=b;qc.point(a,b);d(a,b)}function g(){qc.lineStart()}function f(){e(z,P);qc.lineEnd();ya(B)>da&&(v=-(l=180));E[0]=v;E[1]=l;p=null}
function n(a,d){return 0>(d-=a)?d+360:d}function k(a,d){return a[0]-d[0]}function q(a,d){return d[0]<=d[1]?d[0]<=a&&a<=d[1]:a<d[0]||d[1]<a}var v,m,l,y,A,z,P,p,B,C,E,W={point:a,lineStart:b,lineEnd:c,polygonStart:function(){W.point=e;W.lineStart=g;W.lineEnd=f;B=0;qc.polygonStart()},polygonEnd:function(){qc.polygonEnd();W.point=a;W.lineStart=b;W.lineEnd=c;0>Vd?(v=-(l=180),m=-(y=90)):B>da?y=90:-da>B&&(m=-90);E[0]=v;E[1]=l}};return function(a){y=l=-(v=m=1/0);C=[];F.geo.stream(a,W);if(a=C.length){C.sort(k);
for(var d,b=1,c=C[0],e=[c];a>b;++b)d=C[b],q(d[0],c)||q(d[1],c)?(n(c[0],d[1])>n(c[0],c[1])&&(c[1]=d[1]),n(d[0],c[1])>n(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var g,f=-1/0;a=e.length-1;b=0;for(c=e[a];a>=b;c=d,++b)d=e[b],(g=n(c[1],d[0]))>f&&(f=g,v=d[0],l=c[1])}return C=E=null,1/0===v||1/0===m?[[0/0,0/0],[0/0,0/0]]:[[v,m],[l,y]]}}();F.geo.centroid=function(a){Ue=se=cd=dd=Tc=Ac=Bc=kc=qd=rd=Uc=0;F.geo.stream(a,Ic);a=qd;var d=rd,b=Uc,c=a*a+d*d+b*b;return hg>c&&(a=Ac,d=Bc,b=kc,da>se&&(a=cd,d=dd,b=Tc),c=a*a+
d*d+b*b,hg>c)?[0/0,0/0]:[Math.atan2(d,a)*Za,J(b/Math.sqrt(c))*Za]};var Ue,se,cd,dd,Tc,Ac,Bc,kc,qd,rd,Uc,Ic={sphere:e,point:gc,lineStart:wb,lineEnd:Ub,polygonStart:function(){Ic.lineStart=ed},polygonEnd:function(){Ic.lineStart=wb}},Tg=lc(bc,function(a){var d,b=0/0,c=0/0,e=0/0;return{lineStart:function(){a.lineStart();d=1},point:function(g,f){var n=0<g?xa:-xa,k=ya(g-b);if(ya(k-xa)<da)a.point(b,c=0<(c+f)/2?ec:-ec),a.point(e,c),a.lineEnd(),a.lineStart(),a.point(n,c),a.point(g,c),d=0;else if(e!==n&&k>=
xa){ya(b-e)<da&&(b-=e*da);ya(g-n)<da&&(g-=n*da);var k=b,q=c,v=g,m,l,y=Math.sin(k-v);c=ya(y)>da?Math.atan((Math.sin(q)*(l=Math.cos(f))*Math.sin(v)-Math.sin(f)*(m=Math.cos(q))*Math.sin(k))/(m*l*y)):(q+f)/2;a.point(e,c);a.lineEnd();a.lineStart();a.point(n,c);d=0}a.point(b=g,c=f);e=n},lineEnd:function(){a.lineEnd();b=c=0/0},clean:function(){return 2-d}}},function(a,d,b,c){null==a?(b*=ec,c.point(-xa,b),c.point(0,b),c.point(xa,b),c.point(xa,0),c.point(xa,-b),c.point(0,-b),c.point(-xa,-b),c.point(-xa,0),
c.point(-xa,b)):ya(a[0]-d[0])>da?(a=a[0]<d[0]?xa:-xa,b=b*a/2,c.point(-a,b),c.point(0,b),c.point(a,b)):c.point(d[0],d[1])},[-xa,-xa/2]),tf=1E9;F.geo.clipExtent=function(){var a,d,b,c,e,g,f={stream:function(a){return e&&(e.valid=!1),e=g(a),e.valid=!0,e},extent:function(n){return arguments.length?(g=td(a=+n[0][0],d=+n[0][1],b=+n[1][0],c=+n[1][1]),e&&(e.valid=!1,e=null),f):[[a,d],[b,c]]}};return f.extent([[0,0],[960,500]])};(F.geo.conicEqualArea=function(){return Aa(Xd)}).raw=Xd;F.geo.albers=function(){return F.geo.conicEqualArea().rotate([96,
0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};F.geo.albersUsa=function(){function a(g){var f=g[0];g=g[1];return d=null,b(f,g),d||(c(f,g),d)||e(f,g),d}var d,b,c,e,g=F.geo.albers(),f=F.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),n=F.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k={point:function(a,b){d=[a,b]}};return a.invert=function(a){var d=g.scale(),b=g.translate(),c=(a[0]-b[0])/d,d=(a[1]-b[1])/d;return(0.12<=d&&0.234>d&&-0.425<=
c&&-0.214>c?f:0.166<=d&&0.234>d&&-0.214<=c&&-0.115>c?n:g).invert(a)},a.stream=function(a){var d=g.stream(a),b=f.stream(a),c=n.stream(a);return{point:function(a,e){d.point(a,e);b.point(a,e);c.point(a,e)},sphere:function(){d.sphere();b.sphere();c.sphere()},lineStart:function(){d.lineStart();b.lineStart();c.lineStart()},lineEnd:function(){d.lineEnd();b.lineEnd();c.lineEnd()},polygonStart:function(){d.polygonStart();b.polygonStart();c.polygonStart()},polygonEnd:function(){d.polygonEnd();b.polygonEnd();
c.polygonEnd()}}},a.precision=function(d){return arguments.length?(g.precision(d),f.precision(d),n.precision(d),a):g.precision()},a.scale=function(d){return arguments.length?(g.scale(d),f.scale(0.35*d),n.scale(d),a.translate(g.translate())):g.scale()},a.translate=function(d){if(!arguments.length)return g.translate();var q=g.scale(),v=+d[0],m=+d[1];return b=g.translate(d).clipExtent([[v-0.455*q,m-0.238*q],[v+0.455*q,m+0.238*q]]).stream(k).point,c=f.translate([v-0.307*q,m+0.201*q]).clipExtent([[v-0.425*
q+da,m+0.12*q+da],[v-0.214*q-da,m+0.234*q-da]]).stream(k).point,e=n.translate([v-0.205*q,m+0.212*q]).clipExtent([[v-0.214*q+da,m+0.166*q+da],[v-0.115*q-da,m+0.234*q-da]]).stream(k).point,a},a.scale(1070)};var Vf,uf,Wf,Xf,Yf,Zf,ud={point:e,lineStart:e,lineEnd:e,polygonStart:function(){uf=0;ud.lineStart=rc},polygonEnd:function(){ud.lineStart=ud.lineEnd=ud.point=e;Vf+=ya(uf/2)}},Uh={point:function(a,d){Wf>a&&(Wf=a);a>Yf&&(Yf=a);Xf>d&&(Xf=d);d>Zf&&(Zf=d)},lineStart:e,lineEnd:e,polygonStart:e,polygonEnd:e},
Kc={point:Wb,lineStart:wd,lineEnd:xd,polygonStart:function(){Kc.lineStart=yd},polygonEnd:function(){Kc.point=Wb;Kc.lineStart=wd;Kc.lineEnd=xd}};F.geo.path=function(){function a(d){return d&&("function"==typeof f&&e.pointRadius(+f.apply(this,arguments)),g&&g.valid||(g=c(e)),F.geo.stream(d,g)),e.result()}var d,b,c,e,g,f=4.5;return a.area=function(a){return Vf=0,F.geo.stream(a,c(ud)),Vf},a.centroid=function(a){return cd=dd=Tc=Ac=Bc=kc=qd=rd=Uc=0,F.geo.stream(a,c(Kc)),Uc?[qd/Uc,rd/Uc]:kc?[Ac/kc,Bc/kc]:
Tc?[cd/Tc,dd/Tc]:[0/0,0/0]},a.bounds=function(a){return Yf=Zf=-(Wf=Xf=1/0),F.geo.stream(a,c(Uh)),[[Wf,Xf],[Yf,Zf]]},a.projection=function(b){return arguments.length?(c=(d=b)?b.stream||Lc(b):Ca,g=null,a):d},a.context=function(d){return arguments.length?(e=null==(b=d)?new Jc:new te(d),"function"!=typeof f&&e.pointRadius(f),g=null,a):b},a.pointRadius=function(d){return arguments.length?(f="function"==typeof d?d:(e.pointRadius(+d),+d),a):f},a.projection(F.geo.albersUsa()).context(null)};F.geo.transform=
function(a){return{stream:function(d){d=new Zd(d);for(var b in a)d[b]=a[b];return d}}};Zd.prototype={point:function(a,d){this.stream.point(a,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};F.geo.projection=Gb;F.geo.projectionMutator=Wd;(F.geo.equirectangular=function(){return Gb(oc)}).raw=oc.invert=oc;F.geo.rotation=
function(a){function d(b){return b=a(b[0]*wa,b[1]*wa),b[0]*=Za,b[1]*=Za,b}return a=ue(a[0]%360*wa,a[1]*wa,2<a.length?a[2]*wa:0),d.invert=function(d){return d=a.invert(d[0]*wa,d[1]*wa),d[0]*=Za,d[1]*=Za,d},d};vf.invert=oc;F.geo.circle=function(){function a(){var d="function"==typeof c?c.apply(this,arguments):c,e=ue(-d[0]*wa,-d[1]*wa,0).invert,g=[];return b(null,null,1,{point:function(a,d){g.push(a=e(a,d));a[0]*=Za;a[1]*=Za}}),{type:"Polygon",coordinates:[g]}}var d,b,c=[0,0],e=6;return a.origin=function(d){return arguments.length?
(c=d,a):c},a.angle=function(c){return arguments.length?(b=Vc((d=+c)*wa,e*wa),a):d},a.precision=function(c){return arguments.length?(b=Vc(d*wa,(e=+c)*wa),a):e},a.angle(90)};F.geo.distance=function(a,d){var b,c=(d[0]-a[0])*wa,e=a[1]*wa,g=d[1]*wa,f=Math.sin(c),c=Math.cos(c),n=Math.sin(e),e=Math.cos(e),k=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((b=g*f)*b+(b=e*k-n*g*c)*b),n*k+e*g*c)};F.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:d()}}function d(){return F.range(Math.ceil(g/
P)*P,e,P).map(l).concat(F.range(Math.ceil(q/p)*p,k,p).map(y)).concat(F.range(Math.ceil(c/A)*A,b,A).filter(function(a){return ya(a%P)>da}).map(v)).concat(F.range(Math.ceil(n/z)*z,f,z).filter(function(a){return ya(a%p)>da}).map(m))}var b,c,e,g,f,n,k,q,v,m,l,y,A=10,z=A,P=90,p=360,B=2.5;return a.lines=function(){return d().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[l(g).concat(y(k).slice(1),l(e).reverse().slice(1),y(q).reverse().slice(1))]}},
a.extent=function(d){return arguments.length?a.majorExtent(d).minorExtent(d):a.minorExtent()},a.majorExtent=function(d){return arguments.length?(g=+d[0][0],e=+d[1][0],q=+d[0][1],k=+d[1][1],g>e&&(d=g,g=e,e=d),q>k&&(d=q,q=k,k=d),a.precision(B)):[[g,q],[e,k]]},a.minorExtent=function(d){return arguments.length?(c=+d[0][0],b=+d[1][0],n=+d[0][1],f=+d[1][1],c>b&&(d=c,c=b,b=d),n>f&&(d=n,n=f,f=d),a.precision(B)):[[c,n],[b,f]]},a.step=function(d){return arguments.length?a.majorStep(d).minorStep(d):a.minorStep()},
a.majorStep=function(d){return arguments.length?(P=+d[0],p=+d[1],a):[P,p]},a.minorStep=function(d){return arguments.length?(A=+d[0],z=+d[1],a):[A,z]},a.precision=function(d){return arguments.length?(B=+d,v=ta(n,f,90),m=we(c,b,B),l=ta(q,k,90),y=we(g,e,B),a):B},a.majorExtent([[-180,-90+da],[180,90-da]]).minorExtent([[-180,-80-da],[180,80+da]])};F.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[d||c.apply(this,arguments),b||e.apply(this,arguments)]}}var d,b,c=ae,e=hc;return a.distance=
function(){return F.geo.distance(d||c.apply(this,arguments),b||e.apply(this,arguments))},a.source=function(b){return arguments.length?(c=b,d="function"==typeof b?null:b,a):c},a.target=function(d){return arguments.length?(e=d,b="function"==typeof d?null:d,a):e},a.precision=function(){return arguments.length?a:0},a};F.geo.interpolate=function(a,d){return ic(a[0]*wa,a[1]*wa,d[0]*wa,d[1]*wa)};F.geo.length=function(a){return $f=0,F.geo.stream(a,Se),$f};var $f,Se={sphere:e,point:e,lineStart:function(){function a(e,
g){var f=Math.sin(g*=wa),n=Math.cos(g),k=ya((e*=wa)-d),q=Math.cos(k);$f+=Math.atan2(Math.sqrt((k=n*Math.sin(k))*k+(k=c*f-b*n*q)*k),b*f+c*n*q);d=e;b=f;c=n}var d,b,c;Se.point=function(e,g){d=e*wa;b=Math.sin(g*=wa);c=Math.cos(g);Se.point=a};Se.lineEnd=function(){Se.point=Se.lineEnd=e}},lineEnd:e,polygonStart:e,polygonEnd:e},nh=Mc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(F.geo.azimuthalEqualArea=function(){return Gb(nh)}).raw=nh;var oh=Mc(function(a){return(a=Math.acos(a))&&
a/Math.sin(a)},Ca);(F.geo.azimuthalEquidistant=function(){return Gb(oh)}).raw=oh;(F.geo.conicConformal=function(){return Aa(Ad)}).raw=Ad;(F.geo.conicEquidistant=function(){return Aa(sc)}).raw=sc;var ph=Mc(function(a){return 1/a},Math.atan);(F.geo.gnomonic=function(){return Gb(ph)}).raw=ph;gd.invert=function(a,d){return[a,2*Math.atan(Math.exp(d))-ec]};(F.geo.mercator=function(){return We(gd)}).raw=gd;var qh=Mc(function(){return 1},Math.asin);(F.geo.orthographic=function(){return Gb(qh)}).raw=qh;var rh=
Mc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(F.geo.stereographic=function(){return Gb(rh)}).raw=rh;be.invert=function(a,d){return[-d,2*Math.atan(Math.exp(a))-ec]};(F.geo.transverseMercator=function(){var a=We(be),d=a.center,b=a.rotate;return a.center=function(a){return a?d([-a[1],a[0]]):(a=d(),[-a[1],a[0]])},a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=b(),[a[0],a[1],a[2]-90])},a.rotate([0,0])}).raw=be;F.geom={};F.geom.hull=function(a){function d(a){if(3>
a.length)return[];var e,g=na(b),f=na(c),n=a.length,k=[],q=[];for(e=0;n>e;e++)k.push([+g.call(this,a[e],e),+f.call(this,a[e],e),e]);k.sort(xe);for(e=0;n>e;e++)q.push([k[e][0],-k[e][1]]);var g=de(k),q=de(q),f=q[0]===g[0],n=q[q.length-1]===g[g.length-1],v=[];for(e=g.length-1;0<=e;--e)v.push(a[k[g[e]][2]]);for(e=+f;e<q.length-n;++e)v.push(a[k[q[e]][2]]);return v}var b=hd,c=ce;return arguments.length?d(a):(d.x=function(a){return arguments.length?(b=a,d):b},d.y=function(a){return arguments.length?(c=a,
d):c},d)};F.geom.polygon=function(a){return nf(a,ag),a};var ag=F.geom.polygon.prototype=[];ag.area=function(){for(var a,d=-1,b=this.length,c=this[b-1],e=0;++d<b;)a=c,c=this[d],e+=a[1]*c[0]-a[0]*c[1];return 0.5*e};ag.centroid=function(a){var d,b,c=-1,e=this.length,g=0,f=0,n=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++c<e;)d=n,n=this[c],b=d[0]*n[1]-n[0]*d[1],g+=(d[0]+n[0])*b,f+=(d[1]+n[1])*b;return[g*a,f*a]};ag.clip=function(a){for(var d,b,c,e,g,f,n=wf(a),k=-1,q=this.length-wf(this),v=
this[q-1];++k<q;){d=a.slice();a.length=0;e=this[k];g=d[(c=d.length-n)-1];for(b=-1;++b<c;)f=d[b],ye(f,v,e)?(ye(g,v,e)||a.push(Xe(g,f,v,e)),a.push(f)):ye(g,v,e)&&a.push(Xe(g,f,v,e)),g=f;n&&a.push(a[0]);v=e}return a};var Ce,he,Ae,ig,Ze,Ug=[],Vg=[];Bd.prototype.prepare=function(){for(var a,d=this.edges,b=d.length;b--;)a=d[b].edge,a.b&&a.a||d.splice(b,1);return d.sort(Ye),d.length};Cd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===
this.site?this.edge.b:this.edge.a}};Fc.prototype={insert:function(a,d){var b,c,e;if(a){if(d.P=a,d.N=a.N,a.N&&(a.N.P=d),a.N=d,a.R){for(a=a.R;a.L;)a=a.L;a.L=d}else a.R=d;b=a}else this._?(a=pc(this._),d.P=null,d.N=a,a.P=a.L=d,b=a):(d.P=d.N=null,this._=d,b=null);d.L=d.R=null;d.U=b;d.C=!0;for(a=d;b&&b.C;)c=b.U,b===c.L?(e=c.R,e&&e.C?(b.C=e.C=!1,c.C=!0,a=c):(a===b.R&&(Hb(this,b),a=b,b=a.U),b.C=!1,c.C=!0,Dd(this,c))):(e=c.L,e&&e.C?(b.C=e.C=!1,c.C=!0,a=c):(a===b.L&&(Dd(this,b),a=b,b=a.U),b.C=!1,c.C=!0,Hb(this,
c))),b=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var d,b,c,e=a.U,g=a.L,f=a.R;if(b=g?f?pc(f):g:f,e?e.L===a?e.L=b:e.R=b:this._=b,g&&f?(c=b.C,b.C=a.C,b.L=g,g.U=b,b!==f?(e=b.U,b.U=a.U,a=b.R,e.L=a,b.R=f,f.U=b):(b.U=e,e=b,a=b.R)):(c=a.C,a=b),a&&(a.U=e),!c){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===e.L){if(d=e.R,d.C&&(d.C=!1,e.C=!0,Hb(this,e),d=e.R),d.L&&d.L.C||d.R&&d.R.C){d.R&&d.R.C||(d.L.C=!1,d.C=!0,Dd(this,d),d=e.R);d.C=e.C;e.C=d.R.C=!1;Hb(this,
e);a=this._;break}}else if(d=e.L,d.C&&(d.C=!1,e.C=!0,Dd(this,e),d=e.L),d.L&&d.L.C||d.R&&d.R.C){d.L&&d.L.C||(d.R.C=!1,d.C=!0,Hb(this,d),d=e.L);d.C=e.C;e.C=d.L.C=!1;Dd(this,e);a=this._;break}d.C=!0;a=e;e=e.U}while(!a.C);a&&(a.C=!1)}}};F.geom.voronoi=function(a){function d(a){var c=Array(a.length),e=n[0][0],g=n[0][1],f=n[1][0],k=n[1][1];return De(b(a),n).cells.forEach(function(d,b){var n=d.edges,q=d.site;(c[b]=n.length?n.map(function(a){a=a.start();return[a.x,a.y]}):q.x>=e&&q.x<=f&&q.y>=g&&q.y<=k?[[e,
k],[f,k],[f,g],[e,g]]:[]).point=a[b]}),c}function b(a){return a.map(function(a,d){return{x:Math.round(g(a,d)/da)*da,y:Math.round(f(a,d)/da)*da,i:d}})}var c=hd,e=ce,g=c,f=e,n=bg;return a?d(a):(d.links=function(a){return De(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(d){return{source:a[d.l.i],target:a[d.r.i]}})},d.triangles=function(a){var d=[];return De(b(a)).cells.forEach(function(b,c){for(var e,g=b.site,f=b.edges.sort(Ye),n=-1,k=f.length,q=f[k-1].edge,q=q.l===g?q.r:q.l;++n<k;)e=
q,q=f[n].edge,q=q.l===g?q.r:q.l,c<e.i&&c<q.i&&0>(g.x-q.x)*(e.y-g.y)-(g.x-e.x)*(q.y-g.y)&&d.push([a[c],a[e.i],a[q.i]])}),d},d.x=function(a){return arguments.length?(g=na(c=a),d):c},d.y=function(a){return arguments.length?(f=na(e=a),d):e},d.clipExtent=function(a){return arguments.length?(n=null==a?bg:a,d):n===bg?null:n},d.size=function(a){return arguments.length?d.clipExtent(a&&[[0,0],a]):n===bg?null:n&&n[1]},d)};var bg=[[-1E6,-1E6],[1E6,1E6]];F.geom.delaunay=function(a){return F.geom.voronoi().triangles(a)};
F.geom.quadtree=function(a,d,b,c,e){function g(a){function q(a,d,b,c,e,g,f,n){if(!isNaN(b)&&!isNaN(c))if(a.leaf){var k=a.x,m=a.y;if(null!=k){if(!(0.01>ya(k-b)+ya(m-c))){var l=a.point;a.x=a.y=a.point=null;v(a,l,k,m,e,g,f,n)}v(a,d,b,c,e,g,f,n)}else a.x=b,a.y=c,a.point=d}else v(a,d,b,c,e,g,f,n)}function v(a,d,b,c,e,g,f,n){var k=0.5*(e+f),m=0.5*(g+n),l=b>=k,y=c>=m,A=(y<<1)+l;a.leaf=!1;a=a.nodes[A]||(a.nodes[A]=Ed());l?e=k:f=k;y?g=m:n=m;q(a,d,b,c,e,g,f,n)}var m,l,y,A,z,P,p,B,C,E=na(n),W=na(k);if(null!=
d)P=d,p=b,B=c,C=e;else if(B=C=-(P=p=1/0),l=[],y=[],z=a.length,f)for(A=0;z>A;++A)m=a[A],m.x<P&&(P=m.x),m.y<p&&(p=m.y),m.x>B&&(B=m.x),m.y>C&&(C=m.y),l.push(m.x),y.push(m.y);else for(A=0;z>A;++A){var D=+E(m=a[A],A);m=+W(m,A);P>D&&(P=D);p>m&&(p=m);D>B&&(B=D);m>C&&(C=m);l.push(D);y.push(m)}D=B-P;m=C-p;D>m?C=p+D:B=P+m;var H=Ed();if(H.add=function(a){q(H,a,+E(a,++A),+W(a,A),P,p,B,C)},H.visit=function(a){Fd(a,H,P,p,B,C)},A=-1,null==d){for(;++A<z;)q(H,a[A],l[A],y[A],P,p,B,C);--A}else a.forEach(H.add);return l=
y=a=m=null,H}var f,n=hd,k=ce;return(f=arguments.length)?(n=xf,k=uc,3===f&&(e=b,c=d,b=d=0),g(a)):(g.x=function(a){return arguments.length?(n=a,g):n},g.y=function(a){return arguments.length?(k=a,g):k},g.extent=function(a){return arguments.length?(null==a?d=b=c=e=null:(d=+a[0][0],b=+a[0][1],c=+a[1][0],e=+a[1][1]),g):null==d?null:[[d,b],[c,e]]},g.size=function(a){return arguments.length?(null==a?d=b=c=e=null:(d=b=0,c=+a[0],e=+a[1]),g):null==d?null:[c-d,e-b]},g)};F.interpolateRgb=Gd;F.interpolateObject=
qa;F.interpolateNumber=jc;F.interpolateString=vc;var yf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;F.interpolate=Wc;F.interpolators=[function(a,d){var b=typeof d;return("string"===b?of.has(d)||/^(#|rgb\(|hsl\()/.test(d)?Gd:vc:d instanceof fa?Gd:"object"===b?Array.isArray(d)?gb:qa:jc)(a,d)}];F.interpolateArray=gb;var sh=function(){return Ca},Vh=F.map({linear:sh,poly:function(a){return function(d){return Math.pow(d,a)}},quad:function(){return jg},cubic:function(){return $e},sin:function(){return Fe},
exp:function(){return Ge},circle:function(){return zf},elastic:function(a,d){var b;return 2>arguments.length&&(d=0.45),arguments.length?b=d/nc*Math.asin(1/a):(a=1,b=d/4),function(c){return 1+a*Math.pow(2,-10*c)*Math.sin((c-b)*nc/d)}},back:function(a){return a||(a=1.70158),function(d){return d*d*((a+1)*d-a)}},bounce:function(){return kg}}),Wh=F.map({"in":Ca,out:Hd,"in-out":Id,"out-in":function(a){return Id(Hd(a))}});F.ease=function(a){var d=a.indexOf("-"),b=0<=d?a.substring(0,d):a,d=0<=d?a.substring(d+
1):"in";return b=Vh.get(b)||sh,d=Wh.get(d)||Ca,ie(d(b.apply(null,fh.call(arguments,1))))};F.interpolateHcl=function(a,d){a=F.hcl(a);d=F.hcl(d);var b=a.h,c=a.c,e=a.l,g=d.h-b,f=d.c-c,n=d.l-e;return isNaN(f)&&(f=0,c=isNaN(c)?d.c:c),isNaN(g)?(g=0,b=isNaN(b)?d.h:b):180<g?g-=360:-180>g&&(g+=360),function(a){return Fa(b+g*a,c+f*a,e+n*a)+""}};F.interpolateHsl=function(a,d){a=F.hsl(a);d=F.hsl(d);var b=a.h,c=a.s,e=a.l,g=d.h-b,f=d.s-c,n=d.l-e;return isNaN(f)&&(f=0,c=isNaN(c)?d.s:c),isNaN(g)?(g=0,b=isNaN(b)?
d.h:b):180<g?g-=360:-180>g&&(g+=360),function(a){return la(b+g*a,c+f*a,e+n*a)+""}};F.interpolateLab=function(a,d){a=F.lab(a);d=F.lab(d);var b=a.l,c=a.a,e=a.b,g=d.l-b,f=d.a-c,n=d.b-e;return function(a){return kb(b+g*a,c+f*a,e+n*a)+""}};F.interpolateRound=He;F.transform=function(a){var d=Rc.createElementNS(F.ns.prefix.svg,"g");return(F.transform=function(a){if(null!=a){d.setAttribute("transform",a);var b=d.transform.baseVal.consolidate()}return new Ie(b?b.matrix:Xh)})(a)};Ie.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Xh={a:1,b:0,c:0,d:1,e:0,f:0};F.interpolateTransform=bf;F.layout={};F.layout.bundle=function(){return function(a){for(var d=[],b=-1,c=a.length;++b<c;)d.push(Kd(a[b]));return d}};F.layout.chord=function(){function a(){var q,m,l,y,A,z={},P=[],p=F.range(g),B=[];b=[];c=[];q=0;for(y=-1;++y<g;){m=0;for(A=-1;++A<g;)m+=e[y][A];P.push(m);B.push(F.range(g));q+=m}f&&p.sort(function(a,d){return f(P[a],P[d])});n&&B.forEach(function(a,
d){a.sort(function(a,b){return n(e[d][a],e[d][b])})});q=(nc-v*g)/q;m=0;for(y=-1;++y<g;){l=m;for(A=-1;++A<g;){var C=p[y],E=B[C][A],W=e[C][E],D=m,H=m+=W*q;z[C+"-"+E]={index:C,subindex:E,startAngle:D,endAngle:H,value:W}}c[C]={index:C,startAngle:l,endAngle:m,value:(m-l)/q};m+=v}for(y=-1;++y<g;)for(A=y-1;++A<g;)q=z[y+"-"+A],m=z[A+"-"+y],(q.value||m.value)&&b.push(q.value<m.value?{source:m,target:q}:{source:q,target:m});k&&d()}function d(){b.sort(function(a,d){return k((a.source.value+a.target.value)/2,
(d.source.value+d.target.value)/2)})}var b,c,e,g,f,n,k,q={},v=0;return q.matrix=function(a){return arguments.length?(g=(e=a)&&e.length,b=c=null,q):e},q.padding=function(a){return arguments.length?(v=a,b=c=null,q):v},q.sortGroups=function(a){return arguments.length?(f=a,b=c=null,q):f},q.sortSubgroups=function(a){return arguments.length?(n=a,b=null,q):n},q.sortChords=function(a){return arguments.length?(k=a,b&&d(),q):k},q.chords=function(){return b||a(),b},q.groups=function(){return c||a(),c},q};F.layout.force=
function(){function a(d){return function(a,b,c,e){if(a.point!==d){c=a.cx-d.x;var g=a.cy-d.y;b=e-b;e=c*c+g*g;if(e>b*b/P)return A>e&&(b=a.charge/e,d.px-=c*b,d.py-=g*b),!0;a.point&&e&&A>e&&(b=a.pointCharge/e,d.px-=c*b,d.py-=g*b)}return!a.charge}}function d(a){a.px=F.event.x;a.py=F.event.y;n.resume()}var b,c,e,g,f,n={},k=F.dispatch("start","tick","end"),q=[1,1],v=0.9,m=Yh,l=Zh,y=-30,A=$h,z=0.1,P=0.64,p=[],B=[];return n.tick=function(){if(0.005>(c*=0.99))return k.end({type:"end",alpha:c=0}),!0;var d,b,
n,m,l,A,P,C,E=p.length,W=B.length;for(b=0;W>b;++b)n=B[b],d=n.source,m=n.target,P=m.x-d.x,C=m.y-d.y,(l=P*P+C*C)&&(l=c*g[b]*((l=Math.sqrt(l))-e[b])/l,P*=l,C*=l,m.x-=P*(A=d.weight/(m.weight+d.weight)),m.y-=C*A,d.x+=P*(A=1-A),d.y+=C*A);if((A=c*z)&&(P=q[0]/2,C=q[1]/2,b=-1,A))for(;++b<E;)n=p[b],n.x+=(P-n.x)*A,n.y+=(C-n.y)*A;if(y)for(Af(d=F.geom.quadtree(p),c,f),b=-1;++b<E;)(n=p[b]).fixed||d.visit(a(n));for(b=-1;++b<E;)n=p[b],n.fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*v,n.y-=(n.py-(n.py=n.y))*v);
k.tick({type:"tick",alpha:c})},n.nodes=function(a){return arguments.length?(p=a,n):p},n.links=function(a){return arguments.length?(B=a,n):B},n.size=function(a){return arguments.length?(q=a,n):q},n.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,n):m},n.distance=n.linkDistance,n.linkStrength=function(a){return arguments.length?(l="function"==typeof a?a:+a,n):l},n.friction=function(a){return arguments.length?(v=+a,n):v},n.charge=function(a){return arguments.length?(y="function"==
typeof a?a:+a,n):y},n.chargeDistance=function(a){return arguments.length?(A=a*a,n):Math.sqrt(A)},n.gravity=function(a){return arguments.length?(z=+a,n):z},n.theta=function(a){return arguments.length?(P=a*a,n):Math.sqrt(P)},n.alpha=function(a){return arguments.length?(a=+a,c?c=0<a?a:0:0<a&&(k.start({type:"start",alpha:c=a}),F.timer(n.tick)),n):c},n.start=function(){function a(c,e){if(!b){b=Array(k);for(n=0;k>n;++n)b[n]=[];for(n=0;q>n;++n){var g=B[n];b[g.source.index].push(g.target);b[g.target.index].push(g.source)}}for(var f=
b[d],n=-1,q=f.length;++n<q;)if(!isNaN(g=f[n][c]))return g;return Math.random()*e}var d,b,c,k=p.length,v=B.length,A=q[0],z=q[1];for(d=0;k>d;++d)(c=p[d]).index=d,c.weight=0;for(d=0;v>d;++d)c=B[d],"number"==typeof c.source&&(c.source=p[c.source]),"number"==typeof c.target&&(c.target=p[c.target]),++c.source.weight,++c.target.weight;for(d=0;k>d;++d)c=p[d],isNaN(c.x)&&(c.x=a("x",A)),isNaN(c.y)&&(c.y=a("y",z)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(e=[],"function"==typeof m)for(d=0;v>d;++d)e[d]=
+m.call(this,B[d],d);else for(d=0;v>d;++d)e[d]=m;if(g=[],"function"==typeof l)for(d=0;v>d;++d)g[d]=+l.call(this,B[d],d);else for(d=0;v>d;++d)g[d]=l;if(f=[],"function"==typeof y)for(d=0;k>d;++d)f[d]=+y.call(this,p[d],d);else for(d=0;k>d;++d)f[d]=y;return n.resume()},n.resume=function(){return n.alpha(0.1)},n.stop=function(){return n.alpha(0)},n.drag=function(){return b||(b=F.behavior.drag().origin(Ca).on("dragstart.force",lg).on("drag.force",d).on("dragend.force",Xc)),arguments.length?(this.on("mouseover.force",
Lb).on("mouseout.force",mg).call(b),void 0):b},F.rebind(n,k,"on")};var Yh=20,Zh=1,$h=1/0;F.layout.hierarchy=function(){function a(d,f,n){var k=e.call(b,d,f);if(d.depth=f,n.push(d),k&&(q=k.length)){for(var q,v=-1,m=d.children=Array(q),l=0,y=f+1;++v<q;)f=m[v]=a(k[v],y,n),f.parent=d,l+=f.value;c&&m.sort(c);g&&(d.value=l)}else delete d.children,g&&(d.value=+g.call(b,d,f)||0);return d}function d(a,c){var e=a.children,f=0;if(e&&(n=e.length))for(var n,k=-1,q=c+1;++k<n;)f+=d(e[k],q);else g&&(f=+g.call(b,
a,c)||0);return g&&(a.value=f),f}function b(d){var c=[];return a(d,0,c),c}var c=og,e=cf,g=df;return b.sort=function(a){return arguments.length?(c=a,b):c},b.children=function(a){return arguments.length?(e=a,b):e},b.value=function(a){return arguments.length?(g=a,b):g},b.revalue=function(a){return d(a,0),a},b};F.layout.partition=function(){function a(d,b,c,e){var g=d.children;if(d.x=b,d.y=d.depth*e,d.dx=c,d.dy=e,g&&(f=g.length)){var f,n,k=-1;for(c=d.value?c/d.value:0;++k<f;)a(n=g[k],b,d=n.value*c,e),
b+=d}}function d(a){a=a.children;var b=0;if(a&&(c=a.length))for(var c,e=-1;++e<c;)b=Math.max(b,d(a[e]));return 1+b}function b(g,f){var n=c.call(this,g,f);return a(n[0],0,e[0],e[1]/d(n[0])),n}var c=F.layout.hierarchy(),e=[1,1];return b.size=function(a){return arguments.length?(e=a,b):e},$b(b,c)};F.layout.pie=function(){function a(g){var f=g.map(function(b,c){return+d.call(a,b,c)}),n=+("function"==typeof c?c.apply(this,arguments):c),k=(("function"==typeof e?e.apply(this,arguments):e)-n)/F.sum(f),q=
F.range(g.length);null!=b&&q.sort(b===th?function(a,d){return f[d]-f[a]}:function(a,d){return b(g[a],g[d])});var v=[];return q.forEach(function(a){var d;v[a]={data:g[a],value:d=f[a],startAngle:n,endAngle:n+=d*k}}),v}var d=Number,b=th,c=0,e=nc;return a.value=function(b){return arguments.length?(d=b,a):d},a.sort=function(d){return arguments.length?(b=d,a):b},a.startAngle=function(d){return arguments.length?(c=d,a):c},a.endAngle=function(d){return arguments.length?(e=d,a):e},a};var th={};F.layout.stack=
function(){function a(n,k){var q=n.map(function(b,c){return d.call(a,b,c)}),v=q.map(function(d){return d.map(function(d,b){return[g.call(a,d,b),f.call(a,d,b)]})}),m=b.call(a,v,k),q=F.permute(q,m),v=F.permute(v,m),l,y,A=c.call(a,v,k),z=q.length,P=q[0].length;for(l=0;P>l;++l)for(e.call(a,q[0][l],y=A[l],v[0][l][1]),m=1;z>m;++m)e.call(a,q[m][l],y+=v[m-1][l][1],v[m][l][1]);return n}var d=Ca,b=Yc,c=ff,e=ef,g=pg,f=je;return a.values=function(b){return arguments.length?(d=b,a):d},a.order=function(d){return arguments.length?
(b="function"==typeof d?d:ai.get(d)||Yc,a):b},a.offset=function(d){return arguments.length?(c="function"==typeof d?d:bi.get(d)||ff,a):c},a.x=function(d){return arguments.length?(g=d,a):g},a.y=function(d){return arguments.length?(f=d,a):f},a.out=function(d){return arguments.length?(e=d,a):e},a};var ai=F.map({"inside-out":function(a){var d,b=a.length,c=a.map(id),e=a.map(Bf),g=F.range(b).sort(function(a,d){return c[a]-c[d]}),f=0,n=0,k=[],q=[];for(a=0;b>a;++a)d=g[a],n>f?(f+=e[d],k.push(d)):(n+=e[d],q.push(d));
return q.reverse().concat(k)},reverse:function(a){return F.range(a.length).reverse()},"default":Yc}),bi=F.map({silhouette:function(a){var d,b,c,e=a.length,g=a[0].length,f=[],n=0,k=[];for(b=0;g>b;++b){for(c=d=0;e>d;d++)c+=a[d][b][1];c>n&&(n=c);f.push(c)}for(b=0;g>b;++b)k[b]=(n-f[b])/2;return k},wiggle:function(a){var d,b,c,e,g,f,n,k,q,v=a.length,m=a[0],l=m.length,y=[];y[0]=k=q=0;for(b=1;l>b;++b){for(e=d=0;v>d;++d)e+=a[d][b][1];g=d=0;for(n=m[b][0]-m[b-1][0];v>d;++d){c=0;for(f=(a[d][b][1]-a[d][b-1][1])/
(2*n);d>c;++c)f+=(a[c][b][1]-a[c][b-1][1])/n;g+=f*a[d][b][1]}y[b]=k-=e?g/e*n:0;q>k&&(q=k)}for(b=0;l>b;++b)y[b]-=q;return y},expand:function(a){var d,b,c,e=a.length,g=a[0].length,f=1/e,n=[];for(b=0;g>b;++b){for(c=d=0;e>d;d++)c+=a[d][b][1];if(c)for(d=0;e>d;d++)a[d][b][1]/=c;else for(d=0;e>d;d++)a[d][b][1]=f}for(b=0;g>b;++b)n[b]=0;return n},zero:ff});F.layout.histogram=function(){function a(g,f){var n,k,q=[],v=g.map(b,this),m=c.call(this,v,f),l=e.call(this,m,v,f);f=-1;for(var y=v.length,A=l.length-1,
z=d?1:1/y;++f<A;)n=q[f]=[],n.dx=l[f+1]-(n.x=l[f]),n.y=0;if(0<A)for(f=-1;++f<y;)k=v[f],k>=m[0]&&k<=m[1]&&(n=q[F.bisect(l,k,1,A)-1],n.y+=z,n.push(g[f]));return q}var d=!0,b=Number,c=kd,e=Cf;return a.value=function(d){return arguments.length?(b=d,a):b},a.range=function(d){return arguments.length?(c=na(d),a):c},a.bins=function(d){return arguments.length?(e="number"==typeof d?function(a){return jd(a,d)}:na(d),a):e},a.frequency=function(b){return arguments.length?(d=!!b,a):d},a};F.layout.tree=function(){function a(g,
f){function n(a,d){var c=a.children,e=a._tree;if(c&&(g=c.length)){for(var g,f,k,q=c[0],v=q,m=-1;++m<g;){k=c[m];n(k,f);var l=k;if(f){for(var y=void 0,A=l,z=l,P=l.parent.children[0],p=A._tree.mod,B=z._tree.mod,C=f._tree.mod,E=P._tree.mod;f=Md(f),A=Ld(A),f&&A;){P=Ld(P);z=Md(z);z._tree.ancestor=l;y=f._tree.prelim+C-A._tree.prelim-p+b(f,A);if(0<y){var W=f._tree.ancestor.parent==l.parent?f._tree.ancestor:v,D=l,H=y,W=W._tree,D=D._tree,x=H/(D.number-W.number);W.change+=x;D.change-=x;D.shift+=H;D.prelim+=
H;D.mod+=H;p+=y;B+=y}C+=f._tree.mod;p+=A._tree.mod;E+=P._tree.mod;B+=z._tree.mod}f&&!Md(z)&&(z._tree.thread=f,z._tree.mod+=C-B);A&&!Ld(P)&&(P._tree.thread=A,P._tree.mod+=p-E,v=l)}f=k}m=g=0;l=a.children;for(v=l.length;0<=--v;)c=l[v]._tree,c.prelim+=g,c.mod+=g,g+=c.shift+(m+=c.change);k=0.5*(q._tree.prelim+k._tree.prelim);d?(e.prelim=d._tree.prelim+b(a,d),e.mod=e.prelim-k):e.prelim=k}else d&&(e.prelim=d._tree.prelim+b(a,d))}function k(a,d){a.x=a._tree.prelim+d;var b=a.children;if(b&&(c=b.length)){var c,
e=-1;for(d+=a._tree.mod;++e<c;)k(b[e],d)}}var q=d.call(this,g,f),v=q[0];xc(v,function(a,d){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:d?d._tree.number+1:0}});n(v);k(v,-v._tree.prelim);var m=ke(v,wc),l=ke(v,Ke),y=ke(v,Ef),A=m.x-b(m,l)/2,z=l.x+b(l,m)/2,P=y.depth||1;return xc(v,e?function(a){a.x*=c[0];a.y=a.depth*c[1];delete a._tree}:function(a){a.x=(a.x-A)/(z-A)*c[0];a.y=a.depth/P*c[1];delete a._tree}),q}var d=F.layout.hierarchy().sort(null).value(null),b=Df,c=[1,1],e=!1;return a.separation=
function(d){return arguments.length?(b=d,a):b},a.size=function(d){return arguments.length?(e=null==(c=d),a):e?null:c},a.nodeSize=function(d){return arguments.length?(e=null!=(c=d),a):e?c:null},$b(a,d)};F.layout.pack=function(){function a(g,f){var n=b.call(this,g,f),k=n[0],q=e[0],v=e[1],m=null==d?Math.sqrt:"function"==typeof d?d:function(){return d};if(k.x=k.y=0,xc(k,function(a){a.r=+m(a.value)}),xc(k,jf),c){var l=c*(d?1:Math.max(2*k.r/q,2*k.r/v))/2;xc(k,function(a){a.r+=l});xc(k,jf);xc(k,function(a){a.r-=
l})}return Nd(k,q/2,v/2,d?1:1/Math.max(2*k.r/q,2*k.r/v)),n}var d,b=F.layout.hierarchy().sort(hf),c=0,e=[1,1];return a.size=function(d){return arguments.length?(e=d,a):e},a.radius=function(b){return arguments.length?(d=null==b||"function"==typeof b?b:+b,a):d},a.padding=function(d){return arguments.length?(c=+d,a):c},$b(a,b)};F.layout.cluster=function(){function a(g,f){var n,k=d.call(this,g,f),q=k[0],v=0;xc(q,function(a){var d=a.children;d&&d.length?(a.x=Ne(d),a.y=md(d)):(a.x=n?v+=b(a,n):0,a.y=0,n=
a)});var m=Gc(q),l=Gf(q),y=m.x-b(m,l)/2,A=l.x+b(l,m)/2;return xc(q,e?function(a){a.x=(a.x-q.x)*c[0];a.y=(q.y-a.y)*c[1]}:function(a){a.x=(a.x-y)/(A-y)*c[0];a.y=(1-(q.y?a.y/q.y:1))*c[1]}),k}var d=F.layout.hierarchy().sort(null).value(null),b=Df,c=[1,1],e=!1;return a.separation=function(d){return arguments.length?(b=d,a):b},a.size=function(d){return arguments.length?(e=null==(c=d),a):e?null:c},a.nodeSize=function(d){return arguments.length?(e=null!=(c=d),a):e?c:null},$b(a,d)};F.layout.treemap=function(){function a(d,
b){for(var c,e,g=-1,f=d.length;++g<f;)e=(c=d[g]).value*(0>b?0:b),c.area=isNaN(e)||0>=e?0:e}function d(b){var e=b.children;if(e&&e.length){var g,f=v(b),n=[],k=e.slice(),q=1/0,m="slice"===l?f.dx:"dice"===l?f.dy:"slice-dice"===l?1&b.depth?f.dy:f.dx:Math.min(f.dx,f.dy);a(k,f.dx*f.dy/b.value);for(n.area=0;0<(b=k.length);){n.push(b=k[b-1]);n.area+=b.area;var A;if(!(A="squarify"!==l)){b=m;g=void 0;var z=n.area;A=0;for(var P=1/0,p=-1,B=n.length;++p<B;)(g=n[p].area)&&(P>g&&(P=g),g>A&&(A=g));A=(g=(z*=z,b*=
b,z?Math.max(b*A*y/z,z/(b*P*y)):1/0))<=q}A?(k.pop(),q=g):(n.area-=n.pop().area,c(n,m,f,!1),m=Math.min(f.dx,f.dy),n.length=n.area=0,q=1/0)}n.length&&(c(n,m,f,!0),n.length=n.area=0);e.forEach(d)}}function b(d){var e=d.children;if(e&&e.length){var g=v(d),f=e.slice(),n=[];a(f,g.dx*g.dy/d.value);for(n.area=0;d=f.pop();)n.push(d),n.area+=d.area,null!=d.z&&(c(n,d.z?g.dx:g.dy,g,!f.length),n.length=n.area=0);e.forEach(b)}}function c(a,d,b,e){var g,f=-1,k=a.length,q=b.x,v=b.y,m=d?n(a.area/d):0;if(d==b.dx){for((e||
m>b.dy)&&(m=b.dy);++f<k;)g=a[f],g.x=q,g.y=v,g.dy=m,q+=g.dx=Math.min(b.x+b.dx-q,m?n(g.area/m):0);g.z=!0;g.dx+=b.x+b.dx-q;b.y+=m;b.dy-=m}else{for((e||m>b.dx)&&(m=b.dx);++f<k;)g=a[f],g.x=q,g.y=v,g.dx=m,v+=g.dy=Math.min(b.y+b.dy-v,m?n(g.area/m):0);g.z=!1;g.dy+=b.y+b.dy-v;b.x+=m;b.dx-=m}}function e(c){c=g||f(c);var n=c[0];return n.x=0,n.y=0,n.dx=k[0],n.dy=k[1],g&&f.revalue(n),a([n],n.dx*n.dy/n.value),(g?b:d)(n),m&&(g=c),c}var g,f=F.layout.hierarchy(),n=Math.round,k=[1,1],q=null,v=Od,m=!1,l="squarify",
y=0.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?(k=a,e):k},e.padding=function(a){function d(b){var c=a.call(e,b,b.depth);return null==c?Od(b):Oc(b,"number"==typeof c?[c,c,c,c]:c)}function b(d){return Oc(d,a)}if(!arguments.length)return q;var c;return v=null==(q=a)?Od:"function"==(c=typeof a)?d:"number"===c?(a=[a,a,a,a],b):b,e},e.round=function(a){return arguments.length?(n=a?Math.round:Number,e):n!=Number},e.sticky=function(a){return arguments.length?(m=a,g=null,e):m},e.ratio=
function(a){return arguments.length?(y=a,e):y},e.mode=function(a){return arguments.length?(l=a+"",e):l},$b(e,f)};F.random={normal:function(a,d){var b=arguments.length;return 2>b&&(d=1),1>b&&(a=0),function(){var b,c;do b=2*Math.random()-1,c=2*Math.random()-1,c=b*b+c*c;while(!c||1<c);return a+d*b*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var a=F.random.normal.apply(F,arguments);return function(){return Math.exp(a())}},bates:function(a){var d=F.random.irwinHall(a);return function(){return d()/
a}},irwinHall:function(a){return function(){for(var d=0,b=0;a>b;b++)d+=Math.random();return d}}};F.scale={};var Ch={floor:Ca,ceil:Ca};F.scale.linear=function(){return Pc([0,1],[0,1],Wc,!1)};var Dh={s:1,g:1,p:1,r:1,e:1};F.scale.log=function(){return If(F.scale.linear().domain([0,1]),10,!0,[1,10])};var Wg=F.format(".0e"),Eh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};F.scale.pow=function(){return Jf(F.scale.linear(),1,[0,1])};F.scale.sqrt=function(){return F.scale.pow().exponent(0.5)};
F.scale.ordinal=function(){return Qe([],{t:"range",a:[[]]})};F.scale.category10=function(){return F.scale.ordinal().range(ci)};F.scale.category20=function(){return F.scale.ordinal().range(di)};F.scale.category20b=function(){return F.scale.ordinal().range(ei)};F.scale.category20c=function(){return F.scale.ordinal().range(fi)};var ci=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pb),di=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,
9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pb),ei=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pb),fi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pb);F.scale.quantile=
function(){return $c([],[])};F.scale.quantize=function(){return Kf(0,1,[0,1])};F.scale.threshold=function(){return kf([0.5],[0,1])};F.scale.identity=function(){return Qc([0,1])};F.svg={};F.svg.arc=function(){function a(){var g=d.apply(this,arguments),f=b.apply(this,arguments),n=c.apply(this,arguments)+pe,k=e.apply(this,arguments)+pe,q=(n>k&&(q=n,n=k,k=q),k-n),v=xa>q?"0":"1",m=Math.cos(n),n=Math.sin(n),l=Math.cos(k),k=Math.sin(k);return q>=gi?g?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+
f+"M0,"+g+"A"+g+","+g+" 0 1,0 0,"+-g+"A"+g+","+g+" 0 1,0 0,"+g+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":g?"M"+f*m+","+f*n+"A"+f+","+f+" 0 "+v+",1 "+f*l+","+f*k+"L"+g*l+","+g*k+"A"+g+","+g+" 0 "+v+",0 "+g*m+","+g*n+"Z":"M"+f*m+","+f*n+"A"+f+","+f+" 0 "+v+",1 "+f*l+","+f*k+"L0,0Z"}var d=oe,b=sg,c=P,e=W;return a.innerRadius=function(b){return arguments.length?(d=na(b),a):d},a.outerRadius=function(d){return arguments.length?(b=na(d),a):b},a.startAngle=function(d){return arguments.length?
(c=na(d),a):c},a.endAngle=function(d){return arguments.length?(e=na(d),a):e},a.centroid=function(){var a=(d.apply(this,arguments)+b.apply(this,arguments))/2,g=(c.apply(this,arguments)+e.apply(this,arguments))/2+pe;return[Math.cos(g)*a,Math.sin(g)*a]},a};var pe=-ec,gi=nc-da;F.svg.line=function(){return Ba(Ca)};var tg=F.map({linear:yc,"linear-closed":function(a){return yc(a)+"Z"},step:function(a){for(var d=0,b=a.length,c=a[0],e=[c[0],",",c[1]];++d<b;)e.push("H",(c[0]+(c=a[d])[0])/2,"V",c[1]);return 1<
b&&e.push("H",c[0]),e.join("")},"step-before":ug,"step-after":vg,basis:Xg,"basis-open":function(a){if(4>a.length)return yc(a);for(var d,b=[],c=-1,e=a.length,g=[0],f=[0];3>++c;)d=a[c],g.push(d[0]),f.push(d[1]);b.push(Hc(Sd,g)+","+Hc(Sd,f));for(--c;++c<e;)d=a[c],g.shift(),g.push(d[0]),f.shift(),f.push(d[1]),wg(b,g,f);return b.join("")},"basis-closed":function(a){for(var d,b,c=-1,e=a.length,g=e+4,f=[],n=[];4>++c;)b=a[c%e],f.push(b[0]),n.push(b[1]);d=[Hc(Sd,f),",",Hc(Sd,n)];for(--c;++c<g;)b=a[c%e],f.shift(),
f.push(b[0]),n.shift(),n.push(b[1]),wg(d,f,n);return d.join("")},bundle:function(a,d){var b=a.length-1;if(b)for(var c,e,g=a[0][0],f=a[0][1],n=a[b][0]-g,k=a[b][1]-f,q=-1;++q<=b;)c=a[q],e=q/b,c[0]=d*c[0]+(1-d)*(g+e*n),c[1]=d*c[1]+(1-d)*(f+e*k);return Xg(a)},cardinal:function(a,d){return 3>a.length?yc(a):a[0]+Lf(a,Mb(a,d))},"cardinal-open":function(a,d){return 4>a.length?yc(a):a[1]+Lf(a.slice(1,a.length-1),Mb(a,d))},"cardinal-closed":function(a,d){return 3>a.length?yc(a):a[0]+Lf((a.push(a[0]),a),Mb([a[a.length-
2]].concat(a,[a[1]]),d))},monotone:function(a){if(3>a.length)a=yc(a);else{var d=a[0],b,c,e,g,f=[],n;b=0;n=a.length-1;for(var k=[],q=a[1],v=k[0]=xg(a[0],q);++b<n;)k[b]=(v+(v=xg(q,q=a[b+1])))/2;n=(k[b]=v,k);k=-1;for(q=a.length-1;++k<q;)b=xg(a[k],a[k+1]),ya(b)<da?n[k]=n[k+1]=0:(c=n[k]/b,e=n[k+1]/b,g=c*c+e*e,9<g&&(g=3*b/Math.sqrt(g),n[k]=g*c,n[k+1]=g*e));for(k=-1;++k<=q;)g=(a[Math.min(q,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+n[k]*n[k])),f.push([g||0,n[k]*g||0]);a=d+Lf(a,f)}return a}});tg.forEach(function(a,
d){d.key=a;d.closed=/-closed$/.test(a)});var Yg=[0,2/3,1/3,0],Zg=[0,1/3,2/3,0],Sd=[0,1/6,2/3,1/6];F.svg.line.radial=function(){var a=Ba($g);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};ug.reverse=vg;vg.reverse=ug;F.svg.area=function(){return ah(Ca)};F.svg.area.radial=function(){var a=ah($g);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};F.svg.chord=function(){function a(g,
f){var n=d(this,c,g,f),k=d(this,e,g,f);return"M"+n.p0+b(n.r,n.p1,n.a1-n.a0)+(n.a0==k.a0&&n.a1==k.a1?"Q 0,0 "+n.p0:"Q 0,0 "+k.p0+b(k.r,k.p1,k.a1-k.a0)+("Q 0,0 "+n.p0))+"Z"}function d(a,b,c,e){var k=b.call(a,c,e);b=g.call(a,k,e);c=f.call(a,k,e)+pe;a=n.call(a,k,e)+pe;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function b(a,d,c){return"A"+a+","+a+" 0 "+ +(c>xa)+",1 "+d}var c=ae,e=hc,g=Fh,f=P,n=W;return a.radius=function(d){return arguments.length?(g=na(d),a):
g},a.source=function(d){return arguments.length?(c=na(d),a):c},a.target=function(d){return arguments.length?(e=na(d),a):e},a.startAngle=function(d){return arguments.length?(f=na(d),a):f},a.endAngle=function(d){return arguments.length?(n=na(d),a):n},a};F.svg.diagonal=function(){function a(e,g){var f=d.call(this,e,g),n=b.call(this,e,g),k=(f.y+n.y)/2,f=[f,{x:f.x,y:k},{x:n.x,y:k},n];return f=f.map(c),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var d=ae,b=hc,c=bh;return a.source=function(b){return arguments.length?
(d=na(b),a):d},a.target=function(d){return arguments.length?(b=na(d),a):b},a.projection=function(d){return arguments.length?(c=d,a):c},a};F.svg.diagonal.radial=function(){var a=F.svg.diagonal(),d=bh,b=a.projection;return a.projection=function(a){return arguments.length?b(Gh(d=a)):d},a};F.svg.symbol=function(){function a(c,e){return(uh.get(d.call(this,c,e))||ch)(b.call(this,c,e))}var d=Ih,b=Hh;return a.type=function(b){return arguments.length?(d=na(b),a):d},a.size=function(d){return arguments.length?
(b=na(d),a):b},a};var uh=F.map({circle:ch,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*vh));var d=a*vh;return"M0,"+-a+"L"+d+",0 0,"+a+" "+-d+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/cg);var d=a*cg/2;return"M0,"+d+"L"+a+","+-d+" "+-a+","+-d+"Z"},"triangle-up":function(a){a=
Math.sqrt(a/cg);var d=a*cg/2;return"M0,"+-d+"L"+a+","+d+" "+-a+","+d+"Z"}});F.svg.symbolTypes=uh.keys();var re,Pf,cg=Math.sqrt(3),vh=Math.tan(30*wa),Ab=[],jh=0;Ab.call=Pa.call;Ab.empty=Pa.empty;Ab.node=Pa.node;Ab.size=Pa.size;F.transition=function(a){return arguments.length?re?a.transition():a:ih.transition()};F.transition.prototype=Ab;Ab.select=function(a){var d,b,c,e=this.id,g=[];a=y(a);for(var f=-1,n=this.length;++f<n;){g.push(d=[]);for(var k=this[f],q=-1,v=k.length;++q<v;)(c=k[q])&&(b=a.call(c,
c.__data__,q,f))?("__data__"in c&&(b.__data__=c.__data__),Mf(b,q,e,c.__transition__[e]),d.push(b)):d.push(null)}return lf(g,e)};Ab.selectAll=function(a){var d,b,c,e,g=this.id,f=[];a=A(a);for(var n=-1,k=this.length;++n<k;)for(var q=this[n],v=-1,m=q.length;++v<m;)if(d=q[v]){e=d.__transition__[g];b=a.call(d,d.__data__,v,n);f.push(d=[]);for(var l=-1,y=b.length;++l<y;)(c=b[l])&&Mf(c,l,g,e),d.push(c)}return lf(f,g)};Ab.filter=function(a){var d,b,c,e=[];"function"!=typeof a&&(a=I(a));for(var g=0,f=this.length;f>
g;g++){e.push(d=[]);b=this[g];for(var n=0,k=b.length;k>n;n++)(c=b[n])&&a.call(c,c.__data__,n,g)&&d.push(c)}return lf(e,this.id)};Ab.tween=function(a,d){var b=this.id;return 2>arguments.length?this.node().__transition__[b].tween.get(a):N(this,null==d?function(d){d.__transition__[b].tween.remove(a)}:function(c){c.__transition__[b].tween.set(a,d)})};Ab.attr=function(a,d){function b(){this.removeAttribute(n)}function c(){this.removeAttributeNS(n.space,n.local)}function e(a){return null==a?b:(a+="",function(){var d,
b=this.getAttribute(n);return b!==a&&(d=f(b,a),function(a){this.setAttribute(n,d(a))})})}function g(a){return null==a?c:(a+="",function(){var d,b=this.getAttributeNS(n.space,n.local);return b!==a&&(d=f(b,a),function(a){this.setAttributeNS(n.space,n.local,d(a))})})}if(2>arguments.length){for(d in a)this.attr(d,a[d]);return this}var f="transform"==a?bf:Wc,n=F.ns.qualify(a);return yg(this,"attr."+a,d,n.local?g:e)};Ab.attrTween=function(a,d){function b(a,c){var g=d.call(this,a,c,this.getAttribute(e));
return g&&function(a){this.setAttribute(e,g(a))}}function c(a,b){var g=d.call(this,a,b,this.getAttributeNS(e.space,e.local));return g&&function(a){this.setAttributeNS(e.space,e.local,g(a))}}var e=F.ns.qualify(a);return this.tween("attr."+a,e.local?c:b)};Ab.style=function(a,d,b){function c(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(d="");for(b in a)this.style(b,a[b],d);return this}b=""}return yg(this,"style."+a,d,function(d){return null==d?c:(d+="",function(){var c,
e=Ob.getComputedStyle(this,null).getPropertyValue(a);return e!==d&&(c=Wc(e,d),function(d){this.style.setProperty(a,c(d),b)})})})};Ab.styleTween=function(a,d,b){return 3>arguments.length&&(b=""),this.tween("style."+a,function(c,e){var g=d.call(this,c,e,Ob.getComputedStyle(this,null).getPropertyValue(a));return g&&function(d){this.style.setProperty(a,g(d),b)}})};Ab.text=function(a){return yg(this,"text",a,Jh)};Ab.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&
(a=this.parentNode)&&a.removeChild(this)})};Ab.ease=function(a){var d=this.id;return 1>arguments.length?this.node().__transition__[d].ease:("function"!=typeof a&&(a=F.ease.apply(F,arguments)),N(this,function(b){b.__transition__[d].ease=a}))};Ab.delay=function(a){var d=this.id;return N(this,"function"==typeof a?function(b,c,e){b.__transition__[d].delay=+a.call(b,b.__data__,c,e)}:(a=+a,function(b){b.__transition__[d].delay=a}))};Ab.duration=function(a){var d=this.id;return N(this,"function"==typeof a?
function(b,c,e){b.__transition__[d].duration=Math.max(1,a.call(b,b.__data__,c,e))}:(a=Math.max(1,a),function(b){b.__transition__[d].duration=a}))};Ab.each=function(a,d){var b=this.id;if(2>arguments.length){var c=Pf,e=re;re=b;N(this,function(d,c,e){Pf=d.__transition__[b];a.call(d,d.__data__,c,e)});Pf=c;re=e}else N(this,function(c){c=c.__transition__[b];(c.event||(c.event=F.dispatch("start","end"))).on(a,d)});return this};Ab.transition=function(){for(var a,d,b,c,e=this.id,g=++jh,f=[],n=0,k=this.length;k>
n;n++){f.push(a=[]);d=this[n];for(var q=0,v=d.length;v>q;q++)(b=d[q])&&(c=Object.create(b.__transition__[e]),c.delay+=c.duration,Mf(b,q,g,c)),a.push(b)}return lf(f,g)};F.svg.axis=function(){function a(q){q.each(function(){var a,q=F.select(this),v=this.__chart__||b,m=this.__chart__=b.copy(),l=null==k?m.ticks?m.ticks.apply(m,n):m.domain():k,y=null==d?m.tickFormat?m.tickFormat.apply(m,n):Ca:d,A=q.selectAll(".tick").data(l,m),l=A.enter().insert("g",".domain").attr("class","tick").style("opacity",da),
z=F.transition(A.exit()).style("opacity",da).remove(),P=F.transition(A).style("opacity",1),p=Oe(m),q=q.selectAll(".domain").data([0]),q=(q.enter().append("path").attr("class","domain"),F.transition(q));l.append("line");l.append("text");var B=l.select("line"),C=P.select("line"),y=A.select("text").text(y),A=l.select("text"),E=P.select("text");switch(c){case "bottom":a=dh;B.attr("y2",e);A.attr("y",Math.max(e,0)+f);C.attr("x2",0).attr("y2",e);E.attr("x",0).attr("y",Math.max(e,0)+f);y.attr("dy",".71em").style("text-anchor",
"middle");q.attr("d","M"+p[0]+","+g+"V0H"+p[1]+"V"+g);break;case "top":a=dh;B.attr("y2",-e);A.attr("y",-(Math.max(e,0)+f));C.attr("x2",0).attr("y2",-e);E.attr("x",0).attr("y",-(Math.max(e,0)+f));y.attr("dy","0em").style("text-anchor","middle");q.attr("d","M"+p[0]+","+-g+"V0H"+p[1]+"V"+-g);break;case "left":a=eh;B.attr("x2",-e);A.attr("x",-(Math.max(e,0)+f));C.attr("x2",-e).attr("y2",0);E.attr("x",-(Math.max(e,0)+f)).attr("y",0);y.attr("dy",".32em").style("text-anchor","end");q.attr("d","M"+-g+","+
p[0]+"H0V"+p[1]+"H"+-g);break;case "right":a=eh,B.attr("x2",e),A.attr("x",Math.max(e,0)+f),C.attr("x2",e).attr("y2",0),E.attr("x",Math.max(e,0)+f).attr("y",0),y.attr("dy",".32em").style("text-anchor","start"),q.attr("d","M"+g+","+p[0]+"H0V"+p[1]+"H"+g)}if(m.rangeBand)var W=m,D=W.rangeBand()/2,v=m=function(a){return W(a)+D};else v.rangeBand?v=m:z.call(a,m);l.call(a,v);P.call(a,m)})}var d,b=F.scale.linear(),c=wh,e=6,g=6,f=3,n=[10],k=null;return a.scale=function(d){return arguments.length?(b=d,a):b},
a.orient=function(d){return arguments.length?(c=d in hi?d+"":wh,a):c},a.ticks=function(){return arguments.length?(n=arguments,a):n},a.tickValues=function(d){return arguments.length?(k=d,a):k},a.tickFormat=function(b){return arguments.length?(d=b,a):d},a.tickSize=function(d){var b=arguments.length;return b?(e=+d,g=+arguments[b-1],a):e},a.innerTickSize=function(d){return arguments.length?(e=+d,a):e},a.outerTickSize=function(d){return arguments.length?(g=+d,a):g},a.tickPadding=function(d){return arguments.length?
(f=+d,a):f},a.tickSubdivide=function(){return arguments.length&&a},a};var wh="bottom",hi={top:1,right:1,bottom:1,left:1};F.svg.brush=function(){function d(a){a.each(function(){var a=F.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),f=a.selectAll(".background").data([0]);f.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");a.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var n=a.selectAll(".resize").data(P,Ca);n.exit().remove();n.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ii[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",d.empty()?"none":null);var k,a=F.transition(a),f=F.transition(f);v&&(k=Oe(v),f.attr("x",k[0]).attr("width",
k[1]-k[0]),c(a));m&&(k=Oe(m),f.attr("y",k[0]).attr("height",k[1]-k[0]),e(a));b(a)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+y[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",l[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",y[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",y[1]-y[0])}function g(){function n(){var a=F.mouse(E),d=!1;C&&(a[0]+=C[0],
a[1]+=C[1]);r||(F.event.altKey?(B||(B=[(l[0]+l[1])/2,(y[0]+y[1])/2]),Ba[0]=l[+(a[0]<B[0])],Ba[1]=y[+(a[1]<B[1])]):B=null);L&&P(a,v,0)&&(c(H),d=!0);sb&&P(a,m,1)&&(e(H),d=!0);d&&(b(H),D({type:"brush",mode:r?"move":"resize"}))}function P(a,d,b){var c,e,g=Oe(d);d=g[0];var g=g[1],n=Ba[b],q=b?y:l,v=q[1]-q[0];return r&&(d-=n,g-=v+n),c=(b?z:A)?Math.max(d,Math.min(g,a[b])):a[b],r?e=(c+=n)+v:(B&&(n=Math.max(d,Math.min(g,2*B[b]-c))),c>n?(e=c,c=n):e=n),q[0]!=c||q[1]!=e?(b?k=null:f=null,q[0]=c,q[1]=e,!0):void 0}
function p(){n();H.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null);F.select("body").style("cursor",null);t.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);T();D({type:"brushend"})}var B,C,E=this,W=F.select(F.event.target),D=q.of(E,arguments),H=F.select(E),x=W.datum(),L=!/^(n|s)$/.test(x)&&v,sb=!/^(e|w)$/.test(x)&&m,r=W.classed("extent"),T=ba(),Ba=F.mouse(E),
t=F.select(Ob).on("keydown.brush",function(){32==F.event.keyCode&&(r||(B=null,Ba[0]-=l[1],Ba[1]-=y[1],r=2),a())}).on("keyup.brush",function(){32==F.event.keyCode&&2==r&&(Ba[0]+=l[1],Ba[1]+=y[1],r=0,a())});if(F.event.changedTouches?t.on("touchmove.brush",n).on("touchend.brush",p):t.on("mousemove.brush",n).on("mouseup.brush",p),H.interrupt().selectAll("*").interrupt(),r)Ba[0]=l[0]-Ba[0],Ba[1]=y[0]-Ba[1];else if(x){var I=+/w$/.test(x),x=+/^n/.test(x);C=[l[1-I]-Ba[0],y[1-x]-Ba[1]];Ba[0]=l[I];Ba[1]=y[x]}else F.event.altKey&&
(B=Ba.slice());H.style("pointer-events","none").selectAll(".resize").style("display",null);F.select("body").style("cursor",W.style("cursor"));D({type:"brushstart"});n()}var f,k,q=n(d,"brushstart","brush","brushend"),v=null,m=null,l=[0,0],y=[0,0],A=!0,z=!0,P=Gg[0];return d.event=function(a){a.each(function(){var a=q.of(this,arguments),d={x:l,y:y,i:f,j:k},b=this.__chart__||d;this.__chart__=d;re?F.select(this).transition().each("start.brush",function(){f=b.i;k=b.j;l=b.x;y=b.y;a({type:"brushstart"})}).tween("brush:brush",
function(){var b=gb(l,d.x),c=gb(y,d.y);return f=k=null,function(e){l=d.x=b(e);y=d.y=c(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=d.i;k=d.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},d.x=function(a){return arguments.length?(v=a,P=Gg[!v<<1|!m],d):v},d.y=function(a){return arguments.length?(m=a,P=Gg[!v<<1|!m],d):m},d.clamp=function(a){return arguments.length?(v&&m?(A=!!a[0],z=!!a[1]):
v?A=!!a:m&&(z=!!a),d):v&&m?[A,z]:v?A:m?z:null},d.extent=function(a){var b,c,e,g,n;return arguments.length?(v&&(b=a[0],c=a[1],m&&(b=b[0],c=c[0]),f=[b,c],v.invert&&(b=v(b),c=v(c)),b>c&&(n=b,b=c,c=n),(b!=l[0]||c!=l[1])&&(l=[b,c])),m&&(e=a[0],g=a[1],v&&(e=e[1],g=g[1]),k=[e,g],m.invert&&(e=m(e),g=m(g)),e>g&&(n=e,e=g,g=n),(e!=y[0]||g!=y[1])&&(y=[e,g])),d):(v&&(f?(b=f[0],c=f[1]):(b=l[0],c=l[1],v.invert&&(b=v.invert(b),c=v.invert(c)),b>c&&(n=b,b=c,c=n))),m&&(k?(e=k[0],g=k[1]):(e=y[0],g=y[1],m.invert&&(e=
m.invert(e),g=m.invert(g)),e>g&&(n=e,e=g,g=n))),v&&m?[[b,e],[c,g]]:v?[b,c]:m&&[e,g])},d.clear=function(){return d.empty()||(l=[0,0],y=[0,0],f=k=null),d},d.empty=function(){return!!v&&l[0]==l[1]||!!m&&y[0]==y[1]},F.rebind(d,q,"on")};var ii={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gg=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Hg=ea.format=lh.timeFormat,xh=Hg.utc,yh=xh("%Y-%m-%dT%H:%M:%S.%LZ");Hg.iso=
Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?zg:yh;zg.parse=function(a){a=new Date(a);return isNaN(a)?null:a};zg.toString=yh.toString;ea.second=ab(function(a){return new Pb(1E3*Math.floor(a/1E3))},function(a,d){a.setTime(a.getTime()+1E3*Math.floor(d))},function(a){return a.getSeconds()});ea.seconds=ea.second.range;ea.seconds.utc=ea.second.utc.range;ea.minute=ab(function(a){return new Pb(6E4*Math.floor(a/6E4))},function(a,d){a.setTime(a.getTime()+6E4*Math.floor(d))},function(a){return a.getMinutes()});
ea.minutes=ea.minute.range;ea.minutes.utc=ea.minute.utc.range;ea.hour=ab(function(a){var d=a.getTimezoneOffset()/60;return new Pb(36E5*(Math.floor(a/36E5-d)+d))},function(a,d){a.setTime(a.getTime()+36E5*Math.floor(d))},function(a){return a.getHours()});ea.hours=ea.hour.range;ea.hours.utc=ea.hour.utc.range;ea.month=ab(function(a){return a=ea.day(a),a.setDate(1),a},function(a,d){a.setMonth(a.getMonth()+d)},function(a){return a.getMonth()});ea.months=ea.month.range;ea.months.utc=ea.month.utc.range;var Nf=
[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Ig=[[ea.second,1],[ea.second,5],[ea.second,15],[ea.second,30],[ea.minute,1],[ea.minute,5],[ea.minute,15],[ea.minute,30],[ea.hour,1],[ea.hour,3],[ea.hour,6],[ea.hour,12],[ea.day,1],[ea.day,2],[ea.week,1],[ea.month,1],[ea.month,3],[ea.year,1]],ji=Hg.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",
function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",bc]]),Kh={range:function(a,d,b){return F.range(+a,+d,b).map(qe)},floor:Ca,ceil:Ca};Ig.year=ea.year;ea.scale=function(){return Ag(F.scale.linear(),Ig,ji)};var zh=Ig.map(function(a){return[a[0].utc,a[1]]}),ki=xh.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",
function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",bc]]);zh.year=ea.year.utc;ea.scale.utc=function(){return Ag(F.scale.linear(),zh,ki)};F.text=$a(function(a){return a.responseText});F.json=function(a,d){return hb(a,"application/json",Lh,d)};F.html=function(a,d){return hb(a,"text/html",Mh,d)};F.xml=$a(function(a){return a.responseXML});
"function"==typeof define&&define.amd?define(F):"object"==typeof module&&module.exports?module.exports=F:this.d3=F}();dojoConfig={baseUrl:"js/dojo/dojo/"};Aloha={settings:{sidebar:{disabled:!0}}};/*
 RequireJS 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var requirejs,require,define;
(function(r){function u(a){return"[object Function]"===I.call(a)}function s(a){return"[object Array]"===I.call(a)}function t(a,d){if(a){var b;for(b=0;b<a.length&&(!a[b]||!d(a[b],b,a));b+=1);}}function l(a,d){if(a){var b;for(b=a.length-1;-1<b&&(!a[b]||!d(a[b],b,a));b-=1);}}function b(a,d){for(var b in a)if(a.hasOwnProperty(b)&&d(a[b],b))break}function p(a,d,c,e){d&&b(d,function(d,b){if(c||!Z.call(a,b))e&&"string"!==typeof d?(a[b]||(a[b]={}),p(a[b],d,c,e)):a[b]=d});return a}function m(a,d){return function(){return d.apply(a,
arguments)}}function k(a){if(!a)return a;var d=r;t(a.split("."),function(a){d=d[a]});return d}function f(a,d,b){return function(){var c=N.call(arguments,0),e;b&&u(e=c[c.length-1])&&(e.__requireJsBuild=!0);c.push(d);return a.apply(null,c)}}function c(a,d,b){t([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(c){var e=c[1]||c[0];a[c[0]]=d?f(d[e],b):function(){var a=ba[S];return a[e].apply(a,arguments)}})}function e(a,d,b,c){d=Error(d+"\nhttp://requirejs.org/docs/errors.html#"+
a);d.requireType=a;d.requireModules=c;b&&(d.originalError=b);return d}function g(d){function g(a,d,b){var c,e,f,n,k,q,v,m=d&&d.split("/");c=m;var l=ma.map,y=l&&l["*"];if(a&&"."===a.charAt(0))if(d){c=ma.pkgs[d]?m=[d]:m.slice(0,m.length-1);d=a=c.concat(a.split("/"));for(c=0;d[c];c+=1)if(e=d[c],"."===e)d.splice(c,1),c-=1;else if(".."===e)if(1!==c||".."!==d[2]&&".."!==d[0])0<c&&(d.splice(c-1,2),c-=2);else break;c=ma.pkgs[d=a[0]];a=a.join("/");c&&a===d+"/"+c.main&&(a=d)}else 0===a.indexOf("./")&&(a=a.substring(2));
if(b&&(m||y)&&l){d=a.split("/");for(c=d.length;0<c;c-=1){f=d.slice(0,c).join("/");if(m)for(e=m.length;0<e;e-=1)if(b=l[m.slice(0,e).join("/")])if(b=b[f]){n=b;k=c;break}if(n)break;!q&&y&&y[f]&&(q=y[f],v=c)}!n&&q&&(n=q,k=v);n&&(d.splice(0,k,n),a=d.join("/"))}return a}function n(a){K&&t(document.getElementsByTagName("script"),function(d){if(d.getAttribute("data-requiremodule")===a&&d.getAttribute("data-requirecontext")===ca.contextName)return d.parentNode.removeChild(d),!0})}function q(a){var d=ma.paths[a];
if(d&&s(d)&&1<d.length)return n(a),d.shift(),ca.undef(a),ca.require([a]),!0}function v(a,d,b,c){var e,f,n=a?a.indexOf("!"):-1,k=null,q=d?d.name:null,m=a,l=!0,y="";a||(l=!1,a="_@r"+($a+=1));-1!==n&&(k=a.substring(0,n),a=a.substring(n+1,a.length));k&&(k=g(k,q,c),f=na[k]);a&&(k?y=f&&f.normalize?f.normalize(a,function(a){return g(a,q,c)}):g(a,q,c):(y=g(a,q,c),e=ca.nameToUrl(y)));a=!k||f||b?"":"_unnormalized"+(hb+=1);return{prefix:k,name:y,parentMap:d,unnormalized:!!a,url:e,originalName:m,isDefine:l,id:(k?
k+"!"+y:y)+a}}function l(a){var d=a.id,b=za[d];b||(b=za[d]=new ca.Module(a));return b}function y(a,d,b){var c=a.id,e=za[c];if(!Z.call(na,c)||e&&!e.defineEmitComplete)l(a).on(d,b);else"defined"===d&&b(na[c])}function A(d,b){var c=d.requireModules,e=!1;if(b)b(d);else if(t(c,function(a){if(a=za[a])a.error=d,a.events.error&&(e=!0,a.emit("error",d))}),!e)a.onError(d)}function B(){M.length&&(x.apply(Ga,[Ga.length-1,0].concat(M)),M=[])}function C(a,d,b){a=a&&a.map;d=f(b||ca.require,a,d);c(d,ca,a);d.isBrowser=
K;return d}function E(a){delete za[a];t(ub,function(d,b){if(d.map.id===a)return ub.splice(b,1),d.defined||(ca.waitCount-=1),!0})}function D(a,d){var b=a.map.id,c=a.depMaps,e;if(a.inited){if(d[b])return a;d[b]=!0;t(c,function(a){if(a=za[a.id])return a.inited&&a.enabled?e=D(a,p({},d)):(e=null,delete d[b],!0)});return e}}function H(a,d,b){var c=a.map.id,e=a.depMaps;if(a.inited&&a.map.isDefine){if(d[c])return na[c];d[c]=a;t(e,function(e){e=e.id;var g=za[e];!Ma[e]&&g&&(g.inited&&g.enabled?(g=H(g,d,b),
b[e]||a.defineDepById(e,g)):b[c]=!0)});a.check(!0);return na[c]}}function I(a){a.check()}function N(){var a,d,c,g,f=(c=1E3*ma.waitSeconds)&&ca.startTime+c<(new Date).getTime(),k=[],v=!1,m=!0;if(!V){V=!0;b(za,function(b){a=b.map;d=a.id;if(b.enabled&&!b.error)if(!b.inited&&f)q(d)?v=g=!0:(k.push(d),n(d));else if(!b.inited&&b.fetched&&a.isDefine&&(v=!0,!a.prefix))return m=!1});if(f&&k.length)return c=e("timeout","Load timeout for modules: "+k,null,k),c.contextName=ca.contextName,A(c);m&&(t(ub,function(a){if(!a.defined){a=
D(a,{});var d={};a&&(H(a,d,{}),b(d,I))}}),b(za,I));f&&!g||!v||!K&&!G||cb||(cb=setTimeout(function(){cb=0;N()},50));V=!1}}function S(a){l(v(a[0],null,!0)).init(a[1],a[2])}function ba(a){a=a.currentTarget||a.srcElement;var d=ca.onScriptLoad;a.detachEvent&&!ha?a.detachEvent("onreadystatechange",d):a.removeEventListener("load",d,!1);d=ca.onScriptError;a.detachEvent&&!ha||a.removeEventListener("error",d,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}var V,pa,ca,Ma,cb,ma={waitSeconds:7,baseUrl:"./",
paths:{},pkgs:{},shim:{}},za={},R={},Ga=[],na={},Ca={},$a=1,hb=1,ub=[];Ma={require:function(a){return C(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=na[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return ma.config&&ma.config[a.map.id]||{}},exports:na[a.map.id]}}};pa=function(a){this.events=R[a.id]||{};this.map=a;this.shim=ma.shim[a.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=
0};pa.prototype={init:function(a,d,b,c){c=c||{};if(!this.inited){this.factory=d;if(b)this.on("error",b);else this.events.error&&(b=m(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.depMaps.rjsSkipMap=a.rjsSkipMap;this.errback=b;this.inited=!0;this.ignore=c.ignore;c.enabled||this.enabled?this.enable():this.check()}},defineDepById:function(a,d){var b;t(this.depMaps,function(d,c){if(d.id===a)return b=c,!0});return this.defineDep(b,d)},defineDep:function(a,d){this.depMatched[a]||
(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=d)},fetch:function(){if(!this.fetched){this.fetched=!0;ca.startTime=(new Date).getTime();var a=this.map;if(this.shim)C(this,!0)(this.shim.deps||[],m(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;Ca[a]||(Ca[a]=!0,ca.load(this.map.id,a))},check:function(d){if(this.enabled&&!this.enabling){var b,c,e=this.map.id;c=this.depExports;var g=this.exports,
f=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(u(f)){if(this.events.error)try{g=ca.execCb(e,f,c,g)}catch(n){b=n}else g=ca.execCb(e,f,c,g);this.map.isDefine&&((c=this.module)&&void 0!==c.exports&&c.exports!==this.exports?g=c.exports:void 0===g&&this.usingExports&&(g=this.exports));if(b)return b.requireMap=this.map,b.requireModules=[this.map.id],b.requireType="define",A(this.error=
b)}else g=f;this.exports=g;if(this.map.isDefine&&!this.ignore&&(na[e]=g,a.onResourceLoad))a.onResourceLoad(ca,this.map,this.depMaps);delete za[e];this.defined=!0;ca.waitCount-=1;0===ca.waitCount&&(ub=[])}this.defining=!1;d||!this.defined||this.defineEmitted||(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}},callPlugin:function(){var d=this.map,c=d.id,e=v(d.prefix,null,!1,!0);y(e,"defined",m(this,function(e){var f;f=this.map.name;var n=this.map.parentMap?this.map.parentMap.name:
null;if(this.map.unnormalized){if(e.normalize&&(f=e.normalize(f,function(a){return g(a,n,!0)})||""),e=v(d.prefix+"!"+f,this.map.parentMap,!1,!0),y(e,"defined",m(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),e=za[e.id]){if(this.events.error)e.on("error",m(this,function(a){this.emit("error",a)}));e.enable()}}else f=m(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),f.error=m(this,function(a){this.inited=!0;this.error=a;a.requireModules=[c];
b(za,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&E(a.map.id)});A(a)}),f.fromText=function(d,b){var c=U;c&&(U=!1);l(v(d));a.exec(b);c&&(U=!0);ca.completeLoad(d)},e.load(d.name,C(d.parentMap,!0,function(a,d,b){a.rjsSkipMap=!0;return ca.require(a,d,b)}),f,ma)}));ca.enable(e,this);this.pluginMaps[e.id]=e},enable:function(){this.enabled=!0;this.waitPushed||(ub.push(this),ca.waitCount+=1,this.waitPushed=!0);this.enabling=!0;t(this.depMaps,m(this,function(a,d){var b,c;if("string"===typeof a){a=
v(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap);this.depMaps[d]=a;if(b=Ma[a.id]){this.depExports[d]=b(this);return}this.depCount+=1;y(a,"defined",m(this,function(a){this.defineDep(d,a);this.check()}));this.errback&&y(a,"error",this.errback)}b=a.id;c=za[b];Ma[b]||!c||c.enabled||ca.enable(a,this)}));b(this.pluginMaps,m(this,function(a){var d=za[a.id];d&&!d.enabled&&ca.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,d){var b=this.events[a];b||(b=this.events[a]=
[]);b.push(d)},emit:function(a,d){t(this.events[a],function(a){a(d)});"error"===a&&delete this.events[a]}};return ca={config:ma,contextName:d,registry:za,defined:na,urlFetched:Ca,waitCount:0,defQueue:Ga,Module:pa,makeModuleMap:v,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var d=ma.pkgs,c=ma.shim,e=ma.paths,g=ma.map;p(ma,a,!0);ma.paths=p(e,a.paths,!0);a.map&&(ma.map=p(g||{},a.map,!0,!0));a.shim&&(b(a.shim,function(a,d){s(a)&&(a={deps:a});a.exports&&
!a.exports.__buildReady&&(a.exports=ca.makeShimExports(a.exports));c[d]=a}),ma.shim=c);a.packages&&(t(a.packages,function(a){a="string"===typeof a?{name:a}:a;d[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(T,"").replace(L,"")}}),ma.pkgs=d);b(za,function(a,d){a.inited||a.map.unnormalized||(a.map=v(d))});(a.deps||a.callback)&&ca.require(a.deps||[],a.callback)},makeShimExports:function(a){var d;return"string"===typeof a?(d=function(){return k(a)},d.exports=a,d):function(){return a.apply(r,
arguments)}},requireDefined:function(a,d){var b=v(a,d,!1,!0).id;return Z.call(na,b)},requireSpecified:function(a,d){a=v(a,d,!1,!0).id;return Z.call(na,a)||Z.call(za,a)},require:function(b,c,g,f){var n;if("string"===typeof b){if(u(c))return A(e("requireargs","Invalid require call"),g);if(a.get)return a.get(ca,b,c);b=v(b,c,!1,!0);b=b.id;return Z.call(na,b)?na[b]:A(e("notloaded",'Module name "'+b+'" has not been loaded yet for context: '+d))}g&&!u(g)&&(f=g,g=void 0);c&&!u(c)&&(f=c,c=void 0);for(B();Ga.length;){n=
Ga.shift();if(null===n[0])return A(e("mismatch","Mismatched anonymous define() module: "+n[n.length-1]));S(n)}l(v(null,f)).init(b,c,g,{enabled:!0});N();return ca.require},undef:function(a){B();var d=v(a,null,!0),b=za[a];delete na[a];delete Ca[d.url];delete R[a];b&&(b.events.defined&&(R[a]=b.events),E(a))},enable:function(a,d){za[a.id]&&l(a).enable()},completeLoad:function(a){var d,b,c=ma.shim[a]||{},g=c.exports&&c.exports.exports;for(B();Ga.length;){b=Ga.shift();if(null===b[0]){b[0]=a;if(d)break;
d=!0}else b[0]===a&&(d=!0);S(b)}b=za[a];if(!d&&!na[a]&&b&&!b.inited)if(!ma.enforceDefine||g&&k(g))S([a,c.deps||[],c.exports]);else return q(a)?void 0:A(e("nodefine","No define call for "+a,null,[a]));N()},toUrl:function(a,d){var b=a.lastIndexOf("."),c=null;-1!==b&&(c=a.substring(b,a.length),a=a.substring(0,b));return ca.nameToUrl(g(a,d&&d.id,!0),c)},nameToUrl:function(d,b){var c,e,g,f,n,k;if(a.jsExtRegExp.test(d))f=d+(b||"");else{c=ma.paths;e=ma.pkgs;f=d.split("/");for(n=f.length;0<n;n-=1)if(k=f.slice(0,
n).join("/"),g=e[k],k=c[k]){s(k)&&(k=k[0]);f.splice(0,n,k);break}else if(g){c=d===g.name?g.location+"/"+g.main:g.location;f.splice(0,n,c);break}f=f.join("/");f+=b||(/\?/.test(f)?"":".js");f=("/"===f.charAt(0)||f.match(/^[\w\+\.\-]+:/)?"":ma.baseUrl)+f}return ma.urlArgs?f+((-1===f.indexOf("?")?"?":"&")+ma.urlArgs):f},load:function(d,b){a.load(ca,d,b)},execCb:function(a,d,b,c){return d.apply(c,b)},onScriptLoad:function(a){if("load"===a.type||Q.test((a.currentTarget||a.srcElement).readyState))z=null,
a=ba(a),ca.completeLoad(a.id)},onScriptError:function(a){var d=ba(a);if(!q(d.id))return A(e("scripterror","Script error",a,[d.id]))}}}function q(){if(z&&"interactive"===z.readyState)return z;l(document.getElementsByTagName("script"),function(a){if("interactive"===a.readyState)return z=a});return z}var a,d,n,v,y,A,z,B,C,E,D=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,H=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,L=/\.js$/,T=/^\.\//;d=Object.prototype;var I=d.toString,Z=d.hasOwnProperty;d=Array.prototype;
var N=d.slice,x=d.splice,K=!("undefined"===typeof window||!navigator||!document),G=!K&&"undefined"!==typeof importScripts,Q=K&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,S="_",ha="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),ba={},V={},M=[],U=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(u(requirejs))return;V=requirejs;requirejs=void 0}"undefined"===typeof require||u(require)||(V=require,require=void 0);a=requirejs=function(d,
b,c,e){var g,f=S;s(d)||"string"===typeof d||(g=d,s(b)?(d=b,b=c,c=e):d=[]);g&&g.context&&(f=g.context);(e=ba[f])||(e=ba[f]=a.s.newContext(f));g&&e.configure(g);return e.require(d,b,c)};a.config=function(d){return a(d)};require||(require=a);a.version="2.0.5";a.jsExtRegExp=/^\/|:|\?|\.js$/;a.isBrowser=K;d=a.s={contexts:ba,newContext:g};a({});c(a);K&&(n=d.head=document.getElementsByTagName("head")[0],v=document.getElementsByTagName("base")[0])&&(n=d.head=v.parentNode);a.onError=function(a){throw a;};
a.load=function(a,d,b){var c=a&&a.config||{},e;if(K)return e=c.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),e.type=c.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e.setAttribute("data-requirecontext",a.contextName),e.setAttribute("data-requiremodule",d),!e.attachEvent||e.attachEvent.toString&&0>e.attachEvent.toString().indexOf("[native code")||ha?(e.addEventListener("load",a.onScriptLoad,!1),e.addEventListener("error",a.onScriptError,
!1)):(U=!0,e.attachEvent("onreadystatechange",a.onScriptLoad)),e.src=b,B=e,v?n.insertBefore(e,v):n.appendChild(e),B=null,e;G&&(importScripts(b),a.completeLoad(d))};K&&l(document.getElementsByTagName("script"),function(a){n||(n=a.parentNode);if(y=a.getAttribute("data-main"))return V.baseUrl||(A=y.split("/"),C=A.pop(),E=A.length?A.join("/")+"/":"./",V.baseUrl=E,y=C),y=y.replace(L,""),V.deps=V.deps?V.deps.concat(y):[y],!0});define=function(a,d,b){var c,e;"string"!==typeof a&&(b=d,d=a,a=null);s(d)||(b=
d,d=[]);!d.length&&u(b)&&b.length&&(b.toString().replace(D,"").replace(H,function(a,b){d.push(b)}),d=(1===b.length?["require"]:["require","exports","module"]).concat(d));U&&(c=B||q())&&(a||(a=c.getAttribute("data-requiremodule")),e=ba[c.getAttribute("data-requirecontext")]);(e?e.defQueue:M).push([a,d,b])};define.amd={jQuery:!0};a.exec=function(a){return eval(a)};a(V)}})(this);(function(r,u){function s(a){var d=K[a]={},b,c;a=a.split(/\s+/);b=0;for(c=a.length;b<c;b++)d[a[b]]=!0;return d}function t(a,d,b){if(b===u&&1===a.nodeType)if(b="data-"+d.replace(S,"-$1").toLowerCase(),b=a.getAttribute(b),"string"===typeof b){try{b="true"===b?!0:"false"===b?!1:"null"===b?null:x.isNumeric(b)?+b:Q.test(b)?x.parseJSON(b):b}catch(c){}x.data(a,d,b)}else b=u;return b}function l(a){for(var d in a)if(("data"!==d||!x.isEmptyObject(a[d]))&&"toJSON"!==d)return!1;return!0}function b(a,d,b){var c=
d+"defer",e=d+"queue",g=d+"mark",f=x._data(a,c);!f||"queue"!==b&&x._data(a,e)||"mark"!==b&&x._data(a,g)||setTimeout(function(){x._data(a,e)||x._data(a,g)||(x.removeData(a,c,!0),f.fire())},0)}function p(){return!1}function m(){return!0}function k(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function f(a,d,b){d=d||0;if(x.isFunction(d))return x.grep(a,function(a,c){return!!d.call(a,c,a)===b});if(d.nodeType)return x.grep(a,function(a,c){return a===d===b});if("string"===typeof d){var c=x.grep(a,
function(a){return 1===a.nodeType});if(pa.test(d))return x.filter(d,c,!b);d=x.filter(d,c)}return x.grep(a,function(a,c){return 0<=x.inArray(a,d)===b})}function c(a){var d=ma.split("|");a=a.createDocumentFragment();if(a.createElement)for(;d.length;)a.createElement(d.pop());return a}function e(a,d){return x.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function g(a,d){if(1===d.nodeType&&x.hasData(a)){var b,c,e;c=x._data(a);var g=x._data(d,
c),f=c.events;if(f)for(b in delete g.handle,g.events={},f)for(c=0,e=f[b].length;c<e;c++)x.event.add(d,b,f[b][c]);g.data&&(g.data=x.extend({},g.data))}}function q(a,d){var b;1===d.nodeType&&(d.clearAttributes&&d.clearAttributes(),d.mergeAttributes&&d.mergeAttributes(a),b=d.nodeName.toLowerCase(),"object"===b?d.outerHTML=a.outerHTML:"input"!==b||"checkbox"!==a.type&&"radio"!==a.type?"option"===b?d.selected=a.defaultSelected:"input"===b||"textarea"===b?d.defaultValue=a.defaultValue:"script"===b&&d.text!==
a.text&&(d.text=a.text):(a.checked&&(d.defaultChecked=d.checked=a.checked),d.value!==a.value&&(d.value=a.value)),d.removeAttribute(x.expando),d.removeAttribute("_submit_attached"),d.removeAttribute("_change_attached"))}function a(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function d(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function n(a){var b=(a.nodeName||"").toLowerCase();
"input"===b?d(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&x.grep(a.getElementsByTagName("input"),d)}function v(a,d,b){var c="width"===d?a.offsetWidth:a.offsetHeight,e="width"===d?1:0;if(0<c){if("border"!==b)for(;4>e;e+=2)b||(c-=parseFloat(x.css(a,"padding"+Db[e]))||0),c="margin"===b?c+(parseFloat(x.css(a,b+Db[e]))||0):c-(parseFloat(x.css(a,"border"+Db[e]+"Width"))||0);return c+"px"}c=mb(a,d);if(0>c||null==c)c=a.style[d];if(Ya.test(c))return c;c=parseFloat(c)||0;if(b)for(;4>e;e+=
2)c+=parseFloat(x.css(a,"padding"+Db[e]))||0,"padding"!==b&&(c+=parseFloat(x.css(a,"border"+Db[e]+"Width"))||0),"margin"===b&&(c+=parseFloat(x.css(a,b+Db[e]))||0);return c+"px"}function y(a){return function(d,b){"string"!==typeof d&&(b=d,d="*");if(x.isFunction(b))for(var c=d.toLowerCase().split(db),e=0,g=c.length,f,n;e<g;e++)f=c[e],(n=/^\+/.test(f))&&(f=f.substr(1)||"*"),f=a[f]=a[f]||[],f[n?"unshift":"push"](b)}}function A(a,d,b,c,e,g){e=e||d.dataTypes[0];g=g||{};g[e]=!0;e=a[e];for(var f=0,n=e?e.length:
0,k=a===Fb,q;f<n&&(k||!q);f++)q=e[f](d,b,c),"string"===typeof q&&(!k||g[q]?q=u:(d.dataTypes.unshift(q),q=A(a,d,b,c,q,g)));!k&&q||g["*"]||(q=A(a,d,b,c,"*",g));return q}function z(a,d){var b,c,e=x.ajaxSettings.flatOptions||{};for(b in d)d[b]!==u&&((e[b]?a:c||(c={}))[b]=d[b]);c&&x.extend(!0,a,c)}function B(a,d,b,c){if(x.isArray(d))x.each(d,function(d,e){b||ga.test(a)?c(a,e):B(a+"["+("object"===typeof e?d:"")+"]",e,b,c)});else if(b||"object"!==x.type(d))c(a,d);else for(var e in d)B(a+"["+e+"]",d[e],b,
c)}function C(){try{return new r.XMLHttpRequest}catch(a){}}function E(){setTimeout(D,0);return Y=x.now()}function D(){Y=u}function H(a,d){var b={};x.each(fb.concat.apply([],fb.slice(0,d)),function(){b[this]=a});return b}function L(a){if(!Tb[a]){var d=I.body,b=x("<"+a+">").appendTo(d),c=b.css("display");b.remove();if("none"===c||""===c)wb||(wb=I.createElement("iframe"),wb.frameBorder=wb.width=wb.height=0),d.appendChild(wb),Ub&&wb.createElement||(Ub=(wb.contentWindow||wb.contentDocument).document,Ub.write((x.support.boxModel?
"<!doctype html>":"")+"<html><body>"),Ub.close()),b=Ub.createElement(a),Ub.body.appendChild(b),c=x.css(b,"display"),d.removeChild(wb);Tb[a]=c}return Tb[a]}function T(a){return x.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var I=r.document,Z=r.navigator,N=r.location,x=function(){function a(){if(!d.isReady){try{I.documentElement.doScroll("left")}catch(b){setTimeout(a,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,e)},b=r.jQuery,c=r.$,e,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
f=/\S/,n=/^\s+/,k=/\s+$/,q=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,v=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,l=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,A=/(webkit)[ \/]([\w.]+)/,z=/(opera)(?:.*version)?[ \/]([\w.]+)/,p=/(msie) ([\w.]+)/,B=/(mozilla)(?:.*? rv:([\w.]+))?/,C=/-([a-z]|[0-9])/ig,E=/^-ms-/,D=function(a,d){return(d+"").toUpperCase()},H=Z.userAgent,x,L,T=Object.prototype.toString,t=Object.prototype.hasOwnProperty,s=Array.prototype.push,
N=Array.prototype.slice,ua=String.prototype.trim,S=Array.prototype.indexOf,G={};d.fn=d.prototype={constructor:d,init:function(a,b,c){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!b&&I.body)return this.context=I,this[0]=I.body,this.selector=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:g.exec(a);if(!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);
if(e[1])return c=(b=b instanceof d?b[0]:b)?b.ownerDocument||b:I,(a=q.exec(a))?d.isPlainObject(b)?(a=[I.createElement(a[1])],d.fn.attr.call(a,b,!0)):a=[c.createElement(a[1])]:(a=d.buildFragment([e[1]],[c]),a=(a.cacheable?d.clone(a.fragment):a.fragment).childNodes),d.merge(this,a);if((b=I.getElementById(e[2]))&&b.parentNode){if(b.id!==e[2])return c.find(a);this.length=1;this[0]=b}this.context=I;this.selector=a;return this}if(d.isFunction(a))return c.ready(a);a.selector!==u&&(this.selector=a.selector,
this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return N.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?s.apply(e,a):d.merge(e,a);e.prevObject=this;e.context=this.context;"find"===b?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")");return e},each:function(a,
b){return d.each(this,a,b)},ready:function(a){d.bindReady();x.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(N.apply(this,arguments),"slice",N.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(d,b){return a.call(d,b,d)}))},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:[].sort,splice:[].splice};
d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var a,b,c,e,g,f=arguments[0]||{},n=1,k=arguments.length,q=!1;"boolean"===typeof f&&(q=f,f=arguments[1]||{},n=2);"object"===typeof f||d.isFunction(f)||(f={});k===n&&(f=this,--n);for(;n<k;n++)if(null!=(a=arguments[n]))for(b in a)c=f[b],e=a[b],f!==e&&(q&&e&&(d.isPlainObject(e)||(g=d.isArray(e)))?(g?(g=!1,c=c&&d.isArray(c)?c:[]):c=c&&d.isPlainObject(c)?c:{},f[b]=d.extend(q,c,e)):e!==u&&(f[b]=e));return f};d.extend({noConflict:function(a){r.$===
d&&(r.$=c);a&&r.jQuery===d&&(r.jQuery=b);return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(!0===a&&!--d.readyWait||!0!==a&&!d.isReady){if(!I.body)return setTimeout(d.ready,1);d.isReady=!0;!0!==a&&0<--d.readyWait||(x.fireWith(I,[d]),d.fn.trigger&&d(I).trigger("ready").off("ready"))}},bindReady:function(){if(!x){x=d.Callbacks("once memory");if("complete"===I.readyState)return setTimeout(d.ready,1);if(I.addEventListener)I.addEventListener("DOMContentLoaded",
L,!1),r.addEventListener("load",d.ready,!1);else if(I.attachEvent){I.attachEvent("onreadystatechange",L);r.attachEvent("onload",d.ready);var b=!1;try{b=null==r.frameElement}catch(c){}I.documentElement.doScroll&&b&&a()}}},isFunction:function(a){return"function"===d.type(a)},isArray:Array.isArray||function(a){return"array"===d.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):G[T.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==d.type(a)||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!t.call(a,"constructor")&&!t.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var c in a);return c===u||t.call(a,c)},isEmptyObject:function(a){for(var d in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=d.trim(a);if(r.JSON&&r.JSON.parse)return r.JSON.parse(a);if(v.test(a.replace(m,
"@").replace(l,"]").replace(y,"")))return(new Function("return "+a))();d.error("Invalid JSON: "+a)},parseXML:function(a){if("string"!==typeof a||!a)return null;var b,c;try{r.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(e){b=u}b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||d.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&f.test(a)&&(r.execScript||function(a){r.eval.call(r,
a)})(a)},camelCase:function(a){return a.replace(E,"ms-").replace(C,D)},nodeName:function(a,d){return a.nodeName&&a.nodeName.toUpperCase()===d.toUpperCase()},each:function(a,b,c){var e,g=0,f=a.length,n=f===u||d.isFunction(a);if(c)if(n)for(e in a){if(!1===b.apply(a[e],c))break}else for(;g<f&&!1!==b.apply(a[g++],c););else if(n)for(e in a){if(!1===b.call(a[e],e,a[e]))break}else for(;g<f&&!1!==b.call(a[g],g,a[g++]););return a},trim:ua?function(a){return null==a?"":ua.call(a)}:function(a){return null==
a?"":a.toString().replace(n,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var e=d.type(a);null==a.length||"string"===e||"function"===e||"regexp"===e||d.isWindow(a)?s.call(c,a):d.merge(c,a)}return c},inArray:function(a,d,b){var c;if(d){if(S)return S.call(d,a,b);c=d.length;for(b=b?0>b?Math.max(0,c+b):b:0;b<c;b++)if(b in d&&d[b]===a)return b}return-1},merge:function(a,d){var b=a.length,c=0;if("number"===typeof d.length)for(var e=d.length;c<e;c++)a[b++]=d[c];else for(;d[c]!==u;)a[b++]=
d[c++];a.length=b;return a},grep:function(a,d,b){var c=[],e;b=!!b;for(var g=0,f=a.length;g<f;g++)e=!!d(a[g],g),b!==e&&c.push(a[g]);return c},map:function(a,b,c){var e,g,f=[],n=0,k=a.length;if(a instanceof d||k!==u&&"number"===typeof k&&(0<k&&a[0]&&a[k-1]||0===k||d.isArray(a)))for(;n<k;n++)e=b(a[n],n,c),null!=e&&(f[f.length]=e);else for(g in a)e=b(a[g],g,c),null!=e&&(f[f.length]=e);return f.concat.apply([],f)},guid:1,proxy:function(a,b){if("string"===typeof b){var c=a[b];b=a;a=c}if(!d.isFunction(a))return u;
var e=N.call(arguments,2),c=function(){return a.apply(b,e.concat(N.call(arguments)))};c.guid=a.guid=a.guid||c.guid||d.guid++;return c},access:function(a,b,c,e,g,f,n){var k,q=null==c,v=0,m=a.length;if(c&&"object"===typeof c){for(v in c)d.access(a,b,v,c[v],1,f,e);g=1}else if(e!==u){k=n===u&&d.isFunction(e);q&&(k?(k=b,b=function(a,b,c){return k.call(d(a),c)}):(b.call(a,e),b=null));if(b)for(;v<m;v++)b(a[v],c,k?e.call(a[v],v,b(a[v],c)):e,n);g=1}return g?a:q?b.call(a):m?b(a[0],c):f},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=A.exec(a)||z.exec(a)||p.exec(a)||0>a.indexOf("compatible")&&B.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(d,b){return new a.fn.init(d,b)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,e){e&&e instanceof d&&!(e instanceof a)&&(e=a(e));return d.fn.init.call(this,c,e,b)};a.fn.init.prototype=a.fn;var b=a(I);return a},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,d){G["[object "+d+"]"]=d.toLowerCase()});H=d.uaMatch(H);H.browser&&(d.browser[H.browser]=!0,d.browser.version=H.version);d.browser.webkit&&(d.browser.safari=!0);f.test("\u00a0")&&(n=/^[\s\xA0]+/,k=/[\s\xA0]+$/);e=d(I);I.addEventListener?L=function(){I.removeEventListener("DOMContentLoaded",L,!1);d.ready()}:I.attachEvent&&(L=function(){"complete"===I.readyState&&(I.detachEvent("onreadystatechange",L),d.ready())});return d}(),K={};x.Callbacks=function(a){a=a?K[a]||s(a):{};var d=[],b=[],c,
e,g,f,n,k,q=function(b){var c,e,g,f;c=0;for(e=b.length;c<e;c++)g=b[c],f=x.type(g),"array"===f?q(g):"function"===f&&(a.unique&&m.has(g)||d.push(g))},v=function(q,v){v=v||[];c=!a.memory||[q,v];g=e=!0;k=f||0;f=0;for(n=d.length;d&&k<n;k++)if(!1===d[k].apply(q,v)&&a.stopOnFalse){c=!0;break}g=!1;d&&(a.once?!0===c?m.disable():d=[]:b&&b.length&&(c=b.shift(),m.fireWith(c[0],c[1])))},m={add:function(){if(d){var a=d.length;q(arguments);g?n=d.length:c&&!0!==c&&(f=a,v(c[0],c[1]))}return this},remove:function(){if(d)for(var b=
arguments,c=0,e=b.length;c<e;c++)for(var f=0;f<d.length&&(b[c]!==d[f]||(g&&f<=n&&(n--,f<=k&&k--),d.splice(f--,1),!a.unique));f++);return this},has:function(a){if(d)for(var b=0,c=d.length;b<c;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=b=c=u;return this},disabled:function(){return!d},lock:function(){b=u;c&&!0!==c||m.disable();return this},locked:function(){return!b},fireWith:function(d,e){b&&(g?a.once||b.push([d,e]):a.once&&c||v(d,e));return this},fire:function(){m.fireWith(this,
arguments);return this},fired:function(){return!!e}};return m};var G=[].slice;x.extend({Deferred:function(a){var d=x.Callbacks("once memory"),b=x.Callbacks("once memory"),c=x.Callbacks("memory"),e="pending",g={resolve:d,reject:b,notify:c},f={done:d.add,fail:b.add,progress:c.add,state:function(){return e},isResolved:d.fired,isRejected:b.fired,then:function(a,d,b){n.done(a).fail(d).progress(b);return this},always:function(){n.done.apply(n,arguments).fail.apply(n,arguments);return this},pipe:function(a,
d,b){return x.Deferred(function(c){x.each({done:[a,"resolve"],fail:[d,"reject"],progress:[b,"notify"]},function(a,d){var b=d[0],e=d[1],g;if(x.isFunction(b))n[a](function(){if((g=b.apply(this,arguments))&&x.isFunction(g.promise))g.promise().then(c.resolve,c.reject,c.notify);else c[e+"With"](this===n?c:this,[g])});else n[a](c[e])})}).promise()},promise:function(a){if(null==a)a=f;else for(var d in f)a[d]=f[d];return a}},n=f.promise({}),k;for(k in g)n[k]=g[k].fire,n[k+"With"]=g[k].fireWith;n.done(function(){e=
"resolved"},b.disable,c.lock).fail(function(){e="rejected"},d.disable,c.lock);a&&a.call(n,n);return n},when:function(a){function d(a){return function(d){c[a]=1<arguments.length?G.call(arguments,0):d;--n||k.resolveWith(k,c)}}function b(a){return function(d){f[a]=1<arguments.length?G.call(arguments,0):d;k.notifyWith(q,f)}}var c=G.call(arguments,0),e=0,g=c.length,f=Array(g),n=g,k=1>=g&&a&&x.isFunction(a.promise)?a:x.Deferred(),q=k.promise();if(1<g){for(;e<g;e++)c[e]&&c[e].promise&&x.isFunction(c[e].promise)?
c[e].promise().then(d(e),k.reject,b(e)):--n;n||k.resolveWith(k,c)}else k!==a&&k.resolveWith(k,g?[a]:[]);return q}});x.support=function(){var a,d,b,c,e,g,f,n,k=I.createElement("div");k.setAttribute("className","t");k.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";d=k.getElementsByTagName("*");b=k.getElementsByTagName("a")[0];if(!d||!d.length||!b)return{};c=I.createElement("select");e=c.appendChild(I.createElement("option"));d=
k.getElementsByTagName("input")[0];a={leadingWhitespace:3===k.firstChild.nodeType,tbody:!k.getElementsByTagName("tbody").length,htmlSerialize:!!k.getElementsByTagName("link").length,style:/top/.test(b.getAttribute("style")),hrefNormalized:"/a"===b.getAttribute("href"),opacity:/^0.55/.test(b.style.opacity),cssFloat:!!b.style.cssFloat,checkOn:"on"===d.value,optSelected:e.selected,getSetAttribute:"t"!==k.className,enctype:!!I.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==I.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};x.boxModel=a.boxModel="CSS1Compat"===I.compatMode;d.checked=!0;a.noCloneChecked=d.cloneNode(!0).checked;c.disabled=!0;a.optDisabled=!e.disabled;try{delete k.test}catch(q){a.deleteExpando=!1}!k.addEventListener&&k.attachEvent&&k.fireEvent&&(k.attachEvent("onclick",function(){a.noCloneEvent=!1}),k.cloneNode(!0).fireEvent("onclick"),
k.clearAttributes&&k.clearAttributes());d=I.createElement("input");d.value="t";d.setAttribute("type","radio");a.radioValue="t"===d.value;d.setAttribute("checked","checked");d.setAttribute("name","t");k.appendChild(d);b=I.createDocumentFragment();b.appendChild(k.lastChild);a.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=d.checked;b.removeChild(d);b.appendChild(k);if(k.attachEvent)for(f in{submit:1,change:1,focusin:1})d="on"+f,n=d in k,n||(k.setAttribute(d,"return;"),n=
"function"===typeof k[d]),a[f+"Bubbles"]=n;b.removeChild(k);b=c=e=k=d=null;x(function(){var d,b,c,e,f=I.getElementsByTagName("body")[0];f&&(d=I.createElement("div"),d.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",f.insertBefore(d,f.firstChild),k=I.createElement("div"),d.appendChild(k),k.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",g=k.getElementsByTagName("td"),n=0===g[0].offsetHeight,
g[0].style.display="",g[1].style.display="none",a.reliableHiddenOffsets=n&&0===g[0].offsetHeight,r.getComputedStyle&&(k.innerHTML="",b=I.createElement("div"),b.style.width="0",b.style.marginRight="0",k.style.width="2px",k.appendChild(b),a.reliableMarginRight=0===(parseInt((r.getComputedStyle(b,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof k.style.zoom&&(k.innerHTML="",k.style.width=k.style.padding="1px",k.style.border=0,k.style.overflow="hidden",k.style.display="inline",k.style.zoom=
1,a.inlineBlockNeedsLayout=3===k.offsetWidth,k.style.display="block",k.style.overflow="visible",k.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=3!==k.offsetWidth),k.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",k.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
b=k.firstChild,c=b.firstChild,e=b.nextSibling.firstChild.firstChild,e={doesNotAddBorder:5!==c.offsetTop,doesAddBorderForTableAndCells:5===e.offsetTop},c.style.position="fixed",c.style.top="20px",e.fixedPosition=20===c.offsetTop||15===c.offsetTop,c.style.position=c.style.top="",b.style.overflow="hidden",b.style.position="relative",e.subtractsBorderForOverflowNotVisible=-5===c.offsetTop,e.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,r.getComputedStyle&&(k.style.marginTop="1%",a.pixelMargin="1%"!==
(r.getComputedStyle(k,null)||{marginTop:0}).marginTop),"undefined"!==typeof d.style.zoom&&(d.style.zoom=1),f.removeChild(d),k=null,x.extend(a,e))});return a}();var Q=/^(?:\{.*\}|\[.*\])$/,S=/([A-Z])/g;x.extend({cache:{},uuid:0,expando:"jQuery"+(x.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?x.cache[a[x.expando]]:a[x.expando];return!!a&&!l(a)},data:function(a,d,b,c){if(x.acceptData(a)){var e;
e=x.expando;var g="string"===typeof d,f=a.nodeType,n=f?x.cache:a,k=f?a[e]:a[e]&&e,q="events"===d;if(k&&n[k]&&(q||c||n[k].data)||!g||b!==u){k||(f?a[e]=k=++x.uuid:k=e);n[k]||(n[k]={},f||(n[k].toJSON=x.noop));if("object"===typeof d||"function"===typeof d)c?n[k]=x.extend(n[k],d):n[k].data=x.extend(n[k].data,d);e=a=n[k];c||(a.data||(a.data={}),a=a.data);b!==u&&(a[x.camelCase(d)]=b);if(q&&!a[d])return e.events;g?(b=a[d],null==b&&(b=a[x.camelCase(d)])):b=a;return b}}},removeData:function(a,d,b){if(x.acceptData(a)){var c,
e,g,f=x.expando,n=a.nodeType,k=n?x.cache:a,q=n?a[f]:f;if(k[q]){if(d&&(c=b?k[q]:k[q].data)){x.isArray(d)||(d in c?d=[d]:(d=x.camelCase(d),d=d in c?[d]:d.split(" ")));e=0;for(g=d.length;e<g;e++)delete c[d[e]];if(!(b?l:x.isEmptyObject)(c))return}if(!b&&(delete k[q].data,!l(k[q])))return;x.support.deleteExpando||!k.setInterval?delete k[q]:k[q]=null;n&&(x.support.deleteExpando?delete a[f]:a.removeAttribute?a.removeAttribute(f):a[f]=null)}}},_data:function(a,d,b){return x.data(a,d,b,!0)},acceptData:function(a){if(a.nodeName){var d=
x.noData[a.nodeName.toLowerCase()];if(d)return!(!0===d||a.getAttribute("classid")!==d)}return!0}});x.fn.extend({data:function(a,d){var b,c,e,g,f,n=this[0],k=0,q=null;if(a===u){if(this.length&&(q=x.data(n),1===n.nodeType&&!x._data(n,"parsedAttrs"))){e=n.attributes;for(f=e.length;k<f;k++)g=e[k].name,0===g.indexOf("data-")&&(g=x.camelCase(g.substring(5)),t(n,g,q[g]));x._data(n,"parsedAttrs",!0)}return q}if("object"===typeof a)return this.each(function(){x.data(this,a)});b=a.split(".",2);b[1]=b[1]?"."+
b[1]:"";c=b[1]+"!";return x.access(this,function(d){if(d===u)return q=this.triggerHandler("getData"+c,[b[0]]),q===u&&n&&(q=x.data(n,a),q=t(n,a,q)),q===u&&b[1]?this.data(b[0]):q;b[1]=d;this.each(function(){var e=x(this);e.triggerHandler("setData"+c,b);x.data(this,a,d);e.triggerHandler("changeData"+c,b)})},null,d,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){x.removeData(this,a)})}});x.extend({_mark:function(a,d){a&&(d=(d||"fx")+"mark",x._data(a,d,(x._data(a,d)||0)+
1))},_unmark:function(a,d,c){!0!==a&&(c=d,d=a,a=!1);if(d){c=c||"fx";var e=c+"mark";(a=a?0:(x._data(d,e)||1)-1)?x._data(d,e,a):(x.removeData(d,e,!0),b(d,c,"mark"))}},queue:function(a,d,b){var c;if(a)return d=(d||"fx")+"queue",c=x._data(a,d),b&&(!c||x.isArray(b)?c=x._data(a,d,x.makeArray(b)):c.push(b)),c||[]},dequeue:function(a,d){d=d||"fx";var c=x.queue(a,d),e=c.shift(),g={};"inprogress"===e&&(e=c.shift());e&&("fx"===d&&c.unshift("inprogress"),x._data(a,d+".run",g),e.call(a,function(){x.dequeue(a,
d)},g));c.length||(x.removeData(a,d+"queue "+d+".run",!0),b(a,d,"queue"))}});x.fn.extend({queue:function(a,d){var b=2;"string"!==typeof a&&(d=a,a="fx",b--);return arguments.length<b?x.queue(this[0],a):d===u?this:this.each(function(){var b=x.queue(this,a,d);"fx"===a&&"inprogress"!==b[0]&&x.dequeue(this,a)})},dequeue:function(a){return this.each(function(){x.dequeue(this,a)})},delay:function(a,d){a=x.fx?x.fx.speeds[a]||a:a;return this.queue(d||"fx",function(d,b){var c=setTimeout(d,a);b.stop=function(){clearTimeout(c)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){function b(){--f||c.resolveWith(e,[e])}"string"!==typeof a&&(d=a,a=u);a=a||"fx";for(var c=x.Deferred(),e=this,g=e.length,f=1,n=a+"defer",k=a+"queue",q=a+"mark",v;g--;)if(v=x.data(e[g],n,u,!0)||(x.data(e[g],k,u,!0)||x.data(e[g],q,u,!0))&&x.data(e[g],n,x.Callbacks("once memory"),!0))f++,v.add(b);b();return c.promise(d)}});var ha=/[\n\t\r]/g,ba=/\s+/,V=/\r/g,M=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,
J=/^a(?:rea)?$/i,aa=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,X=x.support.getSetAttribute,fa,ua,va;x.fn.extend({attr:function(a,d){return x.access(this,x.attr,a,d,1<arguments.length)},removeAttr:function(a){return this.each(function(){x.removeAttr(this,a)})},prop:function(a,d){return x.access(this,x.prop,a,d,1<arguments.length)},removeProp:function(a){a=x.propFix[a]||a;return this.each(function(){try{this[a]=u,delete this[a]}catch(d){}})},
addClass:function(a){var d,b,c,e,g,f,n;if(x.isFunction(a))return this.each(function(d){x(this).addClass(a.call(this,d,this.className))});if(a&&"string"===typeof a)for(d=a.split(ba),b=0,c=this.length;b<c;b++)if(e=this[b],1===e.nodeType)if(e.className||1!==d.length){g=" "+e.className+" ";f=0;for(n=d.length;f<n;f++)~g.indexOf(" "+d[f]+" ")||(g+=d[f]+" ");e.className=x.trim(g)}else e.className=a;return this},removeClass:function(a){var d,b,c,e,g,f,n;if(x.isFunction(a))return this.each(function(d){x(this).removeClass(a.call(this,
d,this.className))});if(a&&"string"===typeof a||a===u)for(d=(a||"").split(ba),b=0,c=this.length;b<c;b++)if(e=this[b],1===e.nodeType&&e.className)if(a){g=(" "+e.className+" ").replace(ha," ");f=0;for(n=d.length;f<n;f++)g=g.replace(" "+d[f]+" "," ");e.className=x.trim(g)}else e.className="";return this},toggleClass:function(a,d){var b=typeof a,c="boolean"===typeof d;return x.isFunction(a)?this.each(function(b){x(this).toggleClass(a.call(this,b,this.className,d),d)}):this.each(function(){if("string"===
b)for(var e,g=0,f=x(this),n=d,k=a.split(ba);e=k[g++];)n=c?n:!f.hasClass(e),f[n?"addClass":"removeClass"](e);else if("undefined"===b||"boolean"===b)this.className&&x._data(this,"__className__",this.className),this.className=this.className||!1===a?"":x._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var d=0,b=this.length;d<b;d++)if(1===this[d].nodeType&&-1<(" "+this[d].className+" ").replace(ha," ").indexOf(a))return!0;return!1},val:function(a){var d,b,c,e=this[0];if(arguments.length)return c=
x.isFunction(a),this.each(function(b){var e=x(this);1===this.nodeType&&(b=c?a.call(this,b,e.val()):a,null==b?b="":"number"===typeof b?b+="":x.isArray(b)&&(b=x.map(b,function(a){return null==a?"":a+""})),d=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,b,"value")!==u||(this.value=b))});if(e){if((d=x.valHooks[e.type]||x.valHooks[e.nodeName.toLowerCase()])&&"get"in d&&(b=d.get(e,"value"))!==u)return b;b=e.value;return"string"===typeof b?b.replace(V,""):null==
b?"":b}}});x.extend({valHooks:{option:{get:function(a){var d=a.attributes.value;return!d||d.specified?a.value:a.text}},select:{get:function(a){var d,b,c=a.selectedIndex,e=[],g=a.options,f="select-one"===a.type;if(0>c)return null;a=f?c:0;for(b=f?c+1:g.length;a<b;a++)if(d=g[a],d.selected&&!((x.support.optDisabled?d.disabled:null!==d.getAttribute("disabled"))||d.parentNode.disabled&&x.nodeName(d.parentNode,"optgroup"))){d=x(d).val();if(f)return d;e.push(d)}return f&&!e.length&&g.length?x(g[c]).val():
e},set:function(a,d){var b=x.makeArray(d);x(a).find("option").each(function(){this.selected=0<=x.inArray(x(this).val(),b)});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,d,b,c){var e,g,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(c&&d in x.attrFn)return x(a)[d](b);if("undefined"===typeof a.getAttribute)return x.prop(a,d,b);if(c=1!==f||!x.isXMLDoc(a))d=d.toLowerCase(),g=x.attrHooks[d]||(aa.test(d)?ua:fa);if(b!==
u)if(null===b)x.removeAttr(a,d);else{if(g&&"set"in g&&c&&(e=g.set(a,b,d))!==u)return e;a.setAttribute(d,""+b);return b}else{if(g&&"get"in g&&c&&null!==(e=g.get(a,d)))return e;e=a.getAttribute(d);return null===e?u:e}}},removeAttr:function(a,d){var b,c,e,g,f,n=0;if(d&&1===a.nodeType)for(c=d.toLowerCase().split(ba),g=c.length;n<g;n++)if(e=c[n])b=x.propFix[e]||e,(f=aa.test(e))||x.attr(a,e,""),a.removeAttribute(X?e:b),f&&b in a&&(a[b]=!1)},attrHooks:{type:{set:function(a,d){if(M.test(a.nodeName)&&a.parentNode)x.error("type property can't be changed");
else if(!x.support.radioValue&&"radio"===d&&x.nodeName(a,"input")){var b=a.value;a.setAttribute("type",d);b&&(a.value=b);return d}}},value:{get:function(a,d){return fa&&x.nodeName(a,"button")?fa.get(a,d):d in a?a.value:null},set:function(a,d,b){if(fa&&x.nodeName(a,"button"))return fa.set(a,d,b);a.value=d}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,d,b){var c,e,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!x.isXMLDoc(a))d=x.propFix[d]||d,e=x.propHooks[d];return b!==u?e&&"set"in e&&(c=e.set(a,b,d))!==u?c:a[d]=b:e&&"get"in e&&null!==(c=e.get(a,d))?c:a[d]}},propHooks:{tabIndex:{get:function(a){var d=a.getAttributeNode("tabindex");return d&&d.specified?parseInt(d.value,10):U.test(a.nodeName)||J.test(a.nodeName)&&a.href?0:u}}}});x.attrHooks.tabindex=
x.propHooks.tabIndex;ua={get:function(a,d){var b,c=x.prop(a,d);return!0===c||"boolean"!==typeof c&&(b=a.getAttributeNode(d))&&!1!==b.nodeValue?d.toLowerCase():u},set:function(a,d,b){!1===d?x.removeAttr(a,b):(d=x.propFix[b]||b,d in a&&(a[d]=!0),a.setAttribute(b,b.toLowerCase()));return b}};X||(va={name:!0,id:!0,coords:!0},fa=x.valHooks.button={get:function(a,d){var b;return(b=a.getAttributeNode(d))&&(va[d]?""!==b.nodeValue:b.specified)?b.nodeValue:u},set:function(a,d,b){var c=a.getAttributeNode(b);
c||(c=I.createAttribute(b),a.setAttributeNode(c));return c.nodeValue=d+""}},x.attrHooks.tabindex.set=fa.set,x.each(["width","height"],function(a,d){x.attrHooks[d]=x.extend(x.attrHooks[d],{set:function(a,b){if(""===b)return a.setAttribute(d,"auto"),b}})}),x.attrHooks.contenteditable={get:fa.get,set:function(a,d,b){""===d&&(d="false");fa.set(a,d,b)}});x.support.hrefNormalized||x.each(["href","src","width","height"],function(a,d){x.attrHooks[d]=x.extend(x.attrHooks[d],{get:function(a){a=a.getAttribute(d,
2);return null===a?u:a}})});x.support.style||(x.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||u},set:function(a,d){return a.style.cssText=""+d}});x.support.optSelected||(x.propHooks.selected=x.extend(x.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));x.support.enctype||(x.propFix.enctype="encoding");x.support.checkOn||x.each(["radio","checkbox"],function(){x.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});x.each(["radio","checkbox"],function(){x.valHooks[this]=x.extend(x.valHooks[this],{set:function(a,d){if(x.isArray(d))return a.checked=0<=x.inArray(x(a).val(),d)}})});var la=/^(?:textarea|input|select)$/i,oa=/^([^\.]*)?(?:\.(.+))?$/,ka=/(?:^|\s)hover(\.\S+)?\b/,Fa=/^key/,O=/^(?:mouse|contextmenu)|click/,sa=/^(?:focusinfocus|focusoutblur)$/,kb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,La=function(a){if(a=kb.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},Ia=function(a){return x.event.special.hover?a:a.replace(ka,"mouseenter$1 mouseleave$1")};x.event={add:function(a,d,b,c,e){var g,f,n,k,q,v,m,l,y;if(3!==a.nodeType&&8!==a.nodeType&&d&&b&&(g=x._data(a))){b.handler&&(m=b,b=m.handler,e=m.selector);b.guid||(b.guid=x.guid++);n=g.events;n||(g.events=n={});f=g.handle;f||(g.handle=f=function(a){return"undefined"===typeof x||a&&x.event.triggered===a.type?u:x.event.dispatch.apply(f.elem,arguments)},f.elem=a);d=x.trim(Ia(d)).split(" ");
for(g=0;g<d.length;g++)k=oa.exec(d[g])||[],q=k[1],v=(k[2]||"").split(".").sort(),y=x.event.special[q]||{},q=(e?y.delegateType:y.bindType)||q,y=x.event.special[q]||{},k=x.extend({type:q,origType:k[1],data:c,handler:b,guid:b.guid,selector:e,quick:e&&La(e),namespace:v.join(".")},m),l=n[q],l||(l=n[q]=[],l.delegateCount=0,y.setup&&!1!==y.setup.call(a,c,v,f)||(a.addEventListener?a.addEventListener(q,f,!1):a.attachEvent&&a.attachEvent("on"+q,f))),y.add&&(y.add.call(a,k),k.handler.guid||(k.handler.guid=b.guid)),
e?l.splice(l.delegateCount++,0,k):l.push(k),x.event.global[q]=!0;a=null}},global:{},remove:function(a,d,b,c,e){var g=x.hasData(a)&&x._data(a),f,n,k,q,v,m,l,y,A,z;if(g&&(l=g.events)){d=x.trim(Ia(d||"")).split(" ");for(f=0;f<d.length;f++)if(n=oa.exec(d[f])||[],k=q=n[1],n=n[2],k){y=x.event.special[k]||{};k=(c?y.delegateType:y.bindType)||k;A=l[k]||[];v=A.length;n=n?RegExp("(^|\\.)"+n.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(m=0;m<A.length;m++)z=A[m],!e&&q!==z.origType||b&&b.guid!==
z.guid||n&&!n.test(z.namespace)||c&&!(c===z.selector||"**"===c&&z.selector)||(A.splice(m--,1),z.selector&&A.delegateCount--,y.remove&&y.remove.call(a,z));0===A.length&&v!==A.length&&(y.teardown&&!1!==y.teardown.call(a,n)||x.removeEvent(a,k,g.handle),delete l[k])}else for(k in l)x.event.remove(a,k+d[f],b,c,!0);if(x.isEmptyObject(l)){if(d=g.handle)d.elem=null;x.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,d,b,c){if(!b||3!==b.nodeType&&
8!==b.nodeType){var e=a.type||a,g=[],f,n,k,q,v;if(!sa.test(e+x.event.triggered)&&(0<=e.indexOf("!")&&(e=e.slice(0,-1),f=!0),0<=e.indexOf(".")&&(g=e.split("."),e=g.shift(),g.sort()),b&&!x.event.customEvent[e]||x.event.global[e]))if(a="object"===typeof a?a[x.expando]?a:new x.Event(e,a):new x.Event(e),a.type=e,a.isTrigger=!0,a.exclusive=f,a.namespace=g.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,f=0>e.indexOf(":")?"on"+e:"",b){if(a.result=u,a.target||
(a.target=b),d=null!=d?x.makeArray(d):[],d.unshift(a),k=x.event.special[e]||{},!k.trigger||!1!==k.trigger.apply(b,d)){v=[[b,k.bindType||e]];if(!c&&!k.noBubble&&!x.isWindow(b)){q=k.delegateType||e;g=sa.test(q+e)?b:b.parentNode;for(n=null;g;g=g.parentNode)v.push([g,q]),n=g;n&&n===b.ownerDocument&&v.push([n.defaultView||n.parentWindow||r,q])}for(n=0;n<v.length&&!a.isPropagationStopped();n++)g=v[n][0],a.type=v[n][1],(q=(x._data(g,"events")||{})[a.type]&&x._data(g,"handle"))&&q.apply(g,d),(q=f&&g[f])&&
x.acceptData(g)&&!1===q.apply(g,d)&&a.preventDefault();a.type=e;c||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(b.ownerDocument,d)||"click"===e&&x.nodeName(b,"a")||!x.acceptData(b)||!f||!b[e]||("focus"===e||"blur"===e)&&0===a.target.offsetWidth||x.isWindow(b)||((n=b[f])&&(b[f]=null),x.event.triggered=e,b[e](),x.event.triggered=u,n&&(b[f]=n));return a.result}}else for(n in b=x.cache,b)b[n].events&&b[n].events[e]&&x.event.trigger(a,d,b[n].handle.elem,!0)}},dispatch:function(a){a=x.event.fix(a||
r.event);var d=(x._data(this,"events")||{})[a.type]||[],b=d.delegateCount,c=[].slice.call(arguments,0),e=!a.exclusive&&!a.namespace,g=x.event.special[a.type]||{},f=[],n,k,q,v,m,l,y;c[0]=a;a.delegateTarget=this;if(!g.preDispatch||!1!==g.preDispatch.call(this,a)){if(b&&(!a.button||"click"!==a.type))for(q=x(this),q.context=this.ownerDocument||this,k=a.target;k!=this;k=k.parentNode||this)if(!0!==k.disabled){m={};l=[];q[0]=k;for(n=0;n<b;n++){v=d[n];y=v.selector;if(m[y]===u){var A=m,z=y,p;if(v.quick){p=
v.quick;var B=k.attributes||{};p=(!p[1]||k.nodeName.toLowerCase()===p[1])&&(!p[2]||(B.id||{}).value===p[2])&&(!p[3]||p[3].test((B["class"]||{}).value))}else p=q.is(y);A[z]=p}m[y]&&l.push(v)}l.length&&f.push({elem:k,matches:l})}d.length>b&&f.push({elem:this,matches:d.slice(b)});for(n=0;n<f.length&&!a.isPropagationStopped();n++)for(b=f[n],a.currentTarget=b.elem,d=0;d<b.matches.length&&!a.isImmediatePropagationStopped();d++)if(v=b.matches[d],e||!a.namespace&&!v.namespace||a.namespace_re&&a.namespace_re.test(v.namespace))a.data=
v.data,a.handleObj=v,v=((x.event.special[v.origType]||{}).handle||v.handler).apply(b.elem,c),v!==u&&(a.result=v,!1===v&&(a.preventDefault(),a.stopPropagation()));g.postDispatch&&g.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,d){null==a.which&&
(a.which=null!=d.charCode?d.charCode:d.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var b,c,e=d.button,g=d.fromElement;null==a.pageX&&null!=d.clientX&&(b=a.target.ownerDocument||I,c=b.documentElement,b=b.body,a.pageX=d.clientX+(c&&c.scrollLeft||b&&b.scrollLeft||0)-(c&&c.clientLeft||b&&b.clientLeft||0),a.pageY=d.clientY+(c&&c.scrollTop||b&&b.scrollTop||0)-(c&&c.clientTop||b&&
b.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?d.toElement:g);a.which||e===u||(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[x.expando])return a;var d,b,c=a,e=x.event.fixHooks[a.type]||{},g=e.props?this.props.concat(e.props):this.props;a=x.Event(c);for(d=g.length;d;)b=g[--d],a[b]=c[b];a.target||(a.target=c.srcElement||I);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===u&&(a.metaKey=a.ctrlKey);return e.filter?e.filter(a,c):a},special:{ready:{setup:x.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,d,b){x.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,d){this.onbeforeunload===d&&(this.onbeforeunload=null)}}},simulate:function(a,d,b,c){a=x.extend(new x.Event,b,{type:a,isSimulated:!0,originalEvent:{}});c?x.event.trigger(a,null,d):x.event.dispatch.call(d,a);a.isDefaultPrevented()&&b.preventDefault()}};x.event.handle=x.event.dispatch;x.removeEvent=I.removeEventListener?function(a,
d,b){a.removeEventListener&&a.removeEventListener(d,b,!1)}:function(a,d,b){a.detachEvent&&a.detachEvent("on"+d,b)};x.Event=function(a,d){if(!(this instanceof x.Event))return new x.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?m:p):this.type=a;d&&x.extend(this,d);this.timeStamp=a&&a.timeStamp||x.now();this[x.expando]=!0};x.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
m;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=m;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=m;this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p};x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){x.event.special[a]={delegateType:d,
bindType:d,handle:function(a){var b=a.relatedTarget,c=a.handleObj,e;if(!b||b!==this&&!x.contains(this,b))a.type=c.origType,e=c.handler.apply(this,arguments),a.type=d;return e}}});x.support.submitBubbles||(x.event.special.submit={setup:function(){if(x.nodeName(this,"form"))return!1;x.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=x.nodeName(a,"input")||x.nodeName(a,"button")?a.form:u)&&!a._submit_attached&&(x.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&x.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(x.nodeName(this,"form"))return!1;x.event.remove(this,"._submit")}});x.support.changeBubbles||(x.event.special.change={setup:function(){if(la.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)x.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),x.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,x.event.simulate("change",this,a,!0))});return!1}x.event.add(this,"beforeactivate._change",function(a){a=a.target;la.test(a.nodeName)&&!a._change_attached&&(x.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||x.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var d=a.target;if(this!==d||a.isSimulated||
a.isTrigger||"radio"!==d.type&&"checkbox"!==d.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){x.event.remove(this,"._change");return la.test(this.nodeName)}});x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(a,d){var b=0,c=function(a){x.event.simulate(d,a.target,x.event.fix(a),!0)};x.event.special[d]={setup:function(){0===b++&&I.addEventListener(a,c,!0)},teardown:function(){0===--b&&I.removeEventListener(a,c,!0)}}});x.fn.extend({on:function(a,
d,b,c,e){var g,f;if("object"===typeof a){"string"!==typeof d&&(b=b||d,d=u);for(f in a)this.on(f,d,b,a[f],e);return this}null==b&&null==c?(c=d,b=d=u):null==c&&("string"===typeof d?(c=b,b=u):(c=b,b=d,d=u));if(!1===c)c=p;else if(!c)return this;1===e&&(g=c,c=function(a){x().off(a);return g.apply(this,arguments)},c.guid=g.guid||(g.guid=x.guid++));return this.each(function(){x.event.add(this,a,c,b,d)})},one:function(a,d,b,c){return this.on(a,d,b,c,1)},off:function(a,d,b){if(a&&a.preventDefault&&a.handleObj){var c=
a.handleObj;x(a.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler);return this}if("object"===typeof a){for(c in a)this.off(c,d,a[c]);return this}if(!1===d||"function"===typeof d)b=d,d=u;!1===b&&(b=p);return this.each(function(){x.event.remove(this,a,b,d)})},bind:function(a,d,b){return this.on(a,null,d,b)},unbind:function(a,d){return this.off(a,null,d)},live:function(a,d,b){x(this.context).on(a,this.selector,d,b);return this},die:function(a,d){x(this.context).off(a,
this.selector||"**",d);return this},delegate:function(a,d,b,c){return this.on(d,a,b,c)},undelegate:function(a,d,b){return 1==arguments.length?this.off(a,"**"):this.off(d,a,b)},trigger:function(a,d){return this.each(function(){x.event.trigger(a,d,this)})},triggerHandler:function(a,d){if(this[0])return x.event.trigger(a,d,this[0],!0)},toggle:function(a){var d=arguments,b=a.guid||x.guid++,c=0,e=function(b){var e=(x._data(this,"lastToggle"+a.guid)||0)%c;x._data(this,"lastToggle"+a.guid,e+1);b.preventDefault();
return d[e].apply(this,arguments)||!1};for(e.guid=b;c<d.length;)d[c++].guid=b;return this.click(e)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||a)}});x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,d){x.fn[d]=function(a,b){null==b&&(b=a,a=null);return 0<arguments.length?this.on(d,null,a,b):this.trigger(d)};
x.attrFn&&(x.attrFn[d]=!0);Fa.test(d)&&(x.event.fixHooks[d]=x.event.keyHooks);O.test(d)&&(x.event.fixHooks[d]=x.event.mouseHooks)});(function(){function a(d,b,e,g,f,n){f=0;for(var k=g.length;f<k;f++){var q=g[f];if(q){for(var v=!1,q=q[d];q;){if(q[c]===e){v=g[q.sizset];break}1!==q.nodeType||n||(q[c]=e,q.sizset=f);if(q.nodeName.toLowerCase()===b){v=q;break}q=q[d]}g[f]=v}}}function d(a,b,e,g,f,n){f=0;for(var k=g.length;f<k;f++){var q=g[f];if(q){for(var v=!1,q=q[a];q;){if(q[c]===e){v=g[q.sizset];break}if(1===
q.nodeType)if(n||(q[c]=e,q.sizset=f),"string"!==typeof b){if(q===b){v=!0;break}}else if(0<m.filter(b,[q]).length){v=q;break}q=q[a]}g[f]=v}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,c="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,f=!1,n=!0,k=/\\/g,q=/\r\n/g,v=/\W/;[0,0].sort(function(){n=!1;return 0});var m=function(a,d,c,e){c=c||[];var f=d=d||I;if(1!==d.nodeType&&9!==
d.nodeType)return[];if(!a||"string"!==typeof a)return c;var n,k,q,v,l,z=!0,p=m.isXML(d),C=[],E=a;do if(b.exec(""),n=b.exec(E))if(E=n[3],C.push(n[1]),n[2]){v=n[3];break}while(n);if(1<C.length&&A.exec(a))if(2===C.length&&y.relative[C[0]])k=H(C[0]+C[1],d,e);else for(k=y.relative[C[0]]?[d]:m(C.shift(),d);C.length;)a=C.shift(),y.relative[a]&&(a+=C.shift()),k=H(a,k,e);else if(!e&&1<C.length&&9===d.nodeType&&!p&&y.match.ID.test(C[0])&&!y.match.ID.test(C[C.length-1])&&(n=m.find(C.shift(),d,p),d=n.expr?m.filter(n.expr,
n.set)[0]:n.set[0]),d)for(n=e?{expr:C.pop(),set:B(e)}:m.find(C.pop(),1!==C.length||"~"!==C[0]&&"+"!==C[0]||!d.parentNode?d:d.parentNode,p),k=n.expr?m.filter(n.expr,n.set):n.set,0<C.length?q=B(k):z=!1;C.length;)n=l=C.pop(),y.relative[l]?n=C.pop():l="",null==n&&(n=d),y.relative[l](q,n,p);else q=[];q||(q=k);q||m.error(l||a);if("[object Array]"===g.call(q))if(z)if(d&&1===d.nodeType)for(a=0;null!=q[a];a++)q[a]&&(!0===q[a]||1===q[a].nodeType&&m.contains(d,q[a]))&&c.push(k[a]);else for(a=0;null!=q[a];a++)q[a]&&
1===q[a].nodeType&&c.push(k[a]);else c.push.apply(c,q);else B(q,c);v&&(m(v,f,c,e),m.uniqueSort(c));return c};m.uniqueSort=function(a){if(E&&(f=n,a.sort(E),f))for(var d=1;d<a.length;d++)a[d]===a[d-1]&&a.splice(d--,1);return a};m.matches=function(a,d){return m(a,null,null,d)};m.matchesSelector=function(a,d){return 0<m(d,null,null,[a]).length};m.find=function(a,d,b){var c,e,g,f,n,q;if(!a)return[];e=0;for(g=y.order.length;e<g;e++)if(n=y.order[e],f=y.leftMatch[n].exec(a))if(q=f[1],f.splice(1,1),"\\"!==
q.substr(q.length-1)&&(f[1]=(f[1]||"").replace(k,""),c=y.find[n](f,d,b),null!=c)){a=a.replace(y.match[n],"");break}c||(c="undefined"!==typeof d.getElementsByTagName?d.getElementsByTagName("*"):[]);return{set:c,expr:a}};m.filter=function(a,d,b,c){for(var e,g,f,n,k,q,v,l,A=a,z=[],p=d,B=d&&d[0]&&m.isXML(d[0]);a&&d.length;){for(f in y.filter)if(null!=(e=y.leftMatch[f].exec(a))&&e[2]&&(q=y.filter[f],k=e[1],g=!1,e.splice(1,1),"\\"!==k.substr(k.length-1))){p===z&&(z=[]);if(y.preFilter[f])if(e=y.preFilter[f](e,
p,b,z,c,B),!e)g=n=!0;else if(!0===e)continue;if(e)for(v=0;null!=(k=p[v]);v++)k&&(n=q(k,e,v,p),l=c^n,b&&null!=n?l?g=!0:p[v]=!1:l&&(z.push(k),g=!0));if(n!==u){b||(p=z);a=a.replace(y.match[f],"");if(!g)return[];break}}if(a===A)if(null==g)m.error(a);else break;A=a}return p};m.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var l=m.getText=function(a){var d,b;d=a.nodeType;var c="";if(d)if(1===d||9===d||11===d){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(q,"");for(a=a.firstChild;a;a=a.nextSibling)c+=l(a)}else{if(3===d||4===d)return a.nodeValue}else for(d=0;b=a[d];d++)8!==b.nodeType&&(c+=l(b));return c},y=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,d){var b="string"===typeof d,c=b&&!v.test(d),
b=b&&!c;c&&(d=d.toLowerCase());for(var c=0,e=a.length,g;c<e;c++)if(g=a[c]){for(;(g=g.previousSibling)&&1!==g.nodeType;);a[c]=b||g&&g.nodeName.toLowerCase()===d?g||!1:g===d}b&&m.filter(d,a,!0)},">":function(a,d){var b,c="string"===typeof d,e=0,g=a.length;if(c&&!v.test(d))for(d=d.toLowerCase();e<g;e++){if(b=a[e])b=b.parentNode,a[e]=b.nodeName.toLowerCase()===d?b:!1}else{for(;e<g;e++)(b=a[e])&&(a[e]=c?b.parentNode:b.parentNode===d);c&&m.filter(d,a,!0)}},"":function(b,c,g){var f,n=e++,k=d;"string"!==
typeof c||v.test(c)||(f=c=c.toLowerCase(),k=a);k("parentNode",c,n,b,f,g)},"~":function(b,c,g){var f,n=e++,k=d;"string"!==typeof c||v.test(c)||(f=c=c.toLowerCase(),k=a);k("previousSibling",c,n,b,f,g)}},find:{ID:function(a,d,b){if("undefined"!==typeof d.getElementById&&!b)return(a=d.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,d){if("undefined"!==typeof d.getElementsByName){for(var b=[],c=d.getElementsByName(a[1]),e=0,g=c.length;e<g;e++)c[e].getAttribute("name")===a[1]&&b.push(c[e]);
return 0===b.length?null:b}},TAG:function(a,d){if("undefined"!==typeof d.getElementsByTagName)return d.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,d,b,c,e,g){a=" "+a[1].replace(k,"")+" ";if(g)return a;g=0;for(var f;null!=(f=d[g]);g++)f&&(e^(f.className&&0<=(" "+f.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?b||c.push(f):b&&(d[g]=!1));return!1},ID:function(a){return a[1].replace(k,"")},TAG:function(a,d){return a[1].replace(k,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
m.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var d=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=d[1]+(d[2]||1)-0;a[3]=d[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,d,b,c,e,g){d=a[1]=a[1].replace(k,"");!g&&y.attrMap[d]&&(a[1]=y.attrMap[d]);a[4]=(a[4]||a[5]||"").replace(k,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,d,c,e,g){if("not"===a[1])if(1<(b.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
m(a[3],null,null,d);else return a=m.filter(a[3],d,c,1^g),c||e.push.apply(e,a),!1;else if(y.match.POS.test(a[0])||y.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,d,b){return!!m(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var d=a.getAttribute("type"),b=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===b&&(d===b||null===d)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var d=a.nodeName.toLowerCase();return("input"===d||"button"===d)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var d=a.nodeName.toLowerCase();return("input"===d||"button"===d)&&"reset"===a.type},button:function(a){var d=a.nodeName.toLowerCase();return"input"===d&&"button"===a.type||"button"===d},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,d){return 0===d},last:function(a,d,b,c){return d===c.length-1},even:function(a,d){return 0===d%2},odd:function(a,d){return 1===d%2},lt:function(a,d,b){return d<b[3]-0},gt:function(a,d,b){return d>b[3]-0},nth:function(a,d,b){return b[3]-0===d},eq:function(a,d,b){return b[3]-0===d}},filter:{PSEUDO:function(a,d,b,c){var e=d[1],g=y.filters[e];if(g)return g(a,b,d,c);if("contains"===e)return 0<=(a.textContent||a.innerText||l([a])||"").indexOf(d[3]);
if("not"===e){d=d[3];b=0;for(c=d.length;b<c;b++)if(d[b]===a)return!1;return!0}m.error(e)},CHILD:function(a,d){var b,e,g,f,n,k;b=d[1];k=a;switch(b){case "only":case "first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===b)return!0;k=a;case "last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case "nth":b=d[2];e=d[3];if(1===b&&0===e)return!0;g=d[0];if((f=a.parentNode)&&(f[c]!==g||!a.nodeIndex)){n=0;for(k=f.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++n);
f[c]=g}k=a.nodeIndex-e;return 0===b?0===k:0===k%b&&0<=k/b}},ID:function(a,d){return 1===a.nodeType&&a.getAttribute("id")===d},TAG:function(a,d){return"*"===d&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===d},CLASS:function(a,d){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(d)},ATTR:function(a,d){var b=d[1],b=m.attr?m.attr(a,b):y.attrHandle[b]?y.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),c=b+"",e=d[2],g=d[4];return null==b?"!="===e:!e&&m.attr?null!=b:"="===e?
c===g:"*="===e?0<=c.indexOf(g):"~="===e?0<=(" "+c+" ").indexOf(g):g?"!="===e?c!==g:"^="===e?0===c.indexOf(g):"$="===e?c.substr(c.length-g.length)===g:"|="===e?c===g||c.substr(0,g.length+1)===g+"-":!1:c&&!1!==b},POS:function(a,d,b,c){var e=y.setFilters[d[2]];if(e)return e(a,b,d,c)}}},A=y.match.POS,z=function(a,d){return"\\"+(d-0+1)},p;for(p in y.match)y.match[p]=RegExp(y.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),y.leftMatch[p]=RegExp(/(^(?:.|\r|\n)*?)/.source+y.match[p].source.replace(/\\(\d+)/g,
z));y.match.globalPOS=A;var B=function(a,d){a=Array.prototype.slice.call(a,0);return d?(d.push.apply(d,a),d):a};try{Array.prototype.slice.call(I.documentElement.childNodes,0)[0].nodeType}catch(C){B=function(a,d){var b=0,c=d||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(c,a);else if("number"===typeof a.length)for(var e=a.length;b<e;b++)c.push(a[b]);else for(;a[b];b++)c.push(a[b]);return c}}var E,D;I.documentElement.compareDocumentPosition?E=function(a,d){return a===d?(f=!0,0):a.compareDocumentPosition&&
d.compareDocumentPosition?a.compareDocumentPosition(d)&4?-1:1:a.compareDocumentPosition?-1:1}:(E=function(a,d){if(a===d)return f=!0,0;if(a.sourceIndex&&d.sourceIndex)return a.sourceIndex-d.sourceIndex;var b,c,e=[],g=[];b=a.parentNode;c=d.parentNode;var n=b;if(b===c)return D(a,d);if(!b)return-1;if(!c)return 1;for(;n;)e.unshift(n),n=n.parentNode;for(n=c;n;)g.unshift(n),n=n.parentNode;b=e.length;c=g.length;for(n=0;n<b&&n<c;n++)if(e[n]!==g[n])return D(e[n],g[n]);return n===b?D(a,g[n],-1):D(e[n],d,1)},
D=function(a,d,b){if(a===d)return b;for(a=a.nextSibling;a;){if(a===d)return-1;a=a.nextSibling}return 1});(function(){var a=I.createElement("div"),d="script"+(new Date).getTime(),b=I.documentElement;a.innerHTML="<a name='"+d+"'/>";b.insertBefore(a,b.firstChild);I.getElementById(d)&&(y.find.ID=function(a,d,b){if("undefined"!==typeof d.getElementById&&!b)return(d=d.getElementById(a[1]))?d.id===a[1]||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===a[1]?[d]:u:[]},y.filter.ID=
function(a,d){var b="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===d});b.removeChild(a);b=a=null})();(function(){var a=I.createElement("div");a.appendChild(I.createComment(""));0<a.getElementsByTagName("*").length&&(y.find.TAG=function(a,d){var b=d.getElementsByTagName(a[1]);if("*"===a[1]){for(var c=[],e=0;b[e];e++)1===b[e].nodeType&&c.push(b[e]);b=c}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(y.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();I.querySelectorAll&&function(){var a=m,d=I.createElement("div");d.innerHTML="<p class='TEST'></p>";if(!d.querySelectorAll||0!==d.querySelectorAll(".TEST").length){m=function(d,b,c,e){b=b||I;if(!e&&!m.isXML(b)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(d);if(g&&(1===b.nodeType||9===b.nodeType)){if(g[1])return B(b.getElementsByTagName(d),c);if(g[2]&&y.find.CLASS&&b.getElementsByClassName)return B(b.getElementsByClassName(g[2]),
c)}if(9===b.nodeType){if("body"===d&&b.body)return B([b.body],c);if(g&&g[3]){var f=b.getElementById(g[3]);if(f&&f.parentNode){if(f.id===g[3])return B([f],c)}else return B([],c)}try{return B(b.querySelectorAll(d),c)}catch(n){}}else if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){var g=b,k=(f=b.getAttribute("id"))||"__sizzle__",q=b.parentNode,v=/^\s*[+~]/.test(d);f?k=k.replace(/'/g,"\\$&"):b.setAttribute("id",k);v&&q&&(b=b.parentNode);try{if(!v||q)return B(b.querySelectorAll("[id='"+k+"'] "+
d),c)}catch(l){}finally{f||g.removeAttribute("id")}}}return a(d,b,c,e)};for(var b in a)m[b]=a[b];d=null}}();(function(){var a=I.documentElement,d=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(d){var b=!d.call(I.createElement("div"),"div"),c=!1;try{d.call(I.documentElement,"[test!='']:sizzle")}catch(e){c=!0}m.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(c||!y.match.PSEUDO.test(e)&&!/!=/.test(e)){var g=d.call(a,
e);if(g||!b||a.document&&11!==a.document.nodeType)return g}}catch(f){}return 0<m(e,null,null,[a]).length}}})();(function(){var a=I.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(y.order.splice(1,0,"CLASS"),y.find.CLASS=function(a,d,b){if("undefined"!==typeof d.getElementsByClassName&&!b)return d.getElementsByClassName(a[1])},
a=null))})();m.contains=I.documentElement.contains?function(a,d){return a!==d&&(a.contains?a.contains(d):!0)}:I.documentElement.compareDocumentPosition?function(a,d){return!!(a.compareDocumentPosition(d)&16)}:function(){return!1};m.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var H=function(a,d,b){var c,e=[],g="";for(d=d.nodeType?[d]:d;c=y.match.PSEUDO.exec(a);)g+=c[0],a=a.replace(y.match.PSEUDO,"");a=y.relative[a]?a+"*":a;c=0;for(var f=d.length;c<f;c++)m(a,
d[c],e,b);return m.filter(g,e)};m.attr=x.attr;m.selectors.attrMap={};x.find=m;x.expr=m.selectors;x.expr[":"]=x.expr.filters;x.unique=m.uniqueSort;x.text=m.getText;x.isXMLDoc=m.isXML;x.contains=m.contains})();var Ra=/Until$/,Qa=/^(?:parents|prevUntil|prevAll)/,pb=/,/,pa=/^.[^:#\[\.,]*$/,ca=Array.prototype.slice,Ma=x.expr.match.globalPOS,cb={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(a){var d=this,b,c;if("string"!==typeof a)return x(a).filter(function(){b=0;for(c=d.length;b<
c;b++)if(x.contains(d[b],this))return!0});var e=this.pushStack("","find",a),g,f,n;b=0;for(c=this.length;b<c;b++)if(g=e.length,x.find(a,this[b],e),0<b)for(f=g;f<e.length;f++)for(n=0;n<g;n++)if(e[n]===e[f]){e.splice(f--,1);break}return e},has:function(a){var d=x(a);return this.filter(function(){for(var a=0,b=d.length;a<b;a++)if(x.contains(this,d[a]))return!0})},not:function(a){return this.pushStack(f(this,a,!1),"not",a)},filter:function(a){return this.pushStack(f(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?Ma.test(a)?0<=x(a,this.context).index(this[0]):0<x.filter(a,this).length:0<this.filter(a).length)},closest:function(a,d){var b=[],c,e,g=this[0];if(x.isArray(a)){for(e=1;g&&g.ownerDocument&&g!==d;){for(c=0;c<a.length;c++)x(g).is(a[c])&&b.push({selector:a[c],elem:g,level:e});g=g.parentNode;e++}return b}var f=Ma.test(a)||"string"!==typeof a?x(a,d||this.context):0;c=0;for(e=this.length;c<e;c++)for(g=this[c];g;)if(f?-1<f.index(g):x.find.matchesSelector(g,a)){b.push(g);break}else if(g=
g.parentNode,!g||!g.ownerDocument||g===d||11===g.nodeType)break;b=1<b.length?x.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){return a?"string"===typeof a?x.inArray(this[0],x(a)):x.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,d){var b="string"===typeof a?x(a,d):x.makeArray(a&&a.nodeType?[a]:a),c=x.merge(this.get(),b);return this.pushStack(k(b[0])||k(c[0])?c:x.unique(c))},andSelf:function(){return this.add(this.prevObject)}});
x.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return x.dir(a,"parentNode")},parentsUntil:function(a,d,b){return x.dir(a,"parentNode",b)},next:function(a){return x.nth(a,2,"nextSibling")},prev:function(a){return x.nth(a,2,"previousSibling")},nextAll:function(a){return x.dir(a,"nextSibling")},prevAll:function(a){return x.dir(a,"previousSibling")},nextUntil:function(a,d,b){return x.dir(a,"nextSibling",b)},prevUntil:function(a,d,b){return x.dir(a,"previousSibling",
b)},siblings:function(a){return x.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return x.sibling(a.firstChild)},contents:function(a){return x.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:x.makeArray(a.childNodes)}},function(a,d){x.fn[a]=function(b,c){var e=x.map(this,d,b);Ra.test(a)||(c=b);c&&"string"===typeof c&&(e=x.filter(c,e));e=1<this.length&&!cb[a]?x.unique(e):e;(1<this.length||pb.test(c))&&Qa.test(a)&&(e=e.reverse());return this.pushStack(e,a,ca.call(arguments).join(","))}});
x.extend({filter:function(a,d,b){b&&(a=":not("+a+")");return 1===d.length?x.find.matchesSelector(d[0],a)?[d[0]]:[]:x.find.matches(a,d)},dir:function(a,d,b){var c=[];for(a=a[d];a&&9!==a.nodeType&&(b===u||1!==a.nodeType||!x(a).is(b));)1===a.nodeType&&c.push(a),a=a[d];return c},nth:function(a,d,b,c){d=d||1;for(c=0;a&&(1!==a.nodeType||++c!==d);a=a[b]);return a},sibling:function(a,d){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==d&&b.push(a);return b}});var ma="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
za=/ jQuery\d+="(?:\d+|null)"/g,R=/^\s+/,Ga=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,na=/<([\w:]+)/,Ca=/<tbody/i,$a=/<|&#?\w+;/,hb=/<(?:script|style)/i,ub=/<(?:script|object|embed|option|style)/i,ia=RegExp("<(?:"+ma+")[\\s/>]","i"),Na=/checked\s*(?:[^=]|=\s*.checked.)/i,ib=/\/(java|ecma)script/i,Wa=/^\s*<!(?:\[CDATA\[|\-\-)/,Ta={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ac=c(I);Ta.optgroup=Ta.option;Ta.tbody=Ta.tfoot=Ta.colgroup=Ta.caption=Ta.thead;Ta.th=Ta.td;x.support.htmlSerialize||(Ta._default=[1,"div<div>","</div>"]);x.fn.extend({text:function(a){return x.access(this,function(a){return a===u?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||I).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(x.isFunction(a))return this.each(function(d){x(this).wrapAll(a.call(this,d))});if(this[0]){var d=x(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return x.isFunction(a)?this.each(function(d){x(this).wrapInner(a.call(this,d))}):this.each(function(){var d=x(this),b=d.contents();
b.length?b.wrapAll(a):d.append(a)})},wrap:function(a){var d=x.isFunction(a);return this.each(function(b){x(this).wrapAll(d?a.call(this,b):a)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=x.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,x.clean(arguments));return a}},remove:function(a,
d){for(var b=0,c;null!=(c=this[b]);b++)if(!a||x.filter(a,[c]).length)d||1!==c.nodeType||(x.cleanData(c.getElementsByTagName("*")),x.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a=0,d;null!=(d=this[a]);a++)for(1===d.nodeType&&x.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);return this},clone:function(a,d){a=null==a?!1:a;d=null==d?a:d;return this.map(function(){return x.clone(this,a,d)})},html:function(a){return x.access(this,
function(a){var d=this[0]||{},b=0,c=this.length;if(a===u)return 1===d.nodeType?d.innerHTML.replace(za,""):null;if("string"===typeof a&&!(hb.test(a)||!x.support.leadingWhitespace&&R.test(a)||Ta[(na.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ga,"<$1></$2>");try{for(;b<c;b++)d=this[b]||{},1===d.nodeType&&(x.cleanData(d.getElementsByTagName("*")),d.innerHTML=a);d=0}catch(e){}}d&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(x.isFunction(a))return this.each(function(d){var b=
x(this),c=b.html();b.replaceWith(a.call(this,d,c))});"string"!==typeof a&&(a=x(a).detach());return this.each(function(){var d=this.nextSibling,b=this.parentNode;x(this).remove();d?x(d).before(a):x(b).append(a)})}return this.length?this.pushStack(x(x.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,d,b){var c,g,f,n=a[0],k=[];if(!x.support.checkClone&&3===arguments.length&&"string"===typeof n&&Na.test(n))return this.each(function(){x(this).domManip(a,
d,b,!0)});if(x.isFunction(n))return this.each(function(c){var e=x(this);a[0]=n.call(this,c,d?e.html():u);e.domManip(a,d,b)});if(this[0]){c=n&&n.parentNode;c=x.support.parentNode&&c&&11===c.nodeType&&c.childNodes.length===this.length?{fragment:c}:x.buildFragment(a,this,k);f=c.fragment;if(g=1===f.childNodes.length?f=f.firstChild:f.firstChild){d=d&&x.nodeName(g,"tr");for(var q=0,v=this.length,m=v-1;q<v;q++)b.call(d?e(this[q],g):this[q],c.cacheable||1<v&&q<m?x.clone(f,!0,!0):f)}k.length&&x.each(k,function(a,
d){d.src?x.ajax({type:"GET",global:!1,url:d.src,async:!1,dataType:"script"}):x.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wa,"/*$0*/"));d.parentNode&&d.parentNode.removeChild(d)})}return this}});x.buildFragment=function(a,d,b){var c,e,g,f,n=a[0];d&&d[0]&&(f=d[0].ownerDocument||d[0]);f.createDocumentFragment||(f=I);1===a.length&&"string"===typeof n&&512>n.length&&f===I&&"<"===n.charAt(0)&&!(ub.test(n)||!x.support.checkClone&&Na.test(n)||!x.support.html5Clone&&ia.test(n))&&(e=!0,(g=
x.fragments[n])&&1!==g&&(c=g));c||(c=f.createDocumentFragment(),x.clean(a,f,c,b));e&&(x.fragments[n]=g?c:1);return{fragment:c,cacheable:e}};x.fragments={};x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){x.fn[a]=function(b){var c=[];b=x(b);var e=1===this.length&&this[0].parentNode;if(e&&11===e.nodeType&&1===e.childNodes.length&&1===b.length)return b[d](this[0]),this;for(var e=0,g=b.length;e<g;e++){var f=(0<e?this.clone(!0):
this).get();x(b[e])[d](f);c=c.concat(f)}return this.pushStack(c,a,b.selector)}});x.extend({clone:function(d,b,c){var e,f,n;x.support.html5Clone||x.isXMLDoc(d)||!ia.test("<"+d.nodeName+">")?e=d.cloneNode(!0):(e=I.createElement("div"),ac.appendChild(e),e.innerHTML=d.outerHTML,e=e.firstChild);var k=e;if(!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(q(d,k),e=a(d),f=a(k),n=0;e[n];++n)f[n]&&q(e[n],f[n]);if(b&&(g(d,k),c))for(e=a(d),f=a(k),n=0;e[n];++n)g(e[n],
f[n]);return k},clean:function(a,d,b,e){var g,f=[];d=d||I;"undefined"===typeof d.createElement&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||I);for(var k=0,q;null!=(q=a[k]);k++)if("number"===typeof q&&(q+=""),q){if("string"===typeof q)if($a.test(q)){q=q.replace(Ga,"<$1></$2>");g=(na.exec(q)||["",""])[1].toLowerCase();var v=Ta[g]||Ta._default,m=v[0],l=d.createElement("div"),y=ac.childNodes;d===I?ac.appendChild(l):c(d).appendChild(l);for(l.innerHTML=v[1]+q+v[2];m--;)l=l.lastChild;if(!x.support.tbody)for(m=
Ca.test(q),v="table"!==g||m?"<table>"!==v[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,g=v.length-1;0<=g;--g)x.nodeName(v[g],"tbody")&&!v[g].childNodes.length&&v[g].parentNode.removeChild(v[g]);!x.support.leadingWhitespace&&R.test(q)&&l.insertBefore(d.createTextNode(R.exec(q)[0]),l.firstChild);q=l.childNodes;l&&(l.parentNode.removeChild(l),0<y.length&&(l=y[y.length-1])&&l.parentNode&&l.parentNode.removeChild(l))}else q=d.createTextNode(q);var A;if(!x.support.appendChecked)if(q[0]&&
"number"===typeof(A=q.length))for(g=0;g<A;g++)n(q[g]);else n(q);q.nodeType?f.push(q):f=x.merge(f,q)}if(b)for(a=function(a){return!a.type||ib.test(a.type)},k=0;f[k];k++)d=f[k],e&&x.nodeName(d,"script")&&(!d.type||ib.test(d.type))?e.push(d.parentNode?d.parentNode.removeChild(d):d):(1===d.nodeType&&(q=x.grep(d.getElementsByTagName("script"),a),f.splice.apply(f,[k+1,0].concat(q))),b.appendChild(d));return f},cleanData:function(a){for(var d,b,c=x.cache,e=x.event.special,g=x.support.deleteExpando,f=0,n;null!=
(n=a[f]);f++)if(!n.nodeName||!x.noData[n.nodeName.toLowerCase()])if(b=n[x.expando]){if((d=c[b])&&d.events){for(var k in d.events)e[k]?x.event.remove(n,k):x.removeEvent(n,k,d.handle);d.handle&&(d.handle.elem=null)}g?delete n[x.expando]:n.removeAttribute&&n.removeAttribute(x.expando);delete c[b]}}});var Sa=/alpha\([^)]*\)/i,ab=/opacity=([^)]*)/,Ea=/([A-Z]|^ms)/g,jb=/^[\-+]?(?:\d*\.)?\d+$/i,Ya=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,lb=/^([\-+])=([\-+.\de]+)/,vb=/^margin/,Rb={position:"absolute",visibility:"hidden",
display:"block"},Db=["Top","Right","Bottom","Left"],mb,Oa,Sc;x.fn.css=function(a,d){return x.access(this,function(a,d,b){return b!==u?x.style(a,d,b):x.css(a,d)},a,d,1<arguments.length)};x.extend({cssHooks:{opacity:{get:function(a,d){if(d){var b=mb(a,"opacity");return""===b?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,d,b,c){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var e,g=x.camelCase(d),f=a.style,n=x.cssHooks[g];d=x.cssProps[g]||g;if(b!==u){if(c=typeof b,"string"===c&&(e=lb.exec(b))&&(b=+(e[1]+1)*+e[2]+parseFloat(x.css(a,d)),c="number"),!(null==b||"number"===c&&isNaN(b)||("number"!==c||x.cssNumber[g]||(b+="px"),n&&"set"in n&&(b=n.set(a,b))===u)))try{f[d]=b}catch(k){}}else return n&&"get"in n&&(e=n.get(a,!1,c))!==u?e:f[d]}},css:function(a,d,b){var c,e;d=x.camelCase(d);e=x.cssHooks[d];d=x.cssProps[d]||d;"cssFloat"===d&&
(d="float");if(e&&"get"in e&&(c=e.get(a,!0,b))!==u)return c;if(mb)return mb(a,d)},swap:function(a,d,b){var c={},e;for(e in d)c[e]=a.style[e],a.style[e]=d[e];b=b.call(a);for(e in d)a.style[e]=c[e];return b}});x.curCSS=x.css;I.defaultView&&I.defaultView.getComputedStyle&&(Oa=function(a,d){var b,c,e,g=a.style;d=d.replace(Ea,"-$1").toLowerCase();(c=a.ownerDocument.defaultView)&&(e=c.getComputedStyle(a,null))&&(b=e.getPropertyValue(d),""!==b||x.contains(a.ownerDocument.documentElement,a)||(b=x.style(a,
d)));!x.support.pixelMargin&&e&&vb.test(d)&&Ya.test(b)&&(c=g.width,g.width=b,b=e.width,g.width=c);return b});I.documentElement.currentStyle&&(Sc=function(a,d){var b,c,e=a.currentStyle&&a.currentStyle[d],g=a.style;null==e&&g&&(b=g[d])&&(e=b);if(Ya.test(e)){b=g.left;if(c=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;g.left="fontSize"===d?"1em":e;e=g.pixelLeft+"px";g.left=b;c&&(a.runtimeStyle.left=c)}return""===e?"auto":e});mb=Oa||Sc;x.each(["height","width"],function(a,
d){x.cssHooks[d]={get:function(a,b,c){if(b)return 0!==a.offsetWidth?v(a,d,c):x.swap(a,Rb,function(){return v(a,d,c)})},set:function(a,d){return jb.test(d)?d+"px":d}}});x.support.opacity||(x.cssHooks.opacity={get:function(a,d){return ab.test((d&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":d?"1":""},set:function(a,d){var b=a.style,c=a.currentStyle,e=x.isNumeric(d)?"alpha(opacity="+100*d+")":"",g=c&&c.filter||b.filter||"";b.zoom=1;if(1<=d&&""===x.trim(g.replace(Sa,
""))&&(b.removeAttribute("filter"),c&&!c.filter))return;b.filter=Sa.test(g)?g.replace(Sa,e):g+" "+e}});x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(a,d){return x.swap(a,{display:"inline-block"},function(){return d?mb(a,"margin-right"):a.style.marginRight})}})});x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(a){var d=a.offsetHeight;return 0===a.offsetWidth&&0===d||!x.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||x.css(a,"display"))},
x.expr.filters.visible=function(a){return!x.expr.filters.hidden(a)});x.each({margin:"",padding:"",border:"Width"},function(a,d){x.cssHooks[a+d]={expand:function(b){var c="string"===typeof b?b.split(" "):[b],e={};for(b=0;4>b;b++)e[a+Db[b]+d]=c[b]||c[b-2]||c[0];return e}}});var Eb=/%20/g,ga=/\[\]$/,Da=/\r?\n/g,Ja=/#.*$/,yb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Cb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ja=/^(?:GET|HEAD)$/,Qb=/^\/\//,
Bb=/\?/,Ua=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bb=/^(?:select|textarea)/i,db=/\s+/,Jb=/([?&])_=[^&]*/,Sb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Ka=x.fn.load,Fb={},Va={},ob,qb,rb=["*/"]+["*"];try{ob=N.href}catch(zc){ob=I.createElement("a"),ob.href="",ob=ob.href}qb=Sb.exec(ob.toLowerCase())||[];x.fn.extend({load:function(a,d,b){if("string"!==typeof a&&Ka)return Ka.apply(this,arguments);if(!this.length)return this;var c=a.indexOf(" ");if(0<=c){var e=a.slice(c,a.length);a=
a.slice(0,c)}c="GET";d&&(x.isFunction(d)?(b=d,d=u):"object"===typeof d&&(d=x.param(d,x.ajaxSettings.traditional),c="POST"));var g=this;x.ajax({url:a,type:c,dataType:"html",data:d,complete:function(a,d,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),g.html(e?x("<div>").append(c.replace(Ua,"")).find(e):c));b&&g.each(b,[c,d,a])}});return this},serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?x.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bb.test(this.nodeName)||Cb.test(this.type))}).map(function(a,d){var b=x(this).val();return null==b?null:x.isArray(b)?x.map(b,function(a,b){return{name:d.name,value:a.replace(Da,"\r\n")}}):{name:d.name,value:b.replace(Da,"\r\n")}}).get()}});x.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){x.fn[d]=function(a){return this.on(d,a)}});x.each(["get","post"],function(a,d){x[d]=function(a,
b,c,e){x.isFunction(b)&&(e=e||c,c=b,b=u);return x.ajax({type:d,url:a,data:b,success:c,dataType:e})}});x.extend({getScript:function(a,d){return x.get(a,u,d,"script")},getJSON:function(a,d,b){return x.get(a,d,b,"json")},ajaxSetup:function(a,d){d?z(a,x.ajaxSettings):(d=a,a=x.ajaxSettings);z(a,d);return a},ajaxSettings:{url:ob,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(qb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":rb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":r.String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Fb),ajaxTransport:y(Va),ajax:function(a,d){function b(a,d,v,m){if(2!==C){C=2;p&&clearTimeout(p);z=u;l=m||"";H.readyState=0<a?4:
0;var y,A,B;m=d;if(v){var D=c,L=H,r=D.contents,T=D.dataTypes,t=D.responseFields,I,s,Gb,N;for(s in t)s in v&&(L[t[s]]=v[s]);for(;"*"===T[0];)T.shift(),I===u&&(I=D.mimeType||L.getResponseHeader("content-type"));if(I)for(s in r)if(r[s]&&r[s].test(I)){T.unshift(s);break}if(T[0]in v)Gb=T[0];else{for(s in v){if(!T[0]||D.converters[s+" "+T[0]]){Gb=s;break}N||(N=s)}Gb=Gb||N}Gb?(Gb!==T[0]&&T.unshift(Gb),v=v[Gb]):v=void 0}else v=u;if(200<=a&&300>a||304===a){if(c.ifModified){if(I=H.getResponseHeader("Last-Modified"))x.lastModified[q]=
I;if(I=H.getResponseHeader("Etag"))x.etag[q]=I}if(304===a)m="notmodified",y=!0;else try{I=c;I.dataFilter&&(v=I.dataFilter(v,I.dataType));var Z=I.dataTypes;s={};var ua,S,Yd=Z.length,G,K=Z[0],oc,za,Q,fa,eb;for(ua=1;ua<Yd;ua++){if(1===ua)for(S in I.converters)"string"===typeof S&&(s[S.toLowerCase()]=I.converters[S]);oc=K;K=Z[ua];if("*"===K)K=oc;else if("*"!==oc&&oc!==K){za=oc+" "+K;Q=s[za]||s["* "+K];if(!Q)for(fa in eb=u,s)if(G=fa.split(" "),G[0]===oc||"*"===G[0])if(eb=s[G[1]+" "+K]){fa=s[fa];!0===fa?
Q=eb:!0===eb&&(Q=fa);break}Q||eb||x.error("No conversion from "+za.replace(" "," to "));!0!==Q&&(v=Q?Q(v):eb(fa(v)))}}A=v;m="success";y=!0}catch(ha){m="parsererror",B=ha}}else if(B=m,!m||a)m="error",0>a&&(a=0);H.status=a;H.statusText=""+(d||m);y?f.resolveWith(e,[A,m,H]):f.rejectWith(e,[H,m,B]);H.statusCode(k);k=u;E&&g.trigger("ajax"+(y?"Success":"Error"),[H,c,y?A:B]);n.fireWith(e,[H,m]);E&&(g.trigger("ajaxComplete",[H,c]),--x.active||x.event.trigger("ajaxStop"))}}"object"===typeof a&&(d=a,a=u);d=
d||{};var c=x.ajaxSetup({},d),e=c.context||c,g=e!==c&&(e.nodeType||e instanceof x)?x(e):x.event,f=x.Deferred(),n=x.Callbacks("once memory"),k=c.statusCode||{},q,v={},m={},l,y,z,p,B,C=0,E,D,H={readyState:0,setRequestHeader:function(a,d){if(!C){var b=a.toLowerCase();a=m[b]=m[b]||a;v[a]=d}return this},getAllResponseHeaders:function(){return 2===C?l:null},getResponseHeader:function(a){var d;if(2===C){if(!y)for(y={};d=yb.exec(l);)y[d[1].toLowerCase()]=d[2];d=y[a.toLowerCase()]}return d===u?null:d},overrideMimeType:function(a){C||
(c.mimeType=a);return this},abort:function(a){a=a||"abort";z&&z.abort(a);b(0,a);return this}};f.promise(H);H.success=H.done;H.error=H.fail;H.complete=n.add;H.statusCode=function(a){if(a){var d;if(2>C)for(d in a)k[d]=[k[d],a[d]];else d=a[H.status],H.then(d,d)}return this};c.url=((a||c.url)+"").replace(Ja,"").replace(Qb,qb[1]+"//");c.dataTypes=x.trim(c.dataType||"*").toLowerCase().split(db);null==c.crossDomain&&(B=Sb.exec(c.url.toLowerCase()),c.crossDomain=!(!B||B[1]==qb[1]&&B[2]==qb[2]&&(B[3]||("http:"===
B[1]?80:443))==(qb[3]||("http:"===qb[1]?80:443))));c.data&&c.processData&&"string"!==typeof c.data&&(c.data=x.param(c.data,c.traditional));A(Fb,c,d,H);if(2===C)return!1;E=c.global;c.type=c.type.toUpperCase();c.hasContent=!ja.test(c.type);E&&0===x.active++&&x.event.trigger("ajaxStart");if(!c.hasContent&&(c.data&&(c.url+=(Bb.test(c.url)?"&":"?")+c.data,delete c.data),q=c.url,!1===c.cache)){B=x.now();var L=c.url.replace(Jb,"$1_="+B);c.url=L+(L===c.url?(Bb.test(c.url)?"&":"?")+"_="+B:"")}(c.data&&c.hasContent&&
!1!==c.contentType||d.contentType)&&H.setRequestHeader("Content-Type",c.contentType);c.ifModified&&(q=q||c.url,x.lastModified[q]&&H.setRequestHeader("If-Modified-Since",x.lastModified[q]),x.etag[q]&&H.setRequestHeader("If-None-Match",x.etag[q]));H.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+rb+"; q=0.01":""):c.accepts["*"]);for(D in c.headers)H.setRequestHeader(D,c.headers[D]);if(c.beforeSend&&(!1===c.beforeSend.call(e,H,
c)||2===C))return H.abort(),!1;for(D in{success:1,error:1,complete:1})H[D](c[D]);if(z=A(Va,c,d,H)){H.readyState=1;E&&g.trigger("ajaxSend",[H,c]);c.async&&0<c.timeout&&(p=setTimeout(function(){H.abort("timeout")},c.timeout));try{C=1,z.send(v,b)}catch(r){if(2>C)b(-1,r);else throw r;}}else b(-1,"No Transport");return H},param:function(a,d){var b=[],c=function(a,d){d=x.isFunction(d)?d():d;b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(d)};d===u&&(d=x.ajaxSettings.traditional);if(x.isArray(a)||
a.jquery&&!x.isPlainObject(a))x.each(a,function(){c(this.name,this.value)});else for(var e in a)B(e,a[e],d,c);return b.join("&").replace(Eb,"+")}});x.extend({active:0,lastModified:{},etag:{}});var eb=x.now(),Xa=/(\=)\?(&|$)|\?\?/i;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return x.expando+"_"+eb++}});x.ajaxPrefilter("json jsonp",function(a,d,b){d="string"===typeof a.data&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if("jsonp"===a.dataTypes[0]||!1!==a.jsonp&&(Xa.test(a.url)||
d&&Xa.test(a.data))){var c,e=a.jsonpCallback=x.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g=r[e],f=a.url,n=a.data,k="$1"+e+"$2";!1!==a.jsonp&&(f=f.replace(Xa,k),a.url===f&&(d&&(n=n.replace(Xa,k)),a.data===n&&(f+=(/\?/.test(f)?"&":"?")+a.jsonp+"="+e)));a.url=f;a.data=n;r[e]=function(a){c=[a]};b.always(function(){r[e]=g;if(c&&x.isFunction(g))r[e](c[0])});a.converters["script json"]=function(){c||x.error(e+" was not called");return c[0]};a.dataTypes[0]="json";return"script"}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){x.globalEval(a);return a}}});x.ajaxPrefilter("script",function(a){a.cache===u&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});x.ajaxTransport("script",function(a){if(a.crossDomain){var d,b=I.head||I.getElementsByTagName("head")[0]||I.documentElement;return{send:function(c,e){d=I.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(a,
c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,b&&d.parentNode&&b.removeChild(d),d=u,c||e(200,"success")};b.insertBefore(d,b.firstChild)},abort:function(){if(d)d.onload(0,1)}}}});var ra=r.ActiveXObject?function(){for(var a in gc)gc[a](0,1)}:!1,fc=0,gc;x.ajaxSettings.xhr=r.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&C()))a:{try{a=new r.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}a=void 0}return a}:C;(function(a){x.extend(x.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(x.ajaxSettings.xhr());x.support.ajax&&x.ajaxTransport(function(a){if(!a.crossDomain||x.support.cors){var d;return{send:function(b,c){var e=a.xhr(),g,f;a.username?e.open(a.type,a.url,a.async,a.username,a.password):e.open(a.type,a.url,a.async);if(a.xhrFields)for(f in a.xhrFields)e[f]=a.xhrFields[f];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||b["X-Requested-With"]||(b["X-Requested-With"]="XMLHttpRequest");try{for(f in b)e.setRequestHeader(f,
b[f])}catch(n){}e.send(a.hasContent&&a.data||null);d=function(b,f){var n,k,q,v,m;try{if(d&&(f||4===e.readyState))if(d=u,g&&(e.onreadystatechange=x.noop,ra&&delete gc[g]),f)4!==e.readyState&&e.abort();else{n=e.status;q=e.getAllResponseHeaders();v={};(m=e.responseXML)&&m.documentElement&&(v.xml=m);try{v.text=e.responseText}catch(l){}try{k=e.statusText}catch(y){k=""}n||!a.isLocal||a.crossDomain?1223===n&&(n=204):n=v.text?200:404}}catch(A){f||c(-1,A)}v&&c(n,k,v,q)};a.async&&4!==e.readyState?(g=++fc,ra&&
(gc||(gc={},x(r).unload(ra)),gc[g]=d),e.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Tb={},wb,Ub,ed=/^(?:toggle|show|hide)$/,bc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xb,fb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Y;x.fn.extend({show:function(a,d,b){if(a||0===a)return this.animate(H("show",3),a,d,b);b=0;for(var c=this.length;b<c;b++)a=this[b],a.style&&(d=a.style.display,x._data(a,
"olddisplay")||"none"!==d||(d=a.style.display=""),(""===d&&"none"===x.css(a,"display")||!x.contains(a.ownerDocument.documentElement,a))&&x._data(a,"olddisplay",L(a.nodeName)));for(b=0;b<c;b++)if(a=this[b],a.style&&(d=a.style.display,""===d||"none"===d))a.style.display=x._data(a,"olddisplay")||"";return this},hide:function(a,d,b){if(a||0===a)return this.animate(H("hide",3),a,d,b);b=0;for(var c=this.length;b<c;b++)a=this[b],a.style&&(d=x.css(a,"display"),"none"===d||x._data(a,"olddisplay")||x._data(a,
"olddisplay",d));for(b=0;b<c;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:x.fn.toggle,toggle:function(a,d,b){var c="boolean"===typeof a;x.isFunction(a)&&x.isFunction(d)?this._toggle.apply(this,arguments):null==a||c?this.each(function(){var d=c?a:x(this).is(":hidden");x(this)[d?"show":"hide"]()}):this.animate(H("toggle",3),a,d,b);return this},fadeTo:function(a,d,b,c){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,b,c)},animate:function(a,
d,b,c){function e(){!1===g.queue&&x._mark(this);var d=x.extend({},g),b=1===this.nodeType,c=b&&x(this).is(":hidden"),f,n,k,q,v;d.animatedProperties={};for(k in a)if(f=x.camelCase(k),k!==f&&(a[f]=a[k],delete a[k]),(n=x.cssHooks[f])&&"expand"in n)for(k in q=n.expand(a[f]),delete a[f],q)k in a||(a[k]=q[k]);for(f in a){n=a[f];x.isArray(n)?(d.animatedProperties[f]=n[1],n=a[f]=n[0]):d.animatedProperties[f]=d.specialEasing&&d.specialEasing[f]||d.easing||"swing";if("hide"===n&&c||"show"===n&&!c)return d.complete.call(this);
!b||"height"!==f&&"width"!==f||(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===x.css(this,"display")&&"none"===x.css(this,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==L(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(k in a)if(b=new x.fx(this,d,k),n=a[k],ed.test(n))if(f=x._data(this,"toggle"+k)||("toggle"===n?c?"show":"hide":0))x._data(this,"toggle"+k,"show"===f?"hide":"show"),
b[f]();else b[n]();else f=bc.exec(n),q=b.cur(),f?(n=parseFloat(f[2]),v=f[3]||(x.cssNumber[k]?"":"px"),"px"!==v&&(x.style(this,k,(n||1)+v),q*=(n||1)/b.cur(),x.style(this,k,q+v)),f[1]&&(n=("-="===f[1]?-1:1)*n+q),b.custom(q,n,v)):b.custom(q,n,"");return!0}var g=x.speed(d,b,c);if(x.isEmptyObject(a))return this.each(g.complete,[!1]);a=x.extend({},a);return!1===g.queue?this.each(e):this.queue(g.queue,e)},stop:function(a,d,b){"string"!==typeof a&&(b=d,d=a,a=u);d&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var d,
c=!1,e=x.timers,g=x._data(this);b||x._unmark(!0,this);if(null==a)for(d in g){if(g[d]&&g[d].stop&&d.indexOf(".run")===d.length-4){var f=g[d];x.removeData(this,d,!0);f.stop(b)}}else g[d=a+".run"]&&g[d].stop&&(g=g[d],x.removeData(this,d,!0),g.stop(b));for(d=e.length;d--;)if(e[d].elem===this&&(null==a||e[d].queue===a)){if(b)e[d](!0);else e[d].saveState();c=!0;e.splice(d,1)}b&&c||x.dequeue(this,a)})}});x.each({slideDown:H("show",1),slideUp:H("hide",1),slideToggle:H("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,d){x.fn[a]=function(a,b,c){return this.animate(d,a,b,c)}});x.extend({speed:function(a,d,b){var c=a&&"object"===typeof a?x.extend({},a):{complete:b||!b&&d||x.isFunction(a)&&a,duration:a,easing:b&&d||d&&!x.isFunction(d)&&d};c.duration=x.fx.off?0:"number"===typeof c.duration?c.duration:c.duration in x.fx.speeds?x.fx.speeds[c.duration]:x.fx.speeds._default;if(null==c.queue||!0===c.queue)c.queue="fx";c.old=c.complete;c.complete=function(a){x.isFunction(c.old)&&
c.old.call(this);c.queue?x.dequeue(this,c.queue):!1!==a&&x._unmark(this)};return c},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,d,b){this.options=d;this.elem=a;this.prop=b;d.orig=d.orig||{}}});x.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(x.fx.step[this.prop]||x.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,d=x.css(this.elem,this.prop);return isNaN(a=parseFloat(d))?d&&"auto"!==d?d:0:a},custom:function(a,d,b){function c(a){return e.step(a)}var e=this,g=x.fx;this.startTime=Y||E();this.end=d;this.now=this.start=a;this.pos=this.state=0;this.unit=b||this.unit||(x.cssNumber[this.prop]?"":"px");c.queue=this.options.queue;c.elem=this.elem;c.saveState=function(){x._data(e.elem,"fxshow"+e.prop)===u&&(e.options.hide?x._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&x._data(e.elem,"fxshow"+e.prop,e.end))};
c()&&x.timers.push(c)&&!xb&&(xb=setInterval(g.tick,g.interval))},show:function(){var a=x._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||x.style(this.elem,this.prop);this.options.show=!0;a!==u?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());x(this.elem).show()},hide:function(){this.options.orig[this.prop]=x._data(this.elem,"fxshow"+this.prop)||x.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var d,
b=Y||E(),c=!0,e=this.elem,g=this.options;if(a||b>=g.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();g.animatedProperties[this.prop]=!0;for(d in g.animatedProperties)!0!==g.animatedProperties[d]&&(c=!1);if(c){null==g.overflow||x.support.shrinkWrapBlocks||x.each(["","X","Y"],function(a,d){e.style["overflow"+d]=g.overflow[a]});g.hide&&x(e).hide();if(g.hide||g.show)for(d in g.animatedProperties)x.style(e,d,g.orig[d]),x.removeData(e,"fxshow"+d,!0),x.removeData(e,"toggle"+
d,!0);if(a=g.complete)g.complete=!1,a.call(e)}return!1}Infinity==g.duration?this.now=b:(a=b-this.startTime,this.state=a/g.duration,this.pos=x.easing[g.animatedProperties[this.prop]](this.state,a,0,1,g.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};x.extend(x.fx,{tick:function(){for(var a,d=x.timers,b=0;b<d.length;b++)a=d[b],a()||d[b]!==a||d.splice(b--,1);d.length||x.fx.stop()},interval:13,stop:function(){clearInterval(xb);xb=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){x.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});x.each(fb.concat.apply([],fb),function(a,d){d.indexOf("margin")&&(x.fx.step[d]=function(a){x.style(a.elem,d,Math.max(0,a.now)+a.unit)})});x.expr&&x.expr.filters&&(x.expr.filters.animated=function(a){return x.grep(x.timers,function(d){return a===d.elem}).length});var lc,mc=/^t(?:able|d|h)$/i,Kb=/^(?:body|html)$/i;
lc="getBoundingClientRect"in I.documentElement?function(a,d,b,c){try{c=a.getBoundingClientRect()}catch(e){}if(!c||!x.contains(b,a))return c?{top:c.top,left:c.left}:{top:0,left:0};a=d.body;d=T(d);return{top:c.top+(d.pageYOffset||x.support.boxModel&&b.scrollTop||a.scrollTop)-(b.clientTop||a.clientTop||0),left:c.left+(d.pageXOffset||x.support.boxModel&&b.scrollLeft||a.scrollLeft)-(b.clientLeft||a.clientLeft||0)}}:function(a,d,b){var c,e=a.offsetParent,g=d.body;c=(d=d.defaultView)?d.getComputedStyle(a,
null):a.currentStyle;for(var f=a.offsetTop,n=a.offsetLeft;(a=a.parentNode)&&a!==g&&a!==b&&(!x.support.fixedPosition||"fixed"!==c.position);)c=d?d.getComputedStyle(a,null):a.currentStyle,f-=a.scrollTop,n-=a.scrollLeft,a===e&&(f+=a.offsetTop,n+=a.offsetLeft,!x.support.doesNotAddBorder||x.support.doesAddBorderForTableAndCells&&mc.test(a.nodeName)||(f+=parseFloat(c.borderTopWidth)||0,n+=parseFloat(c.borderLeftWidth)||0),e=a.offsetParent),x.support.subtractsBorderForOverflowNotVisible&&"visible"!==c.overflow&&
(f+=parseFloat(c.borderTopWidth)||0,n+=parseFloat(c.borderLeftWidth)||0);if("relative"===c.position||"static"===c.position)f+=g.offsetTop,n+=g.offsetLeft;x.support.fixedPosition&&"fixed"===c.position&&(f+=Math.max(b.scrollTop,g.scrollTop),n+=Math.max(b.scrollLeft,g.scrollLeft));return{top:f,left:n}};x.fn.offset=function(a){if(arguments.length)return a===u?this:this.each(function(d){x.offset.setOffset(this,a,d)});var d=this[0],b=d&&d.ownerDocument;return b?d===b.body?x.offset.bodyOffset(d):lc(d,b,
b.documentElement):null};x.offset={bodyOffset:function(a){var d=a.offsetTop,b=a.offsetLeft;x.support.doesNotIncludeMarginInBodyOffset&&(d+=parseFloat(x.css(a,"marginTop"))||0,b+=parseFloat(x.css(a,"marginLeft"))||0);return{top:d,left:b}},setOffset:function(a,d,b){var c=x.css(a,"position");"static"===c&&(a.style.position="relative");var e=x(a),g=e.offset(),f=x.css(a,"top"),n=x.css(a,"left"),k={},q={};("absolute"===c||"fixed"===c)&&-1<x.inArray("auto",[f,n])?(q=e.position(),c=q.top,n=q.left):(c=parseFloat(f)||
0,n=parseFloat(n)||0);x.isFunction(d)&&(d=d.call(a,b,g));null!=d.top&&(k.top=d.top-g.top+c);null!=d.left&&(k.left=d.left-g.left+n);"using"in d?d.using.call(a,k):e.css(k)}};x.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),b=this.offset(),c=Kb.test(d[0].nodeName)?{top:0,left:0}:d.offset();b.top-=parseFloat(x.css(a,"marginTop"))||0;b.left-=parseFloat(x.css(a,"marginLeft"))||0;c.top+=parseFloat(x.css(d[0],"borderTopWidth"))||0;c.left+=parseFloat(x.css(d[0],
"borderLeftWidth"))||0;return{top:b.top-c.top,left:b.left-c.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||I.body;a&&!Kb.test(a.nodeName)&&"static"===x.css(a,"position");)a=a.offsetParent;return a})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var b=/Y/.test(d);x.fn[a]=function(c){return x.access(this,function(a,c,e){var g=T(a);if(e===u)return g?d in g?g[d]:x.support.boxModel&&g.document.documentElement[c]||g.document.body[c]:a[c];
g?g.scrollTo(b?x(g).scrollLeft():e,b?e:x(g).scrollTop()):a[c]=e},a,c,arguments.length,null)}});x.each({Height:"height",Width:"width"},function(a,d){var b="client"+a,c="scroll"+a,e="offset"+a;x.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(x.css(a,d,"padding")):this[d]():null};x.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(x.css(b,d,a?"margin":"border")):this[d]():null};x.fn[d]=function(a){return x.access(this,function(a,d,g){if(x.isWindow(a))return d=a.document,
a=d.documentElement[b],x.support.boxModel&&a||d.body&&d.body[b]||a;if(9===a.nodeType)return d=a.documentElement,d[b]>=d[c]?d[b]:Math.max(a.body[c],d[c],a.body[e],d[e]);if(g===u)return a=x.css(a,d),d=parseFloat(a),x.isNumeric(d)?d:a;x(a).css(d,g)},d,a,arguments.length,null)}});r.jQuery=r.$=x;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return x});x.support.getSetAttribute||(x.removeAttr=function(a,d){"class"===d&&(d="className");a.removeAttribute(d)})})(window);/*
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2011, Tim Down
 Licensed under the MIT license.
 Version: 1.2.1
 Build date: 8 October 2011
 2011 Benjamin Arthur Lupton {@link http://balupton.com}
 @license MIT License {@link http://creativecommons.org/licenses/MIT/}
 @return {String} outerHtml
 RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/
(function(){function r(l,b){var p;p=l||{};this.jQuery=b||{};this.config={};this.config.elements=p.elements?p.elements:[];this.config.attributes=p.attributes?p.attributes:{};this.config.attributes[r.ALL]=this.config.attributes[r.ALL]?this.config.attributes[r.ALL]:[];this.config.allow_comments=p.allow_comments?p.allow_comments:!1;this.allowed_elements={};this.config.protocols=p.protocols?p.protocols:{};this.config.add_attributes=p.add_attributes?p.add_attributes:{};this.dom=p.dom?p.dom:document;for(var m=
0,k=this.config.elements.length;m<k;m++)this.allowed_elements[this.config.elements[m]]=!0;this.config.remove_element_contents={};this.config.remove_all_contents=!1;if(p.remove_contents)if(p.remove_contents instanceof Array)for(var f=this.config.remove_element_contents,m=0,k=p.remove_contents.length;m<k;m++)f[p.remove_contents[m]]=!0;else this.config.remove_all_contents=!0;this.transformers=p.transformers?p.transformers:[];this.filters=p.filters?p.filters:[]}function u(){this.Diff_Timeout=1;this.Diff_EditCost=
4;this.Match_Threshold=0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}function s(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0}var t;t||(t={});(function(){function l(b){return 10>b?"0"+b:b}function b(b){k.lastIndex=0;return k.test(b)?'"'+b.replace(k,function(a){var d=e[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function p(e,a){var d,n,k,m,l=f,z,B=a[e];B&&"object"===
typeof B&&"function"===typeof B.toJSON&&(B=B.toJSON(e));"function"===typeof g&&(B=g.call(a,e,B));switch(typeof B){case "string":return b(B);case "number":return isFinite(B)?String(B):"null";case "boolean":case "null":return String(B);case "object":if(!B)return"null";f+=c;z=[];if("[object Array]"===Object.prototype.toString.apply(B)){m=B.length;for(d=0;d<m;d+=1)z[d]=p(d,B)||"null";k=0===z.length?"[]":f?"[\n"+f+z.join(",\n"+f)+"\n"+l+"]":"["+z.join(",")+"]";f=l;return k}if(g&&"object"===typeof g)for(m=
g.length,d=0;d<m;d+=1)"string"===typeof g[d]&&(n=g[d],(k=p(n,B))&&z.push(b(n)+(f?": ":":")+k));else for(n in B)Object.prototype.hasOwnProperty.call(B,n)&&(k=p(n,B))&&z.push(b(n)+(f?": ":":")+k);k=0===z.length?"{}":f?"{\n"+f+z.join(",\n"+f)+"\n"+l+"}":"{"+z.join(",")+"}";f=l;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+
":"+l(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,c,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;"function"!==typeof t.stringify&&
(t.stringify=function(b,a,d){var e;c=f="";if("number"===typeof d)for(e=0;e<d;e+=1)c+=" ";else"string"===typeof d&&(c=d);if((g=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return p("",{"":b})});"function"!==typeof t.parse&&(t.parse=function(b,a){function d(b,c){var e,g,f=b[c];if(f&&"object"===typeof f)for(e in f)Object.prototype.hasOwnProperty.call(f,e)&&(g=d(f,e),void 0!==g?f[e]=g:delete f[e]);return a.call(b,c,f)}var c;b=String(b);m.lastIndex=
0;m.test(b)&&(b=b.replace(m,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+b+")"),"function"===typeof a?d({"":c},""):c;throw new SyntaxError("JSON.parse");})})();define("util/json2",[],function(){return t});(function(){var l=function(){function b(d,b){var c=typeof d[b];
return c==a||!(c!=q||!d[b])||"unknown"==c}function l(a,d){return!(typeof a[d]!=q||!a[d])}function m(a,b){return typeof a[b]!=d}function k(a){return function(d,b){for(var c=b.length;c--;)if(!a(d,b[c]))return!1;return!0}}function f(a){return a&&z(a,A)&&C(a,y)}function c(a){window.alert("Rangy not supported in your browser. Reason: "+a);E.initialized=!0;E.supported=!1}function e(){if(!E.initialized){var a,d=!1,e=!1;b(document,"createRange")&&(a=document.createRange(),z(a,v)&&C(a,n)&&(d=!0),a.detach());
(a=l(document,"body")?document.body:document.getElementsByTagName("body")[0])&&b(a,"createTextRange")&&(a=a.createTextRange(),f(a)&&(e=!0));d||e||c("Neither Range nor TextRange are implemented");E.initialized=!0;E.features={implementsDomRange:d,implementsTextRange:e};d=H.concat(D);e=0;for(a=d.length;e<a;++e)try{d[e](E)}catch(g){l(window,"console")&&b(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",g)}}}function g(a){this.name=a;this.supported=this.initialized=
!1}var q="object",a="function",d="undefined",n="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),v="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),y="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),
A="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),z=k(b),B=k(l),C=k(m),E={version:"1.2.1",initialized:!1,supported:!0,util:{isHostMethod:b,isHostObject:l,isHostProperty:m,areHostMethods:z,areHostObjects:B,areHostProperties:C,isTextRange:f},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};E.fail=c;E.warn=function(a){a="Rangy warning: "+a;E.config.alertOnWarn?window.alert(a):
typeof window.console!=d&&typeof window.console.log!=d&&window.console.log(a)};({}).hasOwnProperty?E.util.extend=function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])}:c("hasOwnProperty not supported");var D=[],H=[];E.init=e;E.addInitListener=function(a){E.initialized?a(E):D.push(a)};var L=[];E.addCreateMissingNativeApiListener=function(a){L.push(a)};E.createMissingNativeApi=function(a){a=a||window;e();for(var d=0,b=L.length;d<b;++d)L[d](a)};g.prototype.fail=function(a){this.initialized=!0;
this.supported=!1;throw Error("Module '"+this.name+"' failed to load: "+a);};g.prototype.warn=function(a){E.warn("Module "+this.name+": "+a)};g.prototype.createError=function(a){return Error("Error in Rangy "+this.name+" module: "+a)};E.createModule=function(a,d){var b=new g(a);E.modules[a]=b;H.push(function(a){d(a,b);b.initialized=!0;b.supported=!0})};E.requireModules=function(a){for(var d=0,b=a.length,c,e;d<b;++d){e=a[d];c=E.modules[e];if(!(c&&c instanceof g))throw Error("Module '"+e+"' not found");
if(!c.supported)throw Error("Module '"+e+"' not supported");}};var r=!1,B=function(a){r||(r=!0,E.initialized||e())};if(typeof window==d)c("No window found");else if(typeof document==d)c("No document found");else return b(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",B,!1),b(window,"addEventListener")?window.addEventListener("load",B,!1):b(window,"attachEvent")?window.attachEvent("onload",B):c("Window does not have required addEventListener or attachEvent method"),E}();
l.createModule("DomUtil",function(b,l){function m(a){for(var d=0;a=a.previousSibling;)d++;return d}function k(a,d){var b=[],c;for(c=a;c;c=c.parentNode)b.push(c);for(c=d;c;c=c.parentNode)if(B(b,c))return c;return null}function f(a,d,b){for(b=b?a:a.parentNode;b;){a=b.parentNode;if(a===d)return b;b=a}return null}function c(a){a=a.nodeType;return 3==a||4==a||8==a}function e(a,d){var b=d.nextSibling,c=d.parentNode;b?c.insertBefore(a,b):c.appendChild(a);return a}function g(a){if(9==a.nodeType)return a;
if(typeof a.ownerDocument!=y)return a.ownerDocument;if(typeof a.document!=y)return a.document;if(a.parentNode)return g(a.parentNode);throw Error("getDocument: no document found for node");}function q(a){if(a)return a.previousSibling?a.previousSibling.nextSibling:a.nextSibling?a.nextSibling.previousSibling:a.parentNode?a.parentNode.firstChild:a}function a(a){return a?c(a)?'"'+a.data+'"':1==a.nodeType?"<"+a.nodeName+(a.id?' id="'+a.id+'"':"")+">["+a.childNodes.length+"]":a.nodeName:"[No node]"}function d(a){this._next=
this.root=a}function n(a,d){this.node=a;this.offset=d}function v(a){this.code=this[a];this.codeName=a;this.message="DOMException: "+this.codeName}var y="undefined",A=b.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||l.fail("document missing a Node creation method");A.isHostMethod(document,"getElementsByTagName")||l.fail("document missing getElementsByTagName method");var z=document.createElement("div");A.areHostMethods(z,["insertBefore","appendChild","cloneNode"])||
l.fail("Incomplete Element implementation");A.isHostProperty(z,"innerHTML")||l.fail("Element is missing innerHTML property");z=document.createTextNode("test");A.areHostMethods(z,["splitText","deleteData","insertData","appendData","cloneNode"])||l.fail("Incomplete Text Node implementation");var B=function(a,d){for(var b=a.length;b--;)if(a[b]===d)return!0;return!1};d.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next,d;if(this._current){d=
a.firstChild;if(!d)for(d=null;a!==this.root&&!(d=a.nextSibling);)a=a.parentNode;this._next=d}return this._current},detach:function(){this._current=this._next=this.root=null}};n.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+a(this.node)+":"+this.offset+")]"}};v.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};v.prototype.toString=
function(){return this.message};b.dom={arrayContains:B,isHtmlNamespace:function(a){var d;return typeof a.namespaceURI==y||null===(d=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==d},parentElement:function(a){a=a.parentNode;return 1==a.nodeType?a:null},getNodeIndex:m,getNodeLength:function(a){var d;return c(a)?a.length:(d=a.childNodes)?d.length:0},getCommonAncestor:k,isAncestorOf:function(a,d,b){for(d=b?d:d.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1},getClosestAncestorIn:f,isCharacterDataNode:c,
insertAfter:e,splitDataNode:function(a,d){var b=a.cloneNode(!1);b.deleteData(0,d);a.deleteData(d,a.length-d);e(b,a);return b},getDocument:g,getWindow:function(a){a=g(a);if(typeof a.defaultView!=y)return a.defaultView;if(typeof a.parentWindow!=y)return a.parentWindow;throw Error("Cannot get a window object for node");},getIframeWindow:function(a){if(typeof a.contentWindow!=y)return a.contentWindow;if(typeof a.contentDocument!=y)return a.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element");
},getIframeDocument:function(a){if(typeof a.contentDocument!=y)return a.contentDocument;if(typeof a.contentWindow!=y)return a.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element");},getBody:function(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var d;d=a.parentNode;)a=d;return a},comparePoints:function(a,d,b,c){a=q(a);b=q(b);var e;if(a==b)return d===c?0:d<c?-1:1;if(e=f(b,a,!0))return d<=m(e)?
-1:1;if(e=f(a,b,!0))return m(e)<c?-1:1;d=k(a,b);a=a===d?d:f(a,d,!0);b=b===d?d:f(b,d,!0);if(a===b)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(d=d.firstChild;d;){if(d===a)return-1;if(d===b)return 1;d=d.nextSibling}throw Error("Should not be here!");},inspectNode:a,fragmentFromNodeChildren:function(a){for(var d=g(a).createDocumentFragment(),b;b=a.firstChild;)d.appendChild(b);return d},createIterator:function(a){return new d(a)},DomPosition:n};b.DOMException=v});
l.createModule("DomRange",function(b,l){function m(a,d){return 3!=a.nodeType&&(J.isAncestorOf(a,d.startContainer,!0)||J.isAncestorOf(a,d.endContainer,!0))}function k(a){return J.getDocument(a.startContainer)}function f(a,d,b){if(d=a._listeners[d])for(var c=0,e=d.length;c<e;++c)d[c].call(a,{target:a,args:b})}function c(a){return new aa(a.parentNode,J.getNodeIndex(a))}function e(a){return new aa(a.parentNode,J.getNodeIndex(a)+1)}function g(a,d,b){var c=11==a.nodeType?a.firstChild:a;J.isCharacterDataNode(d)?
b==d.length?J.insertAfter(a,d):d.parentNode.insertBefore(a,0==b?d:J.splitDataNode(d,b)):b>=d.childNodes.length?d.appendChild(a):d.insertBefore(a,d.childNodes[b]);return c}function q(a){for(var d,b,c=k(a.range).createDocumentFragment();b=a.next();){d=a.isPartiallySelectedSubtree();b=b.cloneNode(!d);d&&(d=a.getSubtreeIterator(),b.appendChild(q(d)),d.detach(!0));if(10==b.nodeType)throw new X("HIERARCHY_REQUEST_ERR");c.appendChild(b)}return c}function a(d,b,c){var e,g;for(c=c||{stop:!1};e=d.next();)if(d.isPartiallySelectedSubtree())if(!1===
b(e)){c.stop=!0;break}else{if(e=d.getSubtreeIterator(),a(e,b,c),e.detach(!0),c.stop)break}else for(e=J.createIterator(e);g=e.next();)if(!1===b(g)){c.stop=!0;return}}function d(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),d(b),b.detach(!0)):a.remove()}function n(a){for(var d,b=k(a.range).createDocumentFragment(),c;d=a.next();){a.isPartiallySelectedSubtree()?(d=d.cloneNode(!1),c=a.getSubtreeIterator(),d.appendChild(n(c)),c.detach(!0)):a.remove();if(10==d.nodeType)throw new X("HIERARCHY_REQUEST_ERR");
b.appendChild(d)}return b}function v(d,b,c){var e=!(!b||!b.length),g,f=!!c;e&&(g=RegExp("^("+b.join("|")+")$"));var n=[];a(new A(d,!1),function(a){e&&!g.test(a.nodeType)||f&&!c(a)||n.push(a)});return n}function y(a){return"["+("undefined"==typeof a.getName?"Range":a.getName())+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function A(a,d){this.range=a;this.clonePartiallySelectedTextNodes=d;if(!a.collapsed){this.sc=a.startContainer;this.so=
a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var b=a.commonAncestorContainer;this.sc===this.ec&&J.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==b||J.isCharacterDataNode(this.sc)?J.getClosestAncestorIn(this.sc,b,!0):this.sc.childNodes[this.so],this._last=this.ec!==b||J.isCharacterDataNode(this.ec)?J.getClosestAncestorIn(this.ec,b,!0):this.ec.childNodes[this.eo-1])}}function z(a){this.code=this[a];
this.codeName=a;this.message="RangeException: "+this.codeName}function B(a,d,b){this.nodes=v(a,d,b);this._next=this.nodes[0];this._position=0}function C(a){return function(d,b){for(var c,e=b?d:d.parentNode;e;){c=e.nodeType;if(J.arrayContains(a,c))return e;e=e.parentNode}return null}}function E(a,d){if(O(a,d))throw new z("INVALID_NODE_TYPE_ERR");}function D(a){if(!a.startContainer)throw new X("INVALID_STATE_ERR");}function H(a,d){if(!J.arrayContains(d,a.nodeType))throw new z("INVALID_NODE_TYPE_ERR");
}function L(a,d){if(0>d||d>(J.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new X("INDEX_SIZE_ERR");}function r(a,d){if(ka(a,!0)!==ka(d,!0))throw new X("WRONG_DOCUMENT_ERR");}function t(a){if(Fa(a,!0))throw new X("NO_MODIFICATION_ALLOWED_ERR");}function s(a,d){if(!a)throw new X(d);}function u(a){return!J.arrayContains(ua,a.nodeType)&&!ka(a,!0)}function x(a,d){return d<=(J.isCharacterDataNode(a)?a.length:a.childNodes.length)}function K(a){D(a);if(u(a.startContainer)||u(a.endContainer)||
!x(a.startContainer,a.startOffset)||!x(a.endContainer,a.endOffset))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")");}function G(){}function Q(a){a.START_TO_START=Ra;a.START_TO_END=Qa;a.END_TO_END=pb;a.END_TO_START=pa;a.NODE_BEFORE=ca;a.NODE_AFTER=Ma;a.NODE_BEFORE_AND_AFTER=cb;a.NODE_INSIDE=ma}function S(a){Q(a);Q(a.prototype)}function ha(d,b){return function(){K(this);var c=this.startContainer,g=this.startOffset,f=this.commonAncestorContainer,n=new A(this,
!0);c!==f&&(c=J.getClosestAncestorIn(c,f,!0),g=e(c),c=g.node,g=g.offset);a(n,t);n.reset();f=d(n);n.detach();b(this,c,g,c,g);return f}}function ba(a,g,f){function k(a,d){return function(b){D(this);H(b,fa);H(oa(b),ua);b=(a?c:e)(b);(d?q:v)(this,b.node,b.offset)}}function q(a,d,b){var c=a.endContainer,e=a.endOffset;if(d!==a.startContainer||b!==this.startOffset){if(oa(d)!=oa(c)||1==J.comparePoints(d,b,c,e))c=d,e=b;g(a,d,b,c,e)}}function v(a,d,b){var c=a.startContainer,e=a.startOffset;if(d!==a.endContainer||
b!==this.endOffset){if(oa(d)!=oa(c)||-1==J.comparePoints(d,b,c,e))c=d,e=b;g(a,c,e,d,b)}}function l(a,d,b){d===a.startContainer&&b===this.startOffset&&d===a.endContainer&&b===this.endOffset||g(a,d,b,d,b)}a.prototype=new G;b.util.extend(a.prototype,{setStart:function(a,d){D(this);E(a,!0);L(a,d);q(this,a,d)},setEnd:function(a,d){D(this);E(a,!0);L(a,d);v(this,a,d)},setStartBefore:k(!0,!0),setStartAfter:k(!1,!0),setEndBefore:k(!0,!1),setEndAfter:k(!1,!1),collapse:function(a){K(this);a?g(this,this.startContainer,
this.startOffset,this.startContainer,this.startOffset):g(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){D(this);E(a,!0);g(this,a,0,a,J.getNodeLength(a))},selectNode:function(a){D(this);E(a,!1);H(a,fa);var d=c(a);a=e(a);g(this,d.node,d.offset,a.node,a.offset)},extractContents:ha(n,g),deleteContents:ha(d,g),canSurroundContents:function(){K(this);t(this.startContainer);t(this.endContainer);var a=new A(this,!0),d=a._first&&m(a._first,this)||a._last&&
m(a._last,this);a.detach();return!d},detach:function(){f(this)},splitBoundaries:function(){K(this);var a=this.startContainer,d=this.startOffset,b=this.endContainer,c=this.endOffset,e=a===b;J.isCharacterDataNode(b)&&0<c&&c<b.length&&J.splitDataNode(b,c);J.isCharacterDataNode(a)&&0<d&&d<a.length&&(a=J.splitDataNode(a,d),e?(c-=d,b=a):b==a.parentNode&&c>=J.getNodeIndex(a)&&c++,d=0);g(this,a,d,b,c)},normalizeBoundaries:function(){K(this);var a=this.startContainer,d=this.startOffset,b=this.endContainer,
c=this.endOffset,e=function(a){var d=a.nextSibling;d&&d.nodeType==a.nodeType&&(b=a,c=a.length,a.appendData(d.data),d.parentNode.removeChild(d))},f=function(e){var g=e.previousSibling;if(g&&g.nodeType==e.nodeType){a=e;var f=e.length;d=g.length;e.insertData(0,g.data);g.parentNode.removeChild(g);a==b?(c+=d,b=a):b==e.parentNode&&(g=J.getNodeIndex(e),c==g?(b=e,c=f):c>g&&c--)}},n=!0;J.isCharacterDataNode(b)?b.length==c&&e(b):(0<c&&(n=b.childNodes[c-1])&&J.isCharacterDataNode(n)&&e(n),n=!this.collapsed);
n?J.isCharacterDataNode(a)?0==d&&f(a):d<a.childNodes.length&&(e=a.childNodes[d])&&J.isCharacterDataNode(e)&&f(e):(a=b,d=c);g(this,a,d,b,c)},collapseToPoint:function(a,d){D(this);E(a,!0);L(a,d);l(this,a,d)}});S(a)}function V(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function M(a,d,b,c,e){var g=a.startContainer!==d||a.startOffset!==b,n=a.endContainer!==c||a.endOffset!==
e;a.startContainer=d;a.startOffset=b;a.endContainer=c;a.endOffset=e;V(a);f(a,"boundarychange",{startMoved:g,endMoved:n})}function U(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};V(this)}b.requireModules(["DomUtil"]);var J=b.dom,aa=J.DomPosition,X=b.DOMException;A.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},
next:function(){var a=this._current=this._next;a&&(this._next=a!==this._last?a.nextSibling:null,J.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so)));return a},remove:function(){var a=this._current,d,b;!J.isCharacterDataNode(a)||a!==this.sc&&a!==this.ec?a.parentNode&&a.parentNode.removeChild(a):(d=a===this.sc?this.so:0,b=a===this.ec?this.eo:a.length,
d!=b&&a.deleteData(d,b-d))},isPartiallySelectedSubtree:function(){return m(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new U(k(this.range));var d=this._current,b=d,c=0,e=d,g=J.getNodeLength(d);J.isAncestorOf(d,this.sc,!0)&&(b=this.sc,c=this.so);J.isAncestorOf(d,this.ec,!0)&&(e=this.ec,g=this.eo);M(a,b,c,e,g)}return new A(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach();
this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};z.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};z.prototype.toString=function(){return this.message};B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var fa=[1,3,4,5,7,8,10],ua=[2,9,11],va=[1,3,4,5,7,8,10,11],
la=[1,3,4,5,7,8],oa=J.getRootContainer,ka=C([9,11]),Fa=C([5,6,10,12]),O=C([6,10,12]),sa=document.createElement("style"),kb=!1;try{sa.innerHTML="<b>x</b>",kb=3==sa.firstChild.nodeType}catch(La){}b.features.htmlParsingConforms=kb;var Ia="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),Ra=0,Qa=1,pb=2,pa=3,ca=0,Ma=1,cb=2,ma=3;G.prototype={attachListener:function(a,d){this._listeners[a].push(d)},compareBoundaryPoints:function(a,d){K(this);r(this.startContainer,
d.startContainer);var b=a==pa||a==Ra?"start":"end",c=a==Qa||a==Ra?"start":"end";return J.comparePoints(this[b+"Container"],this[b+"Offset"],d[c+"Container"],d[c+"Offset"])},insertNode:function(a){K(this);H(a,va);t(this.startContainer);if(J.isAncestorOf(a,this.startContainer,!0))throw new X("HIERARCHY_REQUEST_ERR");a=g(a,this.startContainer,this.startOffset);this.setStartBefore(a)},cloneContents:function(){K(this);var a,d;if(this.collapsed)return k(this).createDocumentFragment();if(this.startContainer===
this.endContainer&&J.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),d=k(this).createDocumentFragment(),d.appendChild(a),d;d=new A(this,!0);a=q(d);d.detach();return a},canSurroundContents:function(){K(this);t(this.startContainer);t(this.endContainer);var a=new A(this,!0),d=a._first&&m(a._first,this)||a._last&&m(a._last,this);a.detach();return!d},surroundContents:function(a){H(a,la);if(!this.canSurroundContents())throw new z("BAD_BOUNDARYPOINTS_ERR");
var d=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset);a.appendChild(d);this.selectNode(a)},cloneRange:function(){K(this);for(var a=new U(k(this)),d=Ia.length,b;d--;)b=Ia[d],a[b]=this[b];return a},toString:function(){K(this);var d=this.startContainer;if(d===this.endContainer&&J.isCharacterDataNode(d))return 3==d.nodeType||4==d.nodeType?d.data.slice(this.startOffset,this.endOffset):"";var b=[],d=new A(this,!0);a(d,function(a){3!=
a.nodeType&&4!=a.nodeType||b.push(a.data)});d.detach();return b.join("")},compareNode:function(a){K(this);var d=a.parentNode,b=J.getNodeIndex(a);if(!d)throw new X("NOT_FOUND_ERR");a=this.comparePoint(d,b);d=this.comparePoint(d,b+1);return 0>a?0<d?cb:ca:0<d?Ma:ma},comparePoint:function(a,d){K(this);s(a,"HIERARCHY_REQUEST_ERR");r(a,this.startContainer);return 0>J.comparePoints(a,d,this.startContainer,this.startOffset)?-1:0<J.comparePoints(a,d,this.endContainer,this.endOffset)?1:0},createContextualFragment:kb?
function(a){var d=this.startContainer,b=J.getDocument(d);if(!d)throw new X("INVALID_STATE_ERR");var c=null;1==d.nodeType?c=d:J.isCharacterDataNode(d)&&(c=J.parentElement(d));c=null===c||"HTML"==c.nodeName&&J.isHtmlNamespace(J.getDocument(c).documentElement)&&J.isHtmlNamespace(c)?b.createElement("body"):c.cloneNode(!1);c.innerHTML=a;return J.fragmentFromNodeChildren(c)}:function(a){D(this);var d=k(this).createElement("body");d.innerHTML=a;return J.fragmentFromNodeChildren(d)},toHtml:function(){K(this);
var a=k(this).createElement("div");a.appendChild(this.cloneContents());return a.innerHTML},intersectsNode:function(a,d){K(this);s(a,"NOT_FOUND_ERR");if(J.getDocument(a)!==k(this))return!1;var b=a.parentNode,c=J.getNodeIndex(a);s(b,"NOT_FOUND_ERR");var e=J.comparePoints(b,c,this.endContainer,this.endOffset),b=J.comparePoints(b,c+1,this.startContainer,this.startOffset);return d?0>=e&&0<=b:0>e&&0<b},isPointInRange:function(a,d){K(this);s(a,"HIERARCHY_REQUEST_ERR");r(a,this.startContainer);return 0<=
J.comparePoints(a,d,this.startContainer,this.startOffset)&&0>=J.comparePoints(a,d,this.endContainer,this.endOffset)},intersectsRange:function(a,d){K(this);if(k(a)!=k(this))throw new X("WRONG_DOCUMENT_ERR");var b=J.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),c=J.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return d?0>=b&&0<=c:0>b&&0<c},intersection:function(a){if(this.intersectsRange(a)){var d=J.comparePoints(this.startContainer,
this.startOffset,a.startContainer,a.startOffset),b=J.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),c=this.cloneRange();-1==d&&c.setStart(a.startContainer,a.startOffset);1==b&&c.setEnd(a.endContainer,a.endOffset);return c}return null},union:function(a){if(this.intersectsRange(a,!0)){var d=this.cloneRange();-1==J.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&d.setStart(a.startContainer,a.startOffset);1==J.comparePoints(a.endContainer,
a.endOffset,this.endContainer,this.endOffset)&&d.setEnd(a.endContainer,a.endOffset);return d}throw new z("Ranges do not intersect");},containsNode:function(a,d){return d?this.intersectsNode(a,!1):this.compareNode(a)==ma},containsNodeContents:function(a){return 0<=this.comparePoint(a,0)&&0>=this.comparePoint(a,J.getNodeLength(a))},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var d=this.cloneRange();d.selectNode(a);var b=d.getNodes([3]);return 0<b.length?
(d.setStart(b[0],0),a=b.pop(),d.setEnd(a,a.length),a=this.containsRange(d),d.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,d){K(this);return new B(this,a,d)},getNodes:function(a,d){K(this);return v(this,a,d)},getDocument:function(){return k(this)},collapseBefore:function(a){D(this);this.setEndBefore(a);this.collapse(!1)},collapseAfter:function(a){D(this);this.setStartAfter(a);this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return U.rangesEqual(this,
a)},inspect:function(){return y(this)}};ba(U,M,function(a){D(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;f(a,"detach",null);a._listeners=null});b.rangePrototype=G.prototype;U.rangeProperties=Ia;U.RangeIterator=A;U.copyComparisonConstants=S;U.createPrototypeRange=ba;U.inspect=y;U.getRangeDocument=k;U.rangesEqual=function(a,d){return a.startContainer===d.startContainer&&a.startOffset===d.startOffset&&a.endContainer===d.endContainer&&a.endOffset===
d.endOffset};b.DomRange=U;b.RangeException=z});l.createModule("WrappedRange",function(b,l){function m(a,d,b,g){var f=a.duplicate();f.collapse(b);var k=f.parentElement();c.isAncestorOf(d,k,!0)||(k=d);if(!k.canHaveHTML)return new e(k.parentNode,c.getNodeIndex(k));d=c.getDocument(k).createElement("span");d.parentNode&&d.parentNode.removeChild(d);var q,m=b?"StartToStart":"StartToEnd";do k.insertBefore(d,d.previousSibling),f.moveToElementText(d);while(0<(q=f.compareEndPoints(m,a))&&d.previousSibling);
m=d.nextSibling;if(-1==q&&m&&c.isCharacterDataNode(m)){f.setEndPoint(b?"EndToStart":"EndToEnd",a);if(/[\r\n]/.test(m.data))for(f=f.duplicate(),k=f.text.replace(/\r\n/g,"\r").length,k=f.moveStart("character",k);-1==f.compareEndPoints("StartToEnd",f);)k++,f.moveStart("character",1);else if(k=f.text.replace(/\u00a0/g," "),b=m.data.replace(/\u00a0/g," "),0!==b.indexOf(k)){for(;0<k.length&&0!==b.indexOf(k);)k=k.substr(1);k=k.length}else k=f.text.length;m=new e(m,k)}else m=(g||!b)&&d.previousSibling,m=
(f=(g||b)&&d.nextSibling)&&c.isCharacterDataNode(f)?new e(f,0):m&&c.isCharacterDataNode(m)?new e(m,m.length):new e(k,c.getNodeIndex(d));d.parentNode.removeChild(d);return m}function k(a,d){var b,e,g=a.offset,f=c.getDocument(a.node),k=f.body.createTextRange(),q=c.isCharacterDataNode(a.node);q?(b=a.node,e=b.parentNode):(b=a.node.childNodes,b=g<b.length?b[g]:null,e=a.node);f=f.createElement("span");f.innerHTML="&#feff;";b?e.insertBefore(f,b):e.appendChild(f);try{k.moveToElementText(f),k.collapse(!d)}catch(m){}e.removeChild(f);
if(q)k[d?"moveStart":"moveEnd"]("character",g);return k}b.requireModules(["DomUtil","DomRange"]);var f,c=b.dom,e=c.DomPosition,g=b.DomRange;if(b.features.implementsDomRange&&(!b.features.implementsTextRange||!b.config.preferTextRange))(function(){function a(a){for(var d=e.length,b;d--;)b=e[d],a[b]=a.nativeRange[b]}var d,e=g.rangeProperties,k;f=function(d){if(!d)throw Error("Range must be specified");this.nativeRange=d;a(this)};g.createPrototypeRange(f,function(a,d,b,c,e){var g=a.endContainer!==c||
a.endOffset!=e;if(a.startContainer!==d||a.startOffset!=b||g)a.setEnd(c,e),a.setStart(d,b)},function(a){a.nativeRange.detach();a.detached=!0;for(var d=e.length,b;d--;)b=e[d],a[b]=null});d=f.prototype;d.selectNode=function(d){this.nativeRange.selectNode(d);a(this)};d.deleteContents=function(){this.nativeRange.deleteContents();a(this)};d.extractContents=function(){var d=this.nativeRange.extractContents();a(this);return d};d.cloneContents=function(){return this.nativeRange.cloneContents()};d.surroundContents=
function(d){this.nativeRange.surroundContents(d);a(this)};d.collapse=function(d){this.nativeRange.collapse(d);a(this)};d.cloneRange=function(){return new f(this.nativeRange.cloneRange())};d.refresh=function(){a(this)};d.toString=function(){return this.nativeRange.toString()};var q=document.createTextNode("test");c.getBody(document).appendChild(q);var m=document.createRange();m.setStart(q,0);m.setEnd(q,0);try{m.setStart(q,1),d.setStart=function(d,b){this.nativeRange.setStart(d,b);a(this)},d.setEnd=
function(d,b){this.nativeRange.setEnd(d,b);a(this)},k=function(d){return function(b){this.nativeRange[d](b);a(this)}}}catch(l){d.setStart=function(d,b){try{this.nativeRange.setStart(d,b)}catch(c){this.nativeRange.setEnd(d,b),this.nativeRange.setStart(d,b)}a(this)},d.setEnd=function(d,b){try{this.nativeRange.setEnd(d,b)}catch(c){this.nativeRange.setStart(d,b),this.nativeRange.setEnd(d,b)}a(this)},k=function(d,b){return function(c){try{this.nativeRange[d](c)}catch(e){this.nativeRange[b](c),this.nativeRange[d](c)}a(this)}}}d.setStartBefore=
k("setStartBefore","setEndBefore");d.setStartAfter=k("setStartAfter","setEndAfter");d.setEndBefore=k("setEndBefore","setStartBefore");d.setEndAfter=k("setEndAfter","setStartAfter");m.selectNodeContents(q);d.selectNodeContents=m.startContainer==q&&m.endContainer==q&&0==m.startOffset&&m.endOffset==q.length?function(d){this.nativeRange.selectNodeContents(d);a(this)}:function(a){this.setStart(a,0);this.setEnd(a,g.getEndOffset(a))};m.selectNodeContents(q);m.setEnd(q,3);k=document.createRange();k.selectNodeContents(q);
k.setEnd(q,4);k.setStart(q,2);-1==m.compareBoundaryPoints(m.START_TO_END,k)&1==m.compareBoundaryPoints(m.END_TO_START,k)?d.compareBoundaryPoints=function(a,d){d=d.nativeRange||d;a==d.START_TO_END?a=d.END_TO_START:a==d.END_TO_START&&(a=d.START_TO_END);return this.nativeRange.compareBoundaryPoints(a,d)}:d.compareBoundaryPoints=function(a,d){return this.nativeRange.compareBoundaryPoints(a,d.nativeRange||d)};b.util.isHostMethod(m,"createContextualFragment")&&(d.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)});
c.getBody(document).removeChild(q);m.detach();k.detach()})(),b.createNativeRange=function(a){a=a||document;return a.createRange()};else if(b.features.implementsTextRange){f=function(a){this.textRange=a;this.refresh()};f.prototype=new g(document);f.prototype.refresh=function(){var a,d,b=this.textRange;a=b.parentElement();var e=b.duplicate();e.collapse(!0);d=e.parentElement();e=b.duplicate();e.collapse(!1);b=e.parentElement();d=d==b?d:c.getCommonAncestor(d,b);d=d==a?d:c.getCommonAncestor(a,d);a=this.textRange;
0==a.compareEndPoints("StartToEnd",a)?d=a=m(this.textRange,d,!0,!0):(a=m(this.textRange,d,!0,!1),d=m(this.textRange,d,!1,!1));this.setStart(a.node,a.offset);this.setEnd(d.node,d.offset)};g.copyComparisonConstants(f);var q=function(){return this}();"undefined"==typeof q.Range&&(q.Range=f);b.createNativeRange=function(a){a=a||document;return a.body.createTextRange()}}b.features.implementsTextRange&&(f.rangeToTextRange=function(a){if(a.collapsed)return k(new e(a.startContainer,a.startOffset),!0);var d=
k(new e(a.startContainer,a.startOffset),!0),b=k(new e(a.endContainer,a.endOffset),!1);a=c.getDocument(a.startContainer).body.createTextRange();a.setEndPoint("StartToStart",d);a.setEndPoint("EndToEnd",b);return a});f.prototype.getName=function(){return"WrappedRange"};b.WrappedRange=f;b.createRange=function(a){a=a||document;return new f(b.createNativeRange(a))};b.createRangyRange=function(a){a=a||document;return new g(a)};b.createIframeRange=function(a){return b.createRange(c.getIframeDocument(a))};
b.createIframeRangyRange=function(a){return b.createRangyRange(c.getIframeDocument(a))};b.addCreateMissingNativeApiListener(function(a){a=a.document;"undefined"==typeof a.createRange&&(a.createRange=function(){return b.createRange(this)});a=a=null})});l.createModule("WrappedSelection",function(b,l){function m(a){return(a||window).getSelection()}function k(a){return(a||window).document.selection}function f(a,d,b){var c=b?"end":"start";b=b?"start":"end";a.anchorNode=d[c+"Container"];a.anchorOffset=
d[c+"Offset"];a.focusNode=d[b+"Container"];a.focusOffset=d[b+"Offset"]}function c(a){a.anchorNode=a.focusNode=null;a.anchorOffset=a.focusOffset=0;a.rangeCount=0;a.isCollapsed=!0;a._ranges.length=0}function e(a){var d;a instanceof C?(d=a._selectionNativeRange,d||(d=b.createNativeRange(z.getDocument(a.startContainer)),d.setEnd(a.endContainer,a.endOffset),d.setStart(a.startContainer,a.startOffset),a._selectionNativeRange=d,a.attachListener("detach",function(){this._selectionNativeRange=null}))):a instanceof
E?d=a.nativeRange:b.features.implementsDomRange&&a instanceof z.getWindow(a.startContainer).Range&&(d=a);return d}function g(a){var d=a.getNodes(),b;a:if(d.length&&1==d[0].nodeType){b=1;for(var c=d.length;b<c;++b)if(!z.isAncestorOf(d[0],d[b])){b=!1;break a}b=!0}else b=!1;if(!b)throw Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return d[0]}function q(a,d){var b=new E(d);a._ranges=[b];f(a,b,!1);a.rangeCount=1;a.isCollapsed=b.collapsed}function a(a){a._ranges.length=
0;if("None"==a.docSelection.type)c(a);else{var d=a.docSelection.createRange();if(d&&"undefined"!=typeof d.text)q(a,d);else{a.rangeCount=d.length;for(var e,g=z.getDocument(d.item(0)),n=0;n<a.rangeCount;++n)e=b.createRange(g),e.selectNode(d.item(n)),a._ranges.push(e);a.isCollapsed=1==a.rangeCount&&a._ranges[0].collapsed;f(a,a._ranges[a.rangeCount-1],!1)}}}function d(d,b){for(var c=d.docSelection.createRange(),e=g(b),f=z.getDocument(c.item(0)),f=z.getBody(f).createControlRange(),n=0,k=c.length;n<k;++n)f.add(c.item(n));
try{f.add(e)}catch(q){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}f.select();a(d)}function n(a,d,b){this.nativeSelection=a;this.docSelection=d;this._ranges=[];this.win=b;this.refresh()}function v(d,b){for(var c=z.getDocument(b[0].startContainer),c=z.getBody(c).createControlRange(),e=0,f;e<rangeCount;++e){f=g(b[e]);try{c.add(f)}catch(n){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)");
}}c.select();a(d)}function y(a,d){if(a.anchorNode&&z.getDocument(a.anchorNode)!==z.getDocument(d))throw new D("WRONG_DOCUMENT_ERR");}function A(a){var d=[],b=new H(a.anchorNode,a.anchorOffset),c=new H(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var g=0,f=a.rangeCount;g<f;++g)d[g]=C.inspect(a.getRangeAt(g));return"["+e+"(Ranges: "+d.join(", ")+")(anchor: "+b.inspect()+", focus: "+c.inspect()+"]"}b.requireModules(["DomUtil",
"DomRange","WrappedRange"]);b.config.checkSelectionRanges=!0;var z=b.dom,B=b.util,C=b.DomRange,E=b.WrappedRange,D=b.DOMException,H=z.DomPosition,L,r,t=b.util.isHostMethod(window,"getSelection"),s=b.util.isHostObject(document,"selection"),u=s&&(!t||b.config.preferTextRange);u?(L=k,b.isSelectionValid=function(a){a=(a||window).document;var d=a.selection;return"None"!=d.type||z.getDocument(d.createRange().parentElement())==a}):t?(L=m,b.isSelectionValid=function(){return!0}):l.fail("Neither document.selection or window.getSelection() detected.");
b.getNativeSelection=L;var t=L(),x=b.createNativeRange(document),K=z.getBody(document),G=B.areHostObjects(t,B.areHostProperties(t,["anchorOffset","focusOffset"]));b.features.selectionHasAnchorAndFocus=G;var Q=B.isHostMethod(t,"extend");b.features.selectionHasExtend=Q;var S="number"==typeof t.rangeCount;b.features.selectionHasRangeCount=S;var ha=!1,ba=!0;B.areHostMethods(t,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof t.rangeCount&&b.features.implementsDomRange&&function(){var a=document.createElement("iframe");
K.appendChild(a);var d=z.getIframeDocument(a);d.open();d.write("<html><head></head><body>12</body></html>");d.close();var b=z.getIframeWindow(a).getSelection(),c=d.documentElement.lastChild.firstChild,d=d.createRange();d.setStart(c,1);d.collapse(!0);b.addRange(d);ba=1==b.rangeCount;b.removeAllRanges();var e=d.cloneRange();d.setStart(c,0);e.setEnd(c,2);b.addRange(d);b.addRange(e);ha=2==b.rangeCount;d.detach();e.detach();K.removeChild(a)}();b.features.selectionSupportsMultipleRanges=ha;b.features.collapsedNonEditableSelectionsSupported=
ba;var V=!1,M;K&&B.isHostMethod(K,"createControlRange")&&(M=K.createControlRange(),B.areHostProperties(M,["item","add"])&&(V=!0));b.features.implementsControlRange=V;r=G?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var U;B.isHostMethod(t,"getRangeAt")?U=function(a,d){try{return a.getRangeAt(d)}catch(b){return null}}:G&&(U=function(a){var d=z.getDocument(a.anchorNode),d=b.createRange(d);d.setStart(a.anchorNode,
a.anchorOffset);d.setEnd(a.focusNode,a.focusOffset);d.collapsed!==this.isCollapsed&&(d.setStart(a.focusNode,a.focusOffset),d.setEnd(a.anchorNode,a.anchorOffset));return d});b.getSelection=function(a){a=a||window;var d=a._rangySelection,b=L(a),c=s?k(a):null;d?(d.nativeSelection=b,d.docSelection=c,d.refresh(a)):(d=new n(b,c,a),a._rangySelection=d);return d};b.getIframeSelection=function(a){return b.getSelection(z.getIframeWindow(a))};M=n.prototype;if(!u&&G&&B.areHostMethods(t,["removeAllRanges","addRange"])){M.removeAllRanges=
function(){this.nativeSelection.removeAllRanges();c(this)};var J=function(a,d){var c=C.getRangeDocument(d),c=b.createRange(c);c.collapseToPoint(d.endContainer,d.endOffset);a.nativeSelection.addRange(e(c));a.nativeSelection.extend(d.startContainer,d.startOffset);a.refresh()};M.addRange=S?function(a,c){if(V&&s&&"Control"==this.docSelection.type)d(this,a);else if(c&&Q)J(this,a);else{var g;ha?g=this.rangeCount:(this.removeAllRanges(),g=0);this.nativeSelection.addRange(e(a));this.rangeCount=this.nativeSelection.rangeCount;
this.rangeCount==g+1?(b.config.checkSelectionRanges&&(g=U(this.nativeSelection,this.rangeCount-1))&&!C.rangesEqual(g,a)&&(a=new E(g)),this._ranges[this.rangeCount-1]=a,f(this,a,fa(this.nativeSelection)),this.isCollapsed=r(this)):this.refresh()}}:function(a,d){d&&Q?J(this,a):(this.nativeSelection.addRange(e(a)),this.refresh())};M.setRanges=function(a){if(V&&1<a.length)v(this,a);else{this.removeAllRanges();for(var d=0,b=a.length;d<b;++d)this.addRange(a[d])}}}else if(B.isHostMethod(t,"empty")&&B.isHostMethod(x,
"select")&&V&&u)M.removeAllRanges=function(){try{var a=jQuery.browser.msie&&8>jQuery.browser.version&&"undefined"===typeof document.documentMode;a||this.docSelection.empty();"None"!=this.docSelection.type&&a&&this.docSelection.empty()}catch(d){}c(this)},M.addRange=function(a){if("Control"==this.docSelection.type)d(this,a);else try{E.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,f(this,a,!1)}catch(b){}},M.setRanges=function(a){this.removeAllRanges();
var d=a.length;1<d?v(this,a):d&&this.addRange(a[0])};else return l.fail("No means of selecting a Range or TextRange was found"),!1;M.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new D("INDEX_SIZE_ERR");return this._ranges[a]};var aa;if(u)aa=function(d){var e;b.isSelectionValid(d.win)?e=d.docSelection.createRange():(e=z.getBody(d.win.document).createTextRange(),e.collapse(!0));"Control"==d.docSelection.type?a(d):e&&"undefined"!=typeof e.text?q(d,e):c(d)};else if(B.isHostMethod(t,"getRangeAt")&&
"number"==typeof t.rangeCount)aa=function(d){if(V&&s&&"Control"==d.docSelection.type)a(d);else if(d._ranges.length=d.rangeCount=d.nativeSelection.rangeCount,d.rangeCount){for(var e=0,g=d.rangeCount;e<g;++e)d._ranges[e]=new b.WrappedRange(d.nativeSelection.getRangeAt(e));f(d,d._ranges[d.rangeCount-1],fa(d.nativeSelection));d.isCollapsed=r(d)}else c(d)};else if(G&&"boolean"==typeof t.isCollapsed&&"boolean"==typeof x.collapsed&&b.features.implementsDomRange)aa=function(a){var d;d=a.nativeSelection;d.anchorNode?
(d=U(d,0),a._ranges=[d],a.rangeCount=1,d=a.nativeSelection,a.anchorNode=d.anchorNode,a.anchorOffset=d.anchorOffset,a.focusNode=d.focusNode,a.focusOffset=d.focusOffset,a.isCollapsed=r(a)):c(a)};else return l.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;M.refresh=function(a){var d=a?this._ranges.slice(0):null;aa(this);if(a){a=d.length;if(a!=this._ranges.length)return!1;for(;a--;)if(!C.rangesEqual(d[a],this._ranges[a]))return!1;return!0}};var X=function(a,
d){var b=a.getAllRanges(),e=!1;a.removeAllRanges();for(var g=0,f=b.length;g<f;++g)e||d!==b[g]?a.addRange(b[g]):e=!0;a.rangeCount||c(a)};M.removeRange=V?function(d){if("Control"==this.docSelection.type){var b=this.docSelection.createRange();d=g(d);for(var c=z.getDocument(b.item(0)),c=z.getBody(c).createControlRange(),e,f=!1,n=0,k=b.length;n<k;++n)e=b.item(n),e!==d||f?c.add(b.item(n)):f=!0;c.select();a(this)}else X(this,d)}:function(a){X(this,a)};var fa;!u&&G&&b.features.implementsDomRange?(fa=function(a){var d=
!1;a.anchorNode&&(d=1==z.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset));return d},M.isBackwards=function(){return fa(this)}):fa=M.isBackwards=function(){return!1};M.toString=function(){for(var a=[],d=0,b=this.rangeCount;d<b;++d)a[d]=""+this._ranges[d];return a.join("")};M.collapse=function(a,d){y(this,a);var c=b.createRange(z.getDocument(a));c.collapseToPoint(a,d);this.removeAllRanges();this.addRange(c);this.isCollapsed=!0};M.collapseToStart=function(){if(this.rangeCount){var a=
this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else throw new D("INVALID_STATE_ERR");};M.collapseToEnd=function(){if(this.rangeCount){var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else throw new D("INVALID_STATE_ERR");};M.selectAllChildren=function(a){y(this,a);var d=b.createRange(z.getDocument(a));d.selectNodeContents(a);this.removeAllRanges();this.addRange(d)};M.deleteFromDocument=function(){if(V&&s&&"Control"==this.docSelection.type){for(var a=this.docSelection.createRange(),
d;a.length;)d=a.item(0),a.remove(d),d.parentNode.removeChild(d);this.refresh()}else if(this.rangeCount){a=this.getAllRanges();this.removeAllRanges();d=0;for(var b=a.length;d<b;++d)a[d].deleteContents();this.addRange(a[b-1])}};M.getAllRanges=function(){return this._ranges.slice(0)};M.setSingleRange=function(a){this.setRanges([a])};M.containsNode=function(a,d){for(var b=0,c=this._ranges.length;b<c;++b)if(this._ranges[b].containsNode(a,d))return!0;return!1};M.toHtml=function(){var a="";if(this.rangeCount){for(var a=
C.getRangeDocument(this._ranges[0]).createElement("div"),d=0,b=this._ranges.length;d<b;++d)a.appendChild(this._ranges[d].cloneContents());a=a.innerHTML}return a};M.getName=function(){return"WrappedSelection"};M.inspect=function(){return A(this)};M.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};n.inspect=A;b.Selection=n;b.selectionPrototype=M;b.addCreateMissingNativeApiListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return b.getSelection(this)});
a=null})});window.rangy=l})();define("vendor/rangy-core",function(){});define("aloha/rangy-core",["jquery","vendor/rangy-core"],function(l){return window.rangy});define("util/class",[],function(){var l=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function p(){!l&&this._constructor&&this._constructor.apply(this,arguments)}var m=this.prototype;l=!0;var k=new this;l=!1;for(var f=0;f<arguments.length;f++){var c=arguments[f],e;for(e in c)k[e]="function"==
typeof c[e]&&"function"==typeof m[e]&&b.test(c[e])?function(b,c){return function(){var a=this._super;this._super=m[b];var d=c.apply(this,arguments);this._super=a;return d}}(e,c[e]):c[e]}p.prototype=k;p.constructor=p;p.extend=arguments.callee;return p};return this.Class});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/lang",[],function(){});(function(l){var b=l.GENTICS;b.Utils.applyProperties=function(b,m){for(var k in m)m.hasOwnProperty(k)&&(b[k]=m[k])};
b.Utils.uniqeString4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};b.Utils.guid=function(){var l=b.Utils.uniqeString4;return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}})(window);define("aloha/ecma5shims",[],function(){function l(b){var e=null;if(b){do e=b;while(null!=(b=b.parentNode))}return e}function b(b,e){return(b.contains(e)&&16)+(e.contains(b)&&8)+(0<=b.sourceIndex&&0<=e.sourceIndex?(b.sourceIndex<e.sourceIndex&&4)+(b.sourceIndex>e.sourceIndex&&2):1)}function p(b){return null!=
b.sourceIndex?b:b.parentNode.insertBefore(document.createComment(""),b)}var m,k={bind:function(b){var e=this.obj||this,g=Function.prototype.bind,f=Array.prototype.slice.call(arguments,1);return g?g.apply(e,arguments):function(){return e.apply(b,0===arguments.length?f:f.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var b=this.obj||this,e=String.prototype.trim;return e?e.call(b):b.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(b,e){var g=this.obj||this,f=Array.prototype.indexOf;
if(f)return f.call(g,b,e);void 0===e&&(e=0);0>e&&(e+=g.length);0>e&&(e=0);for(f=g.length;e<f;e++)if(void 0!==g[e]&&g[e]===b)return e;return-1},forEach:function(b,e){var g=this.obj||this,f=Array.prototype.forEach;if(f)return f.call(g,b,e);var a,f=0;for(a=g.length;f<a;f++)void 0!==g[f]&&b.call(e,g[f],f,g)},map:function(b,e,g){var f=this.obj||this,a=Array.prototype.map,d="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,n=[];if(a)n=a.call(f,b,e);else{var a=[],k,n=
0;for(k=f.length;n<k;n++)void 0!==f[n]&&(a[n]=b.call(e,f[n],n,f));n=a}return d?m(n):n},filter:function(b,e,g){var f=this.obj||this,a=Array.prototype.filter,d="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,n=[];if(a)n=a.call(f,b,e);else{var a=[],k,l,n=0;for(l=f.length;n<l;n++)void 0!==f[n]&&b.call(e,k=f[n],n,f)&&a.push(k);n=a}return d?m(n):n},every:function(b,e){var g=this.obj||this,f=Array.prototype.every;if(f)return f.call(g,b,e);var a,f=0;for(a=g.length;f<
a;f++)if(void 0!==g[f]&&!b.call(e,g[f],f,g))return!1;return!0},some:function(b,e){var g=this.obj||this,f=Array.prototype.some;if(f)return f.call(g,b,e);var a,f=0;for(a=g.length;f<a;f++)if(void 0!==g[f]&&b.call(e,g[f],f,g))return!0;return!1},hasAttribute:function(b){var e=this.obj||this;return e.hasAttribute?e.hasAttribute(b):!!e.getAttribute(b)}};m=function(b){var e=function(){};e.prototype=k;e=new e;e.obj=b;return e};for(var f in k)k.hasOwnProperty(f)&&(m[f]=k[f]);m.Node="undefined"!=typeof window.Node?
window.Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};m.compareDocumentPosition=function(c,e){if(document.documentElement.compareDocumentPosition)return c.compareDocumentPosition(e);
if(!document.documentElement.contains)throw"neither compareDocumentPosition nor contains is supported by this browser.";if(c==e)return 0;if(l(c)!=l(e))return 1;if(null!=c.sourceIndex&&null!=e.sourceIndex)return b(c,e);if(c==document)return 20;if(e==document)return 10;var g=p(c),f=p(e),a=b(g,f);c!=g&&g.parentNode.removeChild(g);e!=f&&f.parentNode.removeChild(f);return a};m.getComputedStyle=function(b,e){return window.getComputedStyle?window.getComputedStyle(b,e):b.currentStyle?b.currentStyle:null};
return m});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/dom",["jquery","util/class","aloha/ecma5shims"],function(l,b,p){function m(a){if(!a)return-1;var d,b=a.parentNode.childNodes,c=b.length;for(d=0;d<c;d++)if(b[d]===a)return d;return-1}function k(a){if(1===a.nodeType){var d=0;for(a=a.firstChild;a;)d+=1,a=a.nextSibling;return d}return 3===a.nodeType?a.length:0}function f(d,b){if(!d)return null;if(b(d))return d;var c=d.firstChild||d.nextSibling||d.parentNode&&
!a.Utils.Dom.isEditingHost(d.parentNode)&&d.parentNode.nextSibling;return c?f(c,b):null}function c(a){if(!a)return!0;if("BR"===a.nodeName)return!1;if(a.nodeType===d.TEXT_NODE)return-1===a.data.search(/\S/)||1===a.data.length&&8192<=a.data.charCodeAt(0)?!0:!1;var b=k(a);if(0===b)return!0;a=a.childNodes;var e;for(e=0;e<b;e++)if(!c(a[e]))return!1;return!0}function e(a){return!c(a)}function g(a){var d;(d=c(a))||(d="aloha-editing-p"===a.className&&1===k(a)&&"BR"===a.children[0].nodeName&&"aloha-end-br"===
a.children[0].className);return d}function q(a,b){a.nodeType!==d.TEXT_NODE&&g(a)?l(a).replaceWith(b):l(a).after(b)}var a=window.GENTICS,d={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,
DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32},n={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0};b=b.extend({getIndexInParent:m,wordRegex:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
nonWordRegex:/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
mergeableTags:"b code del em i ins strong sub sup #text".split(" "),nonWordBoundaryTags:"a b code del em i ins span strong sub sup #text".split(" "),nonEmptyTags:["br"],tags:{flow:"a abbr address area article aside audio b bdi bdo blockquote br button canvas cite code command datalist del details dfn div dl em embed fieldset figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr i iframe img input ins kbd keygen label map mark math menu meter nav noscript object ol output p pre progress q ruby s samp script section select small span strong style sub sup svg table textarea time u ul var video wbr #text".split(" "),
phrasing:"a abbr area audio b bdi bdo br button canvas cite code command datalist del dfn em embed i iframe img input ins kbd keygen label map mark math meter noscript object output progress q ruby samp script select small span strong sub sup svg textarea time u var video wbr #text".split(" ")},children:{a:"phrasing",abbr:"phrasing",address:"flow",area:"empty",article:"flow",aside:"flow",audio:"source",b:"phrasing",base:"empty",bdo:"phrasing",blockquote:"phrasing",body:"flow",br:"empty",button:"phrasing",
canvas:"phrasing",caption:"flow",cite:"phrasing",code:"phrasing",col:"empty",colgroup:"col",command:"empty",datalist:["phrasing","option"],dd:"flow",del:"phrasing",div:"flow",details:["summary","flow"],dfn:"flow",dl:["dt","dd"],dt:"phrasing",em:"phrasing",embed:"empty",fieldset:["legend","flow"],figcaption:"flow",figure:["figcaption","flow"],footer:"flow",form:"flow",h1:"phrasing",h2:"phrasing",h3:"phrasing",h4:"phrasing",h5:"phrasing",h6:"phrasing",header:"flow",hgroup:"h1 h2 h3 h4 h5 h6".split(" "),
hr:"empty",i:"phrasing",iframe:"#text",img:"empty",input:"empty",ins:"phrasing",kbd:"phrasing",keygen:"empty",label:"phrasing",legend:"phrasing",li:"flow",link:"empty",map:"area",mark:"phrasing",menu:["li","flow"],meta:"empty",meter:"phrasing",nav:"flow",noscript:"phrasing",object:"param",ol:"li",optgroup:"option",option:"#text",output:"phrasing",p:"phrasing",param:"empty",pre:"phrasing",progress:"phrasing",q:"phrasing",rp:"phrasing",rt:"phrasing",ruby:["phrasing","rt","rp"],s:"phrasing",samp:"pharsing",
script:"#script",section:"flow",select:["option","optgroup"],small:"phrasing",source:"empty",span:"phrasing",strong:"phrasing",style:"phrasing",sub:"phrasing",summary:"phrasing",sup:"phrasing",table:"caption colgroup thead tbody tfoot tr".split(" "),tbody:"tr",td:"flow",textarea:"#text",tfoot:"tr",th:"phrasing",thead:"tr",time:"phrasing",title:"#text",tr:["th","td"],track:"empty",u:"phrasing",ul:"li","var":"phrasing",video:"source",wbr:"empty"},blockLevelElements:"p h1 h2 h3 h4 h5 h6 blockquote div pre".split(" "),
listElements:["li","ol","ul"],split:function(a,d,b){var c=l(a.startContainer),e=a.startOffset,g,f,n,k,q,m,p,r,t;b&&(c=l(a.endContainer),e=a.endOffset);1>d.length&&(d=l(document.body));b=!a.isCollapsed()&&!b;f=c.parents().get();f.unshift(c.get(0));l.each(f,function(a,b){if(d.filter(function(){return this==b}).length)return 0<a&&(g=f.slice(0,a)),!1});if(!g)return!0;g=g.reverse();c=0;for(m=g.length;c<m;++c)if(p=g[c],c===m-1)3===p.nodeType?(q=document.createTextNode(p.data.substring(e,p.data.length)),
p.data=p.data.substring(0,e),this.isEmpty(q)&&0===l("br",n).length&&(q=l("<br/>").addClass("aloha-end-br"))):(r=l(p),q=r.contents(),r=r.clone(!1).empty(),q=r.append(q.slice(e,q.length)).get(0),l(q).addClass("aloha-editing-p"),1===q.childNodes.length&&"br"===q.childNodes.item(0).nodeName.toLowerCase()&&l(q.childNodes.item(0)).addClass("aloha-end-br")),b&&a.endContainer===p&&(a.endContainer=q,a.endOffset-=e,a.clearCaches()),k?k.prepend(q):l(p).after(q);else{r=l(p).clone(!1).empty();n?k.prepend(r):n=
r;for(k=r;;){t=g[c+1].nextSibling;if(!t)break;k.append(t)}if(b&&a.endContainer===p){a.endContainer=r.get(0);p=g[c+1];for(r=0;;){p=p.previousSibling;if(!p)break;r++}a.endOffset-=r;a.clearCaches()}}l(g[0]).after(n);return l([g[0],n?n.get(0):q])},allowsNesting:function(a,d){if(!(a&&a.nodeName&&d&&d.nodeName))return!1;var b=a.nodeName.toLowerCase(),c=d.nodeName.toLowerCase();return this.children[b]?this.children[b]==c||l.isArray(this.children[b])&&0<=l.inArray(c,this.children[b])||l.isArray(this.tags[this.children[b]])&&
0<=l.inArray(c,this.tags[this.children[b]])?!0:!1:!1},addMarkup:function(a,d,b){3===a.startContainer.nodeType&&0<a.startOffset&&a.startOffset<a.startContainer.data.length&&this.split(a,l(a.startContainer).parent(),!1);3===a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.data.length&&this.split(a,l(a.endContainer).parent(),!0);var c=a.getRangeTree();this.recursiveAddMarkup(c,d,a,b);this.doCleanup({merge:!0,removeempty:!0},a)},recursiveAddMarkup:function(d,b,c,e){var g,f;c=0;for(f=
d.length;c<f;++c)"full"==d[c].type&&this.allowsNesting(b.get(0),d[c].domobj)?!e&&d[c].domobj.nodeName==b.get(0).nodeName||3===d[c].domobj.nodeType&&0===l.trim(d[c].domobj.data).length||(l(d[c].domobj).wrap(b),e||3===d[c].domobj.nodeType||(g=new a.Utils.RangeObject,g.startContainer=g.endContainer=d[c].domobj.parentNode,g.startOffset=0,g.endOffset=g.endContainer.childNodes.length,this.removeMarkup(g,b,l(d[c].domobj.parentNode)))):(e||d[c].domobj&&d[c].domobj.nodeName!==b.get(0).nodeName)&&d[c].children&&
0<d[c].children.length&&this.recursiveAddMarkup(d[c].children,b)},findHighestElement:function(a,d,b){d=d.toLowerCase();var c,e=a;for(a=b?function(){return b.filter(function(){return e==this}).length}:function(){return!1};!a()&&e;)e.nodeName.toLowerCase()===d&&(c=e),e=e.parentNode;return c},removeMarkup:function(a,d,b){var c=d.get(0).nodeName,e=this.findHighestElement(a.startContainer,c,b),g=this.findHighestElement(a.endContainer,c,b),f=!1;e&&0<a.startOffset&&(this.split(a,l(e).parent(),!1),f=!0);
g&&(3===a.endContainer.nodeType&&a.endOffset<a.endContainer.data.length&&(this.split(a,l(g).parent(),!0),f=!0),1===a.endContainer.nodeType&&a.endOffset<a.endContainer.childNodes.length&&(this.split(a,l(g).parent(),!0),f=!0));f&&a.correctRange();if(b=(b=this.findHighestElement(a.getCommonAncestorContainer(),c,b))?b.parentNode:a.getCommonAncestorContainer())c=a.getRangeTree(b),this.recursiveRemoveMarkup(c,d),this.doCleanup({merge:!0,removeempty:!0},a,b)},recursiveRemoveMarkup:function(a,d){var b,c,
e;b=0;for(c=a.length;b<c;++b)"full"==a[b].type&&a[b].domobj.nodeName==d.get(0).nodeName&&(e=l(a[b].domobj).contents(),0<e.length?e.first().unwrap():l(a[b].domobj).remove()),a[b].children&&this.recursiveRemoveMarkup(a[b].children,d)},doCleanup:function(d,b,c){var e=this,g,f,n,k,q;"undefined"===typeof d&&(d={});"undefined"===typeof d.merge&&(d.merge=!1);"undefined"===typeof d.removeempty&&(d.removeempty=!1);"undefined"===typeof c&&b&&(c=b.getCommonAncestorContainer());f=g=!1;n=l(c);k=b.startOffset;
q=b.endOffset;n.contents().each(function(){var c;try{c=this.nodeType}catch(A){return}switch(c){case 1:c=this.nodeName;if(g&&g.nodeName===c)b.startContainer===n&&k>m(this)&&(b.startOffset-=1,f=!0),b.endContainer===n&&q>m(this)&&(b.endOffset-=1,f=!0),l(g).append(l(this).contents()),f|=e.doCleanup(d,b,g),l(this).remove();else{f|=e.doCleanup(d,b,this);var p=!1;d.removeempty&&(a.Utils.Dom.isBlockLevelElement(this)&&0===this.childNodes.length&&(p=!0),0<=l.inArray(c.toLowerCase(),e.mergeableTags)&&0===l(this).text().length&&
0===this.childNodes.length&&(p=!0));p?(b.startContainer===this.parentNode&&k>m(this)&&(b.startOffset-=1,f=!0),b.endContainer===this.parentNode&&q>m(this)&&(b.endOffset-=1,f=!0),l(this).remove()):g=(d.mergeable?d.mergeable(this):0<=l.inArray(c.toLowerCase(),e.mergeableTags))?this:!1}break;case 3:if(g&&3===g.nodeType&&d.merge)c=g.nodeValue.length,b.startContainer===this?(b.startContainer=g,b.startOffset+=c,f=!0):b.startContainer===g.parentNode&&b.startOffset===m(g)+1&&(b.startContainer=g,b.startOffset=
c,f=!0),b.endContainer===this?(b.endContainer=g,b.endOffset+=c,f=!0):b.endContainer===g.parentNode&&b.endOffset===m(g)+1&&(b.endContainer=g,b.endOffset=c,f=!0),g.data+=this.data;else if(""!==this.nodeValue||!d.removeempty){g=this;break}b.startContainer===this.parentNode&&b.startOffset>m(this)&&(b.startOffset-=1,f=!0);b.endContainer===this.parentNode&&b.endOffset>m(this)&&(b.endOffset-=1,f=!0);l(this).remove();c=g.nextSibling;if(g&&(!c||3!==c.nodeType)){var p=g.data,r=p.length;for(c=r-1;0<=c&&1<r;c--)"\u200b"===
p.charAt(c)&&(g.deleteData(c,1),b.startContainer===g&&b.startOffset>c&&(b.startOffset--,f=!0),b.endContainer===g&&b.endOffset>c&&(b.endOffset--,f=!0))}}});f&&b.clearCaches();return f},isBlockLevelElement:function(a){return a?1===a.nodeType&&0<=l.inArray(a.nodeName.toLowerCase(),this.blockLevelElements)?!0:!1:!1},isLineBreakElement:function(a){return a?1===a.nodeType&&"br"==a.nodeName.toLowerCase():!1},isListElement:function(a){return a?1===a.nodeType&&0<=l.inArray(a.nodeName.toLowerCase(),this.listElements):
!1},isSplitObject:function(a){return 1===a.nodeType&&n.hasOwnProperty(a.nodeName)},searchAdjacentTextNode:function(a,d,b,c){if(!a||1!==a.nodeType||0>d||d>a.childNodes.length)return!1;"undefined"===typeof c&&(c={blocklevel:!0,list:!0,linebreak:!0});"undefined"===typeof c.blocklevel&&(c.blocklevel=!0);"undefined"===typeof c.list&&(c.list=!0);"undefined"===typeof c.linebreak&&(c.linebreak=!0);"undefined"===typeof b&&(b=!0);var e,g=a;b&&0<d&&(e=a.childNodes[d-1]);for(!b&&d<a.childNodes.length&&(e=a.childNodes[d]);g;)if(e){if(3===
e.nodeType&&0<l.trim(e.data).length)return e;if(c.blocklevel&&this.isBlockLevelElement(e)||c.linebreak&&this.isLineBreakElement(e)||c.list&&this.isListElement(e))return!1;3===e.nodeType?e=b?e.previousSibling:e.nextSibling:(g=e,e=b?e.lastChild:e.firstChild)}else{if(c.blocklevel&&this.isBlockLevelElement(g)||c.list&&this.isListElement(g))return!1;e=b?g.previousSibling:g.nextSibling;g=g.parentNode}},insertIntoDOM:function(a,d,b,c,n){var k=d.getContainerParents(b,c),m=this,p;b||(b=l(document.body));0===
k.length?p=b.get(0):l.each(k,function(d,b){if(m.allowsNesting(b,a.get(0)))return p=b,!1});"undefined"===typeof p&&0<b.length&&(p=b.get(0));if(!this.allowsNesting(p,a.get(0))&&!n)return!1;if("undefined"!==typeof p){b=this.split(d,l(p),c);if(!0===b){b=d.startContainer;n=d.startOffset;c&&(b=d.endContainer,n=d.endOffset);if(0===n)return d=l(b).contents(),0<d.length?d.eq(0).before(a):l(b).append(a),!0;l(b).contents().eq(n-1).after(a);return!0}if(b)return d=b[1],q(b[0],a),g(d)&&f(d.nextSibling||d.parentNode&&
d.parentNode.nextSibling,e)&&l(d).remove(),!0}return!1},removeFromDOM:function(a,d,b){if(b){b=m(a);var c=l(a).contents().length,e=a.parentNode;d.startContainer==e&&d.startOffset>b?d.startOffset+=c-1:d.startContainer==a&&(d.startContainer=e,d.startOffset=b+d.startOffset);d.endContainer==e&&d.endOffset>b?d.endOffset+=c-1:d.endContainer==a&&(d.endContainer=e,d.endOffset=b+d.endOffset);l(a).contents().unwrap();this.doCleanup({merge:!0},d,e)}},removeRange:function(a){if(!a||a.isCollapsed())return!1;3==
a.startContainer.nodeType&&0<a.startOffset&&a.startOffset<a.startContainer.data.length&&this.split(a,l(a.startContainer).parent(),!1);3==a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.data.length&&this.split(a,l(a.endContainer).parent(),!0);var d=a.getRangeTree();a.endContainer=a.startContainer;a.endOffset=a.startOffset;this.recursiveRemoveRange(d,a);this.doCleanup({merge:!0},a);a.clearCaches()},recursiveRemoveRange:function(a,d){var b;for(b=0;b<a.length;++b)"full"==a[b].type?
(0<l(d.startContainer).parents().andSelf().filter(a[b].domobj).length&&(d.startContainer=d.endContainer=a[b].domobj.parentNode,d.startOffset=d.endOffset=m(a[b].domobj)),l(a[b].domobj).remove()):"partial"==a[b].type&&a[b].children&&this.recursiveRemoveRange(a[b].children,d)},extendToWord:function(a,d){var b=this.searchWordBoundary(a.startContainer,a.startOffset,!0),c=this.searchWordBoundary(a.endContainer,a.endOffset,!1);if(d||!(a.startContainer==b.container&&a.startOffset==b.offset||a.endContainer==
c.container&&a.endOffset==c.offset))a.startContainer=b.container,a.startOffset=b.offset,a.endContainer=c.container,a.endOffset=c.offset,a.correctRange(),a.clearCaches()},isWordBoundaryElement:function(a){return a&&a.nodeName?-1==l.inArray(a.nodeName.toLowerCase(),this.nonWordBoundaryTags):!1},searchWordBoundary:function(a,d,b){"undefined"===typeof b&&(b=!0);for(var c=!1,e,g;!c;){var f=m(a);if(3===a.nodeType)if(b){for(g=e=a.data.substring(0,d).search(this.nonWordRegex);-1!=g;)e=g,g=a.data.substring(e+
1,d).search(this.nonWordRegex),-1!=g&&(g=g+e+1);-1!=e?(d=e+1,c=!0):(d=f,a=a.parentNode)}else e=a.data.substring(d).search(this.nonWordRegex),-1!=e?(d+=e,c=!0):(d=f+1,a=a.parentNode);else 1===a.nodeType&&(b?0<d?this.isWordBoundaryElement(a.childNodes[d-1])?c=!0:(a=a.childNodes[d-1],d=3===a.nodeType?a.data.length:a.childNodes.length):this.isWordBoundaryElement(a)?c=!0:(d=f,a=a.parentNode):d<a.childNodes.length?this.isWordBoundaryElement(a.childNodes[d])?c=!0:(a=a.childNodes[d],d=0):this.isWordBoundaryElement(a)?
c=!0:(d=f+1,a=a.parentNode))}3!==a.nodeType&&(c=this.searchAdjacentTextNode(a,d,!b))&&(a=c,d=b?0:a.data.length);return{container:a,offset:d}},isEmpty:function(a){if(!a)return!0;if(-1!=l.inArray(a.nodeName.toLowerCase(),this.nonEmptyTags))return!1;if(3===a.nodeType)return-1==a.data.search(/\S/)||1===a.data.length&&8192<=a.data.charCodeAt(0)?!0:!1;var d,b;d=0;for(b=a.childNodes.length;d<b;++d)if(!this.isEmpty(a.childNodes[d]))return!1;return!0},setCursorAfter:function(d){var b=new a.Utils.RangeObject;
m(d);var c;3==d.nodeType?(c=d,d=c.nodeValue.length):d.nextSibling&&3==d.nextSibling.nodeType?(c=d.nextSibling,d=0):(c=d.parentNode,d=m(d)+1);b.startContainer=b.endContainer=c;b.startOffset=b.endOffset=d;b.select();return b},selectDomNode:function(d){var b=new a.Utils.RangeObject;b.startContainer=b.endContainer=d.parentNode;b.startOffset=m(d);b.endOffset=b.startOffset+1;b.select()},setCursorInto:function(d){var b=new a.Utils.RangeObject;b.startContainer=b.endContainer=d;b.startOffset=b.endOffset=0;
b.select()},isEditingHost:function(a){return a&&1==a.nodeType&&("true"==a.contentEditable||a.parentNode&&9==a.parentNode.nodeType&&"on"==a.parentNode.designMode)},isEditable:function(a){return a&&!this.isEditingHost(a)&&(1!=a.nodeType||"false"!=a.contentEditable)&&(this.isEditingHost(a.parentNode)||this.isEditable(a.parentNode))},getEditingHostOf:function(a){if(this.isEditingHost(a))return a;if(this.isEditable(a)){for(a=a.parentNode;!this.isEditingHost(a);)a=a.parentNode;return a}return null},inSameEditingHost:function(a,
d){return this.getEditingHostOf(a)&&this.getEditingHostOf(a)==this.getEditingHostOf(d)},isBlockNode:function(a){return a&&(a.nodeType==p.Node.ELEMENT_NODE&&-1==p(["inline","inline-block","inline-table","none"]).indexOf(p.getComputedStyle(a).display)||a.nodeType==p.Node.DOCUMENT_NODE||a.nodeType==p.Node.DOCUMENT_FRAGMENT_NODE)},getFirstVisibleChild:function(a,d){if(!a||a.nodeType==p.Node.TEXT_NODE&&this.isEmpty(a)||a.nodeType==p.Node.ELEMENT_NODE&&0==a.offsetHeight&&-1===l.inArray(a.nodeName.toLowerCase(),
this.nonEmptyTags))return null;if(a.nodeType==p.Node.TEXT_NODE||a.nodeType==p.Node.ELEMENT_NODE&&0==a.childNodes.length||!l(a).contentEditable())return d?a:null;var b;for(b=0;b<a.childNodes.length;++b){var c=this.getFirstVisibleChild(a.childNodes[b],!0);if(null!=c)return c}return null},getLastVisibleChild:function(a,d){if(!a||a.nodeType==p.Node.TEXT_NODE&&this.isEmpty(a)||a.nodeType==p.Node.ELEMENT_NODE&&0==a.offsetHeight&&-1===l.inArray(a.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(a.nodeType==
p.Node.TEXT_NODE||a.nodeType==p.Node.ELEMENT_NODE&&0==a.childNodes.length||!l(a).contentEditable())return d?a:null;var b;for(b=a.childNodes.length-1;0<=b;--b){var c=this.getLastVisibleChild(a.childNodes[b],!0);if(null!=c)return c}return null}});a.Utils.Dom=new b;return a.Utils.Dom});define("aloha/pluginmanager",["jquery","util/class"],function(l,b){function p(b,f){if(0===b.length)f&&f();else{var c=b.length,e=function(){0===--c&&f&&f()},g,q;for(g=0;g<b.length;g++)q=b[g],q.settings=q.settings||{},"undefined"===
typeof q.settings.enabled&&(q.settings.enabled=!0),q.settings.enabled&&q.checkDependencies()?(q=q.init())&&"function"===typeof q.done?q.done(e):e():e()}}var m=window.Aloha;return new (b.extend({plugins:{},init:function(b,f){var c=this.plugins,e=m&&m.settings&&m.settings.plugins,g;for(g in e)e.hasOwnProperty(g)&&c[g]&&(c[g].settings=e[g]||{});var q;if(c&&0===f.length)for(q in f=[],c)c.hasOwnProperty(q)&&f.push(q);e=f;g=[];var a;for(a=0;a<e.length;a++)(q=c[e[a]])&&g.push(q);p(g,b)},register:function(b){if(!b.name)throw Error("Plugin does not have an name.");
if(this.plugins[b.name])throw Error('Already registered the plugin "'+b.name+'"!');this.plugins[b.name]=b},makeClean:function(b){for(var f in this.plugins)this.plugins.hasOwnProperty(f)&&(m.Log.isDebugEnabled()&&m.Log.debug(this,"Passing contents of HTML Element with id { "+b.attr("id")+" } for cleaning to plugin { "+f+" }"),this.plugins[f].makeClean(b))},toString:function(){return"pluginmanager"}}))});define("aloha/core",["jquery","aloha/pluginmanager"],function(l,b){function p(){var b=l.browser,
e=b.version;return!(b.webkit&&532.5>parseFloat(e)||b.mozilla&&1.9>parseFloat(e)||b.msie&&7>e||b.opera&&11>e)}function m(){l("html").mousedown(function(b){var e;if(e=k.activeEditable)if(e=!k.eventHandled)b=l(b.target),e=!(b.is(".aloha-dialog")||b.closest(".aloha").length);e&&k.deactivateEditable()}).mouseup(function(){k.eventHandled=!1})}var k=window.Aloha,f=[{fn:null,event:null,deferred:null},{fn:function(b,e){if(p())l.browser.webkit?l("html").addClass("aloha-webkit"):l.browser.opera?l("html").addClass("aloha-opera"):
l.browser.msie?l("html").addClass("aloha-ie"+parseInt(l.browser.version,10)):l.browser.mozilla&&l("html").addClass("aloha-mozilla"),-1!==navigator.appVersion.indexOf("Win")?k.OSName="Win":-1!==navigator.appVersion.indexOf("Mac")?k.OSName="Mac":-1!==navigator.appVersion.indexOf("X11")?k.OSName="Unix":-1!==navigator.appVersion.indexOf("Linux")&&(k.OSName="Linux"),m(),k.settings.base=k.getAlohaUrl(),k.Log.init(),k.settings.errorhandling&&(window.onerror=function(a,d,b){k.Log.error(k,"Error message: "+
a+"\nURL: "+d+"\nLine Number: "+b);return!0}),b(),e();else{var g=window.console;if(g){var f=g.error?"error":g.log?"log":null;if(f)g[f]("This browser is not supported")}}},event:null,deferred:null},{fn:function(b,e){k.RepositoryManager.init();b();e()},event:null,deferred:null},{fn:function(c,e){if(0===k.loadedPlugins.length){var g=b.plugins,f;for(f in g)g.hasOwnProperty(f)&&k.loadedPlugins.push(f)}var a=!1;b.init(function(){a||(c(),a=!0);e()},k.loadedPlugins);a||(c(),a=!0)},event:"aloha-plugins-loaded",
deferred:null},{fn:function(b,e){var g;for(g=0;g<k.editables.length;g++)k.editables[g].ready||k.editables[g].init();b();e()},event:null,deferred:null},{fn:null,event:"aloha-ready",deferred:null}];l.extend(!0,k,{version:"${version}",editables:[],activeEditable:null,settings:{},defaults:{},ui:{},OSName:"Unknown",loadedPlugins:[],_pluginBaseUrlByName:{},init:function(){k.initialize(f)},getLoadedPlugins:function(){return this.loadedPlugins},isPluginLoaded:function(b){var e=!1;l.each(this.loadedPlugins,
function(g,f){if(b===f.toString())return e=!0,!1});return e},activateEditable:function(b){var e=k.editables,g;for(g=0;g<e.length;g++)e[g]!==b&&e[g].isActive&&e[g].blur();k.activeEditable=b},getActiveEditable:function(){return k.activeEditable},deactivateEditable:function(){k.activeEditable&&(k.activeEditable.blur(),k.activeEditable=null)},getEditableById:function(b){var e=l("#"+b);e.length&&"textarea"===e[0].nodeName.toLowerCase()&&(b+="-aloha");for(e=0;e<k.editables.length;e++)if(k.editables[e].getId()===
b)return k.editables[e];return null},isEditable:function(b){var e,g;e=0;for(g=k.editables.length;e<g;e++)if(k.editables[e].originalObj.get(0)===b)return!0;return!1},getEditableHost:function(){var b=function(b){var c;for(c=0;c<k.editables.length;c++)if(k.editables[c].originalObj[0]===b)return k.editables[c];return null};return function(e){if(!e||0===e.length)return null;var g=b(e[0]);g||e.parents().each(function(e,a){if(g=b(a))return!1});return g}}(),log:function(b,e,g){"undefined"!==typeof k.Log&&
k.Log.log(b,e,g)},registerEditable:function(b){k.editables.push(b)},unregisterEditable:function(b){b=l.inArray(b,k.editables);-1!==b&&k.editables.splice(b,1)},isModified:function(){var b;for(b=0;b<k.editables.length;b++)if(k.editables[b].isModified&&k.editables[b].isModified())return!0;return!1},getAlohaUrl:function(b){return k.settings.baseUrl||""},getPluginUrl:function(b){if(!b)return null;(b=k.settings._pluginBaseUrlByName[b])&&(b.match("^(/|http[s]?:).*")||(b=k.getAlohaUrl()+"/"+b));return b},
disableObjectResizing:function(){try{var b;try{b=document.queryCommandSupported("enableObjectResizing")}catch(e){b=!1,k.Log.log("enableObjectResizing is not supported.")}b&&(document.execCommand("enableObjectResizing",!1,!1),k.Log.log("enableObjectResizing disabled."))}catch(g){k.Log.error(g,"Could not disable enableObjectResizing")}},toString:function(){return"Aloha"}});return k});define("aloha/console",["aloha/core","util/class","jquery"],function(l,b,p){b=b.extend({init:function(){"undefined"!==
typeof l.settings.logLevels&&l.settings.logLevels||(l.settings.logLevels={error:!0,warn:!0});"undefined"!==typeof l.settings.logHistory&&l.settings.logHistory||(l.settings.logHistory={});l.settings.logHistory.maxEntries||(l.settings.logHistory.maxEntries=100);l.settings.logHistory.highWaterMark||(l.settings.logHistory.highWaterMark=90);l.settings.logHistory.levels||(l.settings.logHistory.levels={error:!0,warn:!0});this.flushLogHistory();l.trigger("aloha-logger-ready")},logHistory:[],highWaterMarkReached:!1,
log:function(b,k,f){"undefined"===typeof k&&(f=b);"string"!==typeof k&&k&&k.toString&&(k=k.toString());"undefined"===typeof f&&(f=k,k=void 0);"undefined"!==typeof b&&b||(b="log");b=b.toLowerCase();if("undefined"!==typeof l.settings.logLevels&&l.settings.logLevels[b]){k=k||"Unkown Aloha Component";this.addToLogHistory({level:b,component:k,message:f,date:new Date});var c=window.console;switch(b){case "error":window.console&&c.error&&(k||f?c.error(k+": "+f):c.error("Error occured without message and component"));
break;case "warn":window.console&&c.warn&&c.warn(k+": "+f);break;case "info":window.console&&c.info&&c.info(k+": "+f);break;case "debug":window.console&&c.log&&c.log(k+" ["+b+"]: "+f);break;default:window.console&&c.log&&c.log(k+" ["+b+"]: "+f)}}},error:function(b,k){this.log("error",b,k)},warn:function(b,k){this.log("warn",b,k)},info:function(b,k){this.log("info",b,k)},debug:function(b,k){this.log("debug",b,k)},deprecated:function(b,k){this.log("warn",b,k);if(l.settings.logLevels.deprecated)throw Error(k);
},isLogLevelEnabled:function(b){return l.settings&&l.settings.logLevels&&l.settings.logLevels[b]},isErrorEnabled:function(){return this.isLogLevelEnabled("error")},isWarnEnabled:function(){return this.isLogLevelEnabled("warn")},isInfoEnabled:function(){return this.isLogLevelEnabled("info")},isDebugEnabled:function(){return this.isLogLevelEnabled("debug")},addToLogHistory:function(b){l.settings.logHistory||this.init();if(!(0>=l.settings.logHistory.maxEntries)&&l.settings.logHistory.levels[b.level])for(this.logHistory.push(b),
!this.highWaterMarkReached&&this.logHistory.length>=l.settings.logHistory.maxEntries*l.settings.logHistory.highWaterMark/100&&(l.trigger("aloha-log-full"),this.highWaterMarkReached=!0);this.logHistory.length>l.settings.logHistory.maxEntries;)this.logHistory.shift()},getLogHistory:function(){return this.logHistory},flushLogHistory:function(){this.logHistory=[];this.highWaterMarkReached=!1}});b=new b;return l.Log=l.Console=b});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||
{};define("util/range",["jquery","util/dom","util/class","aloha/console","aloha/rangy-core"],function(l,b,p,m,k){function f(b,a){var d=[],c;for(c=1===b.nodeType?b:b.parentNode;c&&c!==a&&9!==c.nodeType;)1===c.nodeType&&d.push(c),c=c.parentNode;return d}function c(b,a,d){var e,g,f=b.length;for(g=0;g<f;g++)e=b[g],"none"!==e.type&&"collapsed"!==e.type&&(e.domobj.nodeName===a&&d.push(e.domobj),0<e.children.length&&c(e.children,a,d))}var e=window.GENTICS,g=window.Aloha;e.Utils.RangeObject=p.extend({_constructor:function(b){"object"===
typeof b?("undefined"!==typeof b.startContainer&&(this.startContainer=b.startContainer),"undefined"!==typeof b.startOffset&&(this.startOffset=b.startOffset),"undefined"!==typeof b.endContainer&&(this.endContainer=b.endContainer),"undefined"!==typeof b.endOffset&&(this.endOffset=b.endOffset)):!0===b&&this.initializeFromUserSelection()},startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0,deleteContents:function(){b.removeRange(this)},log:function(b){m.deprecated("Utils.RangeObject",
'log() is deprecated. use console.log() from module "aloha/console" instead: '+b)},isCollapsed:function(){return!this.endContainer||this.startContainer===this.endContainer&&this.startOffset===this.endOffset},getCommonAncestorContainer:function(){if(this.commonAncestorContainer)return this.commonAncestorContainer;this.updateCommonAncestorContainer();return this.commonAncestorContainer},getContainerParents:function(b,a){var d=a?this.endContainer:this.startContainer;return d?l(f(d,b?b[0]:null)):!1},
getStartContainerParents:function(b){return this.getContainerParents(b,!1)},getEndContainerParents:function(b){return this.getContainerParents(b,!0)},updateCommonAncestorContainer:function(b){if(b)this.commonAncestorContainer=b;else{var a=this.getStartContainerParents(),d=this.getEndContainerParents(),c;if(!(0<a.length&&0<d.length))return m.warn("aloha/range","could not find commonAncestorContainer"),!1;for(c=0;c<a.length;c++)if(-1!=d.index(a[c])){this.commonAncestorContainer=a[c];break}}m.debug(b?
"commonAncestorContainer was set successfully":"commonAncestorContainer was calculated successfully");return!0},getCollapsedIERange:function(b,a){var d=document.body.createTextRange(),c,e,g;g=this.searchElementToLeft(b,a);g.element?(c=document.body.createTextRange(),c.moveToElementText(g.element),d.setEndPoint("StartToEnd",c),0!==g.characters?d.moveStart("character",g.characters):(d.moveStart("character",1),d.moveStart("character",-1))):(this.searchElementToRight(b,a),e=3==b.nodeType?b.parentNode:
b,c=document.body.createTextRange(),c.moveToElementText(e),d.setEndPoint("StartToStart",c),0!==g.characters&&d.moveStart("character",g.characters));d.collapse();return d},select:function(){var b;if("undefined"===typeof this.startContainer||"undefined"===typeof this.endContainer)return m.warn("can not select an empty range"),!1;b=k.createRange();b.setStart(this.startContainer,this.startOffset);b.setEnd(this.endContainer,this.endOffset);k.getSelection().setSingleRange(b)},searchElementToLeft:function(b,
a){var d,c=0;3===b.nodeType?(c=a,d=b.previousSibling):0<a&&(d=b.childNodes[a-1]);for(;d&&3===d.nodeType;)c+=d.data.length,d=d.previousSibling;return{element:d,characters:c}},searchElementToRight:function(b,a){var d,c=0;3===b.nodeType?(c=b.data.length-a,d=b.nextSibling):a<b.childNodes.length&&(d=b.childNodes[a]);for(;d&&3===d.nodeType;)c+=d.data.length,d=d.nextSibling;return{element:d,characters:c}},update:function(b){m.debug("now updating rangeObject");this.initializeFromUserSelection(b);this.updateCommonAncestorContainer()},
initializeFromUserSelection:function(b){b=k.getSelection();if(!b||!b.rangeCount)return!1;b=b.getRangeAt(0);if(!b)return!1;this.startContainer=b.startContainer;this.endContainer=b.endContainer;this.startOffset=b.startOffset;this.endOffset=b.endOffset;this.correctRange()},correctRange:function(){var b,a;this.clearCaches();if(this.isCollapsed()){if(1===this.startContainer.nodeType){if(0<this.startOffset&&3===this.startContainer.childNodes[this.startOffset-1].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset-
1];this.startOffset=this.startContainer.data.length;this.endContainer=this.startContainer;this.endOffset=this.startOffset;return}if(0<this.startOffset&&1===this.startContainer.childNodes[this.startOffset-1].nodeType){if(b=e.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!0)){this.startContainer=this.endContainer=b;this.startOffset=this.endOffset=b.data.length;return}if(b=e.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!1)){this.startContainer=this.endContainer=
b;this.startOffset=this.endOffset=0;return}}if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset];this.startOffset=0;this.endContainer=this.startContainer;this.endOffset=0;return}}3===this.startContainer.nodeType&&0===this.startOffset&&(b=e.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,e.Utils.Dom.getIndexInParent(this.startContainer),!0))&&0<l(b).closest(g.activeEditable.obj).length&&
(this.startContainer=this.endContainer=b,this.startOffset=this.endOffset=b.data.length)}else{if(1===this.startContainer.nodeType)if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType)this.startContainer=this.startContainer.childNodes[this.startOffset],this.startOffset=0;else if(this.startOffset<this.startContainer.childNodes.length&&1===this.startContainer.childNodes[this.startOffset].nodeType){b=!1;for(a=this.startContainer.childNodes[this.startOffset];!1===
b&&a.childNodes&&0<a.childNodes.length;)a=a.childNodes[0],3===a.nodeType&&(b=a);!1!==b&&(this.startContainer=b,this.startOffset=0)}3===this.startContainer.nodeType&&this.startOffset===this.startContainer.data.length&&(b=e.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,e.Utils.Dom.getIndexInParent(this.startContainer)+1,!1))&&(this.startContainer=b,this.startOffset=0);if(3===this.endContainer.nodeType&&0===this.endOffset)if(this.endContainer.previousSibling&&3===this.endContainer.previousSibling.nodeType)this.endContainer=
this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length;else if(this.endContainer.previousSibling&&1===this.endContainer.previousSibling.nodeType&&this.endContainer.parentNode){b=this.endContainer.parentNode;for(a=0;a<b.childNodes.length;++a)if(b.childNodes[a]==this.endContainer){this.endOffset=a;break}this.endContainer=b}1==this.endContainer.nodeType&&0===this.endOffset&&this.endContainer.previousSibling&&(3===this.endContainer.previousSibling.nodeType?(this.endContainer=this.endContainer.previousSibling,
this.endOffset=this.endContainer.data.length):1===this.endContainer.previousSibling.nodeType&&this.endContainer.previousSibling.childNodes&&0<this.endContainer.previousSibling.childNodes.length&&(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.childNodes.length));if(1==this.endContainer.nodeType)if(0<this.endOffset&&3===this.endContainer.childNodes[this.endOffset-1].nodeType)this.endContainer=this.endContainer.childNodes[this.endOffset-1],this.endOffset=this.endContainer.data.length;
else if(0<this.endOffset&&1===this.endContainer.childNodes[this.endOffset-1].nodeType){b=!1;for(a=this.endContainer.childNodes[this.endOffset-1];!1===b&&a.childNodes&&0<a.childNodes.length;)a=a.childNodes[a.childNodes.length-1],3===a.nodeType&&(b=a);!1!==b&&(this.endContainer=b,this.endOffset=this.endContainer.data.length)}}},clearCaches:function(){this.commonAncestorContainer=void 0},getRangeTree:function(b){"undefined"===typeof b&&(b=this.getCommonAncestorContainer());this.inselection=!1;return this.recursiveGetRangeTree(b)},
recursiveGetRangeTree:function(b){var a=0,d=this,c=[];l(b).contents().each(function(g){var f="none",k=!1,m=!1,l=!1,p=!1,E=!1,D=!1;d.isCollapsed()&&b===d.startContainer&&d.startOffset===g&&(c[a]=new e.Utils.RangeTree,c[a].type="collapsed",c[a].domobj=void 0,d.inselection=!1,l=!0,a++);if(!d.inselection&&!l)switch(this.nodeType){case 3:this===d.startContainer&&(d.inselection=!0,f=0<d.startOffset?"partial":"full",k=d.startOffset,m=this.length);break;case 1:this===d.startContainer&&0===d.startOffset&&
(d.inselection=!0,f="full"),b===d.startContainer&&d.startOffset===g&&(d.inselection=!0,f="full")}if(d.inselection&&!l){"none"==f&&(f="full");switch(this.nodeType){case 3:this===d.endContainer&&(d.inselection=!1,d.endOffset<this.length&&(f="partial"),!1===k&&(k=0),m=d.endOffset);break;case 1:this===d.endContainer&&0===d.endOffset&&(d.inselection=!1)}b===d.endContainer&&d.endOffset<=g&&(d.inselection=!1,f="none")}c[a]=new e.Utils.RangeTree;c[a].domobj=this;c[a].type=f;"partial"==f&&(c[a].startOffset=
k,c[a].endOffset=m);c[a].children=d.recursiveGetRangeTree(this);if(0<c[a].children.length){for(g=0;g<c[a].children.length;++g)switch(c[a].children[g].type){case "none":p=!0;break;case "full":D=!0;break;case "partial":E=!0}E||D&&p?c[a].type="partial":!D||E||p||(c[a].type="full")}a++});this.isCollapsed()&&b===this.startContainer&&this.startOffset==b.childNodes.length&&(c[a]=new e.Utils.RangeTree,c[a].type="collapsed",c[a].domobj=void 0);return c},findMarkup:function(b,a,d){d=d?this.endContainer:this.startContainer;
var c;a=a?a[0]:null;if(d){a=f(d,a);d=0;for(c=a.length;d<c;d++)if(b.apply(a[d]))return a[d];return!1}},findAllMarkupByTagName:function(b,a){var d=a.getRangeTree(),e=[];b=b.toUpperCase();c(d,b,e);return e},getText:function(){return this.isCollapsed()?"":this.recursiveGetText(this.getRangeTree())},recursiveGetText:function(b){if(!b)return"";var a=this,d="";l.each(b,function(){"full"==this.type?d+=l(this.domobj).text():"partial"==this.type&&3===this.domobj.nodeType?d+=l(this.domobj).text().substring(this.startOffset,
this.endOffset):"partial"==this.type&&1===this.domobj.nodeType&&this.children&&(d+=a.recursiveGetText(this.children))});return d}});e.Utils.RangeTree=p.extend({domobj:{},type:null,children:[]});return e.Utils.RangeObject});define("util/functions",[],function(){return{identity:function(l){return l},noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1},complement:function(l){return function(){return!l.apply(this,arguments)}}}});define("util/arrays",["util/functions"],function(l){function b(b,
c){var f,a,d=[];f=0;for(a=b.length;f<a;f++)d.push(c(b[f]));return d}function p(b,c){return b.map(c)}function m(b,c){var f,a,d,n=[];f=0;for(a=b.length;f<a;f++)d=b[f],c(d)&&n.push(d);return n}function k(b,c){var f,a;f=0;for(a=b.length;f<a;f++)if(c===b[f])return f;return-1}function f(b,c){return-1!==k(b,c)}function c(b,c){var f,a;f=0;for(a=b.length;f<a;f++)if(c(b[f]))return!0;return!1}return{filter:m,indexOf:k,reduce:function(b,c,f){var a,d;a=0;for(d=b.length;a<d;a++)c=f(c,b[a]);return c},forEach:function(b,
c){var f,a;f=0;for(a=b.length;f<a;f++)c(b[f],f,b)},some:c,every:function(b,g){return!c(b,l.complement(g))},map:Array.prototype.map?p:b,contains:f,equal:function(b,c,f){var a,d=b.length;if(d!==c.length)return!1;if(f)for(a=0;a<d;a++){if(!f(b[a],c[a]))return!1}else for(a=0;a<d;a++)if(b[a]!==c[a])return!1;return!0},applyNotNull:function(b,c){return null==b?null:c(b)},sortUnique:function(b,c){var f;if(c)for(b.sort(c),f=1;f<b.length;f++)0===c(b[f],b[f-1])&&b.splice(f--,1);else for(b.sort(),f=1;f<b.length;f++)b[f]==
b[f-1]&&b.splice(f--,1);return b},intersect:function(b,c){return m(b,function(b){return f(c,b)})},subtract:function(b,c){return m(b,function(b){return!f(c,b)})},second:function(b){return b[1]},last:function(b){return b.length?b[b.length-1]:null}}});define("util/strings",["jquery"],function(l){var b=/\s+/;return{words:function(l){l=l.split(b);l.length&&""===l[0]&&l.shift();l.length&&""===l[l.length-1]&&l.pop();return l},dashesToCamelCase:function(b){return b.replace(/[\-]([a-z])/gi,function(b,k){return k.toUpperCase()})},
camelCaseToDashes:function(b){return b.replace(/[A-Z]/g,function(b){return"-"+b.toLowerCase()})},splitIncl:function(b,m){for(var k=[],f=0,c;null!=(c=m.exec(b));)f<c.index&&(k.push(b.substring(f,c.index)),f=c.index),f+=c[0].length,k.push(c[0]);f<b.length&&k.push(b.substring(f,b.length));return k},empty:function(b){return""===b||null==b}}});define("PubSub",[],function(){var l={},b={},p=0;return{sub:function(m,k){if("function"!==typeof k)return-1;var f=l[m];f||(f=l[m]=[]);f.push(++p);b[p]={channel:m,
callback:k};return p},unsub:function(m){if(-1===m||!b[m])return!1;var k=b[m]&&l[b[m].channel];delete b[m];for(var f=k.length;f;)if(k[--f]===m)return k.splice(f,1),!0;return!1},pub:function(m,k){var f=m.split("."),c,e=f.length,g="",q=0;for(c=0;c<e;++c){var g=g+((0===c?"":".")+f[c]),a;var d=g;a=k;if(l[d]){a?"object"!==typeof a&&(a={data:a}):a={};a.channel=d;for(var d=l[d].slice(),n=void 0,n=0;n<d.length;++n)b[d[n]].callback(a);a=n}else a=0;q+=a}return q}}});define("util/maps",[],function(){return{isEmpty:function(l){for(var b in l)if(l.hasOwnProperty(b))return!1;
return!0},fillTuples:function(l,b){for(var p=b.length,m;p--;)m=b[p],l[m[0]]=m[1];return l},fillKeys:function(l,b,p){for(var m=b.length;m--;)l[b[m]]=p;return l},keys:function(l){var b=[],p;for(p in l)l.hasOwnProperty(p)&&b.push(p);return b},forEach:function(l,b){for(var p in l)l.hasOwnProperty(p)&&b(l[p],p,l)}}});define("util/html",["jquery","util/dom","util/maps","util/arrays"],function(l,b,p,m){function k(a){return d.test(a)||y.test(a)}function f(a){return 3===a.nodeType&&k(a.data)}function c(a){return B[a.nodeName]}
function e(a){return 3===a.nodeType&&!a.length}var g={A:!0,B:!0,EM:!0,FONT:!0,I:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0},q="address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr noscript ol output p pre section table tfoot ul video".split(" "),a=["\\u200B","\\u200C","\\u200D","\\uFEFF"],d=RegExp("^[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+$"),
n=RegExp("^[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+"),v=RegExp("[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+$"),y=RegExp("["+a.join("")+"]+"),A=RegExp("^["+a.join("")+"]+"),z=RegExp("["+a.join("")+"]+$"),B={};p.fillKeys(B,
q,!0);p.fillKeys(B,m.map(q,function(a){return a.toUpperCase()}),!0);return{BLOCKLEVEL_ELEMENTS:q,VOID_ELEMENTS:"area base br col command embed hr img input keygen link meta param source track wbr".split(" "),TEXT_LEVEL_SEMANTIC_ELEMENTS:"a abbr b bdi bdo cite code del dfn em i ins kbd mark q rp rt ruby s samp small strong sub sup time u var".split(" "),isBlock:c,isIgnorableWhitespace:e,isInlineFormattable:function(a){return g[a.nodeName]},isProppedBlock:function(a){if(!B[a.nodeName])return!1;var d=
!1;a=a.children;var b=a.length,c;for(c=0;c<b;c++)if(!d&&"br"===a[c].nodeName.toLowerCase())d=!0;else if(!e(a[c]))return!1;return d},isEditingHost:function(a){return 1===a.nodeType&&"true"===a.contentEditable},findNodeLeft:function(a,d){for(;a&&!d(a);)a=a.nextSibling;return a},findNodeRight:function(a,d){for(;a&&!d(a);)a=a.previousSibling;return a},allowNestedParagraph:function(a){return a.obj[0]&&b.allowsNesting(a.obj[0],l("<p>")[0])?!0:!1},trimWhitespaceCharacters:function(a){return a.replace(n,
"").replace(v,"").replace(A,"").replace(z,"")},isWSPorZWSPNode:f,isWSPorZWSPText:k,isUnrenderedNode:function(a){return 3===a.nodeType&&0===a.data.length||a===a.parentNode.lastChild&&c(a.parentNode)&&"BR"===a.nodeName?!0:f(a)}}});define("aloha/engine","aloha/core aloha/ecma5shims util/maps util/html util/dom jquery".split(" "),function(l,b,p,m,k,f){function c(a,d){return a.hasAttribute?a.hasAttribute(d):"undefined"!==typeof a.attributes[d]}function e(a,d){var b=a.cloneNode(!1);b.deleteData(0,d);a.deleteData(d,
a.length-d);var c=a.nextSibling,e=a.parentNode;c?e.insertBefore(b,c):e.appendChild(b);return b}function g(a){return null===a||!a||a===bc}function q(a,d){"string"==typeof d&&(d=[d]);"object"==typeof d&&(d=b(d).map(function(a){return a.toUpperCase()}));return a&&1==a.nodeType&&g(a.namespaceURI)&&("undefined"==typeof d||-1!=b(d).indexOf(a.tagName))}function a(a){return a&&1==a.nodeType&&g(a.namespaceURI)}function d(a,d){return a&&1==a.nodeType&&g(a.namespaceURI)&&d.toUpperCase()===a.nodeName}function n(a,
d){var b;if(b=a)if(b=1==a.nodeType)if(b=g(a.namespaceURI))a:{b=a.nodeName;var c,e;b=b.toUpperCase();c=0;for(e=d.length;c<e;c++)if(d[c].toUpperCase()===b){b=!0;break a}b=!1}return b}function v(a,d){return a&&1==a.nodeType&&g(a.namespaceURI)&&d[a.nodeName]}function y(a){var d,b=0;if(!a||!a.style)return 0;if("undefined"!==typeof a.style.length)return a.style.length;for(d in a.style)a.style[d]&&0!==a.style[d]&&"false"!==a.style[d]&&b++;return b}function A(a){if(!a)return null;var d=[],b;for(b=a.length>>>
0;b--;)d[b]=a[b];return d}function z(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function B(a){return a.hasChildNodes()?a.firstChild:z(a)}function C(a){if(a.previousSibling){for(a=a.previousSibling;a.hasChildNodes();)a=a.lastChild;return a}return a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE?a.parentNode:null}function E(a,d){return a&&d&&Boolean(b.compareDocumentPosition(a,d)&b.Node.DOCUMENT_POSITION_CONTAINED_BY)}function D(a,d){return(a||d)&&(a==d||E(a,d))}function H(a,
d){return d&&a&&Boolean(b.compareDocumentPosition(d,a)&b.Node.DOCUMENT_POSITION_CONTAINED_BY)}function r(a,d){return Boolean(b.compareDocumentPosition(a,d)&b.Node.DOCUMENT_POSITION_FOLLOWING)}function t(a){for(var d=[];a.parentNode;)d.unshift(a.parentNode),a=a.parentNode;return d}function s(a){for(var d=[],b=z(a);null!=(a=B(a))&&a!=b;)d.push(a);return d}function u(a){return{"xx-small":1,small:2,medium:3,large:4,"x-large":5,"xx-large":6,"xxx-large":7}[a]}function N(d){return"ltr"==d.dir?"ltr":"rtl"==
d.dir?"rtl":a(d.parentNode)?N(d.parentNode):"ltr"}function x(a){switch(a.nodeType){case b.Node.PROCESSING_INSTRUCTION_NODE:case b.Node.DOCUMENT_TYPE_NODE:return 0;case b.Node.TEXT_NODE:case b.Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function K(a,d,c,e){if(a==c){if(d==e)return"equal";if(d<e)return"before";if(d>e)return"after"}var g=b.compareDocumentPosition(c,a);if(g&b.Node.DOCUMENT_POSITION_FOLLOWING){e=K(c,e,a,d);if("before"==e)return"after";if("after"==e)return"before"}if(g&
b.Node.DOCUMENT_POSITION_CONTAINS){for(;c.parentNode!=a;)c=c.parentNode;if(k.getIndexInParent(c)<d)return"after"}return"before"}function G(a){for(;null!=a.parentNode;)a=a.parentNode;return a}function Q(a,d){return"after"!==K(a,0,d.startContainer,d.startOffset)||"before"!==K(a,x(a),d.endContainer,d.endOffset)?!1:G(a)==G(d.startContainer)}function S(a,d){"undefined"==typeof d&&(d=function(){return!0});for(var b=a.startContainer,b=b.hasChildNodes()&&a.startOffset<b.childNodes.length?b.childNodes[a.startOffset]:
a.startOffset==x(b)?z(b):B(b),c=a.endContainer,c=c.hasChildNodes()&&a.endOffset<c.childNodes.length?c.childNodes[a.endOffset]:z(c),e=[];r(b,c);)Q(b,a)&&d(b)?(e.push(b),b=z(b)):b=B(b);return e}function ha(a,d){"undefined"==typeof d&&(d=function(){return!0});for(var b=a.startContainer,b=b.hasChildNodes()&&a.startOffset<b.childNodes.length?b.childNodes[a.startOffset]:a.startOffset==x(b)?z(b):B(b),c=a.endContainer,c=c.hasChildNodes()&&a.endOffset<c.childNodes.length?c.childNodes[a.endOffset]:z(c),e=[];r(b,
c);)Q(b,a)&&d(b)&&e.push(b),b=B(b);return e}function ba(a){if("currentcolor"==a.toLowerCase())return null;var d=document.createElement("span");document.body.appendChild(d);d.style.color="black";var c=document.createElement("span");d.appendChild(c);c.style.color=a;a=b.getComputedStyle(c).color;if("rgb(0, 0, 0)"==a&&(d.color="white",a=b.getComputedStyle(c).color,"rgb(0, 0, 0)"!=a))return null;document.body.removeChild(d);return/^rgba\([0-9]+, [0-9]+, [0-9]+, 1\)$/.test(a)?a.replace("rgba","rgb").replace(", 1)",
")"):"transparent"==a?"rgba(0, 0, 0, 0)":a}function V(a){a=a.toLowerCase();if(-1!=b("aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkgrey darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkslategrey darkturquoise darkviolet deeppink deepskyblue dimgray dimgrey dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray green greenyellow grey honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightgrey lightpink lightsalmon lightseagreen lightskyblue lightslategray lightslategrey lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray slategrey snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" ")).indexOf(a))return a;
a=ba(a);var d=/^rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)$/.exec(a);return d?"#"+parseInt(d[1],10).toString(16).replace(/^.$/,"0$&")+parseInt(d[2],10).toString(16).replace(/^.$/,"0$&")+parseInt(d[3],10).toString(16).replace(/^.$/,"0$&"):/^#[abcdef0123456789]+$/i.exec(a)?a:null}function M(a){a=b(a).trim();if(/^[\-+]?[0-9]+(\.[0-9]+)?([eE][\-+]?[0-9]+)?$/.test(a)){var d;"+"==a[0]?(a=a.slice(1),d="relative-plus"):"-"==a[0]?(a=a.slice(1),d="relative-minus"):d="absolute";a=parseInt(a,10);"relative-plus"==d&&
(a+=3);"relative-minus"==d&&(a=3-a);1>a&&(a=1);7<a&&(a=7);a={1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[a]}return a}function U(a){a=M(a);if(-1==f.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))&&!/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc|px)$/.test(a))return null;var d=document.createElement("font");document.body.appendChild(d);"xxx-large"==a?d.size=7:d.style.fontSize=a;a=parseInt(b.getComputedStyle(d).fontSize,10);document.body.removeChild(d);
for(var c=1;7>c;){d=document.createElement("font");d.size=c;document.body.appendChild(d);var e=parseInt(b.getComputedStyle(d).fontSize,10);d.size=1+c;var g=parseInt(b.getComputedStyle(d).fontSize,10);document.body.removeChild(d);if(a<(g+e)/2)return String(c);c++}return"7"}function J(a,d,b,c){var e;0===Cc&&(fb=b);Cc++;try{e=c()}catch(g){throw Cc--,g;}Cc--;return e}function aa(a,d){a=a.toLowerCase();return J(a,"action",d,function(a){return function(){return-1!=f.inArray(a,"copy cut paste selectall stylewithcss usecss".split(" "))||
null!==d}}(a))}function X(a){var d=new window.GENTICS.Utils.RangeObject;d.startContainer=a.startContainer;d.startOffset=a.startOffset;d.endContainer=a.endContainer;d.endOffset=a.endOffset;d.select()}function fa(a,d,b,c){var e=a.toLowerCase(),g=d,f=b;if(1==arguments.length||4<=arguments.length&&"undefined"==typeof g)g=!1;if(2>=arguments.length||4<=arguments.length&&"undefined"==typeof f)f="";return J(e,"action",c,function(a,d,b){return function(){if(!aa(a))return!1;Y[a].action(b,c);X(c);return!0}}(e,
g,f))}function ua(a,d){a=a.toLowerCase();return J(a,"state",d,function(a){return function(){return aa(a,d)?"undefined"!=typeof lc(a,d)?lc(a,d):Y[a].state(d):!1}}(a))}function va(a,d){a=a.toLowerCase();return J(a,"value",d,function(){return Y.hasOwnProperty(a)&&Y[a].hasOwnProperty("value")?"fontsize"==a&&void 0!==Vb("fontsize",d)?U(Vb("fontsize",d)):"undefined"!=typeof Vb(a,d)?Vb(a,d):Y[a].value(d):""})}function la(a){return v(a,Aa)}function oa(a){return a&&(a.nodeType==b.Node.ELEMENT_NODE&&!Xd[b.getComputedStyle(a).display]||
a.nodeType==b.Node.DOCUMENT_NODE||a.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE)}function ka(a){return a&&!oa(a)}function Fa(a){return a&&a.nodeType==b.Node.ELEMENT_NODE&&("true"==a.contentEditable||a.parentNode&&a.parentNode.nodeType==b.Node.DOCUMENT_NODE&&"on"==a.parentNode.designMode)}function O(a){return a&&!Fa(a)&&(a.nodeType!=b.Node.ELEMENT_NODE||"false"!=a.contentEditable||f(a).hasClass("aloha-table-wrapper"))&&(Fa(a.parentNode)||O(a.parentNode))}function sa(a){var d;for(d=0;d<a.childNodes.length;d++)if(O(a.childNodes[d])||
sa(a.childNodes[d]))return!0;return!1}function kb(a){if(Fa(a))return a;if(O(a)){for(a=a.parentNode;!Fa(a);)a=a.parentNode;return a}return null}function La(a,d){return kb(a)&&kb(a)==kb(d)}function Ia(a){if(!d(a,"br"))return!1;for(var c=a.parentNode;"inline"==b.getComputedStyle(c).display;)c=c.parentNode;var e=c.style.height,g=c.style.maxHeight,n=c.style.minHeight;c.style.height="auto";c.style.maxHeight="none";f.browser.msie&&8>f.browser.version||(c.style.minHeight="0");var k=document.createTextNode("\u200b"),
q=c.offsetHeight;if(0==q)throw"isCollapsedLineBreak: original height is zero, bug?";a.parentNode.insertBefore(k,a.nextSibling);a=c.offsetHeight;k.parentNode.removeChild(k);c.style.height=e;c.style.maxHeight=g;f.browser.msie&&8>f.browser.version||(c.style.minHeight=n);return q<a-5}function Ra(a){if(!d(a,"br")||d(a.parentNode,"li")&&1==a.parentNode.childNodes.length)return!1;for(var c=a.parentNode;"inline"==b.getComputedStyle(c).display;)c=c.parentNode;var e=c.style.height,g=c.style.maxHeight,n=c.style.minHeight,
k=c.contentEditable;c.style.height="auto";c.style.maxHeight="none";c.style.minHeight="0";f.browser.msie&&7>=f.browser.version&&(c.contentEditable="false");var q=c.offsetHeight;if(0==q)throw"isExtraneousLineBreak: original height is zero, bug?";var m=a.style.display;a.style.display="none";var l=c.offsetHeight;c.style.height=e;c.style.maxHeight=g;c.style.minHeight=n;f.browser.msie&&7>=f.browser.version&&(c.contentEditable=k);a.style.display=m;return q==l}function Qa(a){var d=b.Node;if(a&&a.nodeType===
d.TEXT_NODE){var c=a.parentNode;a=a.data;if(0===f.trim(a).length)return!0;if(c&&/^[\t\n\r ]+$/.test(a))if(c.nodeType===d.ELEMENT_NODE){if(-1!==f.inArray(b.getComputedStyle(c).whiteSpace,["normal","nowrap"])||"pre-line"===b.getComputedStyle(c).whiteSpace)return!0}else if(c.nodeType===d.DOCUMENT_FRAGMENT_NODE)return!0}return!1}function pb(a){if(!Qa(a))return!1;if(""==a.data)return!0;var c=a.parentNode;if(!c||b(t(a)).some(function(a){return a.nodeType==b.Node.ELEMENT_NODE&&"none"==b.getComputedStyle(a).display}))return!0;
for(;!oa(c)&&c.parentNode;)c=c.parentNode;for(var e=a;e!=c;){e=C(e);if(oa(e)||d(e,"br"))return!0;if(e.nodeType==b.Node.TEXT_NODE&&!Qa(e)||d(e,"img"))break}e=a;for(a=z(c);e!=a;){e=B(e);if(oa(e)||d(e,"br"))return!0;if(e&&e.nodeType==b.Node.TEXT_NODE&&!Qa(e)||d(e,"img"))break}return!1}function pa(a){var c;if(!a||b(t(a).concat(a)).filter(function(a){return a.nodeType==b.Node.ELEMENT_NODE},!0).some(function(a){return"none"==b.getComputedStyle(a).display}))return!1;if(oa(a)||a.nodeType==b.Node.TEXT_NODE&&
!pb(a)||d(a,"img")||d(a,"br")&&!Ra(a))return!0;for(c=0;c<a.childNodes.length;c++)if(pa(a.childNodes[c]))return!0;return!1}function ca(a){return a&&!pa(a)}function Ma(a){var d;if(Ia(a)&&!Ra(a))return!0;if(!ka(a)||a.nodeType!=b.Node.ELEMENT_NODE)return!1;var c=!1;for(d=0;d<a.childNodes.length;d++){if(!ca(a.childNodes[d])&&!Ma(a.childNodes[d]))return!1;Ma(a.childNodes[d])&&(c=!0)}return c}function cb(a){var d;if(a&&a.nodeType!==b.Node.TEXT_NODE)d=!1;else{d=0;a=a.data;for(var c=a.length;d<c&&"\u200b"===
a.charAt(d);)d++;d=d===c}return!d}function ma(a){var d;if(d=a)(d=!a.hasChildNodes())||(d=m.isBlock(a)?(d=m.findNodeRight(a.lastChild,pa))&&"br"===d.nodeName.toLowerCase()&&!m.findNodeRight(d.previousSibling,pa):!1,d=d||!m.findNodeRight(a.lastChild,cb)),d=d&&Fa(a.parentNode)&&!a.previousSibling&&!a.nextSibling;return d}function za(a){var d=a.parentNode,b=k.getIndexInParent(a);d.removeChild(a);return{node:d,offset:b}}function R(){var a;if(fb)a=fb;else if(l.getSelection().rangeCount)a=l.getSelection().getRangeAt(0);
else return null;if(-1==f.inArray(a.startContainer.nodeType,[b.Node.TEXT_NODE,b.Node.ELEMENT_NODE])||-1==f.inArray(a.endContainer.nodeType,[b.Node.TEXT_NODE,b.Node.ELEMENT_NODE])||!(a.startContainer.ownerDocument&&a.endContainer.ownerDocument&&H(a.startContainer,a.startContainer.ownerDocument)&&H(a.endContainer,a.endContainer.ownerDocument)))throw"Invalid active range; test bug?";return a}function Ga(a,d,c,e){-1==c&&(c=d.childNodes.length);var g=a.parentNode,f=k.getIndexInParent(a),n,q=[e];for(n=
0;n<l.getSelection().rangeCount;n++)q.push(l.getSelection().getRangeAt(n));var m=[];b(q).forEach(function(a){m.push([a.startContainer,a.startOffset]);m.push([a.endContainer,a.endOffset])});b(m).forEach(function(a){a[0]==d&&a[1]>c&&a[1]++;a[0]!=g||a[1]!=f&&a[1]!=f+1||(a[0]=d,a[1]+=c-f);a[0]==g&&a[1]>f+1&&a[1]--});d.childNodes.length==c?d.appendChild(a):d.insertBefore(a,d.childNodes[c]);var v=null;if(m[0][1]>m[0][0].childNodes.length&&m[1][1]>m[1][0].childNodes.length)e.setStart(a,0),e.setEnd(a,0);
else{e.setStart(m[0][0],m[0][1]);e.setEnd(m[1][0],m[1][1]);l.getSelection().removeAllRanges();for(n=1;n<q.length;n++)v=l.createRange(),v.setStart(m[2*n][0],m[2*n][1]),v.setEnd(m[2*n+1][0],m[2*n+1][1]),l.getSelection().addRange(v);v&&(e=v)}}function na(a,d){f.browser.msie&&7<=f.browser.version&&"undefined"!==typeof a.attributes[f.expando]&&f(a).removeAttr(f.expando);var b=a.attributes,c;for(c=0;c<b.length;c++){var e=b[c];if("undefined"===typeof e.specified||e.specified)"function"===typeof d.setAttributeNS?
d.setAttributeNS(e.namespaceURI,e.name,e.value):d.setAttribute(e.name,e.value)}}function Ca(a,b,c){if(d(a,b)||!a.parentNode)return a;b=a.ownerDocument.createElement(b);a.parentNode.insertBefore(b,a);for(na(a,b);a.childNodes.length;)Ga(a.firstChild,b,b.childNodes.length,c);a.parentNode.removeChild(a);c.startContainer===a&&(c.startContainer=b);c.endContainer===a&&(c.endContainer=b);return b}function $a(a){var d=a.previousSibling;if(d){for(;d.hasChildNodes();)d=d.lastChild;for(;ca(d)&&!Ra(d)&&d!=a.parentNode;)d=
C(d);O(d)&&Ra(d)&&d.parentNode.removeChild(d)}}function hb(a){for(var d=a;d.hasChildNodes();)d=d.lastChild;for(;ca(d)&&!Ra(d)&&d!=a;)d=C(d);O(d)&&Ra(d)&&d.parentNode.removeChild(d)}function ub(a){$a(a);hb(a)}function ia(a,b,c,e){var g;"undefined"==typeof b&&(b=function(){return!1});"undefined"==typeof c&&(c=function(){return null});if(!a.length||!O(a[0]))return null;ka(a[a.length-1])&&!d(a[a.length-1],"br")&&d(a[a.length-1].nextSibling,"br")&&a.push(a[a.length-1].nextSibling);c=O(a[0].previousSibling)&&
b(a[0].previousSibling)?a[0].previousSibling:O(a[a.length-1].nextSibling)&&b(a[a.length-1].nextSibling)?a[a.length-1].nextSibling:c();if(!c)return null;if(!c.parentNode){a[0].parentNode.insertBefore(c,a[0]);g=e.startContainer;var f=e.startOffset,n=e.endContainer,q=e.endOffset,m=k.getIndexInParent(c);f>=m&&g==c.parentNode&&e.setStart(g,f+1);q>=m&&n==c.parentNode&&e.setEnd(n,q+1);fb&&fb!==e&&(g=fb.startContainer,f=fb.startOffset,n=fb.endContainer,q=fb.endOffset,g==c.parentNode&&f>=m&&fb.setStart(g,
f+1),n==c.parentNode&&q>=m&&fb.setEnd(n,q+1))}f=a[0].parentNode;if(r(c,a[0]))for(!ka(c)&&ka(c.lastChild)&&ka(a[0])&&!d(c.lastChild,"BR")&&c.appendChild(c.ownerDocument.createElement("br")),g=0;g<a.length;g++)Ga(a[g],c,-1,e);else for(!ka(c)&&ka(c.firstChild)&&ka(a[a.length-1])&&!d(a[a.length-1],"BR")&&c.insertBefore(c.ownerDocument.createElement("br"),c.firstChild),g=a.length-1;0<=g;g--)Ga(a[g],c,0,e);O(f)&&!f.hasChildNodes()&&f.parentNode.removeChild(f);if(O(c.nextSibling)&&b(c.nextSibling)){for(!ka(c)&&
ka(c.lastChild)&&ka(c.nextSibling.firstChild)&&!d(c.lastChild,"BR")&&c.appendChild(c.ownerDocument.createElement("br"));c.nextSibling.hasChildNodes();)Ga(c.nextSibling.firstChild,c,-1,e);c.parentNode.removeChild(c.nextSibling)}ub(c);return c}function Na(c,e){if((Jc[e]||n(e,"colgroup table tbody tfoot thead tr".split(" ")))&&"object"==typeof c&&c.nodeType==b.Node.TEXT_NODE&&!/^[ \t\n\f\r]*$/.test(c.data)||(vd[e]||n(e,["script","style","plaintext","xmp"]))&&("object"!=typeof c||c.nodeType!=b.Node.TEXT_NODE)||
"object"==typeof c&&(c.nodeType==b.Node.DOCUMENT_NODE||c.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE||c.nodeType==b.Node.DOCUMENT_TYPE_NODE))return!1;a(c)&&(c=c.tagName.toLowerCase());if("string"!=typeof c)return!0;if(a(e)){for(var g=e;g;){if("a"==c&&d(g,"a")||Aa[c.toUpperCase()]&&v(g,rc)||/^h[1-6]$/.test(c)&&a(g)&&/^H[1-6]$/.test(g.tagName))return!1;g=g.parentNode}e=e.tagName.toLowerCase()}if("object"==typeof e&&(e.nodeType==b.Node.ELEMENT_NODE||e.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE))return!0;if("string"!=
typeof e)return!1;switch(e){case "colgroup":return"col"==c;case "table":return-1!=f.inArray(c,"caption col colgroup tbody td tfoot th thead tr".split(" "));case "tbody":case "thead":case "tfoot":return-1!=f.inArray(c,["td","th","tr"]);case "tr":return-1!=f.inArray(c,["td","th"]);case "dl":return-1!=f.inArray(c,["dt","dd"]);case "dir":case "ol":case "ul":return-1!=f.inArray(c,["dir","li","ol","ul"]);case "hgroup":return/^h[1-6]$/.test(c)}return-1!=f.inArray(c,"body caption col colgroup frame frameset head html tbody td tfoot th thead tr".split(" "))||
-1!=f.inArray(c,["dd","dt"])&&"dl"!=e||"li"==c&&"ol"!=e&&"ul"!=e?!1:(g=yd[e.toUpperCase()])&&g[c.toUpperCase()]?!1:!0}function ib(a,d){return d.collapsed?!1:Q(a,d)||a==d.startContainer&&a.nodeType==b.Node.TEXT_NODE&&x(a)!=d.startOffset||a==d.endContainer&&a.nodeType==b.Node.TEXT_NODE&&0!=d.endOffset||a.hasChildNodes()&&b(a.childNodes).every(function(a){return ib(a,d)})&&!(H(d.startContainer,a)&&d.startContainer.nodeType==b.Node.TEXT_NODE&&0!=d.startOffset||H(d.endContainer,a)&&d.endContainer.nodeType==
b.Node.TEXT_NODE&&d.endOffset!=x(d.endContainer))?!0:!1}function Wa(a,d){"undefined"==typeof d&&(d=function(){return!0});for(var b=a.startContainer;ib(b.parentNode,a);)b=b.parentNode;for(var c=z(a.endContainer),e=[];r(b,c);)ib(b,a)&&d(b)&&e.push(b),b=B(b);return e}function Ta(d){if(!a(d))return!1;if(-1!=f.inArray(d.tagName,"B EM I S SPAN STRIKE STRONG SUB SUP U".split(" "))&&(0==d.attributes.length||1==d.attributes.length&&c(d,"style")))return!0;if("FONT"==d.tagName||"A"==d.tagName){var b=d.attributes.length;
c(d,"style")&&b--;"FONT"==d.tagName&&(c(d,"color")&&b--,c(d,"face")&&b--,c(d,"size")&&b--);"A"==d.tagName&&c(d,"href")&&b--;if(0==b)return!0}return!1}function ac(d){return a(d)&&-1!=f.inArray(d.tagName,"A B EM FONT I S SPAN STRIKE STRONG SUB SUP U".split(" "))?0==d.attributes.length?!0:1<d.attributes.length?!1:c(d,"style")&&0==y(d)||"A"==d.tagName&&c(d,"href")||"FONT"==d.tagName&&(c(d,"color")||c(d,"face")||c(d,"size"))||("B"==d.tagName||"STRONG"==d.tagName)&&c(d,"style")&&1==y(d)&&""!=d.style.fontWeight||
("I"==d.tagName||"EM"==d.tagName)&&c(d,"style")&&1==y(d)&&""!=d.style.fontStyle||("A"==d.tagName||"FONT"==d.tagName||"SPAN"==d.tagName)&&c(d,"style")&&1==y(d)&&""==d.style.textDecoration||-1!=f.inArray(d.tagName,"A FONT S SPAN STRIKE U".split(" "))&&c(d,"style")&&1==y(d)&&("line-through"==d.style.textDecoration||"underline"==d.style.textDecoration||"overline"==d.style.textDecoration||"none"==d.style.textDecoration)?!0:!1:!1}function Sa(a,d,b){return null===d&&null===b||"string"==typeof d&&"string"==
typeof b&&d==b&&!Y[a].hasOwnProperty("equivalentValues")||"string"==typeof d&&"string"==typeof b&&Y[a].hasOwnProperty("equivalentValues")&&Y[a].equivalentValues(d,b)?!0:!1}function ab(a,d,c){if(Sa(a,d,c))return!0;if("fontsize"!=a||"string"!=typeof d||"string"!=typeof c)return!1;var e=ab;if(void 0===e.sizeMap){e.sizeMap={};var g=document.createElement("font");document.body.appendChild(g);b("xx-small small medium large x-large xx-large xxx-large".split(" ")).forEach(function(a){g.size=u(a);e.sizeMap[a]=
b.getComputedStyle(g).fontSize});document.body.removeChild(g)}return d===e.sizeMap[c]||c===e.sizeMap[d]}function Ea(e,g){if(e.nodeType!=b.Node.ELEMENT_NODE&&(!e.parentNode||e.parentNode.nodeType!=b.Node.ELEMENT_NODE))return null;if(e.nodeType!=b.Node.ELEMENT_NODE)return Ea(e.parentNode,g);if("createlink"==g||"unlink"==g){for(;e&&(!a(e)||"A"!=e.tagName||!c(e,"href"));)e=e.parentNode;return e?e.getAttribute("href"):null}if("backcolor"==g||"hilitecolor"==g){for(;("rgba(0, 0, 0, 0)"==b.getComputedStyle(e).backgroundColor||
""===b.getComputedStyle(e).backgroundColor||"transparent"==b.getComputedStyle(e).backgroundColor)&&e.parentNode&&e.parentNode.nodeType==b.Node.ELEMENT_NODE;)e=e.parentNode;return"rgba(0, 0, 0, 0)"==b.getComputedStyle(e).backgroundColor||""===b.getComputedStyle(e).backgroundColor||"transparent"==b.getComputedStyle(e).backgroundColor?"rgb(255, 255, 255)":b.getComputedStyle(e).backgroundColor}if("subscript"==g||"superscript"==g){for(var f=!1,n=!1;ka(e);)b.getComputedStyle(e),d(e,"sub")?f=!0:d(e,"sup")&&
(n=!0),e=e.parentNode;return f&&n?"mixed":f?"subscript":n?"superscript":null}if("strikethrough"==g){do{if(-1!=b.getComputedStyle(e).textDecoration.indexOf("line-through"))return"line-through";e=e.parentNode}while(e&&e.nodeType==b.Node.ELEMENT_NODE);return null}if("underline"==g){do{if(-1!=b.getComputedStyle(e).textDecoration.indexOf("underline"))return"underline";e=e.parentNode}while(e&&e.nodeType==b.Node.ELEMENT_NODE);return null}if(!Y[g].hasOwnProperty("relevantCssProperty"))throw"Bug: no relevantCssProperty for "+
g+" in getEffectiveCommandValue";return b.getComputedStyle(e)[Y[g].relevantCssProperty].toString()}function jb(e,f){if(("backcolor"==f||"hilitecolor"==f)&&"inline"!=b.getComputedStyle(e).display)return null;if("createlink"==f||"unlink"==f)return a(e)&&"A"==e.tagName&&c(e,"href")?e.getAttribute("href"):null;if("subscript"==f||"superscript"==f)return d(e,"sup")?"superscript":d(e,"sub")?"subscript":null;if("strikethrough"==f&&""!=e.style.textDecoration)return-1!=e.style.textDecoration.indexOf("line-through")?
"line-through":null;if("strikethrough"==f&&n(e,["S","STRIKE"]))return"line-through";if("underline"==f&&""!=e.style.textDecoration)return-1!=e.style.textDecoration.indexOf("underline")?"underline":null;if("underline"==f&&d(e,"U"))return"underline";var k=Y[f].relevantCssProperty;if(null===k)return null;if(""!=e.style[k])return e.style[k];if(g(e.namespaceURI)&&"FONT"==e.tagName){if("color"==k&&c(e,"color"))return e.color;if("fontFamily"==k&&c(e,"face"))return e.face;if("fontSize"==k&&c(e,"size"))return k=
parseInt(e.size,10),1>k&&(k=1),7<k&&(k=7),{1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[k]}return"fontWeight"!=k||"B"!=e.tagName&&"STRONG"!=e.tagName?"fontStyle"!=k||"I"!=e.tagName&&"EM"!=e.tagName?null:"italic":"bold"}function Ya(a,d,b,c){for(var e=a;Ta(e)&&1==e.childNodes.length&&Ta(e.firstChild)&&(!ac(e)||!Sa(d,jb(e,d),b));)e=e.firstChild;if(e!=a&&ac(e)&&Sa(d,jb(e,d),b)&&ab(d,Ea(e,d),b)){for(;e.hasChildNodes();)Ga(e.firstChild,e.parentNode,k.getIndexInParent(e),
c);a.parentNode.insertBefore(e,a.nextSibling);Ga(a,e,-1,c)}}function lb(a){var d=[];a=f.makeArray(a);var b,c,e,g,n,k;for(b=0;b<a.length;b++)for(e=a[b],c=0;c<te.length;c++){g=te[c];n=e;1!=n.nodeType&&(n=n.parentNode);for(k=null;n&&1==n.nodeType&&null===(k=jb(n,g));)n=n.parentNode;d.push([e,g,k])}return d}function vb(a,b,c){if(!O(a)||null===jb(a,b))return[];if(ac(a)){b=Array.prototype.slice.call(A(a.childNodes));var e;for(e=0;e<b.length;e++)Ga(b[e],a.parentNode,k.getIndexInParent(a),c);a.parentNode.removeChild(a);
return b}"strikethrough"==b&&-1!=a.style.textDecoration.indexOf("line-through")&&(a.style.textDecoration="line-through"==a.style.textDecoration?"":a.style.textDecoration.replace("line-through",""),""==a.getAttribute("style")&&a.removeAttribute("style"));"underline"==b&&-1!=a.style.textDecoration.indexOf("underline")&&(a.style.textDecoration="underline"==a.style.textDecoration?"":a.style.textDecoration.replace("underline",""),""==a.getAttribute("style")&&a.removeAttribute("style"));null!==Y[b].relevantCssProperty&&
(a.style[Y[b].relevantCssProperty]="",""==a.getAttribute("style")&&a.removeAttribute("style"));g(a.namespaceURI)&&"FONT"==a.tagName&&("forecolor"==b&&a.removeAttribute("color"),"fontname"==b&&a.removeAttribute("face"),"fontsize"==b&&a.removeAttribute("size"));!d(a,"A")||"createlink"!=b&&"unlink"!=b||a.removeAttribute("href");return null===jb(a,b)?[]:[Ca(a,"span",c)]}function Rb(a,c,e,g){var n=[],q,m;if(a.parentNode&&null!==e&&(Na(a,"span")&&(Ya(a.previousSibling,c,e,g),Ya(a.nextSibling,c,e,g),ia([a],
function(a){return ac(a)&&Sa(c,jb(a,c),e)&&ab(c,Ea(a,c),e)},function(){return null},g)),!ab(c,Ea(a,c),e)))if(!Na(a,"span")){for(q=0;q<a.childNodes.length;q++){if(a.childNodes[q].nodeType==b.Node.ELEMENT_NODE&&(m=jb(a.childNodes[q],c),null!==m&&!Sa(c,e,m)))continue;n.push(a.childNodes[q])}for(q=0;q<n.length;q++)Rb(n[q],c,e,g)}else if(!ab(c,Ea(a,c),e)){n=null;xb||("bold"!=c||"bold"!=e&&"700"!=e||(n=a.ownerDocument.createElement("b")),"italic"==c&&"italic"==e&&(n=a.ownerDocument.createElement("i")),
"strikethrough"==c&&"line-through"==e&&(n=a.ownerDocument.createElement("s")),"underline"==c&&"underline"==e&&(n=a.ownerDocument.createElement("u")),"forecolor"==c&&V(e)&&(n=a.ownerDocument.createElement("span"),f(n).css("color",V(e))),"fontname"==c&&(n=a.ownerDocument.createElement("font"),n.face=e));if("createlink"==c||"unlink"==c)for(n=a.ownerDocument.createElement("a"),n.setAttribute("href",e),q=a.parentNode;q;)d(q,"A")&&(q=Ca(q,"span",g)),q=q.parentNode;"fontsize"!=c||-1==f.inArray(e,"xx-small small medium large x-large xx-large xxx-large".split(" "))||
xb&&"xxx-large"!=e||(n=a.ownerDocument.createElement("font"),n.size=u(e));"subscript"!=c&&"superscript"!=c||"subscript"!=e||(n=a.ownerDocument.createElement("sub"));"subscript"!=c&&"superscript"!=c||"superscript"!=e||(n=a.ownerDocument.createElement("sup"));n||(n=a.ownerDocument.createElement("span"));a.parentNode.insertBefore(n,a);q=Y[c].relevantCssProperty;null===q||ab(c,Ea(n,c),e)||(n.style[q]=e);"strikethrough"==c&&"line-through"==e&&"line-through"!=Ea(n,"strikethrough")&&(n.style.textDecoration=
"line-through");"underline"==c&&"underline"==e&&"underline"!=Ea(n,"underline")&&(n.style.textDecoration="underline");Ga(a,n,n.childNodes.length,g);if(a.nodeType==b.Node.ELEMENT_NODE&&!Sa(c,Ea(a,c),e)){Ga(a,n.parentNode,k.getIndexInParent(n),g);n.parentNode.removeChild(n);n=[];for(q=0;q<a.childNodes.length;q++){if(a.childNodes[q].nodeType==b.Node.ELEMENT_NODE&&(m=jb(a.childNodes[q],c),null!==m&&!Sa(c,e,m)))continue;n.push(a.childNodes[q])}for(q=0;q<n.length;q++)Rb(n[q],c,e,g)}}}function Db(a,d,c,e){if(a.parentNode&&
a.parentNode.nodeType==b.Node.ELEMENT_NODE&&!ab(d,Ea(a,d),c)){for(var g=a.parentNode,f=[];O(g)&&g.nodeType==b.Node.ELEMENT_NODE&&!ab(d,Ea(g,d),c);)f.push(g),g=g.parentNode;if(f.length){var n=jb(f[f.length-1],d);if(null!==n||n==c)if(null===c||ab(d,Ea(f[f.length-1].parentNode,d),c))for(;f.length;)for(g=f.pop(),null!==jb(g,d)&&(n=jb(g,d)),c=Array.prototype.slice.call(A(g.childNodes)),null!==jb(g,d)&&vb(g,d,e),g=0;g<c.length;g++){var k=c[g];k!=a&&(k.nodeType!=b.Node.ELEMENT_NODE||null===jb(k,d)||Sa(d,
n,jb(k,d)))&&k!=f[f.length-1]&&Rb(k,d,n,e)}}}}function mb(a,d){b(a).forEach(function(a){var c=a[0],e=a[1];a=a[2];var g=c;g&&g.nodeType==b.Node.ELEMENT_NODE||(g=g.parentNode);for(;g&&g.nodeType==b.Node.ELEMENT_NODE&&null===jb(g,e);)g=g.parentNode;null===a&&g&&g.nodeType==b.Node.ELEMENT_NODE?Db(c,e,null,d):(g&&g.nodeType==b.Node.ELEMENT_NODE&&!Sa(e,jb(g,e),a)||(!g||g.nodeType!=b.Node.ELEMENT_NODE)&&null!==a)&&Rb(c,e,a,d)})}function Oa(a,d,c){c=c||R();if(b(Wa(c)).filter(function(a){return a.nodeType==
b.Node.TEXT_NODE},!0).some(O)){if(O(c.startContainer)&&c.startContainer.nodeType==b.Node.TEXT_NODE&&0!=c.startOffset&&c.startOffset!=x(c.startContainer)){var g=e(c.startContainer,c.startOffset),f=l.createRange();if(c.startContainer==c.endContainer){var n=c.endOffset-c.startOffset;f.setEnd(g,n);c.setEnd(g,n)}f.setStart(g,0);l.getSelection().removeAllRanges();l.getSelection().addRange(f);c.setStart(g,0)}O(c.endContainer)&&c.endContainer.nodeType==b.Node.TEXT_NODE&&0!=c.endOffset&&c.endOffset!=x(c.endContainer)&&
(g=c,f=[g.startContainer,g.startOffset],n=[g.endContainer,g.endOffset],e(g.endContainer,g.endOffset),g.setStart(f[0],f[1]),g.setEnd(n[0],n[1]),l.getSelection().removeAllRanges(),l.getSelection().addRange(g));b(Wa(R(),function(a){return O(a)&&a.nodeType==b.Node.ELEMENT_NODE})).forEach(function(d){vb(d,a,c)});b(Wa(c,O)).forEach(function(b){Db(b,a,d,c);Rb(b,a,d,c)})}else Y[a].hasOwnProperty("inlineCommandActivatedValues")&&mc(a,-1!=b(Y[a].inlineCommandActivatedValues).indexOf(d),c),"subscript"==a&&fd("superscript",
c),"superscript"==a&&fd("subscript",c),null===d?td(a,c):Y[a].hasOwnProperty("value")&&sd(a,d,c)}function Sc(a,d){var c;if(a.nodeType===b.Node.TEXT_NODE&&d<a.length)for(c=d;c<a.length;c++)if("\t"!==a.data.charAt(c)&&"\r"!==a.data.charAt(c)&&"\n"!==a.data.charAt(c)||160===a.data.charCodeAt(c))return!1;if(a.nextSibling&&a.nextSibling.className&&0<=a.nextSibling.className.indexOf("aloha-table-wrapper"))return a.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&a.parentNode.nextSibling.className&&
0<=a.parentNode.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&Qa(a.parentNode.nextSibling)&&a.parentNode.nextSibling.nextSibling&&a.parentNode.nextSibling.nextSibling.className&&0<=a.parentNode.nextSibling.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling.nextSibling}function Eb(a,d){var c;if(a.nodeType===b.Node.TEXT_NODE&&0<d)for(c=d-1;0<=c;c--)if("\t"!==a.data.charAt(c)&&"\r"!==a.data.charAt(c)&&
"\n"!==a.data.charAt(c)||160===a.data.charCodeAt(c))return!1;return a.previousSibling&&a.previousSibling.className&&0<=a.previousSibling.className.indexOf("aloha-table-wrapper")?a.previousSibling:a.parentNode&&a.parentNode.previousSibling&&a.parentNode.previousSibling.className&&0<=a.parentNode.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling:a.parentNode&&a.parentNode.previousSibling&&Qa(a.parentNode.previousSibling)&&a.parentNode.previousSibling.previousSibling&&
a.parentNode.previousSibling.previousSibling.className&&0<=a.parentNode.previousSibling.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling.previousSibling:!1}function ga(a,b){return!a.parentNode&&0==b||0<=b-1&&b-1<a.childNodes.length&&pa(a.childNodes[b-1])&&(oa(a.childNodes[b-1])||d(a.childNodes[b-1],"br"))}function Da(a,d){return!a.parentNode&&d==x(a)||d<a.childNodes.length&&pa(a.childNodes[d])&&oa(a.childNodes[d])}function Ja(a,d){return ga(a,d)||Da(a,d)}function yb(a){for(var d=
0;!Ja(a,d);){if(0<=d-1&&d-1<a.childNodes.length&&pa(a.childNodes[d-1]))return!1;0!=d&&a.hasChildNodes()?(a=a.childNodes[d-1],d=x(a)):(d=k.getIndexInParent(a),a=a.parentNode)}return!0}function Cb(a){for(var d=x(a);!Ja(a,d);){if(d<a.childNodes.length&&pa(a.childNodes[d]))return!1;d!=x(a)&&a.hasChildNodes()?(a=a.childNodes[d],d=0):(d=1+k.getIndexInParent(a),a=a.parentNode)}return!0}function ja(a,b){var c,e=a[0].parentNode;if(O(e)&&e.parentNode){-1!=f.inArray(e.firstChild,a)&&$a(e);c=-1!=f.inArray(e.firstChild,
a);var g=-1!=f.inArray(e.lastChild,a),n=c&&yb(e),q=g&&Cb(e);if(!c&&g){for(c=a.length-1;0<=c;c--)Ga(a[c],e.parentNode,1+k.getIndexInParent(e),b);q&&!Cb(a[a.length-1])&&a[a.length-1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling);hb(e)}else{if(!c)for(c=e.cloneNode(!1),e.removeAttribute("id"),e.parentNode.insertBefore(c,e);a[0].previousSibling;)Ga(e.firstChild,c,c.childNodes.length,b);for(c=0;c<a.length;c++)Ga(a[c],e.parentNode,k.getIndexInParent(e),b);n&&!yb(a[0])&&
a[0].parentNode.insertBefore(document.createElement("br"),a[0]);ka(a[a.length-1])&&!d(a[a.length-1],"br")&&d(e.firstChild,"br")&&!ka(e)&&e.removeChild(e.firstChild);e.hasChildNodes()?$a(e):(e.parentNode===b.startContainer&&e.parentNode===b.endContainer&&b.startContainer===b.endContainer&&b.startOffset===b.endOffset&&e.parentNode.childNodes.length===b.startOffset&&(b.startOffset=e.parentNode.childNodes.length-1,b.endOffset=b.startOffset),e.parentNode.removeChild(e),q&&!Cb(a[a.length-1])&&a[a.length-
1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling));!a[a.length-1].nextSibling&&a[a.length-1].parentNode&&hb(a[a.length-1].parentNode)}}}function Qb(a){return n(a,"address div h1 h2 h3 h4 h5 h6 listing p pre xmp".split(" "))}function Bb(a){return Qb(a)||n(a,["li","dt","dd"])}function Ua(){return document.createElement("br")}function bb(a){a&&(Fa(a)||d(a.lastChild,"br")||b(a.childNodes).some(pa)||(f.browser.msie?f.browser.msie&&7>=f.browser.version&&n(a,"p h1 h2 h3 h4 h5 h6 pre blockquote".split(" "))&&
(a.firstChild||a.appendChild(document.createTextNode("\u200b"))):a.appendChild(Ua())))}function db(a,c){var e;if(O(a))if(b(t(a)).every(function(d){return!La(a,d)||!Na(a,d)})&&!q(a,Dc))if(n(a,["dd","dt"]))ia([a],function(a){return d(a,"dl")&&!a.attributes.length},function(){return document.createElement("dl")},c);else{if(la(a)){a=Ca(a,Dc,c);bb(a);db(a,c);var g=s(a);for(e=0;e<g.length;e++)db(g[e],c)}}else{for(var g=lb([a]),m;!Na(a,a.parentNode);){for(e=a.parentNode.childNodes.length-1;0<=e;--e)3==a.parentNode.childNodes[e].nodeType&&
0==a.parentNode.childNodes[e].data.length&&(a.parentNode.removeChild(a.parentNode.childNodes[e]),c.startContainer==a.parentNode&&c.startOffset>e&&c.startOffset--,c.endContainer==a.parentNode&&c.endOffset>e&&c.endOffset--);if(1==a.parentNode.childNodes.length){e=c.startOffset;m=c.endOffset;c.startContainer===a.parentNode&&c.startOffset>k.getIndexInParent(a)&&(e=c.startOffset+(f(a).contents().length-1));c.endContainer===a.parentNode&&c.endOffset>k.getIndexInParent(a)&&(m=c.endOffset+(f(a).contents().length-
1));f(a).contents().unwrap();c.startOffset=e;c.endOffset=m;break}else if(e=a.parentNode,ja([a],c),e===a.parentNode){e=c.startOffset;m=c.endOffset;c.startContainer===a.parentNode&&c.startOffset>k.getIndexInParent(a)&&(e=c.startOffset+(f(a).contents().length-1));c.endContainer===a.parentNode&&c.endOffset>k.getIndexInParent(a)&&(m=c.endOffset+(f(a).contents().length-1));f(a).contents().unwrap();c.startOffset=e;c.endOffset=m;break}}mb(g,c)}}function Jb(a,c){function e(a){return n(a,["OL","UL"])}if(d(a,
"LI")&&O(a)&&O(a.parentNode))for(var g=null;b(a.childNodes).some(e);){var f=a.lastChild;n(f,["OL","UL"])||!g&&f.nodeType==b.Node.TEXT_NODE&&/^[ \t\n\f\r]*$/.test(f.data)?(g=null,Ga(f,a.parentNode,1+k.getIndexInParent(a),c)):(g||(g=a.ownerDocument.createElement("li"),a.parentNode.insertBefore(g,a.nextSibling)),Ga(f,g,0,c))}}function Sb(a,b){n(a,["OL","UL"])&&O(a)&&f(a).children("ol,ul").each(function(a,c){d(c.previousSibling,"LI")&&Ga(c,c.previousSibling,c.previousSibling.childNodes.length,b)})}function Ka(a){var c=
a.startContainer,e=a.startOffset,g=a.endContainer;a=a.endOffset;var f=b(t(c).concat(c)).filter(function(a){return d(a,"li")}).slice(-1);f.length&&(e=k.getIndexInParent(f[0]),c=f[0].parentNode);if(!ga(c,e)){do 0==e?(e=k.getIndexInParent(c),c=c.parentNode):e--;while(!Ja(c,e))}for(;0==e&&c.parentNode;)e=k.getIndexInParent(c),c=c.parentNode;f=b(t(g).concat(g)).filter(function(a){return d(a,"li")}).slice(-1);f.length&&(a=1+k.getIndexInParent(f[0]),g=f[0].parentNode);if(!Da(g,a)){do a==x(g)?(a=1+k.getIndexInParent(g),
g=g.parentNode):a++;while(!Ja(g,a))}for(;a==x(g)&&g.parentNode;)a=1+k.getIndexInParent(g),g=g.parentNode;f=l.createRange();f.setStart(c,e);f.setEnd(g,a);return f}function Fb(){var a=Ka(R()),c=S(a,function(a){return O(a)&&(n(a,["ol","ul"])||n(a.parentNode,["ol","ul"])||Na(a,"li"))});if(!c.length)return"none";if(b(c).every(function(a){return d(a,"ol")||d(a.parentNode,"ol")||d(a.parentNode,"li")&&d(a.parentNode.parentNode,"ol")})&&!b(c).some(function(a){return d(a,"ul")||a.querySelector&&a.querySelector("ul")}))return"ol";
if(b(c).every(function(a){return d(a,"ul")||d(a.parentNode,"ul")||d(a.parentNode,"li")&&d(a.parentNode.parentNode,"ul")})&&!b(c).some(function(a){return d(a,"ol")||a.querySelector&&a.querySelector("ol")}))return"ul";a=b(c).some(function(a){return d(a,"ol")||d(a.parentNode,"ol")||a.querySelector&&a.querySelector("ol")||d(a.parentNode,"li")&&d(a.parentNode.parentNode,"ol")});c=b(c).some(function(a){return d(a,"ul")||d(a.parentNode,"ul")||a.querySelector&&a.querySelector("ul")||d(a.parentNode,"li")&&
d(a.parentNode.parentNode,"ul")});return a&&c?"mixed":a?"mixed ol":c?"mixed ul":"none"}function Va(a){for(;a&&a.nodeType!=b.Node.ELEMENT_NODE||a.nodeType==b.Node.ELEMENT_NODE&&-1!=f.inArray(b.getComputedStyle(a).display,["inline","none"]);)a=a.parentNode;if(!a||a.nodeType!=b.Node.ELEMENT_NODE)return"left";var d=b.getComputedStyle(a).textAlign.replace(/^-(moz|webkit)-/,"").replace(/^auto$/,"start");return"start"==d?"ltr"==N(a)?"left":"right":"end"==d?"ltr"==N(a)?"right":"left":-1!=f.inArray(d,["center",
"justify","left","right"])?d:"left"}function ob(a){var d=[];void 0!==Vb("createlink",a)&&d.push(["createlink",Vb("createlink",a)]);b("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(b){void 0!==lc(b,a)&&d.push([b,lc(b,a)])});b(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(b){void 0!==Vb(b,a)&&d.push([b,Vb(b,a)])});return d}function qb(a){var d=[],c=b(Wa(a)).filter(function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE})[0];if(!c)return d;
d.push(["createlink",Y.createlink.value(a)]);b("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(a){-1!=b(Y[a].inlineCommandActivatedValues).indexOf(Ea(c,a))?d.push([a,!0]):d.push([a,!1])});b(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(b){d.push([b,Y[b].value(a)])});d.push(["fontsize",Ea(c,"fontsize")]);return d}function rb(a,d){function c(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE}var e,g,f,n=b(Wa(d)).filter(function(a){return O(a)&&
a.nodeType==b.Node.TEXT_NODE})[0];if(n)for(e=0;e<a.length;e++){g=a[e][0];f=a[e][1];if("boolean"==typeof f&&ua(g,d)!=f)fa(g,!1,f,d);else if("string"!=typeof f||"fontsize"==g||Sa(g,va(g,d),f))if("string"==typeof f&&"fontsize"==g&&(void 0!==Vb("fontsize",d)&&Vb("fontsize",d)!==f||void 0===Vb("fontsize",d)&&!ab(g,Ea(n,"fontsize"),f)))fa("fontsize",!1,f,d);else continue;else fa(g,!1,f,d);n=b(Wa(d)).filter(c)[0]||n}else for(e=0;e<a.length;e++)g=a[e][0],f=a[e][1],"boolean"==typeof f&&mc(g,f,d),"string"==
typeof f&&sd(g,f,d)}function zc(a,d,b){if(0==a)return"";if(1==a&&!d&&!b)return" ";if(1==a)return"\u00a0";var c="",e;for(e=d?"\u00a0 ":" \u00a0";3<a;)c+=e,a-=2;return 3==a?c+(d||b?d&&!b?"\u00a0\u00a0 ":!d&&b?" \u00a0\u00a0":d&&b?"\u00a0 \u00a0":"impossible":" \u00a0 "):c+(d||b?d&&!b?"\u00a0 ":!d&&b?" \u00a0":d&&b?"\u00a0\u00a0":"impossible":"\u00a0 ")}function eb(a,d){if(O(a)||Fa(a)){for(var c=a,e=d;;)if(0<=e-1&&La(c,c.childNodes[e-1]))c=c.childNodes[e-1],e=x(c);else if(0==e&&!yb(c)&&La(c,c.parentNode))e=
k.getIndexInParent(c),c=c.parentNode;else if(c.nodeType==b.Node.TEXT_NODE&&-1==f.inArray(b.getComputedStyle(c.parentNode).whiteSpace,["pre","pre-wrap"])&&0!=e&&/[ \xa0]/.test(c.data[e-1]))e--;else break;for(var g=c,n=e,q=0,m=!1;;)if(n<g.childNodes.length&&La(g,g.childNodes[n]))g=g.childNodes[n],n=0;else if(n==x(g)&&!Cb(g)&&La(g,g.parentNode))n=1+k.getIndexInParent(g),g=g.parentNode;else if(g.nodeType==b.Node.TEXT_NODE&&-1==f.inArray(b.getComputedStyle(g.parentNode).whiteSpace,["pre","pre-wrap"])&&
n!=x(g)&&/[ \xa0]/.test(g.data[n]))m&&" "==g.data[n]?g.deleteData(n,1):(m=" "==g.data[n],n++,q++);else break;for(q=zc(q,0==e&&yb(c),n==x(g)&&Cb(g));"before"==K(c,e,g,n);)e<c.childNodes.length?(c=c.childNodes[e],e=0):c.nodeType!=b.Node.TEXT_NODE||e==x(c)?(e=1+k.getIndexInParent(c),c=c.parentNode):(m=q[0],q=q.slice(1),m!=c.data[e]&&(c.insertData(e,m),c.deleteData(e+1,1)),e++)}}function Xa(a,c,e,g,f){var q,m={},v;3>arguments.length?q=a:(q=l.createRange(),q.setStart(a,c),q.setEnd(e,g));2==arguments.length&&
(m=c);5==arguments.length&&(m=f);var y=null!=m.blockMerging?!!m.blockMerging:!0,z=null!=m.stripWrappers?!!m.stripWrappers:!0;if(q){var p=q.startContainer;v=q.startOffset;for(var B=q.endContainer,C=q.endOffset,D;p.hasChildNodes();)if(v==x(p)&&La(p,p.parentNode)&&ka(p))v=1+k.getIndexInParent(p),p=p.parentNode;else{if(v==x(p))break;D=p.childNodes[v];if(oa(D)||D.nodeType==b.Node.ELEMENT_NODE&&!D.hasChildNodes()||D.nodeType!=b.Node.ELEMENT_NODE&&D.nodeType!=b.Node.TEXT_NODE)break;p=D;v=0}for(;B.hasChildNodes();)if(0==
C&&La(B,B.parentNode)&&ka(B))C=k.getIndexInParent(B),B=B.parentNode;else{if(0==C)break;D=B.childNodes[C-1];if(oa(D)||D.nodeType==b.Node.ELEMENT_NODE&&!D.hasChildNodes()||D.nodeType!=b.Node.ELEMENT_NODE&&D.nodeType!=b.Node.TEXT_NODE)break;B=D;C=x(D)}if("after"!==K(B,C,p,v))return q.setEnd(q.startContainer,q.startOffset),q;B.nodeType==b.Node.TEXT_NODE&&C==x(B)&&p!=B&&(C=1+k.getIndexInParent(B),B=B.parentNode);q.setStart(p,v);q.setEnd(B,C);for(var r=q.startContainer;La(r,r.parentNode)&&ka(r);)r=r.parentNode;
if(!oa(r)&&!Fa(r)||!Na("span",r)||n(r,["td","th"]))r=null;for(var t=q.endContainer;La(t,t.parentNode)&&ka(t);)t=t.parentNode;if(!oa(t)&&!Fa(t)||!Na("span",t)||n(t,["td","th"]))t=null;m=qb(q);if(p==B&&O(p)&&p.nodeType==b.Node.TEXT_NODE)return D=p.parentNode,p.deleteData(v,C-v),0<v&&" "===p.data.substr(v-1,1)&&v<p.data.length&&" "===p.data.substr(v,1)&&p.replaceData(v-1,1,"\u00a0"),eb(p,v),q.setStart(q.startContainer,q.startOffset),q.setEnd(q.startContainer,q.startOffset),rb(m,q),!O(D)&&!Fa(D)||ka(D)||
bb(D),q;O(p)&&p.nodeType==b.Node.TEXT_NODE&&p.deleteData(v,x(p)-v);var L=S(q,function(a){return O(a)&&!n(a,"thead tbody tfoot tr th td".split(" "))});for(v=0;v<L.length;v++){var s=L[v];D=s.parentNode;D.removeChild(s);if(z||!E(D,p)&&D!=p)for(;O(D)&&ka(D)&&0==x(D);)s=D.parentNode,s.removeChild(D),D=s;!O(D)&&!Fa(D)||ka(D)||bb(D)}O(B)&&B.nodeType==b.Node.TEXT_NODE&&B.deleteData(0,C);eb(q.startContainer,q.startOffset);eb(q.endContainer,q.endOffset);if(!(y&&r&&t&&La(r,t)&&r!=t))return q.setEnd(q.startContainer,
q.startOffset),t=r||t,ma(t)&&(t=za(t),q.setStart(t.node,t.offset),q.setEnd(t.node,t.offset)),rb(m,q),q;1==r.children.length&&Ma(r.firstChild)&&r.removeChild(r.firstChild);1==t.children.length&&Ma(t.firstChild)&&t.removeChild(t.firstChild);if(E(r,t)){for(D=t;D.parentNode!=r;)D=D.parentNode;q.setStart(r,k.getIndexInParent(D));q.setEnd(r,k.getIndexInParent(D));if(!t.hasChildNodes()){for(;O(t)&&1==t.parentNode.childNodes.length&&t.parentNode!=r;)D=t,D.removeChild(t),t=D;O(t)&&!ka(t)&&ka(t.previousSibling)&&
ka(t.nextSibling)&&t.parentNode.insertBefore(document.createElement("br"),t.nextSibling);O(t)&&t.parentNode.removeChild(t);rb(m,q);return q}if(!ka(t.firstChild))return rb(m,q),q;z=[];for(z.push(t.firstChild);!d(z[z.length-1],"br")&&ka(z[z.length-1].nextSibling);)z.push(z[z.length-1].nextSibling);for(y=lb(z);z[0].parentNode!=r;)ja(z,q);O(z[0].previousSibling)&&d(z[0].previousSibling,"br")&&z[0].parentNode.removeChild(z[0].previousSibling)}else if(H(r,t)){q.setStart(r,x(r));q.setEnd(r,x(r));for(D=r;D.parentNode!=
t;)D=D.parentNode;ka(D.nextSibling)&&d(r.lastChild,"br")&&r.removeChild(r.lastChild);t=[];!D.nextSibling||d(D.nextSibling,"br")||oa(D.nextSibling)||t.push(D.nextSibling);t.length&&t[t.length-1].nextSibling&&!d(t[t.length-1].nextSibling,"br")&&!oa(t[t.length-1].nextSibling)&&t.push(t[t.length-1].nextSibling);y=lb(t);b(t).forEach(function(a){Ga(a,r,-1,q)});d(D.nextSibling,"br")&&D.parentNode.removeChild(D.nextSibling)}else{q.setStart(r,x(r));q.setEnd(r,x(r));ka(t.firstChild)&&d(r.lastChild,"br")&&r.removeChild(r.lastChild);
for(y=lb([].slice.call(A(t.childNodes)));t.hasChildNodes();)Ga(t.firstChild,r,-1,q);for(;!t.hasChildNodes();)D=t.parentNode,D.removeChild(t),t=D}mb(y,q);ma(r)&&(t=za(r),q.setStart(t.node,t.offset),q.setEnd(t.node,t.offset),r=t.node);bb(r);rb(m,q);return q}}function ra(a,d){a.hasChildNodes()?ja([].slice.call(A(a.childNodes)),d):a.parentNode.removeChild(a)}function fc(a,d){a&&f(a).find("ul,ol,li").each(function(){f(this).contents().each(function(){if(Qa(this)){var a=k.getIndexInParent(this);d.startContainer===
this.parentNode&&d.startOffset>a?d.startOffset--:d.startContainer===this&&(d.startContainer=this.parentNode,d.startOffset=a);d.endContainer===this.parentNode&&d.endOffset>a?d.endOffset--:d.endContainer===this&&(d.endContainer=this.parentNode,d.endOffset=a);f(this).remove()}})})}function gc(a,d){if(a.length){var b=a[0];if(n(b.parentNode,["OL","UL"])){var c=b.parentNode.tagName;ia(a,function(a){return q(a,c)},function(){return b.ownerDocument.createElement(c)},d)}else{var e=ia(a,function(a){return!1},
function(){return b.ownerDocument.createElement("blockquote")},d);db(e,d)}}}function Tb(a,d){if(O(a)){for(var c=a.parentNode,e=[];O(c)&&c.nodeType==b.Node.ELEMENT_NODE&&!n(c,["ol","ul"]);)e.push(c),c=c.parentNode;O(c);c=a.parentNode;for(e=[];O(c)&&c.nodeType==b.Node.ELEMENT_NODE&&!n(c,["ol","ul"]);)e.push(c),c=c.parentNode;if(!n(a,["OL","UL"])||O(c)&&0)O(c);else for(a.removeAttribute("reversed"),a.removeAttribute("start"),a.removeAttribute("type"),c=[].slice.call(A(a.childNodes)),a.attributes.length&&
!n(a.parentNode,["OL","UL"])?Ca(a,"div",d):(e=lb([].slice.call(A(a.childNodes))),ra(a,d),mb(e,d)),e=0;e<c.length;e++)db(c[e],d)}}function wb(a,c){function e(){return document.createElement("li")}function g(a){return n(a,["ol","ul"])}function f(a){return function(d){return q(d,a)}}function k(a){return function(){return document.createElement(a)}}function m(a,d,b){return function(){O(d[0].parentNode);return document.createElement(a)}}var l=Fb()==a?"disable":"enable";a=a.toUpperCase();var v="OL"==a?
"UL":"OL",y=[];(function(){var a;for(a=c.endContainer;a!=c.commonAncestorContainer;a=a.parentNode)d(a,"li")&&y.unshift(a);for(a=c.startContainer;a;a=a.parentNode)d(a,"li")&&y.unshift(a)})();b(y).forEach(function(a){Jb(a,c)});var p=Ka(c);"enable"==l&&b(ha(p,function(a){return O(a)&&q(a,v)})).forEach(function(d){if(O(d.previousSibling)&&q(d.previousSibling,a)||O(d.nextSibling)&&q(d.nextSibling,a)){d=[].slice.call(A(d.childNodes));var b=lb(d);ja(d,c);ia(d,function(d){return q(d,a)},function(){return null},
c);mb(b,c)}else Ca(d,a,c)});p=S(p,function(a){return O(a)&&(n(a,["OL","UL"])||n(a.parentNode,["OL","UL"])||Na(a,"li"))});"enable"==l&&(p=b(p).filter(function(a){return!n(a,["ol","ul"])||n(a.parentNode,["ol","ul"])}));var z;if("disable"==l)for(;p.length;)if(l=[],l.push(p.shift()),q(l[0],a))Tb(l[0],c);else{for(;p.length&&p[0]==l[l.length-1].nextSibling&&!q(p[0],a);)l.push(p.shift());z=lb(l);ja(l,c);var B;for(B=0;B<l.length;B++)db(l[B],c);mb(z,c)}else for(;p.length;){for(l=[];!l.length||p.length&&p[0]==
l[l.length-1].nextSibling;)if(n(p[0],["p","div"]))l.push(Ca(p[0],"li",c)),p.shift();else if(n(p[0],["li","ol","ul"]))l.push(p.shift());else{for(z=[];!z.length||p.length&&p[0]==z[z.length-1].nextSibling&&ka(p[0])&&ka(z[z.length-1])&&!d(z[z.length-1],"br");)z.push(p.shift());l.push(ia(z,void 0,e,c))}q(l[0].parentNode,a)||b(l).every(g)||(q(l[0].parentNode,v)?(z=lb(l),ja(l,c),ia(l,f(a),k(a),c),mb(z,c)):db(ia(l,f(a),m(a,l,c),c),c))}}function Ub(a,e){function g(a){return function(c){return d(c,"div")&&
b(c.attributes).every(function(d){return"align"==d.name&&d.value.toLowerCase()==a||"style"==d.name&&1==y(c)&&c.style.textAlign==a})}}function f(a){return function(){var d=document.createElement("div");d.setAttribute("style","text-align: "+a);return d}}for(var k=Ka(e),q=ha(k,function(a){return a.nodeType==b.Node.ELEMENT_NODE&&O(a)&&(c(a,"align")||""!=a.style.textAlign||d(a,"center"))}),k=0;k<q.length;k++){var m=q[k];m.removeAttribute("align");m.style.textAlign="";""==m.getAttribute("style")&&m.removeAttribute("style");
n(m,["div","span","center"])&&!m.attributes.length&&ra(m,e);d(m,"center")&&m.attributes.length&&Ca(m,"div",e)}k=Ka(fb);q=[];for(q=S(k,function(d){return O(d)&&Na(d,"div")&&Va(d)!=a});q.length;){k=[];for(k.push(q.shift());q.length&&q[0]==k[k.length-1].nextSibling;)k.push(q.shift());ia(k,g(a),f(a),e)}}function ed(a,d){var c;if(a.collapsed){c=a.startOffset;if(d){if(a.startContainer&&a.startContainer.nodeType===b.Node.TEXT_NODE)for(;c<a.startContainer.data.length&&"\u200b"===a.startContainer.data.charAt(c);)c++}else if(a.startContainer&&
a.startContainer.nodeType===b.Node.TEXT_NODE)for(;0<c&&"\u200b"===a.startContainer.data.charAt(c-1);)c--;c!==a.startOffset&&(a.setStart(a.startContainer,c),a.setEnd(a.startContainer,c))}}var bc="http://www.w3.org/1999/xhtml",xb=!1,fb=null,Y={},lc,mc,Kb,fd,Vb,sd,td,Cc=0,Aa={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,CAPTION:!0,CENTER:!0,COL:!0,COLGROUP:!0,DD:!0,DETAILS:!0,DIR:!0,DIV:!0,DL:!0,DT:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,
HGROUP:!0,HR:!0,LI:!0,LISTING:!0,MENU:!0,NAV:!0,OL:!0,P:!0,PLAINTEXT:!0,PRE:!0,SECTION:!0,SUMMARY:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0,UL:!0,XMP:!0},Xd={inline:!0,"inline-block":!0,"inline-table":!0,none:!0};(function(){var a={},d={},b=null;Kb=function(c){if(!b||b.startContainer!=c.startContainer||b.endContainer!=c.endContainer||b.startOffset!=c.startOffset||b.endOffset!=c.endOffset)if(b={startContainer:c.startContainer,endContainer:c.endContainer,startOffset:c.startOffset,endOffset:c.endOffset},
!p.isEmpty(a)||!p.isEmpty(d))return a={},d={},!0;return!1};lc=function(d,b){Kb(b);return a[d]};mc=function(d,b,c){Kb(c);a[d]=b};fd=function(d,b){Kb(b);delete a[d]};Vb=function(a,b){Kb(b);return d[a]};sd=function(a,b,c){Kb(c);d[a]=b;"backcolor"==a?d.hilitecolor=b:"hilitecolor"==a&&(d.backcolor=b)};td=function(a,b){Kb(b);delete d[a];"backcolor"==a?delete d.hilitecolor:"hilitecolor"==a&&delete d.backcolor}})();var rc={A:!0,ABBR:!0,B:!0,BDI:!0,BDO:!0,CITE:!0,CODE:!0,DFN:!0,EM:!0,H1:!0,H2:!0,H3:!0,H4:!0,
H5:!0,H6:!0,I:!0,KBD:!0,MARK:!0,P:!0,PRE:!0,Q:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0,VAR:!0,ACRONYM:!0,LISTING:!0,STRIKE:!0,XMP:!0,BIG:!0,BLINK:!0,FONT:!0,MARQUEE:!0,NOBR:!0,TT:!0},Jc={colgroup:!0,table:!0,tbody:!0,tfoot:!0,thead:!0,tr:!0},vd={script:!0,style:!0,plaintext:!0,xmp:!0},Wb=f.extend({H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0},Aa),wd={CAPTION:!0,COL:!0,COLGROUP:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0},xd={DD:!0,DT:!0},yd={A:f.extend({A:!0},Aa),
DD:xd,DT:xd,LI:{LI:!0},NOBR:f.extend({NOBR:!0},Aa),H1:Wb,H2:Wb,H3:Wb,H4:Wb,H5:Wb,H6:Wb,TD:wd,TH:wd,ABBR:Aa,B:Aa,BDI:Aa,BDO:Aa,CITE:Aa,CODE:Aa,DFN:Aa,EM:Aa,I:Aa,KBD:Aa,MARK:Aa,P:Aa,PRE:Aa,Q:Aa,RP:Aa,RT:Aa,RUBY:Aa,S:Aa,SAMP:Aa,SMALL:Aa,SPAN:Aa,STRONG:Aa,SUB:Aa,SUP:Aa,U:Aa,VAR:Aa,ACRONYM:Aa,LISTING:Aa,STRIKE:Aa,XMP:Aa,BIG:Aa,BLINK:Aa,FONT:Aa,MARQUEE:Aa,TT:Aa},te="subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ");Y.backcolor={action:function(a,d){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&
(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||V(a)||"transparent"==a.toLowerCase())&&Oa("backcolor",a,d)},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",equivalentValues:function(a,d){return ba(a)===ba(d)}};Y.bold={action:function(a,d){ua("bold",d)?Oa("bold","normal",d):Oa("bold","bold",d)},inlineCommandActivatedValues:["bold","600","700","800","900"],relevantCssProperty:"fontWeight",equivalentValues:function(a,d){return a==d||"bold"==a&&"700"==d||"700"==a&&"bold"==d||"normal"==
a&&"400"==d||"400"==a&&"normal"==d}};Y.createlink={action:function(a,e){""!==a&&(b(Wa(R())).forEach(function(e){b(t(e)).forEach(function(b){O(b)&&d(b,"a")&&c(b,"href")&&b.setAttribute("href",a)})}),Oa("createlink",a,e))},standardInlineValueCommand:!0};Y.fontname={action:function(a,d){Oa("fontname",a,d)},standardInlineValueCommand:!0,relevantCssProperty:"fontFamily"};Y.fontsize={action:function(a,d){""!==a&&(a=M(a),(-1!=f.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))||
/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc)$/.test(a))&&Oa("fontsize",a,d))},indeterm:function(){return 2<=b(Wa(R(),function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(a){return Ea(a,"fontsize")},!0).filter(function(a,d,c){return-1==b(c.slice(0,d)).indexOf(a)}).length},value:function(a){var d=Wa(a,function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE})[0];void 0===d&&(d=a.startContainer);a=Ea(d,"fontsize");return U(a)},relevantCssProperty:"fontSize"};Y.forecolor={action:function(a,d){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&
(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||V(a)||"transparent"==a.toLowerCase())&&Oa("forecolor",a,d)},standardInlineValueCommand:!0,relevantCssProperty:"color",equivalentValues:function(a,d){return ba(a)===ba(d)}};Y.hilitecolor={action:function(a,d){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||V(a)||"transparent"==a.toLowerCase())&&Oa("hilitecolor",a,d)},indeterm:function(){return 2<=b(Wa(R(),function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(a){return Ea(a,
"hilitecolor")},!0).filter(function(a,d,c){return-1==b(c.slice(0,d)).indexOf(a)}).length},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",equivalentValues:function(a,d){return ba(a)===ba(d)}};Y.italic={action:function(a,d){ua("italic",d)?Oa("italic","normal",d):Oa("italic","italic",d)},inlineCommandActivatedValues:["italic","oblique"],relevantCssProperty:"fontStyle"};Y.removeformat={action:function(a,d){function c(a){return O(a)&&n(a,"abbr acronym b bdi bdo big blink cite code dfn em font i ins kbd mark nobr q s samp small span strike strong sub sup tt u var".split(" "))}
var g,f;g=Wa(R(),c);b(g).forEach(function(a){for(;a.hasChildNodes();)Ga(a.firstChild,a.parentNode,k.getIndexInParent(a),R());a.parentNode.removeChild(a)});O(R().startContainer)&&R().startContainer.nodeType==b.Node.TEXT_NODE&&0!=R().startOffset&&R().startOffset!=x(R().startContainer)&&(R().startContainer==R().endContainer?(g=R().endOffset-R().startOffset,f=e(R().startContainer,R().startOffset),R().setStart(f,0),R().setEnd(f,g)):R().setStart(e(R().startContainer,R().startOffset),0));O(R().endContainer)&&
R().endContainer.nodeType==b.Node.TEXT_NODE&&0!=R().endOffset&&R().endOffset!=x(R().endContainer)&&(f=[R().startContainer,R().startOffset],g=[R().endContainer,R().endOffset],R().setEnd(document.documentElement,0),e(g[0],g[1]),R().setStart(f[0],f[1]),R().setEnd(g[0],g[1]));b(Wa(R(),O)).forEach(function(a){for(;c(a.parentNode)&&La(a.parentNode,a);)ja([a],R())});b("subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ")).forEach(function(a){Oa(a,null,d)})}};
Y.strikethrough={action:function(a,d){ua("strikethrough",d)?Oa("strikethrough",null,d):Oa("strikethrough","line-through",d)},inlineCommandActivatedValues:["line-through"]};Y.subscript={action:function(a,d){var b=ua("subscript",d);Oa("subscript",null,d);b||Oa("subscript","subscript",d)},indeterm:function(){var a=Wa(R(),function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE});return b(a).some(function(a){return"subscript"==Ea(a,"subscript")})&&b(a).some(function(a){return"subscript"!=Ea(a,"subscript")})||
b(a).some(function(a){return"mixed"==Ea(a,"subscript")})},inlineCommandActivatedValues:["subscript"]};Y.superscript={action:function(a,d){var b=ua("superscript",d);Oa("superscript",null,d);b||Oa("superscript","superscript",d)},indeterm:function(){var a=Wa(R(),function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE});return b(a).some(function(a){return"superscript"==Ea(a,"superscript")})&&b(a).some(function(a){return"superscript"!=Ea(a,"superscript")})||b(a).some(function(a){return"mixed"==Ea(a,"superscript")})},
inlineCommandActivatedValues:["superscript"]};Y.underline={action:function(a,d){ua("underline",d)?Oa("underline",null,d):Oa("underline","underline",d)},inlineCommandActivatedValues:["underline"]};Y.unlink={action:function(){var a=R(),b=[],e;for(e=a.startContainer;e;e=e.parentNode)d(e,"A")&&c(e,"href")&&b.unshift(e);for(e=a.startContainer;e!=z(a.endContainer);e=B(e))d(e,"A")&&c(e,"href")&&(Q(e,a)||E(e,a.endContainer)||e==a.endContainer)&&b.push(e);for(e=0;e<b.length;e++)vb(b[e],"unlink",a)},standardInlineValueCommand:!0};
var Dc="p";Y["delete"]={action:function(a,c){var e;f.browser.msie&&7>=f.browser.version&&ed(c,!1);if(c.collapsed){eb(c.startContainer,c.startOffset);for(var g=c.startContainer,q=c.startOffset,m=e=!1;;)if(0<q&&(e=d(g.childNodes[q-1],"br")||!1,m=d(g.childNodes[q-1],"hr")||!1),0==q&&O(g.previousSibling)&&ca(g.previousSibling))g.parentNode.removeChild(g.previousSibling);else if(0<=q-1&&q-1<g.childNodes.length&&O(g.childNodes[q-1])&&(ca(g.childNodes[q-1])||e||m)){if(g.removeChild(g.childNodes[q-1]),q--,
e||m){c.setStart(g,q);c.setEnd(g,q);return}}else if(0==q&&ka(g)||ca(g))q=k.getIndexInParent(g),g=g.parentNode;else{if(0<=q-1&&q-1<g.childNodes.length&&O(g.childNodes[q-1])&&d(g.childNodes[q-1],"a")){ra(g.childNodes[q-1],c);return}if(0<=q-1&&q-1<g.childNodes.length&&!oa(g.childNodes[q-1])&&!n(g.childNodes[q-1],["br","img"]))g=g.childNodes[q-1],q=x(g);else break}if(e=Eb(g,q))e.parentNode.removeChild(e);else if(g.nodeType==b.Node.TEXT_NODE&&0!=q)c.setStart(g,q-1),c.setEnd(g,q-1),Xa(g,q-1,g,q);else if(g.nodeType==
b.Node.TEXT_NODE&&0==q&&f.browser.msie)q=1,c.setStart(g,q),c.setEnd(g,q),c.startOffset=0,Xa(c);else if(!ka(g))if(0<=q-1&&q-1<g.childNodes.length&&n(g.childNodes[q-1],["br","hr","img"]))c.setStart(g,q),c.setEnd(g,q),Xa(c);else if(n(g,["li","dt","dd"])&&g==g.parentNode.firstChild&&0==q){q=[];for(e=g.parentNode;e;e=e.parentNode)d(e,"li")&&q.unshift(e);for(e=0;e<q.length;e++)Jb(q[e],c);e=lb([g]);ja([g],c);mb(e,c);n(g,["dd","dt"])&&b(t(g)).every(function(a){return!La(g,a)||!Na(g,a)})&&(g=Ca(g,Dc,c));db(g,
c);for(e=0;e<q.length;e++)Sb(q[e].parentNode,c)}else{e=g;for(m=q;;)if(0==m)m=k.getIndexInParent(e),e=e.parentNode;else if(0<=m-1&&m-1<e.childNodes.length&&O(e.childNodes[m-1])&&ca(e.childNodes[m-1]))e.removeChild(e.childNodes[m-1]),m--;else break;if(0==q&&b(t(g).concat(g)).filter(function(a){return O(a)&&La(a,g)&&!1}).length)for(q=l.createRange(),q.setStart(g,0),q.setEnd(g,0),q=Ka(q),q=S(q,function(a){return O(a)&&!sa(a)}),e=0;e<q.length;e++)Tb(q[e],c);else if(!d(e.childNodes[m],"table"))if(0<=m-
1&&m-1<e.childNodes.length&&d(e.childNodes[m-1],"table"))c.setStart(e,m-1),c.setEnd(e,m);else if(0==q&&(d(e.childNodes[m-1],"hr")||d(e.childNodes[m-1],"br")&&(d(e.childNodes[m-1].previousSibling,"br")||!ka(e.childNodes[m-1].previousSibling))))c.setStart(g,q),c.setEnd(g,q),Xa(e,m-1,e,m);else{if(n(e.childNodes[m],["li","dt","dd"])&&ka(e.childNodes[m].firstChild)&&0!=m){var v=e.childNodes[m-1];ka(v.lastChild)&&!d(v.lastChild,"br")&&v.appendChild(document.createElement("br"));ka(v.lastChild)&&v.appendChild(document.createElement("br"))}if(n(e.childNodes[m],
["li","dt","dd"])&&n(e.childNodes[m-1],["li","dt","dd"]))e=e.childNodes[m-1],m=x(e),g=e.nextSibling,q=0;else for(;0<=m-1&&m-1<e.childNodes.length;)O(e.childNodes[m-1])&&ca(e.childNodes[m-1])?(e.removeChild(e.childNodes[m-1]),m--):(e=e.childNodes[m-1],m=x(e));v=l.createRange();v.setStart(e,m);v.setEnd(g,q);Xa(v);D(document.body,c.startContainer)||(v.startContainer.hasChildNodes()||v.startContainer.nodeType==b.Node.TEXT_NODE||Fa(v.startContainer)?(c.setStart(v.startContainer,v.startOffset),c.setEnd(v.startContainer,
v.startOffset)):(c.setStart(v.startContainer.parentNode,k.getIndexInParent(v.startContainer)),c.setEnd(v.startContainer.parentNode,k.getIndexInParent(v.startContainer))))}}}else Xa(c)}};var Lc="address dd div dt h1 h2 h3 h4 h5 h6 p pre".split(" ");Y.formatblock={action:function(a){function c(a){return function(d){return O(d)&&La(d,a)&&q(d,Lc)&&!b(s(d)).some(la)}}function e(a){return function(d){return q(d,a)&&!d.attributes.length}}function g(){return!1}function k(a){return function(){return document.createElement(a)}}
var m;/^<.*>$/.test(a)&&(a=a.slice(1,-1));a=a.toLowerCase();if(-1!=b(Lc).indexOf(a)){var l=Ka(R()),v=S(l,function(a){return O(a)&&(Qb(a)||Na(a,"p")||n(a,["dd","dt"]))&&!b(s(a)).some(la)}),y=lb(v);for(m=0;m<v.length;m++)for(var p=v[m];b(t(p)).some(c(p));)ja([p],l);for(mb(y,l);v.length;){if(Bb(v[0]))m=[].slice.call(A(v[0].childNodes)),y=lb(m),ra(v[0],l),mb(y,l),v.shift();else for(m=[],m.push(v.shift());v.length&&v[0]==m[m.length-1].nextSibling&&!Bb(v[0])&&!d(m[m.length-1],"BR");)m.push(v.shift());db(ia(m,
-1==f.inArray(a,["div","p"])?e(a):g,k(a),l),l)}}},indeterm:function(){var a=Ka(R()),a=ha(a,function(a){return pa(a)&&O(a)&&!a.hasChildNodes()});if(!a.length)return!1;var d=null,c;for(c=0;c<a.length;c++){for(var e=a[c];O(e.parentNode)&&La(e,e.parentNode)&&!q(e,Lc);)e=e.parentNode;var g="";O(e)&&q(e,Lc)&&!b(s(e)).some(la)&&(g=e.tagName);if(null===d)d=g;else if(d!=g)return!0}return!1},value:function(){var a=Ka(R()),a=ha(a,function(a){return pa(a)&&O(a)&&!a.hasChildNodes()});if(!a.length)return"";for(a=
a[0];O(a.parentNode)&&La(a,a.parentNode)&&!q(a,Lc);)a=a.parentNode;return O(a)&&q(a,Lc)&&!b(s(a)).some(la)?a.tagName.toLowerCase():""}};Y.forwarddelete={action:function(a,c){f.browser.msie&&7>=f.browser.version&&ed(c,!0);if(c.collapsed){eb(c.startContainer,c.startOffset);for(var e=c.startContainer,g=c.startOffset;;)if(g==x(e)&&O(e.nextSibling)&&ca(e.nextSibling))e.parentNode.removeChild(e.nextSibling);else if(g<e.childNodes.length&&O(e.childNodes[g])&&ca(e.childNodes[g]))e.removeChild(e.childNodes[g]);
else if(g<e.childNodes.length&&Ma(e.childNodes[g]))g++;else if(g==x(e)&&ka(e)||ca(e))g=1+k.getIndexInParent(e),e=e.parentNode;else if(g<e.childNodes.length&&!oa(e.childNodes[g])&&!n(e.childNodes[g],["br","img"]))e=e.childNodes[g],g=0;else break;eb(c.startContainer,c.startOffset);var q=Sc(e,g);if(q)q.parentNode.removeChild(q);else if(e.nodeType==b.Node.TEXT_NODE&&g!=x(e)){c.setStart(e,g);c.setEnd(e,g);for(q=g+1;q!=e.length&&/^[\u0300-\u036f\u0591-\u05bd\u05c1\u05c2]$/.test(e.data[q]);)q++;Xa(e,g,e,
q)}else if(!ka(e))if(g<e.childNodes.length&&n(e.childNodes[g],["br","hr","img"]))c.setStart(e,g),c.setEnd(e,g),Xa(e,g,e,g+1);else{for(var m=e,q=g;;)if(q==x(m))q=1+k.getIndexInParent(m),m=m.parentNode;else if(q<m.childNodes.length&&O(m.childNodes[q])&&ca(m.childNodes[q]))m.removeChild(m.childNodes[q]);else break;if(!d(m.childNodes[q-1],"table"))if(d(m.childNodes[q],"table"))c.setStart(m,q),c.setEnd(m,q+1);else if(g==x(e)&&n(m.childNodes[q],["br","hr"]))c.setStart(e,g),c.setEnd(e,g),Xa(m,q,m,q+1);else{for(;q<
m.childNodes.length;)O(m.childNodes[q])&&ca(m.childNodes[q])?m.removeChild(m.childNodes[q]):(m=m.childNodes[q],q=0);e=Xa(e,g,m,q);c.setStart(e.startContainer,e.startOffset);c.setEnd(e.endContainer,e.endOffset)}}}else Xa(c)}};Y.indent={action:function(){var a=[],b;for(b=R().endContainer;b!=R().commonAncestorContainer;b=b.parentNode)d(b,"LI")&&a.unshift(b);for(b=R().startContainer;b!=R().commonAncestorContainer;b=b.parentNode)d(b,"LI")&&a.unshift(b);for(b=R().commonAncestorContainer;b;b=b.parentNode)d(b,
"LI")&&a.unshift(b);for(b=0;b<a.length;b++)Jb(a[b],R());a=Ka(R());b=[];b=S(a,function(a){return O(a)&&(Na(a,"div")||Na(a,"ol"))});for(b.length&&d(b[0],"LI")&&n(b[0].parentNode,["OL","UL"])&&d(b[0].previousSibling,"LI")&&Jb(b[0].previousSibling,a);b.length;){var c=[];for(c.push(b.shift());b.length&&b[0]==c[c.length-1].nextSibling;)c.push(b.shift());gc(c,a)}}};Y.inserthorizontalrule={action:function(a,d){for(;0==d.startOffset&&d.startContainer.parentNode;)d.setStart(d.startContainer.parentNode,k.getIndexInParent(d.startContainer));
for(;d.endOffset==x(d.endContainer)&&d.endContainer.parentNode;)d.setEnd(d.endContainer.parentNode,1+k.getIndexInParent(d.endContainer));Xa(d,{blockMerging:!1});if(O(R().startContainer)||Fa(R().startContainer)){R().startContainer.nodeType==b.Node.TEXT_NODE&&0==R().startOffset&&(R().setStart(R().startContainer.parentNode,k.getIndexInParent(R().startContainer)),R().collapse(!0));R().startContainer.nodeType==b.Node.TEXT_NODE&&R().startOffset==x(R().startContainer)&&(R().setStart(R().startContainer.parentNode,
1+k.getIndexInParent(R().startContainer)),R().collapse(!0));var c=document.createElement("hr");d.insertNode(c);db(c,d);d.setStart(c.parentNode,1+k.getIndexInParent(c));d.setEnd(c.parentNode,1+k.getIndexInParent(c));l.getSelection().removeAllRanges();l.getSelection().addRange(d)}}};Y.inserthtml={action:function(a,d){Xa(d);if(O(d.startContainer)||Fa(d.startContainer)){var c=d.createContextualFragment(a),e=c.lastChild;if(e){var g=s(c);oa(d.startContainer)&&b(d.startContainer.childNodes).filter(function(a,
d){return O(a)&&Ma(a)&&k.getIndexInParent(a)>=d.startOffset},!0).forEach(function(a){a.parentNode.removeChild(a)});d.insertNode(c);oa(d.startContainer)&&bb(d.startContainer);d.setStart(e.parentNode,1+k.getIndexInParent(e));d.setEnd(e.parentNode,1+k.getIndexInParent(e));for(c=0;c<g.length;c++)db(g[c],d);X(d)}}}};Y.insertimage={action:function(a){if(""!==a){var b=R();Xa(b,{stripWrappers:!1});if(O(R().startContainer)||Fa(R().startContainer)){oa(b.startContainer)&&1==b.startContainer.childNodes.length&&
d(b.startContainer.firstChild,"br")&&0==b.startOffset&&b.startContainer.removeChild(b.startContainer.firstChild);var c=document.createElement("img");c.setAttribute("src",a);b.insertNode(c);b.setStart(c.parentNode,1+k.getIndexInParent(c));b.setEnd(c.parentNode,1+k.getIndexInParent(c));l.getSelection().removeAllRanges();l.getSelection().addRange(b);c.removeAttribute("width");c.removeAttribute("height")}}}};Y.insertlinebreak={action:function(a,d){Xa(d,{stripWrappers:!1});if(O(d.startContainer)||Fa(d.startContainer))if(d.startContainer.nodeType!=
b.Node.ELEMENT_NODE||Na("br",d.startContainer))if(d.startContainer.nodeType==b.Node.ELEMENT_NODE||Na("br",d.startContainer.parentNode)){var c,e;d.startContainer.nodeType==b.Node.TEXT_NODE&&0==d.startOffset&&(c=d.startContainer.parentNode,e=k.getIndexInParent(d.startContainer),l.getSelection().collapse(c,e),d.setStart(c,e),d.setEnd(c,e));d.startContainer.nodeType==b.Node.TEXT_NODE&&d.startOffset==x(d.startContainer)&&(c=d.startContainer.parentNode,e=1+k.getIndexInParent(d.startContainer),l.getSelection().collapse(c,
e),d.setStart(c,e),d.setEnd(c,e));c=document.createElement("br");d.insertNode(c);l.getSelection().collapse(c.parentNode,1+k.getIndexInParent(c));d.setStart(c.parentNode,1+k.getIndexInParent(c));d.setEnd(c.parentNode,1+k.getIndexInParent(c));Ia(c)&&(d.insertNode(Ua()),l.getSelection().collapse(c.parentNode,1+k.getIndexInParent(c)),d.setStart(c.parentNode,1+k.getIndexInParent(c)),d.setEnd(c.parentNode,1+k.getIndexInParent(c)));f.browser.msie&&8>f.browser.version&&c.parentNode.removeAttribute("style")}}};
Y.insertorderedlist={action:function(a,d){wb("ol",d)},indeterm:function(){return/^mixed( ol)?$/.test(Fb())},state:function(){return"ol"==Fb()}};var Zd={LI:!0,DT:!0,DD:!0};Y.insertparagraph={action:function(a,c){var g;Xa(c);fc(kb(c.startContainer),c);if(O(c.startContainer)||Fa(c.startContainer)){var q=c.startContainer,m=c.startOffset;q.nodeType==b.Node.TEXT_NODE&&0!=m&&m!=x(q)&&e(q,m);q.nodeType==b.Node.TEXT_NODE&&m==x(q)&&(m=1+k.getIndexInParent(q),q=q.parentNode);if(q.nodeType==b.Node.TEXT_NODE||
q.nodeType==b.Node.COMMENT_NODE)m=k.getIndexInParent(q),q=q.parentNode;l.getSelection().collapse(q,m);c.setStart(q,m);c.setEnd(q,m);for(var v=q;!Bb(v)&&O(v.parentNode)&&La(q,v.parentNode);)v=v.parentNode;if(!O(v)||!La(v,q)||!Bb(v)){var y=Dc;g=Ka(c);g=S(g,function(a){return Na(a,"p")}).slice(0,1);if(!g.length){if(!Na(y,c.startContainer))return;v=document.createElement(y);c.insertNode(v);v.appendChild(Ua());l.getSelection().collapse(v,0);c.setStart(v,0);c.setEnd(v,0);return}for(;g[g.length-1].nextSibling&&
Na(g[g.length-1].nextSibling,"p");)g.push(g[g.length-1].nextSibling);v=ia(g,function(){return!1},function(){return document.createElement(y)},c)}if(v){var p;if("ADDRESS"==v.tagName||"LISTING"==v.tagName||"PRE"==v.tagName){var z=document.createElement("br");g=v.offsetHeight;c.insertNode(z);p=v.offsetHeight;l.getSelection().collapse(q,m+1);c.setStart(q,m+1);c.setEnd(q,m+1);g!=p||H(B(z),v)||(c.insertNode(Ua()),l.getSelection().collapse(q,m+1),c.setEnd(q,m+1))}else if(Zd[v.tagName]&&(!v.hasChildNodes()||
1==v.childNodes.length&&d(v.firstChild,"br"))){if(ja([v],c),n(v,["dd","dt"])&&b(t(v)).every(function(a){return!La(v,a)||!Na(v,a)})&&(v=Ca(v,Dc,c)),db(v,c),d(v,"li")&&d(v.nextSibling,"li")&&n(v.nextSibling.firstChild,["ol","ul"])){q=v.nextSibling;m=v.nextSibling.childNodes.length;for(g=0;g<m;g++)v.appendChild(q.childNodes[0]);q.parentNode.removeChild(q)}}else if(d(v,"p")&&d(v.parentNode,"blockquote")&&!v.nextSibling&&(!v.hasChildNodes()||1===v.childNodes.length&&d(v.firstChild,"br")))f(v.parentNode).after(v);
else{m=l.createRange();m.setStart(c.startContainer,c.startOffset);for(m.setEnd(v,x(v));0==m.startOffset&&m.startContainer!=v;)m.setStart(m.startContainer.parentNode,k.getIndexInParent(m.startContainer));for(;m.startOffset==x(m.startContainer)&&m.startContainer!=v;)m.setStart(m.startContainer.parentNode,1+k.getIndexInParent(m.startContainer));q=S(m);q=!q.length||1==q.length&&d(q[0],"br");q=/^H[1-6]$/.test(v.tagName)&&q?Dc:"DT"==v.tagName&&q?"dd":"DD"==v.tagName&&q?"dt":v.tagName.toLowerCase();q=document.createElement(q);
na(v,q);q.removeAttribute("id");v.parentNode.insertBefore(q,v.nextSibling);p=ha(m);m=m.extractContents();z=s(m);for(g=0;g<z.length;g++)z[g].nodeType==b.Node.ELEMENT_NODE&&-1==b(p).indexOf(z[g])&&z[g].removeAttribute("id");g=[];if(p=m.firstChild){do Qa(p)||g.push(p);while(null!=(p=p.nextSibling))}d(q,"li")&&g.length&&n(g[0],["ul","ol"])&&(g=q.offsetHeight,z=Ua(),q.appendChild(z),p=q.offsetHeight,g!==p&&q.removeChild(z));q.appendChild(m);bb(v);bb(q);l.getSelection().collapse(q,0);c.setStart(q,0);c.setEnd(q,
0)}}}}};Y.inserttext={action:function(a,d){var c;Xa(d,{stripWrappers:!1});if(O(d.startContainer)||Fa(d.startContainer))if(1<a.length)for(c=0;c<a.length;c++)Y.inserttext.action(a[c],d);else if(""!=a)if("\n"==a)Y.insertparagraph.action("",d);else{c=d.startContainer;var e=d.startOffset;0<=e-1&&e-1<c.childNodes.length&&c.childNodes[e-1].nodeType==b.Node.TEXT_NODE&&(c=c.childNodes[e-1],e=x(c));0<=e&&e<c.childNodes.length&&c.childNodes[e].nodeType==b.Node.TEXT_NODE&&(c=c.childNodes[e],e=0);var g=c.nodeType==
b.Node.ELEMENT_NODE?c:c.parentNode;" "==a&&g.nodeType==b.Node.ELEMENT_NODE&&-1==f.inArray(b.getComputedStyle(g).whiteSpace,["pre","pre-wrap"])&&(a="\u00a0");g=ob(d);c.nodeType==b.Node.TEXT_NODE?(c.insertData(e,a),l.getSelection().collapse(c,e),d.setStart(c,e),l.getSelection().extend(c,e+1),d.setEnd(c,e+1)):(1==c.childNodes.length&&Ia(c.firstChild)&&c.removeChild(c.firstChild),c=document.createTextNode(a),d.insertNode(c),l.getSelection().collapse(c,0),d.setStart(c,0),l.getSelection().extend(c,1),d.setEnd(c,
1));rb(g,d);eb(d.startContainer,d.startOffset);eb(d.endContainer,d.endOffset);l.getSelection().collapseToEnd();d.collapse(!1)}}};Y.insertunorderedlist={action:function(a,d){wb("ul",d)},indeterm:function(){return/^mixed( ul)?$/.test(Fb())},state:function(){return"ul"==Fb()}};Y.justifycenter={action:function(a,d){Ub("center",d)},indeterm:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"center"==Va(a)})&&b(a).some(function(a){return"center"!=
Va(a)})},state:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"center"==Va(a)})},value:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length?Va(a[0]):"left"}};Y.justifyfull={action:function(a,d){Ub("justify",d)},indeterm:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"justify"==Va(a)})&&b(a).some(function(a){return"justify"!=
Va(a)})},state:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"justify"==Va(a)})},value:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length?Va(a[0]):"left"}};Y.justifyleft={action:function(a,d){Ub("left",d)},indeterm:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"left"==Va(a)})&&b(a).some(function(a){return"left"!=
Va(a)})},state:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"left"==Va(a)})},value:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length?Va(a[0]):"left"}};Y.justifyright={action:function(a,d){Ub("right",d)},indeterm:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"right"==Va(a)})&&b(a).some(function(a){return"right"!=
Va(a)})},state:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"right"==Va(a)})},value:function(){var a=ha(Ka(R()),function(a){return O(a)&&pa(a)&&!a.hasChildNodes()});return a.length?Va(a[0]):"left"}};Y.outdent={action:function(){var a=[];(function(){var b;for(b=R().endContainer;b!=R().commonAncestorContainer;b=b.parentNode)d(b,"li")&&a.unshift(b);for(b=R().startContainer;b;b=b.parentNode)d(b,"li")&&a.unshift(b)})();b(a).forEach(function(a){Jb(a,
R())});for(var c=Ka(R()),e=S(c,function(a){return O(a)&&(!b(s(a)).some(O)||n(a,["ol","ul"])||d(a,"li")&&n(a.parentNode,["ol","ul"]))});e.length;){for(;e.length&&(n(e[0],["OL","UL"])||!n(e[0].parentNode,["OL","UL"]));)Tb(e.shift(),c);if(!e.length)break;var g=[];for(g.push(e.shift());e.length&&e[0]==g[g.length-1].nextSibling&&!n(e[0],["OL","UL"]);)g.push(e.shift());var f=lb(g);ja(g,c);b(g).forEach(db);mb(f,c)}}};Y.selectall={action:function(){var a=document.body;a||(a=document.documentElement);a?l.getSelection().selectAllChildren(a):
l.getSelection().removeAllRanges()}};Y.stylewithcss={action:function(a){xb="false"!=String(a).toLowerCase()},state:function(){return xb}};Y.usecss={action:function(a){xb="false"==String(a).toLowerCase()}};(function(){var a=[],d;for(d in Y)Y.hasOwnProperty(d)&&a.push(d);b(a).forEach(function(a){null==Y[a].relevantCssProperty&&(Y[a].relevantCssProperty=null);null!=Y[a].inlineCommandActivatedValues&&null==Y[a].indeterm&&(Y[a].indeterm=function(d){d=b(Wa(d,function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(d){return Ea(d,
a)});var c=b(d).filter(function(d){return-1!=b(Y[a].inlineCommandActivatedValues).indexOf(d)});return 1<=c.length&&1<=d.length-c.length});null!=Y[a].inlineCommandActivatedValues&&(Y[a].state=function(d){var c=Wa(d,function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE});return 0==c.length?-1!=b(Y[a].inlineCommandActivatedValues).indexOf(Ea(d.startContainer,a)):b(c).every(function(d){return-1!=b(Y[a].inlineCommandActivatedValues).indexOf(Ea(d,a))})});null!=Y[a].standardInlineValueCommand&&(Y[a].indeterm=
function(){var d=b(Wa(R())).filter(function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE},!0).map(function(d){return Ea(d,a)}),c;for(c=1;c<d.length;c++)if(d[c]!=d[c-1])return!0;return!1},Y[a].value=function(d){var c=Wa(d,function(a){return O(a)&&a.nodeType==b.Node.TEXT_NODE})[0];"undefined"==typeof c&&(c=d.startContainer);return Ea(c,a)})})})();return{commands:Y,execCommand:fa,queryCommandIndeterm:function(a,d){a=a.toLowerCase();return J(a,"indeterm",d,function(a){return function(){return aa(a,d)?
Y[a].indeterm(d):!1}}(a))},queryCommandState:ua,queryCommandValue:va,queryCommandEnabled:aa,queryCommandSupported:function(a){a=a.toLowerCase();return Y.hasOwnProperty(a)},copyAttributes:na,createEndBreak:Ua,isEndBreak:function(a){return d(a,"br")&&a.parentNode.lastChild===a},ensureContainerEditable:bb,isEditingHost:Fa,isEditable:O,getStateOverride:lc,setStateOverride:mc,resetOverrides:Kb,unsetStateOverride:fd}});define("aloha/selection","aloha/core jquery util/class util/range util/arrays util/strings aloha/console PubSub aloha/engine aloha/ecma5shims aloha/rangy-core".split(" "),
function(l,b,p,m,k,f,c,e,g,q){function a(a,d){var c=l.activeEditable?l.activeEditable.obj.parent()[0]:null,c=b(a).parentsUntil(c).get(),e;e=[];var g,f,n;1===a.nodeType&&"BODY"!==a.nodeName&&"HTML"!==a.nodeName?e.push(a.cloneNode(!1).outerHTML):e.push("#"+a.nodeType);n=0;for(f=c.length;n<f;n++){g=c[n];if("BODY"===g.nodeName||"HTML"===g.nodeName)break;e.push(g.cloneNode(!1).outerHTML)}e=e.join("");return d&&a===d.node&&k.equal(d.parents,c)&&e===d.html?null:{node:a,parents:c,html:e}}function d(a){var d;
b.browser.msie&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset&&3==a.startContainer.nodeType&&a.startOffset==a.startContainer.data.length&&a.startContainer.nextSibling&&(d=a.startContainer.nextSibling,"OL"===d.nodeName||"UL"===d.nodeName)&&(" "==a.startContainer.data[a.startContainer.data.length-1]?a.startOffset=a.endOffset=a.startOffset-1:a.startContainer.data+=" ")}var n=window.GENTICS,v=null,y=null;m=p.extend({_constructor:function(){this.rangeObject={};this.preventSelectionChangedFlag=
!1;this.tagHierarchy={textNode:{},abbr:{textNode:!0},b:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,strong:!0},pre:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0},blockquote:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ins:{textNode:!0,b:!0,i:!0,
em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,u:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ul:{li:!0},ol:{li:!0},li:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,a:!0},tr:{td:!0,th:!0},table:{tr:!0},div:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,table:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,p:!0,div:!0,pre:!0,blockquote:!0,a:!0},h1:{textNode:!0,b:!0,i:!0,em:!0,
sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0}};this.tagHierarchy={textNode:this.tagHierarchy.textNode,abbr:this.tagHierarchy.abbr,br:this.tagHierarchy.textNode,img:this.tagHierarchy.textNode,b:this.tagHierarchy.b,strong:this.tagHierarchy.b,code:this.tagHierarchy.b,q:this.tagHierarchy.b,blockquote:this.tagHierarchy.blockquote,cite:this.tagHierarchy.b,i:this.tagHierarchy.b,em:this.tagHierarchy.b,sup:this.tagHierarchy.b,sub:this.tagHierarchy.b,span:this.tagHierarchy.b,del:this.tagHierarchy.del,
ins:this.tagHierarchy.ins,u:this.tagHierarchy.b,p:this.tagHierarchy.b,pre:this.tagHierarchy.pre,a:this.tagHierarchy.b,ul:this.tagHierarchy.ul,ol:this.tagHierarchy.ol,li:this.tagHierarchy.li,td:this.tagHierarchy.li,div:this.tagHierarchy.div,h1:this.tagHierarchy.h1,h2:this.tagHierarchy.h1,h3:this.tagHierarchy.h1,h4:this.tagHierarchy.h1,h5:this.tagHierarchy.h1,h6:this.tagHierarchy.h1,table:this.tagHierarchy.table};this.replacingElements={h1:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0,blockquote:!0}};
this.replacingElements={h1:this.replacingElements.h1,h2:this.replacingElements.h1,h3:this.replacingElements.h1,h4:this.replacingElements.h1,h5:this.replacingElements.h1,h6:this.replacingElements.h1,pre:this.replacingElements.h1,p:this.replacingElements.h1,blockquote:this.replacingElements.h1};this.allowedToStealElements={h1:{textNode:!0}};this.allowedToStealElements={h1:this.allowedToStealElements.h1,h2:this.allowedToStealElements.h1,h3:this.allowedToStealElements.h1,h4:this.allowedToStealElements.h1,
h5:this.allowedToStealElements.h1,h6:this.allowedToStealElements.h1,p:this.tagHierarchy.b}},SelectionTree:function(){this.domobj={};this.selection=void 0;this.children=[]},onChange:function(a,d,c,e){this.updateSelectionTimeout&&window.clearTimeout(this.updateSelectionTimeout);var g=this;this.updateSelectionTimeout=window.setTimeout(function(){var f=new l.Selection.SelectionRange(!0);if(f.startContainer&&"HTML"!==f.startContainer.nodeName&&"BODY"!==f.startContainer.nodeName)b.browser.msie&&e&&f.select(),
l.Selection._updateSelection(d,f);else if(!this.updateSelectionTimeout)g.onChange(a,d,10+2*(c||5))},c||5)},preventSelectionChanged:function(){this.preventSelectionChangedFlag=!0},isSelectionChangedPrevented:function(){var a=this.preventSelectionChangedFlag;this.preventSelectionChangedFlag=!1;return a},isSelectionEditable:function(){return this.rangeObject.commonAncestorContainer&&b(this.rangeObject.commonAncestorContainer).contentEditable()},isFloatingMenuVisible:function(){var a=b(l.Selection.rangeObject.commonAncestorContainer).attr("data-aloha-floatingmenu-visible");
return"undefined"!==a&&"true"===a?!0:!1},updateSelection:function(a){return this._updateSelection(a,null)},_updateSelection:function(d,g){if(d&&d.originalEvent&&!0===d.originalEvent.stopSelectionUpdate||"undefined"===typeof g)return!1;if((this.rangeObject=g=g||new l.Selection.SelectionRange(!0))&&g.startContainer&&"HR"===g.startContainer.nodeName&&g.endContainer&&"HR"===g.endContainer.nodeName)return l.getSelection().removeAllRanges(),!0;g.update();if(g&&g.startContainer&&g.endContainer&&0<b(g.commonAncestorContainer).closest(".aloha-editable").length){var f=
!(3===g.startContainer.nodeType&&!b(g.startContainer.parentNode).contentEditable()),n=!(3===g.endContainer.nodeType&&!b(g.endContainer.parentNode).contentEditable());if(!f||!n)return l.getSelection().removeAllRanges(),!0}if(this.isSelectionChangedPrevented())return!0;l.trigger("aloha-selection-changed-before",[this.rangeObject,d]);l.trigger("aloha-selection-changed",[this.rangeObject,d]);var f=this.rangeObject,k=f.startContainer,n=f.endContainer;if(k&&n){if(k=a(k,v),n=a(n,y),k||n)v=k,y=n,e.pub("aloha.selection.context-change",
{range:f,event:d})}else c.warn("aloha/selection","encountered range object without start or end container");l.trigger("aloha-selection-changed-after",[this.rangeObject,d]);return!0},getSelectionTree:function(a){if(!a)return this.rangeObject.getSelectionTree();if(!a.commonAncestorContainer)return l.Log.error(this,"the rangeObject is missing the commonAncestorContainer"),!1;this.inselection=!1;n.Utils.Dom.doCleanup({merge:!0},a)&&(a.update(),a.select());return this.recursiveGetSelectionTree(a,a.commonAncestorContainer)},
recursiveGetSelectionTree:function(a,d){var c=0,e=this,g=[];b(d).contents().each(function(b){var f="none",n=!1,k=!1,q=!1,m=!1,v=!1,y=!1;a.isCollapsed()&&d===a.startContainer&&a.startOffset==b&&(g[c]=new l.Selection.SelectionTree,g[c].selection="collapsed",g[c].domobj=void 0,e.inselection=!1,q=!0,c++);if(!e.inselection&&!q){var p;try{p=this.nodeType}catch(A){return}switch(p){case 3:this===a.startContainer&&(e.inselection=!0,f=0<a.startOffset?"partial":"full",n=a.startOffset,k=this.length);break;case 1:this===
a.startContainer&&0===a.startOffset&&(e.inselection=!0,f="full"),d===a.startContainer&&a.startOffset===b&&(e.inselection=!0,f="full")}}if(e.inselection&&!q){"none"==f&&(f="full");switch(this.nodeType){case 3:this===a.endContainer&&(e.inselection=!1,a.endOffset<this.length&&(f="partial"),!1===n&&(n=0),k=a.endOffset);break;case 1:this===a.endContainer&&0===a.endOffset&&(e.inselection=!1)}d===a.endContainer&&a.endOffset<=b&&(e.inselection=!1,f="none")}g[c]=new l.Selection.SelectionTree;g[c].domobj=this;
g[c].selection=f;"partial"==f&&(g[c].startOffset=n,g[c].endOffset=k);g[c].children=e.recursiveGetSelectionTree(a,this);f=g[c].children.length;if(0<f){for(b=0;b<f;++b)switch(g[c].children[b].selection){case "none":m=!0;break;case "full":y=!0;break;case "partial":v=!0}v||y&&m?g[c].selection="partial":!y||v||m||(g[c].selection="full")}c++});a.isCollapsed()&&d===a.startContainer&&a.startOffset==d.childNodes.length&&(g[c]=new l.Selection.SelectionTree,g[c].selection="collapsed",g[c].domobj=void 0);return g},
getRangeObject:function(){return this.rangeObject},isRangeObjectWithinMarkup:function(a,d,c,e,g){var f=this;a=b(d?a.endContainer:a.startContainer).parents();var n=!1,k=-1;"undefined"!==typeof e&&"function"!==typeof e&&l.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof e&&(e=function(a,d){return f.standardTextLevelSemanticsComparator(a,d)});0<a.length&&a.each(function(){if(this===g)return l.Log.debug(f,"reached limit dom obj"),!1;if(e(this,c))return!1===n&&(n=[]),l.Log.debug(f,
"reached object equal to markup"),k++,n[k]=this,!0});return n},standardSectionsAndGroupingContentComparator:function(a,d){if(1!==a.nodeType)return l.Log.debug(this,"only element nodes (nodeType == 1) can be compared"),!1;if(!d[0].nodeName)return!1;var b=l.Selection.replacingElements[a.nodeName.toLowerCase()];return b&&b[d[0].nodeName.toLowerCase()]},standardTagNameComparator:function(a,d){if(1===a.nodeType)return a.nodeName!=d[0].nodeName?!1:!0;l.Log.debug(this,"only element nodes (nodeType == 1) can be compared");
return!1},standardTextLevelSemanticsComparator:function(a,d){if(1===a.nodeType)return a.nodeName==d[0].nodeName&&this.standardAttributesComparator(a,d)?!0:!1;l.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},standardAttributesComparator:function(a,d){var b=f.words(a&&a.className||""),c=f.words(d.length&&d[0].className||"");k.sortUnique(b);k.sortUnique(c);return k.equal(b,c)},changeMarkup:function(a,d,c){var e=d[0].tagName.toLowerCase(),f,n,k=this.isRangeObjectWithinMarkup(a,
!1,d,c,f),m=this.isRangeObjectWithinMarkup(a,!0,d,c,f),v,y,p,A;if(this.replacingElements[e])n=a,a=new this.SelectionRange(a),e=l.activeEditable?l.activeEditable.obj.get(0):b("body"),a.update(e),d.isReplacingElement=!0;else if(a.isCollapsed())return l.Log.debug(this,"early returning from applying markup because nothing is currently selected"),!1;f=l.activeEditable?l.activeEditable.obj[0]:b("body");d.isReplacingElement||0!==a.startOffset||null!=(p=this.getTextNodeSibling(!1,a.commonAncestorContainer.parentNode,
a.startContainer))&&(A=this.isRangeObjectWithinMarkup({startContainer:p,startOffset:0},!1,d,c,f));d.isReplacingElement||a.endOffset!==a.endContainer.length||null!=(v=this.getTextNodeSibling(!0,a.commonAncestorContainer.parentNode,a.endContainer))&&(y=this.isRangeObjectWithinMarkup({startContainer:v,startOffset:0},!1,d,c,f));if(!d.isReplacingElement&&k&&!m)l.Log.info(this,"markup 2 non-markup"),this.prepareForRemoval(a.getSelectionTree(),d,c),b(k).addClass("preparedForRemoval"),this.insertCroppedMarkups(k,
a,!1,c);else if(!d.isReplacingElement&&k&&m)l.Log.info(this,"markup 2 markup"),this.prepareForRemoval(a.getSelectionTree(),d,c),this.splitRelevantMarkupObject(k,m,a,c);else if(!d.isReplacingElement&&(!k&&m||y||A))l.Log.info(this,"non-markup 2 markup OR with next2markup"),A&&y?(k=new l.Selection.SelectionRange(a),k.startContainer=b(A[A.length-1]).textNodes()[0],k.startOffset=0,k.endContainer=b(y[y.length-1]).textNodes().last()[0],k.endOffset=k.endContainer.length,k.update(),this.applyMarkup(k.getSelectionTree(),
a,d,c),l.Log.info(this,"double extending previous markup(previous and after selection), actually wrapping it ...")):!A||y||m?A&&!y&&m?(k=new l.Selection.SelectionRange(a),k.startContainer=b(A[A.length-1]).textNodes()[0],k.startOffset=0,k.endContainer=b(m[m.length-1]).textNodes().last()[0],k.endOffset=k.endContainer.length,k.update(),this.applyMarkup(k.getSelectionTree(),a,d,c),l.Log.info(this,"double extending previous markup(previous and relevant at the end), actually wrapping it ...")):!A&&y?(this.extendExistingMarkupWithSelection(y,
a,!0,c),l.Log.info(this,"extending following markup backwards")):this.extendExistingMarkupWithSelection(m,a,!0,c):(this.extendExistingMarkupWithSelection(A,a,!1,c),l.Log.info(this,"extending previous markup"));else if(d.isReplacingElement||!(k||m||A||y)){l.Log.info(this,"non-markup 2 non-markup");a.startContainer!==a.endContainer?m=!1:1!=a.startContainer.nodeType?m=!1:(m=a.startContainer.firstChild,m=!m||!m.nextSibling&&"BR"==m.nodeName);if(m){d=d.clone();c=a.startContainer!==a.endContainer?!1:1!=
a.startContainer.nodeType?!1:g.isEndBreak(a.startContainer);c&&d[0].appendChild(g.createEndBreak());l.activeEditable&&b.browser.mozilla&&l.activeEditable.obj.focus();g.isEditable(a.startContainer)?(g.copyAttributes(a.startContainer,d[0]),b(a.startContainer).after(d[0]).remove()):g.isEditingHost(a.startContainer)&&(b(a.startContainer).append(d[0]),g.ensureContainerEditable(d[0]));n.startContainer=d[0];n.endContainer=d[0];n.startOffset=0;n.endOffset=0;return}this.applyMarkup(a.getSelectionTree(),a,
d,c,{setRangeObject2NewMarkup:!0});n.startContainer=a.startContainer;n.endContainer=a.endContainer;n.startOffset=a.startOffset;n.endOffset=a.endOffset}d.isReplacingElement&&(n&&n.startContainer.className&&-1<n.startContainer.className.indexOf("preparedForRemoval")&&(c=b(n.startContainer).parents(d[0].tagName).get(0),n.startContainer=c,a.startContainer=c),n&&n.endContainer.className&&-1<n.endContainer.className.indexOf("preparedForRemoval")&&(c=b(n.endContainer).parents(d[0].tagName).get(0),n.endContainer=
c,a.endContainer=c));b(".preparedForRemoval").zap();d.isReplacingElement?(q.Node.ELEMENT_NODE===n.startContainer.nodeType&&n.startContainer.childNodes&&n.startContainer.childNodes.length<n.startOffset&&(n.startOffset=n.startContainer.childNodes.length,a.startOffset=n.startContainer.childNodes.length),q.Node.ELEMENT_NODE===n.endContainer.nodeType&&n.endContainer.childNodes&&n.endContainer.childNodes.length<n.endOffset&&(n.endOffset=n.endContainer.childNodes.length,a.endOffset=n.endContainer.childNodes.length),
a.endContainer=n.endContainer,a.endOffset=n.endOffset,a.startContainer=n.startContainer,a.startOffset=n.startOffset,n.update(),n.select()):(a.update(),a.select())},areMarkupObjectsAsLongAsRangeObject:function(a,d,c){var e,g,f;if(0!==c.startOffset)return!1;e=0;for(f=a.length;e<f;e++)if(g=b(a[e]),g.textNodes().first()[0]!==c.startContainer)return!1;e=0;for(a=d.length;e<a;e++)if(g=b(d[e]),g=g.textNodes().last()[0],g!==c.endContainer||g.length!=c.endOffset)return!1;return!0},splitRelevantMarkupObject:function(a,
d,c,e){b(a).addClass("preparedForRemoval");b(d).addClass("preparedForRemoval");if(this.areMarkupObjectsAsLongAsRangeObject(a,d,c))return!0;var g=this.intersectRelevantMarkupObjects(a,d);g?(this.insertCroppedMarkups([g],c,!1,e),this.insertCroppedMarkups([g],c,!0,e)):(this.insertCroppedMarkups(a,c,!1,e),this.insertCroppedMarkups(d,c,!0,e));return!0},intersectRelevantMarkupObjects:function(a,d){var b=!1,c,e,g,f,n,k;if(!a||!d)return b;n=a.length;k=d.length;for(c=0;c<n;c++)for(e=a[c],g=0;g<k;g++)f=d[g],
e===f&&(b=e);return b},extendExistingMarkupWithSelection:function(a,d,c,e){var g,f,n,k,q,m,l;c||(g=!0);c&&(f=!0);c=[];n=0;for(k=a.length;n<k;n++)c[n]=new this.SelectionRange,q=a[n],f&&!g&&(c[n].startContainer=d.startContainer,c[n].startOffset=d.startOffset,m=b(q).textNodes(!0),l=m.length-1,c[n].endContainer=m[l],c[n].endOffset=m[l].length,c[n].update(),this.applyMarkup(c[n].getSelectionTree(),d,this.getClonedMarkup4Wrapping(q),e,{setRangeObject2NewMarkup:!0})),!f&&g&&(m=b(q).textNodes(!0),c[n].startContainer=
m[0],c[n].startOffset=0,c[n].endContainer=d.endContainer,c[n].endOffset=d.endOffset,c[n].update(),this.applyMarkup(c[n].getSelectionTree(),d,this.getClonedMarkup4Wrapping(q),e,{setRangeObject2NewMarkup:!0}));return!0},getClonedMarkup4Wrapping:function(a){a=b(a.outerHTML).removeClass("preparedForRemoval").empty();0===a.attr("class").length&&a.removeAttr("class");return a},insertCroppedMarkups:function(a,d,c,e){var g,f,n,k,q;c?f=!0:g=!0;c=[];for(k=0;k<a.length;k++){c[k]=new this.SelectionRange;q=a[k];
if(g&&!f){n=b(q).textNodes(!0);c[k].startContainer=n[0];c[k].startOffset=0;if(c[k].startContainer===d.startContainer&&c[k].startOffset===d.startOffset)continue;0===d.startOffset?(c[k].endContainer=this.getTextNodeSibling(!1,q,d.startContainer),c[k].endOffset=c[k].endContainer.length):(c[k].endContainer=d.startContainer,c[k].endOffset=d.startOffset);c[k].update();this.applyMarkup(c[k].getSelectionTree(),d,this.getClonedMarkup4Wrapping(q),e,{setRangeObject2NextSibling:!0})}!g&&f&&(c[k].startContainer=
d.endContainer,c[k].startOffset=d.endOffset,n=b(q).textNodes(!0),c[k].endContainer=n[n.length-1],c[k].endOffset=n[n.length-1].length,c[k].update(),this.applyMarkup(c[k].getSelectionTree(),d,this.getClonedMarkup4Wrapping(q),e,{setRangeObject2PreviousSibling:!0}))}return!0},changeMarkupOnSelection:function(a){var d=this.getRangeObject();this.changeMarkup(d,a,this.getStandardTagComparator(a));n.Utils.Dom.doCleanup({merge:!0},d);d.update();d.select();this.rangeObject=d},applyMarkup:function(a,d,b,c,e){var g,
f;e=e||{};this.prepareForRemoval(a,b,c);a=this.optimizeSelectionTree4Markup(a,b,c);for(g=0;g<a.length;g++)f=a[g],f.wrappable?this.wrapMarkupAroundSelectionTree(f.elements,d,b,c,e):(l.Log.debug(this,"dive further into non-wrappable object"),this.applyMarkup(f.element.children,d,b,c,e))},getMarkupType:function(a){var d=b(a)[0].nodeName.toLowerCase();a.outerHtml&&l.Log.debug(this,"Node name detected: "+d+" for: "+a.outerHtml());if("#text"==d)return"textNode";if(this.replacingElements[d])return"sectionOrGroupingContent";
if(this.tagHierarchy[d])return"textLevelSemantics";l.Log.warn(this,"unknown markup passed to this.getMarkupType(...): "+a.outerHtml())},getStandardTagComparator:function(a){var d=this;switch(this.getMarkupType(a)){case "textNode":a=function(a,d){return!1};break;case "sectionOrGroupingContent":a=function(a,b){return d.standardSectionsAndGroupingContentComparator(a,b)};break;default:a=function(a,b){return d.standardTextLevelSemanticsComparator(a,b)}}return a},prepareForRemoval:function(a,d,c){var e,
g;"undefined"!==typeof c&&"function"!==typeof c&&l.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof c&&(c=this.getStandardTagComparator(d));for(e=0;e<a.length;e++)g=a[e],g.domobj&&("full"==g.selection||"partial"==g.selection&&d.isReplacingElement)&&1===g.domobj.nodeType&&c(g.domobj,d)&&(l.Log.debug(this,"Marking for removal: "+g.domobj.nodeName),b(g.domobj).addClass("preparedForRemoval")),"none"!=g.selection&&0<g.children.length&&this.prepareForRemoval(g.children,d,
c)},wrapMarkupAroundSelectionTree:function(a,d,c,e,g){var f=[],n=-1,k="",q="",m,v,y;l.Log.debug(this,"The formatting <"+c[0].tagName+"> will be wrapped around the selection");for(m=0;m<a.length;m++)if(v=a[m],v.domobj&&!this.canTag1WrapTag2(v.domobj.parentNode.tagName.toLowerCase(),c[0].tagName.toLowerCase()))l.Log.info(this,"Skipping the wrapping of <"+c[0].tagName.toLowerCase()+"> because this tag is not allowed inside <"+v.domobj.parentNode.tagName.toLowerCase()+">");else if(!v.domobj||3!==v.domobj.nodeType||
0!==b.trim(v.domobj.nodeValue).length){if(v.domobj&&"partial"==v.selection&&!c.isReplacingElement)if(void 0!==v.startOffset&&void 0===v.endOffset)n++,k+=v.domobj.data.substr(0,v.startOffset),v.domobj.data=v.domobj.data.substr(v.startOffset,v.domobj.data.length-v.startOffset),f[n]=v.domobj;else if(void 0!==v.endOffset&&void 0===v.startOffset)n++,q+=v.domobj.data.substr(v.endOffset,v.domobj.data.length-v.endOffset),v.domobj.data=v.domobj.data.substr(0,v.endOffset),f[n]=v.domobj;else if(void 0!==v.endOffset&&
void 0!==v.startOffset){if(v.startOffset==v.endOffset){l.Log.debug(this,"skipping empty selection");continue}n++;k+=v.domobj.data.substr(0,v.startOffset);y=v.domobj.data.substr(v.startOffset,v.endOffset-v.startOffset);q+=v.domobj.data.substr(v.endOffset,v.domobj.data.length-v.endOffset);v.domobj.data=y;f[n]=v.domobj}else l.Log.debug(this,"diving into object"),this.applyMarkup(v.children,d,c,e,g);v.domobj&&("full"==v.selection||"partial"==v.selection&&c.isReplacingElement)&&(n++,f[n]=v.domobj)}0<f.length&&
(f=b(f),b.each(f,function(a,d){b.browser.msie&&3==d.nodeType&&!d.nextSibling&&!d.previousSibling&&d.parentNode&&"li"==d.parentNode.nodeName.toLowerCase()&&(d.data=b.trim(d.data))}),a=f.wrapAll(c).parent(),a.before(k).after(q),g.setRangeObject2NewMarkup&&(k=f.textNodes(),-1!=k.index(d.startContainer)&&(d.startOffset=0),-1!=k.index(d.endContainer)&&(d.endOffset=d.endContainer.length)),g.setRangeObject2NextSibling&&(k=!0,q=a.textNodes(!0).last()[0],-1!=f.index(d.startContainer)&&(d.startContainer=this.getTextNodeSibling(k,
a.parent(),q),d.startOffset=0),-1!=f.index(d.endContainer)&&(d.endContainer=this.getTextNodeSibling(k,a.parent(),q),d.endOffset-=q.length)),g.setRangeObject2PreviousSibling&&(k=!1,q=a.textNodes(!0).first()[0],-1!=f.index(d.startContainer)&&(d.startContainer=this.getTextNodeSibling(k,a.parent(),q),d.startOffset=0),-1!=f.index(d.endContainer)&&(d.endContainer=this.getTextNodeSibling(k,a.parent(),q),d.endOffset=d.endContainer.length)))},getTextNodeSibling:function(a,d,c){d=b(d).textNodes(!0);c=d.index(c);
return-1==c?!1:d[c+(a?1:-1)]||!1},optimizeSelectionTree4Markup:function(a,d,c){var e=[],g=0,f=0,n=this,k,q,m,l;"undefined"===typeof c&&(c=function(a,d){return n.standardTextLevelSemanticsComparator(d)});for(k=0;k<a.length;k++)if(a[k].domobj&&"none"!=a[k].selection)if(d.isReplacingElement&&c(d[0],b(a[k].domobj)))void 0!==e[g]&&g++,e[g]={},e[g].wrappable=!0,e[g].elements=[],e[g].elements[f]=a[k],g++;else if(this.canMarkupBeApplied2ElementAsWhole([a[k]],d))if(void 0===e[g]&&(e[g]={},e[g].wrappable=!0,
e[g].elements=[]),d.isReplacingElement){l=k;for(q=k-1;0<=q;q--)if(this.canMarkupBeApplied2ElementAsWhole([a[q]],d)&&this.isMarkupAllowedToStealSelectionTreeElement(a[q],d))l=q;else break;m=k;for(q=k+1;q<a.length;q++)if(this.canMarkupBeApplied2ElementAsWhole([a[q]],d)&&this.isMarkupAllowedToStealSelectionTreeElement(a[q],d))m=q;else break;f=0;for(q=l;q<=m;q++)e[g].elements[f]=a[q],e[g].elements[f].selection="full",f++;f=0}else e[g].elements[f]=a[k],f++;else void 0!==e[g]&&g++,e[g]={},e[g].wrappable=
!1,e[g].element=a[k],f=0,g++;return e},isMarkupAllowedToStealSelectionTreeElement:function(a,d){if(!a.domobj)return!1;var b=a.domobj.nodeName.toLowerCase(),b="#text"==b?"textNode":b,c=d[0].nodeName.toLowerCase();return(c=this.allowedToStealElements[c])&&c[b]},canMarkupBeApplied2ElementAsWhole:function(a,d){var b,c,e;d.jquery&&(b=d[0].tagName);d.tagName&&(b=d.tagName);for(c=0;c<a.length;c++)if(e=a[c],e.domobj&&("none"!=e.selection||d.isReplacingElement)&&(!this.canTag1WrapTag2(b,e.domobj.nodeName)||
0<e.children.length&&!this.canMarkupBeApplied2ElementAsWhole(e.children,d)))return!1;return!0},canTag1WrapTag2:function(a,d){a="#text"==a?"textNode":a.toLowerCase();d="#text"==d?"textNode":d.toLowerCase();var b=this.tagHierarchy[a];return b&&this.tagHierarchy[d]?b[d]:!0},mayInsertTag:function(a){var d;if("object"==typeof this.rangeObject.unmodifiableMarkupAtStart){for(d=0;d<this.rangeObject.unmodifiableMarkupAtStart.length;++d)if(!this.canTag1WrapTag2(this.rangeObject.unmodifiableMarkupAtStart[d].nodeName,
a))return!1;return!0}l.Log.warn(this,"Unable to determine whether tag "+a+" may be inserted");return!0},toString:function(){return"Aloha.Selection"},SelectionRange:n.Utils.RangeObject.extend({_constructor:function(a){this._super(a);a&&(a.commonAncestorContainer&&(this.commonAncestorContainer=a.commonAncestorContainer),a.selectionTree&&(this.selectionTree=a.selectionTree),a.limitObject&&(this.limitObject=a.limitObject),a.markupEffectiveAtStart&&(this.markupEffectiveAtStart=a.markupEffectiveAtStart),
a.unmodifiableMarkupAtStart&&(this.unmodifiableMarkupAtStart=a.unmodifiableMarkupAtStart),a.splitObject&&(this.splitObject=a.splitObject))},commonAncestorContainer:void 0,selectionTree:void 0,markupEffectiveAtStart:[],unmodifiableMarkupAtStart:[],limitObject:void 0,splitObject:void 0,select:function(){this._super();l.Selection.updateSelection()},update:function(a){this.updatelimitObject();this.updateMarkupEffectiveAtStart();this.updateCommonAncestorContainer(a);this.selectionTree=void 0},getSelectionTree:function(){this.selectionTree||
(this.selectionTree=l.Selection.getSelectionTree(this));return this.selectionTree},getSelectedSiblings:function(a){var d=this.getSelectionTree();return this.recursionGetSelectedSiblings(a,d)},recursionGetSelectedSiblings:function(a,d){var b=!1,c=!1,e;for(e=0;e<d.length;++e)if(d[e].domobj===a)c=!0,b=[];else if(!c&&d[e].children){if(b=this.recursionGetSelectedSiblings(a,d[e].children),!1!==b)break}else if(c&&d[e].domobj&&"collapsed"!=d[e].selection&&"none"!=d[e].selection)b.push(d[e].domobj);else if(c&&
"none"==d[e].selection)break;return b},updateMarkupEffectiveAtStart:function(){this.markupEffectiveAtStart=[];this.unmodifiableMarkupAtStart=[];var a=this.getStartContainerParents(),d=!1,b,c,e;for(c=0;c<a.length;c++)e=a[c],d||e===this.limitObject?(d=!0,this.unmodifiableMarkupAtStart.push(e)):(this.markupEffectiveAtStart[c]=e,!b&&n.Utils.Dom.isSplitObject(e)&&(b=!0,this.splitObject=e));b||(this.splitObject=!1)},updatelimitObject:function(){if(l.editables&&0<l.editables.length){var a=this.getStartContainerParents(),
d=l.editables,c,e,g,f;for(c=0;c<a.length;c++)for(e=a[c],g=0;g<d.length;g++)if(f=d[g].obj[0],e===f)return this.limitObject=e,!0}this.limitObject=b("body");return!0},toString:function(a){return a?"Aloha.Selection.SelectionRange {start ["+this.startContainer.nodeValue+"] offset "+this.startOffset+", end ["+this.endContainer.nodeValue+"] offset "+this.endOffset+"}":"Aloha.Selection.SelectionRange"}})});var A=p.extend({_constructor:function(a){this._nativeSelection=a;this.ranges=[];this.preventChange=
!1},anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isCollapsed:!1,rangeCount:0,collapse:function(a,d){this._nativeSelection.collapse(a,d)},collapseToStart:function(){throw"NOT_IMPLEMENTED";},extend:function(a,d){},modify:function(a,d,b){},collapseToEnd:function(){this._nativeSelection.collapseToEnd()},selectAllChildren:function(a){throw"NOT_IMPLEMENTED";},deleteFromDocument:function(){throw"NOT_IMPLEMENTED";},getRangeAt:function(a){a=this._nativeSelection.getRangeAt(a);d(a);return a},
addRange:function(a){this._nativeSelection.addRange(a);var b=this._nativeSelection._ranges;d(a);b[0]=a;l.Selection.updateSelection()},removeRange:function(a){this._nativeSelection.removeRange()},removeAllRanges:function(){this._nativeSelection.removeAllRanges()},refresh:function(a){},toString:function(){return"Aloha.Selection"},getRangeCount:function(){return this._nativeSelection.rangeCount}});l.getSelection=function(a){a=a!==document||a!==window?window:a;return new A(window.rangy.getSelection(a))};
l.createRange=function(a){return window.rangy.createRange(a)};p=new m;return l.Selection=p});define("aloha/block-jump",["aloha/core","jquery","aloha/console"],function(l,b,p){function m(c,e){c.deleteData(0,c.length);""!==e&&(c.nextSibling&&3===c.nextSibling.nodeType?c.nextSibling.insertData(0,e):c.previousSibling&&3===c.previousSibling.nodeType?c.previousSibling.insertData(c.previousSibling.length,e):c.insertData(0,e));setTimeout(function(){0===c.length&&b(c).remove()},0)}function k(){if(f){var b=
f.nodeValue.replace(/\u200b/,"");b===f.nodeValue&&p.warn("Expected to remove the zero width text node fix, but couldn't find it");m(f,b);f=null}}var f=null;return{removeZeroWidthTextNodeFix:k,insertZeroWidthTextNodeFix:function(c,e){k();f=document.createTextNode("\u200b");e?b(c).after(f):b(c).before(f);l.bind("aloha-selection-changed",function(b){k();l.unbind(b)});return f}}});define("aloha/markup","aloha/core util/class util/html jquery aloha/ecma5shims aloha/console aloha/block-jump".split(" "),
function(l,b,p,m,k,f,c){function e(a){return"false"===m(a).attr("contenteditable")}function g(a){return a&&3===a.nodeType}function q(a){return a?g(a)?a.length:a.childNodes.length:0}function a(d){return d?d.nextSibling?g(d.nextSibling)&&!(0<d.nextSibling.data.replace(/\s+/g,"").length)||"BR"===d.nextSibling.nodeName&&d.nextSibling===d.parentNode.lastChild||""===d.nextSibling.innerHTML&&!e(d.nextSibling)?a(d.nextSibling):d.nextSibling:d.parentNode?a(d.parentNode):null:null}function d(a){return a?a.previousSibling?
!g(a.previousSibling)||0<a.previousSibling.data.replace(/\s+/g,"").length?""!==a.previousSibling.innerHTML||e(a.previousSibling)?a.previousSibling:d(a.previouSibling):d(a.previousSibling):a.parentNode?d(a.parentNode):null:null}function n(a,d){return 0===d||d<=a.data.length-a.data.replace(/^\s+/,"").length}function v(a,d){var b=q(a);if(b===d)return!0;var c=g(a);return c&&a.data.replace(/\s+$/,"").length===d?!0:1!==b||c?!1:"BR"===a.childNodes[0].nodeName}function y(a,d){return E?k.compareDocumentPosition(a,
d)&16:0<m(a).find(d).length}function A(a){var d;if(d=window.$_alohaPlaceholder){d=a.startContainer;a=a.endContainer;var b=window.$_alohaPlaceholder;d=!(b.is(d)||b.is(a)||y(b[0],d)||y(b[0],a))}d&&(0===window.$_alohaPlaceholder.html().replace(/^(&nbsp;)*$/,"").length&&window.$_alohaPlaceholder.remove(),window.$_alohaPlaceholder=null)}function z(a,d){var b;if(a.parentNode){for(b=0;b<d.length;b++)if(d[b]===a.parentNode.nodeName)return!0;return z(a.parentNode,d)}return!1}function B(a,d){if(!a.parentNode)return!0;
var b=3===a.nodeType&&a.parentNode.firstChild===a||a.parentNode.children[0]===a,c="TR"===a.nodeName&&-1!==a.parentNode.children[0].className.indexOf("aloha-table-selectcolumn"),c=("TD"===a.nodeName&&-1!==a.parentNode.children[0].className.indexOf("aloha-table-selectrow")||c)&&a.parentNode.children[1]===a;return b||c?a.parentNode.nodeName===d?!0:B(a.parentNode,d):!1}var C=window.GENTICS,E=!!(m.browser.msie&&9>parseInt(m.browser.version,10)),D=function(){return function(a,d){if(!a.parentNode)return!0;
var b;a:{b=a.parentNode;var c,e;for(e=b.childNodes.length-1;-1<e;e--)if(c=b.childNodes[e],"CAPTION"!==c.nodeName&&(3!==c.nodeType||!/^[\t\n\r ]+$/.test(c.data))){b=c;break a}b=b.lastChild}return b===a?a.parentNode.nodeName===d?!0:D(a.parentNode,d):!1}}();l.Markup=b.extend({keyHandlers:{},addKeyHandler:function(a,d){this.keyHandlers[a]||(this.keyHandlers[a]=[]);this.keyHandlers[a].push(d)},removeKeyHandler:function(a){this.keyHandlers[a]&&(this.keyHandlers[a]=null)},insertBreak:function(){var a=l.Selection.rangeObject,
d,b,c;a.isCollapsed()||this.removeSelectedMarkup();c=m("<br/>");C.Utils.Dom.insertIntoDOM(c,a,l.activeEditable.obj);if(b=C.Utils.Dom.searchAdjacentTextNode(c.parent().get(0),C.Utils.Dom.getIndexInParent(c.get(0))+1,!1))d=b.data.search(/\S/),0<d&&(b.data=b.data.substring(d));a.startContainer=a.endContainer=c.get(0).parentNode;a.startOffset=a.endOffset=C.Utils.Dom.getIndexInParent(c.get(0))+1;a.correctRange();a.clearCaches();a.select()},preProcessKeyStrokes:function(a){if("keydown"!==a.type)return!1;
var d,b;if(this.keyHandlers[a.keyCode])for(d=this.keyHandlers[a.keyCode],b=0;b<d.length;++b)if(!d[b](a))return!1;return 37===a.keyCode||39===a.keyCode?l.getSelection().getRangeCount()&&(d=l.getSelection().getRangeAt(0),this.processCursor(d,a.keyCode))?(A(l.Selection.rangeObject),!0):!1:38===a.keyCode||40===a.keyCode?l.getSelection().getRangeCount()&&(d=l.getSelection().getRangeAt(0),this.processCursorUpDown(d,a.keyCode))?!1:!0:8===a.keyCode?(a.preventDefault(),l.execCommand("delete",!1),!1):46===
a.keyCode?(l.execCommand("forwarddelete",!1),!1):13===a.keyCode?(!a.shiftKey&&p.allowNestedParagraph(l.activeEditable)?l.execCommand("insertparagraph",!1):l.execCommand("insertlinebreak",!1),!1):!0},processCursorUpDown:function(a,d){if(!a.collapsed)return!1;var b=a.startContainer;if(38===d&&n(b,a.startOffset)&&z(b,["TD","TH"])&&B(b,"TABLE")){b=m(b).parents("div.aloha-table-wrapper").get(0);if(!b)return!1;for(b=b.previousElementSibling?b.previousElementSibling:b.previousSibling;3!==b.nodeType;)if(b=
b.lastChild,null===b)return!1;l.Selection.rangeObject.startContainer=b;l.Selection.rangeObject.endContainer=b;l.Selection.rangeObject.startOffset=b.length;l.Selection.rangeObject.endOffset=b.length;l.Selection.rangeObject.select();l.activeEditable&&m.browser.mozilla&&l.activeEditable.obj.focus();return!0}if(40===d&&v(b,a.startOffset)&&z(b,["TD","TH"])&&D(b,"TABLE")){b=m(b).parents("div.aloha-table-wrapper").get(0);if(!b)return!1;for(b=b.nextElementSibling?b.nextElementSibling:b.nextSibling;3!==b.nodeType;)if(b=
b.firstChild,null===b)return!1;l.Selection.rangeObject.startContainer=b;l.Selection.rangeObject.endContainer=b;l.Selection.rangeObject.startOffset=0;l.Selection.rangeObject.endOffset=0;l.Selection.rangeObject.select();l.activeEditable&&m.browser.mozilla&&l.activeEditable.obj.focus();return!0}return!1},processCursor:function(b,f){if(!b.collapsed)return!0;c.removeZeroWidthTextNodeFix();var k=b.startContainer,y=l.getSelection();if(!k)return!0;var p,z;if(m.browser.msie&&7>=parseInt(m.browser.version,
10)&&g(k))if(37==f){for(z=b.startOffset;0<z&&"\u200b"===k.data.charAt(z-1);)z--;z!=b.startOffset&&(b.setStart(b.startContainer,z),b.setEnd(b.startContainer,z),y=l.getSelection(),y.removeAllRanges(),y.addRange(b))}else if(39==f){for(z=b.startOffset;z<k.data.length&&"\u200b"===k.data.charAt(z);)z++;z!=b.startOffset&&(b.setStart(b.startContainer,z),b.setEnd(b.startContainer,z),y.removeAllRanges(),y.addRange(b))}if(E&&!m(k).contentEditable()&&(y=m(k).parents("[contenteditable=false]"),0<y.length))if(y.parent().hasClass("aloha-editable"))p=
y[0];else return!0;var B;if(!p){B=37===f||38===f;z=b.startOffset;if(g(k))if(B){if(1!==z&&!n(k,z))return!0}else{if(!v(k,z))return!0}else k=k.childNodes[z===q(k)?z-1:z];p=B?d(k):a(k)}return e(p)?(k=p,p=new C.Utils.RangeObject,y=B?d(k):a(k),!y||e(y)?(y=m("<div>&nbsp;</div>"),B?m(k).before(y):m(k).after(y),p.startContainer=p.endContainer=y[0],p.startOffset=p.endOffset=0,A(p),window.$_alohaPlaceholder=y):(3===b.startContainer.nodeType&&b.startContainer===b.endContainer&&""!==b.startContainer.nodeValue&&
(B?1===b.startOffset:b.endOffset+1===b.endContainer.length)||1===b.startContainer.nodeType&&(!b.startOffset||b.startContainer.childNodes[b.startOffset]&&1===b.startContainer.childNodes[b.startOffset].nodeType)?(y=c.insertZeroWidthTextNodeFix(k,B),p.startContainer=p.endContainer=y,p.startOffset=p.endOffset=B?1:0):(p.startContainer=p.endContainer=y,p.startOffset=p.endOffset=B?q(y):0,B||c.insertZeroWidthTextNodeFix(k,!0)),A(p)),p.select(),l.trigger("aloha-block-selected",k),l.Selection.preventSelectionChanged(),
!1):!0},processShiftEnter:function(a){this.insertHTMLBreak(a.getSelectionTree(),a)},processEnter:function(a){a.splitObject?this.splitRangeObject(a):this.insertHTMLBreak(a.getSelectionTree(),a)},insertHTMLCode:function(a){var d=l.Selection.rangeObject;this.insertHTMLBreak(d.getSelectionTree(),d,m(a))},insertHTMLBreak:function(a,d,b){var c,e,g,f,n;b=b||m("<br/>");c=0;for(e=a.length;c<e;++c)if(g=a[c],f=g.domobj?m(g.domobj):void 0,"none"!==g.selection)if("collapsed"==g.selection)0<c?(g=m(a[c-1].domobj),
g.after(b)):(g=m(a[1].domobj),g.before(b)),d.startContainer=d.endContainer=b[0].parentNode,d.startOffset=d.endOffset=C.Utils.Dom.getIndexInParent(b[0])+1,d.correctRange();else if(g.domobj&&3===g.domobj.nodeType){g.domobj.nextSibling&&1==g.domobj.nextSibling.nodeType&&l.Selection.replacingElements[g.domobj.nextSibling.nodeName.toLowerCase()]&&f.after("<br/>");if(this.needEndingBreak()){for(n=g.domobj;n;)if(n.nextSibling)n=!1;else{n=n.parentNode;if(C.Utils.Dom.isBlockLevelElement(n)||C.Utils.Dom.isListElement(n))break;
n===d.limitObject&&(n=!1)}n&&m(n).append('<br class="aloha-cleanme" />')}f.between(b,g.startOffset);f=0;for(g=b[0];g;)g=g.previousSibling,++f;d.startContainer=b[0].parentNode;d.endContainer=b[0].parentNode;d.startOffset=f;d.endOffset=f;d.correctRange()}else g.domobj&&1===g.domobj.nodeType&&(0===f.parent().find("br.aloha-ephemera").length&&(m(d.limitObject).find("br.aloha-ephemera").remove(),m(d.commonAncestorContainer).append(this.getFillUpElement(d.splitObject))),f.after(b),d.startContainer=d.commonAncestorContainer,
d.endContainer=d.startContainer,d.startOffset=c+2,d.endOffset=c+2,d.update());d.select()},needEndingBreak:function(){return!m.browser.msie},getSelectedText:function(){var a=l.Selection.rangeObject;return a.isCollapsed()?!1:this.getFromSelectionTree(a.getSelectionTree(),!0)},getFromSelectionTree:function(a,d){var b="",c,e,g,f;c=0;for(e=a.length;c<e;c++)g=a[c],"partial"==g.selection?3===g.domobj.nodeType?b+=g.domobj.data.substring(g.startOffset,g.endOffset):1===g.domobj.nodeType&&g.children&&(d?b+=
this.getFromSelectionTree(g.children,d):(f=m(g.domobj.outerHTML).empty(),f.html(this.getFromSelectionTree(g.children,d)),b+=f.outerHTML())):"full"==g.selection&&(3===g.domobj.nodeType?b+=m(g.domobj).text():1===g.domobj.nodeType&&g.children&&(b+=d?m(g.domobj).text():m(g.domobj).outerHTML()));return b},getSelectedMarkup:function(){var a=l.Selection.rangeObject;return a.isCollapsed()?null:this.getFromSelectionTree(a.getSelectionTree(),!1)},removeSelectedMarkup:function(){var a=l.Selection.rangeObject,
d;a.isCollapsed()||(d=new l.Selection.SelectionRange,this.removeFromSelectionTree(a.getSelectionTree(),d),d.update(),C.Utils.Dom.doCleanup({merge:!0,removeempty:!0},l.Selection.rangeObject),l.Selection.rangeObject=d,d.correctRange(),d.update(),d.select(),l.Selection.updateSelection())},removeFromSelectionTree:function(a,d){var b,c,e,g,f;e=0;for(f=a.length;e<f;e++)g=a[e],"partial"==g.selection?3===g.domobj.nodeType?(c="",0<g.startOffset&&(c+=g.domobj.data.substring(0,g.startOffset)),g.endOffset<g.domobj.data.length&&
(c+=g.domobj.data.substring(g.endOffset,g.domobj.data.length)),g.domobj.data=c,d.startContainer||(d.startContainer=d.endContainer=g.domobj,d.startOffset=d.endOffset=g.startOffset)):1===g.domobj.nodeType&&g.children&&(this.removeFromSelectionTree(g.children,d),b?b.nodeName==g.domobj.nodeName&&(m(b).append(m(g.domobj).contents()),m(g.domobj).remove()):b=g.domobj):"full"==g.selection&&(d.startContainer||((c=C.Utils.Dom.searchAdjacentTextNode(g.domobj.parentNode,C.Utils.Dom.getIndexInParent(g.domobj)+
1,!1,{blocklevel:!1}))?(d.startContainer=d.endContainer=c,d.startOffset=d.endOffset=0):(d.startContainer=d.endContainer=g.domobj.parentNode,d.startOffset=d.endOffset=C.Utils.Dom.getIndexInParent(g.domobj)+1)),m(g.domobj).remove())},splitRangeObject:function(a,d){m(a.splitObject);var b,c;a.update(a.splitObject);b=a.getSelectionTree();c=this.getSplitFollowUpContainer(a);this.splitRangeObjectHelper(b,a,c);c.hasClass("preparedForRemoval")&&c.removeClass("preparedForRemoval");b=this.getInsertAfterObject(a,
c);m(c).insertAfter(b);"li"!==a.splitObject.nodeName.toLowerCase()||l.Selection.standardTextLevelSemanticsComparator(a.splitObject,c)||m(a.splitObject).remove();a.startContainer=null;b=c.contents();0<b.length&&1==b.get(0).nodeType&&"br"===b.get(0).nodeName.toLowerCase()&&(a.startContainer=c.get(0));a.startContainer||(a.startContainer=c.textNodes(!0,!0).first().get(0));a.startContainer||(a.startContainer=c.textNodes(!1).first().parent().get(0));a.startContainer?(a.endContainer=a.startContainer,a.startOffset=
0,a.endOffset=0):(a.startContainer=a.endContainer=c.parent().get(0),a.startOffset=a.endOffset=C.Utils.Dom.getIndexInParent(c.get(0)));a.update();a.select()},getInsertAfterObject:function(a,d){var b,c,e;for(c=0;c<a.markupEffectiveAtStart.length;c++)if(e=a.markupEffectiveAtStart[c],e===a.splitObject&&(b=!0),b&&l.Selection.canTag1WrapTag2(m(e).parent()[0].nodeName,d[0].nodeName))return e;return!1},getFillUpElement:function(a){return m.browser.msie?!1:m('<br class="aloha-cleanme"/>')},removeElementContentWhitespaceObj:function(a){var d=
0,b=[],c,e;for(c=0;c<a.length;++c)e=a[c],e.isElementContentWhitespace&&(b[b.length]=c);for(c=0;c<b.length;++c)e=b[c],a.splice(e-d,1),++d},splitRangeObjectHelper:function(a,d,b,c){b||l.Log.warn(this,"no followUpContainer, no inBetweenMarkup, nothing to do...");var e=this.getFillUpElement(d.splitObject),g=m(d.splitObject),f=!1,n,k,q,v,y;if(0<a.length)for(q=b.contents(),q.length!==a.length&&this.removeElementContentWhitespaceObj(q),k=0,y=a.length;k<y;++k)n=a[k],"none"===n.selection&&!1===f||n.domobj&&
3===n.domobj.nodeType&&n===a[a.length-1]&&n.startOffset===n.domobj.data.length?1<b.textNodes().length||1===n.domobj.nodeType&&0===n.children.length?q.eq(k).remove():C.Utils.Dom.isSplitObject(b[0])?e?b.html(e):b.empty():(b.empty(),b.addClass("preparedForRemoval")):"none"!==n.selection?(n.domobj&&3===n.domobj.nodeType&&void 0!==n.startOffset&&(f=n.domobj.data,0<n.startOffset?n.domobj.data=f.substr(0,n.startOffset):1<a.length?m(n.domobj).remove():(v=m(n.domobj).parent(),C.Utils.Dom.isSplitObject(v[0])?
e?v.html(e):v.empty():v.remove()),0<f.length-n.startOffset?q[k].data=f.substr(n.startOffset,f.length):1<q.length?q.eq(k).remove():C.Utils.Dom.isBlockLevelElement(b[0])?e?b.html(e):b.empty():(b.empty(),b.addClass("preparedForRemoval"))),f=!0,0<n.children.length&&this.splitRangeObjectHelper(n.children,d,q.eq(k),c)):"none"===n.selection&&!0===f&&m(n.domobj).remove();else l.Log.error(this,"can not split splitObject due to an empty selection tree");g.find("br.aloha-ephemera:gt(0)").remove();b.find("br.aloha-ephemera:gt(0)").remove();
g.find(".preparedForRemoval").remove();b.find(".preparedForRemoval").remove();0===g.contents().length&&C.Utils.Dom.isSplitObject(g[0])&&e&&g.html(e);0===b.contents().length&&C.Utils.Dom.isSplitObject(b[0])&&e&&b.html(e)},getSplitFollowUpContainer:function(a){var d;switch(a.splitObject.nodeName.toLowerCase()){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":if((d=m(a.splitObject).textNodes(":not(.aloha-cleanme)").last()[0])&&a.startContainer===d&&a.startOffset===d.length)return d=m("<p></p>"),
a=m(a.splitObject.outerHTML).contents(),d.append(a),d;break;case "li":if("br"===a.startContainer.nodeName.toLowerCase()&&m(a.startContainer).hasClass("aloha-ephemera"))return d=m("<p></p>"),a=m(a.splitObject.outerHTML).contents(),d.append(a),d;if(!a.splitObject.nextSibling&&0===m.trim(m(a.splitObject).text()).length)return d=m("<p></p>")}return m(a.splitObject.outerHTML)},transformDomObject:function(a,d,b){var c=m(a);d=m("<"+d+">");var e,g=c[0].cloneNode(!1).attributes;if(g)for(e=0;e<g.length;++e)("undefined"===
typeof g[e].specified||g[e].specified)&&d.attr(g[e].nodeName,g[e].nodeValue);c[0].style&&c[0].style.cssText&&(d[0].style.cssText=c[0].style.cssText);c.contents().appendTo(d);c.replaceWith(d);b&&(b.startContainer==a&&(b.startContainer=d.get(0)),b.endContainer==a&&(b.endContainer=d.get(0)));return d},toString:function(){return"Aloha.Markup"}});l.Markup=new l.Markup;return l.Markup});define("aloha/observable",["jquery"],function(l){return{_eventHandlers:null,bind:function(b,l,m){this._eventHandlers=
this._eventHandlers||{};this._eventHandlers[b]||(this._eventHandlers[b]=[]);this._eventHandlers[b].push({handler:l,scope:m||window})},unbind:function(b,p){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[b]&&(this._eventHandlers[b]=p?l.grep(this._eventHandlers[b],function(b){return b.handler===p?!1:!0}):[])},trigger:function(b){this._eventHandlers=this._eventHandlers||{};if(this._eventHandlers[b]){var p=[];l.each(arguments,function(b,k){0<b&&p.push(k)});l.each(this._eventHandlers[b],
function(b,k){k.handler.apply(k.scope,p)})}},unbindAll:function(){this._eventHandlers=null}}});define("aloha/registry",["jquery","aloha/observable","util/class"],function(l,b,p){return p.extend(b,{_entries:null,_ids:null,_constructor:function(){this._entries={};this._ids=[]},register:function(b,k){this._entries[b]=k;this._ids.push(b);this.trigger("register",k,b)},unregister:function(b){var k,f=this._entries[b];delete this._entries[b];for(k in this._ids)if(this._ids.hasOwnProperty(k)&&this._ids[k]===
b){this._ids.splice(k,1);break}this.trigger("unregister",f,b)},get:function(b){return this._entries[b]},has:function(b){return this._entries[b]?!0:!1},getEntries:function(){return l.extend({},this._entries)},getIds:function(){return l.extend([],this._ids)}})});define("aloha/contenthandlermanager",["aloha/core","aloha/registry","util/class"],function(l,b,p){return new (b.extend({createHandler:function(b){if("function"!==typeof b.handleContent)throw"ContentHandler has no function handleContent().";
return new (p.extend({handleContent:function(b){}},b))},handleContent:function(b,k,f){var c=k?k.contenthandler:this.getIds();if(!c)return b;var e,g;for(e=0;e<c.length&&((g=this.get(c[e]))&&(b=g.handleContent(b,k,f||l.activeEditable)),null!==b);e++);return b}}))});define("util/trees",["jquery"],function(l){function b(a,b,c){var e=l.type(a),g,f,k;if("array"===e){e=c?a:[];k=g=0;for(f=a.length;k<f;k++)c=b(a[k]),c.length&&(e[g++]=c[0]);g!==e.length&&(e=e.slice(0,g))}else if("object"===e)for(g in e=c?a:
{},a)a.hasOwnProperty(g)&&(c=b(a[g]),c.length?e[g]=c[0]:delete e[g]);else e=a;return e}function p(a,c){return b(a,c,!0)}function m(a,b){var c,e,g;if(1===a.nodeType)for(e=a.firstChild;e;)c=b(e),g=e.nextSibling,c.length?c[0]!==e&&a.replaceChild(c[0],e):a.removeChild(e),e=g;return a}function k(a,b,c,e){return[c(b(e),a)]}function f(a,b,c,e){return[b(c(e,a))]}function c(a,b,c,e){return b(e)?[]:[c(e,a)]}function e(a,b,c,e){a=c(e,a);return b(a)?[]:[a]}function g(a,b,c,e){function g(e){return a(g,b,c,e)}
return g(e)[0]}function q(a){a=l.type(a);return"object"!==a&&"array"!==a}function a(a,c,e){function g(a){return q(a)?[c(a)]:[f(a,g)]}var f=e?p:b;return g(a)[0]}return{prewalk:function(a,c,e){return g(k,c,e?p:b,a)},postwalk:function(a,c,e){return g(f,c,e?p:b,a)},preprune:function(a,e,f){return g(c,e,f?p:b,a)},postprune:function(a,c,f){return g(e,c,f?p:b,a)},prewalkDom:function(a,b,c){return g(k,b,m,c?a:a.cloneNode(!0))},postwalkDom:function(a,b,c){return g(f,b,m,c?a:a.cloneNode(!0))},prepruneDom:function(a,
b,e){return g(c,b,m,e?a:a.cloneNode(!0))},postpruneDom:function(a,b,c){return g(e,b,m,c?a:a.cloneNode(!0))},isLeaf:q,leaves:a,clone:function(a){function c(a){return[b(a,c)]}return c(a)[0]},flatten:function(d){var b=[];a(d,function(a){b.push(a);return a},!0);return b},walk:b,walkInplace:p,walkDomInplace:m}});define("util/browser",["jquery"],function(l){return{ie7:l.browser.msie&&8>parseInt(l.browser.version,10),ie8:l.browser.msie&&9>parseInt(l.browser.version,10),ie:l.browser.msie,mozilla:l.browser.mozilla}});
define("util/dom2","aloha/core jquery util/functions util/maps util/arrays util/strings util/browser util/dom util/range".split(" "),function(l,b,p,m,k,f,c,e,g){function q(a,d,b){for(;d;){var c=d.nextSibling;a.insertBefore(d,b);d=c}}function a(a){var d=a.outerHTML;if("undefined"!==typeof d)return d;try{return X?X.serializeToString(a):a.xml}catch(b){return a.xml}}function d(d){var b=[];d=a(d.cloneNode(!1));for(var c;null!=(c=aa.exec(d));)b.push(c[1]);return b}function n(a,d){var b={},c,e,g,n,k,q,m;
q=0;for(k=a.length;q<k;q++)if(g=a[q],g.className)for(e=f.words(g.className),m=0;m<e.length;m++)n=e[m],d[n]&&((c=b[n])?c.push(g):b[n]=[g]);return b}function v(a){for(var d=0;a.previousSibling;)d++,a=a.previousSibling;return d}function y(a){var d=0;for(a=a.firstChild;a;)d+=1,a=a.nextSibling;return d}function A(a,d){return 1===a.nodeType&&d>=y(a)||3===a.nodeType&&d===a.length&&!a.nextSibling}function z(a,d){1===a.nodeType&&d<y(a)?a=a.childNodes[d]:3===a.nodeType&&d===a.length&&(a=a.nextSibling||a.parentNode);
return a}function B(a,d,b){b?d.appendChild(a):d.parentNode.insertBefore(a,d)}function C(a,d){this.node=a;this.atEnd=d}function E(a,d){return new C(a,d)}function D(a,d){return E(z(a,d),A(a,d))}function r(a,d){for(var b=[],c=a.parentNode;c&&!d(c);)b.push(c),c=c.parentNode;return b}function t(a,d){var b=r(a,d),c=b.length?b[b.length-1]:a;c.parentNode&&b.push(c.parentNode);return b}function s(a,d){if(d(a))return[];var b=r(a,d);b.unshift(a);return b}function u(a,d){if(d(a))return[a];var b=t(a,d);b.unshift(a);
return b}function Z(a,d){var b=a.parentNode,c=a.nodeValue;if(0===d||d>=c.length)return a;var e=document.createTextNode(c.substring(0,d)),c=document.createTextNode(c.substring(d,c.length));b.insertBefore(e,a);b.insertBefore(c,a);b.removeChild(a);return e}function N(a,d,b,c,e,g){d===e&&(e=g.length,0===b?(d=g.parentNode,b=v(g)):b<e?d=g:b===e?(d=g.parentNode,b=v(g)+1):(d=g.nextSibling,b-=e),a[c].call(a,d,b))}function x(a,d,b){if(3===a.nodeType){var c=b.startContainer,e=b.startOffset,g=b.endContainer,
f=b.endOffset;d=Z(a,d);N(b,c,e,"setStart",a,d);N(b,g,f,"setEnd",a,d)}}function K(a,d,b,c){for(;a&&!b(a,c);){var e=a.nextSibling;d(a,c);a=e}}function G(a,d,b){K(a,d,p.returnFalse,b)}function Q(a,d,b){1===a.nodeType&&G(a.firstChild,function(a){Q(a,d,b)});d(a,b)}function S(a){a&&(this.startContainer=a.startContainer,this.startOffset=a.startOffset,this.endContainer=a.endContainer,this.endOffset=a.endOffset,this.commonAncestorContainer=a.commonAncestorContainer,this.collapsed=a.collapsed)}function ha(a,
d){d.atEnd?a.setStart(d.node,y(d.node)):a.setStart(d.node.parentNode,v(d.node))}function ba(a,d){d.atEnd?a.setEnd(d.node,y(d.node)):a.setEnd(d.node.parentNode,v(d.node))}function V(a,d){a.setStart(d.startContainer,d.startOffset);a.setEnd(d.endContainer,d.endOffset)}function M(a,d,b){if(!a.collapsed){for(var c=D(a.startContainer,a.startOffset),e=D(a.endContainer,a.endOffset),g=!1;!c.equals(e)&&d(c)&&c.next();)g=!0;b=b||d;d=!1;for(3===a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.length&&
e.next()&&b(e)&&e.prev();!e.equals(c)&&b(e)&&e.prev();)d=!0;g&&ha(a,c);d&&ba(a,e)}}function U(a){if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a&&a.nextSibling}function J(a){for(var d=a.previousSibling;d&&d.lastChild;)d=d.lastChild;return d||a.parentNode}var aa=/\s([^\/<>\s=]+)(?:=(?:"[^"]*"|'[^']*'|[^>\/\s]+))?/g,X=window.XMLSerializer&&new window.XMLSerializer;C.prototype.next=function(){var a=this.node,d;if(this.atEnd||1!==a.nodeType){if(d=a.nextSibling)this.atEnd=
!1;else{d=a.parentNode;if(!d)return!1;this.atEnd=!0}this.node=d}else(d=a.firstChild)?this.node=d:this.atEnd=!0;return!0};C.prototype.prev=function(){var a=this.node,d;if(this.atEnd)(d=a.lastChild)?this.node=d:this.atEnd=!1;else{if(d=a.previousSibling)1===a.nodeType&&(this.atEnd=!0);else if(d=a.parentNode,!d)return!1;this.node=d}return!0};C.prototype.equals=function(a){return a.node===this.node&&a.atEnd===this.atEnd};C.prototype.clone=function(a){return a(a.node,a.atEnd)};C.prototype.insert=function(a){return B(a,
this.node,this.atEnd)};S.prototype.update=function(){if(this.startContainer&&this.endContainer){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset;var a=s(this.startContainer,p.returnFalse),d=s(this.endContainer,p.returnFalse);this.commonAncestorContainer=k.intersect(a,d)[0]}};S.prototype.setStart=function(a,d){this.startContainer=a;this.startOffset=d;this.update()};S.prototype.setEnd=function(a,d){this.endContainer=a;this.endOffset=d;this.update()};return{backward:J,
forward:U,findForward:function(a,d,b){for(;a&&!b(a);){if(d(a))return a;a=U(a)}return null},findBackward:function(a,d,b){for(;a&&!b(a);){if(d(a))return a;a=J(a)}return null},moveNextAll:q,attrNames:d,attrs:function(a){var c=[],e=d(a),g,f;g=0;for(f=e.length;g<f;g++){var n=e[g],k=b.attr(a,n),k=null==k?"":k.toString();c.push([n,k])}return c},indexByClass:function(a,d){var e;e=c.ie7?a.getElementsByTagName("*"):b(a).find("."+m.keys(d).join(",."));return n(e,d)},indexByName:function(a,d){var c,e={},g;c=
0;for(g=d.length;c<g;c++){var f=d[c];e[f]=b.makeArray(a.getElementsByTagName(f))}return e},indexByClassHaveList:n,outerHtml:a,removeShallow:function(a){var d=a.parentNode;q(d,a.firstChild,a);d.removeChild(a)},wrap:function(a,d){a.parentNode.replaceChild(d,a);d.appendChild(a)},insert:B,cursor:E,cursorFromBoundaryPoint:D,nodeAtOffset:z,isAtEnd:A,parentsUntil:r,parentsUntilIncl:t,childAndParentsUntil:s,childAndParentsUntilIncl:u,childAndParentsUntilNode:function(a,d){return s(a,function(a){return a===
d})},childAndParentsUntilInclNode:function(a,d){return u(a,function(a){return a===d})},next:function(a,d,b){for(;a&&!d(a,b);)a=a.nextSibling;return a},parent:function(a,d,b){for(;a&&!d(a,b);)a=a.parentNode;return a},isTextNode:function(a){return 3===a.nodeType},nodeIndex:v,splitTextNode:Z,splitTextContainers:function(a){x(a.startContainer,a.startOffset,a);x(a.endContainer,a.endOffset,a)},walk:G,walkRec:Q,walkUntil:K,walkUntilNode:function(a,d,b,c){K(a,d,function(a){return a===b},c)},stableRange:function(a){return new S(a)},
trimRange:M,trimRangeClosingOpening:function(a,d,b){b=b||d;M(a,function(a){return a.atEnd||d(a.node)},function(a){a=a.atEnd?a.node.lastChild:a.node.previousSibling;return!a||b(a)})},setRangeFromRef:V,setRangeStartFromCursor:ha,setRangeEndFromCursor:ba,splitTextNodeAdjustRange:x,insertSelectText:function(a,d){if(a.length){x(d.startContainer,d.startOffset,d);var b=z(d.startContainer,d.startOffset),c=A(d.startContainer,d.startOffset);if(c||3!==b.nodeType){var e;(e=c?b.lastChild:b.previousSibling)&&3===
e.nodeType?(e.insertData(e.length,a),d.setStart(e,e.length-a.length)):(e=document.createTextNode(a),B(e,b,c),d.setStart(e,0));d.setEnd(e,e.length)}else b.insertData(0,a),d.setStart(b,0),d.setEnd(b,a.length)}},areRangesEq:function(a,d){return a.startContainer===d.startContainer&&a.startOffset===d.startOffset&&a.endContainer===d.endContainer&&a.endOffset===d.endOffset},collapseToEnd:function(a){a.setStart(a.endContainer,a.endOffset)},extendToWord:function(a){var d=new g(a);e.extendToWord(d);V(a,d)},
rangeFromRangeObject:function(a){var d=l.createRange();d.setStart(a.startContainer,a.startOffset);d.setEnd(a.endContainer,a.endOffset);return d},cloneShallow:function(a){return a.cloneNode(!1)},setStyle:function(a,d,c){b(a).css(d,null==c?"":c)},getStyle:function(a,d){d=f.dashesToCamelCase(d);return 1===a.nodeType?a.style[d]:null},getComputedStyle:function(a,d){if(a.currentStyle)return a.currentStyle[d];var b=a.ownerDocument;return b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,
null))?b[d]||b.getPropertyValue(d):null},nodeLength:function(a){return 1===a.nodeType?y(a):3===a.nodeType?a.length:0}}});define("util/misc",[],function(){return{anyRx:function(l,b){var p,m;p=0;for(m=l.length;p<m;p++)if(l[p].test(b))return!0;return!1}}});define("aloha/ephemera","jquery aloha/core aloha/console util/strings util/trees util/arrays util/maps util/dom2 util/functions util/misc util/browser PubSub".split(" "),function(l,b,p,m,k,f,c,e,g,q,a,d){function n(d){d=l(d);var b=d.attr("data-aloha-ephemera-attr"),
c;a.ie7||d.removeAttr("data-aloha-ephemera-attr");if("string"===typeof b)for(c=m.words(b),b=0;b<c.length;b++)d.removeAttr(c[b])}function v(a,d,b,c){b=b[d];return!b||!0!==b&&-1===f.indexOf(b,a.nodeName)?q.anyRx(c,d):!0}function y(a,d){var b=null,c=e.attrNames(a),g,f,n;f=0;for(n=c.length;f<n;f++)g=c[f],v(a,g,d.attrMap,d.attrRxs)&&(b=b||l(a),b.removeAttr(g))}function A(a,d){var b=a.className;if(b&&-1!==b.indexOf(B)){b=m.words(b);if(-1!==f.indexOf(b,"aloha-cleanme")||-1!==f.indexOf(b,"aloha-ephemera"))return l.removeData(a),
!1;if(-1!==f.indexOf(b,"aloha-ephemera-wrapper")||-1!==f.indexOf(b,"aloha-ephemera-filler"))return e.moveNextAll(a.parentNode,a.firstChild,a.nextSibling),l.removeData(a),!1;-1!==f.indexOf(b,"aloha-ephemera-attr")&&n(a);var c=f.filter(b,function(a){return!d.classMap[a]});c.length!==b.length&&(0===c.length?l(a).removeAttr("class"):a.className=c.join(" "))}y(a,d);return!0}var z={classMap:{"aloha-ephemera-wrapper":!0,"aloha-ephemera-filler":!0,"aloha-ephemera-attr":!0,"aloha-ephemera":!0,"aloha-cleanme":!0},
attrMap:{hidefocus:!0,hideFocus:!0,tabindex:!0,tabIndex:!0,contenteditable:["TABLE"],contentEditable:["TABLE"]},attrRxs:[/^(?:nodeIndex|sizcache|sizset|jquery)[\w\d]*$/i],pruneFns:[]},B="aloha-";return{ephemera:function(a){a&&(z=a);d.pub("aloha.ephemera",{ephemera:z});return z},classes:function(){var a=Array.prototype.slice.call(arguments);c.fillKeys(z.classMap,a,!0);var b=a,e,g;e=0;for(g=b.length;e<g;e++)-1===b[e].indexOf(B)&&(p.warn('Class "'+b[e]+'" was set to be ephemeral,which hurts peformance. Add the common substring "'+
B+'" to the class to fix this problem.'),B="");d.pub("aloha.ephemera.classes",{ephemera:z,newClasses:a})},attributes:function(){var a=Array.prototype.slice.call(arguments);c.fillKeys(z.attrMap,a,!0);d.pub("aloha.ephemera.attributes",{ephemera:z,newAttributes:a})},markElement:function(a){l(a).addClass("aloha-ephemera")},markAttr:function(a,d){a=l(a);var b=a.attr("data-aloha-ephemera-attr");null==b||""===b?b=d:-1===f.indexOf(m.words(b),d)&&(b+=" "+d);a.attr("data-aloha-ephemera-attr",b);a.addClass("aloha-ephemera-attr")},
markWrapper:function(a){l(a).addClass("aloha-ephemera-wrapper")},markFiller:function(a){l(a).addClass("aloha-ephemera-filler")},prune:function(a,d){function b(a){var c;a:{c=d;var e=b;if(1===a.nodeType){if(!A(a,c)){c=[];break a}a=k.walkDomInplace(a,e)}c=(a=f.reduce(c.pruneFns,a,f.applyNotNull))?[a]:[]}return c}d=d||z;return b(a)[0]},isAttrEphemeral:v}});define("aloha/copypaste",["jquery","aloha/core"],function(l,b){function p(m){var k=b.createRange(),f=b.getSelection();k.setStart(m.startContainer,
m.startOffset);k.setEnd(m.endContainer,m.endOffset);f.removeAllRanges();f.addRange(k)}return{getEditableAt:function(m){if(!m||!m.commonAncestorContainer)return null;m=l(m.commonAncestorContainer);return m.length?b.getEditableHost(m):null},getRange:function(){var m=b.getSelection();return m.getRangeCount()?m.getRangeAt(0):null},selectAllOf:function(b){p({startContainer:b,endContainer:b,startOffset:0,endOffset:b.childNodes?b.childNodes.length:b.length});l(b).focus()},setSelectionAt:p}});define("aloha/command",
["aloha/core","aloha/registry","aloha/engine","util/dom","aloha/contenthandlermanager"],function(l,b,p,m,k){var f={execCommand:function(b,e,g,f){var a={commandId:b,preventDefault:!1};l.trigger("aloha-command-will-execute",a);if(!0!==a.preventDefault){a=l.getSelection();if(!f){if(!a.getRangeCount())return;f=a.getRangeAt(0)}"inserthtml"===b.toLowerCase()&&(g=k.handleContent(g,{contenthandler:l.settings.contentHandler.insertHtml,command:"insertHtml"}));p.execCommand(b,e,g,f);"insertparagraph"!==b.toLowerCase()&&
a.getRangeCount()&&(f=a.getRangeAt(0),e=f.commonAncestorContainer,e.parentNode&&(e=e.parentNode),g=new window.GENTICS.Utils.RangeObject,g.startContainer=f.startContainer,g.startOffset=f.startOffset,g.endContainer=f.endContainer,g.endOffset=f.endOffset,m.doCleanup({merge:!0,removeempty:!1},g,e),g.select());l.trigger("aloha-command-executed",b)}},queryCommandEnabled:function(b,e){if(!e){if(!l.getSelection().getRangeCount())return;e=l.getSelection().getRangeAt(0)}return p.queryCommandEnabled(b,e)},queryCommandIndeterm:function(b,
e){if(!e){if(!l.getSelection().getRangeCount())return;e=l.getSelection().getRangeAt(0)}return p.queryCommandIndeterm(b,e)},queryCommandState:function(b,e){if(!e){if(!l.getSelection().getRangeCount())return;e=l.getSelection().getRangeAt(0)}return p.queryCommandState(b,e)},queryCommandSupported:function(b){return p.queryCommandSupported(b)},queryCommandValue:function(b,e){if(!e){if(!l.getSelection().getRangeCount())return;e=l.getSelection().getRangeAt(0)}return p.queryCommandValue(b,e)},querySupportedCommands:function(){var b=
[],e;for(e in p.commands)p.commands.hasOwnProperty(e)&&b.push(e);return b},getStateOverride:p.getStateOverride,setStateOverride:p.setStateOverride,resetOverrides:p.resetOverrides,unsetStateOverride:p.unsetStateOverride},f=new (b.extend(f));l.execCommand=f.execCommand;l.queryCommandEnabled=f.queryCommandEnabled;l.queryCommandIndeterm=f.queryCommandIndeterm;l.queryCommandState=f.queryCommandState;l.queryCommandSupported=f.queryCommandSupported;l.queryCommandValue=f.queryCommandValue;l.querySupportedCommands=
f.querySupportedCommands;return f});define("aloha/state-override","aloha/core jquery aloha/command util/dom2 util/maps util/range PubSub".split(" "),function(l,b,p,m,k,f,c){function e(){a=d=null}function g(b,c,e){q&&(d=c,a=a||{},a[b]=e)}var q=!1!==l.settings.stateOverride,a=null,d=null;l.bind("aloha-selection-changed",function(a,b){d&&!m.areRangesEq(d,b)&&(e(),c.pub("aloha.selection.context-change",{range:b,event:a}))});return{enabled:function(a){null!=a&&(q=a);return q},keyPressHandler:function(d){if(a&&
!d.altKey&&!d.ctrlKey&&d.which){var b=l.getSelection();if(b.getRangeCount()){var c=String.fromCharCode(d.which),e=b.getRangeAt(0);m.insertSelectText(c,e);k.forEach(a,function(a,d){a(d,e)});m.collapseToEnd(e);b.removeAllRanges();b.addRange(e);d.preventDefault()}}},setWithRangeObject:function(a,d,b){q&&(g(a,m.rangeFromRangeObject(d),function(a,d){var c=new f(d);b(a,c);m.setRangeFromRef(d,c)}),d.select())},set:g,clear:e}});define("aloha/editable","aloha/core util/class jquery aloha/pluginmanager aloha/selection aloha/markup aloha/contenthandlermanager aloha/console aloha/block-jump aloha/ephemera util/dom2 PubSub aloha/copypaste aloha/command aloha/state-override".split(" "),
function(l,b,p,m,k,f,c,e,g,q,a,d,n,v,y){function A(a){return c.handleContent(a.getContents(),{contenthandler:l.settings.contentHandler.smartContentChange},a)}function z(a){var d=a.obj;d.mousedown(function(b){if(!l.eventHandled){l.eventHandled=!0;if(null==l.activeEditable||"undefined"===typeof l.activeEditable||d[0]!==l.activeEditable.obj[0])l.mouseEventChangedEditable=!0;return a.activate(b)}});d.mouseup(function(a){l.eventHandled=!1});d.focus(function(d){return a.activate(d)});d.keydown(function(d){var b=
f.preProcessKeyStrokes(d);a.keyCode=d.which;b||a.smartContentChange(d);return b});d.keypress(y.keyPressHandler);d.keypress(function(a){l.activeEditable.smartContentChange(a)});d.keyup(function(a){if(27===a.keyCode)return l.deactivateEditable(),!1});d.contentEditableSelectionChange(function(a){k.onChange(d,a,0,l.mouseEventChangedEditable);l.mouseEventChangedEditable&&(l.mouseEventChangedEditable=!1);return d})}var B=window.unescape,C=window.GENTICS,E=!1,D={};l.defaults.contentHandler={};l.defaults.contentHandler.initEditable=
["blockelement","sanitize"];l.defaults.contentHandler.getContents=["blockelement","sanitize","basic"];"undefined"===typeof l.settings.contentHandler&&(l.settings.contentHandler={});var r=function(a){return p(a).html()},t={65:"a"},s={"ctrl+a":function(){var a=n.getEditableAt(n.getRange());if(a)return n.selectAllOf(a.obj[0]),!1}};p(document).keydown(function(a){if(l.activeEditable){var d=t[a.which];if(d){var b=a.altKey?"alt":a.ctrlKey?"ctrl":a.shiftKey?"shift":null,d=(b?b+"+":"")+d;if(s[d])return s[d](a)}}});
l.Editable=b.extend({_constructor:function(a){a.attr("id")||a.attr("id",C.Utils.guid());this.originalObj=this.obj=a;this.ready=!1;this.sccDelimiters=[":",";",".","!","?",",",B("%u0009"),B("%u0020"),B("%u0008"),B("%u007F"),"Enter"];this.sccIdle=5E3;this.sccDelay=500;this.sccTimerDelay=this.sccTimerIdle=!1;this.keyCodeMap={93:"Apps",18:"Alt",20:"CapsLock",17:"Control",40:"Down",35:"End",13:"Enter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",
36:"Home",45:"Insert",37:"Left",224:"Meta",34:"PageDown",33:"PageUp",19:"Pause",44:"PrintScreen",39:"Right",145:"Scroll",16:"Shift",38:"Up",91:"Win",92:"Win"};this.placeholderClass="aloha-placeholder";l.registerEditable(this)},init:function(){var a=this;(this.settings=l.settings)&&l.settings.smartContentChange&&(l.settings.smartContentChange.delimiters&&(this.sccDelimiters=l.settings.smartContentChange.delimiters),l.settings.smartContentChange.idle&&(this.sccIdle=l.settings.smartContentChange.idle),
l.settings.smartContentChange.delay&&(this.sccDelay=l.settings.smartContentChange.delay));if(this.check(this.obj)){"undefined"===typeof l.settings.contentHandler.getContents&&(l.settings.contentHandler.getContents=l.defaults.contentHandler.getContents);"undefined"===typeof l.settings.contentHandler.initEditable&&(l.settings.contentHandler.initEditable=l.defaults.contentHandler.initEditable);var b=a.obj.html(),b=c.handleContent(b,{contenthandler:l.settings.contentHandler.initEditable,command:"initEditable"},
a);a.obj.html(b);l.bind("aloha-plugins-loaded",function(){a.obj.addClass("aloha-editable").contentEditable(!0);z(a);a.setUnmodified();a.snapshotContent=a.getContents();a.initPlaceholder();a.ready=!0;window.setTimeout(function(){l.disableObjectResizing()},20);l.trigger("aloha-editable-created",[a]);d.pub("aloha.editable.created",{data:a})})}else this.destroy()},isActive:!1,originalContent:null,range:void 0,check:function(){var a=this,d=this.obj,b=d.get(0).nodeName.toLowerCase(),c="a abbr address article aside b bdo blockquote cite code command del details dfn div dl em footer h1 h2 h3 h4 h5 h6 header i ins menu nav p pre q ruby section small span strong sub sup var".split(" "),
e;for(e=0;e<c.length;++e)if(b===c[e])return!0;switch(b){case "textarea":case "input":return b=p('<div id="'+this.getId()+'-aloha" class="aloha-'+b+'" />').insertAfter(d),b.height(d.height()).width(d.width()).html(d.val()),d.hide(),d.parents("form:first").submit(function(){d.val(a.getContents())}),this.obj=b,!0}return!1},initPlaceholder:function(){l.settings.placeholder&&this.isEmpty()&&this.addPlaceholder()},isEmpty:function(){var a=p.trim(this.getContents());return 0===a.length||("<br>"===a?!0:!1)},
addPlaceholder:function(){var a=p("<div>"),d=p("<span>"),b,c=this.obj;b=C.Utils.Dom.allowsNesting(c[0],a[0])?a:d;0===p("."+this.placeholderClass,c).length&&(p.each(l.settings.placeholder,function(a,d){c.is(a)&&b.html(d)}),b.is(":empty")||(b.addClass(this.placeholderClass).addClass("aloha-ephemera"),p(c).append(b)),p("br",c).remove())},removePlaceholder:function(a,d){var b=this.placeholderClass,c;0!==p("."+this.placeholderClass,a).length&&(!0===d?window.setTimeout(function(){c=new k.SelectionRange;
c.startContainer=c.endContainer=a.get(0);c.startOffset=c.endOffset=0;p("."+b,a).remove();c.select()},100):p("."+b,a).remove())},destroy:function(){this===l.getActiveEditable()&&this.blur();switch(this.originalObj.get(0).nodeName.toLowerCase()){case "textarea":case "input":this.originalObj.val(this.getContents()),this.obj.remove(),this.originalObj.show()}this.ready=!1;this.removePlaceholder(this.obj);this.obj.removeClass("aloha-editable").contentEditable(!1).unbind("mousedown click dblclick focus keydown keypress keyup");
l.trigger("aloha-editable-destroyed",[this]);d.pub("aloha.editable.destroyed",{data:this});l.unregisterEditable(this)},setUnmodified:function(){this.originalContent=this.getContents()},isModified:function(){return this.originalContent!==this.getContents()},toString:function(){return"Aloha.Editable"},isDisabled:function(){return!this.obj.contentEditable()||"false"===this.obj.contentEditable()},disable:function(){return this.isDisabled()||this.obj.contentEditable(!1)},enable:function(){return this.isDisabled()&&
this.obj.contentEditable(!0)},activate:function(a){var b=l.getActiveEditable();E?E=!1:a&&"focus"===a.type&&null!==b&&b.obj.parent().get(0)===a.currentTarget||this.isActive||this.isDisabled()||(this.obj.addClass("aloha-editable-active"),l.activateEditable(this),E=!0,this.removePlaceholder(this.obj,!0),E=!1,this.isActive=!0,l.trigger("aloha-editable-activated",{oldActive:b,editable:this}),d.pub("aloha.editable.activated",{data:{old:b,editable:this}}))},blur:function(){this.obj.blur();this.isActive=
!1;this.initPlaceholder();this.obj.removeClass("aloha-editable-active");l.trigger("aloha-editable-deactivated",{editable:this});d.pub("aloha.editable.deactivated",{data:{editable:this}});l.activeEditable.smartContentChange({type:"blur"},null)},empty:function(a){return null===a||""===p.trim(a)||"<br/>"===a},getContents:function(a){var d=this.obj.html(),b=D[this.getId()];if(!b||d!==b.raw){g.removeZeroWidthTextNodeFix();var e=this.obj.clone(!1);this.removePlaceholder(e);e=p(q.prune(e[0]));m.makeClean(e);
e=p("<div>"+c.handleContent(e.html(),{contenthandler:l.settings.contentHandler.getContents,command:"getContents"},this)+"</div>");b=D[this.getId()]={};b.raw=d;b.element=e}if(a)return b.element.clone().contents();null==b.serialized&&(b.serialized=r(b.element[0]));return b.serialized},setContents:function(a,d){var b=null;l.getActiveEditable()===this&&(l.deactivateEditable(),b=this);this.obj.html(a);null!==b&&b.activate();this.smartContentChange({type:"set-contents"});return d?this.obj.contents():r(this.obj[0])},
getId:function(){return this.obj.attr("id")},smartContentChange:function(a){function d(){null==f&&(f=b.getSnapshotContent());return f}var b=this,c=null,g;if(a&&(a.metaKey||a.crtlKey||a.altKey))return!1;a&&a.originalEvent&&(g=/U\+(\w{4})/,g.exec(a.originalEvent.keyIdentifier),c=this.keyCodeMap[this.keyCode]||String.fromCharCode(a.which)||"unknown");var f=null;0<=p.inArray(c,this.sccDelimiters)?(clearTimeout(this.sccTimerIdle),clearTimeout(this.sccTimerDelay),this.sccTimerDelay=window.setTimeout(function(){l.trigger("aloha-smart-content-changed",
{editable:b,keyIdentifier:a.originalEvent.keyIdentifier,keyCode:a.keyCode,"char":c,triggerType:"keypress",getSnapshotContent:d});A(b);e.debug("Aloha.Editable","smartContentChanged: event type keypress triggered")},this.sccDelay)):a&&"paste"===a.type?(l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,triggerType:"paste",getSnapshotContent:d}),A(b)):a&&"blur"===a.type?(l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,
triggerType:"blur",getSnapshotContent:d}),A(b)):a&&"block-change"===a.type?(l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,triggerType:"block-change",getSnapshotContent:d}),A(b)):null!==c&&(clearTimeout(this.sccTimerDelay),clearTimeout(this.sccTimerIdle),this.sccTimerIdle=window.setTimeout(function(){l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,triggerType:"idle",getSnapshotContent:d});A(b)},this.sccIdle))},
getSnapshotContent:function(){var a=this.snapshotContent;this.snapshotContent=this.getContents();return a}});l.Editable.setContentSerializer=function(a){r=a};l.Editable.getContentSerializer=function(){return r};l.Editable.registerEvents=z});define("aloha/plugin",["aloha/core","jquery","util/class","aloha/pluginmanager","aloha/console"],function(l,b,p,m,k){var f=p.extend({name:null,defaults:{},settings:{},dependencies:[],_constructor:function(b){"string"!==typeof b?k.error("Cannot initialise unnamed plugin, skipping"):
this.name=b},checkDependencies:function(){var c=this,e=!0;b.each(c.dependencies,function(b,f){if(!l.isPluginLoaded(f.toString()))return e=!1,k.error("plugin."+c.name,'Required plugin "'+f+'" not found.'),!1});return e},init:function(){},getEditableConfig:function(c){var e=null,g=!1,f=this;this.settings.editables&&b.each(this.settings.editables,function(a,d){var n;if(c.is(a))if(g=!0,d instanceof Array)e=[],e=b.merge(e,d);else if("object"===typeof d)for(n in e={},e["aloha-editable-selector"]=a,d)d.hasOwnProperty(n)&&
(d[n]instanceof Array?e[n]=d[n]:"object"===typeof d[n]?(e[n]={},e[n]=b.extend(!0,e[n],f.config[n],d[n])):e[n]=d[n]);else e=d});g||(e="undefined"!==typeof this.settings.config&&this.settings.config?this.settings.config:this.config);return e},makeClean:function(b){},getUID:function(b){k.deprecated("plugin","getUID() is deprecated. Use plugin.name instead.");return this.name},toString:function(){return this.name},log:function(b,e){k.deprecated("plugin","log() is deprecated. Use Aloha.console instead.");
k.log(b,this,e)}});f.create=function(c,e){var g=new (f.extend(e))(c);g.settings=b.extendObjects(!0,g.defaults,l.settings[c]);m.register(g);return g};return f});define("aloha/jquery.aloha",["aloha/core","aloha/selection","jquery","aloha/console"],function(l,b,p,m){function k(b,c,f,a){if(c===a.target||!/textarea|input|select/i.test(a.target.nodeName)&&"text"!==a.target.type)return b.apply(c,f)}function f(b){var c,f,a,d;if("string"===typeof b.data){c=b.handler;f=b.data.toLowerCase().split(" ");a={};
for(d=0;d<f.length;d++)a[f[d]]=!0;b.handler=function(d){if(this===d.target){var b="keypress"!==d.type&&p.hotkeys.specialKeys[d.which],e="";d.altKey&&"alt"!==b&&(e+="alt+");d.ctrlKey&&"ctrl"!==b&&(e+="ctrl+");d.metaKey&&!d.ctrlKey&&"meta"!==b&&(e+="meta+");d.shiftKey&&"shift"!==b&&(e+="shift+");if(b){if(a[e+b])return k(c,this,arguments,d)}else if(b=String.fromCharCode(d.which).toLowerCase(),a[e+b]||a[e+p.hotkeys.shiftNums[b]]||"shift+"===e&&a[p.hotkeys.shiftNums[b]])return k(c,this,arguments,d)}}}}
var c=window.XMLSerializer;p.fn.between=function(b,c){var f;3!==this[0].nodeType?(f=this.children().size(),c>f&&(c=f),0>=c?this.prepend(b):this.children().eq(c-1).after(b)):0>=c?this.before(b):(c>=this[0].length||(f=this[0].data,this[0].data=f.substring(0,c),this.after(f.substring(c,f.length))),this.after(b))};p.fn.contentEditable=function(b){var c=p(this),f="contenteditable";p.browser.msie&&7==parseInt(p.browser.version,10)&&(f="contentEditable");if("undefined"===typeof b){if("undefined"===typeof c[0]){m.warn("The jquery object did not contain any valid elements.");
return}return"undefined"===typeof c[0].isContentEditable?(m.warn("Could not determine whether the is editable or not. I assume it is."),!0):c[0].isContentEditable}""===b?c.removeAttr(f):c.attr(f,b&&"false"!==b?"true":"false");return c};p.fn.aloha=function(){var b=this;l.bind("aloha-plugins-loaded",function(){b.each(function(b,c){l.isEditable(c)||(new l.Editable(p(c))).init()})});return b};p.fn.mahalo=function(){return this.each(function(){l.isEditable(this)&&l.getEditableById(p(this).attr("id")).destroy()})};
p.fn.alohaText=function(){return this.each(function(){l.isEditable(this)&&l.getEditableById(p(this).attr("id")).getContents()})};p.fn.contentEditableSelectionChange=function(c){var g=this;this.keyup(function(g){b.getRangeObject();c(g)});this.dblclick(function(b){c(b)});this.mousedown(function(b){g.selectionStarted=!0});p(document).mouseup(function(f){b.eventOriginalTarget=g;g.selectionStarted&&c(f);b.eventOriginalTarget=!1;g.selectionStarted=!1});return this};p.fn.outerHtml=p.fn.outerHtml||function(){var b=
p(this).get(0);if("undefined"!=typeof b.outerHTML)return b.outerHTML;try{return(new c).serializeToString(b)}catch(g){try{return b.xml}catch(f){}}};p.fn.zap=function(){return this.each(function(){p(this.childNodes).insertBefore(this)}).remove()};p.fn.textNodes=function(b,c){var f=[],a=function(d){var n,k;if(3===d.nodeType&&p.trim(d.data)&&!c||3===d.nodeType&&c||"BR"==d.nodeName&&!b)f.push(d);else for(n=0,k=d.childNodes.length;n<k;++n)a(d.childNodes[n])};a(this[0]);return p(f)};p.extendObjects=p.fn.extendObjects=
function(b,c){var f,a,d,n,k;f=1;var m=b||{},l=arguments.length,z=!1,B;"boolean"===typeof m&&(z=m,m=c||{},f=2);"object"===typeof m||p.isFunction(m)||(m={});l===f&&(m=this,--f);for(B=f;B<l;B++)if(null!=(f=arguments[B]))for(a in f)f.hasOwnProperty(a)&&(d=m[a],n=f[a],m!==n&&(z&&n&&(p.isPlainObject(n)||!0===(k=p.isArray(n)))?(k?(k=!1,d=d&&p.isArray(d)?d:[]):d=d&&p.isPlainObject(d)?d:{},p.isArray(n)?m[a]=n:m[a]=p.extendObjects(z,d,n)):void 0!==n&&(m[a]=n)));return m};p.hotkeys={version:"0.8",specialKeys:{8:"backspace",
9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},shiftNums:{"`":"~",
1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};p.each(["keydown","keyup","keypress"],function(){p.event.special[this]={add:f}})});define("aloha/sidebar",["aloha/core","jquery","aloha/selection","PubSub"],function(l,b,p,m){var k=+new Date;b.easing.easeOutExpo||b.extend(b.easing,{easeOutExpo:function(a,d,b,c,e){return d==e?b+c:c*(-Math.pow(2,-10*d/e)+1)+b},easeOutElastic:function(a,d,b,c,e){a=Math;var g=1.70158,f=0,k=c;
if(!d)return b;if(1==(d/=e))return b+c;f||(f=0.3*e);k<a.abs(c)?(k=c,g=f/4):g=f/(2*a.PI)*a.asin(c/k);return k*a.pow(2,-10*d)*a.sin(2*(d*e-g)*a.PI/f)+c+b}});var f=function(a){this.id=null;this.folds={};this.button=null;this.title=b('<div class="aloha-sidebar-panel-title"><span class="aloha-sidebar-panel-title-arrow"></span><span class="aloha-sidebar-panel-title-text">Untitled</span></div>');this.content=b('<div class="aloha-sidebar-panel-content"><div class="aloha-sidebar-panel-content-inner"><div class="aloha-sidebar-panel-content-inner-text"></div></div></div>');
this.effectiveElement=this.element=null;this.expanded=!1;this.isActive=!0;this.init(a)},c=function(a){var d=this;this.id="aloha-sidebar-"+ ++k;this.panels={};this.container=b('<div class="aloha-ui aloha-sidebar-bar"><div class="aloha-sidebar-handle"><span class="aloha-sidebar-handle-icon"></span></div><div class="aloha-sidebar-inner"><ul class="aloha-sidebar-panels"></ul></div></div>');this.width=300;this.isCompletelyOpen=this.isOpen=this.opened=!1;this.settings={rotateIcons:!b.browser.msie,overlayPage:!0};
b(function(){"undefined"!==typeof l.settings.sidebar&&l.settings.sidebar.disabled||d.init(a)})},e=null,g=null;b.extend(c.prototype,{init:function(a){var d=this,c;"object"===typeof a&&(c=a.panels,delete a.panels);b.extend(this,a);"object"===typeof c&&b.each(c,function(){d.addPanel(this,!0)});a=this.container;"right"===this.position&&a.addClass("aloha-sidebar-right");a.hide().appendTo(b("body")).click(function(){d.barClicked.apply(d,arguments)}).find(".aloha-sidebar-panels").width(this.width);a.width(this.width);
this.width=a.width();this.updateHeight();this.initToggler();this.container.css("right"===this.position?"marginRight":"marginLeft",-this.width);this.opened&&this.open(0);this.toggleHandleIcon(this.isOpen);this.subscribeToEvents();b(window).resize(function(){d.updateHeight();d.correctHeight()});this.correctHeight()},show:function(){this.container.css("display","block");return this},hide:function(){this.container.css("display","none");return this},checkActivePanels:function(a){var d=[];if("undefined"!==
typeof a&&"undefined"!==typeof a.markupEffectiveAtStart){var c=a.markupEffectiveAtStart.length,e;for(e=0;e<c;++e)d.push(b(a.markupEffectiveAtStart[e]))}var g=this;b.each(this.panels,function(){g.showActivePanel(this,d)});this.correctHeight()},subscribeToEvents:function(){var a=this;m.sub("aloha.selection.context-change",function(d){a.isOpen&&a.checkActivePanels(d.range);a.lastRange=d.range});l.bind("aloha-editable-deactivated",function(d,b){a.isOpen&&a.checkActivePanels();a.lastRange=null});this.container.mousedown(function(a){a.originalEvent.stopSelectionUpdate=
!0;l.eventHandled=!0});this.container.mouseup(function(a){a.originalEvent.stopSelectionUpdate=!0;l.eventHandled=!1})},correctHeight:function(){if(this.isOpen)if(this.isCompletelyOpen){var a=b(window).height(),d=[],c=[],f;for(f in this.panels)this.panels.hasOwnProperty(f)&&this.panels[f].isActive&&(c.push(this.panels[f]),d.push(f));if(0!==c.length&&(d=d.sort().join(","),g!==d||e!==a)){e=a;g=d;for(var a=this.container.find(".aloha-sidebar-inner").height()-(c[0].title.outerHeight()+10)*c.length,k,q,
m,l=0,p=Math,E;0<c.length&&0<a;){a+=l;l=0;m=[];for(E=c.length-1;0<=E;--E)d=c[E],k=d.content.find(".aloha-sidebar-panel-content-inner"),f=p.min(k.height("auto").height(),p.floor(a/(E+1))),k.height(f),a-=f,q=k.find(".aloha-sidebar-panel-content-inner-text"),q.height()>f?(m.push(d),l+=f,k.css({"overflow-x":"hidden","overflow-y":"scroll"})):k.css("overflow-y","hidden"),d.expanded&&d.expand();c=m}}}else this.correctHeightWhenCompletelyOpen=!0},showActivePanel:function(a,d){d.push(null);a.content.parent("li");
var c=a.activeOn,e=b(),g=0,f=d.length,k;for(k=0;k<f;++k)c(d[k])&&(++g,d[k]&&b.merge(e,d[k]));g?a.activate(e):a.deactivate()},initToggler:function(){var a=this,d=this.container,c=d.find(".aloha-sidebar-handle-icon"),e,g="right"===this.position;this.opened&&this.rotateHandleArrow(g?0:180,0);b(function(){"undefined"!==typeof l.settings.sidebar&&l.settings.sidebar.handle&&l.settings.sidebar.handle.top&&(b(d.find(".aloha-sidebar-handle"))[0].style.top=l.settings.sidebar.handle.top)});d.find(".aloha-sidebar-handle").click(function(){e&&
clearInterval(e);c.stop().css("marginLeft",4);a.isOpen?(b(this).removeClass("aloha-sidebar-toggled"),a.close(),a.isOpen=!1):(b(this).addClass("aloha-sidebar-toggled"),a.open(),a.isOpen=!0)}).hover(function(){var d=a.isOpen?-1:1;e&&clearInterval(e);c.stop();b(this).stop().animate(g?{marginLeft:"-="+5*d}:{marginRight:"-="+5*d},200);e=setInterval(function(){d*=-1;c.animate(g?{left:"-="+4*d}:{right:"-="+4*d},300)},300)},function(){e&&clearInterval(e);c.stop().css(g?"left":"right",5);b(this).stop().animate(g?
{marginLeft:0}:{marginRight:0},600,"easeOutElastic")})},roundCorners:function(){var a=this.container,d=a.find(".aloha-sidebar-panels>li:not(.aloha-sidebar-deactivated)");a.find(".aloha-sidebar-panel-top, .aloha-sidebar-panel-bottom").removeClass("aloha-sidebar-panel-top").removeClass("aloha-sidebar-panel-bottom");d.first().find(".aloha-sidebar-panel-title").addClass("aloha-sidebar-panel-top");d.last().find(".aloha-sidebar-panel-content").addClass("aloha-sidebar-panel-bottom")},updateHeight:function(){var a=
b(window).height();this.container.height(a).find(".aloha-sidebar-inner").height(a)},barClicked:function(a){this.handleBarclick(b(a.target))},handleBarclick:function(a){a.hasClass("aloha-sidebar-panel-title")?this.togglePanel(a):a.hasClass("aloha-sidebar-panel-content")||a.hasClass("aloha-sidebar-handle")||a.hasClass("aloha-sidebar-bar")||this.handleBarclick(a.parent())},getPanelById:function(a){return this.panels[a]},getPanelByElement:function(a){a="LI"===a[0].tagName?a:a.parent("li");return this.getPanelById(a[0].id)},
togglePanel:function(a){this.getPanelByElement(a).toggle()},rotateHandleIcon:function(a,d){var b=this.container.find(".aloha-sidebar-handle-icon");b.animate({angle:a},{duration:"number"===typeof d||"string"===typeof d?d:500,easing:"easeOutExpo",step:function(a,d){b.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},toggleHandleIcon:function(a){a^="right"===this.position;if(this.settings.rotateIcons)this.rotateHandleIcon(a?
180:0,0);else{var d=this.container.find(".aloha-sidebar-handle-icon");a?d.addClass("aloha-sidebar-handle-icon-left"):d.removeClass("aloha-sidebar-handle-icon-left")}},open:function(a,d){if(this.isOpen)return this;var c="right"===this.position,e=c?{marginRight:0}:{marginLeft:0},g=this;this.toggleHandleIcon(!0);this.container.animate(e,"number"===typeof a||"string"===typeof a?a:500,"easeOutExpo");this.settings.overlayPage||b("body").animate(c?{marginRight:"+="+this.width}:{marginLeft:"+="+this.width},
500,"easeOutExpo",function(){g.isCompletelyOpen=!0;g.correctHeightWhenCompletelyOpen&&g.correctHeight()});this.isOpen=!0;this.correctHeight();this.lastRange&&this.checkActivePanels(this.lastRange);b("body").trigger("aloha-sidebar-opened",this);return this},close:function(a,d){if(!this.isOpen)return this;var c="right"===this.position,e=c?{marginRight:-this.width}:{marginLeft:-this.width};this.toggleHandleIcon(!1);this.container.animate(e,"number"===typeof a||"string"===typeof a?a:500,"easeOutExpo");
this.settings.overlayPage||b("body").animate(c?{marginRight:"-="+this.width}:{marginLeft:"-="+this.width},500,"easeOutExpo");this.isCompletelyOpen=this.isOpen=!1;return this},activatePanel:function(a,d){"string"===typeof a&&(a=this.getPanelById(a));a&&a.activate(d);this.roundCorners();return this},expandPanel:function(a,d){"string"===typeof a&&(a=this.getPanelById(a));a&&a.expand(d);return this},collapsePanel:function(a,d){"string"===typeof a&&(a=this.getPanelById(a));a&&a.collapse(d);return this},
addPanel:function(a,d){a instanceof f||(a.width||(a.width=this.width),a.sidebar=this,a=new f(a));this.panels[a.id]=a;this.container.find(".aloha-sidebar-panels").append(a.element);this.checkActivePanels(p.getRangeObject());return a}});b.extend(f.prototype,{init:function(a){this.setTitle(a.title).setContent(a.content);delete a.title;delete a.content;b.extend(this,a);this.id||(this.id="aloha-sidebar-"+ ++k);this.element=b('<li id="'+this.id+'">').append(this.title,this.content);this.expanded&&this.content.height("auto");
this.toggleTitleIcon(this.expanded);this.coerceActiveOn();this.title.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return!1}});"function"===typeof this.onInit&&this.onInit.apply(this)},toggleTitleIcon:function(a){if(this.sidebar.settings.rotateIcons)this.rotateTitleIcon(a?90:0);else{var d=this.title.find(".aloha-sidebar-panel-title-arrow");a?d.addClass("aloha-sidebar-panel-title-arrow-down"):d.removeClass("aloha-sidebar-panel-title-arrow-down")}},
coerceActiveOn:function(){if("function"!==typeof this.activeOn){var a=this.activeOn;this.activeOn=function(){var d=typeof a;return"boolean"===d?function(){return a}:"undefined"===d?function(){return!0}:"string"===d?function(d){return d?d.is(a):!1}:function(){return!1}}()}},activate:function(a){this.isActive=!0;this.content.parent("li").show().removeClass("aloha-sidebar-deactivated");this.effectiveElement=a;"function"===typeof this.onActivate&&this.onActivate.call(this,a)},deactivate:function(){this.isActive&&
(this.isActive=!1,this.content.parent("li").hide().addClass("aloha-sidebar-deactivated"),this.effectiveElement=null)},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(a){var d=this,b=this.content,c=b.height(),e=b.height("auto").height();b.height(c).stop().animate({height:e},500,"easeOutExpo",function(){"function"===typeof a&&a.call(d)});this.element.removeClass("collapsed");this.toggleTitleIcon(!0);this.expanded=!0;return this},collapse:function(a,d){var b=this;this.element.addClass("collapsed");
this.content.stop().animate({height:3},250,"easeOutExpo",function(){"function"===typeof d&&d.call(b)});this.toggleTitleIcon(!1);this.expanded=!1;return this},setTitle:function(a){this.title.find(".aloha-sidebar-panel-title-text").html(a);return this},setContent:function(a){a&&""!==a||(a="&nbsp;");this.content.find(".aloha-sidebar-panel-content-inner-text").html(a);return this},rotateTitleIcon:function(a,d){var b=this.title.find(".aloha-sidebar-panel-title-arrow");b.animate({angle:a},{duration:"number"===
typeof d?d:500,easing:"easeOutExpo",step:function(a,d){b.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},renderEffectiveParents:function(a,d){for(var c=a.first(),e=[],g=[],f=this.activeOn,k,q;0<c.length&&!c.is(".aloha-editable");){if(f(c)){g.push("<span>"+c[0].tagName.toLowerCase()+"</span>");k=g.length;for(q=[];k--;)q.push(g[k]);e.push('<div class="aloha-sidebar-panel-parent"><div class="aloha-sidebar-panel-parent-path">'+
q.join("")+'</div><div class="aloha-sidebar-panel-parent-contentaloha-sidebar-opened">'+("function"===typeof d?d(c):"----")+"</div></div>")}c=c.parent()}this.setContent(e.join(""));b(".aloha-sidebar-panel-parent-path").click(function(){var a=b(this).parent().find(".aloha-sidebar-panel-parent-content");a.hasClass("aloha-sidebar-opened")?a.hide().removeClass("aloha-sidebar-opened"):a.show().addClass("aloha-sidebar-opened")});this.content.height("auto").find(".aloha-sidebar-panel-content-inner").height("auto")}});
var q=new c({position:"left",width:250}),c=new c({position:"right",width:250});l.Sidebar={left:q,right:c};return l.Sidebar});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/position",["jquery"],function(l){var b=window.GENTICS;b.Utils.Position={};b.Utils.Position.w=l(window);b.Utils.Position.Scroll={top:0,left:0,isScrolling:!1};b.Utils.Position.ScrollCorrection={top:100,left:50};b.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0};
b.Utils.Position.mouseStopCallbacks=[];b.Utils.Position.mouseMoveCallbacks=[];b.Utils.Position.update=function(){var b=this.w.scrollTop(),m=this.w.scrollLeft();if(this.Scroll.isScrolling)this.Scroll.top==b&&this.Scroll.left==m&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=b||this.Scroll.left!=m)this.Scroll.isScrolling=!0;this.Scroll.top=b;this.Scroll.left=m;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){if(this.Mouse.isMoving=!1,!this.Mouse.triggeredMouseStop)for(this.Mouse.triggeredMouseStop=
!0,b=0;b<this.mouseStopCallbacks.length;b++)this.mouseStopCallbacks[b].call()}else for(this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1,b=0;b<this.mouseMoveCallbacks.length;b++)this.mouseMoveCallbacks[b].call();this.Mouse.oldX=this.Mouse.x;this.Mouse.oldY=this.Mouse.y};b.Utils.Position.addMouseStopCallback=function(b){this.mouseStopCallbacks.push(b);return this.mouseStopCallbacks.length-1};b.Utils.Position.addMouseMoveCallback=function(b){this.mouseMoveCallbacks.push(b);return this.mouseMoveCallbacks.length-
1};l(function(){window.setInterval(function(){b.Utils.Position.update()},500)});l("html").mousemove(function(l){b.Utils.Position.Mouse.x=l.pageX;b.Utils.Position.Mouse.y=l.pageY})});define("aloha/repositoryobjects",["aloha/core","util/class"],function(l,b){var p=window.GENTICS;l.RepositoryObject=function(){};l.RepositoryDocument=b.extend({_constructor:function(b){this.type="document";b.id&&b.name&&b.repositoryId&&(p.Utils.applyProperties(this,b),this.baseType="document")}});l.RepositoryFolder=b.extend({_constructor:function(b){this.type=
"folder";b.id&&b.name&&b.repositoryId&&(p.Utils.applyProperties(this,b),this.baseType="folder")}})});define("aloha/repositorymanager",["jquery","util/class","aloha/core","aloha/console","aloha/repositoryobjects"],function(l,b,p,m,k){function f(a,b){var c={items:a,results:a.length};b&&(c.numItems=b.numItems,c.hasMoreItems=b.hasMoreItems,c.timeout=b.timeout);return c}function c(a,b){a(b)}var e=function(a){return a?function(a,d){return a.filter(d)}:function(a,d){var b=[],c,e=a.length;for(c=0;c<e;c++)d(a[c])&&
b.push(a[c]);return b}}(Array.prototype.hasOwnProperty("filter")),g=function(a){return"function"===typeof a.query},q=function(a){return"function"===typeof a.getChildren},a=function(a){return"function"===typeof a.getSelectedFolder};b=b.extend({repositories:[],settings:p.settings&&p.settings.repositories||{},initialized:!1,init:function(){"undefined"===typeof this.settings.timeout&&(this.settings.timeout=5E3);var a;for(a=0;a<this.repositories.length;a++)this.initRepository(this.repositories[a]);this.initialized=
!0},register:function(a){this.getRepository(a.repositoryId)?m.warn(this,'A repository with name "'+a.repositoryId+'" already registerd. Ignoring this.'):(this.repositories.push(a),this.initialized&&this.initRepository(a))},initRepository:function(a){a.settings||(a.settings={});this.settings[a.repositoryId]&&l.extend(a.settings,this.settings[a.repositoryId]);a.init()},getRepository:function(a){var b;for(b=0;b<this.repositories.length;b++)if(this.repositories[b].repositoryId===a)return this.repositories[b];
return null},query:function(a,b){var k=this,q,p=[],z={numItems:0,hasMoreItems:!1},B,C=a.timeout&&parseInt(a.timeout,10)||k.settings.timeout,E=window.setTimeout(function(){z=z||{};z.timeout=!0;0<B&&(m.warn(k,B+" repositories did not return before the configured timeout of "+C+"ms."),B=0);clearTimeout(E);var a=f(p,z);b(a)},C),D=function(a,d){if(0!==B){if(a&&a.length){if(!a[0].repositoryId){var c=this.repositoryId,e;for(e=0;e<a.length;e++)a[e].repositoryId=c}l.merge(p,a)}d&&z?(z.numItems=l.isNumeric(d.numItems)&&
l.isNumeric(z.numItems)?z.numItems+d.numItems:void 0,z.hasMoreItems="boolean"===typeof d.hasMoreItems&&"boolean"===typeof z.hasMoreItems?z.hasMoreItems||d.hasMoreItems:void 0,d.timeout&&(z.timeout=!0)):z=void 0;m.debug(k,"The repository "+this.repositoryId+"returned with "+a.length+" results.");0===--B&&(clearTimeout(E),c=f(p,z),b(c))}};q=a.repositoryId?[k.getRepository(a.repositoryId)]:k.repositories;var r=e(q,g);if(0===r.length)clearTimeout(E),c(b,f(p,z));else{var t=function(a){return function(){D.apply(a,
arguments)}};B=r.length;for(q=0;q<r.length;q++)r[q].query(a,t(r[q]))}},getChildren:function(a,b){var c=this,g,f=[],k=0,B=a.timeout&&parseInt(a.timeout,10)||c.settings.timeout,C=window.setTimeout(function(){0<k&&(m.warn(c,k+" repositories did not respond before the configured timeout of "+B+"ms."),k=0);clearTimeout(C);b(f)},B),E=function(a){0!==k&&(a&&l.merge(f,a),0===--k&&(clearTimeout(C),b(f)))},D=a.repositoryId?[c.getRepository(a.repositoryId)]:c.repositories;a.repositoryFilter&&a.repositoryFilter.length&&
(D=e(D,function(b){return-1<l.inArray(b.repositoryId,a.repositoryFilter)}));if("aloha"===a.inFolderId){for(g=0;g<D.length;g++)f.push(new p.RepositoryFolder({id:D[g].repositoryId,name:D[g].repositoryName,repositoryId:D[g].repositoryId,type:"repository",hasMoreItems:!0}));clearTimeout(C);b(f)}else if(D=e(D,q),0===D.length)clearTimeout(C),b(f);else for(k=D.length,g=0;g<D.length;g++)D[g].getChildren(a,E)},makeClean:function(a){var b=this,c={},e=0,g=b.repositories.length;a.find("[data-gentics-aloha-repository="+
this.prefix+"]").each(function(){for(;e<g;)c.makeClean(a),e+=1;m.debug(b,"Passing contents of HTML Element with id { "+this.attr("id")+" } for cleaning to repository { "+c.repositoryId+" }");c.makeClean(this)})},markObject:function(a,b){if(a)if(b){var c=this.getRepository(b.repositoryId);c?(l(a).attr({"data-gentics-aloha-repository":b.repositoryId,"data-gentics-aloha-object-id":b.id}),c.markObject(a,b)):m.error(this,'Trying to apply a repository "'+b.name+'" to an object, but item has no repositoryId.')}else l(a).removeAttr("data-gentics-aloha-repository").removeAttr("data-gentics-aloha-object-id")},
getObject:function(a,b){var c=l(a),e=c.attr("data-gentics-aloha-object-id"),c=c.attr("data-gentics-aloha-repository"),g=this.getRepository(c);if(g&&e){this.itemCache||(this.itemCache=[]);var f=this.itemCache[c];f||(f=this.itemCache[c]=[]);f[e]?b([f[e]]):g.getObjectById(e,function(a){f[e]=a[0];b(a)})}},folderOpened:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderOpened&&b.folderOpened(a)},folderClosed:function(a){var b=this.getRepository(a.repositoryId);"function"===
typeof b.folderClosed&&b.folderClosed(a)},folderSelected:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderSelected&&b.folderSelected(a)},getSelectedFolder:function(){var d=e(this.repositories,a),b,c;for(b=0;b<d.length;b++)if(c=d[b].getSelectedFolder())return c;return null},toString:function(){return"repositorymanager"}});p.RepositoryManager=new b;return p.RepositoryManager});define("aloha/repository",["aloha/core","util/class","aloha/repositorymanager"],function(l,
b,p){b=b.extend({_constructor:function(b,k){this.repositoryId=b;this.settings={};this.repositoryName=k||b;p.register(this)},init:function(){},query:null,getChildren:null,makeClean:function(b){},markObject:function(b,k){},setTemplate:function(b){this.template=b?b:null},hasTemplate:function(){return this.template?!0:!1},getTemplate:function(){return this.template},getObjectById:function(b,k){return!0}});return l.AbstractRepository=b});(function(l){function b(){var b,c,a=Aloha.settings.plugins&&Aloha.settings.plugins.load,
d=Aloha.settings.baseUrl,e,f=/\/aloha.js(\?\S*)?$/,k=/\/[^\/]*\.js$/,m;if(!a||!d)for(b=document.getElementsByTagName("script"),m=0;m<b.length;m++){c=b[m];e=c.getAttribute("data-aloha-plugins");if(null!=e){a||(a=e);d||(d=c.src.replace(k,""));break}!d&&f.test(c.src)&&(d=c.src.replace(f,""))}"string"===typeof a&&""!==a&&(a=a.replace(/\s+/g,"").split(","));return{baseUrl:d,plugins:a||[]}}function p(){for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++)if("true"===b[c].getAttribute("data-aloha-defer-init"))return!0;
return!1}function m(b){var c={},a=[],d={},e={},f,k,m=Aloha.settings.basePath||"",l=Aloha.settings.bundles||{},p;for(p=0;p<b.length;p++){f=b[p].split("/");k=f[0];f=f[1];k=l[k]?m+l[k]:m+"../plugins/"+k;var C=c,E=k,D=f,r=["nls","css","vendor","res"],t=void 0,s=void 0;C[D]=E+"/"+D+"/lib";for(s=0;s<r.length;s++)t=r[s],C[D+"/"+t]=E+"/"+D+"/"+t;d[f]=k+"/"+f;a.push(f+"/"+f+"-plugin");e[f]={jquery:"aloha/jquery"}}return{paths:c,entryPoints:a,baseUrlByName:d,names:[],map:e}}function k(){var b={},c=Array.prototype.slice.call(arguments),
a,d,e;for(d=0;d<c.length;d++)for(a in e=c[d],e)e.hasOwnProperty(a)&&(b[a]=c[d][a]);return b}function f(b,c){define(b,function(){return c})}function c(){Aloha.features={};Aloha.defaults={};Aloha.settings=Aloha.settings||{};Aloha.initialize=e.start;var c=b(),q=m(c.plugins);Aloha.settings.baseUrl=c.baseUrl;Aloha.settings.loadedPlugins=q.names;Aloha.settings._pluginBaseUrlByName=q.baseUrlByName;c=k({aloha:{jquery:"aloha/jquery"},"aloha/jquery":{jquery:"jquery"},jqueryui:{jquery:"aloha/jquery"},vendor:{jquery:"aloha/jquery"},
util:{jquery:"aloha/jquery"},RepositoryBrowser:{jquery:"aloha/jquery"},jstree:{jquery:"aloha/jquery"},jqgrid:{jquery:"aloha/jquery"},"jqgrid-locale-en":{jquery:"aloha/jquery"},"jqgrid-locale-de":{jquery:"aloha/jquery"},"jquery-layout":{jquery:"aloha/jquery"}},q.map);c={config:{i18n:{locale:Aloha.settings.locale||"en"}},map:c};(l.__DEPS__||(l.__DEPS__={})).lang=c.config.i18n.locale;var a=k(c,Aloha.settings.requireConfig);a.paths=k({jquery:"vendor/jquery-1.7.2",jqueryui:"vendor/jquery-ui-1.9.0.custom-aloha"},
{PubSub:"vendor/pubsub/js/pubsub-unminified",Class:"vendor/class",RepositoryBrowser:"vendor/repository-browser/js/repository-browser-unminified",jstree:"vendor/jquery.jstree",jqgrid:"vendor/jquery.jqgrid","jquery-layout":"vendor/jquery.layout-1.3.0-rc30.7","jqgrid-locale-en":"vendor/grid.locale.en","jqgrid-locale-de":"vendor/grid.locale.de","repository-browser-i18n-de":"vendor/repository-browser/js/repository-browser-unminified","repository-browser-i18n-en":"vendor/repository-browser/js/repository-browser-unminified"},
q.paths,a.paths);for(var d in a.paths)a.paths[d]="../../aloha/src/lib/"+a.paths[d];d=Aloha.settings.predefinedModules||{};Aloha.settings.jQuery&&(d.jquery=Aloha.settings.jQuery);for(var n in d)d.hasOwnProperty(n)&&(f(n,d[n]),delete a.paths[n]);var v=require;Aloha.require=function(a){return 1===arguments.length&&"function"===typeof a?v(["aloha"],a):v.apply(this,arguments)};Aloha.bind=function(a,d){Aloha.require(["aloha/jquery"],function(b){Aloha.bind=function(a,d){switch(e.getReadiness(a)){case "deferred":var c=
e.getPhaseByEvent(a);c.deferred||(c.deferred=b.Deferred());c.deferred.done(d);break;case "immediate":d();break;case "normal":b(Aloha,"body").bind(a,d);break;default:throw"Unknown readiness";}return this};Aloha.bind(a,d)});return this};Aloha.trigger=function(a,d){Aloha.require(["aloha/jquery"],function(b){Aloha.trigger=function(a,d){var c=e.getPhaseByEvent(a);c&&c.deferred&&(b(c.deferred.resolve),c.deferred=null);b(Aloha,"body").trigger(a,d);return this};Aloha.trigger(a,d)});return this};Aloha.unbind=
function(a){Aloha.require(["aloha/jquery"],function(d){Aloha.unbind=function(a){d(Aloha,"body").unbind(a)};Aloha.unbind(a)})};Aloha.ready=function(a){this.bind("aloha-ready",a);return this};var y=Aloha.settings.jQuery;define("aloha/jquery",["jquery"],function(a){return y||a});Aloha.jQuery=y;define("aloha","aloha/jquery util/json2 aloha/rangy-core util/class util/lang util/range util/dom aloha/core aloha/editable aloha/console aloha/markup aloha/plugin aloha/selection aloha/command aloha/jquery.aloha aloha/sidebar util/position aloha/repositorymanager aloha/repository aloha/repositoryobjects aloha/contenthandlermanager".split(" "),
function(a){Aloha.features.jquery=!0;Aloha.jQuery=a;Aloha.settings=a.extendObjects(!0,{},Aloha.defaults,Aloha.settings);return Aloha});require(a,["aloha","aloha/jquery"],function(d,b){require(a,q.entryPoints,function(){b(function(){window.rangy.init();d.init()})})})}var e={phases:[],completed:[],start:function(b,c){e.phases=e.phases.concat(b);e.proceed(0,b,c)},proceed:function(b,c,a){if(b<c.length){var d=c[b],f=function(){e.proceed(++b,c,a)},k=function(){e.completed.push(d);d.event&&Aloha.trigger(d.event)};
d.fn?d.fn(k,f):(k(),f())}else a&&a()},getPhaseByEvent:function(b){var c;for(c=0;c<e.phases.length;c++)if(b===e.phases[c].event)return e.phases[c];return null},getReadiness:function(b){var c;for(c=0;c<e.completed.length;c++)if(b===e.completed[c].event)return"immediate";return e.getPhaseByEvent(b)?"deferred":"normal"}};l.Aloha=l.Aloha||{};l.Aloha.deferInit||p()?l.Aloha.deferInit=c:Aloha._load=c})(window);define("ui/context",["aloha","jquery","util/class"],function(l,b,p){var m;m=b("#aloha-ui-context");
m.length||(m=b("<div>",{"class":"aloha",id:"aloha-ui-context"}),b(function(){m.appendTo("body")}));l=p.extend({surfaces:[],containers:[]});b.extend(l,{selector:"#aloha-ui-context",element:m});return l});define("ui/scopes",["jquery","PubSub","util/maps"],function(l,b,p){function m(b,a){if(k.hasOwnProperty(a))for(var d=k[a],c=0;c<d.length;c++){var e=d[c];b.push(e);m(b,e)}}var k={"Aloha.empty":[],"Aloha.global":["Aloha.empty"],"Aloha.continuoustext":["Aloha.global"]},f=[],c={},e=!1;Aloha.bind("aloha-selection-changed-before",
function(){e=!1});Aloha.bind("aloha-selection-changed-after",function(b,a,d){"undefined"===typeof d||e||g.setScope("Aloha.continuoustext")});var g={enterScope:function(e,a){a=a||"_globalCounter";var d=c[e];d||(d=c[e]={});var g=d[a]||0;d[a]=g+1;g||b.pub("aloha.ui.scope.change")},leaveScope:function(e,a,d){a=a||"_globalCounter";var g=c[e];if(g){var f=g[a];f&&((f-=1)&&!d?g[a]=f:(delete g[a],p.isEmpty(g)&&delete c[e],b.pub("aloha.ui.scope.change")))}},isActiveScope:function(b){return c[b]||-1!==l.inArray(b,
f)?!0:!1},getPrimaryScope:function(){return f[0]},setScope:function(c){e=!0;f[0]!=c&&(f=[c],m(f,c),b.pub("aloha.ui.scope.change"))},createScope:function(b,a){a?"string"===typeof a&&(a=[a]):a=["Aloha.empty"];k[b]=a}};return g});define("ui/container",["jquery","util/class","ui/scopes"],function(l,b,p){function m(b,g){switch(l.type(g)){case "function":return g;case "object":if(g.scope)return f[g.scope]?f[g.scope]:f[g.scope]=function(){return p.isActiveScope(g.scope)};throw"Invalid showOn configuration";
default:return c}}var k=0,f={},c=function(){return!0};b=b.extend({element:null,_constructor:function(b,c){var f=m(this,c.showOn),a;f.showOnId||(f.showOnId=++k);a=f.showOnId;var d=b.containers[a];this.context=b;d||(d=b.containers[a]={shouldShow:f,containers:[]});d.containers.push(this)},show:function(){},hide:function(){},focus:function(){},foreground:function(){},childVisible:function(b,c){},childFocus:function(b){},childForeground:function(b){}});l.extend(b,{showContainersForContext:function(b,c){var f,
a,d;if(b.containers)for(a in d=b.containers,d)if(d.hasOwnProperty(a)){f=d[a];var n=f.containers;f=f.shouldShow(c)?"show":"hide";for(var k=void 0,k=0;k<n.length;k++)n[k][f]()}}});return b});define("ui/surface",["aloha/core","jquery","util/class","ui/container"],function(l,b,p,m){var k=p.extend({_constructor:function(b){b.surfaces.push(this)},isActive:function(){return!0}});b.extend(k,{range:null,show:function(f){b.each(f.surfaces,function(b,e){e.show()})},hide:function(f){b.each(f.surfaces,function(b,
e){e.hide()})},trackRange:function(b){b.bind("mousedown",function(b){b.originalEvent.stopSelectionUpdate=!0;l.eventHandled=!0;k.suppressHide=!0;l.activeEditable&&(b=l.getSelection(),k.range=0<b.getRangeCount()?b.getRangeAt(0):null)});b.bind("mouseup",function(b){b.originalEvent.stopSelectionUpdate=!0;l.eventHandled=!1;k.suppressHide=!1})}});return k});define("ui/component",["aloha/core","jquery","util/class"],function(l,b,p){var m=0;return p.extend({id:0,isInstance:!0,container:null,type:null,visible:!0,
_constructor:function(){this.id=m++;this.init()},adoptParent:function(b){this.container=b},init:function(){},isVisible:function(){return this.visible},show:function(b){!1===b?this.hide():this.visible||(this.visible=!0,this.element.show(),this.container&&this.container.childVisible(this,!0))},hide:function(){this.visible&&(this.visible=!1,this.element.hide(),this.container&&this.container.childVisible(this,!1))},focus:function(){this.element.focus();this.container&&this.container.childFocus(this)},
foreground:function(){this.container&&this.container.childForeground(this)},enable:function(b){},disable:function(){}})});define("jqueryui",["jquery"],function(l){(function(b,l){function m(c,g){var f,a;f=c.nodeName.toLowerCase();if("area"===f){f=c.parentNode;a=f.name;if(!c.href||!a||"map"!==f.nodeName.toLowerCase())return!1;f=b("img[usemap=#"+a+"]")[0];return!!f&&k(f)}return(/input|select|textarea|button|object/.test(f)?!c.disabled:"a"===f?c.href||g:g)&&k(c)}function k(c){return!b(c).parents().andSelf().filter(function(){return"hidden"===
b.css(this,"visibility")||b.expr.filters.hidden(this)}).length}var f=0,c=/^ui-id-\d+$/;b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),b.fn.extend({_focus:b.fn.focus,focus:function(c,g){return"number"===typeof c?this.each(function(){var f=
this;setTimeout(function(){b(f).focus();g&&g.call(f)},c)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;c=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+
b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?b(document):c},zIndex:function(c){if(c!==l)return this.css("zIndex",c);if(this.length){c=b(this[0]);for(var g;c.length&&c[0]!==document;){g=c.css("position");if("absolute"===g||"relative"===g||"fixed"===g)if(g=parseInt(c.css("zIndex"),10),!isNaN(g)&&0!==g)return g;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){c.test(this.id)&&
b(this).removeAttr("id")})}}),b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(c,g){function f(d,c,e,g){b.each(a,function(){c-=parseFloat(b.css(d,"padding"+this))||0;e&&(c-=parseFloat(b.css(d,"border"+this+"Width"))||0);g&&(c-=parseFloat(b.css(d,"margin"+this))||0)});return c}var a="Width"===g?["Left","Right"]:["Top","Bottom"],d=g.toLowerCase(),n={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+g]=function(a){return a===
l?n["inner"+g].call(this):this.each(function(){b(this).css(d,f(this,a)+"px")})};b.fn["outer"+g]=function(a,c){return"number"!==typeof a?n["outer"+g].call(this,a):this.each(function(){b(this).css(d,f(this,a,!0,c)+"px")})}}),b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(c){return function(g){return!!b.data(g,c)}}):function(c,g,f){return!!b.data(c,f[3])},focusable:function(c){return m(c,!isNaN(b.attr(c,"tabindex")))},tabbable:function(c){var g=b.attr(c,"tabindex"),f=isNaN(g);
return(f||0<=g)&&m(c,!f)}}),b(function(){var c=document.body,g=c.appendChild(g=document.createElement("div"));g.offsetHeight;b.extend(g.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===g.offsetHeight;b.support.selectstart="onselectstart"in g;c.removeChild(g).style.display="none"}),b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),
b.extend(b.ui,{plugin:{add:function(c,g,f){var a;c=b.ui[c].prototype;for(a in f)c.plugins[a]=c.plugins[a]||[],c.plugins[a].push([g,f[a]])},call:function(b,c,f){var a=b.plugins[c];if(a&&b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType)for(c=0;c<a.length;c++)b.options[a[c][0]]&&a[c][1].apply(b.element,f)}},contains:b.contains,hasScroll:function(c,g){if("hidden"===b(c).css("overflow"))return!1;var f=g&&"left"===g?"scrollLeft":"scrollTop",a=!1;if(0<c[f])return!0;c[f]=1;a=0<c[f];c[f]=0;return a},
isOverAxis:function(b,c,f){return b>c&&b<c+f},isOver:function(c,g,f,a,d,n){return b.ui.isOverAxis(c,f,d)&&b.ui.isOverAxis(g,a,n)}}))})(l);(function(b,l){var m=0,k=Array.prototype.slice,f=b.cleanData;b.cleanData=function(c){for(var e=0,g;null!=(g=c[e]);e++)try{b(g).triggerHandler("remove")}catch(k){}f(c)};b.widget=function(c,e,g){var f,a,d,n,k=c.split(".")[0];c=c.split(".")[1];f=k+"-"+c;g||(g=e,e=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[k]=b[k]||{};a=b[k][c];d=b[k][c]=
function(a,b){if(!this._createWidget)return new d(a,b);arguments.length&&this._createWidget(a,b)};b.extend(d,a,{version:g.version,_proto:b.extend({},g),_childConstructors:[]});n=new e;n.options=b.widget.extend({},n.options);b.each(g,function(a,d){b.isFunction(d)&&(g[a]=function(){var b=function(){return e.prototype[a].apply(this,arguments)},c=function(d){return e.prototype[a].apply(this,d)};return function(){var a=this._super,e=this._superApply,g;this._super=b;this._superApply=c;g=d.apply(this,arguments);
this._super=a;this._superApply=e;return g}}())});d.prototype=b.widget.extend(n,{widgetEventPrefix:c},g,{constructor:d,namespace:k,widgetName:c,widgetBaseClass:f,widgetFullName:f});a?(b.each(a._childConstructors,function(a,c){var e=c.prototype;b.widget(e.namespace+"."+e.widgetName,d,c._proto)}),delete a._childConstructors):e._childConstructors.push(d);b.widget.bridge(c,d)};b.widget.extend=function(c){for(var e=k.call(arguments,1),g=0,f=e.length,a,d;g<f;g++)for(a in e[g])d=e[g][a],e[g].hasOwnProperty(a)&&
d!==l&&(c[a]=b.isPlainObject(d)?b.widget.extend({},c[a],d):d);return c};b.widget.bridge=function(c,e){var g=e.prototype.widgetFullName;b.fn[c]=function(f){var a="string"===typeof f,d=k.call(arguments,1),n=this;f=!a&&d.length?b.widget.extend.apply(null,[f].concat(d)):f;a?this.each(function(){var a,e=b.data(this,g);if(!e)return b.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+f+"'");if(!b.isFunction(e[f])||"_"===f.charAt(0))return b.error("no such method '"+
f+"' for "+c+" widget instance");a=e[f].apply(e,d);if(a!==e&&a!==l)return n=a&&a.jquery?n.pushStack(a.get()):a,!1}):this.each(function(){var a=b.data(this,g);a?a.option(f||{})._init():new e(f,this)});return n}};b.Widget=function(b,e){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,e){e=b(e||this.defaultElement||this)[0];this.element=b(e);this.uuid=m++;this.eventNamespace=
"."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),c);this.bindings=b();this.hoverable=b();this.focusable=b();e!==this&&(b.data(e,this.widgetName,this),b.data(e,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=b(e.style?e.ownerDocument:e.document||e),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,
_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:b.noop,widget:function(){return this.element},option:function(c,e){var g=c,f,a,d;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof c)if(g={},f=c.split("."),c=f.shift(),f.length){a=g[c]=b.widget.extend({},this.options[c]);for(d=0;d<f.length-1;d++)a[f[d]]=a[f[d]]||{},a=a[f[d]];c=f.pop();if(e===l)return a[c]===l?null:a[c];a[c]=e}else{if(e===l)return this.options[c]===l?null:this.options[c];g[c]=e}this._setOptions(g);return this},_setOptions:function(b){for(var e in b)this._setOption(e,
b[e]);return this},_setOption:function(b,e){this.options[b]=e;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,e){e?(c=b(c),this.bindings=this.bindings.add(c)):(e=c,c=this.element);var g=this;b.each(e,
function(e,a){function d(){if(!0!==g.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof a?g[a]:a).apply(g,arguments)}"string"!==typeof a&&(d.guid=a.guid=a.guid||d.guid||b.guid++);var f=e.match(/^(\w+)\s*(.*)$/),k=f[1]+g.eventNamespace;(f=f[2])?g.widget().delegate(f,k,d):c.bind(k,d)})},_off:function(b,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(e).undelegate(e)},_delay:function(b,e){var g=this;return setTimeout(function(){return("string"===
typeof b?g[b]:b).apply(g,arguments)},e||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){b(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){b(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){b(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){b(c.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(c,e,g){var f,
a=this.options[c];g=g||{};e=b.Event(e);e.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();e.target=this.element[0];if(c=e.originalEvent)for(f in c)f in e||(e[f]=c[f]);this.element.trigger(e,g);return!(b.isFunction(a)&&!1===a.apply(this.element[0],[e].concat(g))||e.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(c,e){b.Widget.prototype["_"+c]=function(g,f,a){"string"===typeof f&&(f={effect:f});var d,n=f?!0===f||"number"===typeof f?e:f.effect||e:c;f=
f||{};"number"===typeof f&&(f={duration:f});d=!b.isEmptyObject(f);f.complete=a;f.delay&&g.delay(f.delay);if(d&&b.effects&&(b.effects.effect[n]||!1!==b.uiBackCompat&&b.effects[n]))g[c](f);else if(n!==c&&g[n])g[n](f.duration,f.easing,a);else g.queue(function(d){b(this)[c]();a&&a.call(g[0]);d()})}});!1!==b.uiBackCompat&&(b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]})})(l);(function(b,l){var m=!1;b(document).mouseup(function(b){m=
!1});b.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var k=this;this.element.bind("mousedown."+this.widgetName,function(b){return k._mouseDown(b)}).bind("click."+this.widgetName,function(f){if(!0===b.data(f.target,k.widgetName+".preventClickEvent"))return b.removeData(f.target,k.widgetName+".preventClickEvent"),f.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);
this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(k){if(!m){this._mouseStarted&&this._mouseUp(k);this._mouseDownEvent=k;var f=this,c=1===k.which,e="string"===typeof this.options.cancel&&k.target.nodeName?b(k.target).closest(this.options.cancel).length:!1;if(!c||e||!this._mouseCapture(k))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){f.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&(this._mouseStarted=!1!==this._mouseStart(k),!this._mouseStarted))return k.preventDefault(),!0;!0===b.data(k.target,this.widgetName+".preventClickEvent")&&b.removeData(k.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return f._mouseMove(b)};this._mouseUpDelegate=function(b){return f._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);k.preventDefault();return m=!0}},_mouseMove:function(k){if(b.browser.msie&&!(9<=document.documentMode||k.button))return this._mouseUp(k);if(this._mouseStarted)return this._mouseDrag(k),k.preventDefault();this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,k))?this._mouseDrag(k):this._mouseUp(k));return!this._mouseStarted},_mouseUp:function(k){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,k.target===this._mouseDownEvent.target&&b.data(k.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(k));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return!0}})})(l);
(function(b,p){function m(a,d,b){return[parseInt(a[0],10)*(n.test(a[0])?d/100:1),parseInt(a[1],10)*(n.test(a[1])?b/100:1)]}b.ui=b.ui||{};var k,f=Math.max,c=Math.abs,e=Math.round,g=/left|center|right/,q=/top|center|bottom/,a=/[\+\-]\d+%?/,d=/^\w+/,n=/%$/,v=b.fn.position;b.position={scrollbarWidth:function(){if(k!==p)return k;var a,d,c=b("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");d=c.children()[0];b("body").append(c);a=d.offsetWidth;
c.css("overflow","scroll");d=d.offsetWidth;a===d&&(d=c[0].clientWidth);c.remove();return k=a-d},getScrollInfo:function(a){var d=a.isWindow?"":a.element.css("overflow-x"),c=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight;return{width:"scroll"===d||"auto"===d&&a.width<a.element[0].scrollWidth?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=b(a||window);var d=b.isWindow(a[0]);return{element:a,
isWindow:d,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:d?a.width():a.outerWidth(),height:d?a.height():a.outerHeight()}}};b.fn.position=function(n){if(!n||!n.of)return v.apply(this,arguments);n=b.extend({},n);var k,l,p,C,E,D=b(n.of),r=b.position.getWithinInfo(n.within),t=b.position.getScrollInfo(r),s=D[0],u=(n.collision||"flip").split(" "),Z={};9===s.nodeType?(l=D.width(),p=D.height(),C={top:0,left:0}):b.isWindow(s)?(l=D.width(),p=D.height(),C={top:D.scrollTop(),
left:D.scrollLeft()}):s.preventDefault?(n.at="left top",l=p=0,C={top:s.pageY,left:s.pageX}):(l=D.outerWidth(),p=D.outerHeight(),C=D.offset());E=b.extend({},C);b.each(["my","at"],function(){var b=(n[this]||"").split(" "),c,e;1===b.length&&(b=g.test(b[0])?b.concat(["center"]):q.test(b[0])?["center"].concat(b):["center","center"]);b[0]=g.test(b[0])?b[0]:"center";b[1]=q.test(b[1])?b[1]:"center";c=a.exec(b[0]);e=a.exec(b[1]);Z[this]=[c?c[0]:0,e?e[0]:0];n[this]=[d.exec(b[0])[0],d.exec(b[1])[0]]});1===u.length&&
(u[1]=u[0]);"right"===n.at[0]?E.left+=l:"center"===n.at[0]&&(E.left+=l/2);"bottom"===n.at[1]?E.top+=p:"center"===n.at[1]&&(E.top+=p/2);k=m(Z.at,l,p);E.left+=k[0];E.top+=k[1];return this.each(function(){var a,d,g=b(this),q=g.outerWidth(),v=g.outerHeight(),s=parseInt(b.css(this,"marginLeft"),10)||0,T=parseInt(b.css(this,"marginTop"),10)||0,ba=q+s+(parseInt(b.css(this,"marginRight"),10)||0)+t.width,V=v+T+(parseInt(b.css(this,"marginBottom"),10)||0)+t.height,M=b.extend({},E),U=m(Z.my,g.outerWidth(),g.outerHeight());
"right"===n.my[0]?M.left-=q:"center"===n.my[0]&&(M.left-=q/2);"bottom"===n.my[1]?M.top-=v:"center"===n.my[1]&&(M.top-=v/2);M.left+=U[0];M.top+=U[1];b.support.offsetFractions||(M.left=e(M.left),M.top=e(M.top));a={marginLeft:s,marginTop:T};b.each(["left","top"],function(d,c){if(b.ui.position[u[d]])b.ui.position[u[d]][c](M,{targetWidth:l,targetHeight:p,elemWidth:q,elemHeight:v,collisionPosition:a,collisionWidth:ba,collisionHeight:V,offset:[k[0]+U[0],k[1]+U[1]],my:n.my,at:n.at,within:r,elem:g})});b.fn.bgiframe&&
g.bgiframe();n.using&&(d=function(a){var d=C.left-M.left,b=d+l-q,e=C.top-M.top,k=e+p-v,m={target:{element:D,left:C.left,top:C.top,width:l,height:p},element:{element:g,left:M.left,top:M.top,width:q,height:v},horizontal:0>b?"left":0<d?"right":"center",vertical:0>k?"top":0<e?"bottom":"middle"};l<q&&c(d+b)<l&&(m.horizontal="center");p<v&&c(e+k)<p&&(m.vertical="middle");f(c(d),c(b))>f(c(e),c(k))?m.important="horizontal":m.important="vertical";n.using.call(this,a,m)});g.offset(b.extend(M,{using:d}))})};
b.ui.position={fit:{left:function(a,d){var b=d.within,c=b.isWindow?b.scrollLeft:b.offset.left,e=b.width,g=a.left-d.collisionPosition.marginLeft,b=c-g,n=g+d.collisionWidth-e-c;d.collisionWidth>e?0<b&&0>=n?(c=a.left+b+d.collisionWidth-e-c,a.left+=b-c):a.left=0<n&&0>=b?c:b>n?c+e-d.collisionWidth:c:a.left=0<b?a.left+b:0<n?a.left-n:f(a.left-g,a.left)},top:function(a,d){var b=d.within,c=b.isWindow?b.scrollTop:b.offset.top,e=d.within.height,g=a.top-d.collisionPosition.marginTop,b=c-g,n=g+d.collisionHeight-
e-c;d.collisionHeight>e?0<b&&0>=n?(c=a.top+b+d.collisionHeight-e-c,a.top+=b-c):a.top=0<n&&0>=b?c:b>n?c+e-d.collisionHeight:c:a.top=0<b?a.top+b:0<n?a.top-n:f(a.top-g,a.top)}},flip:{left:function(a,d){var b=d.within,e=b.offset.left+b.scrollLeft,g=b.width,f=b.isWindow?b.scrollLeft:b.offset.left,n=a.left-d.collisionPosition.marginLeft,b=n-f,k=n+d.collisionWidth-g-f,n="left"===d.my[0]?-d.elemWidth:"right"===d.my[0]?d.elemWidth:0,q="left"===d.at[0]?d.targetWidth:"right"===d.at[0]?-d.targetWidth:0,m=-2*
d.offset[0];if(0>b){if(e=a.left+n+q+m+d.collisionWidth-g-e,0>e||e<c(b))a.left+=n+q+m}else 0<k&&(e=a.left-d.collisionPosition.marginLeft+n+q+m-f,0<e||c(e)<k)&&(a.left+=n+q+m)},top:function(a,d){var b=d.within,e=b.offset.top+b.scrollTop,g=b.height,f=b.isWindow?b.scrollTop:b.offset.top,n=a.top-d.collisionPosition.marginTop,b=n-f,k=n+d.collisionHeight-g-f,n="top"===d.my[1]?-d.elemHeight:"bottom"===d.my[1]?d.elemHeight:0,q="top"===d.at[1]?d.targetHeight:"bottom"===d.at[1]?-d.targetHeight:0,m=-2*d.offset[1];
0>b?(e=a.top+n+q+m+d.collisionHeight-g-e,a.top+n+q+m>b&&(0>e||e<c(b))&&(a.top+=n+q+m)):0<k&&(e=a.top-d.collisionPosition.marginTop+n+q+m-f,a.top+n+q+m>k&&(0<e||c(e)<k)&&(a.top+=n+q+m))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,d,c,e,g=document.getElementsByTagName("body")[0];c=document.createElement("div");
a=document.createElement(g?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&b.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in d)a.style[e]=d[e];a.appendChild(c);d=g||document.documentElement;d.insertBefore(a,d.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=b(c).offset().left;b.support.offsetFractions=10<c&&11>c;a.innerHTML="";d.removeChild(a)})();!1!==b.uiBackCompat&&function(a){var d=a.fn.position;a.fn.position=
function(b){if(!b||!b.offset)return d.call(this,b);var c=b.offset.split(" "),e=b.at.split(" ");1===c.length&&(c[1]=c[0]);/^\d/.test(c[0])&&(c[0]="+"+c[0]);/^\d/.test(c[1])&&(c[1]="+"+c[1]);1===e.length&&(/left|center|right/.test(e[0])?e[1]="center":(e[1]=e[0],e[0]="center"));return d.call(this,a.extend(b,{at:e[0]+c[0]+" "+e[1]+c[1],offset:p}))}}(l)})(l);(function(b,l){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,
containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&
this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(m){var k=this.options;if(this.helper||k.disabled||b(m.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(m);if(!this.handle)return!1;b(!0===k.iframeFix?"iframe":k.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(m){var k=this.options;this.helper=this._createHelper(m);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();b.ui.ddmanager&&(b.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:m.pageX-this.offset.left,top:m.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(m);this.originalPageX=m.pageX;this.originalPageY=m.pageY;k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt);k.containment&&this._setContainment();if(!1===this._trigger("start",m))return this._clear(),!1;this._cacheHelperProportions();
b.ui.ddmanager&&!k.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,m);this._mouseDrag(m,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,m);return!0},_mouseDrag:function(m,k){this.position=this._generatePosition(m);this.positionAbs=this._convertPositionTo("absolute");if(!k){var f=this._uiHash();if(!1===this._trigger("drag",m,f))return this._mouseUp({}),!1;this.position=f.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==
this.options.axis||(this.helper[0].style.top=this.position.top+"px");b.ui.ddmanager&&b.ui.ddmanager.drag(this,m);return!1},_mouseStop:function(m){var k=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(k=b.ui.ddmanager.drop(this,m));this.dropped&&(k=this.dropped,this.dropped=!1);for(var f=this.element[0],c=!1;f&&(f=f.parentNode);)f==document&&(c=!0);if(!c&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!k||"valid"==this.options.revert&&k||!0===this.options.revert||b.isFunction(this.options.revert)&&
this.options.revert.call(this.element,k)){var e=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",m)&&e._clear()})}else!1!==this._trigger("stop",m)&&this._clear();return!1},_mouseUp:function(m){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,m);return b.ui.mouse.prototype._mouseUp.call(this,m)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(m){var k=this.options.handle&&b(this.options.handle,this.element).length?!1:!0;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==m.target&&(k=!0)});return k},_createHelper:function(m){var k=this.options;m=b.isFunction(k.helper)?b(k.helper.apply(this.element[0],[m])):"clone"==k.helper?this.element.clone().removeAttr("id"):this.element;m.parents("body").length||m.appendTo("parent"==k.appendTo?this.element[0].parentNode:
k.appendTo);m[0]==this.element[0]||/(fixed|absolute)/.test(m.css("position"))||m.css("position","absolute");return m},_adjustOffsetFromHelper:function(m){"string"==typeof m&&(m=m.split(" "));b.isArray(m)&&(m={left:+m[0],top:+m[1]||0});"left"in m&&(this.offset.click.left=m.left+this.margins.left);"right"in m&&(this.offset.click.left=this.helperProportions.width-m.right+this.margins.left);"top"in m&&(this.offset.click.top=m.top+this.margins.top);"bottom"in m&&(this.offset.click.top=this.helperProportions.height-
m.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var m=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(m.left+=this.scrollParent.scrollLeft(),m.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)m={top:0,left:0};return{top:m.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:m.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),
10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var m=this.options;"parent"==m.containment&&(m.containment=this.helper[0].parentNode);if("document"==m.containment||"window"==m.containment)this.containment=["document"==m.containment?0:b(window).scrollLeft()-this.offset.relative.left-
this.offset.parent.left,"document"==m.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==m.containment?0:b(window).scrollLeft())+b("document"==m.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==m.containment?0:b(window).scrollTop())+(b("document"==m.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(m.containment)||
m.containment.constructor==Array)m.containment.constructor==Array&&(this.containment=m.containment);else{var m=b(m.containment),k=m[0];if(k){m.offset();var f="hidden"!=b(k).css("overflow");this.containment=[(parseInt(b(k).css("borderLeftWidth"),10)||0)+(parseInt(b(k).css("paddingLeft"),10)||0),(parseInt(b(k).css("borderTopWidth"),10)||0)+(parseInt(b(k).css("paddingTop"),10)||0),(f?Math.max(k.scrollWidth,k.offsetWidth):k.offsetWidth)-(parseInt(b(k).css("borderLeftWidth"),10)||0)-(parseInt(b(k).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(b(k).css("borderTopWidth"),10)||0)-(parseInt(b(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=m}}},_convertPositionTo:function(m,k){k||(k=this.position);var f="absolute"==m?1:-1,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?
this.scrollParent:this.offsetParent,e=/(html|body)/i.test(c[0].tagName);return{top:k.top+this.offset.relative.top*f+this.offset.parent.top*f-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop())*f,left:k.left+this.offset.relative.left*f+this.offset.parent.left*f-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*f}},_generatePosition:function(m){var k=this.options,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(f[0].tagName),e=m.pageX,g=m.pageY;if(this.originalPosition){var q;this.containment&&(this.relative_container?(q=this.relative_container.offset(),q=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]):q=this.containment,m.pageX-this.offset.click.left<q[0]&&(e=q[0]+this.offset.click.left),m.pageY-this.offset.click.top<q[1]&&(g=q[1]+this.offset.click.top),m.pageX-this.offset.click.left>
q[2]&&(e=q[2]+this.offset.click.left),m.pageY-this.offset.click.top>q[3]&&(g=q[3]+this.offset.click.top));k.grid&&(g=k.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/k.grid[1])*k.grid[1]:this.originalPageY,g=q?g-this.offset.click.top<q[1]||g-this.offset.click.top>q[3]?g-this.offset.click.top<q[1]?g+k.grid[1]:g-k.grid[1]:g:g,e=k.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/k.grid[0])*k.grid[0]:this.originalPageX,e=q?e-this.offset.click.left<q[0]||e-this.offset.click.left>
q[2]?e-this.offset.click.left<q[0]?e+k.grid[0]:e-k.grid[0]:e:e)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():c?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():c?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||
this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(m,k,f){f=f||this._uiHash();b.ui.plugin.call(this,m,[k,f]);"drag"==m&&(this.positionAbs=this._convertPositionTo("absolute"));return b.Widget.prototype._trigger.call(this,m,k,f)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(m,k){var f=b(this).data("draggable"),
c=f.options,e=b.extend({},k,{item:f.element});f.sortables=[];b(c.connectToSortable).each(function(){var c=b.data(this,"sortable");c&&!c.options.disabled&&(f.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",m,e))})},stop:function(m,k){var f=b(this).data("draggable"),c=b.extend({},k,{item:f.element});b.each(f.sortables,function(){this.instance.isOver?(this.instance.isOver=0,f.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&
(this.instance.options.revert=!0),this.instance._mouseStop(m),this.instance.options.helper=this.instance.options._helper,"original"==f.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",m,c))})},drag:function(m,k){var f=b(this).data("draggable"),c=this;b.each(f.sortables,function(e){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;
this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(c).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return k.helper[0]},m.target=this.instance.currentItem[0],this.instance._mouseCapture(m,!0),this.instance._mouseStart(m,!0,!0),this.instance.offset.click.top=f.offset.click.top,this.instance.offset.click.left=
f.offset.click.left,this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top,f._trigger("toSortable",m),f.dropped=this.instance.element,f.currentItem=f.element,this.instance.fromOutside=f),this.instance.currentItem&&this.instance._mouseDrag(m)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",
m,this.instance._uiHash(this.instance)),this.instance._mouseStop(m,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),f._trigger("fromSortable",m),f.dropped=!1)})}});b.ui.plugin.add("draggable","cursor",{start:function(m,k){var f=b("body"),c=b(this).data("draggable").options;f.css("cursor")&&(c._cursor=f.css("cursor"));f.css("cursor",c.cursor)},stop:function(m,k){var f=b(this).data("draggable").options;
f._cursor&&b("body").css("cursor",f._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(m,k){var f=b(k.helper),c=b(this).data("draggable").options;f.css("opacity")&&(c._opacity=f.css("opacity"));f.css("opacity",c.opacity)},stop:function(m,k){var f=b(this).data("draggable").options;f._opacity&&b(k.helper).css("opacity",f._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(m,k){var f=b(this).data("draggable");f.scrollParent[0]!=document&&"HTML"!=f.scrollParent[0].tagName&&
(f.overflowOffset=f.scrollParent.offset())},drag:function(m,k){var f=b(this).data("draggable"),c=f.options,e=!1;f.scrollParent[0]!=document&&"HTML"!=f.scrollParent[0].tagName?(c.axis&&"x"==c.axis||(f.overflowOffset.top+f.scrollParent[0].offsetHeight-m.pageY<c.scrollSensitivity?f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop+c.scrollSpeed:m.pageY-f.overflowOffset.top<c.scrollSensitivity&&(f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop-c.scrollSpeed)),c.axis&&"y"==c.axis||(f.overflowOffset.left+
f.scrollParent[0].offsetWidth-m.pageX<c.scrollSensitivity?f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft+c.scrollSpeed:m.pageX-f.overflowOffset.left<c.scrollSensitivity&&(f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft-c.scrollSpeed))):(c.axis&&"x"==c.axis||(m.pageY-b(document).scrollTop()<c.scrollSensitivity?e=b(document).scrollTop(b(document).scrollTop()-c.scrollSpeed):b(window).height()-(m.pageY-b(document).scrollTop())<c.scrollSensitivity&&(e=b(document).scrollTop(b(document).scrollTop()+
c.scrollSpeed))),c.axis&&"y"==c.axis||(m.pageX-b(document).scrollLeft()<c.scrollSensitivity?e=b(document).scrollLeft(b(document).scrollLeft()-c.scrollSpeed):b(window).width()-(m.pageX-b(document).scrollLeft())<c.scrollSensitivity&&(e=b(document).scrollLeft(b(document).scrollLeft()+c.scrollSpeed))));!1!==e&&b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(f,m)}});b.ui.plugin.add("draggable","snap",{start:function(m,k){var f=b(this).data("draggable"),c=f.options;f.snapElements=[];b(c.snap.constructor!=
String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=b(this),g=c.offset();this!=f.element[0]&&f.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:g.top,left:g.left})})},drag:function(m,k){for(var f=b(this).data("draggable"),c=f.options,e=c.snapTolerance,g=k.offset.left,q=g+f.helperProportions.width,a=k.offset.top,d=a+f.helperProportions.height,n=f.snapElements.length-1;0<=n;n--){var l=f.snapElements[n].left,p=l+f.snapElements[n].width,A=f.snapElements[n].top,
z=A+f.snapElements[n].height;if(l-e<g&&g<p+e&&A-e<a&&a<z+e||l-e<g&&g<p+e&&A-e<d&&d<z+e||l-e<q&&q<p+e&&A-e<a&&a<z+e||l-e<q&&q<p+e&&A-e<d&&d<z+e){if("inner"!=c.snapMode){var B=Math.abs(A-d)<=e,C=Math.abs(z-a)<=e,E=Math.abs(l-q)<=e,D=Math.abs(p-g)<=e;B&&(k.position.top=f._convertPositionTo("relative",{top:A-f.helperProportions.height,left:0}).top-f.margins.top);C&&(k.position.top=f._convertPositionTo("relative",{top:z,left:0}).top-f.margins.top);E&&(k.position.left=f._convertPositionTo("relative",{top:0,
left:l-f.helperProportions.width}).left-f.margins.left);D&&(k.position.left=f._convertPositionTo("relative",{top:0,left:p}).left-f.margins.left)}var r=B||C||E||D;"outer"!=c.snapMode&&(B=Math.abs(A-a)<=e,C=Math.abs(z-d)<=e,E=Math.abs(l-g)<=e,D=Math.abs(p-q)<=e,B&&(k.position.top=f._convertPositionTo("relative",{top:A,left:0}).top-f.margins.top),C&&(k.position.top=f._convertPositionTo("relative",{top:z-f.helperProportions.height,left:0}).top-f.margins.top),E&&(k.position.left=f._convertPositionTo("relative",
{top:0,left:l}).left-f.margins.left),D&&(k.position.left=f._convertPositionTo("relative",{top:0,left:p-f.helperProportions.width}).left-f.margins.left));!f.snapElements[n].snapping&&(B||C||E||D||r)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,m,b.extend(f._uiHash(),{snapItem:f.snapElements[n].item}));f.snapElements[n].snapping=B||C||E||D||r}else f.snapElements[n].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,m,b.extend(f._uiHash(),{snapItem:f.snapElements[n].item})),
f.snapElements[n].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(m,k){var f=b(this).data("draggable").options,f=b.makeArray(b(f.stack)).sort(function(c,g){return(parseInt(b(c).css("zIndex"),10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});if(f.length){var c=parseInt(f[0].style.zIndex)||0;b(f).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+f.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(m,k){var f=b(k.helper),c=b(this).data("draggable").options;
f.css("zIndex")&&(c._zIndex=f.css("zIndex"));f.css("zIndex",c.zIndex)},stop:function(m,k){var f=b(this).data("draggable").options;f._zIndex&&b(k.helper).css("zIndex",f._zIndex)}})})(l);(function(b,l){b.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var m=this.options,k=m.accept;this.isover=0;this.isout=1;this.accept=b.isFunction(k)?k:function(b){return b.is(k)};
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[m.scope]=b.ui.ddmanager.droppables[m.scope]||[];b.ui.ddmanager.droppables[m.scope].push(this);m.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var m=b.ui.ddmanager.droppables[this.options.scope],k=0;k<m.length;k++)m[k]==this&&m.splice(k,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(m,k){"accept"==m&&(this.accept=b.isFunction(k)?
k:function(b){return b.is(k)});b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(m){var k=b.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);k&&this._trigger("activate",m,this.ui(k))},_deactivate:function(m){var k=b.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);k&&this._trigger("deactivate",m,this.ui(k))},_over:function(m){var k=b.ui.ddmanager.current;k&&(k.currentItem||k.element)[0]!=
this.element[0]&&this.accept.call(this.element[0],k.currentItem||k.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",m,this.ui(k)))},_out:function(m){var k=b.ui.ddmanager.current;k&&(k.currentItem||k.element)[0]!=this.element[0]&&this.accept.call(this.element[0],k.currentItem||k.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",m,this.ui(k)))},_drop:function(m,k){var f=k||b.ui.ddmanager.current;
if(!f||(f.currentItem||f.element)[0]==this.element[0])return!1;var c=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=b.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==f.options.scope&&e.accept.call(e.element[0],f.currentItem||f.element)&&b.ui.intersect(f,b.extend(e,{offset:e.element.offset()}),e.options.tolerance))return c=!0,!1});return c?!1:this.accept.call(this.element[0],f.currentItem||f.element)?(this.options.activeClass&&
this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",m,this.ui(f)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});b.ui.intersect=function(m,k,f){if(!k.offset)return!1;var c=(m.positionAbs||m.position.absolute).left,e=c+m.helperProportions.width,g=(m.positionAbs||m.position.absolute).top,q=g+m.helperProportions.height,
a=k.offset.left,d=a+k.proportions.width,n=k.offset.top,l=n+k.proportions.height;switch(f){case "fit":return a<=c&&e<=d&&n<=g&&q<=l;case "intersect":return a<c+m.helperProportions.width/2&&e-m.helperProportions.width/2<d&&n<g+m.helperProportions.height/2&&q-m.helperProportions.height/2<l;case "pointer":return b.ui.isOver((m.positionAbs||m.position.absolute).top+(m.clickOffset||m.offset.click).top,(m.positionAbs||m.position.absolute).left+(m.clickOffset||m.offset.click).left,n,a,k.proportions.height,
k.proportions.width);case "touch":return(g>=n&&g<=l||q>=n&&q<=l||g<n&&q>l)&&(c>=a&&c<=d||e>=a&&e<=d||c<a&&e>d);default:return!1}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,k){var f=b.ui.ddmanager.droppables[m.options.scope]||[],c=k?k.type:null,e=(m.currentItem||m.element).find(":data(droppable)").andSelf(),g=0;a:for(;g<f.length;g++)if(!(f[g].options.disabled||m&&!f[g].accept.call(f[g].element[0],m.currentItem||m.element))){for(var q=0;q<e.length;q++)if(e[q]==
f[g].element[0]){f[g].proportions.height=0;continue a}f[g].visible="none"!=f[g].element.css("display");f[g].visible&&("mousedown"==c&&f[g]._activate.call(f[g],k),f[g].offset=f[g].element.offset(),f[g].proportions={width:f[g].element[0].offsetWidth,height:f[g].element[0].offsetHeight})}},drop:function(m,k){var f=!1;b.each(b.ui.ddmanager.droppables[m.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&b.ui.intersect(m,this,this.options.tolerance)&&(f=this._drop.call(this,
k)||f),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],m.currentItem||m.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,k)))});return f},dragStart:function(m,k){m.element.parentsUntil("body").bind("scroll.droppable",function(){m.options.refreshPositions||b.ui.ddmanager.prepareOffsets(m,k)})},drag:function(m,k){m.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(m,k);b.each(b.ui.ddmanager.droppables[m.options.scope]||[],function(){if(!this.options.disabled&&
!this.greedyChild&&this.visible){var f=b.ui.intersect(m,this,this.options.tolerance);if(f=f||1!=this.isover?f&&0==this.isover?"isover":null:"isout"){var c;if(this.options.greedy){var e=this.options.scope,g=this.element.parents(":data(droppable)").filter(function(){return b.data(this,"droppable").options.scope===e});g.length&&(c=b.data(g[0],"droppable"),c.greedyChild="isover"==f?1:0)}c&&"isover"==f&&(c.isover=0,c.isout=1,c._out.call(c,k));this[f]=1;this["isout"==f?"isover":"isout"]=0;this["isover"==
f?"_over":"_out"].call(this,k);c&&"isout"==f&&(c.isout=0,c.isover=1,c._over.call(c,k))}}})},dragStop:function(m,k){m.element.parentsUntil("body").unbind("scroll.droppable");m.options.refreshPositions||b.ui.ddmanager.prepareOffsets(m,k)}}})(l);(function(b,l){b.widget("ui.resizable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,
maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,c=this.options;this.element.addClass("ui-resizable");b.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,
marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=c.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",
sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var e=this.handles.split(",");this.handles={};for(var g=0;g<e.length;g++){var k=b.trim(e[g]),a=b('<div class="ui-resizable-handle ui-resizable-'+k+'"></div>');a.css({zIndex:c.zIndex});"se"==k&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[k]=".ui-resizable-"+k;this.element.append(a)}}this._renderAxis=function(a){a=
a||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=b(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var e=b(this.handles[c],this.element),g=0,g=/sw|ne|nw|se|n|s/.test(c)?e.outerHeight():e.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");a.css(e,g);this._proportionallyResize()}b(this.handles[c])}};
this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!f.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=a&&a[1]?a[1]:"se"}});c.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){c.disabled||(b(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){c.disabled||f.resizing||(b(this).addClass("ui-resizable-autohide"),
f._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var f=function(c){b(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}this.originalElement.css("resize",
this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(f){var c=!1,e;for(e in this.handles)b(this.handles[e])[0]==f.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(f){var c=this.options,e=this.element.position(),g=this.element;this.resizing=!0;this.documentScroll={top:b(document).scrollTop(),left:b(document).scrollLeft()};(g.is(".ui-draggable")||/absolute/.test(g.css("position")))&&g.css({position:"absolute",top:e.top,left:e.left});this._renderProxy();
var e=m(this.helper.css("left")),k=m(this.helper.css("top"));c.containment&&(e+=b(c.containment).scrollLeft()||0,k+=b(c.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:e,top:k};this.size=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalPosition={left:e,top:k};this.sizeDiff={width:g.outerWidth()-
g.width(),height:g.outerHeight()-g.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio="number"==typeof c.aspectRatio?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;c=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor","auto"==c?this.axis+"-resize":c);g.addClass("ui-resizable-resizing");this._propagate("start",f);return!0},_mouseDrag:function(b){var c=this.helper,e=this.originalMousePosition,g=this._change[this.axis];if(!g)return!1;e=
g.apply(this,[b,b.pageX-e.left||0,b.pageY-e.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)e=this._updateRatio(e,b);e=this._respectSize(e,b);this._propagate("resize",b);c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(e);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(f){this.resizing=
!1;var c=this.options;if(this._helper){var e=this._proportionallyResizeElements,g=e.length&&/textarea/i.test(e[0].nodeName),e=g&&b.ui.hasScroll(e[0],"left")?0:this.sizeDiff.height,g=g?0:this.sizeDiff.width,g={width:this.helper.width()-g,height:this.helper.height()-e},e=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,k=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;c.animate||this.element.css(b.extend(g,{top:k,left:e}));
this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!c.animate&&this._proportionallyResize()}b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",f);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var c=this.options,e,g,q,c={minWidth:k(c.minWidth)?c.minWidth:0,maxWidth:k(c.maxWidth)?c.maxWidth:Infinity,minHeight:k(c.minHeight)?c.minHeight:0,maxHeight:k(c.maxHeight)?c.maxHeight:Infinity};
if(this._aspectRatio||b)b=c.minHeight*this.aspectRatio,g=c.minWidth/this.aspectRatio,e=c.maxHeight*this.aspectRatio,q=c.maxWidth/this.aspectRatio,b>c.minWidth&&(c.minWidth=b),g>c.minHeight&&(c.minHeight=g),e<c.maxWidth&&(c.maxWidth=e),q<c.maxHeight&&(c.maxHeight=q);this._vBoundaries=c},_updateCache:function(b){this.offset=this.helper.offset();k(b.left)&&(this.position.left=b.left);k(b.top)&&(this.position.top=b.top);k(b.height)&&(this.size.height=b.height);k(b.width)&&(this.size.width=b.width)},_updateRatio:function(b,
c){var e=this.position,g=this.size,q=this.axis;k(b.height)?b.width=b.height*this.aspectRatio:k(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==q&&(b.left=e.left+(g.width-b.width),b.top=null);"nw"==q&&(b.top=e.top+(g.height-b.height),b.left=e.left+(g.width-b.width));return b},_respectSize:function(b,c){var e=this._vBoundaries,g=this.axis,q=k(b.width)&&e.maxWidth&&e.maxWidth<b.width,a=k(b.height)&&e.maxHeight&&e.maxHeight<b.height,d=k(b.width)&&e.minWidth&&e.minWidth>b.width,n=k(b.height)&&e.minHeight&&
e.minHeight>b.height;d&&(b.width=e.minWidth);n&&(b.height=e.minHeight);q&&(b.width=e.maxWidth);a&&(b.height=e.maxHeight);var m=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,p=/sw|nw|w/.test(g),g=/nw|ne|n/.test(g);d&&p&&(b.left=m-e.minWidth);q&&p&&(b.left=m-e.maxWidth);n&&g&&(b.top=l-e.minHeight);a&&g&&(b.top=l-e.maxHeight);(e=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:e&&!b.top&&b.left&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=
this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var e=this._proportionallyResizeElements[c];if(!this.borderDif){var g=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],k=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=b.map(g,function(a,d){var b=parseInt(a,10)||0,c=parseInt(k[d],10)||0;return b+c})}e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||
0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||b('<div style="overflow:hidden;"></div>');var c=b.browser.msie&&7>b.browser.version,e=c?1:0,c=c?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++f.zIndex});
this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,c,e){return{width:this.originalSize.width+c}},w:function(b,c,e){return{left:this.originalPosition.left+c,width:this.originalSize.width-c}},n:function(b,c,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(b,c,e){return{height:this.originalSize.height+e}},se:function(f,c,e){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,c,e]))},
sw:function(f,c,e){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,c,e]))},ne:function(f,c,e){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,c,e]))},nw:function(f,c,e){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,c,e]))}},_propagate:function(f,c){b.ui.plugin.call(this,f,[c,this.ui()]);"resize"!=f&&this._trigger(f,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","alsoResize",{start:function(f,c){var e=b(this).data("resizable").options,g=function(c){b(c).each(function(){var a=b(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?
g(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],g(e.alsoResize)):b.each(e.alsoResize,function(b){g(b)})},resize:function(f,c){var e=b(this).data("resizable"),g=e.options,k=e.originalSize,a=e.originalPosition,d={height:e.size.height-k.height||0,width:e.size.width-k.width||0,top:e.position.top-a.top||0,left:e.position.left-a.left||0},n=function(a,e){b(a).each(function(){var a=b(this),g=b(this).data("resizable-alsoresize"),f={},n=e&&e.length?e:a.parents(c.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(n,function(a,b){var c=(g[b]||0)+(d[b]||0);c&&0<=c&&(f[b]=c||null)});a.css(f)})};"object"!=typeof g.alsoResize||g.alsoResize.nodeType?n(g.alsoResize):b.each(g.alsoResize,function(a,d){n(a,d)})},stop:function(f,c){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","animate",{stop:function(f,c){var e=b(this).data("resizable"),g=e.options,k=e._proportionallyResizeElements,a=k.length&&/textarea/i.test(k[0].nodeName),d=a&&
b.ui.hasScroll(k[0],"left")?0:e.sizeDiff.height,a={width:e.size.width-(a?0:e.sizeDiff.width),height:e.size.height-d},d=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,n=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(b.extend(a,n&&d?{top:n,left:d}:{}),{duration:g.animateDuration,easing:g.animateEasing,step:function(){var a={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),
10),left:parseInt(e.element.css("left"),10)};k&&k.length&&b(k[0]).css({width:a.width,height:a.height});e._updateCache(a);e._propagate("resize",f)}})}});b.ui.plugin.add("resizable","containment",{start:function(f,c){var e=b(this).data("resizable"),g=e.element,k=e.options.containment;if(g=k instanceof b?k.get(0):/parent/.test(k)?g.parent().get(0):k)if(e.containerElement=b(g),/document/.test(k)||k==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:b(document),
left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight};else{var a=b(g),d=[];b(["Top","Right","Left","Bottom"]).each(function(b,c){d[b]=m(a.css("padding"+c))});e.containerOffset=a.offset();e.containerPosition=a.position();e.containerSize={height:a.innerHeight()-d[3],width:a.innerWidth()-d[1]};var k=e.containerOffset,n=e.containerSize.height,l=e.containerSize.width,l=b.ui.hasScroll(g,"left")?g.scrollWidth:l,n=b.ui.hasScroll(g)?g.scrollHeight:n;e.parentData=
{element:g,left:k.left,top:k.top,width:l,height:n}}},resize:function(f,c){var e=b(this).data("resizable"),g=e.options,k=e.containerOffset,a=e.position,d=e._aspectRatio||f.shiftKey,n={top:0,left:0},m=e.containerElement;m[0]!=document&&/static/.test(m.css("position"))&&(n=k);a.left<(e._helper?k.left:0)&&(e.size.width+=e._helper?e.position.left-k.left:e.position.left-n.left,d&&(e.size.height=e.size.width/e.aspectRatio),e.position.left=g.helper?k.left:0);a.top<(e._helper?k.top:0)&&(e.size.height+=e._helper?
e.position.top-k.top:e.position.top,d&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?k.top:0);e.offset.left=e.parentData.left+e.position.left;e.offset.top=e.parentData.top+e.position.top;g=Math.abs(e.offset.left-n.left+e.sizeDiff.width);k=Math.abs((e._helper?e.offset.top-n.top:e.offset.top-k.top)+e.sizeDiff.height);n=e.containerElement.get(0)==e.element.parent().get(0);a=/relative|absolute/.test(e.containerElement.css("position"));n&&a&&(g-=e.parentData.left);g+e.size.width>=
e.parentData.width&&(e.size.width=e.parentData.width-g,d&&(e.size.height=e.size.width/e.aspectRatio));k+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-k,d&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(f,c){var e=b(this).data("resizable"),g=e.options,k=e.containerOffset,a=e.containerPosition,d=e.containerElement,n=b(e.helper),m=n.offset(),l=n.outerWidth()-e.sizeDiff.width,n=n.outerHeight()-e.sizeDiff.height;e._helper&&!g.animate&&/relative/.test(d.css("position"))&&
b(this).css({left:m.left-a.left-k.left,width:l,height:n});e._helper&&!g.animate&&/static/.test(d.css("position"))&&b(this).css({left:m.left-a.left-k.left,width:l,height:n})}});b.ui.plugin.add("resizable","ghost",{start:function(f,c){var e=b(this).data("resizable"),g=e.options,k=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:0.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof g.ghost?
g.ghost:"");e.ghost.appendTo(e.helper)},resize:function(f,c){var e=b(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(f,c){var e=b(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(f,c){var e=b(this).data("resizable"),g=e.options,k=e.size,a=e.originalSize,d=e.originalPosition,n=e.axis;g.grid="number"==typeof g.grid?[g.grid,g.grid]:g.grid;
var m=Math.round((k.width-a.width)/(g.grid[0]||1))*(g.grid[0]||1),g=Math.round((k.height-a.height)/(g.grid[1]||1))*(g.grid[1]||1);/^(se|s|e)$/.test(n)?(e.size.width=a.width+m,e.size.height=a.height+g):/^(ne)$/.test(n)?(e.size.width=a.width+m,e.size.height=a.height+g,e.position.top=d.top-g):(/^(sw)$/.test(n)?(e.size.width=a.width+m,e.size.height=a.height+g):(e.size.width=a.width+m,e.size.height=a.height+g,e.position.top=d.top-g),e.position.left=d.left-m)}});var m=function(b){return parseInt(b,10)||
0},k=function(b){return!isNaN(parseInt(b,10))}})(l);(function(b,l){b.widget("ui.selectable",b.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var m=this;this.element.addClass("ui-selectable");this.dragged=!1;var k;this.refresh=function(){k=b(m.options.filter,m.element[0]);k.addClass("ui-selectee");k.each(function(){var f=b(this),c=f.offset();b.data(this,"selectable-item",{element:this,$element:f,left:c.left,top:c.top,right:c.left+
f.outerWidth(),bottom:c.top+f.outerHeight(),startselected:!1,selected:f.hasClass("ui-selected"),selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this.selectees=k.addClass("ui-selectee");this._mouseInit();this.helper=b("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(m){var k=
this;this.opos=[m.pageX,m.pageY];if(!this.options.disabled){var f=this.options;this.selectees=b(f.filter,this.element[0]);this._trigger("start",m);b(f.appendTo).append(this.helper);this.helper.css({left:m.clientX,top:m.clientY,width:0,height:0});f.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=b.data(this,"selectable-item");c.startselected=!0;m.metaKey||m.ctrlKey||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=
!0,k._trigger("unselecting",m,{unselecting:c.element}))});b(m.target).parents().andSelf().each(function(){var c=b.data(this,"selectable-item");if(c){var e=!m.metaKey&&!m.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");c.unselecting=!e;c.selecting=e;(c.selected=e)?k._trigger("selecting",m,{selecting:c.element}):k._trigger("unselecting",m,{unselecting:c.element});return!1}})}},_mouseDrag:function(m){var k=
this;this.dragged=!0;if(!this.options.disabled){var f=this.options,c=this.opos[0],e=this.opos[1],g=m.pageX,q=m.pageY;if(c>g)var a=g,g=c,c=a;e>q&&(a=q,q=e,e=a);this.helper.css({left:c,top:e,width:g-c,height:q-e});this.selectees.each(function(){var a=b.data(this,"selectable-item");if(a&&a.element!=k.element[0]){var n=!1;"touch"==f.tolerance?n=!(a.left>g||a.right<c||a.top>q||a.bottom<e):"fit"==f.tolerance&&(n=a.left>c&&a.right<g&&a.top>e&&a.bottom<q);n?(a.selected&&(a.$element.removeClass("ui-selected"),
a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,k._trigger("selecting",m,{selecting:a.element}))):(a.selecting&&((m.metaKey||m.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),k._trigger("unselecting",
m,{unselecting:a.element}))),!a.selected||m.metaKey||m.ctrlKey||a.startselected||(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,k._trigger("unselecting",m,{unselecting:a.element})))}});return!1}},_mouseStop:function(m){var k=this;this.dragged=!1;b(".ui-unselecting",this.element[0]).each(function(){var f=b.data(this,"selectable-item");f.$element.removeClass("ui-unselecting");f.unselecting=!1;f.startselected=!1;k._trigger("unselected",m,{unselected:f.element})});
b(".ui-selecting",this.element[0]).each(function(){var f=b.data(this,"selectable-item");f.$element.removeClass("ui-selecting").addClass("ui-selected");f.selecting=!1;f.selected=!0;f.startselected=!0;k._trigger("selected",m,{selected:f.element})});this._trigger("stop",m);this.helper.remove();return!1}})})(l);(function(b,l){b.widget("ui.sortable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,
forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=
this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(m,k){"disabled"===m?(this.options[m]=k,this.widget().toggleClass("ui-sortable-disabled",!!k)):b.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(m,k){var f=this;if(this.reverting||this.options.disabled||
"static"==this.options.type)return!1;this._refreshItems(m);var c=null;b(m.target).parents().each(function(){if(b.data(this,f.widgetName+"-item")==f)return c=b(this),!1});b.data(m.target,f.widgetName+"-item")==f&&(c=b(m.target));if(!c)return!1;if(this.options.handle&&!k){var e=!1;b(this.options.handle,c).find("*").andSelf().each(function(){this==m.target&&(e=!0)});if(!e)return!1}this.currentItem=c;this._removeCurrentsFromItems();return!0},_mouseStart:function(m,k,f){k=this.options;this.currentContainer=
this;this.refreshPositions();this.helper=this._createHelper(m);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:m.pageX-this.offset.left,top:m.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");this.originalPosition=this._generatePosition(m);this.originalPageX=m.pageX;this.originalPageY=m.pageY;k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();k.containment&&this._setContainment();k.cursor&&(b("body").css("cursor")&&(this._storedCursor=b("body").css("cursor")),b("body").css("cursor",k.cursor));
k.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",k.opacity));k.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",k.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",m,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!f)for(f=this.containers.length-
1;0<=f;f--)this.containers[f]._trigger("activate",m,this._uiHash(this));b.ui.ddmanager&&(b.ui.ddmanager.current=this);b.ui.ddmanager&&!k.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,m);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(m);return!0},_mouseDrag:function(m){this.position=this._generatePosition(m);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var k=this.options,f=
!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-m.pageY<k.scrollSensitivity?this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+k.scrollSpeed:m.pageY-this.overflowOffset.top<k.scrollSensitivity&&(this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-k.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-m.pageX<k.scrollSensitivity?this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+
k.scrollSpeed:m.pageX-this.overflowOffset.left<k.scrollSensitivity&&(this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-k.scrollSpeed)):(m.pageY-b(document).scrollTop()<k.scrollSensitivity?f=b(document).scrollTop(b(document).scrollTop()-k.scrollSpeed):b(window).height()-(m.pageY-b(document).scrollTop())<k.scrollSensitivity&&(f=b(document).scrollTop(b(document).scrollTop()+k.scrollSpeed)),m.pageX-b(document).scrollLeft()<k.scrollSensitivity?f=b(document).scrollLeft(b(document).scrollLeft()-
k.scrollSpeed):b(window).width()-(m.pageX-b(document).scrollLeft())<k.scrollSensitivity&&(f=b(document).scrollLeft(b(document).scrollLeft()+k.scrollSpeed)));!1!==f&&b.ui.ddmanager&&!k.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,m)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(k=this.items.length-
1;0<=k;k--){var f=this.items[k],c=f.item[0],e=this._intersectsWithPointer(f);if(e&&f.instance===this.currentContainer&&c!=this.currentItem[0]&&this.placeholder[1==e?"next":"prev"]()[0]!=c&&!b.contains(this.placeholder[0],c)&&("semi-dynamic"==this.options.type?!b.contains(this.element[0],c):1)){this.direction=1==e?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(f))this._rearrange(m,f);else break;this._trigger("change",m,this._uiHash());break}}this._contactContainers(m);
b.ui.ddmanager&&b.ui.ddmanager.drag(this,m);this._trigger("sort",m,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(m,k){if(m){b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,m);if(this.options.revert){var f=this,c=this.placeholder.offset();this.reverting=!0;b(this.helper).animate({left:c.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-this.margins.top+
(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(m)})}else this._clear(m,k);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var m=this.containers.length-1;0<=m;m--)this.containers[m]._trigger("deactivate",null,this._uiHash(this)),this.containers[m].containerCache.over&&
(this.containers[m]._trigger("out",null,this._uiHash(this)),this.containers[m].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem));
return this},serialize:function(m){var k=this._getItemsAsjQuery(m&&m.connected),f=[];m=m||{};b(k).each(function(){var c=(b(m.item||this).attr(m.attribute||"id")||"").match(m.expression||/(.+)[-=_](.+)/);c&&f.push((m.key||c[1]+"[]")+"="+(m.key&&m.expression?c[1]:c[2]))});!f.length&&m.key&&f.push(m.key+"=");return f.join("&")},toArray:function(m){var k=this._getItemsAsjQuery(m&&m.connected),f=[];m=m||{};k.each(function(){f.push(b(m.item||this).attr(m.attribute||"id")||"")});return f},_intersectsWith:function(b){var k=
this.positionAbs.left,f=k+this.helperProportions.width,c=this.positionAbs.top,e=c+this.helperProportions.height,g=b.left,q=g+b.width,a=b.top,d=a+b.height,n=this.offset.click.top,l=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?c+n>a&&c+n<d&&k+l>g&&k+l<q:g<k+this.helperProportions.width/2&&f-this.helperProportions.width/
2<q&&a<c+this.helperProportions.height/2&&e-this.helperProportions.height/2<d},_intersectsWithPointer:function(m){var k="x"===this.options.axis||b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,m.top,m.height);m="y"===this.options.axis||b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,m.left,m.width);k=k&&m;m=this._getDragVerticalDirection();var f=this._getDragHorizontalDirection();return k?this.floating?f&&"right"==f||"down"==m?2:1:m&&("down"==m?2:1):!1},_intersectsWithSides:function(m){var k=
b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,m.top+m.height/2,m.height);m=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,m.left+m.width/2,m.width);var f=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?"right"==c&&m||"left"==c&&!m:f&&("down"==f&&k||"up"==f&&!k)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=
this.positionAbs.left-this.lastPositionAbs.left;return 0!=b&&(0<b?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(m){var k=[],f=[],c=this._connectWith();if(c&&m)for(m=c.length-1;0<=m;m--)for(var e=b(c[m]),g=e.length-1;0<=g;g--){var q=b.data(e[g],this.widgetName);q&&q!=this&&!q.options.disabled&&f.push([b.isFunction(q.options.items)?
q.options.items.call(q.element):b(q.options.items,q.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),q])}f.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(m=f.length-1;0<=m;m--)f[m][0].each(function(){k.push(this)});return b(k)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data("+
this.widgetName+"-item)"),k=0;k<this.items.length;k++)for(var f=0;f<b.length;f++)b[f]==this.items[k].item[0]&&this.items.splice(k,1)},_refreshItems:function(m){this.items=[];this.containers=[this];var k=this.items,f=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],m,{item:this.currentItem}):b(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(var e=c.length-1;0<=e;e--)for(var g=b(c[e]),q=g.length-1;0<=q;q--){var a=b.data(g[q],this.widgetName);
a&&a!=this&&!a.options.disabled&&(f.push([b.isFunction(a.options.items)?a.options.items.call(a.element[0],m,{item:this.currentItem}):b(a.options.items,a.element),a]),this.containers.push(a))}for(e=f.length-1;0<=e;e--)for(m=f[e][1],c=f[e][0],q=0,g=c.length;q<g;q++)a=b(c[q]),a.data(this.widgetName+"-item",m),k.push({item:a,instance:m,width:0,height:0,left:0,top:0})},refreshPositions:function(m){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var k=this.items.length-
1;0<=k;k--){var f=this.items[k];if(f.instance==this.currentContainer||!this.currentContainer||f.item[0]==this.currentItem[0]){var c=this.options.toleranceElement?b(this.options.toleranceElement,f.item):f.item;m||(f.width=c.outerWidth(),f.height=c.outerHeight());c=c.offset();f.left=c.left;f.top=c.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(k=this.containers.length-1;0<=k;k--)c=this.containers[k].element.offset(),this.containers[k].containerCache.left=
c.left,this.containers[k].containerCache.top=c.top,this.containers[k].containerCache.width=this.containers[k].element.outerWidth(),this.containers[k].containerCache.height=this.containers[k].element.outerHeight();return this},_createPlaceholder:function(m){m=m||this;var k=m.options;if(!k.placeholder||k.placeholder.constructor==String){var f=k.placeholder;k.placeholder={element:function(){var c=b(document.createElement(m.currentItem[0].nodeName)).addClass(f||m.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
f||(c.style.visibility="hidden");return c},update:function(b,e){if(!f||k.forcePlaceholderSize)e.height()||e.height(m.currentItem.innerHeight()-parseInt(m.currentItem.css("paddingTop")||0,10)-parseInt(m.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(m.currentItem.innerWidth()-parseInt(m.currentItem.css("paddingLeft")||0,10)-parseInt(m.currentItem.css("paddingRight")||0,10))}}}m.placeholder=b(k.placeholder.element.call(m.element,m.currentItem));m.currentItem.after(m.placeholder);k.placeholder.update(m,
m.placeholder)},_contactContainers:function(m){for(var k=null,f=null,c=this.containers.length-1;0<=c;c--)b.contains(this.currentItem[0],this.containers[c].element[0])||(this._intersectsWith(this.containers[c].containerCache)?k&&b.contains(this.containers[c].element[0],k.element[0])||(k=this.containers[c],f=c):this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",m,this._uiHash(this)),this.containers[c].containerCache.over=0));if(k)if(1===this.containers.length)this.containers[f]._trigger("over",
m,this._uiHash(this)),this.containers[f].containerCache.over=1;else if(this.currentContainer!=this.containers[f]){for(var k=1E4,c=null,e=this.positionAbs[this.containers[f].floating?"left":"top"],g=this.items.length-1;0<=g;g--)if(b.contains(this.containers[f].element[0],this.items[g].item[0])){var q=this.containers[f].floating?this.items[g].item.offset().left:this.items[g].item.offset().top;Math.abs(q-e)<k&&(k=Math.abs(q-e),c=this.items[g],this.direction=0<q-e?"down":"up")}if(c||this.options.dropOnEmpty)this.currentContainer=
this.containers[f],c?this._rearrange(m,c,null,!0):this._rearrange(m,null,this.containers[f].element,!0),this._trigger("change",m,this._uiHash()),this.containers[f]._trigger("change",m,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",m,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(m){var k=this.options;m=b.isFunction(k.helper)?b(k.helper.apply(this.element[0],[m,this.currentItem])):
"clone"==k.helper?this.currentItem.clone():this.currentItem;m.parents("body").length||b("parent"!=k.appendTo?k.appendTo:this.currentItem[0].parentNode)[0].appendChild(m[0]);m[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==m[0].style.width||k.forceHelperSize)&&m.width(this.currentItem.width());(""==m[0].style.height||
k.forceHelperSize)&&m.height(this.currentItem.height());return m},_adjustOffsetFromHelper:function(m){"string"==typeof m&&(m=m.split(" "));b.isArray(m)&&(m={left:+m[0],top:+m[1]||0});"left"in m&&(this.offset.click.left=m.left+this.margins.left);"right"in m&&(this.offset.click.left=this.helperProportions.width-m.right+this.margins.left);"top"in m&&(this.offset.click.top=m.top+this.margins.top);"bottom"in m&&(this.offset.click.top=this.helperProportions.height-m.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var m=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(m.left+=this.scrollParent.scrollLeft(),m.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)m={top:0,left:0};return{top:m.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:m.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var m=this.options;"parent"==m.containment&&(m.containment=this.helper[0].parentNode);if("document"==m.containment||"window"==m.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b("document"==m.containment?document:window).width()-this.helperProportions.width-this.margins.left,(b("document"==m.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(m.containment)){var k=b(m.containment)[0],m=b(m.containment).offset(),f="hidden"!=b(k).css("overflow");this.containment=[m.left+(parseInt(b(k).css("borderLeftWidth"),10)||0)+(parseInt(b(k).css("paddingLeft"),10)||0)-this.margins.left,m.top+(parseInt(b(k).css("borderTopWidth"),10)||0)+(parseInt(b(k).css("paddingTop"),10)||0)-this.margins.top,m.left+(f?Math.max(k.scrollWidth,
k.offsetWidth):k.offsetWidth)-(parseInt(b(k).css("borderLeftWidth"),10)||0)-(parseInt(b(k).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,m.top+(f?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(b(k).css("borderTopWidth"),10)||0)-(parseInt(b(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(m,k){k||(k=this.position);var f="absolute"==m?1:-1,c="absolute"!=this.cssPosition||this.scrollParent[0]!=
document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(c[0].tagName);return{top:k.top+this.offset.relative.top*f+this.offset.parent.top*f-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop())*f,left:k.left+this.offset.relative.left*f+this.offset.parent.left*f-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*f}},_generatePosition:function(m){var k=this.options,f="absolute"!=this.cssPosition||
this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(f[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var e=m.pageX,g=m.pageY;this.originalPosition&&(this.containment&&(m.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),m.pageY-this.offset.click.top<
this.containment[1]&&(g=this.containment[1]+this.offset.click.top),m.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),m.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),k.grid&&(g=this.originalPageY+Math.round((g-this.originalPageY)/k.grid[1])*k.grid[1],g=this.containment?g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3]?g-this.offset.click.top<this.containment[1]?
g+k.grid[1]:g-k.grid[1]:g:g,e=this.originalPageX+Math.round((e-this.originalPageX)/k.grid[0])*k.grid[0],e=this.containment?e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2]?e-this.offset.click.left<this.containment[0]?e+k.grid[0]:e-k.grid[0]:e:e));return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():c?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():c?0:f.scrollLeft())}},_rearrange:function(b,k,f,c){f?f[0].appendChild(this.placeholder[0]):k.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?k.item[0]:k.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e==this.counter&&this.refreshPositions(!c)})},_clear:function(m,k){this.reverting=!1;var f=[];!this._noFinalSort&&this.currentItem.parent().length&&
this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS)if("auto"==this._storedCSS[c]||"static"==this._storedCSS[c])this._storedCSS[c]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!k&&f.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&
this.domPosition.parent==this.currentItem.parent()[0]||k||f.push(function(b){this._trigger("update",b,this._uiHash())});this===this.currentContainer||k||(f.push(function(b){this._trigger("remove",b,this._uiHash())}),f.push(function(b){return function(c){b._trigger("receive",c,this._uiHash(this))}}.call(this,this.currentContainer)),f.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))}}.call(this,this.currentContainer)));for(c=this.containers.length-1;0<=c;c--)k||f.push(function(b){return function(c){b._trigger("deactivate",
c,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(f.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);this._storedCursor&&b("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!k){this._trigger("beforeStop",
m,this._uiHash());for(c=0;c<f.length;c++)f[c].call(this,m);this._trigger("stop",m,this._uiHash())}return this.fromOutside=!1}k||this._trigger("beforeStop",m,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!k){for(c=0;c<f.length;c++)f[c].call(this,m);this._trigger("stop",m,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===b.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(m){var k=m||this;return{helper:k.helper,placeholder:k.placeholder||b([]),position:k.position,originalPosition:k.originalPosition,offset:k.positionAbs,item:k.currentItem,sender:m?m.element:null}}})})(l);(function(b,p){var m=0,k={},f={};k.height=k.paddingTop=k.paddingBottom=k.borderTopWidth=k.borderBottomWidth="hide";f.height=f.paddingTop=f.paddingBottom=f.borderTopWidth=f.borderBottomWidth="show";b.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},
collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var c=this.accordionId="ui-accordion-"+(this.element.attr("id")||++m),e=this.options;this.prevShow=this.prevHide=b();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();e.collapsible||!1!==e.active||(e.active=0);0>e.active&&(e.active+=this.headers.length);this.active=this._findActive(e.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=
this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(e){var f=b(this),a=f.attr("id"),d=f.next(),n=d.attr("id");a||(a=c+"-header-"+e,f.attr("id",a));n||(n=c+"-panel-"+e,d.attr("id",n));f.attr("aria-controls",n);d.attr("aria-labelledby",a)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?
this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(e.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():b()}},_createIcons:function(){var c=this.options.icons;c&&(b("<span>").addClass("ui-accordion-header-icon ui-icon "+c.header).prependTo(this.headers),
this.active.children(".ui-accordion-header-icon").removeClass(c.header).addClass(c.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&(this.element.css("height",this.originalHeight),b.css("height",
""))},_setOption:function(b,e){"active"===b?this._activate(e):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(b,e),"collapsible"!==b||e||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))},_keydown:function(c){if(!c.altKey&&!c.ctrlKey){var e=b.ui.keyCode,g=this.headers.length,f=this.headers.index(c.target),
a=!1;switch(c.keyCode){case e.RIGHT:case e.DOWN:a=this.headers[(f+1)%g];break;case e.LEFT:case e.UP:a=this.headers[(f-1+g)%g];break;case e.SPACE:case e.ENTER:this._eventHandler(c);break;case e.HOME:a=this.headers[0];break;case e.END:a=this.headers[g-1]}a&&(b(c.target).attr("tabIndex",-1),b(a).attr("tabIndex",0),a.focus(),c.preventDefault())}},_panelKeyDown:function(c){c.keyCode===b.ui.keyCode.UP&&c.ctrlKey&&b(c.currentTarget).prev().focus()},refresh:function(){var c,e,g=this.options.heightStyle,f=
this.element.parent();this.element.css("height",this.originalHeight);"fill"===g?(b.support.minHeight||(e=f.css("overflow"),f.css("overflow","hidden")),c=f.height(),this.element.siblings(":visible").each(function(){var a=b(this),d=a.css("position");"absolute"!==d&&"fixed"!==d&&(c-=a.outerHeight(!0))}),e&&f.css("overflow",e),this.headers.each(function(){c-=b(this).outerHeight(!0)}),this.headers.next().each(function(){b(this).height(Math.max(0,c-b(this).innerHeight()+b(this).height()))}).css("overflow",
"auto")):"auto"===g&&(c=0,this.headers.next().each(function(){c=Math.max(c,b(this).height("").height())}).height(c));"content"!==g&&this.element.height(this.element.height())},_activate:function(c){c=this._findActive(c)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:b.noop}))},_findActive:function(c){return"number"===typeof c?this.headers.eq(c):b()},_setupEvents:function(c){var e={};c&&(b.each(c.split(" "),function(b,c){e[c]="_eventHandler"}),
this._on(this.headers,e))},_eventHandler:function(c){var e=this.options,g=this.active,f=b(c.currentTarget),a=f[0]===g[0],d=a&&e.collapsible,n=d?b():f.next(),k=g.next(),n={oldHeader:g,oldPanel:k,newHeader:d?b():f,newPanel:n};c.preventDefault();a&&!e.collapsible||!1===this._trigger("beforeActivate",c,n)||(e.active=d?!1:this.headers.index(f),this.active=a?b():f,this._toggle(n),g.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&g.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),
a||(f.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&f.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),f.next().addClass("ui-accordion-content-active")))},_toggle:function(c){var e=c.newPanel,g=this.prevShow.length?this.prevShow:c.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=e;this.prevHide=g;this.options.animate?this._animate(e,g,c):(g.hide(),e.show(),this._toggleComplete(c));
g.attr({"aria-expanded":"false","aria-hidden":"true"});g.prev().attr("aria-selected","false");e.length&&g.length?g.prev().attr("tabIndex",-1):e.length&&this.headers.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);e.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(b,e,g){var q,a,d,n=this,m=0,l=b.length&&(!e.length||b.index()<e.index()),p=this.options.animate||{},l=l&&p.down||p,z=function(){n._toggleComplete(g)};
"number"===typeof l&&(d=l);"string"===typeof l&&(a=l);a=a||l.easing||p.easing;d=d||l.duration||p.duration;if(!e.length)return b.animate(f,d,a,z);if(!b.length)return e.animate(k,d,a,z);q=b.show().outerHeight();e.animate(k,{duration:d,easing:a,step:function(a,d){d.now=Math.round(a)}});b.hide().animate(f,{duration:d,easing:a,complete:z,step:function(a,d){d.now=Math.round(a);"height"!==d.prop?m+=d.now:"content"!==n.options.heightStyle&&(d.now=Math.round(q-e.outerHeight()-m),m=0)}})},_toggleComplete:function(b){var e=
b.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");e.length&&(e.parent()[0].className=e.parent()[0].className);this._trigger("activate",null,b)}});!1!==b.uiBackCompat&&(function(b,e){b.extend(e.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var g=e._create;e._create=function(){if(this.options.navigation){var e=this,a=this.element.find(this.options.header),d=a.next(),
f=a.add(d).find("a").filter(this.options.navigationFilter)[0];f&&a.add(d).each(function(a){if(b.contains(this,f))return e.options.active=Math.floor(a/2),!1})}g.call(this)}}(l,l.ui.accordion.prototype),function(b,e){b.extend(e.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var g=e._create,f=e._setOption;b.extend(e,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();g.call(this)},_setOption:function(a,d){if("autoHeight"===a||"clearStyle"===
a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();f.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(l,l.ui.accordion.prototype),function(b,e){b.extend(e.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var g=e._createIcons;e._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);
g.call(this)}}(l,l.ui.accordion.prototype),function(b,e){e.activate=e._activate;var g=e._findActive;e._findActive=function(b){-1===b&&(b=!1);b&&"number"!==typeof b&&(b=this.headers.index(this.headers.filter(b)),-1===b&&(b=!1));return g.call(this,b)}}(l,l.ui.accordion.prototype),l.ui.accordion.prototype.resize=l.ui.accordion.prototype.refresh,function(b,e){b.extend(e.options,{change:null,changestart:null});var g=e._trigger;e._trigger=function(b,a,d){var c=g.apply(this,arguments);if(!c)return!1;"beforeActivate"===
b?c=g.call(this,"changestart",a,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,newContent:d.newPanel}):"activate"===b&&(c=g.call(this,"change",a,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,newContent:d.newPanel}));return c}}(l,l.ui.accordion.prototype),function(b,e){b.extend(e.options,{animate:null,animated:"slide"});var g=e._create;e._create=function(){var b=this.options;null===b.animate&&(b.animate=b.animated?"slide"===b.animated?300:"bounceslide"===b.animated?
{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:b.animated:!1);g.call(this)}}(l,l.ui.accordion.prototype))})(l);(function(b,l){var m=0;b.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var k,f,c;this.isMultiLine=this._isMultiLine();
this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on({keydown:function(e){if(this.element.prop("readOnly"))f=c=k=!0;else{f=c=k=!1;var g=b.ui.keyCode;switch(e.keyCode){case g.PAGE_UP:k=!0;this._move("previousPage",e);break;case g.PAGE_DOWN:k=!0;this._move("nextPage",e);break;case g.UP:k=!0;this._keyEvent("previous",e);break;case g.DOWN:k=!0;this._keyEvent("next",e);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&
(k=!0,e.preventDefault(),this.menu.select(e));break;case g.TAB:this.menu.active&&this.menu.select(e);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:f=!0,this._searchTimeout(e)}}},keypress:function(c){if(k)k=!1,c.preventDefault();else if(!f){var g=b.ui.keyCode;switch(c.keyCode){case g.PAGE_UP:this._move("previousPage",c);break;case g.PAGE_DOWN:this._move("nextPage",c);break;case g.UP:this._keyEvent("previous",c);break;case g.DOWN:this._keyEvent("next",
c)}}},input:function(b){c?(c=!1,b.preventDefault()):this._searchTimeout(b)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(b),this._change(b))}});this._initSource();this.menu=b("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:b(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,
{mousedown:function(c){c.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var g=this.menu.element[0];b(c.target).closest(".ui-menu-item").length||this._delay(function(){var c=this;this.document.one("mousedown",function(a){a.target===c.element[0]||a.target===g||b.contains(g,a.target)||c.close()})})},menufocus:function(c,g){if(this.isNewMenu&&(this.isNewMenu=!1,c.originalEvent&&/^mouse/.test(c.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){b(c.target).trigger(c.originalEvent)});
return}var f=g.item.data("ui-autocomplete-item")||g.item.data("item.autocomplete");!1!==this._trigger("focus",c,{item:f})?c.originalEvent&&/^key/.test(c.originalEvent.type)&&this._value(f.value):this.liveRegion.text(f.value)},menuselect:function(b,c){var f=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete"),a=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a;this.selectedItem=f}));!1!==this._trigger("select",
b,{item:f})&&this._value(f.value);this.term=this._value();this.close(b);this.selectedItem=f}});this.liveRegion=b("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);b.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();
this.liveRegion.remove()},_setOption:function(b,f){this._super(b,f);"source"===b&&this._initSource();"appendTo"===b&&this.menu.element.appendTo(this.document.find(f||"body")[0]);"disabled"===b&&f&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var k,f,c=this;b.isArray(this.options.source)?(k=this.options.source,this.source=function(c,g){g(b.ui.autocomplete.filter(k,
c.term))}):"string"===typeof this.options.source?(f=this.options.source,this.source=function(e,g){c.xhr&&c.xhr.abort();c.xhr=b.ajax({url:f,data:e,dataType:"json",success:function(b,a){g(b)},error:function(){g([])}})}):this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,b))},this.options.delay)},search:function(b,f){b=null!=b?b:this._value();this.term=this._value();
if(b.length<this.options.minLength)return this.close(f);if(!1!==this._trigger("search",f))return this._search(b)},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:b},this._response())},_response:function(){var b=this,f=++m;return function(c){f===m&&b.__response(c);b.pending--;b.pending||b.element.removeClass("ui-autocomplete-loading")}},__response:function(b){b&&(b=this._normalize(b));this._trigger("response",null,{content:b});
!this.options.disabled&&b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0;this._close(b)},_close:function(b){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(k){return k.length&&k[0].label&&k[0].value?k:b.map(k,function(f){return"string"===
typeof f?{label:f,value:f}:b.extend({label:f.label||f.value,value:f.value||f.label},f)})},_suggest:function(k){var f=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(f,k);this.menu.refresh();f.show();this._resizeMenu();f.position(b.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(k,f){var c=
this;b.each(f,function(b,g){c._renderItemData(k,g)})},_renderItemData:function(b,f){return this._renderItem(b,f).data("ui-autocomplete-item",f)},_renderItem:function(k,f){return b("<li>").append(b("<a>").text(f.label)).appendTo(k)},_move:function(b,f){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b))this._value(this.term),this.menu.blur();else this.menu[b](f);else this.search(null,f)},widget:function(){return this.menu.element},
_value:function(b){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(b,f){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,f),f.preventDefault()}});b.extend(b.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(k,f){var c=RegExp(b.ui.autocomplete.escapeRegex(f),"i");return b.grep(k,function(b){return c.test(b.label||b.value||b)})}});b.widget("ui.autocomplete",b.ui.autocomplete,{options:{messages:{noResults:"No search results.",
results:function(b){return b+(1<b?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var f;this._superApply(arguments);this.options.disabled||this.cancelSearch||(f=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.text(f))}})})(l);(function(b,l){var m,k,f,c,e=function(){var c=b(this).find(":ui-button");setTimeout(function(){c.button("refresh")},1)},g=function(c){var a=c.name,d=c.form,e=b([]);
a&&(e=d?b(d).find("[name='"+a+"']"):b("[name='"+a+"']",c.ownerDocument).filter(function(){return!this.form}));return e};b.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,e);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",
this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var q=this,a=this.options,d="checkbox"===this.type||"radio"===this.type,n="ui-state-hover"+(d?"":" ui-state-active");null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||(b(this).addClass("ui-state-hover"),
this===m&&b(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||b(this).removeClass(n)}).bind("click"+this.eventNamespace,function(d){a.disabled&&(d.preventDefault(),d.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){q.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){q.buttonElement.removeClass("ui-state-focus")});d&&(this.element.bind("change"+this.eventNamespace,function(){c||
q.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(d){a.disabled||(c=!1,k=d.pageX,f=d.pageY)}).bind("mouseup"+this.eventNamespace,function(d){a.disabled||k===d.pageX&&f===d.pageY||(c=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||c)return!1;b(this).toggleClass("ui-state-active");q.buttonElement.attr("aria-pressed",q.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,
function(){if(a.disabled||c)return!1;b(this).addClass("ui-state-active");q.buttonElement.attr("aria-pressed","true");var d=q.element[0];g(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(a.disabled)return!1;b(this).addClass("ui-state-active");m=this;q.document.one("mouseup",function(){m=null})}).bind("mouseup"+this.eventNamespace,function(){if(a.disabled)return!1;
b(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(d){if(a.disabled)return!1;d.keyCode!==b.ui.keyCode.SPACE&&d.keyCode!==b.ui.keyCode.ENTER||b(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",a.disabled);this._resetButton()},_determineButtonType:function(){var b,
a;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(b=this.element.parents().last(),a="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(a),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(a),this.buttonElement.length||(this.buttonElement=b.find(a))),this.element.addClass("ui-helper-hidden-accessible"),
(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,a){this._super(b,a);"disabled"===b?a?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var c=this.element.is(":disabled");c!==this.options.disabled&&this._setOption("disabled",c);"radio"===this.type?g(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var c=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
a=b("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(c.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,g=[];d.primary||d.secondary?(this.options.text&&g.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&c.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&c.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(g.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||c.attr("title",b.trim(a)))):g.push("ui-button-text-only");c.addClass(g.join(" "))}}});b.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,a){"disabled"===b&&this.buttons.button("option",b,a);this._super(b,a)},refresh:function(){var c=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(c?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(c?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(l);
(function(b,l){function m(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};b.extend(this._defaults,this.regional[""]);this.dpDiv=k(b('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function k(c){return c.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){b(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){b.datepicker._isDisabledDatepicker(e.inline?c.parent()[0]:e.input[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))})}function f(c,e){b.extend(c,e);for(var a in e)if(null==e[a]||e[a]==l)c[a]=e[a];return c}b.extend(b.ui,{datepicker:{version:"1.9.0"}});var c=(new Date).getTime(),e;b.extend(m.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){f(this._defaults,b||{});return this},_attachDatepicker:function(c,e){var a=null,d;for(d in this._defaults){var f=c.getAttribute("date:"+d);if(f){a=a||{};try{a[d]=eval(f)}catch(k){a[d]=f}}}d=c.nodeName.toLowerCase();f="div"==d||"span"==d;c.id||(this.uuid+=1,c.id="dp"+this.uuid);var m=this._newInst(b(c),f);m.settings=b.extend({},e||{},a||{});"input"==d?this._connectDatepicker(c,m):f&&this._inlineDatepicker(c,m)},_newInst:function(c,
e){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?k(b('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(c,e){var a=b(c);e.append=b([]);e.trigger=b([]);a.hasClass(this.markerClassName)||(this._attachments(a,e),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,c){e.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(e,b)}),this._autoSize(e),b.data(c,"datepicker",e),e.settings.disabled&&this._disableDatepicker(c))},_attachments:function(c,e){var a=this._get(e,"appendText"),d=this._get(e,"isRTL");e.append&&e.append.remove();a&&(e.append=b('<span class="'+this._appendClass+'">'+a+"</span>"),c[d?"before":"after"](e.append));c.unbind("focus",this._showDatepicker);e.trigger&&e.trigger.remove();a=this._get(e,"showOn");"focus"!=
a&&"both"!=a||c.focus(this._showDatepicker);if("button"==a||"both"==a){var a=this._get(e,"buttonText"),f=this._get(e,"buttonImage");e.trigger=b(this._get(e,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:f,alt:a,title:a}):b('<button type="button"></button>').addClass(this._triggerClass).html(""==f?a:b("<img/>").attr({src:f,alt:a,title:a})));c[d?"before":"after"](e.trigger);e.trigger.click(function(){b.datepicker._datepickerShowing&&b.datepicker._lastInput==c[0]?b.datepicker._hideDatepicker():
(b.datepicker._datepickerShowing&&b.datepicker._lastInput!=c[0]&&b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(c[0]));return!1})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var c=new Date(2009,11,20),a=this._get(b,"dateFormat");if(a.match(/[DM]/)){var d=function(a){for(var d=0,b=0,c=0;c<a.length;c++)a[c].length>d&&(d=a[c].length,b=c);return b};c.setMonth(d(this._get(b,a.match(/MM/)?"monthNames":"monthNamesShort")));c.setDate(d(this._get(b,a.match(/DD/)?"dayNames":
"dayNamesShort"))+20-c.getDay())}b.input.attr("size",this._formatDate(b,c).length)}},_inlineDatepicker:function(c,e){var a=b(c);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(a,b,c){e.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(e,b)}),b.data(c,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(c),
e.dpDiv.css("display","block"))},_dialogDatepicker:function(c,e,a,d,n){c=this._dialogInst;c||(this.uuid+=1,this._dialogInput=b('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),b("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},b.data(this._dialogInput[0],"datepicker",c));f(c.settings,d||{});e=e&&e.constructor==Date?this._formatDate(c,e):e;this._dialogInput.val(e);
this._pos=n?n.length?n:[n.pageX,n.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=a;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);b.blockUI&&b.blockUI(this.dpDiv);
b.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(c){var e=b(c),a=b.data(c,"datepicker");if(e.hasClass(this.markerClassName)){var d=c.nodeName.toLowerCase();b.removeData(c,"datepicker");"input"==d?(a.append.remove(),a.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=d&&"span"!=d||e.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(c){var e=b(c),a=b.data(c,"datepicker");if(e.hasClass(this.markerClassName)){var d=c.nodeName.toLowerCase();if("input"==d)c.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d)e=e.children("."+this._inlineClass),e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=b.map(this._disabledInputs,
function(a){return a==c?null:a})}},_disableDatepicker:function(c){var e=b(c),a=b.data(c,"datepicker");if(e.hasClass(this.markerClassName)){var d=c.nodeName.toLowerCase();if("input"==d)c.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d)e=e.children("."+this._inlineClass),e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=b.map(this._disabledInputs,function(a){return a==c?null:a});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(b){if(!b)return!1;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return!0;return!1},_getInst:function(c){try{return b.data(c,"datepicker")}catch(e){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,e,a){var d=this._getInst(c);if(2==arguments.length&&"string"==typeof e)return"defaults"==
e?b.extend({},b.datepicker._defaults):d?"all"==e?b.extend({},d.settings):this._get(d,e):null;var n=e||{};"string"==typeof e&&(n={},n[e]=a);if(d){this._curInst==d&&this._hideDatepicker();var k=this._getDateDatepicker(c,!0),m=this._getMinMaxDate(d,"min"),A=this._getMinMaxDate(d,"max");f(d.settings,n);null!==m&&n.dateFormat!==l&&n.minDate===l&&(d.settings.minDate=this._formatDate(d,m));null!==A&&n.dateFormat!==l&&n.maxDate===l&&(d.settings.maxDate=this._formatDate(d,A));this._attachments(b(c),d);this._autoSize(d);
this._setDate(d,k);this._updateAlternate(d);this._updateDatepicker(d)}},_changeDatepicker:function(b,c,a){this._optionDatepicker(b,c,a)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,c){var a=this._getInst(b);a&&(this._setDate(a,c),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(b,c){var a=this._getInst(b);a&&!a.inline&&this._setDateFromField(a,c);return a?this._getDate(a):null},_doKeyDown:function(c){var e=
b.datepicker._getInst(c.target),a=!0,d=e.dpDiv.is(".ui-datepicker-rtl");e._keyEvent=!0;if(b.datepicker._datepickerShowing)switch(c.keyCode){case 9:b.datepicker._hideDatepicker();a=!1;break;case 13:return a=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",e.dpDiv),a[0]&&b.datepicker._selectDay(c.target,e.selectedMonth,e.selectedYear,a[0]),(c=b.datepicker._get(e,"onSelect"))?(a=b.datepicker._formatDate(e),c.apply(e.input?e.input[0]:null,[a,e])):b.datepicker._hideDatepicker(),
!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(c.target,c.ctrlKey?-b.datepicker._get(e,"stepBigMonths"):-b.datepicker._get(e,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(c.target,c.ctrlKey?+b.datepicker._get(e,"stepBigMonths"):+b.datepicker._get(e,"stepMonths"),"M");break;case 35:(c.ctrlKey||c.metaKey)&&b.datepicker._clearDate(c.target);a=c.ctrlKey||c.metaKey;break;case 36:(c.ctrlKey||c.metaKey)&&b.datepicker._gotoToday(c.target);a=c.ctrlKey||c.metaKey;
break;case 37:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,d?1:-1,"D");a=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&b.datepicker._adjustDate(c.target,c.ctrlKey?-b.datepicker._get(e,"stepBigMonths"):-b.datepicker._get(e,"stepMonths"),"M");break;case 38:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,-7,"D");a=c.ctrlKey||c.metaKey;break;case 39:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,d?-1:1,"D");a=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&b.datepicker._adjustDate(c.target,
c.ctrlKey?+b.datepicker._get(e,"stepBigMonths"):+b.datepicker._get(e,"stepMonths"),"M");break;case 40:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,7,"D");a=c.ctrlKey||c.metaKey;break;default:a=!1}else 36==c.keyCode&&c.ctrlKey?b.datepicker._showDatepicker(this):a=!1;a&&(c.preventDefault(),c.stopPropagation())},_doKeyPress:function(c){var e=b.datepicker._getInst(c.target);if(b.datepicker._get(e,"constrainInput")){var e=b.datepicker._possibleChars(b.datepicker._get(e,"dateFormat")),a=String.fromCharCode(c.charCode==
l?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">a||!e||-1<e.indexOf(a)}},_doKeyUp:function(c){c=b.datepicker._getInst(c.target);if(c.input.val()!=c.lastVal)try{b.datepicker.parseDate(b.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,b.datepicker._getFormatConfig(c))&&(b.datepicker._setDateFromField(c),b.datepicker._updateAlternate(c),b.datepicker._updateDatepicker(c))}catch(e){b.datepicker.log(e)}return!0},_showDatepicker:function(c){c=c.target||c;"input"!=c.nodeName.toLowerCase()&&
(c=b("input",c.parentNode)[0]);if(!b.datepicker._isDisabledDatepicker(c)&&b.datepicker._lastInput!=c){var e=b.datepicker._getInst(c);b.datepicker._curInst&&b.datepicker._curInst!=e&&(b.datepicker._curInst.dpDiv.stop(!0,!0),e&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0]));var a=b.datepicker._get(e,"beforeShow"),a=a?a.apply(c,[c,e]):{};if(!1!==a){f(e.settings,a);e.lastVal=null;b.datepicker._lastInput=c;b.datepicker._setDateFromField(e);b.datepicker._inDialog&&
(c.value="");b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(c),b.datepicker._pos[1]+=c.offsetHeight);var d=!1;b(c).parents().each(function(){d|="fixed"==b(this).css("position");return!d});a={left:b.datepicker._pos[0],top:b.datepicker._pos[1]};b.datepicker._pos=null;e.dpDiv.empty();e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.datepicker._updateDatepicker(e);a=b.datepicker._checkOffset(e,a,d);e.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":d?"fixed":
"absolute",display:"none",left:a.left+"px",top:a.top+"px"});if(!e.inline){var a=b.datepicker._get(e,"showAnim"),n=b.datepicker._get(e,"duration"),k=function(){var a=e.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var d=b.datepicker._getBorders(e.dpDiv);a.css({left:-d[0],top:-d[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex(b(c).zIndex()+1);b.datepicker._datepickerShowing=!0;if(b.effects&&(b.effects.effect[a]||b.effects[a]))e.dpDiv.show(a,b.datepicker._get(e,
"showOptions"),n,k);else e.dpDiv[a||"show"](a?n:null,k);a&&n||k();e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus();b.datepicker._curInst=e}}}},_updateDatepicker:function(c){this.maxRows=4;var f=b.datepicker._getBorders(c.dpDiv);e=c;c.dpDiv.empty().append(this._generateHTML(c));this._attachHandlers(c);var a=c.dpDiv.find("iframe.ui-datepicker-cover");a.length&&a.css({left:-f[0],top:-f[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()});c.dpDiv.find("."+this._dayOverClass+" a").mouseover();
f=this._getNumberOfMonths(c);a=f[1];c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<a&&c.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em");c.dpDiv[(1!=f[0]||1!=f[1]?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");c==b.datepicker._curInst&&b.datepicker._datepickerShowing&&c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&c.input[0]!=document.activeElement&&
c.input.focus();if(c.yearshtml){var d=c.yearshtml;setTimeout(function(){d===c.yearshtml&&c.yearshtml&&c.dpDiv.find("select.ui-datepicker-year:first").replaceWith(c.yearshtml);d=c.yearshtml=null},0)}},_getBorders:function(b){var c=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(c(b.css("border-left-width"))),parseFloat(c(b.css("border-top-width")))]},_checkOffset:function(c,e,a){var d=c.dpDiv.outerWidth(),f=c.dpDiv.outerHeight(),k=c.input?c.input.outerWidth():0,m=c.input?c.input.outerHeight():
0,l=document.documentElement.clientWidth+(a?0:b(document).scrollLeft()),p=document.documentElement.clientHeight+(a?0:b(document).scrollTop());e.left-=this._get(c,"isRTL")?d-k:0;e.left-=a&&e.left==c.input.offset().left?b(document).scrollLeft():0;e.top-=a&&e.top==c.input.offset().top+m?b(document).scrollTop():0;e.left-=Math.min(e.left,e.left+d>l&&l>d?Math.abs(e.left+d-l):0);e.top-=Math.min(e.top,e.top+f>p&&p>f?Math.abs(f+m):0);return e},_findPos:function(c){for(var e=this._getInst(c),e=this._get(e,
"isRTL");c&&("hidden"==c.type||1!=c.nodeType||b.expr.filters.hidden(c));)c=c[e?"previousSibling":"nextSibling"];c=b(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var e=this._curInst;if(e&&(!c||e==b.data(c,"datepicker"))&&this._datepickerShowing){c=this._get(e,"showAnim");var a=this._get(e,"duration"),d=function(){b.datepicker._tidyDialog(e)};if(b.effects&&(b.effects.effect[c]||b.effects[c]))e.dpDiv.hide(c,b.datepicker._get(e,"showOptions"),a,d);else e.dpDiv["slideDown"==c?"slideUp":
"fadeIn"==c?"fadeOut":"hide"](c?a:null,d);c||d();this._datepickerShowing=!1;(c=this._get(e,"onClose"))&&c.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){if(b.datepicker._curInst){c=
b(c.target);var e=b.datepicker._getInst(c[0]);(c[0].id!=b.datepicker._mainDivId&&0==c.parents("#"+b.datepicker._mainDivId).length&&!(c.hasClass(b.datepicker.markerClassName)||c.closest("."+b.datepicker._triggerClass).length||!b.datepicker._datepickerShowing||b.datepicker._inDialog&&b.blockUI)||c.hasClass(b.datepicker.markerClassName)&&b.datepicker._curInst!=e)&&b.datepicker._hideDatepicker()}},_adjustDate:function(c,e,a){c=b(c);var d=this._getInst(c[0]);this._isDisabledDatepicker(c[0])||(this._adjustInstDate(d,
e+("M"==a?this._get(d,"showCurrentAtPos"):0),a),this._updateDatepicker(d))},_gotoToday:function(c){c=b(c);var e=this._getInst(c[0]);if(this._get(e,"gotoCurrent")&&e.currentDay)e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear;else{var a=new Date;e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear()}this._notifyChange(e);this._adjustDate(c)},_selectMonthYear:function(c,e,a){c=b(c);var d=
this._getInst(c[0]);d["selected"+("M"==a?"Month":"Year")]=d["draw"+("M"==a?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10);this._notifyChange(d);this._adjustDate(c)},_selectDay:function(c,e,a,d){var f=b(c);b(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=b("a",d).html(),f.selectedMonth=f.currentMonth=e,f.selectedYear=f.currentYear=a,this._selectDate(c,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(c){c=b(c);this._getInst(c[0]);this._selectDate(c,"")},_selectDate:function(c,e){var a=b(c),a=this._getInst(a[0]);e=null!=e?e:this._formatDate(a);a.input&&a.input.val(e);this._updateAlternate(a);var d=this._get(a,"onSelect");d?d.apply(a.input?a.input[0]:null,[e,a]):a.input&&a.input.trigger("change");a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(c){var e=
this._get(c,"altField");if(e){var a=this._get(c,"altFormat")||this._get(c,"dateFormat"),d=this._getDate(c),f=this.formatDate(a,d,this._getFormatConfig(c));b(e).each(function(){b(this).val(f)})}},noWeekends:function(b){b=b.getDay();return[0<b&&6>b,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864E5)/7)+1},parseDate:function(c,e,a){if(null==c||null==e)throw"Invalid arguments";
e="object"==typeof e?e.toString():e+"";if(""==e)return null;for(var d=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),f=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,k=(a?a.dayNames:null)||this._defaults.dayNames,m=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,l=(a?a.monthNames:null)||this._defaults.monthNames,p=a=-1,B=-1,C=-1,E=!1,D=function(a){(a=Z+1<c.length&&c.charAt(Z+1)==a)&&Z++;return a},r=function(a){var d=
D(a);a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&d?4:"o"==a?3:2)+"}");a=e.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},t=function(a,d,c){a=b.map(D(a)?c:d,function(a,d){return[[d,a]]}).sort(function(a,d){return-(a[1].length-d[1].length)});var g=-1;b.each(a,function(a,d){var b=d[1];if(e.substr(u,b.length).toLowerCase()==b.toLowerCase())return g=d[0],u+=b.length,!1});if(-1!=g)return g+1;throw"Unknown name at position "+u;},s=function(){if(e.charAt(u)!=
c.charAt(Z))throw"Unexpected literal at position "+u;u++},u=0,Z=0;Z<c.length;Z++)if(E)"'"!=c.charAt(Z)||D("'")?s():E=!1;else switch(c.charAt(Z)){case "d":B=r("d");break;case "D":t("D",f,k);break;case "o":C=r("o");break;case "m":p=r("m");break;case "M":p=t("M",m,l);break;case "y":a=r("y");break;case "@":var N=new Date(r("@"));a=N.getFullYear();p=N.getMonth()+1;B=N.getDate();break;case "!":N=new Date((r("!")-this._ticksTo1970)/1E4);a=N.getFullYear();p=N.getMonth()+1;B=N.getDate();break;case "'":D("'")?
s():E=!0;break;default:s()}if(u<e.length&&(f=e.substr(u),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==a?a=(new Date).getFullYear():100>a&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=d?0:-100));if(-1<C){p=1;B=C;do{d=this._getDaysInMonth(a,p-1);if(B<=d)break;p++;B-=d}while(1)}N=this._daylightSavingAdjust(new Date(a,p-1,B));if(N.getFullYear()!=a||N.getMonth()+1!=p||N.getDate()!=B)throw"Invalid date";return N},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(b,c,a){if(!c)return"";var d=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,e=(a?a.dayNames:null)||this._defaults.dayNames,f=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort;a=(a?a.monthNames:null)||this._defaults.monthNames;var k=
function(a){(a=E+1<b.length&&b.charAt(E+1)==a)&&E++;return a},m=function(a,d,b){d=""+d;if(k(a))for(;d.length<b;)d="0"+d;return d},l=function(a,d,b,c){return k(a)?c[d]:b[d]},p="",C=!1;if(c)for(var E=0;E<b.length;E++)if(C)"'"!=b.charAt(E)||k("'")?p+=b.charAt(E):C=!1;else switch(b.charAt(E)){case "d":p+=m("d",c.getDate(),2);break;case "D":p+=l("D",c.getDay(),d,e);break;case "o":p+=m("o",Math.round(((new Date(c.getFullYear(),c.getMonth(),c.getDate())).getTime()-(new Date(c.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":p+=m("m",c.getMonth()+1,2);break;case "M":p+=l("M",c.getMonth(),f,a);break;case "y":p+=k("y")?c.getFullYear():(10>c.getYear()%100?"0":"")+c.getYear()%100;break;case "@":p+=c.getTime();break;case "!":p+=1E4*c.getTime()+this._ticksTo1970;break;case "'":k("'")?p+="'":C=!0;break;default:p+=b.charAt(E)}return p},_possibleChars:function(b){for(var c="",a=!1,d=function(a){(a=e+1<b.length&&b.charAt(e+1)==a)&&e++;return a},e=0;e<b.length;e++)if(a)"'"!=b.charAt(e)||d("'")?c+=b.charAt(e):
a=!1;else switch(b.charAt(e)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":d("'")?c+="'":a=!0;break;default:c+=b.charAt(e)}return c},_get:function(b,c){return b.settings[c]!==l?b.settings[c]:this._defaults[c]},_setDateFromField:function(b,c){if(b.input.val()!=b.lastVal){var a=this._get(b,"dateFormat"),d=b.lastVal=b.input?b.input.val():null,e,f;e=f=this._getDefaultDate(b);var k=this._getFormatConfig(b);try{e=this.parseDate(a,d,k)||f}catch(m){this.log(m),
d=c?"":d}b.selectedDay=e.getDate();b.drawMonth=b.selectedMonth=e.getMonth();b.drawYear=b.selectedYear=e.getFullYear();b.currentDay=d?e.getDate():0;b.currentMonth=d?e.getMonth():0;b.currentYear=d?e.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(c,e,a){var d=function(a){var d=new Date;d.setDate(d.getDate()+a);return d},f=function(a){try{return b.datepicker.parseDate(b.datepicker._get(c,
"dateFormat"),a,b.datepicker._getFormatConfig(c))}catch(d){}for(var e=(a.toLowerCase().match(/^c/)?b.datepicker._getDate(c):null)||new Date,f=e.getFullYear(),n=e.getMonth(),e=e.getDate(),k=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,q=k.exec(a);q;){switch(q[2]||"d"){case "d":case "D":e+=parseInt(q[1],10);break;case "w":case "W":e+=7*parseInt(q[1],10);break;case "m":case "M":n+=parseInt(q[1],10);e=Math.min(e,b.datepicker._getDaysInMonth(f,n));break;case "y":case "Y":f+=parseInt(q[1],10),e=Math.min(e,b.datepicker._getDaysInMonth(f,
n))}q=k.exec(a)}return new Date(f,n,e)};if(e=(e=null==e||""===e?a:"string"==typeof e?f(e):"number"==typeof e?isNaN(e)?a:d(e):new Date(e.getTime()))&&"Invalid Date"==e.toString()?a:e)e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);return this._daylightSavingAdjust(e)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(12<b.getHours()?b.getHours()+2:0);return b},_setDate:function(b,c,a){var d=!c,e=b.selectedMonth,f=b.selectedYear;c=this._restrictMinMax(b,this._determineDate(b,
c,new Date));b.selectedDay=b.currentDay=c.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=c.getMonth();b.drawYear=b.selectedYear=b.currentYear=c.getFullYear();e==b.selectedMonth&&f==b.selectedYear||a||this._notifyChange(b);this._adjustInstDate(b);b.input&&b.input.val(d?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""==b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_attachHandlers:function(e){var f=this._get(e,
"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){b(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+c].datepicker._adjustDate(a,-f,"M")},next:function(){window["DP_jQuery_"+c].datepicker._adjustDate(a,+f,"M")},hide:function(){window["DP_jQuery_"+c].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+c].datepicker._gotoToday(a)},selectDay:function(){window["DP_jQuery_"+c].datepicker._selectDay(a,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+c].datepicker._selectMonthYear(a,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+c].datepicker._selectMonthYear(a,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(c){var e=new Date,e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate())),a=this._get(c,"isRTL"),d=this._get(c,"showButtonPanel"),f=this._get(c,"hideIfNoPrevNext"),k=this._get(c,
"navigationAsDateFormat"),m=this._getNumberOfMonths(c),l=this._get(c,"showCurrentAtPos"),p=this._get(c,"stepMonths"),B=1!=m[0]||1!=m[1],C=this._daylightSavingAdjust(c.currentDay?new Date(c.currentYear,c.currentMonth,c.currentDay):new Date(9999,9,9)),E=this._getMinMaxDate(c,"min"),D=this._getMinMaxDate(c,"max"),l=c.drawMonth-l,r=c.drawYear;0>l&&(l+=12,r--);if(D)for(var t=this._daylightSavingAdjust(new Date(D.getFullYear(),D.getMonth()-m[0]*m[1]+1,D.getDate())),t=E&&t<E?E:t;this._daylightSavingAdjust(new Date(r,
l,1))>t;)l--,0>l&&(l=11,r--);c.drawMonth=l;c.drawYear=r;var t=this._get(c,"prevText"),t=k?this.formatDate(t,this._daylightSavingAdjust(new Date(r,l-p,1)),this._getFormatConfig(c)):t,t=this._canAdjustMonth(c,-1,r,l)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+t+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"e":"w")+'">'+t+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+t+'"><span class="ui-icon ui-icon-circle-triangle-'+
(a?"e":"w")+'">'+t+"</span></a>",s=this._get(c,"nextText"),s=k?this.formatDate(s,this._daylightSavingAdjust(new Date(r,l+p,1)),this._getFormatConfig(c)):s,f=this._canAdjustMonth(c,1,r,l)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(a?"w":
"e")+'">'+s+"</span></a>",p=this._get(c,"currentText"),s=this._get(c,"gotoCurrent")&&c.currentDay?C:e,p=k?this.formatDate(p,s,this._getFormatConfig(c)):p,k=c.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(c,"closeText")+"</button>",d=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(a?k:"")+(this._isInRange(c,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
p+"</button>":"")+(a?"":k)+"</div>":"",k=parseInt(this._get(c,"firstDay"),10),k=isNaN(k)?0:k,p=this._get(c,"showWeek"),s=this._get(c,"dayNames");this._get(c,"dayNamesShort");var u=this._get(c,"dayNamesMin"),Z=this._get(c,"monthNames"),N=this._get(c,"monthNamesShort"),x=this._get(c,"beforeShowDay"),K=this._get(c,"showOtherMonths"),G=this._get(c,"selectOtherMonths");this._get(c,"calculateWeek");for(var Q=this._getDefaultDate(c),S="",ha=0;ha<m[0];ha++){var ba="";this.maxRows=4;for(var V=0;V<m[1];V++){var M=
this._daylightSavingAdjust(new Date(r,l,c.selectedDay)),U=" ui-corner-all",J="";if(B){J+='<div class="ui-datepicker-group';if(1<m[1])switch(V){case 0:J+=" ui-datepicker-group-first";U=" ui-corner-"+(a?"right":"left");break;case m[1]-1:J+=" ui-datepicker-group-last";U=" ui-corner-"+(a?"left":"right");break;default:J+=" ui-datepicker-group-middle",U=""}J+='">'}for(var J=J+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+U+'">'+(/all|left/.test(U)&&0==ha?a?f:t:"")+(/all|right/.test(U)&&
0==ha?a?t:f:"")+this._generateMonthYearHeader(c,l,r,E,D,0<ha||0<V,Z,N)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),aa=p?'<th class="ui-datepicker-week-col">'+this._get(c,"weekHeader")+"</th>":"",U=0;7>U;U++)var X=(U+k)%7,aa=aa+("<th"+(5<=(U+k+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[X]+'">'+u[X]+"</span></th>");J+=aa+"</tr></thead><tbody>";aa=this._getDaysInMonth(r,l);r==c.selectedYear&&l==c.selectedMonth&&(c.selectedDay=Math.min(c.selectedDay,aa));U=(this._getFirstDayOfMonth(r,
l)-k+7)%7;aa=Math.ceil((U+aa)/7);this.maxRows=aa=B?this.maxRows>aa?this.maxRows:aa:aa;for(var X=this._daylightSavingAdjust(new Date(r,l,1-U)),fa=0;fa<aa;fa++){for(var J=J+"<tr>",ua=p?'<td class="ui-datepicker-week-col">'+this._get(c,"calculateWeek")(X)+"</td>":"",U=0;7>U;U++){var va=x?x.apply(c.input?c.input[0]:null,[X]):[!0,""],la=X.getMonth()!=l,oa=la&&!G||!va[0]||E&&X<E||D&&X>D,ua=ua+('<td class="'+(5<=(U+k+6)%7?" ui-datepicker-week-end":"")+(la?" ui-datepicker-other-month":"")+(X.getTime()==M.getTime()&&
l==c.selectedMonth&&c._keyEvent||Q.getTime()==X.getTime()&&Q.getTime()==M.getTime()?" "+this._dayOverClass:"")+(oa?" "+this._unselectableClass+" ui-state-disabled":"")+(la&&!K?"":" "+va[1]+(X.getTime()==C.getTime()?" "+this._currentClass:"")+(X.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(la&&!K||!va[2]?"":' title="'+va[2]+'"')+(oa?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(la&&!K?"&#xa0;":oa?'<span class="ui-state-default">'+
X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==e.getTime()?" ui-state-highlight":"")+(X.getTime()==C.getTime()?" ui-state-active":"")+(la?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>");X.setDate(X.getDate()+1);X=this._daylightSavingAdjust(X)}J+=ua+"</tr>"}l++;11<l&&(l=0,r++);J+="</tbody></table>"+(B?"</div>"+(0<m[0]&&V==m[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");ba+=J}S+=ba}S+=d+(b.browser.msie&&7>parseInt(b.browser.version,10)&&!c.inline?
'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");c._keyEvent=!1;return S},_generateMonthYearHeader:function(b,c,a,d,e,f,k,m){var l=this._get(b,"changeMonth"),p=this._get(b,"changeYear"),C=this._get(b,"showMonthAfterYear"),E='<div class="ui-datepicker-title">',D="";if(f||!l)D+='<span class="ui-datepicker-month">'+k[c]+"</span>";else{k=d&&d.getFullYear()==a;for(var r=e&&e.getFullYear()==a,D=D+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
t=0;12>t;t++)(!k||t>=d.getMonth())&&(!r||t<=e.getMonth())&&(D+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+m[t]+"</option>");D+="</select>"}C||(E+=D+(!f&&l&&p?"":"&#xa0;"));if(!b.yearshtml)if(b.yearshtml="",f||!p)E+='<span class="ui-datepicker-year">'+a+"</span>";else{m=this._get(b,"yearRange").split(":");var s=(new Date).getFullYear();k=function(d){d=d.match(/c[+-].*/)?a+parseInt(d.substring(1),10):d.match(/[+-].*/)?s+parseInt(d,10):parseInt(d,10);return isNaN(d)?s:d};c=k(m[0]);
m=Math.max(c,k(m[1]||""));c=d?Math.max(c,d.getFullYear()):c;m=e?Math.min(m,e.getFullYear()):m;for(b.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';c<=m;c++)b.yearshtml+='<option value="'+c+'"'+(c==a?' selected="selected"':"")+">"+c+"</option>";b.yearshtml+="</select>";E+=b.yearshtml;b.yearshtml=null}E+=this._get(b,"yearSuffix");C&&(E+=(!f&&l&&p?"":"&#xa0;")+D);return E+"</div>"},_adjustInstDate:function(b,c,a){var d=b.drawYear+("Y"==a?c:0),e=b.drawMonth+
("M"==a?c:0);c=Math.min(b.selectedDay,this._getDaysInMonth(d,e))+("D"==a?c:0);d=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(d,e,c)));b.selectedDay=d.getDate();b.drawMonth=b.selectedMonth=d.getMonth();b.drawYear=b.selectedYear=d.getFullYear();"M"!=a&&"Y"!=a||this._notifyChange(b)},_restrictMinMax:function(b,c){var a=this._getMinMaxDate(b,"min"),d=this._getMinMaxDate(b,"max"),a=a&&c<a?a:c;return d&&a>d?d:a},_notifyChange:function(b){var c=this._get(b,"onChangeMonthYear");c&&c.apply(b.input?
b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(b,c){return this._determineDate(b,this._get(b,c+"Date"),null)},_getDaysInMonth:function(b,c){return 32-this._daylightSavingAdjust(new Date(b,c,32)).getDate()},_getFirstDayOfMonth:function(b,c){return(new Date(b,c,1)).getDay()},_canAdjustMonth:function(b,c,a,d){var e=this._getNumberOfMonths(b);a=this._daylightSavingAdjust(new Date(a,
d+(0>c?c:e[0]*e[1]),1));0>c&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth()));return this._isInRange(b,a)},_isInRange:function(b,c){var a=this._getMinMaxDate(b,"min"),d=this._getMinMaxDate(b,"max");return(!a||c.getTime()>=a.getTime())&&(!d||c.getTime()<=d.getTime())},_getFormatConfig:function(b){var c=this._get(b,"shortYearCutoff"),c="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10);return{shortYearCutoff:c,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,
"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,c,a,d){c||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);c=c?"object"==typeof c?c:this._daylightSavingAdjust(new Date(d,a,c)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,"dateFormat"),c,this._getFormatConfig(b))}});b.fn.datepicker=function(c){if(!this.length)return this;
b.datepicker.initialized||(b(document).mousedown(b.datepicker._checkExternalClick).find(document.body).append(b.datepicker.dpDiv),b.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof c&&("isDisabled"==c||"getDate"==c||"widget"==c)||"option"==c&&2==arguments.length&&"string"==typeof arguments[1]?b.datepicker["_"+c+"Datepicker"].apply(b.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof c?b.datepicker["_"+c+"Datepicker"].apply(b.datepicker,
[this].concat(e)):b.datepicker._attachDatepicker(this,c)})};b.datepicker=new m;b.datepicker.initialized=!1;b.datepicker.uuid=(new Date).getTime();b.datepicker.version="1.9.0";window["DP_jQuery_"+c]=b})(l);(function(b,l){var m={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},k={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};b.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,
height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(f){var c=b(this).css(f).offset().top;0>c&&b(this).css("top",f.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.options.title=this.options.title||this.originalTitle;var f=this,c=this.options,e=c.title||"&#160;",g=(this.uiDialog=b("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(a){c.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE&&(f.close(a),a.preventDefault())}).mousedown(function(a){f.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);
var k=(this.uiDialogTitlebar=b("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(g),a=b("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();f.close(a)}).appendTo(k);(this.uiDialogTitlebarCloseText=b("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(a);var e=b("<span>").uniqueId().addClass("ui-dialog-title").html(e).prependTo(k),d=(this.uiDialogButtonPane=
b("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=b("<div>")).addClass("ui-dialog-buttonset").appendTo(d);g.attr({role:"dialog","aria-labelledby":e.attr("id")});k.find("*").add(k).disableSelection();this._hoverable(a);this._focusable(a);c.draggable&&b.fn.draggable&&this._makeDraggable();c.resizable&&b.fn.resizable&&this._makeResizable();this._createButtons(c.buttons);this._isOpen=!1;b.fn.bgiframe&&g.bgiframe();this._on(g,{keydown:function(a){if(c.modal&&
a.keyCode===b.ui.keyCode.TAB){var d=b(":tabbable",g),e=d.filter(":first"),d=d.filter(":last");if(a.target===d[0]&&!a.shiftKey)return e.focus(1),!1;if(a.target===e[0]&&a.shiftKey)return d.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var b,c=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",
this.originalTitle);b=c.parent.children().eq(c.index);b.length&&b[0]!==this.element[0]?b.before(this.element):c.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(f){var c=this,e,g;if(this._isOpen&&!1!==this._trigger("beforeClose",f))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){c._trigger("close",f)}):(this.uiDialog.hide(),this._trigger("close",f)),b.ui.dialog.overlay.resize(),this.options.modal&&
(e=0,b(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(g=b(this).css("z-index"),isNaN(g)||(e=Math.max(e,g)))}),b.ui.dialog.maxZ=e),this},isOpen:function(){return this._isOpen},moveToTop:function(f,c){var e=this.options;if(e.modal&&!f||!e.stack&&!e.modal)return this._trigger("focus",c);e.zIndex>b.ui.dialog.maxZ&&(b.ui.dialog.maxZ=e.zIndex);this.overlay&&(b.ui.dialog.maxZ+=1,b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ,this.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ));e={scrollTop:this.element.scrollTop(),
scrollLeft:this.element.scrollLeft()};b.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",b.ui.dialog.maxZ);this.element.attr(e);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var f;f=this.options;var c=this.uiDialog;this._size();this._position(f.position);c.show(f.show);this.overlay=f.modal?new b.ui.dialog.overlay(this):null;this.moveToTop(!0);f=this.element.find(":tabbable");f.length||(f=this.uiDialogButtonPane.find(":tabbable"),f.length||(f=c));f.eq(0).focus();this._isOpen=
!0;this._trigger("open");return this}},_createButtons:function(f){var c=this,e=!1;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();"object"===typeof f&&null!==f&&b.each(f,function(){return!(e=!0)});e?(b.each(f,function(e,f){f=b.isFunction(f)?{click:f,text:e}:f;var a=b("<button type='button'>").attr(f,!0).unbind("click").click(function(){f.click.apply(c.element[0],arguments)}).appendTo(c.uiButtonSet);b.fn.button&&a.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):
this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function f(b){return{position:b.position,offset:b.offset}}var c=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,k){b(this).addClass("ui-dialog-dragging");c._trigger("dragStart",e,f(k))},drag:function(b,e){c._trigger("drag",b,f(e))},stop:function(g,k){e.position=[k.position.left-c.document.scrollLeft(),k.position.top-
c.document.scrollTop()];b(this).removeClass("ui-dialog-dragging");c._trigger("dragStop",g,f(k));b.ui.dialog.overlay.resize()}})},_makeResizable:function(f){function c(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}f=f===l?this.options.resizable:f;var e=this,g=this.options,k=this.uiDialog.css("position");f="string"===typeof f?f:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,
maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:this._minHeight(),handles:f,start:function(a,d){b(this).addClass("ui-dialog-resizing");e._trigger("resizeStart",a,c(d))},resize:function(a,d){e._trigger("resize",a,c(d))},stop:function(a,d){b(this).removeClass("ui-dialog-resizing");g.height=b(this).height();g.width=b(this).width();e._trigger("resizeStop",a,c(d));b.ui.dialog.overlay.resize()}}).css("position",k).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},
_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(f){var c=[],e=[0,0],g;if(f){if("string"===typeof f||"object"===typeof f&&"0"in f)c=f.split?f.split(" "):[f[0],f[1]],1===c.length&&(c[1]=c[0]),b.each(["left","top"],function(b,a){+c[b]===c[b]&&(e[b]=c[b],c[b]=a)}),f={my:c.join(" "),at:c.join(" "),offset:e.join(" ")};f=b.extend({},b.ui.dialog.prototype.options.position,f)}else f=b.ui.dialog.prototype.options.position;(g=this.uiDialog.is(":visible"))||
this.uiDialog.show();this.uiDialog.position(f);g||this.uiDialog.hide()},_setOptions:function(f){var c=this,e={},g=!1;b.each(f,function(b,a){c._setOption(b,a);b in m&&(g=!0);b in k&&(e[b]=a)});g&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(f,c){var e,g=this.uiDialog;switch(f){case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":g.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c);break;case "disabled":c?g.addClass("ui-dialog-disabled"):g.removeClass("ui-dialog-disabled");break;case "draggable":(e=g.is(":data(draggable)"))&&!c&&g.draggable("destroy");!e&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(e=g.is(":data(resizable)"))&&!c&&g.resizable("destroy");e&&"string"===typeof c&&g.resizable("option","handles",c);e||!1===c||this._makeResizable(c);break;case "title":b(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}this._super(f,
c)},_size:function(){var f,c,e=this.options,g=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});e.minWidth>e.width&&(e.width=e.minWidth);f=this.uiDialog.css({height:"auto",width:e.width}).outerHeight();c=Math.max(0,e.minHeight-f);"auto"===e.height?b.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),f=this.element.css("height","auto").height(),g||this.uiDialog.hide(),this.element.height(Math.max(f,c))):this.element.height(Math.max(e.height-
f,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});b.extend(b.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(b){b=b.attr("id");b||(b=this.uuid+=1);return"ui-dialog-title-"+b},overlay:function(f){this.$el=b.ui.dialog.overlay.create(f)}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus mousedown mouseup keydown keypress click".split(" "),function(b){return b+".dialog-overlay"}).join(" "),create:function(f){0===
this.instances.length&&(setTimeout(function(){b.ui.dialog.overlay.instances.length&&b(document).bind(b.ui.dialog.overlay.events,function(c){if(b(c.target).zIndex()<b.ui.dialog.overlay.maxZ)return!1})},1),b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||b("<div>").addClass("ui-widget-overlay");b(document).bind("keydown.dialog-overlay",function(e){var g=b.ui.dialog.overlay.instances;0!==g.length&&g[g.length-1]===c&&f.options.closeOnEscape&&!e.isDefaultPrevented()&&
e.keyCode&&e.keyCode===b.ui.keyCode.ESCAPE&&(f.close(e),e.preventDefault())});c.appendTo(document.body).css({width:this.width(),height:this.height()});b.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(f){var c=b.inArray(f,this.instances),e=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&b([document,window]).unbind(".dialog-overlay");f.height(0).width(0).remove();b.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});
this.maxZ=e},height:function(){var f,c;return b.browser.msie?(f=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),f<c?b(window).height()+"px":f+"px"):b(document).height()+"px"},width:function(){var f,c;return b.browser.msie?(f=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),f<c?b(window).width()+"px":
f+"px"):b(document).width()+"px"},resize:function(){var f=b([]);b.each(b.ui.dialog.overlay.instances,function(){f=f.add(this)});f.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)}})})(l);(function(b,l){var m=!1;b.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",
at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,b.proxy(function(b){this.options.disabled&&b.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");
this._on({"mousedown .ui-menu-item > a":function(b){b.preventDefault()},"click .ui-state-disabled > a":function(b){b.preventDefault()},"click .ui-menu-item:has(a)":function(k){var f=b(k.target).closest(".ui-menu-item");!m&&f.not(".ui-state-disabled").length&&(m=!0,this.select(k),f.has(".ui-menu").length?this.expand(k):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(k){var f=
b(k.currentTarget);f.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(k,f)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,f){var c=this.active||this.element.children(".ui-menu-item").eq(0);f||this.focus(b,c)},blur:function(k){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(k)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(k){b(k.target).closest(".ui-menu").length||
this.collapseAll(k);m=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var k=
b(this);k.data("ui-menu-submenu-carat")&&k.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(k){function f(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c,e,g,m,a=!0;switch(k.keyCode){case b.ui.keyCode.PAGE_UP:this.previousPage(k);break;case b.ui.keyCode.PAGE_DOWN:this.nextPage(k);break;case b.ui.keyCode.HOME:this._move("first","first",k);break;case b.ui.keyCode.END:this._move("last","last",k);break;case b.ui.keyCode.UP:this.previous(k);
break;case b.ui.keyCode.DOWN:this.next(k);break;case b.ui.keyCode.LEFT:this.collapse(k);break;case b.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(k);break;case b.ui.keyCode.ENTER:case b.ui.keyCode.SPACE:this._activate(k);break;case b.ui.keyCode.ESCAPE:this.collapse(k);break;default:a=!1,c=this.previousFilter||"",e=String.fromCharCode(k.keyCode),g=!1,clearTimeout(this.filterTimer),e===c?g=!0:e=c+e,m=RegExp("^"+f(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return m.test(b(this).children("a").text())}),
c=g&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(k.keyCode),m=RegExp("^"+f(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return m.test(b(this).children("a").text())})),c.length?(this.focus(k,c),1<c.length?(this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}a&&k.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||
(this.active.children("a[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var k,f=this.options.icons.submenu,c=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});k=c.add(this.element);k.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});k.children(":not(.ui-menu-item)").each(function(){var c=b(this);/[^\-\u2014\u2013\s]/.test(c.text())||c.addClass("ui-widget-content ui-menu-divider")});k.children(".ui-state-disabled").attr("aria-disabled","true");c.each(function(){var c=b(this),g=c.prev("a"),k=b("<span>").addClass("ui-menu-icon ui-icon "+f).data("ui-menu-submenu-carat",!0);g.attr("aria-haspopup","true").prepend(k);c.attr("aria-labelledby",g.attr("id"))});this.active&&!b.contains(this.element[0],this.active[0])&&
this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(b,f){var c;this.blur(b,b&&"focus"===b.type);this._scrollIntoView(f);this.active=f.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},
this.delay);c=f.children(".ui-menu");c.length&&/^mouse/.test(b.type)&&this._startOpening(c);this.activeMenu=f.parent();this._trigger("focus",b,{item:f})},_scrollIntoView:function(k){var f,c,e;this._hasScroll()&&(f=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||0,c=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0,f=k.offset().top-this.activeMenu.offset().top-f-c,c=this.activeMenu.scrollTop(),e=this.activeMenu.height(),k=k.height(),0>f?this.activeMenu.scrollTop(c+f):f+k>e&&this.activeMenu.scrollTop(c+
f-e+k))},blur:function(b,f){f||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(k){var f=b.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(k.parents(".ui-menu")).hide().attr("aria-hidden",
"true");k.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(f)},collapseAll:function(k,f){clearTimeout(this.timer);this.timer=this._delay(function(){var c=f?this.element:b(k&&k.target).closest(this.element.find(".ui-menu"));c.length||(c=this.element);this._close(c);this.blur(k);this.activeMenu=c},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},
collapse:function(b){var f=this.active&&this.active.parent().closest(".ui-menu-item",this.element);f&&f.length&&(this._close(),this.focus(b,f))},expand:function(b){var f=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();f&&f.length&&(this._open(f.parent()),this._delay(function(){this.focus(b,f)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,f,c){var e;this.active&&(e="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.children(".ui-menu-item")[f]());this.focus(c,e)},nextPage:function(k){var f,c,e;this.active?this.isLastItem()||(this._hasScroll()?(c=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){f=
b(this);return 0>f.offset().top-c-e}),this.focus(k,f)):this.focus(k,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(k)},previousPage:function(k){var f,c,e;this.active?this.isFirstItem()||(this._hasScroll()?(c=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){f=b(this);return 0<f.offset().top-c+e}),this.focus(k,f)):this.focus(k,this.activeMenu.children(".ui-menu-item").first())):this.next(k)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(k){this.active=this.active||b(k.target).closest(".ui-menu-item");var f={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(k,!0);this._trigger("select",k,f)}})})(l);(function(b,l){b.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(b){if(b===l)return this._value();this._setOption("value",
b);return this},_setOption:function(b,k){"value"===b&&(this.options.value=k,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(b,k)},_value:function(){var b=this.options.value;"number"!==typeof b&&(b=0);return Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var b=this.value(),k=this._percentage();this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));this.valueDiv.toggle(b>
this.min).toggleClass("ui-corner-right",b===this.options.max).width(k.toFixed(0)+"%");this.element.attr("aria-valuenow",b)}})})(l);(function(b,l){b.widget("ui.slider",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var m,k=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),c=k.values&&k.values.length||1,e=[];this._mouseSliding=
this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(k.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);k.range&&(!0===k.range&&(k.values||(k.values=[this._valueMin(),this._valueMin()]),k.values.length&&2!==k.values.length&&(k.values=[k.values[0],k.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+
("min"===k.range||"max"===k.range?" ui-slider-range-"+k.range:"")));for(m=f.length;m<c;m++)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=f.add(b(e.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).mouseenter(function(){k.disabled||b(this).addClass("ui-state-hover")}).mouseleave(function(){b(this).removeClass("ui-state-hover")}).focus(function(){k.disabled?
b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(c){b(this).data("ui-slider-handle-index",c)});this._on(this.handles,{keydown:function(c){var e,a,d,f=b(c.target).data("ui-slider-handle-index");switch(c.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(c.preventDefault(),
!this._keySliding&&(this._keySliding=!0,b(c.target).addClass("ui-state-active"),e=this._start(c,f),!1===e))return}d=this.options.step;e=this.options.values&&this.options.values.length?a=this.values(f):a=this.value();switch(c.keyCode){case b.ui.keyCode.HOME:a=this._valueMin();break;case b.ui.keyCode.END:a=this._valueMax();break;case b.ui.keyCode.PAGE_UP:a=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/
5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(e===this._valueMax())return;a=this._trimAlignValue(e+d);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(e===this._valueMin())return;a=this._trimAlignValue(e-d)}this._slide(c,f,a)},keyup:function(c){var e=b(c.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(c,e),this._change(c,e),b(c.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();
this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(m){var k,f,c,e,g,q=this;g=this.options;if(g.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();k=this._normValueFromMouse({x:m.pageX,y:m.pageY});f=this._valueMax()-this._valueMin()+1;this.handles.each(function(a){var d=
Math.abs(k-q.values(a));f>d&&(f=d,c=b(this),e=a)});!0===g.range&&this.values(1)===g.min&&(e+=1,c=b(this.handles[e]));if(!1===this._start(m,e))return!1;this._mouseSliding=!0;this._handleIndex=e;c.addClass("ui-state-active").focus();g=c.offset();this._clickOffset=b(m.target).parents().andSelf().is(".ui-slider-handle")?{left:m.pageX-g.left-c.width()/2,top:m.pageY-g.top-c.height()/2-(parseInt(c.css("borderTopWidth"),10)||0)-(parseInt(c.css("borderBottomWidth"),10)||0)+(parseInt(c.css("marginTop"),10)||
0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(m,e,k);return this._animateOff=!0},_mouseStart:function(b){return!0},_mouseDrag:function(b){var k=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,k);return!1},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation=
"vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var k;"horizontal"===this.orientation?(k=this.elementSize.width,b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(k=this.elementSize.height,b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));k=b/k;1<k&&(k=1);0>k&&(k=0);"vertical"===this.orientation&&(k=1-k);b=this._valueMax()-this._valueMin();k=this._valueMin()+k*b;return this._trimAlignValue(k)},_start:function(b,
k){var f={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(f.value=this.values(k),f.values=this.values());return this._trigger("start",b,f)},_slide:function(b,k,f){var c;this.options.values&&this.options.values.length?(c=this.values(k?0:1),2===this.options.values.length&&!0===this.options.range&&(0===k&&f>c||1===k&&f<c)&&(f=c),f!==this.values(k)&&(c=this.values(),c[k]=f,b=this._trigger("slide",b,{handle:this.handles[k],value:f,values:c}),this.values(k?0:
1),!1!==b&&this.values(k,f,!0))):f!==this.value()&&(b=this._trigger("slide",b,{handle:this.handles[k],value:f}),!1!==b&&this.value(f))},_stop:function(b,k){var f={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(f.value=this.values(k),f.values=this.values());this._trigger("stop",b,f)},_change:function(b,k){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(f.value=
this.values(k),f.values=this.values());this._trigger("change",b,f)}},value:function(b){if(arguments.length)this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(m,k){var f,c,e;if(1<arguments.length)this.options.values[m]=this._trimAlignValue(k),this._refreshValue(),this._change(null,m);else if(arguments.length)if(b.isArray(arguments[0])){f=this.options.values;c=arguments[0];for(e=0;e<f.length;e+=1)f[e]=this._trimAlignValue(c[e]),
this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(m):this.value();else return this._values()},_setOption:function(m,k){var f,c=0;b.isArray(this.options.values)&&(c=this.options.values.length);b.Widget.prototype._setOption.apply(this,arguments);switch(m){case "disabled":k?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",
!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(f=0;f<c;f+=1)this._change(null,f);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},
_values:function(b){var k,f;if(arguments.length)return k=this.options.values[b],k=this._trimAlignValue(k);k=this.options.values.slice();for(f=0;f<k.length;f+=1)k[f]=this._trimAlignValue(k[f]);return k},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var k=0<this.options.step?this.options.step:1,f=(b-this._valueMin())%k;b-=f;2*Math.abs(f)>=k&&(b+=0<f?k:-k);return parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},
_valueMax:function(){return this.options.max},_refreshValue:function(){var m,k,f,c,e,g=this.options.range,q=this.options,a=this,d=this._animateOff?!1:q.animate,n={};if(this.options.values&&this.options.values.length)this.handles.each(function(c,e){k=(a.values(c)-a._valueMin())/(a._valueMax()-a._valueMin())*100;n["horizontal"===a.orientation?"left":"bottom"]=k+"%";b(this).stop(1,1)[d?"animate":"css"](n,q.animate);if(!0===a.options.range)if("horizontal"===a.orientation){if(0===c)a.range.stop(1,1)[d?
"animate":"css"]({left:k+"%"},q.animate);if(1===c)a.range[d?"animate":"css"]({width:k-m+"%"},{queue:!1,duration:q.animate})}else{if(0===c)a.range.stop(1,1)[d?"animate":"css"]({bottom:k+"%"},q.animate);if(1===c)a.range[d?"animate":"css"]({height:k-m+"%"},{queue:!1,duration:q.animate})}m=k});else{f=this.value();c=this._valueMin();e=this._valueMax();k=e!==c?(f-c)/(e-c)*100:0;n["horizontal"===this.orientation?"left":"bottom"]=k+"%";this.handle.stop(1,1)[d?"animate":"css"](n,q.animate);if("min"===g&&"horizontal"===
this.orientation)this.range.stop(1,1)[d?"animate":"css"]({width:k+"%"},q.animate);if("max"===g&&"horizontal"===this.orientation)this.range[d?"animate":"css"]({width:100-k+"%"},{queue:!1,duration:q.animate});if("min"===g&&"vertical"===this.orientation)this.range.stop(1,1)[d?"animate":"css"]({height:k+"%"},q.animate);if("max"===g&&"vertical"===this.orientation)this.range[d?"animate":"css"]({height:100-k+"%"},{queue:!1,duration:q.animate})}}})})(l);(function(b){function l(b){return function(){var k=
this.element.val();b.apply(this,arguments);this._refresh();k!==this.element.val()&&this._trigger("change")}}b.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",
this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var m={},k=this.element;b.each(["min","max","step"],function(b,c){var e=k.attr(c);void 0!==e&&e.length&&(m[c]=e)});return m},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");
this.previous=this.element.val()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",b))},mousewheel:function(b,k){if(k){if(!this.spinning&&!this._start(b))return!1;this._spin((0<k?1:-1)*this.options.step,b);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100);b.preventDefault()}},"mousedown .ui-spinner-button":function(m){function k(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=f,this._delay(function(){this.previous=f}))}var f;f=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();m.preventDefault();k.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;k.call(this)});!1!==this._start(m)&&this._repeat(null,b(m.currentTarget).hasClass("ui-spinner-up")?1:-1,m)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(m){if(b(m.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(m))return!1;this._repeat(null,b(m.currentTarget).hasClass("ui-spinner-up")?1:-1,m)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(b);this.element.attr("role","spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*
b.height())&&0<b.height()&&b.height(b.height());this.options.disabled&&this.disable()},_keydown:function(m){var k=this.options,f=b.ui.keyCode;switch(m.keyCode){case f.UP:return this._repeat(null,1,m),!0;case f.DOWN:return this._repeat(null,-1,m),!0;case f.PAGE_UP:return this._repeat(null,k.page,m),!0;case f.PAGE_DOWN:return this._repeat(null,-k.page,m),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(b){if(!this.spinning&&!1===this._trigger("start",b))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(b,k,f){b=b||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,k,f)},b);this._spin(k*this.options.step,f)},_spin:function(b,k){var f=this.value()||0;this.counter||
(this.counter=1);f=this._adjustValue(f+b*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",k,{value:f})||(this._value(f),this.counter++)},_increment:function(m){var k=this.options.incremental;return k?b.isFunction(k)?k(m):Math.floor(m*m*m/5E4-m*m/500+17*m/200+1):1},_precision:function(){var b=this._precisionOf(this.options.step);null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min)));return b},_precisionOf:function(b){b=b.toString();var k=b.indexOf(".");
return-1===k?0:b.length-k-1},_adjustValue:function(b){var k,f=this.options;k=null!==f.min?f.min:0;b=Math.round((b-k)/f.step)*f.step;b=k+b;b=parseFloat(b.toFixed(this._precision()));return null!==f.max&&b>f.max?f.max:null!==f.min&&b<f.min?f.min:b},_stop:function(b){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",b))},_setOption:function(b,k){if("culture"===b||"numberFormat"===b){var f=this._parse(this.element.val());this.options[b]=
k;this.element.val(this._format(f))}else"max"!==b&&"min"!==b&&"step"!==b||"string"!==typeof k||(k=this._parse(k)),this._super(b,k),"disabled"===b&&(k?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:l(function(b){this._super(b);this._value(this.element.val())}),_parse:function(b){"string"===typeof b&&""!==b&&(b=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(b,10,this.options.culture):
+b);return""===b||isNaN(b)?null:b},_format:function(b){return""===b?"":window.Globalize&&this.options.numberFormat?Globalize.format(b,this.options.numberFormat,this.options.culture):b},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(b,k){var f;""!==b&&(f=this._parse(b),null!==f&&(k||(f=this._adjustValue(f)),b=this._format(f)));this.element.val(b);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:l(function(b){this._stepUp(b)}),_stepUp:function(b){this._spin((b||1)*this.options.step)},stepDown:l(function(b){this._stepDown(b)}),_stepDown:function(b){this._spin((b||1)*-this.options.step)},pageUp:l(function(b){this._stepUp((b||1)*this.options.page)}),pageDown:l(function(b){this._stepDown((b||1)*this.options.page)}),
value:function(b){if(!arguments.length)return this._parse(this.element.val());l(this._value).call(this,b)},widget:function(){return this.uiSpinner}})})(l);(function(b,l){function m(b){b=b.cloneNode(!1);return 1<b.hash.length&&b.href.replace(f,"")===location.href.replace(f,"")}var k=0,f=/#.*$/;b.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var c=
this,e=this.options,f=e.active;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(c){b(this).is(".ui-state-disabled")&&c.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){b(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===f&&(location.hash&&this.anchors.each(function(b,
a){if(a.hash===location.hash)return f=b,!1}),null===f&&(f=this.tabs.filter(".ui-tabs-active").index()),null===f||-1===f)&&(f=this.tabs.length?0:!1);!1!==f&&(f=this.tabs.index(this.tabs.eq(f)),-1===f&&(f=e.collapsible?!1:0));e.active=f;!e.collapsible&&!1===e.active&&this.anchors.length&&(e.active=0);b.isArray(e.disabled)&&(e.disabled=b.unique(e.disabled.concat(b.map(this.tabs.filter(".ui-state-disabled"),function(b){return c.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(this.options.active):b();this._refresh();this.active.length&&this.load(e.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):b()}},_tabKeydown:function(c){var e=b(this.document[0].activeElement).closest("li"),f=this.tabs.index(e),k=!0;if(!this._handlePageNav(c)){switch(c.keyCode){case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:f++;break;case b.ui.keyCode.UP:case b.ui.keyCode.LEFT:k=!1;f--;break;case b.ui.keyCode.END:f=
this.anchors.length-1;break;case b.ui.keyCode.HOME:f=0;break;case b.ui.keyCode.SPACE:c.preventDefault();clearTimeout(this.activating);this._activate(f);return;case b.ui.keyCode.ENTER:c.preventDefault();clearTimeout(this.activating);this._activate(f===this.options.active?!1:f);return;default:return}c.preventDefault();clearTimeout(this.activating);f=this._focusNextTab(f,k);c.ctrlKey||(e.attr("aria-selected","false"),this.tabs.eq(f).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",
f)},this.delay))}},_panelKeydown:function(c){!this._handlePageNav(c)&&c.ctrlKey&&c.keyCode===b.ui.keyCode.UP&&(c.preventDefault(),this.active.focus())},_handlePageNav:function(c){if(c.altKey&&c.keyCode===b.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(c.altKey&&c.keyCode===b.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(c,e){function f(){c>k&&(c=0);0>c&&(c=k);return c}for(var k=this.tabs.length-
1;-1!==b.inArray(f(),this.options.disabled);)c=e?c+1:c-1;return c},_focusNextTab:function(b,e){b=this._findNextTab(b,e);this.tabs.eq(b).focus();return b},_setOption:function(b,e){"active"===b?this._activate(e):"disabled"===b?this._setupDisabled(e):(this._super(b,e),"collapsible"===b&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(e),"heightStyle"===b&&this._setupHeightStyle(e))},_tabId:function(b){return b.attr("aria-controls")||
"ui-tabs-"+ ++k},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var c=this.options,e=this.tablist.children(":has(a[href])");c.disabled=b.map(e.filter(".ui-state-disabled"),function(b){return e.index(b)});this._processTabs();!1!==c.active&&this.anchors.length?this.active.length&&!b.contains(this.tablist[0],this.active[0])?this.tabs.length===c.disabled.length?(c.active=!1,this.active=b()):this._activate(this._findNextTab(Math.max(0,
c.active-1),!1)):c.active=this.tabs.index(this.active):(c.active=!1,this.active=b());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var c=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return b("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",
tabIndex:-1});this.panels=b();this.anchors.each(function(e,f){var k,a,d,n=b(f).uniqueId().attr("id"),l=b(f).closest("li"),p=l.attr("aria-controls");m(f)?(k=f.hash,a=c.element.find(c._sanitizeSelector(k))):(d=c._tabId(l),k="#"+d,a=c.element.find(k),a.length||(a=c._createPanel(d),a.insertAfter(c.panels[e-1]||c.tablist)),a.attr("aria-live","polite"));a.length&&(c.panels=c.panels.add(a));p&&l.data("ui-tabs-aria-controls",p);l.attr({"aria-controls":k.substring(1),"aria-labelledby":n});a.attr("aria-labelledby",
n)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(c){return b("<div>").attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(c){b.isArray(c)&&(c.length?c.length===this.anchors.length&&(c=!0):c=!1);for(var e=0,f;f=this.tabs[e];e++)!0===c||-1!==b.inArray(e,c)?b(f).addClass("ui-state-disabled").attr("aria-disabled",
"true"):b(f).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=c},_setupEvents:function(c){var e={click:function(b){b.preventDefault()}};c&&b.each(c.split(" "),function(b,c){e[c]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,e);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(c){var e,f,k=this.element.parent();
"fill"===c?(b.support.minHeight||(f=k.css("overflow"),k.css("overflow","hidden")),e=k.height(),this.element.siblings(":visible").each(function(){var a=b(this),d=a.css("position");"absolute"!==d&&"fixed"!==d&&(e-=a.outerHeight(!0))}),f&&k.css("overflow",f),this.element.children().not(this.panels).each(function(){e-=b(this).outerHeight(!0)}),this.panels.each(function(){b(this).height(Math.max(0,e-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")):"auto"===c&&(e=0,this.panels.each(function(){e=
Math.max(e,b(this).height("").height())}).height(e))},_eventHandler:function(c){var e=this.options,f=this.active,k=b(c.currentTarget).closest("li"),a=k[0]===f[0],d=a&&e.collapsible,n=d?b():this._getPanelForTab(k),m=f.length?this._getPanelForTab(f):b(),f={oldTab:f,oldPanel:m,newTab:d?b():k,newPanel:n};c.preventDefault();k.hasClass("ui-state-disabled")||k.hasClass("ui-tabs-loading")||this.running||a&&!e.collapsible||!1===this._trigger("beforeActivate",c,f)||(e.active=d?!1:this.tabs.index(k),this.active=
a?b():k,this.xhr&&this.xhr.abort(),m.length||n.length||b.error("jQuery UI Tabs: Mismatching fragment identifier."),n.length&&this.load(this.tabs.index(k),c),this._toggle(c,f))},_toggle:function(c,e){function f(){a.running=!1;a._trigger("activate",c,e)}function k(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active");d.length&&a.options.show?a._show(d,a.options.show,f):(d.show(),f())}var a=this,d=e.newPanel,n=e.oldPanel;this.running=!0;n.length&&this.options.hide?this._hide(n,this.options.hide,
function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");k()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n.hide(),k());n.attr({"aria-expanded":"false","aria-hidden":"true"});e.oldTab.attr("aria-selected","false");d.length&&n.length?e.oldTab.attr("tabIndex",-1):d.length&&this.tabs.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr({"aria-expanded":"true","aria-hidden":"false"});e.newTab.attr({"aria-selected":"true",
tabIndex:0})},_activate:function(c){c=this._findActive(c);c[0]!==this.active[0]&&(c.length||(c=this.active),c=c.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:b.noop}))},_findActive:function(c){return!1===c?b():this.tabs.eq(c)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){b.data(this,"ui-tabs-destroy")?b(this).remove():b(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var c=b(this),e=c.data("ui-tabs-aria-controls");e?c.attr("aria-controls",e):c.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var e=this.options.disabled;!1!==e&&(c===l?e=!1:(c=this._getIndex(c),e=b.isArray(e)?b.map(e,function(b){return b!==c?b:null}):b.map(this.tabs,function(b,e){return e!==c?e:null})),this._setupDisabled(e))},disable:function(c){var e=this.options.disabled;if(!0!==e){if(c===l)e=!0;else{c=
this._getIndex(c);if(-1!==b.inArray(c,e))return;e=b.isArray(e)?b.merge([c],e).sort():[c]}this._setupDisabled(e)}},load:function(c,e){c=this._getIndex(c);var f=this,k=this.tabs.eq(c),a=k.find(".ui-tabs-anchor"),d=this._getPanelForTab(k),n={tab:k,panel:d};m(a[0])||(this.xhr=b.ajax(this._ajaxSettings(a,e,n)))&&"canceled"!==this.xhr.statusText&&(k.addClass("ui-tabs-loading"),d.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){d.html(a);f._trigger("load",e,n)},1)}).complete(function(a,
b){setTimeout(function(){"abort"===b&&f.panels.stop(!1,!0);k.removeClass("ui-tabs-loading");d.removeAttr("aria-busy");a===f.xhr&&delete f.xhr},1)}))},_ajaxSettings:function(c,e,f){var k=this;return{url:c.attr("href"),beforeSend:function(a,d){return k._trigger("beforeLoad",e,b.extend({jqXHR:a,ajaxSettings:d},f))}}},_getPanelForTab:function(c){c=b(c).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}});!1!==b.uiBackCompat&&(b.ui.tabs.prototype._ui=function(b,e){return{tab:b,
panel:e,index:this.anchors.index(b)}},b.widget("ui.tabs",b.ui.tabs,{url:function(b,e){this.anchors.eq(b).attr("href",e)}}),b.widget("ui.tabs",b.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var c=this;this._on({tabsbeforeload:function(e,f){b.data(f.tab[0],"cache.tabs")?e.preventDefault():f.jqXHR.success(function(){c.options.cache&&b.data(f.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(c,e,f){var k=this.options.ajaxOptions;return b.extend({},k,{error:function(a,
d,b){try{k.error(a,d,f.tab.closest("li").index(),f.tab[0])}catch(c){}}},this._superApply(arguments))},_setOption:function(b,e){"cache"===b&&!1===e&&this.anchors.removeData("cache.tabs");this._super(b,e)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(b,e){this.anchors.eq(b).removeData("cache.tabs");this._superApply(arguments)}}),b.widget("ui.tabs",b.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),b.widget("ui.tabs",b.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},
_create:function(){this._super();this._on({tabsbeforeload:function(b,e){if(b.target===this.element[0]&&this.options.spinner){var f=e.tab.find("span"),k=f.html();f.html(this.options.spinner);e.jqXHR.complete(function(){f.html(k)})}}})}}),b.widget("ui.tabs",b.ui.tabs,{options:{enable:null,disable:null},enable:function(c){var e=this.options,f;if(c&&!0===e.disabled||b.isArray(e.disabled)&&-1!==b.inArray(c,e.disabled))f=!0;this._superApply(arguments);f&&this._trigger("enable",null,this._ui(this.anchors[c],
this.panels[c]))},disable:function(c){var e=this.options,f;if(c&&!1===e.disabled||b.isArray(e.disabled)&&-1===b.inArray(c,e.disabled))f=!0;this._superApply(arguments);f&&this._trigger("disable",null,this._ui(this.anchors[c],this.panels[c]))}}),b.widget("ui.tabs",b.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(c,e,f){f===l&&(f=this.anchors.length);var k,a=this.options;e=b(a.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,
e));var d=c.indexOf("#")?this._tabId(e):c.replace("#","");e.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);e.attr("aria-controls",d);c=f>=this.tabs.length;k=this.element.find("#"+d);k.length||(k=this._createPanel(d),c?0<f?k.insertAfter(this.panels.eq(-1)):k.appendTo(this.element):k.insertBefore(this.panels[f]));k.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();c?e.appendTo(this.tablist):e.insertBefore(this.tabs[f]);a.disabled=b.map(a.disabled,function(a){return a>=
f?++a:a});this.refresh();1===this.tabs.length&&!1===a.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[f],this.panels[f]));return this},remove:function(c){c=this._getIndex(c);var e=this.options,f=this.tabs.eq(c).remove(),k=this._getPanelForTab(f).remove();f.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(c+(c+1<this.anchors.length?1:-1));e.disabled=b.map(b.grep(e.disabled,function(a){return a!==c}),function(a){return a>=c?--a:a});this.refresh();this._trigger("remove",
null,this._ui(f.find("a")[0],k[0]));return this}}),b.widget("ui.tabs",b.ui.tabs,{length:function(){return this.anchors.length}}),b.widget("ui.tabs",b.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(c){c=c.is("li")?c.find("a[href]"):c;c=c[0];return b(c).closest("li").attr("aria-controls")||c.title&&c.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++k}}),b.widget("ui.tabs",b.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(c){return b(this.options.panelTemplate).attr("id",
c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),b.widget("ui.tabs",b.ui.tabs,{_create:function(){var b=this.options;null===b.active&&b.selected!==l&&(b.active=-1===b.selected?!1:b.selected);this._super();b.selected=b.active;!1===b.selected&&(b.selected=-1)},_setOption:function(b,e){if("selected"!==b)return this._super(b,e);var f=this.options;this._super("active",-1===e?!1:e);f.selected=f.active;!1===f.selected&&(f.selected=-1)},_eventHandler:function(b){this._superApply(arguments);
this.options.selected=this.options.active;!1===this.options.selected&&(this.options.selected=-1)}}),b.widget("ui.tabs",b.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(b,e,f){var k=this._superApply(arguments);if(!k)return!1;"beforeActivate"===b&&f.newTab.length?k=this._super("select",e,{tab:f.newTab.find(".ui-tabs-anchor")[0],
panel:f.newPanel[0],index:f.newTab.closest("li").index()}):"activate"===b&&f.newTab.length&&(k=this._super("show",e,{tab:f.newTab.find(".ui-tabs-anchor")[0],panel:f.newPanel[0],index:f.newTab.closest("li").index()}));return k}}),b.widget("ui.tabs",b.ui.tabs,{select:function(b){b=this._getIndex(b);if(-1===b)if(this.options.collapsible&&-1!==this.options.selected)b=this.options.selected;else return;this.anchors.eq(b).trigger(this.options.event+this.eventNamespace)}}),function(){var c=0;b.widget("ui.tabs",
b.ui.tabs,{options:{cookie:null},_create:function(){var b=this.options,c;null==b.active&&b.cookie&&(c=parseInt(this._cookie(),10),-1===c&&(c=!1),b.active=c);this._super()},_cookie:function(e){var f=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++c)];arguments.length&&(f.push(!1===e?-1:e),f.push(this.options.cookie));return b.cookie.apply(null,f)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(b){this._superApply(arguments);
this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),b.widget("ui.tabs",b.ui.tabs,{_trigger:function(c,e,f){f=b.extend({},f);"load"===c&&(f.panel=f.panel[0],f.tab=f.tab.find(".ui-tabs-anchor")[0]);return this._super(c,e,f)}}),b.widget("ui.tabs",b.ui.tabs,{options:{fx:null},_getFx:function(){var c,e,f=this.options.fx;f&&(b.isArray(f)?(c=f[0],e=f[1]):c=e=f);return f?{show:e,hide:c}:
null},_toggle:function(b,e){function f(){a.running=!1;a._trigger("activate",b,e)}function k(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active");d.length&&m.show?d.animate(m.show,m.show.duration,function(){f()}):(d.show(),f())}var a=this,d=e.newPanel,n=e.oldPanel,m=this._getFx();if(!m)return this._super(b,e);a.running=!0;n.length&&m.hide?n.animate(m.hide,m.hide.duration,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");k()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
n.hide(),k())}}))})(l);(function(b){function l(f,c){var e=(f.attr("aria-describedby")||"").split(/\s+/);e.push(c);f.data("ui-tooltip-id",c).attr("aria-describedby",b.trim(e.join(" ")))}function m(f){var c=f.data("ui-tooltip-id"),e=(f.attr("aria-describedby")||"").split(/\s+/),c=b.inArray(c,e);-1!==c&&e.splice(c,1);f.removeData("ui-tooltip-id");(e=b.trim(e.join(" ")))?f.attr("aria-describedby",e):f.removeAttr("aria-describedby")}var k=0;b.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return b(this).attr("title")},
hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={}},_setOption:function(f,c){var e=this;"disabled"===f?(this[c?"_disable":"_enable"](),this.options[f]=c):(this._super(f,c),"content"===f&&b.each(this.tooltips,function(b,c){e._updateContent(c)}))},_disable:function(){var f=this;b.each(this.tooltips,function(c,e){var g=
b.Event("blur");g.target=g.currentTarget=e[0];f.close(g,!0)});this.element.find(this.options.items).andSelf().each(function(){var c=b(this);c.is("[title]")&&c.data("ui-tooltip-title",c.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var f=b(this);f.data("ui-tooltip-title")&&f.attr("title",f.data("ui-tooltip-title"))})},open:function(f){var c=b(f?f.target:this.element).closest(this.options.items);c.length&&(this.options.track&&c.data("ui-tooltip-id")?
(this._find(c).position(b.extend({of:c},this.options.position)),this._off(this.document,"mousemove")):(c.attr("title")&&c.data("ui-tooltip-title",c.attr("title")),c.data("tooltip-open",!0),this._updateContent(c,f)))},_updateContent:function(b,c){var e;e=this.options.content;var g=this;if("string"===typeof e)return this._open(c,b,e);(e=e.call(b[0],function(e){b.data("tooltip-open")&&g._delay(function(){this._open(c,b,e)})}))&&this._open(c,b,e)},_open:function(f,c,e){function g(d){a.of=d;k.position(a)}
var k,a;e&&(k=this._find(c),k.length?k.find(".ui-tooltip-content").html(e):(c.is("[title]")&&(f&&"mouseover"===f.type?c.attr("title",""):c.removeAttr("title")),k=this._tooltip(c),l(c,k.attr("id")),k.find(".ui-tooltip-content").html(e),this.options.track&&f&&/^mouse/.test(f.originalEvent.type)?(a=b.extend({},this.options.position),this._on(this.document,{mousemove:g}),g(f)):k.position(b.extend({of:c},this.options.position)),k.hide(),this._show(k,this.options.show),this._trigger("open",f,{tooltip:k}),
this._on(c,{mouseleave:"close",focusout:"close",keyup:function(a){a.keyCode===b.ui.keyCode.ESCAPE&&(a=b.Event(a),a.currentTarget=c[0],this.close(a,!0))}})))},close:function(f,c){var e=this,g=b(f?f.currentTarget:this.element),k=this._find(g);this.closing||!c&&f&&"focusout"!==f.type&&this.document[0].activeElement===g[0]||(g.data("ui-tooltip-title")&&g.attr("title",g.data("ui-tooltip-title")),m(g),k.stop(!0),this._hide(k,this.options.hide,function(){b(this).remove();delete e.tooltips[this.id]}),g.removeData("tooltip-open"),
this._off(g,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",f,{tooltip:k}),this.closing=!1)},_tooltip:function(f){var c="ui-tooltip-"+k++,e=b("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));b("<div>").addClass("ui-tooltip-content").appendTo(e);e.appendTo(this.document[0].body);b.fn.bgiframe&&e.bgiframe();this.tooltips[c]=f;return e},_find:function(f){return(f=
f.data("ui-tooltip-id"))?b("#"+f):b()},_destroy:function(){var f=this;b.each(this.tooltips,function(c,e){var g=b.Event("blur");g.target=g.currentTarget=e[0];f.close(g,!0);b("#"+c).remove();e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})})(l);l.effects||function(b,p){var m=!1!==b.uiBackCompat;b.effects={effect:{}};(function(k,f){function c(a,d,b){var c=l[d.type]||{};if(null==a)return b||!d.def?null:d.def;a=c.floor?~~a:parseFloat(a);return isNaN(a)?
d.def:c.mod?(a+c.mod)%c.mod:0>a?0:c.max<a?c.max:a}function e(b){var c=d(),e=c._rgba=[];b=b.toLowerCase();B(a,function(a,d){var f,g=d.re.exec(b);f=g&&d.parse(g);g=d.space||"rgba";if(f)return f=c[g](f),c[n[g].cache]=f[n[g].cache],e=c._rgba=f._rgba,!1});return e.length?("0,0,0,0"===e.join()&&k.extend(e,z.transparent),c):z[b]}function g(a,d,b){b=(b+1)%1;return 1>6*b?a+(d-a)*b*6:1>2*b?d:2>3*b?a+(d-a)*(2/3-b)*6:a}var m=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],d=k.Color=function(a,d,b,c){return new k.Color.fn.parse(a,d,b,c)},n={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=d.support={},A=k("<p>")[0],z,B=k.each;A.style.cssText="background-color:rgba(1,1,1,.5)";
p.rgba=-1<A.style.backgroundColor.indexOf("rgba");B(n,function(a,d){d.cache="_"+a;d.props.alpha={idx:3,type:"percent",def:1}});d.fn=k.extend(d.prototype,{parse:function(a,g,m,l){if(a===f)return this._rgba=[null,null,null,null],this;if(a.jquery||a.nodeType)a=k(a).css(g),g=f;var q=this,v=k.type(a),p=this._rgba=[];g!==f&&(a=[a,g,m,l],v="array");if("string"===v)return this.parse(e(a)||z._default);if("array"===v)return B(n.rgba.props,function(d,b){p[b.idx]=c(a[b.idx],b)}),this;if("object"===v)return a instanceof
d?B(n,function(d,b){a[b.cache]&&(q[b.cache]=a[b.cache].slice())}):B(n,function(d,e){var f=e.cache;B(e.props,function(d,b){if(!q[f]&&e.to){if("alpha"===d||null==a[d])return;q[f]=e.to(q._rgba)}q[f][b.idx]=c(a[d],b,!0)});q[f]&&0>b.inArray(null,q[f].slice(0,3))&&(q[f][3]=1,e.from&&(q._rgba=e.from(q[f])))}),this},is:function(a){var b=d(a),c=!0,e=this;B(n,function(a,d){var f,g=b[d.cache];g&&(f=e[d.cache]||d.to&&d.to(e._rgba)||[],B(d.props,function(a,d){if(null!=g[d.idx])return c=g[d.idx]===f[d.idx]}));
return c});return c},_space:function(){var a=[],d=this;B(n,function(b,c){d[c.cache]&&a.push(b)});return a.pop()},transition:function(a,b){var e=d(a),f=e._space(),g=n[f],k=0===this.alpha()?d("transparent"):this,m=k[g.cache]||g.to(k._rgba),q=m.slice(),e=e[g.cache];B(g.props,function(a,d){var f=d.idx,g=m[f],k=e[f],n=l[d.type]||{};null!==k&&(null===g?q[f]=k:(n.mod&&(k-g>n.mod/2?g+=n.mod:g-k>n.mod/2&&(g-=n.mod)),q[f]=c((k-g)*b+g,d)))});return this[f](q)},blend:function(a){if(1===this._rgba[3])return this;
var b=this._rgba.slice(),c=b.pop(),e=d(a)._rgba;return d(k.map(b,function(a,d){return(1-c)*e[d]+c*a}))},toRgbaString:function(){var a="rgba(",d=k.map(this._rgba,function(a,d){return null==a?2<d?1:0:a});1===d[3]&&(d.pop(),a="rgb(");return a+d.join()+")"},toHslaString:function(){var a="hsla(",d=k.map(this.hsla(),function(a,d){null==a&&(a=2<d?1:0);d&&3>d&&(a=Math.round(100*a)+"%");return a});1===d[3]&&(d.pop(),a="hsl(");return a+d.join()+")"},toHexString:function(a){var d=this._rgba.slice(),b=d.pop();
a&&d.push(~~(255*b));return"#"+k.map(d,function(a,d){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});d.fn.parse.prototype=d.fn;n.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var d=a[0]/255,b=a[1]/255,c=a[2]/255;a=a[3];var e=Math.max(d,b,c),f=Math.min(d,b,c),g=e-f,k=e+f,n=0.5*k,k=0===n||1===n?n:0.5>=n?g/k:g/(2-k);return[Math.round(f===e?0:d===e?60*(b-c)/g+360:b===
e?60*(c-d)/g+120:60*(d-b)/g+240)%360,k,n,null==a?1:a]};n.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var d=a[0]/360,b=a[1],c=a[2];a=a[3];b=0.5>=c?c*(1+b):c+b-c*b;c=2*c-b;return[Math.round(255*g(c,b,d+1/3)),Math.round(255*g(c,b,d)),Math.round(255*g(c,b,d-1/3)),a]};B(n,function(a,b){var e=b.props,g=b.cache,n=b.to,l=b.from;d.fn[a]=function(a){n&&!this[g]&&(this[g]=n(this._rgba));if(a===f)return this[g].slice();var b,m=k.type(a),q="array"===m||"object"===m?
a:arguments,v=this[g].slice();B(e,function(a,d){var b=q["object"===m?a:d.idx];null==b&&(b=v[d.idx]);v[d.idx]=c(b,d)});return l?(b=d(l(v)),b[g]=v,b):d(v)};B(e,function(b,c){d.fn[b]||(d.fn[b]=function(d){var e=k.type(d),f="alpha"===b?this._hsla?"hsla":"rgba":a,g=this[f](),n=g[c.idx];if("undefined"===e)return n;"function"===e&&(d=d.call(this,n),e=k.type(d));if(null==d&&c.empty)return this;"string"===e&&(e=m.exec(d))&&(d=n+parseFloat(e[2])*("+"===e[1]?1:-1));g[c.idx]=d;return this[f](g)})})});B("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),
function(a,b){k.cssHooks[b]={set:function(a,c){var f,g="";if("string"!==k.type(c)||(f=e(c))){c=d(f||c);if(!p.rgba&&1!==c._rgba[3]){for(f="backgroundColor"===b?a.parentNode:a;(""===g||"transparent"===g)&&f&&f.style;)try{g=k.css(f,"backgroundColor"),f=f.parentNode}catch(n){}c=c.blend(g&&"transparent"!==g?g:"_default")}c=c.toRgbaString()}try{a.style[b]=c}catch(m){}}};k.fx.step[b]=function(a){a.colorInit||(a.start=d(a.elem,b),a.end=d(a.end),a.colorInit=!0);k.cssHooks[b].set(a.elem,a.start.transition(a.end,
a.pos))}});k.cssHooks.borderColor={expand:function(a){var d={};B(["Top","Right","Bottom","Left"],function(b,c){d["border"+c+"Color"]=a});return d}};z=k.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(l);(function(){function k(){var c=
this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,f={},k,a;if(c&&c.length&&c[0]&&c[c[0]])for(a=c.length;a--;)k=c[a],"string"===typeof c[k]&&(f[b.camelCase(k)]=c[k]);else for(k in c)"string"===typeof c[k]&&(f[k]=c[k]);return f}var f=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(c,f){b.fx.step[f]=function(b){if("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)l.style(b.elem,f,b.end),b.setAttr=!0}});b.effects.animateClass=function(e,g,m,a){var d=b.speed(g,m,a);return this.queue(function(){var a=b(this),g=a.attr("class")||"",m,q=d.children?a.find("*").andSelf():a,q=q.map(function(){return{el:b(this),start:k.call(this)}});m=function(){b.each(f,function(d,b){if(e[b])a[b+"Class"](e[b])})};m();q=q.map(function(){this.end=k.call(this.el[0]);var a=this.start,d=this.end,
e={},f,g;for(f in d)g=d[f],a[f]===g||c[f]||!b.fx.step[f]&&isNaN(parseFloat(g))||(e[f]=g);this.diff=e;return this});a.attr("class",g);q=q.map(function(){var a=this,c=b.Deferred(),e=l.extend({},d,{queue:!1,complete:function(){c.resolve(a)}});this.el.animate(this.diff,e);return c.promise()});b.when.apply(b,q.get()).done(function(){m();b.each(arguments,function(){var a=this.el;b.each(this.diff,function(d){a.css(d,"")})});d.complete.call(a[0])})})};b.fn.extend({_addClass:b.fn.addClass,addClass:function(c,
f,k,a){return f?b.effects.animateClass.call(this,{add:c},f,k,a):this._addClass(c)},_removeClass:b.fn.removeClass,removeClass:function(c,f,k,a){return f?b.effects.animateClass.call(this,{remove:c},f,k,a):this._removeClass(c)},_toggleClass:b.fn.toggleClass,toggleClass:function(c,f,k,a,d){return"boolean"===typeof f||f===p?k?b.effects.animateClass.call(this,f?{add:c}:{remove:c},k,a,d):this._toggleClass(c,f):b.effects.animateClass.call(this,{toggle:c},f,k,a)},switchClass:function(c,f,k,a,d){return b.effects.animateClass.call(this,
{add:f,remove:c},k,a,d)}})})();(function(){function k(c,e,f,k){b.isPlainObject(c)&&(e=c,c=c.effect);c={effect:c};e===p&&(e={});b.isFunction(e)&&(k=e,f=null,e={});if("number"===typeof e||b.fx.speeds[e])k=f,f=e,e={};b.isFunction(f)&&(k=f,f=null);e&&b.extend(c,e);f=f||e.duration;c.duration=b.fx.off?0:"number"===typeof f?f:f in b.fx.speeds?b.fx.speeds[f]:b.fx.speeds._default;c.complete=k||e.complete;return c}function f(c){return!c||"number"===typeof c||b.fx.speeds[c]?!0:"string"!==typeof c||b.effects.effect[c]?
!1:m&&b.effects[c]?!1:!0}b.extend(b.effects,{version:"1.9.0",save:function(b,e){for(var f=0;f<e.length;f++)null!==e[f]&&b.data("ui-effects-"+e[f],b[0].style[e[f]])},restore:function(b,e){var f,k;for(k=0;k<e.length;k++)null!==e[k]&&(f=b.data("ui-effects-"+e[k]),f===p&&(f=""),b.css(e[k],f))},setMode:function(b,e){"toggle"===e&&(e=b.is(":hidden")?"show":"hide");return e},getBaseline:function(b,e){var f,k;switch(b[0]){case "top":f=0;break;case "middle":f=0.5;break;case "bottom":f=1;break;default:f=b[0]/
e.height}switch(b[1]){case "left":k=0;break;case "center":k=0.5;break;case "right":k=1;break;default:k=b[1]/e.width}return{x:k,y:f}},createWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent();var e={width:c.outerWidth(!0),height:c.outerHeight(!0),"float":c.css("float")},f=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k={width:c.width(),height:c.height()},a=document.activeElement;try{a.id}catch(d){a=
document.body}c.wrap(f);(c[0]===a||b.contains(c[0],a))&&b(a).focus();f=c.parent();"static"===c.css("position")?(f.css({position:"relative"}),c.css({position:"relative"})):(b.extend(e,{position:c.css("position"),zIndex:c.css("z-index")}),b.each(["top","left","bottom","right"],function(a,d){e[d]=c.css(d);isNaN(parseInt(e[d],10))&&(e[d]="auto")}),c.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));c.css(k);return f.css(e).show()},removeWrapper:function(c){var e=document.activeElement;
c.parent().is(".ui-effects-wrapper")&&(c.parent().replaceWith(c),(c[0]===e||b.contains(c[0],e))&&b(e).focus());return c},setTransition:function(c,e,f,k){k=k||{};b.each(e,function(a,d){var b=c.cssUnit(d);0<b[0]&&(k[d]=b[0]*f+b[1])});return k}});b.fn.extend({effect:function(c,e,f,l){function a(a){function c(){b.isFunction(f)&&f.call(e[0]);b.isFunction(a)&&a()}var e=b(this),f=d.complete,g=d.mode;(e.is(":hidden")?"hide"===g:"show"===g)?c():p.call(e[0],d,c)}var d=k.apply(this,arguments),n=d.mode,v=d.queue,
p=b.effects.effect[d.effect],A=!p&&m&&b.effects[d.effect];return b.fx.off||!p&&!A?n?this[n](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):p?!1===v?this.each(a):this.queue(v||"fx",a):A.call(this,{options:d,duration:d.duration,callback:d.complete,mode:d.mode})},_show:b.fn.show,show:function(b){if(f(b))return this._show.apply(this,arguments);var e=k.apply(this,arguments);e.mode="show";return this.effect.call(this,e)},_hide:b.fn.hide,hide:function(b){if(f(b))return this._hide.apply(this,
arguments);var e=k.apply(this,arguments);e.mode="hide";return this.effect.call(this,e)},__toggle:b.fn.toggle,toggle:function(c){if(f(c)||"boolean"===typeof c||b.isFunction(c))return this.__toggle.apply(this,arguments);var e=k.apply(this,arguments);e.mode="toggle";return this.effect.call(this,e)},cssUnit:function(c){var e=this.css(c),f=[];b.each(["em","px","%","pt"],function(b,a){0<e.indexOf(a)&&(f=[parseFloat(e),a])});return f}})})();(function(){var k={};b.each(["Quad","Cubic","Quart","Quint","Expo"],
function(b,c){k[c]=function(c){return Math.pow(c,b+2)}});b.extend(k,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return 0===b||1===b?b:-Math.pow(2,8*(b-1))*Math.sin((80*(b-1)-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(b){for(var c,e=4;b<((c=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*c-2)/22-b,2)}});b.each(k,function(f,c){b.easing["easeIn"+f]=c;b.easing["easeOut"+f]=function(b){return 1-
c(1-b)};b.easing["easeInOut"+f]=function(b){return 0.5>b?c(2*b)/2:1-c(-2*b+2)/2}})})()}(l);(function(b,l){var m=/up|down|vertical/,k=/up|left|vertical|horizontal/;b.effects.effect.blind=function(f,c){var e=b(this),g="position top bottom left right height width".split(" "),l=b.effects.setMode(e,f.mode||"hide"),a=f.direction||"up",d=m.test(a),n=d?"height":"width",v=d?"top":"left",a=k.test(a),p={},A="show"===l,z,B,C;e.parent().is(".ui-effects-wrapper")?b.effects.save(e.parent(),g):b.effects.save(e,g);
e.show();z=b.effects.createWrapper(e).css({overflow:"hidden"});B=z[n]();C=parseFloat(z.css(v))||0;p[n]=A?B:0;a||(e.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),p[v]=A?C:B+C);A&&(z.css(n,0),a||z.css(v,C+B));z.animate(p,{duration:f.duration,easing:f.easing,queue:!1,complete:function(){"hide"===l&&e.hide();b.effects.restore(e,g);b.effects.removeWrapper(e);c()}})}})(l);(function(b,l){b.effects.effect.bounce=function(m,k){var f=b(this),c="position top bottom left right height width".split(" "),
e=b.effects.setMode(f,m.mode||"effect"),g="hide"===e,l="show"===e,a=m.direction||"up",e=m.distance,d=m.times||5,n=2*d+(l||g?1:0),v=m.duration/n,p=m.easing,A="up"===a||"down"===a?"top":"left",a="up"===a||"left"===a,z,B,C=f.queue(),E=C.length;(l||g)&&c.push("opacity");b.effects.save(f,c);f.show();b.effects.createWrapper(f);e||(e=f["top"===A?"outerHeight":"outerWidth"]()/3);l&&(B={opacity:1},B[A]=0,f.css("opacity",0).css(A,a?2*-e:2*e).animate(B,v,p));g&&(e/=Math.pow(2,d-1));B={};for(l=B[A]=0;l<d;l++)z=
{},z[A]=(a?"-=":"+=")+e,f.animate(z,v,p).animate(B,v,p),e=g?2*e:e/2;g&&(z={opacity:0},z[A]=(a?"-=":"+=")+e,f.animate(z,v,p));f.queue(function(){g&&f.hide();b.effects.restore(f,c);b.effects.removeWrapper(f);k()});1<E&&C.splice.apply(C,[1,0].concat(C.splice(E,n+1)));f.dequeue()}})(l);(function(b,l){b.effects.effect.clip=function(m,k){var f=b(this),c="position top bottom left right height width".split(" "),e="show"===b.effects.setMode(f,m.mode||"hide"),g="vertical"===(m.direction||"vertical"),l=g?"height":
"width",g=g?"top":"left",a={},d,n;b.effects.save(f,c);f.show();d=b.effects.createWrapper(f).css({overflow:"hidden"});d="IMG"===f[0].tagName?d:f;n=d[l]();e&&(d.css(l,0),d.css(g,n/2));a[l]=e?n:0;a[g]=e?0:n/2;d.animate(a,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){e||f.hide();b.effects.restore(f,c);b.effects.removeWrapper(f);k()}})}})(l);(function(b,l){b.effects.effect.drop=function(m,k){var f=b(this),c="position top bottom left right opacity height width".split(" "),e=b.effects.setMode(f,
m.mode||"hide"),g="show"===e,l=m.direction||"left",a="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l?"pos":"neg",d={opacity:g?1:0},n;b.effects.save(f,c);f.show();b.effects.createWrapper(f);n=m.distance||f["top"===a?"outerHeight":"outerWidth"](!0)/2;g&&f.css("opacity",0).css(a,"pos"===l?-n:n);d[a]=(g?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+n;f.animate(d,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){"hide"===e&&f.hide();b.effects.restore(f,c);b.effects.removeWrapper(f);
k()}})}})(l);(function(b,l){b.effects.effect.explode=function(m,k){function f(){v.push(this);v.length===c*e&&(g.css({visibility:"visible"}),b(v).remove(),l||g.hide(),k())}var c=m.pieces?Math.round(Math.sqrt(m.pieces)):3,e=c,g=b(this),l="show"===b.effects.setMode(g,m.mode||"hide"),a=g.show().css("visibility","hidden").offset(),d=Math.ceil(g.outerWidth()/e),n=Math.ceil(g.outerHeight()/c),v=[],p,A,z,B,C,E;for(p=0;p<c;p++)for(B=a.top+p*n,E=p-(c-1)/2,A=0;A<e;A++)z=a.left+A*d,C=A-(e-1)/2,g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-A*d,top:-p*n}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:d,height:n,left:z+(l?C*d:0),top:B+(l?E*n:0),opacity:l?0:1}).animate({left:z+(l?0:C*d),top:B+(l?0:E*n),opacity:l?1:0},m.duration||500,m.easing,f)}})(l);(function(b,l){b.effects.effect.fade=function(m,k){var f=b(this),c=b.effects.setMode(f,m.mode||"toggle");f.animate({opacity:c},{queue:!1,duration:m.duration,easing:m.easing,complete:k})}})(l);(function(b,l){b.effects.effect.fold=
function(m,k){var f=b(this),c="position top bottom left right height width".split(" "),e=b.effects.setMode(f,m.mode||"hide"),g="show"===e,l="hide"===e,e=m.size||15,a=/([0-9]+)%/.exec(e),d=!!m.horizFirst,n=g!==d,v=n?["width","height"]:["height","width"],p=m.duration/2,A,z={},B={};b.effects.save(f,c);f.show();A=b.effects.createWrapper(f).css({overflow:"hidden"});n=n?[A.width(),A.height()]:[A.height(),A.width()];a&&(e=parseInt(a[1],10)/100*n[l?0:1]);g&&A.css(d?{height:0,width:e}:{height:e,width:0});
z[v[0]]=g?n[0]:e;B[v[1]]=g?n[1]:0;A.animate(z,p,m.easing).animate(B,p,m.easing,function(){l&&f.hide();b.effects.restore(f,c);b.effects.removeWrapper(f);k()})}})(l);(function(b,l){b.effects.effect.highlight=function(l,k){var f=b(this),c=["backgroundImage","backgroundColor","opacity"],e=b.effects.setMode(f,l.mode||"show"),g={backgroundColor:f.css("backgroundColor")};"hide"===e&&(g.opacity=0);b.effects.save(f,c);f.show().css({backgroundImage:"none",backgroundColor:l.color||"#ffff99"}).animate(g,{queue:!1,
duration:l.duration,easing:l.easing,complete:function(){"hide"===e&&f.hide();b.effects.restore(f,c);k()}})}})(l);(function(b,l){b.effects.effect.pulsate=function(l,k){var f=b(this),c=b.effects.setMode(f,l.mode||"show"),e="show"===c,g="hide"===c,c=2*(l.times||5)+(e||"hide"===c?1:0),q=l.duration/c,a=0,d=f.queue(),n=d.length;if(e||!f.is(":visible"))f.css("opacity",0).show(),a=1;for(e=1;e<c;e++)f.animate({opacity:a},q,l.easing),a=1-a;f.animate({opacity:a},q,l.easing);f.queue(function(){g&&f.hide();k()});
1<n&&d.splice.apply(d,[1,0].concat(d.splice(n,c+1)));f.dequeue()}})(l);(function(b,l){b.effects.effect.puff=function(l,k){var f=b(this),c=b.effects.setMode(f,l.mode||"hide"),e="hide"===c,g=parseInt(l.percent,10)||150,q=g/100,a={height:f.height(),width:f.width()};b.extend(l,{effect:"scale",queue:!1,fade:!0,mode:c,complete:k,percent:e?g:100,from:e?a:{height:a.height*q,width:a.width*q}});f.effect(l)};b.effects.effect.scale=function(l,k){var f=b(this),c=b.extend(!0,{},l),e=b.effects.setMode(f,l.mode||
"effect"),g=parseInt(l.percent,10)||(0===parseInt(l.percent,10)?0:"hide"===e?0:100),q=l.direction||"both",a=l.origin,d={height:f.height(),width:f.width(),outerHeight:f.outerHeight(),outerWidth:f.outerWidth()},n="horizontal"!==q?g/100:1,g="vertical"!==q?g/100:1;c.effect="size";c.queue=!1;c.complete=k;"effect"!==e&&(c.origin=a||["middle","center"],c.restore=!0);c.from=l.from||("show"===e?{height:0,width:0}:d);c.to={height:d.height*n,width:d.width*g,outerHeight:d.outerHeight*n,outerWidth:d.outerWidth*
g};c.fade&&("show"===e&&(c.from.opacity=0,c.to.opacity=1),"hide"===e&&(c.from.opacity=1,c.to.opacity=0));f.effect(c)};b.effects.effect.size=function(l,k){var f,c,e,g,q=b(this),a="position top bottom left right width height overflow opacity".split(" "),d="position top bottom left right overflow opacity".split(" "),n=["width","height","overflow"],v=["fontSize"],p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],A=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
z=b.effects.setMode(q,l.mode||"effect"),B=l.restore||"effect"!==z,C=l.scale||"both",E=l.origin||["middle","center"],r,t=q.css("position");"show"===z&&q.show();r={height:q.height(),width:q.width(),outerHeight:q.outerHeight(),outerWidth:q.outerWidth()};q.from=l.from||r;q.to=l.to||r;e=q.from.height/r.height;g=q.from.width/r.width;f=q.to.height/r.height;c=q.to.width/r.width;if("box"===C||"both"===C)e!==f&&(a=a.concat(p),q.from=b.effects.setTransition(q,p,e,q.from),q.to=b.effects.setTransition(q,p,f,q.to)),
g!==c&&(a=a.concat(A),q.from=b.effects.setTransition(q,A,g,q.from),q.to=b.effects.setTransition(q,A,c,q.to));"content"!==C&&"both"!==C||e===f||(a=a.concat(v),q.from=b.effects.setTransition(q,v,e,q.from),q.to=b.effects.setTransition(q,v,f,q.to));b.effects.save(q,B?a:d);q.show();b.effects.createWrapper(q);q.css("overflow","hidden").css(q.from);E&&(E=b.effects.getBaseline(E,r),q.from.top=(r.outerHeight-q.outerHeight())*E.y,q.from.left=(r.outerWidth-q.outerWidth())*E.x,q.to.top=(r.outerHeight-q.to.outerHeight)*
E.y,q.to.left=(r.outerWidth-q.to.outerWidth)*E.x);q.css(q.from);if("content"===C||"both"===C)p=p.concat(["marginTop","marginBottom"]).concat(v),A=A.concat(["marginLeft","marginRight"]),n=a.concat(p).concat(A),q.find("*[width]").each(function(){var a=b(this),d=a.height(),k=a.width();B&&b.effects.save(a,n);a.from={height:d*e,width:k*g};a.to={height:d*f,width:k*c};e!==f&&(a.from=b.effects.setTransition(a,p,e,a.from),a.to=b.effects.setTransition(a,p,f,a.to));g!==c&&(a.from=b.effects.setTransition(a,A,
g,a.from),a.to=b.effects.setTransition(a,A,c,a.to));a.css(a.from);a.animate(a.to,l.duration,l.easing,function(){B&&b.effects.restore(a,n)})});q.animate(q.to,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){0===q.to.opacity&&q.css("opacity",q.from.opacity);"hide"===z&&q.hide();b.effects.restore(q,B?a:d);B||("static"===t?q.css({position:"relative",top:q.to.top,left:q.to.left}):b.each(["top","left"],function(a,d){q.css(d,function(d,b){var c=parseInt(b,10),e=a?q.to.left:q.to.top;return"auto"===
b?e+"px":c+e+"px"})}));b.effects.removeWrapper(q);k()}})}})(l);(function(b,l){b.effects.effect.shake=function(l,k){var f=b(this),c="position top bottom left right height width".split(" "),e=b.effects.setMode(f,l.mode||"effect"),g=l.direction||"left",q=l.distance||20,a=l.times||3,d=2*a+1,n=Math.round(l.duration/d),v="up"===g||"down"===g?"top":"left",p="up"===g||"left"===g,g={},A={},z={},B=f.queue(),C=B.length;b.effects.save(f,c);f.show();b.effects.createWrapper(f);g[v]=(p?"-=":"+=")+q;A[v]=(p?"+=":
"-=")+2*q;z[v]=(p?"-=":"+=")+2*q;f.animate(g,n,l.easing);for(q=1;q<a;q++)f.animate(A,n,l.easing).animate(z,n,l.easing);f.animate(A,n,l.easing).animate(g,n/2,l.easing).queue(function(){"hide"===e&&f.hide();b.effects.restore(f,c);b.effects.removeWrapper(f);k()});1<C&&B.splice.apply(B,[1,0].concat(B.splice(C,d+1)));f.dequeue()}})(l);(function(b,l){b.effects.effect.slide=function(l,k){var f=b(this),c="position top bottom left right width height".split(" "),e=b.effects.setMode(f,l.mode||"show"),g="show"===
e,q=l.direction||"left",a="up"===q||"down"===q?"top":"left",q="up"===q||"left"===q,d,n={};b.effects.save(f,c);f.show();d=l.distance||f["top"===a?"outerHeight":"outerWidth"](!0);b.effects.createWrapper(f).css({overflow:"hidden"});g&&f.css(a,q?isNaN(d)?"-"+d:-d:d);n[a]=(g?q?"+=":"-=":q?"-=":"+=")+d;f.animate(n,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){"hide"===e&&f.hide();b.effects.restore(f,c);b.effects.removeWrapper(f);k()}})}})(l);(function(b,l){b.effects.effect.transfer=
function(l,k){var f=b(this),c=b(l.to),e="fixed"===c.css("position"),g=b("body"),q=e?g.scrollTop():0,g=e?g.scrollLeft():0,a=c.offset(),c={top:a.top-q,left:a.left-g,height:c.innerHeight(),width:c.innerWidth()},a=f.offset(),d=b('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(l.className).css({top:a.top-q,left:a.left-g,height:f.innerHeight(),width:f.innerWidth(),position:e?"fixed":"absolute"}).animate(c,l.duration,l.easing,function(){d.remove();k()})}})(l)});define("ui/tab",
"aloha/core jquery ui/container ui/component PubSub jqueryui".split(" "),function(l,b,p,m,k){var f=0,c={};l=p.extend({_elemBySlot:null,_groupBySlot:null,_groupByComponent:null,_constructor:function(c,g,k){var a,d,n,l,m;this._elemBySlot={};this._groupBySlot={};this._groupByComponent={};this._slotsList=[];this._super(c,g);this.container=g.container;this.list=this.container.data("list");this.panels=this.container.data("panels");this.id="tab-ui-container-"+ ++f;this.panel=b("<div>",{id:this.id,unselectable:"on"});
this.handle=b('<li><a href="'+location.href.replace(/#.*$/,"")+"#"+this.id+'">'+g.label+"</a></li>");for(c=0;c<k.length;c++)if("string"===typeof k[c])1===k[c].length&&10===k[c].charCodeAt(0)?this.panel.append("<div>",{unselectable:"on"}):(d=b("<span>",{unselectable:"on"}),this._elemBySlot[k[c]]=d,this.panel.append(d));else for(l=b("<div>",{"class":"aloha-ui-component-group aloha-ui-hidden",unselectable:"on"}).appendTo(this.panel),m={element:l,visibleCounter:0},n=k[c],a=0;a<n.length;a++)this._groupBySlot[n[a]]=
m,n[a]&&1===n[a].length&&10===n[a].charCodeAt(0)?l.append(b("<div>",{unselectable:"on"})):(d=b("<span>",{unselectable:"on"}),this._elemBySlot[n[a]]=d,l.append(d));this.panel.append(b("<div>",{"class":"aloha-ui-clear",unselectable:"on"}));this.handle.appendTo(this.list);this.panel.appendTo(this.panels);this.container.tabs("refresh");g=g.container.data("aloha-tabs");this.index=g.length;g.push(this)},adoptInto:function(b,f){var k=this._elemBySlot[b];if(!k)return!1;c[b]=f;f.adoptParent(this);k.append(f.element);
k=this._groupBySlot[b];this._slotsList.push(b);k&&(this._groupByComponent[f.id]=k,f.isVisible()&&(k.visibleCounter||k.element.removeClass("aloha-ui-hidden"),k.visibleCounter+=1));return!0},foreground:function(){this.container.tabs("select",this.index)},childForeground:function(b){this.foreground()},hasVisibleComponents:function(){var b=this._elemBySlot,f;for(f in b)if(b.hasOwnProperty(f)&&c[f]&&c[f].visible)return!0;return!1},childVisible:function(b,c){c?b.container.show():b.container.hasVisibleComponents()||
b.container.hide();var f=this._groupByComponent[b.id];f&&(c?(0===f.visibleCounter&&f.element.removeClass("aloha-ui-hidden"),f.visibleCounter+=1):(f.visibleCounter-=1,0===f.visibleCounter&&f.element.addClass("aloha-ui-hidden")))},show:function(){var c;(c=!this.list.children().length)||(c=!1,0!==b("button:not(.aloha-multisplit-toggle)",this.panel).length&&(c=!0),c=!c);c||(this.handle.show(),this.visible=!0,this.container.show(),this.container.find(".ui-tabs-active").length&&this.container.tabs("option",
"selected")!==this.index||this.foreground())},hide:function(){var b=this.list.children();if(0!==b.length&&(this.handle.hide(),this.visible=!1,this.index===this.container.tabs("option","selected"))){var b=this.container.data("aloha-tabs"),c;for(c=0;c<b.length;++c)if(b[c].visible){this.container.tabs("select",c);return}this.handle.removeClass("ui-tabs-active");this.container.hide()}}});b.extend(l,{createContainer:function(){var c=b("<div>",{unselectable:"on"}),f=b("<ul>",{unselectable:"on"}).appendTo(c),
l=b("<div>",{unselectable:"on"}).appendTo(c);c.data("list",f).data("panels",l).data("aloha-tabs",[]).tabs({select:function(a,d){var b=c.data("aloha-tabs");c.data("aloha-active-container",b[d.index]);k.pub("aloha.ui.container.selected",{data:b[d.index]})}});return c}});return l});define("ui/subguarded",["aloha/core","jquery","PubSub"],function(l,b,p){function m(a){a.alohaUid||(a.alohaUid=++e);return a.alohaUid}function k(a,d){g[a.alohaUid]||(g[a.alohaUid]=[]);g[a.alohaUid].push(d);return g[a.alohaUid]}
function f(a,d){q[a]||(q[a]=[]);q[a].push(d);return q[a]}function c(a){var d=q[a]||[],b;for(b=0;b<d.length;b++)d[b].apply(null,[g[d[b].alohaUid]||[]].concat(arguments))}var e=0,g={},q={};return function(){var a=Array.prototype.slice.call(arguments),d=a.shift();"string"===typeof d&&(d=[d]);var b=a.shift();m(b);k(b,a);for(var e,g=function(a,d,b){c(e,a,d,b)},q=function(){c(e)},a=0;a<d.length;a++)e=d[a],f(e,b),l.bind(e,g),p.sub(e,q)}});define("vendor/amplify.store",["util/json2"],function(){var l={};
(function(b,l){function m(b,a){k.addType(b,function(d,c,e){var g,m=c,z=(new Date).getTime();if(!d){m={};e=[];c=0;try{for(d=a.length;d=a.key(c++);)f.test(d)&&(g=t.parse(a.getItem(d)),g.expires&&g.expires<=z?e.push(d):m[d.replace(f,"")]=g.data);for(;d=e.pop();)a.removeItem(d)}catch(B){}return m}d="__amplify__"+d;if(c===l)if(g=(g=a.getItem(d))?t.parse(g):{expires:-1},g.expires&&g.expires<=z)a.removeItem(d);else return g.data;else if(null===c)a.removeItem(d);else{g=t.stringify({data:c,expires:e.expires?
z+e.expires:null});try{a.setItem(d,g)}catch(C){k[b]();try{a.setItem(d,g)}catch(E){throw k.error();}}}return m})}var k=b.store=function(b,a,d,c){c=k.type;d&&d.type&&d.type in k.types&&(c=d.type);return k.types[c](b,a,d||{})};k.types={};k.type=null;k.addType=function(b,a){k.type||(k.type=b);k.types[b]=a;k[b]=function(a,c,e){e=e||{};e.type=b;return k(a,c,e)}};k.error=function(){return"amplify.store quota exceeded"};var f=/^__amplify__/,c;for(c in{localStorage:1,sessionStorage:1})try{window[c].getItem&&
m(c,window[c])}catch(e){}if(window.globalStorage)try{m("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===k.type&&(k.type="globalStorage")}catch(g){}(function(){if(!k.types.localStorage){var b=document.createElement("div");b.style.display="none";document.getElementsByTagName("head")[0].appendChild(b);try{b.addBehavior("#default#userdata"),b.load("amplify")}catch(a){b.parentNode.removeChild(b);return}k.addType("userData",function(a,c,e){b.load("amplify");var f,g,m=c,
B=(new Date).getTime();if(!a){m={};g=[];for(a=0;c=b.XMLDocument.documentElement.attributes[a++];)f=t.parse(c.value),f.expires&&f.expires<=B?g.push(c.name):m[c.name]=f.data;for(;a=g.pop();)b.removeAttribute(a);b.save("amplify");return m}a=a.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(c===l)if(f=(c=b.getAttribute(a))?t.parse(c):{expires:-1},f.expires&&f.expires<=B)b.removeAttribute(a);else return f.data;else null===c?b.removeAttribute(a):
(g=b.getAttribute(a),f=t.stringify({data:c,expires:e.expires?B+e.expires:null}),b.setAttribute(a,f));try{b.save("amplify")}catch(C){null===g?b.removeAttribute(a):b.setAttribute(a,g);k.userData();try{b.setAttribute(a,f),b.save("amplify")}catch(E){throw null===g?b.removeAttribute(a):b.setAttribute(a,g),k.error();}}return m})}})();(function(){function b(a){return a===l?l:t.parse(t.stringify(a))}var a={},d={};k.addType("memory",function(c,e,f){if(!c)return b(a);if(e===l)return b(a[c]);d[c]&&(clearTimeout(d[c]),
delete d[c]);if(null===e)return delete a[c],null;a[c]=e;f.expires&&(d[c]=setTimeout(function(){delete a[c];delete d[c]},f.expires));return e})})()})(l);return l});define("ui/floating","jquery aloha/core ui/surface ui/subguarded PubSub vendor/amplify.store util/browser".split(" "),function(l,b,p,m,k,f,c){function e(a,b,c,e){"absolute"===n&&(b.top+=d.scrollTop(),b.left+=d.scrollLeft());v.offset=b;a.stop().animate(b,c,function(){e(b);k.pub("aloha.floating.changed",{position:l.extend({},v)})})}function g(a){f.store("Aloha.FloatingMenu.pinned",
"true");f.store("Aloha.FloatingMenu.top",a.top);f.store("Aloha.FloatingMenu.left",a.left)}function q(a,d,b,c,e){for(d=0;d<a.length;d++)if(a[d][0].isActive())a[d][1](b,c,e)}function a(a){if(l.browser.msie){var d=a.$element.parent();a.$element.appendTo("body");a.$element.css("position",n);d.length?a.$element.appendTo(d):a.$element.detach()}else a.$element.css("position",n)}var d=l(window),n=c.ie7?"absolute":"fixed",v={style:n,offset:{top:0,left:0}};return{getPinState:function(){return"true"===f.store("Aloha.FloatingMenu.pinned")?
{top:parseInt(f.store("Aloha.FloatingMenu.top"),10),left:parseInt(f.store("Aloha.FloatingMenu.left"),10),isPinned:!0}:{top:null,left:null,isPinned:!1}},makeFloating:function(b,c){m(["aloha-selection-changed","aloha.ui.container.selected"],q,b,function(){b._move()});var e=function(){var a;a=c.pinLeft;var e=c.pinTop;0>e?e=0:e>d.height()&&(e=d.height()/2);0>a?a=0:a>d.width()&&(a=d.width()/2);a={top:e,left:a};c.setFloatingPosition(a);b.$element.css({top:a.top,left:a.left})};d.scroll(function(){b._move(0)});
d.resize(function(){c.isFloatingMode||e()});b.addPin();a(b);c.isFloatingMode||e();b.$element.css("z-index",10100).draggable({distance:20,stop:function(a,d){c.setFloatingPosition(d.position);c.isFloatingMode||g(d.position)}})},floatSurface:function(a,b,c,f){"number"!==typeof c&&(c=500);var g=(parseInt(l("body").css("marginTop"),10)||0)+(parseInt(l("body").css("paddingTop"),10)||0);a=a.$element;var k=b.obj.offset(),n=k.top,k=k.left,m=d.scrollTop(),q=n-m-g,v=k+a.width()-d.width();0<v&&(k=Math.max(0,
k-v));q>=a.height()?(b={top:n-m,left:k},b.top-=a.height()+10):(b=q+a.height()>q+b.obj.height()?{top:n+b.obj.height(),left:k}:{top:g,left:k},b.top+=10);e(a,b,c,f)},togglePinSurface:function(a,d,b){a=a.$element;b?(f.store("Aloha.FloatingMenu.pinned",null),f.store("Aloha.FloatingMenu.top",null),f.store("Aloha.FloatingMenu.left",null),a.find(".aloha-ui-pin").removeClass("aloha-ui-pin-down")):(g(d),a.find(".aloha-ui-pin").addClass("aloha-ui-pin-down"));a.css({position:"fixed",top:d.top})},POSITION_STYLE:n}});
(function(){function l(b,f,c,e,g,l){f[b]&&(c.push(b),!0!==f[b]&&1!==f[b]||e.push(g+b+"/"+l))}function b(b,f,c,e,g){f=e+f+"/"+g;require._fileExists(b.toUrl(f))&&c.push(f)}function p(b,f,c){for(var e in f)!f.hasOwnProperty(e)||b.hasOwnProperty(e)&&!c?"object"===typeof f[e]&&p(b[e],f[e],c):b[e]=f[e]}var m=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(k){var f=k.config();return{version:"2.0.1",load:function(c,e,g,k){k=k||{};k.locale&&(f.locale=k.locale);var a=m.exec(c),d=
a[1],n=a[4],v=a[5],y=n.split("-"),A=[],z={},B,C="";a[5]?(d=a[1],c=d+v):(v=a[4],n=f.locale,n||(n=f.locale="undefined"===typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),y=n.split("-"));if(k.isBuild){A.push(c);b(e,"root",A,d,v);for(B=0;B<y.length;B++)k=y[B],C+=(C?"-":"")+k,b(e,C,A,d,v);e(A,function(){g()})}else e([c],function(a){var b=[],c;l("root",a,b,A,d,v);for(B=0;B<y.length;B++)c=y[B],C+=(C?"-":"")+c,l(C,a,b,A,d,v);e(A,function(){var c,f,k;for(c=b.length-
1;-1<c&&b[c];c--){k=b[c];f=a[k];if(!0===f||1===f)f=e(d+k+"/"+v);p(z,f)}z.t=function(a,d){return this[a]?this[a]:d?d:a};g(z)})})}}})})();define("ui/nls/i18n",{root:{"button.dismiss.label":"Dismiss","button.bold.label":"Bold","button.italic.label":"Italic","button.strikethrough.label":"Strikethrough","button.subscript.label":"Subscript","button.superscript.label":"Superscript","button.underline.label":"Underline","button.yes.label":"Yes","button.no.label":"No","button.p.label":"Paragraph","button.h1.label":"Heading 1",
"button.h2.label":"Heading 2","button.h3.label":"Heading 3","button.h4.label":"Heading 4","button.h5.label":"Heading 5","button.h6.label":"Heading 6","button.pre.label":"Preformatted text","button.removeFormatting.label":"Remove formatting","button.ol.label":"Insert ordered list","button.ul.label":"Insert unordered list","button.indent.label":"Indent list","button.outdent.label":"Outdent list","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation",
"button.characterPicker.label":"Pick special characters","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.justifyLeft.label":"Align to the left","button.justifyRight.label":"Align to the right","button.justifyCenter.label":"Center","button.justifyFull.label":"Justify","button.horizontalRule.label":"Insert horizontal rule","button.createLanguageAnnotation.label":"Insert language annotation",
"button.metaview.label":"Switch between meta and normal view","button.quote.label":"Format selection as quote","button.blockquote.label":"Format selection as blockquote","tab.format.label":"Format","tab.insert.label":"Insert","tab.abbr.label":"Abbreviation","tab.img.label":"Image","tab.link.label":"Link","tab.list.label":"List","tab.table.label":"Table","tab.col.label":"Table Column","tab.row.label":"Table Row","tab.cell.label":"Table Cell","tab.wai-lang.label":"Language annotation"},ca:!0,de:!0,
mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("ui/toolbar","jquery aloha/core ui/surface ui/tab ui/floating ui/context i18n!ui/nls/i18n jqueryui".split(" "),function(l,b,p,m,k,f,c){function e(){return!b.settings||!b.settings.toolbar||!1!==b.settings.toolbar.floating}var g=p.extend({_moveTimeout:null,$_container:null,_tabBySlot:null,_tabs:[],_constructor:function(b,a){var d,f,v,p;this._super(b);this.$element=l("<div>",{"class":"aloha-ui aloha-ui-toolbar",unselectable:"on"});this.$_container=m.createContainer().appendTo(this.$element);
this._tabBySlot={};for(v=0;v<a.length;v++){d=a[v];f=new m(b,{label:c.t(d.label,d.label),showOn:d.showOn,container:this.$_container},d.components);for(p in f._elemBySlot)f._elemBySlot.hasOwnProperty(p)&&(this._tabBySlot[p]=f);this._tabs.push({tab:f,settings:d})}e()&&k.makeFloating(this,g)},adoptInto:function(b,a){var d=this._tabBySlot[b];return d&&d.adoptInto(b,a)},getActiveContainer:function(){return this.$_container.data("aloha-active-container")},getContainers:function(){return this.$_container.data("aloha-tabs")},
_move:function(c){var a=this;a._moveTimeout&&clearTimeout(a._moveTimeout);a._moveTimeout=setTimeout(function(){a._moveTimeout=null;b.activeEditable&&g.isFloatingMode&&k.floatSurface(a,b.activeEditable,c,g.setFloatingPosition)},20)},addPin:function(){var b=l('<div class="aloha-ui-pin">'),a=this.$element;a.find(".ui-tabs").append(b);a.find(".ui-tabs").hover(function(){a.addClass("aloha-ui-hover")},function(){a.removeClass("aloha-ui-hover")});g.isFloatingMode||b.addClass("aloha-ui-pin-down");var d=this;
b.click(function(){g.isFloatingMode=!g.isFloatingMode;var a;g.isFloatingMode?a={top:g.pinTop,left:g.pinLeft}:(a=d.$element.offset(),a.top-=l(window).scrollTop());g.setFloatingPosition(a);k.togglePinSurface(d,a,g.isFloatingMode)})},show:function(){g.$surfaceContainer.children().detach();g.$surfaceContainer.append(this.$element);g.$surfaceContainer.stop().fadeTo(200,1);if(e()){var b=g.getFloatingPosition();this.$element.stop().css({top:b.top,left:b.left});this._move()}},hide:function(){g.$surfaceContainer.stop().fadeOut(200,
function(){g.$surfaceContainer.children().detach()})}});l.extend(g,{$surfaceContainer:null,isFloatingMode:!0,pinLeft:0,pinTop:0,init:function(){g.$surfaceContainer=l("<div>",{"class":"aloha aloha-surface aloha-toolbar",unselectable:"on"}).hide();l(function(){g.$surfaceContainer.appendTo("body")});p.trackRange(g.$surfaceContainer);var b=k.getPinState();g.pinTop=b.top;g.pinLeft=b.left;g.isFloatingMode=!b.isPinned},setFloatingPosition:function(b){g.pinTop=b.top;g.pinLeft=b.left},getFloatingPosition:function(){return{top:g.pinTop,
left:g.pinLeft}}});g.init();return g});define("ui/settings",["jquery","util/arrays","util/maps","util/trees"],function(l,b,p,m){function k(b,c,f){var a,d,k=[],v;for(a=0;a<b.length;a++)if(d=b[a],!c[d.label]&&(v=m.postprune(d.components,f)))d=l.extend({},d),d.components=v,k.push(d);return k}function f(b,c,f){var a,d,k=[],v,p,A;for(a=0;a<b.length;a++)d=b[a],v=d.components||[],p=c[d.label],!d.exclusive&&p&&(A=m.postprune(p.components,f))&&(v=v.concat(A)),d=l.extend({},p||{},d),d.components=v,k.push(d);
return k}function c(b,c){var f,a=p.fillKeys({},c,!0);for(f=0;f<b.length;f++)a[b[f].label]=!0,p.fillKeys(a,m.flatten(b[f].components),!0);return a}return{defaultToolbarSettings:{tabs:[{label:"tab.format.label",showOn:{scope:"Aloha.continuoustext"},components:["bold strong italic emphasis underline \n subscript superscript strikethrough quote".split(" "),"formatLink formatAbbr formatNumeratedHeaders toggleDragDrop \n toggleMetaView wailang toggleFormatlessPaste".split(" "),"alignLeft alignCenter alignRight alignJustify \n orderedList unorderedList indentList outdentList colorPicker".split(" "),
["formatBlock"]]},{label:"tab.insert.label",showOn:{scope:"Aloha.continuoustext"},components:["createTable characterPicker insertLink insertImage insertAbbr insertToc insertHorizontalRule insertTag".split(" ")]},{label:"tab.link.label",showOn:{scope:"link"},components:["editLink","removeLink","linkBrowser"]},{label:"tab.img.label",showOn:{scope:"image"},components:[["imageSource","\n","imageTitle"],["imageResizeWidth","\n","imageResizeHeight"],"imageAlignLeft imageAlignRight imageAlignNone imageIncPadding \n imageCropButton imageCnrReset imageCnrRatio imageDecPadding".split(" "),
["imageBrowser"]]},{label:"tab.abbr.label",showOn:{scope:"abbr"},components:[["abbrText","removeAbbr"]]},{label:"tab.wai-lang.label",showOn:{scope:"wai-lang"},components:[["wailangfield","removewailang"]]},{label:"tab.table.label",showOn:{scope:"table.cell"},components:[["mergecells","splitcells","tableCaption","naturalFit","tableSummary"],["formatTable"]]},{label:"tab.col.label",showOn:{scope:"table.column"},components:["addcolumnleft addcolumnright deletecolumns columnheader mergecellsColumn splitcellsColumn formatColumn".split(" ")]},
{label:"tab.row.label",showOn:{scope:"table.row"},components:["addrowbefore addrowafter deleterows rowheader mergecellsRow splitcellsRow formatRow".split(" ")]},{label:"tab.cell.label",showOn:{scope:"table.cell"},components:[["alignTop","alignMiddle","alignBottom","formatCell"]]}]},combineToolbarSettings:function(e,g,m){function a(a){return"array"===l.type(a)?!a.length:n[a]}var d=p.fillTuples({},b.map(g,function(a){return[a.label,a]})),n=c(e,m);e=f(e,d,a);g=k(g,n,a);return e.concat(g)}}});define("ui/ui-plugin",
"jquery aloha ui/context ui/container ui/surface ui/toolbar ui/scopes ui/settings PubSub jqueryui".split(" "),function(l,b,p,m,k,f,c,e,g){var q=new p,a=new f(q,function(){var a=b.settings.toolbar,c=e.defaultToolbarSettings;return a?e.combineToolbarSettings(a.tabs||[],c.tabs,a.exclude||[]):c.tabs}());b.bind("aloha-editable-activated",function(a,b){k.show(q);m.showContainersForContext(q,a)});b.bind("aloha-editable-deactivated",function(a,b){k.suppressHide||k.hide(q)});g.sub("aloha.ui.scope.change",
function(){m.showContainersForContext(q);c.getPrimaryScope();var d=a._tabs,b=c.getPrimaryScope(),e,f;for(f=0;f<d.length;f++)if(e=d[f].settings,"object"===l.type(e.showOn)&&e.showOn.scope===b){d[f].tab.foreground();break}});return{adoptInto:function(d,b){return a.adoptInto(d,b)},showToolbar:function(a){k.show(q);m.showContainersForContext(q,a)}}});define("ui/ui",["jquery","ui/ui-plugin"],function(l,b){var p={};return{adopt:function(m,k,f){"string"!==l.type(m)?(f=k,k=m,m=f.name):f=l.extend({name:m},
f);k.isInstance||(k=f?k.extend(f):k,k=new k);p[m]=k;b.adoptInto(m,k);return k},getAdoptedComponent:function(b){return p[b]||null}}});define("ui/utils",["jquery","jqueryui"],function(l){function b(b){return b.html||b.text||b.tooltip}function p(b){return'<img class="aloha-ui-inline-icon" src="'+b+'">'}return{wrapWithLabel:function(b,k){return l("<label>",{"class":"aloha-ui-label"}).append(l("<span>",{"class":"aloha-ui-label-text",text:b})).append(k)},makeButton:function(l,k,f){l.button({label:b(k),
text:!(!k.text&&!k.html),icons:{primary:k.icon||k.iconUrl&&"aloha-ui-inline-icon-container"||null,secondary:f&&"aloha-jqueryui-icon ui-icon-triangle-1-s"||null}});k.iconUrl&&l.button("widget").children(".ui-button-icon-primary").append(p(k.iconUrl));return l},makeButtonElement:function(b){return l("<button>",b).attr("type","button")},makeButtonLabel:b,makeButtonLabelWithIcon:function(l){var k=b(l);l.iconUrl&&(k=p(l.iconUrl)+k);return k},makeButtonIconFromUrl:p}});define("ui/vendor/jquery-ui-autocomplete-html",
["jquery","jqueryui"],function(l){(function(b){function l(f,c){var e=RegExp(b.ui.autocomplete.escapeRegex(c),"i");return b.grep(f,function(c){return e.test(b("<div>").html(c.label||c.value||c).text())})}var m=b.ui.autocomplete.prototype,k=m._initSource;b.extend(m,{_initSource:function(){this.options.html&&b.isArray(this.options.source)?this.source=function(b,c){c(l(this.options.source,b.term))}:k.call(this)},_renderItem:function(f,c){return b("<li></li>").data("item.autocomplete",c).append(b("<a></a>")[this.options.html?
"html":"text"](c.label)).appendTo(f)}})})(l)});define("ui/port-helper-attribute-field","jquery ui/ui ui/component ui/scopes ui/context ui/utils aloha/repositorymanager aloha/selection aloha/console ui/vendor/jquery-ui-autocomplete-html".split(" "),function(l,b,p,m,k,f,c,e,g){return function(g){function a(a,d){d.item&&r(d.item.obj);n()}function d(){n()}function n(){A();ba&&M!==l(ba).attr(V)&&(S||c.markObject(ba),""===C()&&B())}function m(a){var d=l(ba);a(d);for(var d=0,b=U.length;d<b;d++)a(l(U[d]))}
function y(){var a=l(ba);x&&m(function(a){a.addClass(x)});N||(A(),a.context&&a.context.style&&a.context.style["background-color"]&&m(function(a){a.attr("data-original-background-color",a.context.style["background-color"])}),m(function(a){a.css("background-color","#80B5F2")}))}function A(){var a=l(ba);x&&m(function(a){a.removeClass(x)});if(!N){var d=a.attr("data-original-background-color");m(function(a){a.css("background-color",d||"")});a.attr("style")||m(function(a){a.removeAttr("style")});m(function(a){a.removeAttr("data-original-background-color")})}}
function z(a,d){return a.replace(/\{([^}]+)\}/g,function(a,b){return b in d?d[b]:""})}function B(){null!==Z&&(K.css("color","#AAA"),K.val(Z))}function C(){return K.val()}function E(a){K.val(a);K.css("color","black")}function r(a){if(S=a){var d=a[u];E(d);ha=d;t(V,a[s]);c.markObject(ba,a)}else ha=null}function t(a,d,b,c){ba&&("undefined"===typeof c||c.match(RegExp(b))?m(function(b){b.attr(a,d)}):l(ba).removeAttr(a))}var s=g.valueField||"id",u=g.displayField||"name",I=g.objectTypeFilter||["all"],Z=g.placeholder,
N=!!g.noTargetHighlight,x=g.targetHighlightClass,K=g.element?l(g.element):l('<input id="aloha-attribute-field-'+g.name+'">'),G,Q,S,ha,ba,V,M,U=[];g.cls&&K.addClass(g.cls);g.width&&K.width(g.width);G=b.adopt(g.name,p,{scope:g.scope,init:function(){g.element?this.element=K:g.label?(this.element=f.wrapWithLabel(g.label,K),g.labelClass&&this.element.addClass(g.labelClass)):this.element=l("<span>").append(K);K.autocomplete({html:!0,appendTo:k.selector,source:function(a,d){c.query({queryString:a.term,objectTypeFilter:I},
function(a){d(l.map(a.items,function(a){return{label:z(Q,a),value:a.name,obj:a}}))})},select:a})}});K.bind("focus",function(a,d){l(a.target).is(":visible")&&(y(),C()===Z&&E(""))}).bind("blur",d).bind("keydown",function(a){13!=a.keyCode&&27!=a.keyCode||a.preventDefault()}).bind("keyup",function(a){S&&ha!==C()&&(ha=S=null);S||t(V,C());if(13==a.keyCode||27==a.keyCode)e.getRangeObject().select(),n()});B();Aloha.bind("aloha-editable-deactivated",d);var J={getInputElem:function(){return K[0]},hasInputElem:function(){return!0},
getInputId:function(){return K.attr("id")},hide:function(){K.hide()},show:function(){K.show()},foreground:function(){G.foreground()},focus:function(){G.focus();K.focus()},getTargetObject:function(){return ba},setTargetObject:function(a,d){ba=a;V=d;U=[];r(null);a&&d?(M=l(a).attr(d),E(l(ba).attr(V)),c.getObject(a,function(a){a&&0<a.length&&r(a[0])})):E("")},addAdditionalTargetObject:function(a){U.push(a)},setAttribute:t,getItem:function(){return S},setItem:r,setValue:E,getValue:C,addListener:function(a,
d){K.bind(a,l.proxy(d,J))},setObjectTypeFilter:function(a){I=a},setTemplate:function(a){Q=a},setPlaceholder:B,getInputJQuery:function(){return K}};return J}});define("ui/button",["jquery","ui/component","ui/utils","jqueryui"],function(l,b,p){return b.extend({init:function(){this._super();this.createButtonElement();p.makeButton(this.buttonElement,this).button("widget").tooltip({tooltipClass:"aloha aloha-ui-tooltip",position:{my:"left top",at:"right bottom"}}).zIndex(0).click(l.proxy(function(){this.closeTooltip();
this._onClick()},this))},closeTooltip:function(){this.buttonElement.tooltip("close",null,!0)},_onClick:function(){this.click()},click:function(){},createButtonElement:function(){var b=p.makeButtonElement();this["class"]&&b.addClass(this["class"]);this.element=this.buttonElement=b;var k=this;b.bind("mouseleave",function(){k.closeTooltip()});return b},disable:function(){this.element.button("option","disabled",!1)},enable:function(b){this.element.button("option","disabled",!1===b)}})});define("ui/toggleButton",
["jquery","ui/button","jqueryui"],function(l,b){return b.extend({_checked:!1,setState:function(b){this._checked!==b&&((this._checked=b)?this.element.addClass("aloha-button-active"):this.element.removeClass("aloha-button-active"))},getState:function(){return this._checked},_onClick:function(){this.setState(!this._checked);this.click()}})});define("link/nls/i18n",{root:{"button.addlink.tooltip":"Insert Link","button.removelink.tooltip":"Remove Link","newlink.defaulttext":"New Link","floatingmenu.tab.link":"Link",
"link.target.self":"Self","link.target.blank":"Blank","link.target.parent":"Parent","link.target.top":"Top","link.target.framename":"Framename","link.target.legend":"Target","link.title.legend":"Title",insertLink:"ctrl+k"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("aloha/nls/i18n",{root:{"plugin.abbr.floatingmenu.tab.abbr":"Abbreviation","floatingmenu.tab.format":"Format","floatingmenu.tab.insert":"Insert",yes:"Yes",no:"No",cancel:"Cancel","repository.no_item_found":"No item found.",
"repository.loading":"Loading","repository.no_items_found_yet":"No items found yet..."},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("util/keys",["jquery"],function(l){var b=function(){var b={};l.each({8:"backspace",9:"tab",13:"enter",16:"shift control alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left up right down",45:"insert",46:"delete",48:"0 1 2 3 4 5 6 7 8 9",65:"a b c d e f g h i j k l m n o p q r s t u v w x y z",112:"f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13 f14 f15"},
function(m,k){var f=parseInt(m,10);l.each(k.split(" "),function(c,e){b[f+c]=e})});return b}();return{getToken:function(l){return b[l]},keyCodeTokenMap:l.extend({},b)}});define("link/link-plugin","aloha aloha/plugin aloha/ephemera jquery ui/port-helper-attribute-field ui/ui ui/scopes ui/surface ui/button ui/toggleButton i18n!link/nls/i18n i18n!aloha/nls/i18n aloha/console PubSub util/keys".split(" "),function(l,b,p,m,k,f,c,e,g,q,a,d,n,v,y){function A(){m(document).bind("keydown.aloha-link.pointer-fix",
function(a){(a.metaKey||"control"===y.getToken(a.keyCode))&&m("body").addClass("aloha-link-pointer")}).bind("keyup.aloha-link.pointer-fix",function(a){(a.metaKey||"control"===y.getToken(a.keyCode))&&m("body").removeClass("aloha-link-pointer")})}function z(a){a.obj.delegate("a","click.aloha-link.meta-click-link",function(a){if(a.metaKey||a.ctrlKey)return l.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})}function B(a,d){for(var b=a.findAllMarkupByTagName("A",
a),c=0,e=b.length;c<e;c++)d.addAdditionalTargetObject(b[c])}function C(a,d){var b,c=!1;!a.ignoreNextSelectionChangedEvent&&l.Selection.isSelectionEditable()&&null!=l.activeEditable?(b=a.findLinkMarkup(d))?(a.toggleLinkScope(!0),a.hrefField.setTargetObject(b,"href"),B(d,a.hrefField),0==m("#"+a.hrefField.getInputId()).length&&(null!==a.hrefUpdateInt&&clearInterval(a.hrefUpdateInt),a.hrefUpdateInt=setInterval(function(){0<m("#"+a.hrefField.getInputId()).length&&(a.hrefField.setTargetObject(b,"href"),
clearInterval(a.hrefUpdateInt))},200)),l.trigger("aloha-link-selected"),c=!0,v.pub("aloha.link.selected",{input:a.hrefField.getInputElem(),href:a.hrefField.getValue(),element:a.hrefField.getTargetObject()})):(a.toggleLinkScope(!1),a.hrefField.setTargetObject(null),l.trigger("aloha-link-unselected")):a.toggleLinkScope(!1);a.ignoreNextSelectionChangedEvent=!1;return c}var E=window.GENTICS,r="",t,s={merge:!0,mergeable:function(a){return"aloha-new-link"===a.className&&a.nextSibling&&"aloha-new-link"===
a.nextSibling.className}};p.classes("aloha-link-pointer","aloha-link-text");return b.create("link",{config:["a"],title:null,titleregex:null,targetregex:"",target:"",cssclassregex:null,cssclass:"",objectTypeFilter:[],onHrefChange:null,ignoreNextSelectionChangedEvent:!1,hrefUpdateInt:null,hotKey:{insertLink:a.t("insertLink","ctrl+k")},hrefValue:"http://",init:function(){var a=this;"undefined"!==typeof this.settings.title&&(this.title=this.settings.title);"undefined"!==typeof this.settings.titleregex&&
(this.titleregex=this.settings.titleregex);"undefined"!=typeof this.settings.targetregex&&(this.targetregex=this.settings.targetregex);"undefined"!=typeof this.settings.target&&(this.target=this.settings.target);"undefined"!=typeof this.settings.cssclassregex&&(this.cssclassregex=this.settings.cssclassregex);"undefined"!=typeof this.settings.cssclass&&(this.cssclass=this.settings.cssclass);"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);"undefined"!=
typeof this.settings.onHrefChange&&(this.onHrefChange=this.settings.onHrefChange);"undefined"!=typeof this.settings.hotKey&&m.extend(!0,this.hotKey,this.settings.hotKey);"undefined"!=typeof this.settings.hrefValue&&(this.hrefValue=this.settings.hrefValue);this.createButtons();this.subscribeEvents();this.bindInteractions();l.bind("aloha-plugins-loaded",function(){a.initSidebar(l.Sidebar.right);v.pub("aloha.link.ready",{plugin:a})})},nsSel:function(){var a=[];m.each(arguments,function(){a.push("."+
(""==this?"aloha-link":"aloha-link-"+this))});return m.trim(a.join(" "))},nsClass:function(){var a=[];m.each(arguments,function(){a.push(""==this?"aloha-link":"aloha-link-"+this)});return m.trim(a.join(" "))},initSidebar:function(d){var b=this;b.sidebar=d;d.addPanel({id:b.nsClass("sidebar-panel-target"),title:a.t("floatingmenu.tab.link"),content:"",expanded:!0,activeOn:"a, link",onInit:function(){var d=this;this.setContent('<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+a.t("link.target.legend")+
'</legend><ul><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_self" /><span>'+a.t("link.target.self")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_blank" /><span>'+a.t("link.target.blank")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_parent" /><span>'+a.t("link.target.parent")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+
'" value="_top" /><span>'+a.t("link.target.top")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="framename" /><span>'+a.t("link.target.framename")+'</span></li><li><input type="text" class="'+b.nsClass("framename")+'" /></li></ul></fieldset></div><div class="'+b.nsClass("title-container")+'" ><fieldset><legend>'+a.t("link.title.legend")+'</legend><input type="text" class="'+b.nsClass("linkTitle")+'" /></fieldset></div>');m(b.nsSel("framename")).live("keyup",
function(){m(d.effective).attr("target",m(this).val().replace('"',"&quot;").replace("'","&#39;"))});m(b.nsSel("radioTarget")).live("change",function(){"framename"==m(this).val()?m(b.nsSel("framename")).slideDown():(m(b.nsSel("framename")).slideUp().val(""),m(d.effective).attr("target",m(this).val()))});m(b.nsSel("linkTitle")).live("keyup",function(){m(d.effective).attr("title",m(this).val().replace('"',"&quot;").replace("'","&#39;"))})},onActivate:function(a){var d=this;d.effective=a;if(null!=m(d.effective).attr("target")){var c=
!0;m(b.nsSel("framename")).hide().val("");m(b.nsSel("radioTarget")).each(function(){m(this).removeAttr("checked");m(this).val()===m(d.effective).attr("target")&&(c=!1,m(this).attr("checked","checked"))});c&&(m(b.nsSel('radioTarget[value="framename"]')).attr("checked","checked"),m(b.nsSel("framename")).val(m(d.effective).attr("target")).show())}else m(b.nsSel("radioTarget")).first().attr("checked","checked"),m(d.effective).attr("target",m(b.nsSel("radioTarget")).first().val());d=this;d.effective=a;
m(b.nsSel("linkTitle")).val(m(d.effective).attr("title"))}});d.show()},subscribeEvents:function(){var a=this,d={},b=0;l.bind("aloha-editable-created",function(c,e){var f=a.getEditableConfig(e.obj),f=-1!==m.inArray("a",f);if(d[e.getId()]=f)e.obj.bind("keydown.aloha-link",a.hotKey.insertLink,function(){a.findLinkMarkup()?(a.hrefField.foreground(),a.hrefField.focus()):a.insertLink(!0);return!1}),e.obj.find("a").each(function(){a.addLinkEventHandlers(this)}),0===b++&&A()});l.bind("aloha-editable-destroyed",
function(a,d){d.obj.unbind(".aloha-link");0===--b&&m(document).unbind(".aloha-link.pointer-fix")});l.bind("aloha-editable-activated",function(b,c){d[l.activeEditable.getId()]?(a._formatLinkButton.show(),a._insertLinkButton.show()):(a._formatLinkButton.hide(),a._insertLinkButton.hide());z(c.editable)});var c=!1;l.bind("aloha-selection-changed",function(b,e){var f=!1;l.activeEditable&&d[l.activeEditable.getId()]&&(f=C(a,e))&&c!==f&&a.hrefField.foreground();c=f});var e=this;l.bind("aloha-editable-deactivated",
function(a,d){c&&(setTimeout(function(){c||e.toggleLinkScope(!1)},100),c=!1);d.editable.obj.unbind(".aloha-link.meta-click-link")})},toggleLinkScope:function(a){this._isScopeActive===a&&l.activeEditable&&this._isScopeActive_editableId===l.activeEditable.getId()||(this._isScopeActive=a,this._isScopeActive_editableId=l.activeEditable&&l.activeEditable.getId(),a?(this.hrefField.show(),this._insertLinkButton.hide(),l.activeEditable&&"A"===l.activeEditable.obj[0].nodeName?this._removeLinkButton.hide():
this._removeLinkButton.show(),this._formatLinkButton.setState(!0),c.enterScope(this.name,"link")):(this.hrefField.hide(),this._insertLinkButton.show(),this._removeLinkButton.hide(),this._formatLinkButton.setState(!1),c.leaveScope(this.name,"link",!0)))},addLinkEventHandlers:function(a){var d=this;m(a).mouseenter(function(b){l.Log.debug(d,"mouse over link.");d.mouseOverLink=a;d.updateMousePointer()});m(a).mouseleave(function(a){l.Log.debug(d,"mouse left link.");d.mouseOverLink=null;d.updateMousePointer()});
m(a).click(function(a){if(a.metaKey)return l.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})},createButtons:function(){var d=this;this._formatLinkButton=f.adopt("formatLink",q,{tooltip:a.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){d.formatLink()}});this._insertLinkButton=f.adopt("insertLink",g,{tooltip:a.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",
click:function(){d.insertLink(!1)}});this.hrefField=k({name:"editLink",width:320,valueField:"url",cls:"aloha-link-href-field",scope:"Aloha.continuoustext",noTargetHighlight:!1,targetHighlightClass:"aloha-focus"});this.hrefField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.hrefField.setObjectTypeFilter(this.objectTypeFilter);this._removeLinkButton=f.adopt("removeLink",g,{tooltip:a.t("button.removelink.tooltip"),icon:"aloha-icon aloha-icon-unlink",scope:"Aloha.continuoustext",click:function(){d.removeLink()}})},
bindInteractions:function(){var a=this;this.hrefField.addListener("keyup",function(d){if("escape"===y.getToken(d.keyCode)){var b=a.hrefField.getValue();"/"==b[0]||"#"==b[0]||b.match(/^.*\.([a-z]){2,4}$/i)||b.match(/^([a-z]){3,10}:\/\/.+/i)||b.match(/^(mailto|tel):.+/i)||(b=a.hrefField.getValue(),a.hrefField.setValue(b),b!=a.hrefValue&&""!=b||a.removeLink(!1))}a.hrefChange();"enter"===y.getToken(d.keyCode)?(d=l.Selection.getRangeObject(),a.ignoreNextSelectionChangedEvent=!0,d.startContainer=d.endContainer,
d.startOffset=d.endOffset,d.select(),a.ignoreNextSelectionChangedEvent=!0,b=m(a.hrefField.getInputElem()).attr("value"),b!=a.hrefValue&&""!=b||a.removeLink(!1),window.setTimeout(function(){c.setScope("Aloha.continuoustext")},100)):(t=m(a.hrefField.getInputElem()).attr("value"),r!=t&&(r=t))});m(document).keydown(function(d){l.Log.debug(a,"Meta key down.");a.metaKey=d.metaKey;a.updateMousePointer()}).keyup(function(d){l.Log.debug(a,"Meta key up.");a.metaKey=d.metaKey;a.updateMousePointer()})},updateMousePointer:function(){this.metaKey&&
this.mouseOverLink?(l.Log.debug(this,"set pointer"),m(this.mouseOverLink).removeClass("aloha-link-text"),m(this.mouseOverLink).addClass("aloha-link-pointer")):(m(this.mouseOverLink).removeClass("aloha-link-pointer"),m(this.mouseOverLink).addClass("aloha-link-text"))},findLinkMarkup:function(a){"undefined"==typeof a&&(a=l.Selection.getRangeObject());if(l.activeEditable){var d=l.activeEditable.obj;d[0]&&"A"===d[0].nodeName&&(d=d.parent());return a.findMarkup(function(){return"A"==this.nodeName},d)}return null},
formatLink:function(){l.activeEditable&&(this.findLinkMarkup(l.Selection.getRangeObject())?this.removeLink():this.insertLink())},insertLink:function(d){var b=this,c=l.Selection.getRangeObject(),e;c.startContainer&&c.endContainer&&!this.findLinkMarkup(c)&&(this.hrefField.foreground(),c.isCollapsed()&&!1!==d&&E.Utils.Dom.extendToWord(c),c.isCollapsed()?(d=a.t("newlink.defaulttext"),e=m('<a href="'+b.hrefValue+'" class="aloha-new-link">'+d+"</a>"),E.Utils.Dom.insertIntoDOM(e,c,m(l.activeEditable.obj)),
c.startContainer=c.endContainer=e.contents().get(0),c.startOffset=0,c.endOffset=d.length):(e=m('<a href="'+b.hrefValue+'" class="aloha-new-link"></a>'),E.Utils.Dom.addMarkup(c,e,!1),E.Utils.Dom.doCleanup(s,c)),l.activeEditable.obj.find("a.aloha-new-link").each(function(a){b.addLinkEventHandlers(this);m(this).removeClass("aloha-new-link")}),c.select(),this.hrefField.focus(),this.hrefField.hasInputElem()&&m(this.hrefField.getInputElem()).attr("value",b.hrefValue).select(),d=l.createRange(),d.setStart(c.startContainer,
c.startOffset),d.setEnd(c.endContainer,c.endOffset),v.pub("aloha.link.insert",{range:d}),this.hrefChange())},removeLink:function(a){var d=l.Selection.getRangeObject(),b=this.findLinkMarkup();this.hrefField.setItem(null);b&&(E.Utils.Dom.removeFromDOM(b,d,!0),d.startContainer=d.endContainer,d.startOffset=d.endOffset,d.select(),"undefined"!=typeof a&&!0!==a||c.setScope("Aloha.continuoustext"))},automaticallySetTitle:function(a,d,b){var c=m(a.getTargetObject()).attr("title");!d||c&&d!==c||a.setAttribute("title",
d,b,a.getValue())},hrefChange:function(){this.automaticallySetTitle(this.hrefField,this.title,this.titleregex);""!=this.target&&this.hrefField.setAttribute("target",this.target,this.targetregex,this.hrefField.getValue());null!=this.cssclassregex&&this.hrefField.setAttribute("class",this.cssclass,this.cssclassregex,this.hrefField.getValue());var a=this.hrefField.getValue(),d=this.hrefField.getTargetObject();l.trigger("aloha-link-href-change",{href:a,obj:d,item:this.hrefField.getItem()});v.pub("aloha.link.changed",
{href:a,element:d,input:this.hrefField.getInputElem()});"function"==typeof this.onHrefChange&&this.onHrefChange.call(this,this.hrefField.getTargetObject(),this.hrefField.getValue(),this.hrefField.getItem())}})});define("ui/dialog",["jquery","ui/component","i18n!ui/nls/i18n"],function(l,b,p){function m(b){var c={};b.text&&(c.text=b.text);b.html&&(c.html=b.html);return l("<div>",c)}function k(b){return function(){b.apply(this);l(this).dialog("destroy").remove()}}function f(b){for(var c in b)b.hasOwnProperty(c)&&
(b[c]=k(b[c]));return b}function c(b,c){var f="aloha aloha-dialog";b.cls&&(f+=" "+b.cls);return{resizable:!1,modal:!0,title:b.title||c,dialogClass:f,zIndex:10200}}return{confirm:function(b){var g=b.buttons||{},k=p.t("button.yes.label"),a=p.t("button.no.label");null!==g.Yes&&"Yes"!==k&&(g[k]=g.Yes,delete g.Yes);null!==g.No&&"No"!==a&&(g[a]=g.No,delete g.No);g[k]=g[k]||b.yes||l.noop;g[a]=g[a]||b.no||l.noop;if(b.answer){var d=g[k],n=g[a];g[k]=function(){d();b.answer(!0)};g[a]=function(){n();b.answer(!1)}}var v=
m(b).dialog(l.extend(c(b,"Confirm"),{buttons:f(g)}));return function(){v.dialog("destroy").remove()}},alert:function(b){var g={};g[p.t("button.dismiss.label")]=l.noop;var k=m(b).dialog(l.extend(c(b,"Alert"),{buttons:f(g)}));return function(){k.dialog("destroy").remove()}},modal:function(b){b=m(b).dialog(l.extend(c(b,""),b));b.parent().find(".ui-dialog-titlebar").remove();return b},progress:function(b){var f=l("<div>").progressbar({value:null!=b.value?b.value:100}),k=m(b).dialog(l.extend(c(b,"Progress"),
{open:function(){l(this).append(f)}}));return function(a){null!=a?f.progressbar({value:a}):k.dialog("destroy").remove()}}}});define("ui/multiSplit",["jquery","ui/component","ui/button","ui/utils"],function(l,b,p,m){return b.extend({_activeButton:null,_isOpen:!1,init:function(){this._super();var b=this,f=this.element=l("<div>",{"class":"aloha-multisplit"});this.contentElement=l("<div>",{"class":"aloha-multisplit-content"}).appendTo(f);this.toggleButton=m.makeButtonElement({"class":"aloha-multisplit-toggle",
click:function(){b.toggle()}}).button().appendTo(f);this.buttons=[];var c=this.getButtons();0===c.length&&f.hide();for(f=0;f<c.length;f++)this.addButton(c[f]);l("body").click(function(c){b._isOpen&&!b.element.is(c.target)&&0===b.element.find(c.target).length&&b.close()})},addButton:function(b){var f=this,c=new (p.extend({tooltip:b.tooltip,icon:b.wide?b.icon:"aloha-large-icon "+b.icon,iconOnly:b.wide?!1:!0,init:function(){this._super();b.init&&b.init.call(this)},click:function(){b.click.apply(f,arguments);
f.close()}}));b.wide||c.element.addClass("aloha-large-button");f.buttons[b.name]={settings:b,component:c,element:c.element,visible:!0};var e=this.contentElement.children(".aloha-ui-multisplit-fullwidth");!b.wide&&e.length?e.before(c.element[0]):this.contentElement.append(c.element[0])},setActiveButton:function(b){b||(b=null);null!==this._activeButton&&this.buttons[this._activeButton].element.removeClass("aloha-multisplit-active");this._activeButton=b;null!==b&&this.buttons[b].element.addClass("aloha-multisplit-active")},
toggle:function(){this.element.toggleClass("aloha-multisplit-open");this._isOpen=!this._isOpen},open:function(){this.element.addClass("aloha-multisplit-open");this._isOpen=!0},close:function(){this.element.removeClass("aloha-multisplit-open");this._isOpen=!1},show:function(b){b||(b=null);null!==b&&void 0!==this.buttons[b]&&(this.buttons[b].element.show(),this.buttons[b].visible=!0,this.element.show())},hide:function(b){var f,c=!1;b||(b=null);if(null!==b&&void 0!==this.buttons[b]){this.buttons[b].element.hide();
this.buttons[b].visible=!1;for(f in this.buttons)if(this.buttons.hasOwnProperty(f)&&this.buttons[f].visible){this.element.show();c=!0;break}c||this.element.hide()}}})});define("ui/port-helper-multi-split",["aloha/core","jquery","ui/ui","ui/multiSplit"],function(l,b,p,m){return function(k){var f;f=p.adopt(k.name,m,{scope:k.scope,getButtons:function(){var c=[];b.each(k.items,function(b,f){c.push({tooltip:f.tooltip,text:f.text,name:f.name,icon:f.iconClass,click:f.click,init:function(){f.cls&&this.element.addClass(f.cls);
f.init&&f.init.call(this)},wide:f.wide})});return c}});return{pushItem:function(b){f.addButton(b)},showItem:function(b){f.show(b)},hideItem:function(b){f.hide(b)},setActiveItem:function(b){f.setActiveButton(b)}}}});define("table/nls/i18n",{root:{"floatingmenu.tab.table":"Table","floatingmenu.tab.tablelayout":"Table Layout","deleterows.confirm":"Do you really want to delete the selected rows?","deletecolumns.confirm":"Do you really want to delete the selected columns?","deletetable.confirm":"Do you really want to delete the table?",
Table:"Table","button.createtable.tooltip":"Insert Table","button.addcolleft.tooltip":"Add Column left","button.addcolright.tooltip":"Add Column right","button.delcols.tooltip":"Delete Columns","button.addrowbefore.tooltip":"Add Row before","button.addrowafter.tooltip":"Add Row after","button.delrows.tooltip":"Delete Rows","button.caption.tooltip":"Table caption","button.naturalfit.tooltip":"Reset table sizing","empty.caption":"Table caption","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",
"button.rowheader.tooltip":"Format row as table header","button.columnheader.tooltip":"Format column as table header","button.mergecells.tooltip":"Merge Cells","button.splitcells.tooltip":"Split Cells","table.label.target":"Summary","table.sidebar.title":"Table","table.mergeCells.notRectangular":"Only a rectangular selection can be merged","table.addColumns.nonConsecutive":"Please select a single column or a consecutive range of columns","table.createTable.nestedTablesNoSupported":"Sorry, nested tables are not supported"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("table/table-create-layer",["jquery"],function(l){CreateLayer=function(b){this.TablePlugin=b};CreateLayer.prototype.parameters={elemId:"aloha-table-createLayer",className:"aloha-table-createdialog",numX:10,numY:10,layer:void 0,target:void 0};CreateLayer.prototype.config={};CreateLayer.prototype.visible=!1;CreateLayer.prototype.show=function(){var b=this.get("layer");null==b?this.create():(this.setPosition(b),b.find("td").removeClass("hover"),
b.show());this.visible=!0};CreateLayer.prototype.create=function(){var b=this,p=l("<div></div>");p.id=this.get("elemId");p.addClass(this.get("className"));var m=l("<table></table>");m.css("width",15*(this.get("numX")+6));for(var k,f,c=0;c<this.get("numY");c++){k=l("<tr></tr>");for(var e=0;e<this.get("numX");e++)f=l("<td>\u00a0</td>"),0==c&&0==e&&f.addClass("hover"),f.bind("mouseover",{rowId:c,colId:e},function(c){b.handleMouseOver(c,m)}),f.bind("click",{rowId:c,colId:e},function(c){b.TablePlugin.createTable(c.data.colId+
1,c.data.rowId+1);b.hide()}),k.append(f);m.append(k)}p.append(m);this.set("layer",p);this.setPosition();p.bind("click",function(b){b.stopPropagation()}).mousedown(function(b){b.stopPropagation()});l("body").append(p).bind("click",function(c){b.visible&&c.target!==b.get("target")[0]&&!l.contains(b.get("target")[0],c.target)&&b.hide()})};CreateLayer.prototype.handleMouseOver=function(b,p){for(var m=b.data.rowId,k=b.data.colId,f=p.find("tr"),c=0;c<=f.length;c++)for(var e=l(f[c]).find("td"),g=0;g<=e.length;g++)c<=
m&&g<=k?l(e[g]).addClass("hover"):l(e[g]).removeClass("hover")};CreateLayer.prototype.setPosition=function(){var b=l(this.get("target")),p=b.offset();this.get("layer").css("left",p.left+"px");this.get("layer").css("top",p.top+b.height()+"px")};CreateLayer.prototype.hide=function(){this.get("layer").hide();this.visible=!1};CreateLayer.prototype.get=function(b){if(this.config[b])return this.config[b];if(this.parameters[b])return this.parameters[b]};CreateLayer.prototype.set=function(b,l){this.config[b]?
this.config[b]=l:this.parameters[b]=l};return CreateLayer});define("table/table-plugin-utils",["jquery","aloha/copypaste","util/browser","aloha/console"],function(l,b,p,m){var k={cellIndexToGridColumn:function(b,c,e){var g=null;k.walkCells(b,function(b,a,d,f,k){if(b===c&&a===e)return g=d,!1});return g},walkCells:function(b,c){for(var e=[],g=0;g<b.length;g++){for(var l=b[g].cells,a=0,d=0;d<l.length;d++){for(var n=l[d],m=k.colspan(n),n=k.rowspan(n);e[d+a];)e[d+a]-=1,a+=1;if(!1===c(g,d,d+a,m,n))return;
for(var p=0;p<m;p++){if(e[d+a+p])throw"an impossible case has occurred";e[d+a+p]=n-1}a+=m-1}for(;d+a<e.length;a++)e[d+a]&&(e[d+a]-=1)}},makeGrid:function(b){var c=[];k.walkCells(b,function(e,g,k,a,d){g=b[e].cells[g];for(var n=0;n<d;n++){c[e+n]=c[e+n]||[];for(var l=0;l<a;l++)c[e+n][k+l]={cell:g,colspan:a,rowspan:d,spannedX:l,spannedY:n}}});return c},containsDomCell:function(b){return 0===b.spannedX&&0===b.spannedY},leftDomCell:function(b,c,e){do{var g=b[c][e];if(0===g.spannedY)return g.cell;e-=g.spannedX+
1}while(0<=e);return null},splitCell:function(b,c){var e=l(b),g=k.colspan(b),m=k.rowspan(b);if(1!==g||1!==m){for(var a=e.parent(),d=a.parent().children(),a=a.index(),n=e.index(),v=k.makeGrid(d),n=k.cellIndexToGridColumn(d,a,n),p=0;p<m;p++)for(var A=0===p?1:0;A<g;A++){var z=k.leftDomCell(v,a+p,n);null==z?d.eq(a+p).prepend(c()):l(z).after(c())}e.removeAttr("colSpan");e.removeAttr("rowSpan")}},rowspan:function(b){return parseInt(l(b).attr("rowspan"))||1},colspan:function(b){return parseInt(l(b).attr("colspan"))||
1},walkGrid:function(b,c){for(var e,g=0,k=b.length;g<k;g++){e=b[g];for(var a=0,d=e.length;a<d;a++)if(!1===c(e[a],a,g))return}},walkGridInsideRect:function(b,c,e){k.walkGrid(b,function(b,f,a){if(a>=c.top&&a<c.bottom&&f>=c.left&&f<c.right)return e(b,f,a)})},leftTrimArray:function(b){for(var c=0;c<b.length;c++)if(null!=b[c])return b.slice(c,b.length);return[]},makeContour:function(b,c){var e=[],g=[],l=[],a=[];k.walkGrid(b,function(d,b,f){if(c(d,b,f)){if(null==e[f]||b<e[f])e[f]=b;if(null==g[f]||b>g[f])g[f]=
b;if(null==l[b]||f<l[b])l[b]=f;if(null==a[b]||f>a[b])a[b]=f}});e=k.leftTrimArray(e);g=k.leftTrimArray(g);l=k.leftTrimArray(l);a=k.leftTrimArray(a);return{left:e,right:g,top:l,bottom:a}},indexOfAnyBut:function(b,c){for(var e=0;e<b.length;e++)if(c!==b[e])return e;return-1},isConsecutive:function(b){for(var c=1;c<b.length;c++)if(1!==Math.abs(b[c]-b[c-1]))return!1;return!0},resizeCellWidth:function(b,c){l(b).css("width",c);l(b).find(".aloha-table-cell-editable").eq(0).css({width:c,"word-wrap":"break-word"})},
getMinColWidth:function(b){var c=b.closest("tbody").children("tr"),e=b.closest("tr"),g=k.cellIndexToGridColumn(c,c.index(e),e.children().index(b)),m="";k.walkCells(c,function(a,d,b,e,f){if(b===g&&(a=l(l(c[a]).children()[d]),!(1<e)))for(e=a.text().split(" "),a=0;a<e.length;a++)e[a].length>m.length&&(m=e[a])});e=l("<span></span>");e.css("text-indent",-9999);e.css("display","inline");e.text(m);l(b).append(e);b=e.width();l(e).remove();return b},getCellResizeBoundaries:function(b,c,e){var g,m;k.walkCells(c,
function(a,d,n,v,p){a=l(l(c[a]).children()[d]);if(a.hasClass("aloha-table-selectrow")||a.closest("tr").hasClass("aloha-table-selectcolumn"))return!0;n===b&&1===v&&(g=a.offset().left+k.getCellBorder(a)+a.width()-k.getMinColWidth(a));n===b-1&&1===v&&(m=a.offset().left+k.getCellBorder(a)+k.getCellPadding(a)+k.getMinColWidth(a));if(g&&m)return e(g,m),!1})},getCellBorder:function(b){return(b.outerWidth()-b.innerWidth())/2},getCellPadding:function(b){return b.innerWidth()-b.width()},selectAnchorContents:function(f){a:if(0===
f.length)f=null;else{var c,e;(c=b.getRange())&&(e=l(c.commonAncestorContainer).closest(".aloha-table-cell-editable")[0]);if(e)for(c=0;c<f.length;c++)if(l(f[c]).find(e).length){f=f[c];break a}f=f[0]}if(f)if(f=l(">.aloha-table-cell-editable",f)[0],p.ie7||p.ie8)try{b.selectAllOf(f)}catch(g){m.warn("Table Plugin",g.message)}else b.selectAllOf(f)}};return k});define("table/table-cell",["aloha","aloha/jquery","aloha/ephemera","table/table-plugin-utils","util/browser"],function(l,b,p,m,k){var f=function(c,
e){null==c&&(c="<td>&nbsp;</td>");c=b(c).get(0);this.obj=b(c);this.tableObj=e;e.cells.push(this)};f.prototype.tableObj=void 0;f.prototype.obj=void 0;f.prototype.wrapper=void 0;f.prototype.hasFocus=!1;f.prototype.activate=function(){var c=this,e=c.obj;e.wrapInner("<div/>");var f=e.children("div").eq(0);f.contentEditable(!0);f.addClass("aloha-table-cell-editable");p.markWrapper(f);f.bind("focus",function(b){1<m.colspan(c.obj)||1<m.rowspan(c.obj)?c.tableObj.tablePlugin._splitcellsButton.enable(!0):c.tableObj.tablePlugin._splitcellsButton.enable(!1);
b.currentTarget&&(b.currentTarget.indexOf=function(){return-1});c._editableFocus(b)});f.bind("mousedown",function(e){e.currentTarget&&(e.currentTarget.indexOf=function(){return-1});c._editableMouseDown(e);c.tableObj.selection.baseCellPosition=[c._virtualY(),c._virtualX()];if(e.shiftKey){e=c.tableObj.selection.lastBaseCellPosition[1];var a=c.tableObj.selection.lastBaseCellPosition[0],d=c.tableObj.selection.baseCellPosition,f=d[1];f>e&&(f=e,e=d[1]);var g=d[0];g>a&&(g=a,a=d[0]);var k=g,l=e,p=a,B=f,r=
c.tableObj;e=r.obj.children().children("tr");e=m.makeGrid(e);r.selection.selectedCells=[];var E=r.get("classCellSelected");m.walkGrid(e,function(a,d,c){m.containsDomCell(a)&&(c>=k&&c<=p&&d>=B&&d<=l?(b(a.cell).addClass(E),r.selection.selectedCells.push(a.cell)):b(a.cell).removeClass(E))});r.selection.notifyCellsSelected()}else c.tableObj.selection.lastBaseCellPosition=c.tableObj.selection.baseCellPosition,c._editableMouseDown(e),c._startCellSelection()});f.bind("blur",function(b){c._editableBlur(b)});
f.bind("keyup",function(b){c._editableKeyUp(b)});f.bind("keydown",function(b){c._editableKeyDown(b)});f.bind("mouseover",function(b){c._selectCellRange()});f.contentEditableSelectionChange(function(b){l.Selection.onChange(f,b);return f});e.bind("mousedown",function(b){window.setTimeout(function(){c.wrapper.trigger("focus");c._selectAll(f)},1);b.shiftKey||(c.tableObj.selection.unselectCells(),c._startCellSelection());b.stopPropagation()});e.get(0)&&(e.get(0).onselectstart=function(){return!1});this.wrapper=
e.children();this.wrapper.get(0)&&(this.wrapper.get(0).onselectstart=function(){window.event.cancelBubble=!0},this.wrapper.get(0).ondragstart=function(){return!1});return this};f.prototype.deactivate=function(){var c=b(this.obj.children(".aloha-table-cell-editable"));c.length&&(c.parent().append(c.contents()),c.remove(),this.obj.unbind("click"),this.obj.unbind("mousedown"),""==b.trim(this.obj.attr("class"))&&this.obj.removeAttr("class"))};f.prototype.toString=function(){return"TableCell"};f.prototype._editableFocus=
function(b){this.hasFocus||(this.tableObj.focus(),this.obj.addClass("aloha-table-cell_active"),this.hasFocus=!0,this.tableObj.selection.selectionType="cell")};f.prototype._editableBlur=function(b){this.hasFocus=!1;this.obj.removeClass("aloha-table-cell_active")};f.prototype._virtualX=function(){var b=this.tableObj.obj.children().children("tr"),e=this.obj.parent().index(),f=this.obj.index();return m.cellIndexToGridColumn(b,e,f)};f.prototype._virtualY=function(){return this.obj.parent("tr").index()};
f.prototype._startCellSelection=function(){if(!this.tableObj.selection.cellSelectionMode){this.tableObj.selection.unselectCells();this.tableObj.selection.cellSelectionMode=!0;var c=this;b("body").bind("mouseup.cellselection",function(b){c._endCellSelection();b.stopPropagation()});this.tableObj.selection.baseCellPosition=[this._virtualY(),this._virtualX()]}};f.prototype._endCellSelection=function(){this.tableObj.selection.cellSelectionMode&&(m.selectAnchorContents(this.tableObj.selection.selectedCells),
this.tableObj.selection.cellSelectionMode=!1,this.tableObj.selection.baseCellPosition=null,this.tableObj.selection.lastSelectionRange=null,this.tableObj.selection.selectionType="cell",b("body").unbind("mouseup.cellselection"))};f.prototype._getSelectedRect=function(){var b=this._virtualX(),e=this._virtualY(),f=this.tableObj.selection.baseCellPosition,k=f[1];k>b&&(k=b,b=f[1]);var a=f[0];a>e&&(a=e,e=f[0]);return{top:a,right:b,bottom:e,left:k}};f.prototype._selectCellRange=function(){if(!this.tableObj.selection.resizeMode&&
this.tableObj.selection.cellSelectionMode){var c=this._getSelectedRect(),e=this.tableObj,f=e.obj.children().children("tr"),f=m.makeGrid(f);e.selection.selectedCells=[];var k=e.get("classCellSelected");m.walkGrid(f,function(a,d,f){m.containsDomCell(a)&&(f>=c.top&&f<=c.bottom&&d>=c.left&&d<=c.right?(b(a.cell).addClass(k),e.selection.selectedCells.push(a.cell)):b(a.cell).removeClass(k))});e.selection.notifyCellsSelected()}};f.prototype._selectAll=function(c){c=c.jquery?c.get(0):c;if(b.browser.msie)document.getSelection?
(e=document.getSelection(),f=document.createRange(),f.selectNodeContents(c),e.removeAllRanges(),e.addRange(f)):document.selection&&(f=document.body.createTextRange(),f.moveToElementText(c),f.select());else{var e=window.getSelection();if(e.setBaseAndExtent)e.setBaseAndExtent(c,0,c,Math.max(0,c.innerText.length-1));else{window.opera&&"<BR>"==c.innerHTML.substring(c.innerHTML.length-4)&&(c.innerHTML+="&#160;");var f=document.createRange();f.selectNodeContents(c);e.removeAllRanges();e.addRange(f)}}};
f.prototype._editableMouseDown=function(b){this.tableObj.selection.unselectCells();this.tableObj.hasFocus&&("function"===typeof b.stopPropagation?b.stopPropagation():"undefined"!==typeof b.cancelBubble&&(b.cancelBubble=!0))};f.prototype._editableKeyUp=function(b){};f.prototype._editableKeyDown=function(b){this._checkForEmptyEvent(b);if(this.obj[0]===this.tableObj.obj.find("tr:last td:last")[0]&&9==b.keyCode&&!b.altKey&&!b.shiftKey&&!b.ctrlKey){var e=this.tableObj.addRow(this.obj.parent().index()+
1);k.mozilla&&(b.preventDefault(),$(e).find("td:nth-child(2) .aloha-table-cell-editable").focus())}};f.prototype._checkForEmptyEvent=function(c){c=b(this.wrapper);var e=c.text();0<c.children().length||""!==e||(this.wrapper.text("\u00a0"),this.wrapper.get(0).blur(),this.wrapper.get(0).focus())};f.getContainer=function(c){return b(c.firstChild).hasClass("aloha-table-cell-editable")?c.firstChild:c};return f});define("table/table-selection","aloha aloha/jquery table/table-plugin-utils table/table-cell ui/dialog i18n!table/nls/i18n".split(" "),
function(l,b,p,m,k,f){function c(b){return{top:b.top[0],right:b.right[0]+1,bottom:b.bottom[0]+1,left:b.left[0]}}function e(b,a,d){var e=!0;-1!==p.indexOfAnyBut(a.top,a.top[0])||-1!==p.indexOfAnyBut(a.right,a.right[0])||-1!==p.indexOfAnyBut(a.bottom,a.bottom[0])||-1!==p.indexOfAnyBut(a.left,a.left[0])?e=!1:(a=c(a),p.walkGridInsideRect(b,a,function(a){if(!d(a))return e=!1}));return e}var g=function(b){this.table=b};g.prototype.selectionType=void 0;g.prototype.selectedCells=[];g.prototype.selectedColumnIdxs=
[];g.prototype.selectedRowIdxs=[];g.prototype.cellSelectionMode=!1;g.prototype.baseCellPosition=null;g.prototype.lastSelectionRange=null;g.prototype.selectColumns=function(c){this.unselectCells();var a=this.table.getRows();a.shift();for(var a=p.makeGrid(a),d=0;d<c.length;d++)if(-1===b.inArray(c[d],this.selectedColumnIdxs)){this.selectedColumnIdxs.push(c[d]);for(var e=0;e<a.length;e++){var f=a[e][c[d]];p.containsDomCell(f)&&(b(f.cell).addClass(this.table.get("classCellSelected")),this.selectedCells.push(f.cell))}}this.selectionType=
"column"};g.prototype.selectRows=function(c){this.unselectCells();var a=this.table.getRows();c.sort(function(a,d){return a-d});for(var d=0;d<c.length;d++)if(a[c[d]]){for(var e=0;e<this.selectedRowIdxs.length;e++)if(c[d]==this.selectedRowIdxs[e])return;this.selectedRowIdxs.push(c[d]);for(e=1;e<a[c[d]].cells.length;e++)this.selectedCells.push(a[c[d]].cells[e]),b(a[c[d]].cells[e]).addClass(this.table.get("classCellSelected"))}this.selectionType="row"};g.prototype.selectAll=function(){var c=b.map(this.table.getRows(),
function(a,d){return d});c.shift();this.selectRows(c);this.selectionType="all"};g.prototype.notifyCellsSelected=function(){l.trigger("aloha-table-selection-changed")};g.prototype._notifyCellsUnselected=function(){l.trigger("aloha-table-selection-changed")};g.prototype.isHeader=function(){if(0==this.selectedCells.length)return!1;for(var b=0;b<this.selectedCells.length;b++)if(!this.selectedCells[b]||"th"!=this.selectedCells[b].nodeName.toLowerCase())return!1;return!0};g.prototype.unselectCells=function(){if(!this.cellSelectionMode&&
0<this.selectedCells.length){for(var c=this.selectedCells,a=this.table.get("classCellSelected"),d=0,e=c.length;d<e;d++)b(c[d]).removeClass(a);this.selectedCells=[];this.selectedColumnIdxs=[];this.selectedRowIdxs=[];this.selectionType="cell";this._notifyCellsUnselected()}};g.prototype.selectionIndex=function(b){for(var a=0;a<this.selectedCells.length;a++)if(this.selectedCells[a]===b)return a;return-1};g.prototype.mergeCells=function(){var g=this.selectedCells;if(0!==g.length){var a=function(a){return-1!=
b.inArray(a.cell,g)},d=p.makeGrid(this.table.getRows()),n=p.makeContour(d,a);if(e(d,n,a)){var v=c(n),a=b(d[v.top][v.left].cell),y=b(m.getContainer(a.get(0)));p.walkGridInsideRect(d,v,function(a,d,c){if(d-a.spannedX!==v.left||c-a.spannedY!==v.top){a=a.cell;d=b(m.getContainer(a)).contents();for(c=0;c<d.length;c++){var e=d[c];if("string"===typeof e&&""!==b.trim(e)||e.nodeType&&3===e.nodeType&&""!==b.trim(e.data)||1===e.nodeType){y.append(" ");y.append(d);break}}b(a).remove()}});a.attr({rowspan:v.bottom-
v.top,colspan:v.right-v.left});this.selectedCells=[a.get(0)];this.cellSelectionMode=!1;this.lastSelectionRange=this.baseCellPosition=null;this.selectionType="cell";l.trigger("aloha-table-selection-changed")}else k.alert({title:f.t("Table"),text:f.t("table.mergeCells.notRectangular")})}};g.prototype.splitCells=function(){var c=this,a=this.selectedCells;0<a.length&&(b(a).each(function(){p.splitCell(this,function(){return c.table.newActiveCell().obj})}),this.cellSelectionMode=!1,this.lastSelectionRange=
this.baseCellPosition=null,this.selectionType="cell",l.trigger("aloha-table-selection-changed"))};g.prototype.cellsAreMergeable=function(){var c=this.selectedCells;if(2>c.length)return!1;var a=function(a){return-1!=b.inArray(a.cell,c)},d=p.makeGrid(this.table.getRows()),f=p.makeContour(d,a);return e(d,f,a)?!0:!1};g.prototype.cellsAreSplitable=function(){var c=0;return 0<this.selectedCells.length?(b(this.selectedCells).each(function(){var a=p.colspan(this),d=p.rowspan(this);(1<a||1<d)&&c++}),0<c?!0:
!1):!1};return g});define("table/table","aloha jquery ui/scopes ui/dialog i18n!table/nls/i18n table/table-cell table/table-selection table/table-plugin-utils aloha/ephemera util/html util/dom2 aloha/console".split(" "),function(l,b,p,m,k,f,c,e,g,q,a,d){function n(a){a.jquery&&(a=a[0]);var d,b=[],c;for(d=0;d<a.childNodes.length;d++)c=a.childNodes[d],b.push(c),1===c.nodeType&&(b=b.concat(n(c)));return b}function v(a,d){var c;"first"===a?(c=b("[contenteditable]",d).first()[0].firstChild,z===c&&(c=b("*",
d).first()[0].firstChild)):"last"===a&&(c=n(b("td:last",d)).reverse()[0]);return c}function y(a,d,c,e){for(var f,g=!1,k=0;k<c.length;k++)e.showItem(c[k].name);e.setActiveItem();for(k=0;k<d.length;k++)if(b(a[0]).hasClass(d[k].cssClass)){g=!0;f=d[k].name;break}b(a).each(function(a){b(this).hasClass(f)||(g=!1)});g&&e.setActiveItem(f)}function A(a,d){var b=-1,c=null;"before"===a?c=d.selectedCells[0]:"after"===a&&(c=d.selectedCells[d.selectedCells.length-1]);c&&1==c.nodeType&&(b=c.parentNode.rowIndex);
return b}var z=void 0,B=window.GENTICS,r=function(a,d){this.obj=b(a);var f,k,n=this.getRows(),l=n.length,m,q=0,v=[l],p;for(f=0;f<l;f++){k=b(n[f]);k=k.children("td, th");m=k.length;m=e.cellIndexToGridColumn(n,f,m-1)+1;p=parseInt(k.last().attr("colspan"),10);0==p||isNaN(p)||(1==p&&k.last().removeAttr("colspan"),m+=p-1);rowSpan=parseInt(k.last().attr("rowspan"),10);if(1<rowSpan)for(k=1;k<rowSpan-1;k++)v[f+k]=1<p?v[f+k]+p:v[f+k]+1;v[f]+=m;v[f]>q&&(q=v[f])}for(f=0;f<l;f++)k=q-v[f],0<k&&b(n[f]).append(Array(k+
1).join("<td></td>"));this.obj.attr("id")||this.obj.attr("id",B.Utils.guid());g.markAttr(this.obj,"id");this.tablePlugin=d;this.selection=new c(this);this.refresh()};b.extend(r.prototype,{obj:z,tableWrapper:z,cells:z,numRows:z,numCols:z,isActive:!1,hasFocus:!1,parentEditable:z,mousedown:!1,clickedColumnId:-1,clickedRowId:-1,columnsToSelect:[],rowsToSelect:[],fmPluginId:z});r.prototype.refresh=function(){this.numCols=this.countVirtualCols();var a=this.getRows();this.numRows=a.length;this.cells=[];
for(var d=0;d<a.length;d++)for(var c=b(a[d]).children(),e=0;e<c.length;e++)this.newCell(c[e])};r.prototype.countVirtualCols=function(){var a=this.obj.children().children("tr:first-child").children();return a.length-a.filter("."+this.get("classLeftUpperCorner")).length};r.prototype.get=function(a){return this.tablePlugin.get(a)};r.prototype.set=function(a,d){this.tablePlugin.set(a,d)};r.prototype.activate=function(){function d(a){return!q.isUnrenderedNode(a)}if(!this.isActive){var c=this,e;this.obj.addClass(this.get("className"));
this.obj.contentEditable(!1);""==this.obj.attr("id")&&this.obj.attr("id",B.Utils.guid());this.selection.selectionType=z;e=this.obj.children("tbody");0===e.length&&(e=this.obj);e.bind("keydown",function(a){a.ctrlKey||a.shiftKey||0<c.selection.selectedCells.length&&0<c.selection.selectedCells[0].length&&c.selection.selectedCells[0][0].firstChild.focus()});l.bind("aloha-command-will-execute",function(b,e){var f=l.getSelection().getRangeAt(0),g;if("forwarddelete"===e.commandId){var k;if(k=f.collapsed){k=
f.startOffset;var n=f.startContainer;k=a.nodeLength(n)===k?!0:1===n.nodeType?!q.findNodeLeft(n.childNodes[k-1],d):3===n.nodeType?q.isWSPorZWSPText(n.data.substr(k)):!1}k&&(f=f.commonAncestorContainer,3===f.nodeType?g=f.parentNode&&q.findNodeLeft(f.parentNode.nextSibling,d):1===f.nodeType&&(g=q.findNodeLeft(f.nextSibling,d)),g===c.tableWrapper&&(e.preventDefault=!0,l.getSelection().collapse(v("first",c.obj),0)))}else{if(k="delete"===e.commandId)if(k=f.collapsed)k=f.startOffset,n=f.startContainer,k=
0===k?!0:1===n.nodeType?!q.findNodeRight(n.childNodes[k-1],d):3===n.nodeType?q.isWSPorZWSPText(n.data.substr(0,k)):!1;k&&(f=f.commonAncestorContainer,3===f.nodeType?g=f.parentNode&&q.findNodeRight(f.parentNode.previousSibling,d):1===f.nodeType&&(g=q.findNodeRight(f.previousSibling,d)),g===c.tableWrapper&&(g=v("last",c.obj),e.preventDefault=!0,l.getSelection().collapse(g,a.nodeLength(g))))}});this.obj.on("keydown",function(a){46===a.keyCode&&("row"===c.selection.selectionType?c.deleteRows():"column"===
c.selection.selectionType&&c.deleteColumns(),"function"===typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)});e.delegate("th, td","mousemove",function(a){var d=b(this);if(!b(this).hasClass("aloha-table-selectrow")&&!b(this).closest("tr").hasClass("aloha-table-selectcolumn")){var e=c.tablePlugin.rowResize;if(c.tablePlugin.colResize&&3>a.pageX-d.offset().left)return d.css("cursor","col-resize"),c.attachColumnResize(d);if(e&&3>a.pageY-d.offset().top)return d.css("cursor","row-resize"),
c.attachRowResize(d);e&&(e=d.closest("tr"),0<e.next("tr").length?e=!1:(a=a.pageY-(e.offset().top+e.outerHeight()),e=-3<a&&3>a));if(e)return d.css("cursor","row-resize"),c.attachRowResize(d,!0);d.css("cursor","default");return c.detachRowColResize(d)}});e.bind("mousemove",function(a){var d=b(this).closest("table"),e;if(e=c.tablePlugin.tableResize)a=a.pageX-(d.offset().left+d.outerWidth()),e=-5<a&&5>a;if(e)return c.attachTableResizeWidth(d)});e.bind("mousedown",function(a){c.hasFocus||c.focus();a.stopPropagation();
a.preventDefault();return!1});e=b('<div class="'+this.get("classTableWrapper")+'" data-block-skip-scope="true"></div>');e.contentEditable(!1);g.markWrapper(e);this.obj.wrap(e);e=this.obj.parent();e.alohaBlock&&e.alohaBlock();e=this.obj.parents("."+this.get("classTableWrapper"));e.get(0).onresizestart=function(a){return!1};e.get(0).oncontrolselect=function(a){return!1};e.get(0).ondragstart=function(a){return!1};e.get(0).onmovestart=function(a){return!1};this.tableWrapper=this.obj.parents("."+this.get("classTableWrapper")).get(0);
b(this.cells).each(function(){this.activate()});this.attachSelectionColumn();this.attachSelectionRow();this.makeCaptionEditable();this.checkWai();this.isActive=!0;l.trigger("aloha-table-activated")}};r.prototype.makeCaptionEditable=function(){var a=this.obj.find("caption").eq(0);a&&this.tablePlugin.makeCaptionEditable(a)};r.prototype.checkWai=function(){var a=this.wai;if(!a)return!1;var d=this.get("waiGreen"),c=this.get("waiRed");a.removeClass(d+" "+c);if(""!==b.trim(this.obj[0].summary))return a.addClass(d),
!0;a.addClass(c);return!1};r.prototype.attachSelectionColumn=function(){var a=b("<td>"),d,c,e,f;a.html("\u00a0");e=this.obj.context.rows;for(f=0;f<e.length;f++)c=b(e[f]),d=a.clone(),d.addClass(this.get("classSelectionColumn")),d.css("width",this.get("selectionArea")+"px"),c.prepend(d),this.attachRowSelectionEventsToCell(d)};r.prototype.attachRowSelectionEventsToCell=function(a){var d=this;g.markElement(a);a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return!1};a.bind("mousedown",
function(a){return d.rowSelectionMouseDown(a)});a.bind("mouseover",function(a){if(d.mousedown)return d.rowSelectionMouseOver(a)})};r.prototype.rowSelectionMouseDown=function(a){this.focus();0==this.selection.selectedCells.length&&(this.rowsToSelect=[]);this.clickedRowId=a.currentTarget.parentNode.rowIndex;if(a.metaKey){var d=b.inArray(this.clickedRowId,this.rowsToSelect);0<=d?this.rowsToSelect.splice(d,1):this.rowsToSelect.push(this.clickedRowId)}else if(a.shiftKey){this.rowsToSelect.sort(function(a,
d){return a-d});var c=this.rowsToSelect[0],d=this.clickedRowId;c>d&&(c=d,d=this.rowsToSelect[0]);for(this.rowsToSelect=[];c<=d;c++)this.rowsToSelect.push(c)}else this.rowsToSelect=[this.clickedRowId];this.selectRows();a.preventDefault();a.stopPropagation();return!1};r.prototype.rowSelectionMouseOver=function(a){var d=a.currentTarget.parentNode.rowIndex,c;if(this.mousedown&&0<=this.clickedRowId){b.inArray(d,this.rowsToSelect);c=d<this.clickedRowId?d:this.clickedRowId;d=d<this.clickedRowId?this.clickedRowId:
d;for(this.rowsToSelect=[];c<=d;c++)this.rowsToSelect.push(c);this.selectRows();a.preventDefault();a.stopPropagation();return!1}};r.prototype.attachSelectionRow=function(){var a=this,c=b("<td>");c.html("\u00a0");for(var f=0,k=0;k<this.obj.context.rows.length;k++){for(var n=0,l=0;l<this.obj.context.rows[k].cells.length;l++)var m=e.colspan(this.obj.context.rows[k].cells[l]),n=n+m;f<n&&(f=n)}n=b("<tr>");n.addClass(this.get("classSelectionRow"));n.css("height",this.get("selectionArea")+"px");g.markElement(n);
for(k=0;k<f;k++)l=c.clone(),0<k?this.attachColumnSelectEventsToCell(l):(l=b("<td>").clone(),l.addClass(this.get("classLeftUpperCorner")),this.wai=b("<div/>").width(25).height(12).click(function(b){a.focus();a.selection.selectAll();a.tablePlugin.activeTable.selection.selectionType="cell";a.tablePlugin.updateFloatingMenuScope();a._removeCursorSelection();a.tablePlugin.settings.summaryinsidebar&&(a.tablePlugin.sidebar.open(),a.tablePlugin.sidebarPanel.activate(a.obj),a.tablePlugin.sidebar.correctHeight());
try{a.tablePlugin.summary.focus(),b.stopPropagation(),b.preventDefault()}catch(c){d.error("Table",c.message)}return!1}),l.append(this.wai)),n.append(l);b(document).bind("mouseup",function(d){a.columnSelectionMouseUp(d)});this.obj.find("tr:first").before(n)};r.prototype.attachColumnSelectEventsToCell=function(a){var d=this;a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return!1};a.bind("mousedown",function(a){d.columnSelectionMouseDown(a)});a.bind("mouseover",function(a){d.columnSelectionMouseOver(a)})};
r.prototype.columnSelectionMouseDown=function(a){this.focus();0==this.selection.selectedCells.length&&(this.columnsToSelect=[]);this.clickedColumnId=b(a.currentTarget.parentNode).children().index(a.currentTarget);if(a.metaKey){var d=b.inArray(this.clickedColumnId,this.columnsToSelect);0<=d?this.columnsToSelect.splice(d,1):this.columnsToSelect.push(this.clickedColumnId)}else if(a.shiftKey){this.columnsToSelect.sort(function(a,d){return a-d});var c=this.columnsToSelect[0],d=this.clickedColumnId;c>d&&
(c=d,d=this.columnsToSelect[0]);for(this.columnsToSelect=[];c<=d;c++)this.columnsToSelect.push(c)}else this.columnsToSelect=[this.clickedColumnId];this.selectColumns();a.preventDefault();a.stopPropagation();return!1};r.prototype.columnSelectionMouseOver=function(a){var d=a.currentTarget.cellIndex;a=[];var b;if(this.mouseDownColIdx){b=d<this.mouseDownColIdx?d:this.mouseDownColIdx;for(d=d<this.mouseDownColIdx?this.mouseDownColIdx:d;b<=d;b++)a.push(b);this.selectColumns(a)}};r.prototype.columnSelectionMouseUp=
function(a){this.mouseDownColIdx=!1};r.prototype.deleteRows=function(){var a=[],d={},c=this;if(0!==this.selection.selectedCells.length){for(var f=0;f<this.selection.selectedCells.length;f++)d[this.selection.selectedCells[f].parentNode.rowIndex]=!0;for(rowId in d)a.push(rowId);d=!1;a.length==this.numRows&&(d=!0);if(d){var g=this;m.confirm({title:k.t("Table"),text:k.t("deletetable.confirm"),yes:function(){g.deleteTable()}})}else{a.sort(function(a,d){return a-d});var n=a[0];n>this.numRows-a.length&&
n--;var l=this.getRows();b.each(a,function(a,d){for(var b=l[d],f=0;f<b.cells.length;f++)e.splitCell(b.cells[f],function(){return c.newActiveCell().obj})});var q=e.makeGrid(l);b.each(a,function(a,d){for(var c=q[d],f=0;f<c.length;){var g=c[f],k=e.rowspan(g.cell);1<k&&b(g.cell).attr("rowspan",k-1);f+=g.colspan}b(l[d]).remove()});this.numRows-=a.length;window.setTimeout(function(){b(l[1].cells[n+1]).focus()},5);this.selection.unselectCells()}}};r.prototype.deleteColumns=function(){var a=[],d=this.getRows(),
c=this,f,g=e.makeGrid(d);if(this.selection.selectedColumnIdxs.length==g[0].length-1)m.confirm({title:k.t("Table"),text:k.t("deletetable.confirm"),yes:function(){c.deleteTable()}});else{a.sort(function(a,d){return a-d});for(var n=this.selection.selectedColumnIdxs.sort(function(a,d){return d-a}),l=0;l<n.length;l++){for(var q=n[l],v=0;v<d.length;v++)if(f=g[v][q]){if(0===f.spannedX){if(1<f.colspan){var p=this.newActiveCell().obj;b(f.cell).after(p);p.attr("rowspan",f.rowspan);p.attr("colspan",f.colspan-
1)}b(f.cell).remove()}else b(f.cell).attr("colspan",f.colspan-1);v+=f.rowspan-1}g=e.makeGrid(d)}this.numCols-=a.length;window.setTimeout(function(){b(d[1].cells[1]).focus()},5);this.selection.unselectCells()}};r.prototype.deleteTable=function(){for(var a=-1,d=0;d<this.tablePlugin.TableRegistry.length;d++)if(this.tablePlugin.TableRegistry[d].obj.attr("id")==this.obj.attr("id")){a=d;break}0<=a&&(this.deactivate(),this.selection.selectionType=z,this.tablePlugin.TableRegistry.splice(d,1),a=l.Selection.rangeObject,
a.endContainer=this.obj.get(0).parentNode,a.startContainer=a.endContainer,a.endOffset=B.Utils.Dom.getIndexInParent(this.obj.get(0)),a.startOffset=a.endOffset,a.clearCaches(),this.obj.remove(),this.parentEditable.obj.focus(),a.correctRange(),a.select())};r.prototype.addRowBeforeSelection=function(a){a=A("before",this.selection);-1!==a&&this.addRow(a)};r.prototype.addRowAfterSelection=function(){var a=A("after",this.selection);-1!==a&&this.addRow(a+1)};r.prototype.addRow=function(a){for(var d,c=this.get("classSelectionColumn"),
f=this.obj.children().children("tr"),g=0;1>g;g++){d=b("<tr>");var k=b("<td>");k.addClass(c);this.attachRowSelectionEventsToCell(k);d.append(k);var n=e.makeGrid(f);if(a>=n.length)for(k=1;k<n[0].length;k++)d.append(this.newActiveCell().obj);else for(var n=n[a],k=1,l=n.length;k<l;){var m=n[k];if(e.containsDomCell(m))for(var q=m.colspan;q--;)d.append(this.newActiveCell().obj);else b(m.cell).attr("rowspan",m.rowspan+1);k+=m.colspan}a>=f.length?f.eq(f.length-1).after(d):f.eq(a).before(d)}this.numRows+=
1;return d[0]};r.prototype.addColumnsRight=function(){this.addColumns("right")};r.prototype.addColumnsLeft=function(){this.addColumns("left")};r.prototype.addColumns=function(a){var d=b("<td>"),c=this.getRows(),f,g;f=this.selection.selectedColumnIdxs;if(0!==f.length)if(f.sort(function(a,d){return a-d}),e.isConsecutive(f)){if("left"===a){g=f[0];for(var n=0;n<this.selection.selectedColumnIdxs.length;n++)this.selection.selectedColumnIdxs[n]+=1}else g=f[f.length-1];for(var l=e.makeGrid(c),n=0;n<c.length;n++){f=
d.clone();f.html("\u00a0");0==n?this.attachColumnSelectEventsToCell(f):(cellObj=this.newActiveCell(f.get(0)),f=cellObj.obj);var q=e.leftDomCell(l,n,g);null==q?b(c[n]).prepend(f):"left"===a&&e.containsDomCell(l[n][g])?b(q).before(f):b(q).after(f);this.numCols++}}else m.alert({title:k.t("Table"),text:k.t("table.addColumns.nonConsecutive")})};r.prototype.focus=function(){this.hasFocus||(this.parentEditable.isActive||this.parentEditable.obj.focus(),this.tablePlugin.setFocusedTable(this))};r.prototype.focusOut=
function(){this.hasFocus&&(this.tablePlugin.setFocusedTable(z),this.selection.selectionType=z)};r.prototype._removeCursorSelection=function(){var a=l.getSelection();a&&a._nativeSelection&&0!=a._nativeSelection._ranges.length&&(a=a.getRangeAt(0),null!=a.startContainer&&0===b(a.startContainer).closest("table").length&&0!==this.selection.selectedCells.length&&(a=f.getContainer(this.selection.selectedCells[0]),b(a).focus()))};r.prototype.selectColumns=function(a){this.selection.selectColumns(a?a:this.columnsToSelect);
this.tablePlugin._columnheaderButton.setState(this.selection.isHeader());y(this.selection.selectedCells,this.tablePlugin.columnConfig,this.tablePlugin.columnMSItems,this.tablePlugin.columnMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();e.selectAnchorContents(this.selection.selectedCells);this.selection.notifyCellsSelected();this._removeCursorSelection();p.setScope(this.tablePlugin.name+".column")};r.prototype.selectRows=function(){this.selection.selectRows(this.rowsToSelect);this.tablePlugin._rowheaderButton.setState(this.selection.isHeader());
y(this.selection.selectedCells,this.tablePlugin.rowConfig,this.tablePlugin.rowMSItems,this.tablePlugin.rowMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();e.selectAnchorContents(this.selection.selectedCells);this.selection.notifyCellsSelected();this._removeCursorSelection();p.setScope(this.tablePlugin.name+".row")};r.prototype.deactivate=function(){var a=this.obj.parent();a.mahaloBlock&&a.mahaloBlock();this.obj.removeClass(this.get("className"));""==b.trim(this.obj.attr("class"))&&
this.obj.removeAttr("class");this.obj.removeAttr("contenteditable");this.obj.parents("."+this.get("classTableWrapper")).length&&this.obj.unwrap();this.obj.find("tr."+this.get("classSelectionRow")+":first").remove();var d=this;b.each(this.obj.context.rows,function(){b(this).children("td."+d.get("classSelectionColumn")).remove()});this.obj.find("td, th").removeClass(this.get("classCellSelected"));this.obj.find("td, th").removeClass("aloha-table-cell_active");this.obj.find("td, th").css("cursor","");
this.obj.unbind();this.obj.children("tbody").unbind();for(a=0;a<this.cells.length;a++)this.cells[a].deactivate();this.obj.find("caption div").each(function(){b(this).contents().unwrap()});this.isActive=!1};r.prototype.attachColumnResize=function(a){var d=this;d.detachRowColResize(a);var c=a.closest("tbody").children("tr"),f=a.closest("tr"),g=e.cellIndexToGridColumn(c,c.index(f),f.children().index(a)),k=function(a){var d,f;e.walkCells(c,function(k,n,l,m,q){k=b(b(c[k]).children()[n]);if(k.hasClass("aloha-table-selectrow")||
k.closest("tr").hasClass("aloha-table-selectcolumn")||1<m)return!0;l===g?(f||(f=k.width()-a),e.resizeCellWidth(k,f)):l===g-1&&(d||(d=k.width()+a),e.resizeCellWidth(k,d));return!0})};a.bind("mousedown.resize",function(){var f=b("<div></div>"),n=b(a),l=n.outerWidth()-n.innerWidth(),m=n.closest("tbody").innerHeight();f.css({height:1>m?1:m,width:1>l?1:l,top:n.closest("tbody").offset().top,left:n.offset().left,position:"absolute","background-color":"#80B5F2"});b("body").append(f);e.getCellResizeBoundaries(g,
c,function(c,e){d.selection.resizeMode=!0;b("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>e&&a.pageX<c&&f.css("left",a.pageX)});b("body").bind("mouseup.dnd_col_resize",function(g){var n=0;g.pageX<e?n=e-a.offset().left:g.pageX>e&&g.pageX<c?n=g.pageX-a.offset().left:g.pageX>c&&(n=c-a.offset().left);0!==n&&k(n);b("body").unbind("mousemove.dnd_col_resize");b("body").unbind("mouseup.dnd_col_resize");d.selection.resizeMode=!1;f.remove()})})})};r.prototype.attachRowResize=function(a,d){var c=
this;c.detachRowColResize(a);a.bind("mousedown.resize",function(){var e=b("<div></div>"),f=a.closest("tbody").innerWidth(),g=a.outerHeight()-a.innerHeight();e.css({width:1>f?1:f,height:1>g?1:g,top:d?a.offset().top+a.outerHeight():a.offset().top,left:a.closest("tbody").offset().left,position:"absolute","background-color":"#80B5F2"});b("body").append(e);c.selection.resizeMode=!0;b("body").bind("mousemove.dnd_row_resize",function(b){var c=b.pageY,f;f=d?a.closest("tr").offset().top:a.closest("tr").prev("tr").offset().top;
c>f&&e.css("top",b.pageY)});b("body").bind("mouseup.dnd_row_resize",function(f){var g=0,g=d?f.pageY-(a.offset().top+a.outerHeight()):f.pageY-a.offset().top;f=d?a.closest("tr"):a.closest("tr").prev("tr");g=f.height()+g;0>g&&(g=1);f.css("height",g);b("body").unbind("mousemove.dnd_row_resize");b("body").unbind("mouseup.dnd_row_resize");c.selection.resizeMode=!1;e.remove()})})};r.prototype.attachTableResizeWidth=function(a){var d=this,c=a.closest(".aloha-table-wrapper"),f=a.find("tr:not(.aloha-table-selectcolumn) th:last-child, tr:not(.aloha-table-selectcolumn) td:last-child"),
g;b.each(f,function(){if(!b(this).attr("colspan")||2>b(this).attr("colspan"))return g=b(this),!1});f.css("cursor","col-resize");var k=function(d){var c=a.find("tr"),f=g.closest("tr"),k=e.cellIndexToGridColumn(c,c.index(f),f.children().index(g)),n=d-e.getCellBorder(g)-e.getCellPadding(g);e.walkCells(c,function(a,d,f,g,l){a=b(b(c[a]).children()[d]);if(a.hasClass("aloha-table-selectrow")||a.closest("tr").hasClass("aloha-table-selectcolumn")||1<g)return!0;f===k?e.resizeCellWidth(a,n):e.resizeCellWidth(a,
a.width());return!0})};f.bind("mousedown.resize",function(){var n=b("<div></div>"),l=a.children("tbody").innerHeight(),m=g.outerWidth()-g.innerWidth();n.css({height:1>l?1:l,width:1>m?1:m,top:a.find("tbody").offset().top,left:a.offset().left+a.outerWidth(),position:"absolute","background-color":"#80B5F2"});b("body").append(n);var q=c.offset().left+c.width(),v=g.offset().left+(g.innerWidth()-g.width())+e.getMinColWidth(g);d.selection.resizeMode=!0;b("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>
v&&a.pageX<q&&n.css("left",a.pageX)});b("body").bind("mouseup.dnd_col_resize",function(a){var c=0;a.pageX<=v?c=v-g.offset().left:a.pageX>v&&a.pageX<q?c=a.pageX-g.offset().left:a.pageX>q&&(c=q-g.offset().left);k(c);b("body").unbind("mousemove.dnd_col_resize");b("body").unbind("mouseup.dnd_col_resize");f.unbind("mousedown.resize");f.css("cursor","default");d.selection.resizeMode=!1;n.remove()})})};r.prototype.detachRowColResize=function(a){return a.unbind("mousedown.resize")};r.prototype.toString=function(){return"Table"};
r.prototype.newCell=function(a){return new f(a,this)};r.prototype.newActiveCell=function(a){a=new f(a,this);a.activate();return a};r.prototype.getRows=function(){var a=this.obj.get(0).rows;return b.makeArray(a)};return r});define("table/table-plugin","aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/scopes ui/button ui/toggleButton ui/dialog ui/port-helper-attribute-field ui/port-helper-multi-split i18n!table/nls/i18n i18n!aloha/nls/i18n table/table-create-layer table/table table/table-plugin-utils util/dom aloha/ephemera aloha/console".split(" "),
function(l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A,z,B,r){function E(a){var d=x(a.summary.getInputElem()),b=a.activeTable.get("waiRed"),c=a.activeTable.get("waiGreen");d.removeClass(b+" "+c);a.activeTable.checkWai()?d.addClass(c):d.addClass(b)}function t(a){var d=x(a),b;if(b=K.Utils.Dom.isEditable(a))if(b=!(0<d.parents(".aloha-editable table").length)){a:{var c,e=d.parents();for(b=0;b<e.length;b++){c=e.eq(b);if(c.is(".aloha-editable")){b=!1;break a}if(c.is(".aloha-block")){b=!0;break a}}b=!1}b=!b}return b?
(b=new y(a,G),a=x(z.getEditingHostOf(a)),b.parentEditable=l.getEditableById(a.attr("id")),G.TableRegistry.push(b),a=d.is("table")?"table":"table table",d.find(a).length&&r.warn("Table Plugin","Nested tables found. They will not be initialized."),l.activeEditable===b.parentEditable&&b.activate(),b):null}function s(a,d){var c,e,f=a.selection.isHeader(),g;for(c=0;c<a.selection.selectedCells.length;c++){g=a.selection.selectedCells[c];for(e=0;e<a.cells.length;e++)if(g===a.cells[e].obj[0]){cell=a.cells[e];
break}e=f?l.Markup.transformDomObject(g,"td").removeAttr("scope").get(0):l.Markup.transformDomObject(g,"th").attr("scope",d).get(0);null!=cell&&(cell.obj[0]=e,cell.deactivate(),cell.activate());b(a.selection.selectedCells[c]).bind("mousedown",function(a){var d=b(this).children("div").eq(0);window.setTimeout(function(){d.trigger("focus")},1)})}}function u(a,d,c){for(var e=!0,f=0;f<c.length;f++)if(0>b(c[f]).attr("class").indexOf(d)){e=!1;break}if(e)for(f=0;f<c.length;f++)b(c[f]).removeClass(d);else for(f=
0;f<c.length;f++)for(b(c[f]).addClass(d),e=0;e<a.length;e++)a[e].cssClass!=d&&b(c[f]).removeClass(a[e].cssClass)}function T(){var a=[],d=Q;b.each(arguments,function(){a.push("."+(""==this?d:d+"-"+this))});return b.trim(a.join(" "))}function I(){var a=[],d=Q;b.each(arguments,function(){a.push(""==this?d:d+"-"+this)});return b.trim(a.join(" "))}function Z(a,d){var c=a.endContainer,e=a.startContainer,f=3==c.nodeType?c.length:c.childNodes.length;3==e.nodeType&&"P"==e.parentNode.tagName&&1==e.parentNode.childNodes.length&&
/^(\s|%A0)$/.test(escape(e.data))&&(e.data="",a.startOffset=0,c==e&&(a.endOffset=0));K.Utils.Dom.allowsNesting(3==e.nodeType?e.parentNode:e,d)||(0==a.startOffset&&b(3==e.nodeType?e.parentNode:e).addClass("aloha-table-cleanme"),a.endOffset==f&&b(3==c.nodeType?c.parentNode:c).addClass("aloha-table-cleanme"))}function N(){for(var a=b(".aloha-table-cleanme").removeClass("aloha-table-cleanme"),d=0;d<a.length;d++)""!=b.trim(b(a[d]).html())||K.Utils.Dom.isEditingHost(a[d])||b(a[d]).remove()}var x=b,K=window.GENTICS,
G=new p("table");G.createLayer=void 0;G.config=["table"];G.TableRegistry=[];G.activeTable=void 0;G.parameters={className:"aloha-table",classSelectionRow:"aloha-table-selectcolumn",classSelectionColumn:"aloha-table-selectrow",classLeftUpperCorner:"aloha-table-leftuppercorner",classTableWrapper:"aloha-table-wrapper",classCellSelected:"aloha-cell-selected",waiRed:"aloha-wai-red",waiGreen:"aloha-wai-green",selectionArea:10};G.checkConfig=function(a){if("object"==typeof a&&a.length){for(var d=[],b=0;b<
a.length;b++)a[b]&&d.push({name:a[b].name,text:a[b].text?a[b].text:a[b].name,tooltip:a[b].tooltip?a[b].tooltip:a[b].text,iconClass:a[b].iconClass?a[b].iconClass:"aloha-icon-"+a[b].name,cssClass:a[b].cssClass?a[b].cssClass:a[b].name});a=d}else a=[];return a};G.init=function(){var a=this,d={};B.classes(this.get("className"),this.get("classCellSelected"));this.tableConfig=this.checkConfig(this.tableConfig||this.settings.tableConfig);this.columnConfig=this.checkConfig(this.columnConfig||this.settings.columnConfig);
this.rowConfig=this.checkConfig(this.rowConfig||this.settings.rowConfig);this.cellConfig=this.checkConfig(this.cellConfig||this.settings.cellConfig);this.tableResize=void 0===this.settings.tableResize?!1:this.settings.tableResize;this.colResize=void 0===this.settings.colResize?!1:this.settings.colResize;this.rowResize=void 0===this.settings.rowResize?!1:this.settings.rowResize;b.browser.msie&&8>parseInt(b.browser.version,10)&&(this.rowResize=this.colResize=this.tableResize=!1);this.createLayer=new v(this);
l.bind("aloha-editable-created",function(c,e){var f=a.getEditableConfig(e.obj);d[e.getId()]=-1!==b.inArray("table",f);e.obj.bind("mousedown",function(a){G.setFocusedTable(void 0)});e.obj.find("table").each(function(a,d){t(d)})});this.initTableButtons();l.bind("aloha-table-selection-changed",function(){"undefined"!==typeof G.activeTable&&G.activeTable.selection&&(G.updateFloatingMenuScope(),G.activeTable.selection.cellsAreSplitable()?(a._splitcellsButton.enable(!0),a._splitcellsRowButton.enable(!0),
a._splitcellsColumnButton.enable(!0)):(a._splitcellsButton.enable(!1),a._splitcellsRowButton.enable(!1),a._splitcellsColumnButton.enable(!1)),G.activeTable.selection.cellsAreMergeable()?(a._mergecellsButton.enable(!0),a._mergecellsRowButton.enable(!0),a._mergecellsColumnButton.enable(!0)):(a._mergecellsButton.enable(!1),a._mergecellsRowButton.enable(!1),a._mergecellsColumnButton.enable(!1)))});l.bind("aloha-selection-changed",function(b,c){c.startContainer&&l.activeEditable&&(d[l.activeEditable.getId()]&&
l.Selection.mayInsertTag("table")?a._createTableButton.show():a._createTableButton.hide(),a.activeTable&&(c.findMarkup(function(){return"TABLE"===this.nodeName},l.activeEditable.obj)?(G.updateFloatingMenuScope(),G.setActiveCellStyle()):(a.activeTable.selection.cellSelectionMode=!1,a.activeTable.selection.baseCellPosition=null,a.activeTable.selection.lastSelectionRange=null,a.activeTable.focusOut())))});l.bind("aloha-editable-activated",function(d,c){a._splitcellsButton.enable(!1);a._mergecellsButton.enable(!1);
a._splitcellsRowButton.enable(!1);a._mergecellsRowButton.enable(!1);a._splitcellsColumnButton.enable(!1);a._mergecellsColumnButton.enable(!1);c.editable.obj.find("table").each(function(){for(var a=G.TableRegistry,d=0;d<a.length;d++)if(a[d].obj.attr("id")===b(this).attr("id"))return a[d].activate(),!0;t(this)})});l.bind("aloha-editable-deactivated",function(){G.activeTable&&G.activeTable.selection.unselectCells();G.setFocusedTable(void 0);for(var a=G.TableRegistry,d=0;d<a.length;d++)a[d].deactivate()});
l.bind("aloha-smart-content-changed",function(){l.activeEditable&&l.activeEditable.obj.find("table").each(function(){-1==G.indexOfTableInRegistry(this)&&t(this)&&(this.id=K.Utils.guid())})});this.settings.summaryinsidebar&&l.bind("aloha-plugins-loaded",function(){a.initSidebar(l.Sidebar.right.show())})};var Q="aloha-table";G.initSidebar=function(a){var c=this;c.sidebar=a;c.sidebarPanel=a.addPanel({id:I("sidebar-panel"),title:d.t("table.sidebar.title"),content:"",expanded:!0,activeOn:"table",onInit:function(){var a=
this;this.setContent('<label class="'+I("label")+'" for="'+I("textarea")+'" >'+d.t("table.label.target")+'</label><textarea id="'+I("textarea")+'" class="'+I("textarea")+'" />');b(T("textarea")).live("keyup",function(){b(a.effective).attr("summary",b(T("textarea")).val());var d=b('div[class*="wai"]',"table#"+b(a.effective).attr("id"));d.removeClass(c.get("waiGreen"));d.removeClass(c.get("waiRed"));""!=b(T("textarea")).val().trim()?d.addClass(c.get("waiGreen")):d.addClass(c.get("waiRed"))})},onActivate:function(a){this.effective=
a;b(T("textarea")).val(b(this.effective).attr("summary"))}});a.show()};G.isEditableTable=function(a){return K.Utils.Dom.isEditable(a)};G.indexOfTableInRegistry=function(a){for(var d=this.TableRegistry,b=0;b<d.length;b++)if(d[b].obj[0].id==a.id)return b;return-1};G.getTableFromRegistry=function(a){a=this.indexOfTableInRegistry(a);return-1<a?this.TableRegistry[a]:null};G.isSelectionInTable=function(){var a=l.Selection.getRangeObject(),a=b(a.commonAncestorContainer);return 0==a.length?!1:a.parents(".aloha-editable table").length?
!0:!1};G.preventNestedTables=function(){return this.isSelectionInTable()?(g.alert({title:d.t("Table"),text:d.t("table.createTable.nestedTablesNoSupported")}),!0):!1};G.initMergeSplitCellsBtns=function(){this._mergecellsButton=k.adopt("mergecells",c,{tooltip:d.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".cell",click:function(){G.activeTable&&G.activeTable.selection.mergeCells()}});this._splitcellsButton=k.adopt("splitcells",c,{tooltip:d.t("button.splitcells.tooltip"),
icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".cell",click:function(){var a;G.activeTable&&(0<G.activeTable.selection.selectedCells.length?G.activeTable.selection.splitCells():(a=G.selectedOrActiveCells(),0<a.length&&(A.splitCell(a,function(){return G.activeTable.newActiveCell().obj}),l.trigger("aloha-table-selection-changed"))))}});this._mergecellsRowButton=k.adopt("mergecellsRow",c,{tooltip:d.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".row",
click:function(){G.activeTable&&G.activeTable.selection.mergeCells()}});this._splitcellsRowButton=k.adopt("splitcellsRow",c,{tooltip:d.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".row",click:function(){G.activeTable&&G.activeTable.selection.splitCells()}});this._mergecellsColumnButton=k.adopt("mergecellsColumn",c,{tooltip:d.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".column",click:function(){G.activeTable&&G.activeTable.selection.mergeCells()}});
this._splitcellsColumnButton=k.adopt("splitcellsColumn",c,{tooltip:d.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".column",click:function(){G.activeTable&&G.activeTable.selection.splitCells()}})};G.initNaturalFitBtn=function(){var a=this;if(this.colResize||this.rowResize)this._tableNaturalFitButton=k.adopt("naturalFit",c,{tooltip:d.t("button.naturalfit.tooltip"),icon:"aloha-icon aloha-icon-table-naturalfit",scope:this.name+".cell",click:function(){if(a.activeTable){var d=
a.activeTable.obj;d.find("td, th").each(function(){b(this).find("div").css("width","");b(this).css("width","")});d.find("tr").each(function(){b(this).css("height","")})}}})};G.initRowsBtns=function(){var f=this;this._addrowbeforeButton=k.adopt("addrowbefore",c,{tooltip:d.t("button.addrowbefore.tooltip"),icon:"aloha-icon aloha-icon-addrowbefore",scope:this.name+".row",click:function(){f.activeTable&&f.activeTable.addRowBeforeSelection()}});this._addrowafterButton=k.adopt("addrowafter",c,{tooltip:d.t("button.addrowafter.tooltip"),
icon:"aloha-icon aloha-icon-addrowafter",scope:this.name+".row",click:function(){f.activeTable&&f.activeTable.addRowAfterSelection()}});this._deleterowsButton=k.adopt("deleterows",c,{tooltip:d.t("button.delrows.tooltip"),icon:"aloha-icon aloha-icon-deleterows",scope:this.name+".row",click:function(){if(f.activeTable){var a=f.activeTable;g.confirm({title:d.t("Table"),text:d.t("deleterows.confirm"),yes:function(){a.deleteRows()}})}}});this._rowheaderButton=k.adopt("rowheader",e,{tooltip:d.t("button.rowheader.tooltip"),
icon:"aloha-icon aloha-icon-rowheader",scope:this.name+".row",click:function(){f.activeTable&&(f.activeTable.refresh(),s(f.activeTable,"col"),f.activeTable.selection.unselectCells(),f.activeTable.selection.selectRows(f.activeTable.selection.selectedRowIdxs))}});this.rowMSItems=[];b.each(this.rowConfig,function(a,b){f.rowMSItems.push({name:b.name,text:d.t(b.text),tooltip:d.t(b.tooltip),iconClass:"aloha-icon aloha-row-layout "+b.iconClass,click:function(){f.activeTable&&(u(f.rowConfig,b.cssClass,f.activeTable.selection.selectedCells),
f.activeTable.selectRows())}})});0<this.rowMSItems.length&&this.rowMSItems.push({name:"removeFormat",text:d.t("button.removeFormat.text"),tooltip:d.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(f.activeTable){for(var a=f.activeTable.selection.selectedCells,d=0;d<a.length;d++)for(var c=0;c<f.rowConfig.length;c++)b(a[d]).removeClass(f.rowConfig[c].cssClass);f.activeTable.selectRows()}}});this.rowMSButton=a({items:this.rowMSItems,name:"formatRow",hideIfEmpty:!0,
scope:this.name+".row"})};G.initColumnBtns=function(){var f=this;this._addcolumnleftButton=k.adopt("addcolumnleft",c,{tooltip:d.t("button.addcolleft.tooltip"),icon:"aloha-icon aloha-icon-addcolumnleft",scope:this.name+".column",click:function(){f.activeTable&&f.activeTable.addColumnsLeft()}});this._addcolumnrightButton=k.adopt("addcolumnright",c,{tooltip:d.t("button.addcolright.tooltip"),icon:"aloha-icon aloha-icon-addcolumnright",scope:this.name+".column",click:function(){f.activeTable&&f.activeTable.addColumnsRight()}});
this._deletecolumnsButton=k.adopt("deletecolumns",c,{tooltip:d.t("button.delcols.tooltip"),icon:"aloha-icon aloha-icon-deletecolumns",scope:this.name+".column",click:function(){if(f.activeTable){var a=f.activeTable;g.confirm({title:d.t("Table"),text:d.t("deletecolumns.confirm"),yes:function(){a.deleteColumns()}})}}});this._columnheaderButton=k.adopt("columnheader",e,{tooltip:d.t("button.columnheader.tooltip"),icon:"aloha-icon aloha-icon-columnheader",scope:this.name+".column",click:function(){f.activeTable&&
(f.activeTable.refresh(),s(f.activeTable,"row"),f.activeTable.selection.unselectCells(),f.activeTable.selection.selectColumns(f.activeTable.selection.selectedColumnIdxs))}});this.columnMSItems=[];b.each(this.columnConfig,function(a,b){var c={name:b.name,text:d.t(b.text),tooltip:d.t(b.tooltip),iconClass:"aloha-icon aloha-column-layout "+b.iconClass,click:function(a,d,c){f.activeTable&&(u(f.columnConfig,b.cssClass,f.activeTable.selection.selectedCells),f.activeTable.selectColumns())}};f.columnMSItems.push(c)});
0<this.columnMSItems.length&&this.columnMSItems.push({name:"removeFormat",text:d.t("button.removeFormat.text"),tooltip:d.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(f.activeTable){for(var a=f.activeTable.selection.selectedCells,d=0;d<a.length;d++)for(var c=0;c<f.columnConfig.length;c++)b(a[d]).removeClass(f.columnConfig[c].cssClass);f.activeTable.selectColumns()}}});this.columnMSButton=a({items:this.columnMSItems,name:"formatColumn",hideIfEmpty:!0,
scope:this.name+".column"})};G.initCellBtns=function(){var c=this;this.cellMSItems=[];b.each(this.cellConfig,function(a,b){var e={name:b.name,text:d.t(b.text),tooltip:d.t(b.tooltip),iconClass:"aloha-icon aloha-column-layout "+b.iconClass,click:function(a,d,e){c.activeTable&&(u(c.cellConfig,b.cssClass,c.selectedOrActiveCells()),c.setActiveCellStyle())}};c.cellMSItems.push(e)});0<this.cellMSItems.length&&this.cellMSItems.push({name:"removeFormat",text:d.t("button.removeFormat.text"),tooltip:d.t("button.removeFormat.tooltip"),
cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(c.activeTable){for(var a=c.selectedOrActiveCells(),d=0;d<a.length;d++)for(var e=0;e<c.cellConfig.length;e++)b(a[d]).removeClass(c.cellConfig[e].cssClass);c.setActiveCellStyle()}}});this.cellMSButton=a({items:this.cellMSItems,name:"formatCell",hideIfEmpty:!0,scope:this.name+".cell"})};G.initTableButtons=function(){var g=this;f.createScope(this.name+".row","Aloha.continuoustext");f.createScope(this.name+".column","Aloha.continuoustext");
f.createScope(this.name+".cell","Aloha.continuoustext");this._createTableButton=k.adopt("createTable",c,{tooltip:d.t("button.createtable.tooltip"),icon:"aloha-icon aloha-icon-createTable",scope:"Aloha.continuoustext",click:function(){G.createDialog(this.element)}});this.initColumnBtns();this.initRowsBtns();this.initCellBtns();this.initMergeSplitCellsBtns();this.initNaturalFitBtn();this.tableMSItems=[];var n=this.tableConfig;b.each(n,function(a,b){g.tableMSItems.push({name:b.name,text:d.t(b.text),
tooltip:d.t(b.tooltip),iconClass:"aloha-icon aloha-table-layout "+b.iconClass,click:function(){if(g.activeTable)if(g.activeTable.obj.hasClass(b.cssClass)){for(a=0;a<n.length;a++)g.activeTable.obj.removeClass(n[a].cssClass);g.tableMSButton.setActiveItem()}else{for(var a=0;a<n.length;a++)g.activeTable.obj.removeClass(n[a].cssClass);g.activeTable.obj.addClass(b.cssClass);g.tableMSButton.setActiveItem(b.cssClass)}}})});0<this.tableMSItems.length&&this.tableMSItems.push({name:"removeFormat",text:d.t("button.removeFormat.text"),
tooltip:d.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(g.activeTable){for(var a=0;a<n.length;a++)g.activeTable.obj.removeClass(g.tableConfig[a].cssClass);g.tableMSButton.setActiveItem()}}});this.tableMSButton=a({items:this.tableMSItems,name:"formatTable",hideIfEmpty:!0,scope:this.name+".cell"});this._tableCaptionButton=k.adopt("tableCaption",e,{tooltip:d.t("button.caption.tooltip"),icon:"aloha-icon aloha-icon-table-caption",scope:this.name+".cell",
click:function(){if(g.activeTable){var a=g.activeTable.obj.children("caption");if(a.is("caption")&&a.is(":visible"))a.hide();else{a.is("caption")||(a=b("<caption></caption>"),g.activeTable.obj.prepend(a));a.show();0===b.trim(a.text()).length&&a.text(d.t("empty.caption"));g.makeCaptionEditable(a,a.text());var a=a.find("div").eq(0),c=a.contents().eq(0);if(0<c.length){var e=new K.Utils.RangeObject;e.startContainer=e.endContainer=c.get(0);e.startOffset=0;e.endOffset=c.text().length;g.activeTable.obj.find("div.aloha-table-cell-editable").blur();
a.focus();e.select();l.Selection.updateSelection()}}}}});this.summary=q({width:275,name:"tableSummary",noTargetHighlight:!0,scope:this.name+".cell",element:b('<input id="aloha-attribute-field-tableSummary" class="aloha-wai-red" style="color: black; padding-left: 32px; background-color: white"/>')});this.summary.addListener("keyup",function(){g.activeTable&&E(g)})};G.makeCaptionEditable=function(a,d){var c=a.children("div");0===c.length?(c=b("<div></div>"),c.addClass("aloha-ui aloha-editable-caption aloha-block"),
B.markWrapper(c),0<a.contents().length?c.append(a.contents()):d&&c.text(d),a.append(c)):1<c.length&&(a.children("div:not(:first-child)").each(function(){$this=b(this);c.eq(0).append($this.contents());$this.remove()}),c=c.eq(0));c.contentEditable(!0)};G.createDialog=function(a){this.createLayer.set("target",a);this.createLayer.show()};G.createTable=function(a,d){if(!this.preventNestedTables())if(l.activeEditable&&"undefined"!==typeof l.activeEditable.obj){for(var c=document.createElement("table"),
e=c.id=K.Utils.guid(),f=document.createElement("tbody"),g=0;g<d;g++){for(var k=document.createElement("tr"),n=0;n<a;n++){var m=document.createTextNode("\u00a0"),q=document.createElement("td");q.appendChild(m);k.appendChild(q)}f.appendChild(k)}c.appendChild(f);Z(l.Selection.getRangeObject(),c);K.Utils.Dom.insertIntoDOM(b(c),l.Selection.getRangeObject(),l.activeEditable.obj);N();var c=document.getElementById(e),v=t(c);v&&(x.browser.msie?window.setTimeout(function(){v.cells[0].wrapper.get(0).focus()},
20):v.cells[0].wrapper.get(0).focus());v.focus();G.activeTable.selection.selectionType="cell";G.updateFloatingMenuScope()}else this.error("There is no active Editable where the table can be\t\t\t\tinserted!")};G.setFocusedTable=function(a){null!=this.activeTable&&this.activeTable.selection.unselectCells();for(var d=0;d<G.TableRegistry.length;d++)G.TableRegistry[d].hasFocus=!1;"undefined"!=typeof a&&(this.summary.setTargetObject(a.obj,"summary"),a.obj.children("caption").is("caption")&&(this._tableCaptionButton.setState(!0),
d=a.obj.children("caption"),this.makeCaptionEditable(d)),a.hasFocus=!0);G.activeTable=a;G.activeTable&&E(G);for(d=0;d<this.tableMSItems.length;d++)this.tableMSButton.showItem(this.tableMSItems[d].name);this.tableMSButton.setActiveItem();if(this.activeTable)for(d=0;d<this.tableConfig.length;d++)this.activeTable.obj.hasClass(this.tableConfig[d].cssClass)&&this.tableMSButton.setActiveItem(this.tableConfig[d].name)};G.error=function(a){l.Log.error(this,a)};G.debug=function(a){l.Log.debug(this,a)};G.info=
function(a){l.Log.info(this,a)};G.log=function(a){l.log("log",this,a)};G.get=function(a){if(this.config[a])return this.config[a];if(this.parameters[a])return this.parameters[a]};G.set=function(a,d){this.config[a]?this.config[a]=d:this.parameters[a]=d};G.makeClean=function(a){a.find("td, th").css("cursor","")};G.toString=function(){return this.prefix};G.updateFloatingMenuScope=function(){null!=G.activeTable&&null!=G.activeTable.selection.selectionType&&f.setScope(G.name+"."+G.activeTable.selection.selectionType)};
G.setActiveCellStyle=function(){var a=!1,d;this.cellMSButton.setActiveItem();for(var c=this.selectedOrActiveCells(),e=0;e<this.cellConfig.length;e++)if(b(c[0]).hasClass(this.cellConfig[e].cssClass)){d=this.cellConfig[e].name;a=!0;break}b(c).each(function(c){b(this).hasClass(d)||(a=!1)});a&&this.cellMSButton.setActiveItem(d)};G.selectedOrActiveCells=function(){var a=this.activeTable.selection.selectedCells;return!a||1>a.length?(a=function(){var a=l.Selection.getRangeObject();return l.activeEditable?
a.findMarkup(function(){return"td"===this.nodeName.toLowerCase()},l.activeEditable.obj):null}())?[a]:[]:a};m.register(G);return G});define("format/nls/i18n",{root:{"button.strong.tooltip":"Strong","button.em.tooltip":"Emphasize","button.b.tooltip":"Bold","button.i.tooltip":"Italic","button.u.tooltip":"Underline","button.cite.tooltip":"Cite","button.q.tooltip":"Tooltip","button.code.tooltip":"Code","button.abbr.tooltip":"Abbreviation","button.del.tooltip":"Strikethrough","button.s.tooltip":"Strikethrough",
"button.sub.tooltip":"Subscript","button.sup.tooltip":"Superscript","button.p.tooltip":"Paragraph","button.h1.tooltip":"Heading 1","button.h2.tooltip":"Heading 2","button.h3.tooltip":"Heading 3","button.h4.tooltip":"Heading 4","button.h5.tooltip":"Heading 5","button.h6.tooltip":"Heading 6","button.pre.tooltip":"Preformatted text","button.title.tooltip":"Title","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",GENTICS_button_p:"GENTICS_button_p",GENTICS_button_h1:"GENTICS_button_h1",
GENTICS_button_h2:"GENTICS_button_h2",GENTICS_button_h3:"GENTICS_button_h3",GENTICS_button_h4:"GENTICS_button_h4",GENTICS_button_h5:"GENTICS_button_h5",GENTICS_button_h6:"GENTICS_button_h6",GENTICS_button_pre:"GENTICS_button_pre",GENTICS_button_title:"GENTICS_button_title",formatBold:"Ctrl+b",formatItalic:"Ctrl+i",formatUnderline:"Ctrl+u",formatParagraph:"Alt+Ctrl+0",formatH1:"Alt+Ctrl+1",formatH2:"Alt+Ctrl+2",formatH3:"Alt+Ctrl+3",formatH4:"Alt+Ctrl+4",formatH5:"Alt+Ctrl+5",formatH6:"Alt+Ctrl+6",
formatPre:"Alt+Ctrl+P",formatDel:"Ctrl+\\",formatSub:"Ctrl+,",formatSup:"Ctrl+.","floatingmenu.tab.format":"Format","format.class.legend":"CSS class","format.class.none":"none"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("format/format-plugin","aloha aloha/plugin aloha/state-override jquery util/arrays util/maps ui/ui ui/toggleButton ui/port-helper-multi-split PubSub i18n!format/nls/i18n i18n!aloha/nls/i18n aloha/selection".split(" "),function(l,b,p,m,k,f,c,e,g,q,a,d){function n(a){var d=
m(".aloha-cell-selected");if(0<d.length){var b=0;d.each(function(){var d=m(this).find("div"),c=d.find(a);0<c.length&&(c.contents().unwrap(),b++);d.contents().wrap("<"+a+"></"+a+">")});b===d.length&&d.find(a).contents().unwrap();return!0}return!1}function v(d,b){var f=u[b];L.hasOwnProperty(b)&&(f=L[b]);return c.adopt(f,e,{tooltip:a.t("button."+b+".tooltip"),icon:"aloha-icon aloha-icon-"+f,scope:"Aloha.continuoustext",click:function(){n(b)||d.addMarkup(b);return!1}})}function y(d,b){return{name:b,tooltip:a.t("button."+
b+".tooltip"),iconClass:"aloha-icon "+a.t("aloha-large-icon-"+b),markup:m("<"+b+">"),click:function(){var a;n(b)?a=!1:(d.changeMarkup(b),l.activeEditable&&m.browser.mozilla&&l.activeEditable.obj.focus(),l.activeEditable&&l.trigger("aloha-format-block"),a=void 0);return a}}}function A(d,b){return{name:b,text:a.t("button."+b+".text"),tooltip:a.t("button."+b+".tooltip"),wide:!0,cls:"aloha-ui-multisplit-fullwidth",click:function(){d.removeFormat()}}}function z(a,d){d.select();t(a,l.Selection.getRangeObject())}
function B(a,d,b){s.Utils.Dom.addMarkup(d,b);z(a,d)}function r(a,d,b){d=d.getEditableConfig(b.obj);return-1<m.inArray(a,d)}function t(a,d){var b,c,e,f,g;m.each(a.buttons,function(a,c){var g=!1,k=Z[c.markup[0].nodeName]||[c.markup[0].nodeName];for(e=0;e<d.markupEffectiveAtStart.length;e++)for(b=d.markupEffectiveAtStart[e],f=0;f<k.length;f++)l.Selection.standardTextLevelSemanticsComparator(b,m("<"+k[f]+">"))&&(c.handle.setState(!0),g=!0);g||c.handle.setState(!1)});if(0<a.multiSplitItems.length){c=!1;
for(e=0;e<d.markupEffectiveAtStart.length&&!c;e++)for(b=d.markupEffectiveAtStart[e],f=0;f<a.multiSplitItems.length&&!c;f++)g=a.multiSplitItems[f],g.markup&&l.Selection.standardTextLevelSemanticsComparator(b,g.markup)&&(a.multiSplitButton.setActiveItem(g.name),c=!0);c||a.multiSplitButton.setActiveItem(null)}}var s=window.GENTICS,u={b:"bold",strong:"bold",i:"italic",em:"italic",del:"strikethrough",sub:"subscript",sup:"superscript",u:"underline",s:"strikethrough"},L={strong:"strong",em:"emphasis",s:"strikethrough2"},
T={u:!0,em:!0,strong:!0,b:!0,i:!0,cite:!0,q:!0,code:!0,abbr:!0,del:!0,s:!0,sub:!0,sup:!0},I={p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0},Z={B:["STRONG","B"],I:["EM","I"],STRONG:["STRONG","B"],EM:["EM","I"]};return b.create("format",{config:"b i sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),availableButtons:"u strong del em b i s sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),hotKey:{formatBold:"ctrl+b",formatItalic:"ctrl+i",formatParagraph:"alt+ctrl+0",formatH1:"alt+ctrl+1",
formatH2:"alt+ctrl+2",formatH3:"alt+ctrl+3",formatH4:"alt+ctrl+4",formatH5:"alt+ctrl+5",formatH6:"alt+ctrl+6",formatPre:"ctrl+p",formatDel:"ctrl+d",formatSub:"alt+shift+s",formatSup:"ctrl+shift+s"},init:function(){var a=this;"undefined"!==typeof this.settings.hotKey&&m.extend(!0,this.hotKey,this.settings.hotKey);this.initButtons();l.bind("aloha-plugins-loaded",function(){a.initSidebar(l.Sidebar.right)});l.bind("aloha-editable-activated",function(d,b){a.applyButtonConfig(b.editable.obj);var c=function(d){return function(){r(d,
a,b.editable)&&a.addMarkup(d);return!1}},e=function(d){return function(){r(d,a,b.editable)&&a.changeMarkup(d);return!1}};b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatBold,c("b"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatItalic,c("i"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatDel,c("del"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSub,c("sub"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSup,c("sup"));b.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatParagraph,e("p"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH1,e("h1"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH2,e("h2"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH3,e("h3"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH4,e("h4"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH5,e("h5"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH6,e("h6"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatPre,
e("pre"))});l.bind("aloha-editable-deactivated",function(a,d){d.editable.obj.unbind("keydown.aloha.format")})},applyButtonConfig:function(a){a=this.getEditableConfig(a);var d,b;if("object"===typeof a){var c=[];m.each(a,function(a,d){"number"===typeof a&&"string"===typeof d||c.push(a)});0<c.length&&(a=c)}this.formatOptions=a;for(d in this.buttons)this.buttons.hasOwnProperty(d)&&(-1!==m.inArray(d,a)?this.buttons[d].handle.show():this.buttons[d].handle.hide());b=this.multiSplitItems.length;for(d=0;d<
b;d++)-1!==m.inArray(this.multiSplitItems[d].name,a)?this.multiSplitButton.showItem(this.multiSplitItems[d].name):this.multiSplitButton.hideItem(this.multiSplitItems[d].name)},initButtons:function(){var a=this;this.buttons={};this.multiSplitItems=[];m.each(this.availableButtons,function(d,b){var c=!1;"number"!==typeof d&&"string"!==typeof b&&(c=b,b=d);T[b]?a.buttons[b]={handle:v(a,b),markup:m("<"+b+">",{"class":c||""})}:I[b]?a.multiSplitItems.push(y(a,b)):"removeFormat"===b?a.multiSplitItems.push(A(a,
b)):l.log("warn",a,'Button "'+b+'" is not defined')});this.multiSplitButton=g({name:"formatBlock",items:this.multiSplitItems,hideIfEmpty:!0,scope:"Aloha.continuoustext"});q.sub("aloha.selection.context-change",function(d){t(a,d.range)})},initSidebar:function(d){var b=this;b.sidebar=d;d.addPanel({id:b.nsClass("sidebar-panel-class"),title:a.t("floatingmenu.tab.format"),content:"",expanded:!0,activeOn:this.formatOptions||!1,onInit:function(){},onActivate:function(d){var c=this;c.effective=d;if(d[0]){c.format=
d[0].nodeName.toLowerCase();var e=m("<div>").attr("class",b.nsClass("target-container")),f=m("<fieldset>");f.append(m("<legend>"+c.format+" "+a.t("format.class.legend")).append(m("<select>")));e.append(f);var g='<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+a.t("format.class.legend")+'</legend><select name="targetGroup" class="'+b.nsClass("radioTarget")+'"><option value="">'+a.t("format.class.none")+"</option>";b.config[c.format]&&b.config[c.format]["class"]&&m.each(b.config[c.format]["class"],
function(a,d){g+='<option value="'+a+'" >'+d+"</option>"});g+="</select></fieldset></div>";c=this;this.setContent(g);m(b.nsSel("framename")).live("keyup",function(){m(c.effective).attr("target",m(this).val().replace('"',"&quot;").replace("'","&#39;"))});c=this;c.effective=d;m(b.nsSel("linkTitle")).val(m(c.effective).attr("title"))}}});d.show()},nsClass:function(){var a=[];m.each(arguments,function(){a.push(""==this?"aloha-format":"aloha-format-"+this)});return m.trim(a.join(" "))},nsSel:function(){var a=
[];m.each(arguments,function(){a.push("."+(""==this?"aloha-format":"aloha-format-"+this))});return m.trim(a.join(" "))},addMarkup:function(a){var d=this,b=m("<"+a+">"),c=l.Selection.rangeObject;if("undefined"!==typeof a&&""!=a){var e=Z[b[0].nodeName]||[b[0].nodeName],f=c.findMarkup(function(){return-1!==k.indexOf(e,this.nodeName)},l.activeEditable.obj);if(f)c.isCollapsed()?s.Utils.Dom.removeFromDOM(f,c,!0):s.Utils.Dom.removeMarkup(c,m(f),l.activeEditable.obj),z(d,c);else{if(c.isCollapsed()&&(s.Utils.Dom.extendToWord(c),
c.isCollapsed()&&p.enabled())){p.setWithRangeObject(u[a],c,function(a,c){B(d,c,b)});return}B(d,c,b)}}},changeMarkup:function(a){l.Selection.changeMarkupOnSelection(m("<"+a+">"))},removeFormat:function(){var a="u strong em b i q del s code sub sup p h1 h2 h3 h4 h5 h6 pre quote blockquote".split(" "),d=l.Selection.rangeObject,b;this.settings.removeFormats&&(a=this.settings.removeFormats);if(!d.isCollapsed()){for(b=0;b<a.length;b++)s.Utils.Dom.removeMarkup(d,m("<"+a[b]+">"),l.activeEditable.obj);d.select()}},
toString:function(){return"format"}})});define("list/nls/i18n",{root:{"button.createulist.tooltip":"Insert Unordered List","button.createolist.tooltip":"Insert Ordered List","button.indentlist.tooltip":"Indent List","button.outdentlist.tooltip":"Outdent List","floatingmenu.tab.list":"Lists"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("list/list-plugin","aloha jquery aloha/plugin ui/ui ui/scopes ui/button ui/toggleButton i18n!list/nls/i18n i18n!aloha/nls/i18n aloha/engine PubSub".split(" "),
function(l,b,p,m,k,f,c,e,g,q,a){function d(a,d){b(a).find(a.nodeName).each(function(){var a=l.Selection.getSelectionTree();n(a,this)&&l.Markup.transformDomObject(this,d,l.Selection.rangeObject)});l.Markup.transformDomObject(a,d,l.Selection.rangeObject)}function n(a,d){var c=!1;b.each(a,function(a,b){if(b.domobj===d&&"none"!==b.selection||n(b.children,d))c=!0});return c}var v=window.GENTICS,y=p.create("list",{config:["ul","ol"],transformableElements:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ul:!0,
ol:!0},init:function(){var d=this;this._orderedListButton=m.adopt("orderedList",c,{tooltip:e.t("button.createolist.tooltip"),icon:"aloha-icon aloha-icon-orderedlist",scope:"Aloha.continuoustext",click:function(){d.transformList(!0)}});this._unorderedListButton=m.adopt("unorderedList",c,{tooltip:e.t("button.createulist.tooltip"),icon:"aloha-icon aloha-icon-unorderedlist",scope:"Aloha.continuoustext",click:function(){d.transformList(!1)}});this._indentListButton=m.adopt("indentList",f,{tooltip:e.t("button.indentlist.tooltip"),
icon:"aloha-icon aloha-icon-indent",scope:"Aloha.continuoustext",click:function(){d.indentList()}});this._outdentListButton=m.adopt("outdentList",f,{tooltip:e.t("button.outdentlist.tooltip"),icon:"aloha-icon aloha-icon-outdent",scope:"Aloha.continuoustext",click:function(){d.outdentList()}});k.createScope("Aloha.List","Aloha.continuoustext");a.sub("aloha.selection.context-change",function(a){var c,e=a.range;d._outdentListButton.show(!1);d._indentListButton.show(!1);d._unorderedListButton.setState(!1);
d._orderedListButton.setState(!1);for(a=0;a<e.markupEffectiveAtStart.length;a++){c=e.markupEffectiveAtStart[a];if(l.Selection.standardTagNameComparator(c,b("<ul></ul>"))){d._unorderedListButton.setState(!0);d._outdentListButton.show(!0);d._indentListButton.show(!0);break}if(l.Selection.standardTagNameComparator(c,b("<ol></ol>"))){d._orderedListButton.setState(!0);d._outdentListButton.show(!0);d._indentListButton.show(!0);break}}l.activeEditable&&d.applyButtonConfig(l.activeEditable.obj)});l.Markup.addKeyHandler(9,
function(a){return d.processTab(a)})},applyButtonConfig:function(a){a=this.getEditableConfig(a);l.Selection.rangeObject.unmodifiableMarkupAtStart[0]&&(-1!=b.inArray("ul",a)&&-1!=l.Selection.canTag1WrapTag2(l.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ul")?this._unorderedListButton.show(!0):this._unorderedListButton.show(!1),-1!=b.inArray("ol",a)&&-1!=l.Selection.canTag1WrapTag2(l.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ol")?this._orderedListButton.show(!0):this._orderedListButton.show(!1))},
processTab:function(a){return 9===a.keyCode?a.shiftKey?this.outdentList():this.indentList():!0},getStartingDomObjectToTransform:function(){var a=l.Selection.rangeObject,d,b;for(d=0;d<a.markupEffectiveAtStart.length;d++)if(b=a.markupEffectiveAtStart[d],this.transformableElements[b.nodeName.toLowerCase()])return b;return!1},getNearestSelectedListItem:function(){var a=l.Selection.rangeObject,d,b;for(d=0;d<a.markupEffectiveAtStart.length;d++)if(b=a.markupEffectiveAtStart[d],v.Utils.Dom.isListElement(b))return b;
return!1},transformList:function(a){var c=this.getStartingDomObjectToTransform(),e,f,g,k;this._outdentListButton.show(!0);this._indentListButton.show(!0);if(!c&&(l.Selection.changeMarkupOnSelection(b("<p></p>")),c=this.getStartingDomObjectToTransform(),!c)){l.Selection.rangeObject.startContainer.contentEditable?(a=a?b("<ol></ol>"):b("<ul></ul>"),f=b("<li></li>"),a.append(f),g=f.get(0),c=l.getActiveEditable().obj,g.appendChild(document.createTextNode("")),c.append(a),c.focus(),a=l.createRange(),c=
l.getSelection(),a.setStart(g.firstChild,0),a.setEnd(g.firstChild,0),c.removeAllRanges(),c.addRange(a),l.Selection.updateSelection()):l.Log.error(this,"Could not transform selection into a list");return}g=c.nodeName.toLowerCase();if("ul"!=g||a)if("ul"==g&&a)d(c,"ol"),this.mergeAdjacentLists(b(c));else if("ol"!=g||a)if("ol"==g&&a)a=b(c),g=a.parent(),0<g.length&&v.Utils.Dom.isListElement(g.get(0))?"li"===g.get(0).nodeName.toLowerCase()?(g.after(a.children()),a.remove()):a.children().unwrap():(a=b(c),
b.each(a.children("li"),function(a,d){k=l.Markup.transformDomObject(d,"p",l.Selection.rangeObject);k.after(k.children("ol,ul"));q.ensureContainerEditable(k.get(0))}),a.children().unwrap());else{g=l.Selection.rangeObject.getSelectedSiblings(c);a=a?b("<ol></ol>"):b("<ul></ul>");f=b("<li></li>");a.append(f);b(c).contents().appendTo(f);b(c).replaceWith(a);l.Selection.rangeObject.startContainer==c&&(l.Selection.rangeObject.startContainer=f.get(0));l.Selection.rangeObject.endContainer==c&&(l.Selection.rangeObject.endContainer=
f.get(0));if(g)for(c=!1,e=0;e<g.length;++e)if(v.Utils.Dom.isBlockLevelElement(g[e]))c&&(c=!1),f=l.Markup.transformDomObject(g[e],"li",l.Selection.rangeObject),a.append(f);else if(3!=g[e].nodeType||0!==b.trim(g[e].data).length)c||(c=b("<li></li>"),a.append(c),f=c),c.append(g[e]);this.mergeAdjacentLists(a);g=f.get(0);v.Utils.Dom.isEmpty(g)&&(a=l.createRange(),c=l.getSelection(),g.appendChild(document.createTextNode("")),a.selectNodeContents(g.lastChild),c.removeAllRanges(),c.addRange(a),l.Selection.updateSelection())}else d(c,
"ul"),this.mergeAdjacentLists(b(c));else a=b(c),g=a.parent(),0<g.length&&v.Utils.Dom.isListElement(g.get(0))?"li"===g.get(0).nodeName.toLowerCase()?(g.after(a.children()),a.remove()):a.children().unwrap():(a=b(c),b.each(a.children("li"),function(a,d){k=l.Markup.transformDomObject(d,"p",l.Selection.rangeObject);k.after(k.children("ol,ul"));q.ensureContainerEditable(k.get(0))}),a.children().unwrap());this.refreshSelection()},indentList:function(){var a=this.getNearestSelectedListItem(),d,c,e;if(a){e=
b(a).prev("li");if(0===e.length)return!1;b(a).parent();c=l.Selection.rangeObject.getSelectedSiblings(a);d=b(a).parent().clone(!1).empty();d.append(a);e.append(d);if(c)for(a=0;a<c.length;++a)d.append(b(c[a]));this.mergeAdjacentLists(d,!0);this.refreshSelection();return!1}return!0},outdentList:function(){var a=this.getNearestSelectedListItem(),d,c,e,f,g;if(a){c=b(a);e=c.parent();d=e.parents("ul,ol");f=e.parent("li");if(0<d.length&&v.Utils.Dom.isListElement(d.get(0))){g=(a=l.Selection.rangeObject.getSelectedSiblings(a))&&
0<a.length?b(a[a.length-1]):c;0<g.nextAll("li").length&&(d=e.clone(!1).empty(),d.append(g.nextAll()),g.append(d));0<f.length?f.after(c):e.before(c);if(a&&0<a.length)for(d=a.length-1;0<=d;--d)c.after(b(a[d]));0===e.contents("li").length&&e.remove();0<f.length&&0===f.contents().length&&f.remove();this.refreshSelection()}return!1}return!0},refreshSelection:function(){l.Selection.rangeObject.update();l.Selection.rangeObject.select();l.Selection.updateSelection()},mergeAdjacentLists:function(a,d){for(var c=
a.get(0),e;c.previousSibling&&1===c.previousSibling.nodeType&&this.isMergable(c.previousSibling,c,d);)c=c.previousSibling;for(a=b(c);c.nextSibling&&(1===c.nextSibling.nodeType&&this.isMergable(c.nextSibling,c,d)||3===c.nextSibling.nodeType&&0===b.trim(c.nextSibling.data).length);)e=b(c.nextSibling),1==c.nextSibling.nodeType&&e.contents().appendTo(a),e.remove()},isMergable:function(a,d,b){return b?"ul"==a.nodeName.toLowerCase()||"ol"==a.nodeName.toLowerCase():a.nodeName==d.nodeName}});q.commands.insertorderedlist=
{action:function(a,d){y.transformList(!0);d&&l.Selection.rangeObject&&(d.startContainer=l.Selection.rangeObject.startContainer,d.startOffset=l.Selection.rangeObject.startOffset,d.endContainer=l.Selection.rangeObject.endContainer,d.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ul></ul>")))break;
if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ol></ol>")))return!0}return!1}};q.commands.insertunorderedlist={action:function(a,d){y.transformList(!1);d&&l.Selection.rangeObject&&(d.startContainer=l.Selection.rangeObject.startContainer,d.startOffset=l.Selection.rangeObject.startOffset,d.endContainer=l.Selection.rangeObject.endContainer,d.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=
rangeObject.markupEffectiveAtStart[i];if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ul></ul>")))return!0;if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ol></ol>")))break}return!1}};q.commands.indent={action:function(a,d){y.indentList();d&&l.Selection.rangeObject&&(d.startContainer=l.Selection.rangeObject.startContainer,d.startOffset=l.Selection.rangeObject.startOffset,d.endContainer=l.Selection.rangeObject.endContainer,d.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},
state:function(){return!1}};q.commands.outdent={action:function(a,d){y.outdentList();d&&l.Selection.rangeObject&&(d.startContainer=l.Selection.rangeObject.startContainer,d.startOffset=l.Selection.rangeObject.startOffset,d.endContainer=l.Selection.rangeObject.endContainer,d.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){return!1}};return y});define("image/nls/i18n",{root:{"size.natural":"Original size","button.addimg.tooltip":"add image ref","floatingmenu.tab.img":"Image",
"floatingmenu.tab.formatting":"Formatting","floatingmenu.tab.resize":"Resize","floatingmenu.tab.crop":"Crop","button.uploadimg.tooltip":"Upload img","button.uploadimg.label":"Upload","button.img.align.left.tooltip":"Left align","button.img.align.right.tooltip":"Right Align","button.img.align.none.tooltip":"No alignment","field.img.title.label":"Title","field.img.title.tooltip":"Title","field.img.label":"URL","field.img.tooltip":"Source","border ":"Add Border to Image","padding.increase ":"Increase Padding",
"padding.decrease ":"Decrease Padding","size.increase ":"Increase Size","size.decrease ":"Decrease Size",Resize:"Resize",Crop:"Crop",Reset:"Reset",Accept:"Accept",Cancel:"Cancel",height:"Height",width:"Width","button.toggle.tooltip":"Toggle keep aspect ratio","field.img.src.label":"Source","field.img.src.tooltip":"Source"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("image/image-floatingMenu","jquery util/class i18n!image/nls/i18n i18n!aloha/nls/i18n ui/ui ui/scopes ui/button ui/toggleButton ui/port-helper-attribute-field".split(" "),
function(l,b,p,m,k,f,c,e,g){return b.extend({_constructor:function(){},init:function(b){b.floatingMenuControl=this;this.plugin=b;f.createScope(b.name,"Aloha.empty");this._addUIInsertButton();this._addUIMetaButtons();this._addUIResetButton();this._addUIAlignButtons();this._addUIMarginButtons();this._addUICropButtons();this._addUIResizeButtons();this._addUIAspectRatioToggleButton()},_addUIAspectRatioToggleButton:function(){var b=this.plugin;this._imageCnrRatioButton=k.adopt("imageCnrRatio",e,{tooltip:p.t("button.toggle.tooltip"),
icon:"aloha-icon-cnr-ratio",scope:b.name,click:function(){b.toggleKeepAspectRatio()}});!1!==b.settings.fixedAspectRatio&&(this._imageCnrRatioButton.setState(!0),b.keepAspectRatio=!0)},_addUIResetButton:function(){var b=this.plugin;this._imageCnrResetButton=k.adopt("imageCnrReset",c,{tooltip:p.t("Reset"),icon:"aloha-icon-cnr-reset",scope:b.name,click:function(){b.reset()}})},_addUIInsertButton:function(){var b=this.plugin;this._insertImageButton=k.adopt("insertImage",c,{tooltip:p.t("button.addimg.tooltip"),
icon:"aloha-button aloha-image-insert",scope:"Aloha.continuoustext",click:function(){b.insertImg()}})},_addUIMetaButtons:function(){var b=this.plugin;this.imgSrcField=g({label:p.t("field.img.src.label"),labelClass:"aloha-image-input-label",tooltip:p.t("field.img.src.tooltip"),name:"imageSource",scope:b.name});this.imgSrcField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.imgSrcField.setObjectTypeFilter(b.objectTypeFilter);this.imgTitleField=g({label:p.t("field.img.title.label"),labelClass:"aloha-image-input-label",
tooltip:p.t("field.img.title.tooltip"),name:"imageTitle",scope:b.name});this.imgTitleField.setObjectTypeFilter()},_addUIAlignButtons:function(){var b=this.plugin;this._imageAlignLeftButton=k.adopt("imageAlignLeft",c,{tooltip:p.t("button.img.align.left.tooltip"),icon:"aloha-img aloha-image-align-left",scope:b.name,click:function(){var a=l(b.getPluginFocus());a.add(a.parent()).css("float","left")}});this._imageAlignRightButton=k.adopt("imageAlignRight",c,{tooltip:p.t("button.img.align.right.tooltip"),
icon:"aloha-img aloha-image-align-right",scope:b.name,click:function(){var a=l(b.getPluginFocus());a.add(a.parent()).css("float","right")}});this._imageAlignNoneButton=k.adopt("imageAlignNone",c,{tooltip:p.t("button.img.align.none.tooltip"),icon:"aloha-img aloha-image-align-none",scope:b.name,click:function(){var a=l(b.getPluginFocus());a.add(a.parent()).css({"float":"none",display:"inline-block"})}})},_addUIMarginButtons:function(){var b=this.plugin;this._imageIncPaddingButton=k.adopt("imageIncPadding",
c,{tooltip:p.t("padding.increase"),icon:"aloha-img aloha-image-padding-increase",scope:b.name,click:function(){l(b.getPluginFocus()).increase("padding")}});this._imageDecPaddingButton=k.adopt("imageDecPadding",c,{tooltip:p.t("padding.decrease"),icon:"aloha-img aloha-image-padding-decrease",scope:b.name,click:function(){l(b.getPluginFocus()).decrease("padding")}})},_addUICropButtons:function(){var b=this.plugin;f.createScope("Aloha.img",["Aloha.global"]);this._imageCropButton=k.adopt("imageCropButton",
e,{tooltip:p.t("Crop"),icon:"aloha-icon-cnr-crop",scope:b.name,click:function(){this.getState()?b.crop():b.endCrop()}})},_addUIResizeButtons:function(){var b=this.plugin;this.imgResizeHeightField=g({label:p.t("height"),labelClass:"aloha-image-input-label",name:"imageResizeHeight",width:50,scope:b.name});this.imgResizeHeightField.maxValue=b.settings.maxHeight;this.imgResizeHeightField.minValue=b.settings.minHeight;this.imgResizeWidthField=g({label:p.t("width"),labelClass:"aloha-image-input-label",
name:"imageResizeWidth",width:50,scope:b.name});this.imgResizeWidthField.maxValue=b.settings.maxWidth;this.imgResizeWidthField.minValue=b.settings.minWidth},setScope:function(){f.setScope(this.plugin.name)},doLayout:function(){}})});define("image/vendor/jcrop/jquery.jcrop.min",["jquery"],function(l){(function(b){b.Jcrop=function(l,m){function k(a){return""+parseInt(a)+"px"}function f(a){a=b(a).offset();return[a.left,a.top]}function c(a){return[a.pageX-J[0],a.pageY-J[1]]}function e(a,d){return function(b){if(t.aspectRatio)switch(a){case "e":b[1]=
d.y+1;break;case "w":b[1]=d.y+1;break;case "n":b[0]=d.x+1;break;case "s":b[0]=d.x+1}else switch(a){case "e":b[1]=d.y2;break;case "w":b[1]=d.y2;break;case "n":b[0]=d.x2;break;case "s":b[0]=d.x2}va.setCurrent(b);la.update()}}function g(a){var d=a;ka.watchKeys();return function(a){va.moveOffset([a[0]-d[0],a[1]-d[1]]);d=a;la.update()}}function q(a){switch(a){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}
function a(a){return function(d){if(t.disabled||"move"==a&&!t.allowMove)return!1;aa=!0;var b=c(d);J=f(u);oa.setCursor("move"==a?a:a+"-resize");if("move"==a)oa.activateHandlers(g(b),n);else{var b=va.getFixed(),k=q(a),l=va.getCorner(q(k));va.setPressed(va.getCorner(k));va.setCurrent(l);oa.activateHandlers(e(a,b),n)}d.stopPropagation();d.preventDefault();return!1}}function d(a){return{x:parseInt(a.x*M),y:parseInt(a.y*U),x2:parseInt(a.x2*M),y2:parseInt(a.y2*U),w:parseInt(a.w*M),h:parseInt(a.h*U)}}function n(a){a=
va.getFixed();a.w>t.minSelect[0]&&a.h>t.minSelect[1]?(la.enableHandles(),la.done()):la.release();oa.setCursor(t.allowSelect?"crosshair":"default")}function v(a){va.setCurrent(a);la.update()}function y(){var a=b("<div></div>").addClass(t.baseClass+"-tracker");b.browser.msie&&a.css({opacity:0,backgroundColor:"white"});return a}function A(a){z([a[0]/M,a[1]/U,a[2]/M,a[3]/U])}function z(a){va.setPressed([a[0],a[1]]);va.setCurrent([a[2],a[3]]);la.update()}function B(a){"object"!=typeof a&&(a={});t=b.extend(t,
a);"function"!==typeof t.onChange&&(t.onChange=function(){});"function"!==typeof t.onSelect&&(t.onSelect=function(){})}function r(a){t.allowResize?a?la.enableOnly():la.enableHandles():la.disableHandles();oa.setCursor(t.allowSelect?"crosshair":"default");la.setCursor(t.allowMove?"move":"default");I.css("backgroundColor",t.bgColor);"setSelect"in t&&(A(m.setSelect),la.done(),delete t.setSelect);"trueSize"in t&&(M=t.trueSize[0]/L,U=t.trueSize[1]/T);S=t.maxSize[0]||0;ha=t.maxSize[1]||0;ba=t.minSize[0]||
0;V=t.minSize[1]||0;"outerImage"in t&&(u.attr("src",t.outerImage),delete t.outerImage);la.refresh()}"object"!==typeof l&&(l=b(l)[0]);"object"!==typeof m&&(m={});"trackDocument"in m||(m.trackDocument=b.browser.msie?!1:!0,b.browser.msie&&"8"==b.browser.version.split(".")[0]&&(m.trackDocument=!0));"keySupport"in m||(m.keySupport=b.browser.msie?!1:!0);var t={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,handleOffset:5,
edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}};B(m);var s=b(l),u=s.clone().removeAttr("id").css({position:"absolute"});u.width(s.width());u.height(s.height());s.after(u).hide();(function(a,d,b){var c=a.width(),e=a.height();c>d&&0<d&&(c=d,e=d/a.width()*
a.height());e>b&&0<b&&(e=b,c=b/a.height()*a.width());M=a.width()/c;U=a.height()/e;a.width(c).height(e)})(u,t.boxWidth,t.boxHeight);var L=u.width(),T=u.height(),I=b("<div />").width(L).height(T).addClass(t.baseClass+"-holder").css({position:"relative",backgroundColor:t.bgColor}).insertAfter(s).append(u);t.addClass&&I.addClass(t.addClass);var Z=b("<img />").attr("src",u.attr("src")).css("position","absolute").width(L).height(T),N=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",
overflow:"hidden"}).append(Z),x=b("<div />").width("100%").height("100%").css("zIndex",320),K=b("<div />").css({position:"absolute",zIndex:300}).insertBefore(u).append(N,x),G=t.boundary,Q=y().width(L+2*G).height(T+2*G).css({position:"absolute",top:k(-G),left:k(-G),zIndex:290}).mousedown(function(a){if(t.disabled||!t.allowSelect)return!1;aa=!0;J=f(u);la.disableHandles();"crosshair"!=X&&(oa.setCursor("crosshair"),X="crosshair");var d=c(a);va.setPressed(d);oa.activateHandlers(v,n);ka.watchKeys();la.update();
a.stopPropagation();a.preventDefault();return!1}),S,ha,ba,V,M,U,J=f(u),aa,X,fa,ua,va=function(){function a(){if(!t.aspectRatio){var d=g-e,n=k-f;S&&Math.abs(d)>S&&(g=0<d?e+S:e-S);ha&&Math.abs(n)>ha&&(k=0<n?f+ha:f-ha);V&&Math.abs(n)<V&&(k=0<n?f+V:f-V);ba&&Math.abs(d)<ba&&(g=0<d?e+ba:e-ba);0>e&&(g-=e,e-=e);0>f&&(k-=f,f-=f);0>g&&(e-=g,g-=g);0>k&&(f-=k,k-=k);g>L&&(d=g-L,e-=d,g-=d);k>T&&(d=k-T,f-=d,k-=d);e>L&&(d=e-T,k-=d,f-=d);f>T&&(d=f-T,k-=d,f-=d);return c(b(e,f,g,k))}var d=t.aspectRatio,n=t.minSize[0]/
M,l=t.maxSize[0]/M,m=g-e,q=k-f,v=Math.abs(m),p=Math.abs(q);0==l&&(l=10*L);v/p<d?(v=k,w=p*d,p=0>m?e-w:w+e,0>p?(p=0,h=Math.abs((p-e)/d),v=0>q?f-h:h+f):p>L&&(p=L,h=Math.abs((p-e)/d),v=0>q?f-h:h+f)):(p=g,h=v/d,v=0>q?f-h:f+h,0>v?(v=0,w=Math.abs((v-f)*d),p=0>m?e-w:w+e):v>T&&(v=T,w=Math.abs(v-f)*d,p=0>m?e-w:w+e));p>e?(p-e<n?p=e+n:p-e>l&&(p=e+l),v=v>f?f+(p-e)/d:f-(p-e)/d):p<e&&(e-p<n?p=e-n:e-p>l&&(p=e-l),v=v>f?f+(e-p)/d:f-(e-p)/d);0>p?(e-=p,p=0):p>L&&(e-=p-L,p=L);0>v?(f-=v,v=0):v>T&&(f-=v-T,v=T);return last=
c(b(e,f,p,v))}function d(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>L&&(a[0]=L);a[1]>T&&(a[1]=T);return[a[0],a[1]]}function b(a,d,c,e){var f=a,g=c,k=d,n=e;c<a&&(f=c,g=a);e<d&&(k=e,n=d);return[Math.round(f),Math.round(k),Math.round(g),Math.round(n)]}function c(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var e=0,f=0,g=0,k=0,n,l;return{flipCoords:b,setPressed:function(a){a=d(a);g=e=a[0];k=f=a[1]},setCurrent:function(a){a=d(a);n=a[0]-g;l=a[1]-k;g=a[0];k=a[1]},getOffset:function(){return[n,
l]},moveOffset:function(a){var d=a[0];a=a[1];0>e+d&&(d-=d+e);0>f+a&&(a-=a+f);T<k+a&&(a+=T-(k+a));L<g+d&&(d+=L-(g+d));e+=d;g+=d;f+=a;k+=a},getCorner:function(d){var b=a();switch(d){case "ne":return[b.x2,b.y];case "nw":return[b.x,b.y];case "se":return[b.x2,b.y2];case "sw":return[b.x,b.y2]}},getFixed:a}}(),la=function(){function c(a){a=b("<div />").css({position:"absolute",opacity:t.borderOpacity}).addClass(t.baseClass+"-"+a);N.append(a);return a}function e(d,c){var f=b("<div />").mousedown(a(d)).css({cursor:d+
"-resize",position:"absolute",zIndex:c});x.append(f);return f}function f(a){var d=t.handleSize,b=D,c=d;switch(a){case "n":case "s":d="100%";break;case "e":case "w":c="100%"}return e(a,B++).width(d).height(c).css({top:k(-b+1),left:k(-b+1)})}function g(a){for(i in a)C[a[i]]=e(a[i],B++).css({top:k(-D+1),left:k(-D+1),opacity:t.handleOpacity}).addClass(t.baseClass+"-handle")}function n(a){var d=Math.round(a.h/2-D),b=Math.round(a.w/2-D);west=-D+1;var c=a.w-D;a=a.h-D;"e"in C&&C.e.css({top:k(d),left:k(c)})&&
C.w.css({top:k(d)})&&C.s.css({top:k(a),left:k(b)})&&C.n.css({left:k(b)});"ne"in C&&C.ne.css({left:k(c)})&&C.se.css({top:k(a),left:k(c)})&&C.sw.css({top:k(a)});"b"in C&&C.b.css({top:k(a)})&&C.r.css({left:k(c)})}function l(){var a=va.getFixed();va.setPressed([a.x,a.y]);va.setCurrent([a.x2,a.y2]);m()}function m(){if(z)return q()}function q(){var a=va.getFixed(),b=a.h;K.width(a.w).height(b);var b=a.x,c=a.y;Z.css({top:k(-c),left:k(-b)});K.css({top:k(c),left:k(b)});t.drawBorders&&r.right.css({left:k(a.w-
1)})&&r.bottom.css({top:k(a.h-1)});s&&n(a);z||(K.show(),u.css("opacity",t.bgOpacity),z=!0);t.onChange(d(a))}function v(){s=!0;if(t.allowResize)return n(va.getFixed()),x.show(),!0}function p(){s=!1;x.hide()}function A(a){(fa=a)?p():v()}var z,B=370,r={},C={},s=!1,D=t.handleOffset;t.drawBorders&&(r={top:c("hline").css("top",b.browser.msie?k(-1):k(0)),bottom:c("hline"),left:c("vline"),right:c("vline")});t.dragEdges&&(C.t=f("n"),C.b=f("s"),C.r=f("e"),C.l=f("w"));t.sideHandles&&g(["n","s","e","w"]);t.cornerHandles&&
g(["sw","nw","ne","se"]);var L=y().mousedown(a("move")).css({cursor:"move",position:"absolute",zIndex:360});N.append(L);p();return{updateVisible:m,update:q,release:function(){p();K.hide();u.css("opacity",1);z=!1},refresh:l,setCursor:function(a){L.css("cursor",a)},enableHandles:v,enableOnly:function(){s=!0},showHandles:function(){s&&(n(va.getFixed()),x.show())},disableHandles:p,animMode:A,done:function(){A(!1);l()}}}(),oa=function(){function a(d){f(c(d))}function e(n){n.preventDefault();n.stopPropagation();
aa&&(aa=!1,g(c(n)),t.onSelect(d(va.getFixed())),Q.css({zIndex:290}),k&&b(document).unbind("mousemove",a).unbind("mouseup",e),f=function(){},g=function(){});return!1}var f=function(){},g=function(){},k=t.trackDocument;k||Q.mousemove(a).mouseup(e).mouseout(e);u.before(Q);return{activateHandlers:function(d,c){aa=!0;f=d;g=c;Q.css({zIndex:450});k&&b(document).mousemove(a).mouseup(e);return!1},setCursor:function(a){Q.css("cursor",a)}}}(),ka=function(){function a(d,b,c){t.allowMove&&(va.moveOffset([b,c]),
la.updateVisible());d.preventDefault();d.stopPropagation()}var d=b('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(function(d){if(d.ctrlKey)return!0;var b=(ua=d.shiftKey?!0:!1)?10:1;switch(d.keyCode){case 37:a(d,-b,0);break;case 39:a(d,b,0);break;case 38:a(d,0,-b);break;case 40:a(d,0,b);break;case 27:la.release();break;case 9:return!0}return nothing(d)}).blur(function(a){d.hide()}),c=b("<div />").css({position:"absolute",overflow:"hidden"}).append(d);t.keySupport&&c.insertBefore(u);
return{watchKeys:function(){t.keySupport&&(d.show(),d.focus())}}}();x.hide();r(!0);G={animateTo:function(a){var d=a[0]/M,b=a[1]/U,c=a[2]/M,e=a[3]/U;if(!fa){a=va.flipCoords(d,b,c,e);var d=va.getFixed(),f=initcr=[d.x,d.y,d.x2,d.y2],g=t.animationDelay,k=f[0],n=f[1],c=f[2],e=f[3],l=a[0]-initcr[0],m=a[1]-initcr[1],q=a[2]-initcr[2],v=a[3]-initcr[3],p=0,y=t.swingSpeed;la.animMode(!0);var A=function(){return function(){p+=(100-p)/y;f[0]=k+p/100*l;f[1]=n+p/100*m;f[2]=c+p/100*q;f[3]=e+p/100*v;100>p?window.setTimeout(A,
g):la.done();99.8<=p&&(p=100);z(f)}}();window.setTimeout(A,g)}},setSelect:A,setOptions:function(a){B(a);r()},tellSelect:function(){return d(va.getFixed())},tellScaled:function(){return va.getFixed()},disable:function(){t.disabled=!0;la.disableHandles();la.setCursor("default");oa.setCursor("default")},enable:function(){t.disabled=!1;r()},cancel:function(){la.done();oa.activateHandlers(null,null)},focus:ka.watchKeys,getBounds:function(){return[L*M,T*U]},getWidgetSize:function(){return[L,T]},release:la.release,
destroy:function(){I.remove();s.show()}};s.data("Jcrop",G);return G};b.fn.Jcrop=function(l){function m(k){var f=l.useImg||k.src,c=new Image;c.onload=function(){b.Jcrop(k,l)};c.src=f}"object"!==typeof l&&(l={});this.each(function(){if(b(this).data("Jcrop")){if("api"==l)return b(this).data("Jcrop");b(this).data("Jcrop").setOptions(l)}else m(this)});return this}})(l)});define("image/vendor/mousewheel/mousewheel",["jquery"],function(l){(function(b){function l(f){var c=f||window.event,e=[].slice.call(arguments,
1),g=0,k=0,a=0;f=b.event.fix(c);f.type="mousewheel";c.wheelDelta&&(g=c.wheelDelta/120);c.detail&&(g=-c.detail/3);a=g;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(a=0,k=-1*g);void 0!==c.wheelDeltaY&&(a=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(k=-1*c.wheelDeltaX/120);e.unshift(f,g,k,a);return(b.event.dispatch||b.event.handle).apply(this,e)}var m=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var k=m.length;k;)b.event.fixHooks[m[--k]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=
m.length;b;)this.addEventListener(m[--b],l,!1);else this.onmousewheel=l},teardown:function(){if(this.removeEventListener)for(var b=m.length;b;)this.removeEventListener(m[--b],l,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(l)});define("image/image-plugin","jquery aloha/plugin image/image-floatingMenu i18n!aloha/nls/i18n i18n!image/nls/i18n jqueryui image/vendor/jcrop/jquery.jcrop.min image/vendor/mousewheel/mousewheel".split(" "),
function(l,b,p,m,k){var f=l,c=window.GENTICS,e=window.Aloha,g=!1,q=!1,a=!1;String.prototype.toInteger=String.prototype.toInteger||function(){return parseInt(String(this).replace(/px$/,"")||0,10)};String.prototype.toFloat=String.prototype.toInteger||function(){return parseFloat(String(this).replace(/px$/,"")||0,10)};Number.prototype.toInteger=Number.prototype.toInteger||String.prototype.toInteger;Number.prototype.toFloat=Number.prototype.toFloat||String.prototype.toFloat;l.extend(!0,l.fn,{increase:l.fn.increase||
function(a){var b=l(this),c,e;if(!b.length)return b;c=b.css(a).toFloat();e=Math.round(1.2*(c||1));c===e&&e++;b.css(a,e);return b},decrease:l.fn.decrease||function(a){var b=l(this),c,e;if(!b.length)return b;c=b.css(a).toFloat();e=Math.round(0.8*(c||0));c===e&&0<e&&e--;b.css(a,e);return b}});return b.create("image",{defaultSettings:{maxWidth:1600,minWidth:3,maxHeight:1200,minHeight:3,autoCorrectManualInput:!0,fixedAspectRatio:!1,autoResize:!1,ui:{meta:!0,crop:!0,resizable:!0},handles:"ne, se, sw, nw",
onCropped:function(a,b){e.Log.info("Default onCropped invoked",a,b)},onReset:function(a){e.Log.info("Default onReset invoked",a);return!1},onResize:function(a){e.Log.info("Default onResize invoked",a)},onResized:function(a){e.Log.info("Default onResized invoked",a)}},_onCropped:function(a,b){f("body").trigger("aloha-image-cropped",[a,b]);this.keepAspectRatio&&(q=this.imageObj.width()/this.imageObj.height());this.onCropped(a,b)},_onReset:function(a){f("body").trigger("aloha-image-reset",a);return this.onReset(a)},
_onResize:function(a){f("body").trigger("aloha-image-resize",a);this._applyValuesToFields(a.width(),a.height());this.onResize(a)},_onResized:function(a){f("body").trigger("aloha-image-resized",a);this._applyValuesToFields(a.width(),a.height());this.onResized(a)},imageObj:null,jcAPI:null,keepAspectRatio:!1,restoreProps:[],objectTypeFilter:[],init:function(){e.getPluginUrl("image");"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);this.config=
this.defaultSettings;this.settings=l.extend(!0,this.defaultSettings,this.settings);"number"===typeof this.settings.fixedAspectRatio?(q=a=this.settings.fixedAspectRatio,this.keepAspectRatio=!0):this.keepAspectRatio=!0===this.settings.fixedAspectRatio?!0:!1;this.initializeUI();this.bindInteractions();this.subscribeEvents()},initializeUI:function(){this.ui=new p;this.ui.init(this)},bindInteractions:function(){var a=this;if(a.settings.ui.resizable)try{document.execCommand("enableObjectResizing",!1,!1)}catch(b){e.Log.info(b,
"Could not disable enableObjectResizing")}a.settings.ui.meta&&(a.ui.imgSrcField.addListener("keyup",function(b){a.srcChange()}),a.ui.imgSrcField.addListener("blur",function(b){b=l(a.ui.imgSrcField.getTargetObject());""===b.attr("src")&&b.remove()}));a.settings.onCropped&&"function"===typeof a.settings.onCropped&&(a.onCropped=a.settings.onCropped);a.settings.onReset&&"function"===typeof a.settings.onReset&&(a.onReset=a.settings.onReset);a.settings.onResized&&"function"===typeof a.settings.onResized&&
(a.onResized=a.settings.onResized);a.settings.onResize&&"function"===typeof a.settings.onResize&&(a.onResize=this.settings.onResize)},subscribeEvents:function(){var a=this,b=this.settings;l("img").filter(b.globalselector).unbind();l("img").filter(b.globalselector).click(function(b){a.clickImage(b)});e.bind("aloha-drop-files-in-editable",function(b,f){for(var g,k=f.filesObjs.length,n;0<=--k;)n=f.filesObjs[k],n.file.type.match(/image\//)&&(a.getEditableConfig(f.editable),g=l("<img/>"),g.css({"max-width":that.maxWidth,
"max-height":that.maxHeight}),g.attr("id",n.id),"undefined"===typeof n.src?g.attr("src",n.data):g.attr("src",n.src),c.Utils.Dom.insertIntoDOM(g,f.range,l(e.activeEditable.obj)))});e.bind("aloha-selection-changed",function(b,c,f){f&&f.target&&a.settings.ui.resizable&&!l(f.target).hasClass("ui-resizable-handle")&&(a.endResize(),a.imageObj=null,e.trigger("aloha-image-unselected"));null!==e.activeEditable&&(c=a.findImgMarkup(c),b=a.getEditableConfig(e.activeEditable.obj),"undefined"!==typeof b?(a.ui._insertImageButton.show(),
c?(a.ui._insertImageButton.show(),a.ui.setScope(),a.settings.ui.meta&&(a.ui.imgSrcField.setTargetObject(c,"src"),a.ui.imgTitleField.setTargetObject(c,"title")),a.ui.imgSrcField.foreground(),a.ui.imgSrcField.focus()):a.settings.ui.meta&&a.ui.imgSrcField.setTargetObject(null),a.ui.doLayout()):a.ui._insertImageButton.hide())});e.bind("aloha-editable-created",function(b,c){try{document.execCommand("enableObjectResizing",!1,!1)}catch(f){e.Log.info(f,"Could not disable enableObjectResizing")}c.obj.delegate("img",
"mouseup",function(b){g||(a.clickImage(b),b.stopPropagation())})});a._subscribeToResizeFieldEvents()},autoResize:function(a){l("#"+this.ui.imgResizeWidthField.getInputId());l("#"+this.ui.imgResizeHeightField.getInputId());var b=this.imageObj.width(),c=this.imageObj.height(),e=!1;if(b<this.settings.minWidth||b>this.settings.maxWidth||c<this.settings.minHeight||c>this.settings.maxHeight)e=!0;var f=b/c;return e?(b>this.settings.maxWidth&&(b=this.settings.maxWidth,c=b/f),c>this.settings.maxHeight&&(c=
this.settings.maxHeight,b=c*f),b<this.settings.minWidth&&a&&(b=this.settings.minWidth,c=b/f),c<this.settings.minHeight&&a&&(c=this.settings.minHeight,b*=f),this._applyValuesToFields(b,c),this.setSizeByFieldValue(),!0):!1},toggleKeepAspectRatio:function(){this.keepAspectRatio=!this.keepAspectRatio;if("undefined"!==typeof this.jcAPI&&null!==this.jcAPI){var d=this.jcAPI.tellSelect();a=this.keepAspectRatio?"number"!==typeof this.settings.fixedAspectRatio?0<d.w/d.h?d.w/d.h:this.imageObj.width()/this.imageObj.height():
this.settings.fixedAspectRatio:!1;this.jcAPI.setOptions(this.keepAspectRatio?{aspectRatio:a}:{aspectRatio:0});this.jcAPI.focus()}else this.endResize(),q=this.keepAspectRatio?"number"!==typeof this.settings.fixedAspectRatio?this.imageObj.width()/this.imageObj.height():this.settings.fixedAspectRatio:!1,this.startResize()},_subscribeToResizeFieldEvents:function(){function a(d){var b=d.data.fieldName;if(8===d.keyCode||46===d.keyCode)c._updateFields(b,f(this).val(),!1)&&("undefined"!==typeof c.jcAPI&&
null!==c.jcAPI?c.setCropAreaByFieldValue():c.setSizeByFieldValue());else if(57>=d.keyCode&&48<=d.keyCode||105>=d.keyCode&&96<=d.keyCode)c._updateFields(b,f(this).val(),!1)&&("undefined"!==typeof c.jcAPI&&null!==c.jcAPI?c.setCropAreaByFieldValue():c.setSizeByFieldValue());else{var e=0;if(38===d.keyCode||107===d.keyCode)e=1;else if(40===d.keyCode||109===d.keyCode)e=-1;if(d.shiftKey||d.metaKey||d.ctrlKey)e*=10;var g=!1;0>e&&(g=!0);e=parseInt(f(this).val(),10)+e;c._updateFields(b,e,g)&&("undefined"!==
typeof c.jcAPI&&null!==c.jcAPI?c.setCropAreaByFieldValue():c.setSizeByFieldValue())}d.preventDefault();return!1}function b(a,d){var e=a.data.fieldName;if(a.shiftKey||a.metaKey||a.ctrlKey)d*=10;var g=parseInt(f(this).val(),10)+d,k=!1;0>d&&(k=!0);c._updateFields(e,g,k)&&("undefined"!==typeof c.jcAPI&&null!==c.jcAPI?c.setCropAreaByFieldValue():c.setSizeByFieldValue());return!1}var c=this,e=f("#"+c.ui.imgResizeHeightField.getInputId()),g={fieldName:"height",maxValue:c.ui.imgResizeHeightField.maxValue,
minValue:c.ui.imgResizeHeightField.minValue};e.live("keyup",g,a);e.live("mousewheel",g,b);e=f("#"+c.ui.imgResizeWidthField.getInputId());g={fieldName:"width",maxValue:c.ui.imgResizeWidthField.maxValue,minValue:c.ui.imgResizeWidthField.minValue};e.live("keyup",g,a);e.live("mousewheel",g,b)},setSize:function(a,b){this.imageObj.width(a);this.imageObj.height(b);var c=this.imageObj.closest(".Aloha_Image_Resize");c.height(b);c.width(a);this._onResize(this.imageObj);this._onResized(this.imageObj)},clickImage:function(d){this.endResize();
d=this.imageObj=l(d.target);if(!d.hasClass("aloha-ui")){this.ui.setScope();d.closest(".aloha-editable");this.ui._imageCnrRatioButton.setState(this.keepAspectRatio);this.restoreProps.push({obj:this.imageObj,src:this.imageObj.attr("src"),width:this.imageObj.width(),height:this.imageObj.height()});this._applyValuesToFields(this.imageObj.width(),this.imageObj.height());this.settings.ui.meta&&(this.ui.imgSrcField.setTargetObject(this.imageObj,"src"),this.ui.imgTitleField.setTargetObject(this.imageObj,
"title"));e.Selection.preventSelectionChanged();try{this.ui.imgSrcField.focus()}catch(b){}a=q=this.imageObj.width()/this.imageObj.height();this.settings.ui.resizable&&this.startResize();this.settings.autoResize&&this.autoResize(!0);e.Selection.preventSelectionChangedFlag=!1;e.trigger("aloha-image-selected")}},findImgMarkup:function(a){var b,c;"undefined"===typeof a&&(a=e.Selection.getRangeObject());c=l(a.startContainer);try{if(e.activeEditable&&("undefined"!==typeof a.startContainer&&"undefined"!==
typeof a.startContainer.childNodes&&"undefined"!==typeof a.startOffset&&"undefined"!==typeof a.startContainer.childNodes[a.startOffset]&&"img"===a.startContainer.childNodes[a.startOffset].nodeName.toLowerCase()&&a.startOffset+1===a.endOffset||c.hasClass("Aloha_Image_Resize")))return b=c.find("img")[0],b.css||(b.css=""),b.title||(b.title=""),b.src||(b.src=""),b}catch(f){e.Log.debug(f,"Error finding img markup.")}return null},getPluginFocus:function(){return this.imageObj},_updateFields:function(d,
b,c){var e=null,g=null,k=null,l=null,m=null,p=null,r=null,k="undefined"!==typeof this.jcAPI&&null!==this.jcAPI?a?a:q:q;if("width"==d)e=f("#"+this.ui.imgResizeWidthField.getInputId()),g=f("#"+this.ui.imgResizeHeightField.getInputId()),k=1/k,l=this.settings.minWidth,m=this.settings.maxWidth,p=this.settings.minHeight,r=this.settings.maxHeight;else if("height"==d)e=f("#"+this.ui.imgResizeHeightField.getInputId()),g=f("#"+this.ui.imgResizeWidthField.getInputId()),l=this.settings.minHeight,m=this.settings.maxHeight,
p=this.settings.minWidth,r=this.settings.maxWidth;else return!1;if(isNaN(b))return e.css("background-color","red"),!1;e.val(b);d=!0;b>m?this.settings.autoCorrectManualInput?(e.val(m),b=e.val(),e.css("background-color",""),d=!0):(e.css("background-color","red"),d=!1):b<l?c?(e.val(l),b=e.val(),d=!0):(this.settings.autoCorrectManualInput?e.css("background-color","wheat"):e.css("background-color","red"),d=!1):(e.css("background-color",""),d=!0);l=!0;this.keepAspectRatio&&(b=Math.round(b*k),b>r?this.settings.autoCorrectManualInput?
(g.val(r),e.val(g.val()/k),e.val(),e.css("background-color",""),g.css("background-color",""),l=!0):(b.css("background-color","red"),l=!1):b<p?c?(g.val(p),e.val(g.val()/k),e.val(),d=!0):(this.settings.autoCorrectManualInput?(g.val(b),g.css("background-color","wheat")):g.css("background-color","red"),l=!1):(g.val(b),g.css("background-color",""),l=!0));g.val()<p&&(l=!1);return d&&l?!0:!1},setSizeByFieldValue:function(){var a=this.ui.imgResizeWidthField.getValue(),b=this.ui.imgResizeHeightField.getValue();
this.setSize(a,b)},_applyValuesToFields:function(a,b){this.ui.imgResizeWidthField.setValue(a);this.ui.imgResizeHeightField.setValue(b);this.ui.imgResizeWidthField.getInputJQuery().css("background-color","");this.ui.imgResizeHeightField.getInputJQuery().css("background-color","")},setCropAreaByFieldValue:function(){var a=this.jcAPI.tellSelect(),b=parseInt(this.ui.imgResizeWidthField.getValue(),10),c=parseInt(this.ui.imgResizeHeightField.getValue(),10);this.jcAPI.setSelect([a.x,a.y,a.x+b,a.y+c]);this._onCropSelect();
this.jcAPI.enable()},insertImg:function(){var a=e.Selection.getRangeObject(),b=this.getEditableConfig(e.activeEditable.obj),f=e.getPluginUrl("image");a.isCollapsed()?(b="max-width: "+b.maxWidth+"; max-height: "+b.maxHeight,f=l('<img style="'+b+'" src="'+f+'/img/blank.jpg" title="" />'),c.Utils.Dom.insertIntoDOM(f,a,l(e.activeEditable.obj))):e.Log.error("img cannot markup a selection")},srcChange:function(){this.imageObj.attr("src",this.ui.imgSrcField.getValue())},positionCropButtons:function(){var a=
l(".jcrop-tracker:first"),b=a.offset(),c=b.top,b=b.left,e=a.height(),a=a.width(),f=l("#aloha-CropNResize-btns");0===c&&0===b&&f.hide();c=parseInt(c+e+3,10);b=parseInt(b+a/2-f.width()/2+10,10);0==b&&0==c||f.offset({top:c,left:b})},initCropButtons:function(){var a=this,b;l("body").append('<div id="aloha-CropNResize-btns" display="none"><button class="cnr-crop-apply" title="'+k.t("Accept")+'"></button><button class="cnr-crop-cancel" title="'+k.t("Cancel")+'"></button></div>');b=l("#aloha-CropNResize-btns");
b.find(".cnr-crop-apply").click(function(){a.acceptCrop()});b.find(".cnr-crop-cancel").click(function(){a.endCrop()});this.interval=setInterval(function(){a.positionCropButtons()},10)},destroyCropButtons:function(){l("#aloha-CropNResize-btns").remove();clearInterval(this.interval)},_disableSelection:function(a){a.find("*").attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"})},crop:function(){var a=this,b=a.keepAspectRatio?q:!1;this.ui._imageCropButton.setState(!0);
a.initCropButtons();a.settings.ui.resizable&&a.endResize();a.jcAPI=l.Jcrop(a.imageObj,{onSelect:function(){a._onCropSelect();window.setTimeout(function(){a.ui.setScope()},10)},aspectRatio:b,minSize:[a.settings.minWidth,a.settings.minHeight]});a._disableSelection(f(".jcrop-holder"));a._disableSelection(f("#imageContainer"));a._disableSelection(f("#aloha-CropNResize-btns"));f("body").trigger("aloha-image-crop-start",[a.imageObj])},_onCropSelect:function(){l(".jcrop-handle").mousedown(function(){l("#aloha-CropNResize-btns").hide()});
l(".jcrop-tracker").mousedown(function(){l("#aloha-CropNResize-btns").hide()});if("undefined"!==typeof this.jcAPI&&null!==this.jcAPI){this.positionCropButtons();var a=this.jcAPI.tellSelect();0<a.h&&0<a.w&&l("#aloha-CropNResize-btns").fadeIn("slow");this._applyValuesToFields(a.w,a.h)}},endCrop:function(){this.jcAPI&&(this.jcAPI.destroy(),this.jcAPI=null);this.destroyCropButtons();this.ui._imageCropButton.setState(!1);this.settings.ui.resizable&&this.startResize();f("body").trigger("aloha-image-crop-stop",
[this.imageObj]);this._applyValuesToFields(this.imageObj.width(),this.imageObj.height())},acceptCrop:function(){this._onCropped(this.imageObj,this.jcAPI.tellSelect());this.endCrop()},startResize:function(){var a=this,b=this.imageObj,c=a.keepAspectRatio?q:!1,b=this.imageObj.css({height:this.imageObj.height(),width:this.imageObj.width(),position:"relative","max-height":"","max-width":""});b.resizable({maxHeight:a.settings.maxHeight,minHeight:a.settings.minHeight,maxWidth:a.settings.maxWidth,minWidth:a.settings.minWidth,
aspectRatio:c,handles:a.settings.handles,grid:a.settings.grid,resize:function(b,c){g=!0;a._onResize(a.imageObj)},stop:function(b,c){g=!1;a._onResized(a.imageObj);this.enableCrop&&window.setTimeout(function(){a.ui.setScope();that.done(b)},10)}});b.css("display","inline-block");l(".ui-wrapper").attr("contentEditable",!1).addClass("aloha-image-box-active Aloha_Image_Resize aloha").css({position:"relative",display:"inline-block","float":a.imageObj.css("float")}).bind("resizestart",function(a){a.preventDefault()}).bind("mouseup",
function(a){a.originalEvent.stopSelectionUpdate=!0})},endResize:function(){this.imageObj&&this.imageObj.closest(".aloha-editable");this.imageObj&&this.imageObj.is(":ui-resizable")&&this.imageObj.resizable("destroy").css({top:0,left:0})},resetSize:function(){var a=this,b=new Image;b.onload=function(){var c=a.getPluginFocus();a.settings.ui.resizable&&a.endResize();l(c).add(c.parent()).css({width:b.width+"px",height:b.height+"px","max-width":"","max-height":""});a.settings.ui.resizable&&a.resize()};
b.src=a.getPluginFocus().attr("src")},reset:function(){this.settings.ui.crop&&this.endCrop();this.settings.ui.resizable&&this.endResize();if(!this._onReset(this.imageObj))for(var a=0;a<this.restoreProps.length;a++)if(this.imageObj.get(0)===this.restoreProps[a].obj.get(0)){this.imageObj.attr("src",this.restoreProps[a].src);this.imageObj.width(this.restoreProps[a].width);this.imageObj.height(this.restoreProps[a].height);break}this._applyValuesToFields(this.imageObj.width(),this.imageObj.height())}})});
define("highlighteditables/highlighteditables-plugin",["aloha","jquery","aloha/plugin"],function(l,b,p){var m=window.GENTICS;return p.create("highlighteditables",{config:["highlight"],init:function(){var b=this,f;m.Utils.Position.addMouseMoveCallback(function(){var c,e;for(c=0;c<l.editables.length;c++)e=l.editables[c],f=b.getEditableConfig(e.obj),l.activeEditable||e.isDisabled()||"highlight"!=f||e.obj.addClass("aloha-editable-highlight")});m.Utils.Position.addMouseStopCallback(function(){b.fade()});
l.bind("aloha-editable-activated",function(c,e){b.fade()})},fade:function(){var k,f,c=function(){b(this).css("outline","")};for(k=0;k<l.editables.length;k++)f=l.editables[k].obj,f.hasClass("aloha-editable-highlight")&&f.css("outline",f.css("outlineColor")+" "+f.css("outlineStyle")+" 5px").removeClass("aloha-editable-highlight").animate({outlineWidth:"0px"},300,"swing",c)}})});define("dom-to-xhtml/dom-to-xhtml","jquery util/dom2 util/misc util/browser aloha/ephemera aloha/console".split(" "),function(l,
b,p,m,k,f){function c(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(a,d){var e=b.attrs(a),f="",g,n;if(m.ie7)for(var l in v)if(v.hasOwnProperty(l)&&a[l]){g=0;for(n=e.length;g<n;g++)if(l===e[g][0].toLowerCase()){e.splice(g,1);break}e.push([l,l])}g=0;for(n=e.length;g<n;g++){var q=e[g];l=q[0].toLowerCase();q=q[1];if(!d||!k.isAttrEphemeral(a,l,d.attrMap||{},d.attrRxs||{})){var p=v[l];if(p||""!==q)f+=" "+l+'="'+c(p?l:q).replace(/"/g,"&quot;")+'"'}}return f}function g(a){var d=
a.nodeName,b=y[d];if(null!=b)return b;var c="/"+a.nodeName;a=a.nextSibling;for(b=!1;null!=a;){if(c==a.nodeName){b=!0;break}a=a.nextSibling}return y[d]=b}function q(b,c,e,f,k){for(;null!=c;)if(1===c.nodeType&&e&&"/"+b.nodeName==c.nodeName){c=c.nextSibling;break}else 1===c.nodeType&&g(c)?c=a(c,c.nextSibling,!0,f,k):(d(c,f,k),c=c.nextSibling);return c}function a(a,d,b,c,f){var g=a.nodeName.toLowerCase();a.scopeName&&"HTML"!=a.scopeName&&-1===g.indexOf(":")&&(g=a.scopeName.toLowerCase()+":"+g);!b&&null==
d&&n[g]?f.push("<"+g+e(a,c)+"/>"):(f.push("<"+g+e(a,c)+">"),d=q(a,d,b,c,f),f.push("</"+g+">"));return d}function d(d,b,e){1===d.nodeType?a(d,d.firstChild,g(d),b,e):3===d.nodeType?e.push(c(d.nodeValue)):8===d.nodeType?e.push("\x3c!--"+d.nodeValue+"--\x3e"):f.warn("Unknown node type encountered during serialization, ignoring it: type="+d.nodeType+" name="+d.nodeName+" value="+d.nodeValue)}var n={area:!0,base:!0,basefont:!0,br:!0,col:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,link:!0,meta:!0,param:!0,
embed:!0},v={checked:!0,compact:!0,declare:!0,defer:!0,disabled:!0,ismap:!0,multiple:!0,nohref:!0,noresize:!0,noshade:!0,nowrap:!0,readonly:!0,selected:!0},y={DIV:!1,SPAN:!1,UL:!1,OL:!1,LI:!1,TABLE:!1,TR:!1,TD:!1,TH:!1,I:!1,B:!1,EM:!1,STRONG:!1,A:!1,P:!1};return{contentsToXhtml:function(a,d){var b=[];q(a,a.firstChild,!1,d,b);return b.join("")},nodeToXhtml:function(a,b){var c=[];d(a,b,c);return c.join("")}}});define("dom-to-xhtml/dom-to-xhtml-plugin",["aloha","jquery","aloha/plugin","aloha/ephemera",
"dom-to-xhtml/dom-to-xhtml"],function(l,b,p,m,k){return p.create("dom-to-xhtml",{init:function(){var f=this;l.Editable.setContentSerializer(function(c){return f.settings.editables||f.settings.config?f.settings.editables&&"dom-to-xhtml"==f.settings.editables["#"+b(c).attr("id")]?k.contentsToXhtml(c,m.ephemera()):f.settings.config&&"dom-to-xhtml"==f.settings.config&&!f.settings.editables["#"+b(c).attr("id")]?k.contentsToXhtml(c,m.ephemera()):b(c).html():k.contentsToXhtml(c)})}})});define("contenthandler/contenthandler-utils",
["jquery"],function(l){return{wrapContent:function(b){return"string"===typeof b?l("<div>"+b+"</div>"):b instanceof l?l("<div>").append(b):null},isProppedParagraph:function(b){b=l.trim(b);if(!b)return!1;b=l("<div>"+b+"</div>")[0];return b.firstChild===b.lastChild&&"p"===b.firstChild.nodeName.toLowerCase()?(b=b.firstChild.children)&&1===b.length&&"br"===b[0].nodeName.toLowerCase():!1}}});define("contenthandler/wordcontenthandler","jquery aloha aloha/contenthandlermanager contenthandler/contenthandler-utils util/dom2 util/html".split(" "),
function(l,b,p,m,k,f){function c(a){switch(a[0].nodeName.toLowerCase()){case "table":return 0===a.find("tbody,tr").length;case "tbody":return 0===a.find("tr").length;case "tr":return 0===a.find("td,th").length;default:return""===l.trim(a.text())}}function e(d){if(0===d.length||!a.test(d[0].outerHTML))return!1;d=d.find("*");var b,c;for(b=0;b<d.length;b++)if((c=d.eq(b).attr("style"))&&0<=c.toLowerCase().indexOf("mso")||(c=d.eq(b).attr("class"))&&0<=c.toLowerCase().indexOf("mso"))return!0;return!1}function g(a){a.find("p.MsoTitle").each(function(){b.Markup.transformDomObject(l(this),
"h1")});a.find("p.MsoSubtitle").each(function(){b.Markup.transformDomObject(l(this),"h2")})}var q=l,a=/mso/,d=/^#(.*)/;return p.createHandler({handleContent:function(a){var d=m.wrapContent(a);if(!d)return a;e(d)&&this.transformWordContent(d);return d.html()},isOrderedList:function(a){return"Wingdings"==a.css("fontFamily")||"Symbol"==a.css("fontFamily")?!1:a.text().match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)?!0:!1},transformListsFromWord:function(a){var d=this,b,c;
c=a.find("p.MsoListParagraphCxSpFirst,p.MsoListParagraphCxSpMiddle,p.MsoListParagraphCxSpLast,p.MsoListParagraph,p span");c.each(function(){var a=q(this),d=a.css("font-family")||"",b=a.css("mso-list")||"",c=a.attr("style")||"";a.hasClass("MsoListParagraphCxSpFirst")||a.hasClass("MsoListParagraph")?a.addClass("aloha-list-element"):0<=d.indexOf("Symbol")?a.closest("p").addClass("aloha-list-element"):0<=d.indexOf("Wingdings")?a.closest("p").addClass("aloha-list-element"):""!==b?a.closest("p").addClass("aloha-list-element"):
0<=c.indexOf("mso-list")&&a.closest("p").addClass("aloha-list-element")});a.find("p span span span").each(function(){var a=q(this),d;0===q.trim(a.text()).replace(/&nbsp;/g,"").length&&(d=q.trim(a.parent().parent().text()).replace(/&nbsp;/g,""),d.match(/^([0-9]{1,3}\.)|([0-9]{1,3}\))|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\))|(.)$/)&&(a.closest("p").addClass("aloha-list-element"),a.parent().parent().addClass("aloha-list-bullet")))});c="p.aloha-list-element";b=":not("+c+", font)";c=a.find(c);0<c.length&&c.each(function(){var a=
q(this),c,e,f,g,k,n,l,m;a.removeClass("aloha-list-element");a.find("font").each(function(){q(this).contents().unwrap()});m=[];l=parseFloat(a.css("marginLeft"));isNaN(l)&&(l=0);n=[];k=a.nextUntil(b);g=q(a.find("span.aloha-list-bullet"));0===g.length&&(g=a.find("span").eq(0));f=d.isOrderedList(g);g.remove();e=q(f?"<ol></ol>":"<ul></ul>");n.push(e);c=q("<li></li>");e.append(c);a.contents().appendTo(c);a.replaceWith(e);k.each(function(){var a=q(this),b,k;if(!a.is("font")){a.find("font").each(function(){q(this).contents().unwrap()});
b=parseFloat(a.css("marginLeft"));isNaN(b)&&(b=0);g=q(a.find("span.aloha-list-bullet"));0===g.length&&(g=a.find("span").eq(0));f=d.isOrderedList(g);g.remove();if(b>l)k=q(f?"<ol></ol>":"<ul></ul>"),e.children(":last").append(k),e=k,n.push(e),m.push(b),l=b;else if(b<l&&0<m.length){for(;0<m.length&&m[m.length-1]>b;)m.pop(),n.pop();e=n[n.length-1];l=b}c=q("<li></li>");e.append(c);a.contents().appendTo(c);a.remove()}})})},removeParagraphNumbering:function(a){a=a.find("h1,h2,h3,h4,h5,h6");0<a.length&&a.each(function(){var a=
q(this),d=a.find("span"),a=a.find("a");d.each(function(){q.trim(q(this).text()).match(/^([\.\(]?[\d\D][\.\(]?){1,4}$/)&&q(this).remove()});a.each(function(){"undefined"===typeof q(this).attr("href")&&q(this).contents().unwrap()})})},transformToc:function(a){a.find("[class*=MsoToc]").each(function(){var a=q(this),d=a.find("span"),a=a.find("a");d.each(function(){q(this).attr("style")&&-1<q(this).attr("style").search("mso-hide")&&q(this).remove();q(this).contents().unwrap()});a.each(function(){q(this).contents().unwrap()})})},
transformWordContent:function(a){this.transformToc(a);this.removeParagraphNumbering(a);this.transformListsFromWord(a);g(a);var b=a.find("*"),e,k,m,q;m=0;for(q=b.length;m<q;m++)k=b.eq(m),e=k[0].nodeName.toLowerCase(),"a"===e?(e=k.attr("href"))&&d.test(l.trim(e))&&k.contents().unwrap():"div"===e||"span"===e?k.contents().unwrap():"td"!==e&&c(k)&&k.contents().unwrap();b=a[0].childNodes;k=0;for(m=b.length;k<m;k++)b[k]&&f.isUnrenderedNode(b[k])&&a[0].removeChild(b[k])}})});define("contenthandler/genericcontenthandler",
["jquery","aloha","aloha/contenthandlermanager","contenthandler/contenthandler-utils"],function(l,b,p,m){function k(b){b.find("table").removeAttr("cellpadding").removeAttr("cellspacing").removeAttr("border").removeAttr("border-top").removeAttr("border-bottom").removeAttr("border-left").removeAttr("border-right");b.find("td").each(function(){var b;(b=l.trim(this.innerHTML))?(b=l("<div>"+b+"</div>")[0],b=b.firstChild===b.lastChild&&"p"===b.firstChild.nodeName.toLowerCase()?(b=b.firstChild.children)&&
1===b.length&&"br"===b[0].nodeName.toLowerCase():!1):b=!1;b&&(this.innerHTML="&nbsp;");b=l(">p",this);1===b.length&&b.contents().unwrap()});b.find("table,th,td,tr").removeAttr("width").removeAttr("height").removeAttr("valign");b.find("colgroup").remove()}var f=["strong","em","s","u","strike"];return p.createHandler({handleContent:function(c){var e=m.wrapContent(c);if(!e)return c;if(e.find(".aloha-block").length)return e.html();k(e);this.cleanLists(e);this.removeComments(e);this.unwrapTags(e);this.removeStyles(e);
this.removeNamespacedElements(e);c=!0;b.settings.contentHandler&&b.settings.contentHandler.handler&&b.settings.contentHandler.handler.generic&&"undefinded"!==typeof b.settings.contentHandler.handler.generic.transformFormattings&&!b.settings.contentHandler.handler.generic.transformFormattings&&(c=!1);c&&this.transformFormattings(e);return e.html()},cleanLists:function(b){b.find("ul,ol").find(">:not(li)").remove()},transformFormattings:function(c){var e=[],g;for(g=0;g<f.length;g++)b.settings.contentHandler&&
b.settings.contentHandler.allows&&b.settings.contentHandler.allows.elements&&-1!==l.inArray(f[g].toLowerCase(),b.settings.contentHandler.allows.elements)||e.push(f[g]);c.find(e.join(",")).each(function(){"STRONG"===this.nodeName?b.Markup.transformDomObject(l(this),"b"):"EM"===this.nodeName?b.Markup.transformDomObject(l(this),"i"):"S"===this.nodeName||"STRIKE"==this.nodeName?b.Markup.transformDomObject(l(this),"del"):"U"===this.nodeName&&l(this).contents().unwrap()})},transformLinks:function(b){b.find("a").each(function(){"undefined"===
typeof l(this).attr("href")&&l(this).contents().unwrap()})},removeComments:function(b){var e=this;b.contents().each(function(){8===this.nodeType?l(this).remove():e.removeComments(l(this))})},unwrapTags:function(c){c.find("span,font,div").not(".aloha-wai-lang").each(function(){"DIV"==this.nodeName?"<br>"===this.innerHTML?l(this).contents().unwrap():l(b.Markup.transformDomObject(l(this),"p").append("<br>")).contents().unwrap():l(this).contents().unwrap()})},removeStyles:function(b){var e=this;b.children("style").filter(function(){return"false"!==
this.contentEditable}).remove();b.children().filter(function(){return"false"!==this.contentEditable}).each(function(){l(this).removeAttr("style").removeClass();e.removeStyles(l(this))})},removeNamespacedElements:function(b){b.find("*").each(function(){var b=this.prefix?this.prefix:this.scopeName?this.scopeName:void 0;if(b&&"HTML"!==b||0<=this.nodeName.indexOf(":")){var b=l(this),c=b.contents();c.length?c.unwrap():b.remove()}})}})});r.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;
r.RELATIVE="__relative__";window.Sanitize=r;r.prototype.clean_node=function(l){function b(b,e){var f,k=e.length;for(f=0;f<k;f++)if(e[f]===b)return f;return-1}function p(){var b=[],e={},f,k=arguments.length,a;for(f=0;f<k;f++)if((a=arguments[f])&&a.length)for(var d=0,n=a.length;d<n;d++)e[a[d]]||(e[a[d]]=!0,b.push(a[d]));return b}function m(c){var e,f,k=this.filters.length;for(f=0;f<k;f++)if(!this.filters[f](c)){e=c.cloneNode(!0);this.current_element.appendChild(e);return}switch(c.nodeType){case 1:var a,
d,n,l,y,A;f=c;a=[];c=f;d=!1;var z;n=this.transformers.length;for(z=0;z<n;z++)if(k=this.transformers[z]({allowed_elements:this.allowed_elements,config:this.config,node:f,node_name:f.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=k)if("object"==typeof k){if(k.whitelist_nodes&&k.whitelist_nodes instanceof Array)for(l=k.whitelist_nodes.length,d=0;d<l;d++)-1==b(k.whitelist_nodes[d],this.whitelist_nodes)&&this.whitelist_nodes.push(k.whitelist_nodes[d]);d=k.whitelist?!0:
!1;k.attr_whitelist&&(a=p(a,k.attr_whitelist));c=k.node?k.node:c}else throw Error("transformer output must be an object or null");f=this.jQuery;z=f.browser.msie&&"7.0"===f.browser.version;f=c;k=f.nodeName.toLowerCase();c=this.current_element;if(this.allowed_elements[k]||d){this.current_element=this.dom.createElement(f.nodeName);c.appendChild(this.current_element);n=p(this.config.attributes[k],this.config.attributes.__ALL__,a);d=n.length;for(a=0;a<d;a++)if(e=n[a],l=f.attributes[e])y=!0,this.config.protocols[k]&&
this.config.protocols[k][e]&&(y=this.config.protocols[k][e],y=(A=l.nodeValue.toLowerCase().match(r.REGEX_PROTOCOL))?-1!=b(A[1],y):-1!=b(r.RELATIVE,y)),y&&(!z||z&&"style"!==e)&&this.current_element.setAttribute(e,l.nodeValue);if(this.config.add_attributes[k])for(e in this.config.add_attributes[k])(!z||z&&"style"!==e)&&this.current_element.setAttribute(e,this.config.add_attributes[k][e])}else if(-1!=b(f,this.whitelist_nodes)){this.current_element=f.cloneNode(!0);for(e=this.current_element.childNodes.length;0<
e;)this.current_element.removeChild(this.current_element.firstChild);c.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[k])for(e=f.childNodes,d=e.length,a=0;a<d;a++)m.call(this,e[a]);this.current_element.normalize&&this.current_element.normalize();this.current_element=c;break;case 3:e=c.cloneNode(!1);this.current_element.appendChild(e);break;case 5:e=c.cloneNode(!1);this.current_element.appendChild(e);break;case 8:this.config.allow_comments&&
(e=c.cloneNode(!1),this.current_element.appendChild(e))}}var k=this.dom.createDocumentFragment();this.current_element=k;this.whitelist_nodes=[];l=l.childNodes;var f;f=0;for(len=l.length;f<len;f++)m.call(this,l[f]);k.normalize&&k.normalize();return k};define("vendor/sanitize",function(){});define("contenthandler/sanitizecontenthandler","aloha/core jquery aloha/contenthandlermanager aloha/plugin aloha/console vendor/sanitize".split(" "),function(l,b,p,m,k){function f(e){var f=["restricted","basic",
"relaxed"],k=l.defaults.supports,k=l.settings.contentHandler.sanitize&&-1<b.inArray(l.settings.contentHandler.sanitize,f)?l.defaults.sanitize[l.settings.contentHandler.sanitize]:l.defaults.sanitize.relaxed;l.settings.contentHandler.allows&&(k=l.settings.contentHandler.allows);e&&(k=e);k.filters=[function(a){return"false"!=a.contentEditable}];c=new r(k,b)}var c;l.defaults.sanitize||(l.defaults.sanitize={});l.defaults.sanitize.restricted={elements:"b em i strong u del p span div br".split(" ")};l.defaults.sanitize.basic=
{elements:"a abbr b blockquote br cite code dd del dl dt em i li ol p pre q small strike strong sub sup u ul".split(" "),attributes:{a:["href"],blockquote:["cite"],q:["cite"],abbr:["title"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};l.defaults.sanitize.relaxed={elements:"a abbr b blockquote br caption cite code col colgroup dd del dl dt em h1 h2 h3 h4 h5 h6 i img li ol p pre q small strike strong sub sup table tbody td tfoot th thead tr u ul span hr object div".split(" "),
attributes:{a:"href title id class target data-gentics-aloha-repository data-gentics-aloha-object-id".split(" "),div:["id","class","style"],abbr:["title"],blockquote:["cite"],br:["class"],col:["span","width"],colgroup:["span","width"],img:"align alt height src title width class data-caption data-align data-width data-original-image".split(" "),ol:["start","type"],p:["class","style","id"],q:["cite"],table:["summary","width"],td:"abbr axis colSpan rowSpan colspan rowspan width".split(" "),th:"abbr axis colSpan rowSpan colspan rowspan scope width".split(" "),
ul:["type"],span:["class","style","lang","xml:lang","role"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},img:{src:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};return p.createHandler({handleContent:function(e,g,k){if(!k)return e;var a,d;if(l.settings.contentHandler&&l.settings.contentHandler.handler&&l.settings.contentHandler.handler.sanitize)if(l.settings.contentHandler.handler.sanitize&&(d=l.settings.contentHandler.handler.sanitize),
"undefined"!==typeof d["#"+k.getId()])a=d;else for(g=k.obj.attr("class").split(" "),k=0;k<g.length;k++)"undefined"!==typeof d["."+g[k]]&&(a=d["."+g[k]]);"undefined"!==typeof c&&"undefined"===typeof a||f(a);"string"===typeof e?e=b("<div>"+e+"</div>").get(0):e instanceof b&&(e=b("<div>").append(e).get(0));return b("<div>").append(c.clean_node(e)).html()}})});define("contenthandler/blockelementcontenthandler","jquery aloha/core aloha/contenthandlermanager contenthandler/contenthandler-utils util/functions util/html util/arrays".split(" "),
function(l,b,p,m,k,f,c){function e(a,d){var b=f.findNodeRight(d.lastChild,y);b&&"br"===b.nodeName.toLowerCase()&&l(b).remove()}function g(a,b){var c=l(b);c.filter(n).remove();l.browser.msie&&(c.filter("br.aloha-end-br").remove(),c.filter(d).each(e));c.children(v).each(g)}function q(a,d){var b=l(d);b.filter(n).append("\u200b");b.children(v).each(q)}function a(d,b){var c=l(b);c.filter(n).filter(":empty").append("<br/>");c.children(v).each(a)}var d=f.BLOCKLEVEL_ELEMENTS.join(),n=c.subtract(f.BLOCKLEVEL_ELEMENTS,
f.VOID_ELEMENTS),v=":not(.aloha-block)",y=k.complement(f.isIgnorableWhitespace);return p.createHandler({handleContent:function(d,b){if(!b)return d;var c=m.wrapContent(d);if(!c)return d;switch(b.command){case "initEditable":c.children(v).each(g);l.browser.msie&&7>=l.browser.version&&c.children(v).each(q);break;case "getContents":c.children(v).each(a)}return c.html()}})});define("contenthandler/contenthandler-plugin","jquery aloha/plugin aloha/contenthandlermanager contenthandler/wordcontenthandler contenthandler/genericcontenthandler contenthandler/sanitizecontenthandler contenthandler/blockelementcontenthandler".split(" "),
function(l,b,p,m,k,f,c){var e={word:m,generic:k,sanitize:f,blockelement:c};return b.create("contenthandler",{init:function(){for(var b in e)e.hasOwnProperty(b)&&p.register(b,e[b])}})});define("characterpicker/nls/i18n",{root:{"button.addcharacter.tooltip":"pick special characters"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("characterpicker/characterpicker-plugin","aloha jquery aloha/plugin ui/ui ui/button ui/floating PubSub i18n!characterpicker/nls/i18n".split(" "),function(l,
b,p,m,k,f,c,e){function g(a){a.$element.click(function(a){a.stopPropagation()});b("body").click(function(d){!a._overlayActive||d.target===a.$element[0]||b(d.target).is(".aloha-icon-characterpicker")||b(d.target).find(".aloha-icon-characterpicker").length||a.hide()})}function q(a){r.keyup(function(d){27===d.keyCode&&"table"===a.$element.css("display")&&a.hide()})}function a(a,d,b){var c=function(a){return a.replace(/\-(\w)/g,function(a,d){return d.toUpperCase()})};(a=a.currentStyle?a.currentStyle[c(b)]:
document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.style[c(b)])&&d.css(b,a)}function d(a,d){var c={13:function(b){a.hide();d(b.text())},37:function(a){var d=a.prev();d.length&&(d.addClass("focused"),a.removeClass("focused"))},38:function(a){var d=a.parent().prev();d.length&&b(d.children()[a.index()]).addClass("focused").length&&a.removeClass("focused")},39:function(a){a.next().addClass("focused").length&&a.removeClass("focused")},
40:function(a){var d=a.parent().next();d.length&&b(d.children()[a.index()]).addClass("focused").length&&a.removeClass("focused")}};r.keydown(function(d){d.stopPropagation();if(c[d.keyCode]&&"table"===a.$element.css("display"))return c[d.keyCode](a.$element.find(".focused")),!1})}function n(a,d){var c=document.createElement("textarea");c.innerHTML=d;for(var c=b.grep(c.value.split(" "),function(a){return""!==a}),e=["<tr>"],f=0,g;g=c[f];)0!==f&&0===f%15&&e.push("</tr><tr>"),e.push('<td unselectable="on">'+
g+"</td>"),f++;e.push("</tr>");a.$tbody.empty().append(e.join(""));a.$element.delegate("td","mouseover",function(){a.$element.find(".focused").removeClass("focused");b(this).addClass("focused")}).delegate("td","mouseout",function(){b(this).removeClass("focused")}).delegate("td","click",function(){a.$element.hide();a.onSelect(b(this).text())})}function v(a){a=a.offset();"fixed"===f.POSITION_STYLE&&(a.top-=t.scrollTop(),a.left-=t.scrollLeft());return a}function y(a){l.activeEditable&&(s.select(),l.execCommand("insertHTML",
!1,a),s.endContainer=s.startContainer,s.endOffset=++s.startOffset,s.select())}function A(a){var c=this;c.$element=b('<table class="aloha-character-picker-overlay" unselectable="on" role="dialog"><tbody></tbody></table>');c.$element.mousedown(function(a){return!1});c.onSelect=a;c.$tbody=c.$element.find("tbody");c.$element.appendTo(b("body"));g(c);q(c);d(c,a);l.bind("aloha-editable-deactivated",function(){c.hide()})}function z(a,d){var c=a.getEditableConfig(d.obj);if(!c)return null;var c=b.isArray(c)?
c.join(" "):c,e=u[c];e||(e=new A(y),n(e,c),u[c]=e);return e}var r=b(document),t=b(window),s,u={};A.prototype={show:function(a){this.$element.css(v(a)).css("position",f.POSITION_STYLE).show().find(".focused").removeClass("focused");this.$element.find("td").eq(0).addClass("focused");this._overlayActive=!0},hide:function(){this.$element.hide();this._overlayActive=!1}};return p.create("characterpicker",{settings:{},config:"&#38; &#34; &#162; &#8364; &#163; &#165; &#169; &#174; &#8482; &#8240; &#181; &#183; &#8226; &#8230; &#8242; &#8243; &#167; &#182; &#223; &#8249; &#8250; &#171; &#187; &#8216; &#8217; &#8220; &#8221; &#8218; &#8222; &#60; &#62; &#8804; &#8805; &#8211; &#8212; &#175; &#8254; &#164; &#166; &#168; &#161; &#191; &#710; &#732; &#176; &#8722; &#177; &#247; &#8260; &#215; &#185; &#178; &#179; &#188; &#189; &#190; &#402; &#8747; &#8721; &#8734; &#8730; &#8764; &#8773; &#8776; &#8800; &#8801; &#8712; &#8713; &#8715; &#8719; &#8743; &#8744; &#172; &#8745; &#8746; &#8706; &#8704; &#8707; &#8709; &#8711; &#8727; &#8733; &#8736; &#180; &#184; &#170; &#186; &#8224; &#8225; &#192; &#193; &#194; &#195; &#196; &#197; &#198; &#199; &#200; &#201; &#202; &#203; &#204; &#205; &#206; &#207; &#208; &#209; &#210; &#211; &#212; &#213; &#214; &#216; &#338; &#352; &#217; &#218; &#219; &#220; &#221; &#376; &#222; &#224; &#225; &#226; &#227; &#228; &#229; &#230; &#231; &#232; &#233; &#234; &#235; &#236; &#237; &#238; &#239; &#240; &#241; &#242; &#243; &#244; &#245; &#246; &#248; &#339; &#353; &#249; &#250; &#251; &#252; &#253; &#254; &#255; &#913; &#914; &#915; &#916; &#917; &#918; &#919; &#920; &#921; &#922; &#923; &#924; &#925; &#926; &#927; &#928; &#929; &#931; &#932; &#933; &#934; &#935; &#936; &#937; &#945; &#946; &#947; &#948; &#949; &#950; &#951; &#952; &#953; &#954; &#955; &#956; &#957; &#958; &#959; &#960; &#961; &#962; &#963; &#964; &#965; &#966; &#967; &#968; &#969; &#8501; &#982; &#8476; &#977; &#978; &#8472; &#8465; &#8592; &#8593; &#8594; &#8595; &#8596; &#8629; &#8656; &#8657; &#8658; &#8659; &#8660; &#8756; &#8834; &#8835; &#8836; &#8838; &#8839; &#8853; &#8855; &#8869; &#8901; &#8968; &#8969; &#8970; &#8971; &#9001; &#9002; &#9674; &#9824; &#9827; &#9829; &#9830;",
_constructor:function(){this._super("characterpicker")},init:function(){function d(a){a<l.editables.length&&(z(b,l.editables[a]),setTimeout(function(){d(a+1)},100))}var b=this;l.settings.plugins&&l.settings.plugins.characterpicker&&(b.settings=l.settings.plugins.characterpicker);var f=m.adopt("characterPicker",k,{tooltip:e.t("button.addcharacter.tooltip"),icon:"aloha-icon-characterpicker",scope:"Aloha.continuoustext",click:function(){if(b.overlay){s=l.Selection.rangeObject;var d=s.startContainer.parentNode,
c=b.overlay.$element;a(d,c,"font-family");a(d,c,"font-weight");a(d,c,"font-style");b.overlay.show(this.element)}}});setTimeout(function(){d(0)},100);l.bind("aloha-editable-activated",function(a,d){b.overlay=z(b,d.editable);b.overlay?f.show():f.hide()});c.sub("aloha.floating.changed",function(a){b.overlay&&b.overlay.$element.css(v(f.element))})}})});define("commands/inserthtml","aloha/core jquery aloha/command aloha/selection util/dom aloha/contenthandlermanager aloha/console".split(" "),function(l,
b,p,m,k,f,c){p.register("inserthtml",{action:function(e,g){function m(d){var c=b(d);if(!k.insertIntoDOM(c,g,a,!1))for(c=c.contents(),(k.isBlockLevelElement(d)||k.isListElement(d))&&m(b("<br/>").get(0)),n=c.length-1;0<=n;--n)m(c[n])}var a=b(k.getEditingHostOf(g.startContainer)),d=g.commonAncestorContainer,n,v=[];e=f.handleContent(e,{contenthandler:l.settings.contentHandler.insertHtml});if("string"===typeof e)e=b("<div>"+e+"</div>");else if(e instanceof b)e=b("<div>").append(e);else throw"INVALID_VALUE_ERR";
v=e.contents();k.removeRange(g);for(n=v.length-1;0<=n;--n)m(v[n]);0<v.length?g=k.setCursorAfter(v.get(v.length-1)):g.select();k.doCleanup({merge:!0,removeempty:!0},g,d);try{g.select()}catch(p){c.warn("Error:",p)}}})});define("commands/commands-plugin",["aloha/command","./inserthtml"],function(l,b){});define("block/block-utils",["util/dom","util/dom2","util/html"],function(l,b,p){function m(b){return"SPAN"===b.nodeName&&(0===b.childNodes.length||"&nbsp;"===b.innerHTML)}function k(){var b=document.createElement("span");
b.appendChild(document.createTextNode("\u00a0"));return b}function f(c){return(p.isBlock(c)||b.isTextNode(c))&&!p.isUnrenderedNode(c)}function c(c){return b.forward(c.lastChild||c)}function e(b){return b.hasClass("aloha-table-wrapper")}return{pad:function(e){b.findBackward(b.backward(e[0]),f,function(b){return p.isBlock(b)||l.isEditingHost(b)})||e.before(k());b.findForward(c(e[0]),f,function(b){return p.isBlock(b)||l.isEditingHost(b)||b.previousSibling&&l.isEditingHost(b.previousSibling)})||e.after(k())},
unpad:function(b){var c=b[0].previousSibling;b=b[0].nextSibling;c&&m(c)&&c.parentNode.removeChild(c);b&&m(b)&&b.parentNode.removeChild(b)},isDragdropEnabledForElement:function(b){b=b.closest(".aloha-editable");return b.length?!!b.data("block-dragdrop"):!0},isTable:e,getEditableByBlock:function(b){return b.parents(".aloha-editable").filter(":first")},getTableByBlock:function(b){return e(b)?b.find("table").filter(":first"):null}}});define("block/blockmanager","aloha jquery ui/scopes aloha/observable aloha/registry util/class util/strings util/maps block/block-utils table/table-plugin".split(" "),
function(l,b,p,m,k,f,c,e,g,q){var a=window.GENTICS,d=new (f.extend(m,{defaults:{"aloha-block-type":"DefaultBlock"},blockTypes:null,blocks:null,_highlightedBlocks:null,_activeBlock:null,_dragdropEnabled:!0,_constructor:function(){p.createScope("Aloha.Block");this.blockTypes=new k;this.blocks=new k;this._highlightedBlocks={}},registerEventHandlers:function(){var a=this;this._registerEventHandlersForDeactivatingAlohaBlock();this._registerEventHandlersForDeterminingCurrentlyActiveBlock();this._registerEventHandlersForBlockDeletion();
this._registerEventHandlersForCutCopyPaste();this._registerEventHandlersForEditableActivated();l.bind("aloha-selection-changed",function(d,c,e){c&&0<b(c.getCommonAncestorContainer()).parents(".aloha-block").length||a._deactivateHighlightedBlocks()})},_registerEventHandlersForDeactivatingAlohaBlock:function(){var a=this;b(document).bind("click",function(d){e.isEmpty(a._highlightedBlocks)||0<b(d.target).closest(".aloha-ui,.aloha-block-do-not-deactivate,.aloha-block").length||a._deactivateHighlightedBlocks()})},
_registerEventHandlersForDeterminingCurrentlyActiveBlock:function(){var a=this;this.bind("block-selection-change",function(d){a._activeBlock=0<d.length?d[0]:null})},_registerEventHandlersForBlockDeletion:function(){var a=this;l.bind("aloha-command-will-execute",function(d,c){var e=c.commandId,f=l.getSelection(),g=f.getRangeCount(),f=f.getRangeAt(0),k=f.endContainer,m=f.startContainer,k=0===g||1===g&&k===m&&k===b("body")[0]||1===g&&k===m&&f.startOffset+1===f.endOffset;if(a._activeBlock&&("delete"===
e||"forwarddelete"===e)&&k)c.preventDefault=!0,a._activeBlock.destroy();else if(!a._activeBlock&&("delete"===e||"forwarddelete"===e)&&1===g&&!1===f.collapsed){var q;q=function(a){for(var d,c=0,e=a.length;c<e;c++)if(d=a[c],1===d.domobj.nodeType){var f=b(d.domobj);"full"===d.selection&&f.is(".aloha-block")?f.remove():q(d.children)}};q(l.Selection.getSelectionTree())}});b(window.document).keydown(function(d){if(0<b(d.target).closest(".aloha-ui").length)return!0;if(a._activeBlock&&(46===d.which||8===
d.which)&&!1===a._activeBlock._isInsideNestedEditable&&(b.browser.msie&&8>=parseInt(b.browser.version,10)&&a._activeBlock.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")||a._activeBlock.shouldDestroy()))return a._activeBlock.destroy(),d.preventDefault(),!1})},_registerEventHandlersForCutCopyPaste:function(){var d=this,c=!1,e=!1,f=null;b(window.document).keydown(function(f){l.activeEditable&&d._activeBlock&&b.contains(d._activeBlock.$element.get(0),l.activeEditable.obj.get(0))||
(d._activeBlock&&(f.ctrlKey||f.metaKey)&&67===f.which&&(c=!0,d._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),a.Utils.Dom.selectDomNode(d._activeBlock.$element[0])),d._activeBlock&&(f.ctrlKey||f.metaKey)&&88===f.which&&(e=!0,d._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),a.Utils.Dom.selectDomNode(d._activeBlock.$element[0])))});b(window.document).keyup(function(a){e||!c||67!==a.which&&18!==a.which&&91!==a.which||(c=!1,d._activeBlock.$element.removeAttr("data-aloha-block-copy-only-block"),
f&&(f=null));!e||67!==a.which&&18!==a.which&&88!==a.which||(e=!1)})},_registerEventHandlersForEditableActivated:function(){var a=this;l.bind("aloha-editable-activated",function(d,b){if(b.editable){var c=a.getBlock(b.editable.obj.closest(".aloha-block"));c&&c.activate()}})},initializeBlockLevelDragDrop:function(){var a=this;b.each(l.editables,function(d,b){b.obj.data("block-dragdrop",a._dragdropEnabled)});l.bind("aloha-editable-created",function(d,b){b.obj.data("block-dragdrop",a._dragdropEnabled)})},
setDragDropState:function(a){this._dragdropEnabled=a},getDragDropState:function(){return this._dragdropEnabled},registerBlockType:function(a,d){p.createScope("Aloha.Block."+a,"Aloha.Block");this.blockTypes.register(a,d)},_blockify:function(a,d){var c=b(a),e=l.require("block/block-plugin"),f=c[0].tagName.toLowerCase();-1===b.inArray(f,e.settings.rootTags)?l.Log.error("block/blockmanager","Blocks can only be created from ["+e.settings.rootTags.join(", ")+"] element. You passed "+f+"."):(e=this.getConfig(c,
d),this.blockTypes.has(e["aloha-block-type"])?(c=new (this.blockTypes.get(e["aloha-block-type"]))(c,e),c.$element.addClass("aloha-block-"+e["aloha-block-type"]),this.blocks.register(c.getId(),c)):l.Log.error("block/blockmanager","Block Type "+e["aloha-block-type"]+" not found!"))},_unblockify:function(a){(a=this.getBlock(a))&&a.unblock()},getConfig:function(a,d){var e={},f=null,g=null;if(0<a.length){g=b(a[0].cloneNode(!1));f=b.extend({},b.data(a[0]),g.data());g.removeData();for(var k in f)f.hasOwnProperty(k)&&
(e[c.camelCaseToDashes(k)]=f[k])}return b.extend({},this.defaults,d,e)},getBlock:function(a){"object"===typeof a&&(a=b(a),a.hasClass("aloha-block-inner")&&(a=a.parent()),a=a.attr("id"));return this.blocks.get(a)},_unregisterBlock:function(a){a="object"===typeof a?a.getId():a;this.blocks.unregister(a)},_deactivateHighlightedBlocks:function(){b.each(b.extend({},this._highlightedBlocks),function(a){(a=d.getBlock(a))&&a.deactivate()})},_getHighlightedBlocks:function(){var a={};b.each(this.blocks.getEntries(),
function(d,b){b.isActive()&&(a[d]=b)});return a},_setHighlighted:function(a){this._highlightedBlocks[a.id]=!0},_setUnhighlighted:function(a){delete this._highlightedBlocks[a.id]}}));l.Block=l.Block||{};return l.Block.BlockManager=d});define("block/editormanager",["aloha/registry"],function(l){return new (l.extend({createEditor:function(b){if(!this.has(b.type))throw'Editor for type "'+b.type+'" not found.';return new (this.get(b.type))(b)}}))});define("block/sidebarattributeeditor",["jquery","block/blockmanager",
"aloha/sidebar","block/editormanager","util/class"],function(l,b,p,m,k){return new (k.extend({_sidebar:null,init:function(){this._sidebar=p.right.show();b.bind("block-selection-change",this._onBlockSelectionChange,this)},_onBlockSelectionChange:function(b){var c=this;this._sidebar&&l.each(b,function(){var b=this.getSchema(),f=this,k=[];b&&c._sidebar.addPanel({title:f.getTitle(),expanded:!0,onInit:function(){var a=l("<form />");a.submit(function(){return!1});l.each(b,function(d,b){var c=m.createEditor(b);
c.bind("change",function(a){f.attr(d,a)});f.bind("change",function(){c.setValue(f.attr(d))});a.append(c.render());c.setValue(f.attr(d));k.push(c)});this.setContent(a)},deactivate:function(){l.each(k,function(a,d){d._deactivate()});this.isActive=!1;this.effectiveElement=null}})})}}))});define("block/block","aloha jquery block/blockmanager aloha/observable ui/scopes util/class PubSub block/block-utils util/html util/functions".split(" "),function(l,b,p,m,k,f,c,e,g,q){var a=window.GENTICS;m=f.extend(m,
{title:null,id:null,$element:null,_currentlyRendering:!1,_initialized:!1,_isInsideNestedEditable:!1,_constructor:function(d,f){var k=this;this.$element=d;d.attr("id")?this.id=d.attr("id"):(this.id=a.Utils.guid(),d.attr("id",this.id));d.contentEditable(!1);d.addClass("aloha-block");if(this.isDraggable()){d.find("img").attr("draggable","false");try{d.find("a").attr("draggable","false")}catch(n){d.find("a").each(function(){this.setAttribute("draggable","false")})}}b.each(f,function(a,d){k._setAttribute(a,
d)});this._onElementClickHandler=function(a){b(a.target).closest(".aloha-block").get(0)===k.$element.get(0)&&(k._fixScrollPositionBugsInIE(),k.activate(a.target,a))};this._connectThisBlockToDomElement(d,function(){c.pub("aloha.block.initialized",{block:k})});g.isInlineFormattable(d[0])&&(0<d.closest(".aloha-editable-active").length&&e.pad(k.$element),l.bind("aloha-editable-activated",function(a,d){d.editable&&0!==d.editable.obj.find("#"+k.id).length&&e.pad(k.$element)}),l.bind("aloha-editable-deactivated",
function(a,d){d.editable&&0!==d.editable.obj.find("#"+k.id).length&&e.unpad(k.$element)}));this._initialized=!0},_onElementClickHandler:null,_preventSelectionChangedEventHandler:function(a){"dblclick"===a.type||b(a.target).is(".aloha-editable")||l.Selection.preventSelectionChanged()},_connectThisBlockToDomElement:function(a,d){var c=this,e=b(a);this._disconnectFromDomElement();this.$element=e;this.$element.bind("click",this._onElementClickHandler);this.$element.bind("mousedown",this._preventSelectionChangedEventHandler);
this.$element.bind("focus",this._preventSelectionChangedEventHandler);this.$element.bind("dblclick",this._preventSelectionChangedEventHandler);this.init(this.$element,function(){window.setTimeout(function(){c._postProcessElementIfNeeded();d&&d()},5)})},_disconnectFromDomElement:function(){this.$element&&(this.$element.unbind("click",this._onElementClickHandler),this.$element.unbind("mousedown",this._preventSelectionChangedEventHandler),this.$element.unbind("focus",this._preventSelectionChangedEventHandler),
this.$element.unbind("dblclick",this._preventSelectionChangedEventHandler))},_fixScrollPositionBugsInIE:function(){var a=b(window).scrollTop();window.setTimeout(function(){b(window).scrollTop()!==a&&b(window).scrollTop(a)},10)},init:function(a,d){d()},shouldDestroy:function(){var a=this.$element.parent().closest(".aloha-block,.aloha-editable,.aloha-block-collection");return a.hasClass("aloha-block-collection")&&"div"===this.$element[0].tagName.toLowerCase()?!0:a.hasClass("aloha-editable")},destroy:function(d){if(this.shouldDestroy()||
!0===d){var b=this,c=new a.Utils.RangeObject;c.startContainer=c.endContainer=this.$element.parent()[0];c.startOffset=c.endOffset=a.Utils.Dom.getIndexInParent(this.$element[0]);p.trigger("block-delete",this);this.free();var e="span"===this.$element[0].tagName.toLowerCase();this.$element.fadeOut("fast",function(){b.$element.remove();p.trigger("block-selection-change",[]);window.setTimeout(function(){e&&c.select()},5)})}},unblock:function(){this.deactivate();this._disconnectFromDomElement();this.$element.removeClass("aloha-block");
this.$element.children(".aloha-block-handle").remove();this.free()},free:function(){p._unregisterBlock(this);this.unbindAll()},getId:function(){return this.id},getSchema:function(){return null},getTitle:function(){return this.title},isDraggable:function(){return"DIV"===this.$element[0].nodeName&&this.$element.parents(".aloha-editable,.aloha-block:not(.aloha-table-wrapper),.aloha-block-collection").first().hasClass("aloha-block-collection")?!0:this.$element.parents(".aloha-block:not(.aloha-table-wrapper),.aloha-editable").first().hasClass("aloha-editable")},
activate:function(a,d){var c=[];b.each(p._getHighlightedBlocks(),function(){this.deactivate()});"true"!==this.$element.attr("data-block-skip-scope")&&k.setScope("Aloha.Block."+this.attr("aloha-block-type"));this.$element.addClass("aloha-block-active");this._highlight();c.push(this);this.$element.parents(".aloha-block").each(function(){var a=p.getBlock(this);a&&(a._highlight(),c.push(a))});b(a).closest(".aloha-editable,.aloha-block,.aloha-table-cell-editable,.aloha-table-cell_active").first().hasClass("aloha-block")?
(this._isInsideNestedEditable=!1,l.getSelection().removeAllRanges()):(this._isInsideNestedEditable=!0,d&&l.Selection.updateSelection(d));p.trigger("block-activate",c);p.trigger("block-selection-change",c)},deactivate:function(){var a=this,d=[this];this._unhighlight();this.$element.parents(".aloha-block").each(function(){d.push(this);a._unhighlight()});this.$element.removeClass("aloha-block-active");p.trigger("block-deactivate",d);p.trigger("block-selection-change",[])},isActive:function(){return this.$element.hasClass("aloha-block-active")},
_highlight:function(){this.$element.addClass("aloha-block-highlighted");p._setHighlighted(this)},_unhighlight:function(){this.$element.removeClass("aloha-block-highlighted");p._setUnhighlighted(this)},_update:function(){var a=this;!this._currentlyRendering&&this._initialized&&(this._currentlyRendering=!0,this.update(this.$element,function(){a._postProcessElementIfNeeded()}),this._currentlyRendering=!1)},update:function(a,d){d()},_postProcessElementIfNeeded:function(){this.createEditablesIfNeeded();
this._checkThatNestedBlocksAreStillConsistent();this._makeNestedBlockCollectionsSortable();this.renderBlockHandlesIfNeeded();if(this.isDraggable()){var a=this.$element[0].nodeName;"SPAN"===a?(this._setupDragDropForInlineElements(),this._disableUglyInternetExplorerDragHandles()):"DIV"===a&&(this._setupDragDropForBlockElements(),this._disableUglyInternetExplorerDragHandles())}this._hideDragHandlesIfDragDropDisabled();this._attachDropzoneHighlightEvents()},_checkThatNestedBlocksAreStillConsistent:function(){this.$element.find(".aloha-block").each(function(){var a=
p.getBlock(this);a&&a.$element[0]!==this&&a._connectThisBlockToDomElement(this)})},_makeNestedBlockCollectionsSortable:function(){var a=this;this.$element.find(".aloha-block-collection").each(function(){var d=b(this);d.closest(".aloha-block").get(0)===a.$element.get(0)&&p.createBlockLevelSortableForEditableOrBlockCollection(d)})},_disableUglyInternetExplorerDragHandles:function(){if(b.browser.msie){var a=this.$element.get(0);a.onresizestart=q.returnFalse;a.oncontrolselect=q.returnFalse;a.onmovestart=
q.returnFalse}},_hideDragHandlesIfDragDropDisabled:function(){this._dd_isDragdropEnabled()||this.$element.find(".aloha-block-draghandle").each(function(){var a=b(this);e.isDragdropEnabledForElement(a)||a.removeClass("aloha-block-draghandle")})},_attachDropzoneHighlightEvents:function(){var a=this;this.$element.delegate(".aloha-block-draghandle","mousedown",function(){var d=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];b.each(d,function(a,d){var c=b(d);b(c).each(function(){b(this).data("block-dragdrop")&&
b(this).addClass("aloha-block-dropzone")})});b(document).one("mouseup.aloha-block-dropzone",function(){var d=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];b.each(d,function(a,d){b(d).removeClass("aloha-block-dropzone")})})})},_setupDragDropForInlineElements:function(){var a=this,d=null,c=!1,e=null,f=null,g=function(){if(d){var g=b(d);g.is(".aloha-block-dropInlineElementIntoEmptyBlock")?(g.children().remove(),g.append(e)):g.is(".aloha-block-droppable-right")?(g.html(g.html()+
" "),g.after(e)):(0<g.prev("[data-i]").length&&g.prev("[data-i]").html(g.prev("[data-i]").html()+" "),g.html(" "+g.html()),g.before(e));e.removeClass("ui-draggable").css({left:0,top:0});a._fixScrollPositionBugsInIE()}b(".aloha-block-dropInlineElementIntoEmptyBlock").removeClass("aloha-block-dropInlineElementIntoEmptyBlock");f.droppable("destroy");f=null;c=!0},k=[];this.$element.draggable({handle:".aloha-block-draghandle",scope:"aloha-block-inlinedragdrop",disabled:!this._dd_isDragdropEnabled(),revert:function(){return null===
d||!c},revertDuration:250,stop:function(){b.browser.msie&&7===parseInt(b.browser.version,10)&&g();b.each(k,function(){a._dd_traverseDomTreeAndRemoveSpans(this)});e=null;k=[]},start:function(){c=!1;k=[];b(".aloha-editable").children("p:empty").html("&nbsp;");var n={tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(c,f){-1===b.inArray(this,k)&&k.push(this);var g=1===b(this).contents().length&&1===b(this).children("br").length;e=f.draggable;b(this).is(":empty")||g||"&nbsp;"===
b(this).html()?(b(this).addClass("aloha-block-dropInlineElementIntoEmptyBlock"),d=this):(a._dd_traverseDomTreeAndWrapCharactersWithSpans(this),b("span[data-i]",this).droppable({tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(){d&&b(d).removeClass("aloha-block-droppable");d=this;b(this).addClass("aloha-block-droppable")},out:function(){b(this).removeClass("aloha-block-droppable");d===this&&(d=null)}}),b.ui.ddmanager.prepareOffsets(f.draggable.data("draggable"),c))},
out:function(){b(this).removeClass("aloha-block-dropInlineElementIntoEmptyBlock")},drop:function(){b.browser.msie&&7===parseInt(b.browser.version,10)||g()}};f=b(".aloha-editable.aloha-block-dropzone").children(":not(.aloha-block)");f.droppable(n);b(".aloha-table-cell-editable").droppable(n)}})},_dd_traverseDomTreeAndWrapCharactersWithSpans:function(a){for(var d,b=0,c=a.childNodes.length;b<c;b++)if(d=a.childNodes[b],1===d.nodeType)if(!~d.className.indexOf("aloha-block")&&void 0===d.attributes["data-i"])this._dd_traverseDomTreeAndWrapCharactersWithSpans(d);
else{if(d.attributes["data-i"])break}else 3===d.nodeType&&(d=this._dd_insertSpans(d),b+=d,c+=d)},_dd_splitText:function(a){a=a.split(/(?=\b)/);for(var d=[],b=!1,c=0,e=a.length;c<e;c++)/[^\t\n\r ]/.test(a[c])?b?(d.push(" "+a[c]),b=!1):d.push(a[c]):b=!0;b&&(d[d.length-1]+=" ");return d},_dd_insertSpans:function(a){var d=a.nodeValue;if(!/[^\t\n\r ]/.test(d))return 0;for(var c=document.createDocumentFragment(),d=this._dd_splitText(d),e=d.length,f,g,k,n=0,l=0;l<e;l++)g=d[l],0!==g.length&&(k=Math.floor(g.length/
2),f=parseInt(b.browser.version,10),!b.browser.msie||7!==f&&8!==f||(k=0),0<k&&(f=document.createElement("span"),f.appendChild(document.createTextNode(g.substr(0,k))),f.setAttribute("data-i",l),c.appendChild(f),n++),f=document.createElement("span"),g=g.substr(k),f.appendChild(document.createTextNode(g)),f.setAttribute("data-i",l),f.setAttribute("class","aloha-block-droppable-right"),c.appendChild(f),n++);a.parentNode.replaceChild(c,a);return n-1},_dd_traverseDomTreeAndRemoveSpans:function(a){var d=
[],b;b=function(a){for(var c=!1,e,f,g,k=0,n=a.childNodes.length;k<n;k++)g=a.childNodes[k],1===g.nodeType&&(void 0!==g.attributes["data-i"]?(c||(c=!0,e="",f=void 0),c&&(e+=g.firstChild.nodeValue,f&&d.push(f),f=g)):(c&&(c=!1,f.parentNode.replaceChild(document.createTextNode(e),f)),~g.className.indexOf("aloha-block")||b(g)));c&&f.parentNode.replaceChild(document.createTextNode(e),f)};b(a);a=0;for(var c=d.length;a<c;a++)d[a].parentNode.removeChild(d[a])},_dd_isDragdropEnabled:function(){return e.isDragdropEnabledForElement(this.$element.parent())},
_setupDragDropForBlockElements:function(){this.$element.find(".aloha-block-draghandle").addClass("aloha-block-draghandle-blocklevel")},createEditablesIfNeeded:function(){this.$element.find(".aloha-editable").aloha()},renderBlockHandlesIfNeeded:function(){this.isDraggable()&&0===this.$element.children(".aloha-block-draghandle").length&&this.$element.prepend('<span class="aloha-block-handle aloha-block-draghandle aloha-cleanme"></span>')},attr:function(a,d,c){var e=this,f=!1;if(2<=arguments.length){if("aloha-block-"===
a.substr(0,12)){l.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")");return}this._getAttribute(a)!==d&&(f=!0);this._setAttribute(a,d)}else if("object"===typeof a)b.each(a,function(a,d){"aloha-block-"===a.substr(0,12)?l.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")"):(e._getAttribute(a)!==d&&(f=
!0),e._setAttribute(a,d))});else return"string"===typeof a?this._getAttribute(a):this._getAttributes();f&&!c&&(this._update(),this.trigger("change"),l.activeEditable&&l.activeEditable.smartContentChange({type:"block-change"}));return null},_setAttribute:function(a,d){this.$element.attr("data-"+a.toLowerCase(),d)},_getAttribute:function(a){return this.$element.attr("data-"+a.toLowerCase())},_getAttributes:function(){var a={};b.each(this.$element[0].attributes,function(d,b){"data-"===b.name.substr(0,
5)&&(a[b.name.substr(5).toLowerCase()]=b.value)});return a}});f=m.extend({update:function(a,d){d()}});var d=m.extend({title:"Debugging",init:function(a,d){this.update(a,d)},update:function(a,d){a.css({display:"block"});var c='<table class="debug-block">';b.each(this.attr(),function(a,d){c+="<tr><th>"+a+"</th><td>"+d+"</td></tr>"});c+="</table>";a.html(c);d()}}),n=m.extend({title:"EmptyBlock",init:function(){},activate:function(){},deactivate:function(){},renderBlockHandlesIfNeeded:function(){},_preventSelectionChangedEventHandler:function(){}});
return{AbstractBlock:m,DefaultBlock:f,DebugBlock:d,EmptyBlock:n}});define("block/blockcontenthandler",["jquery","aloha/contenthandlermanager","block/blockmanager"],function(l,b,p){return b.createHandler({handleContent:function(b){"string"===typeof b?b=l("<div>"+b+"</div>"):b instanceof l&&(b=l("<div>").append(b));0<b.find('.aloha-block[data-aloha-block-copy-only-block="true"]').length&&(b.find(".aloha-block:not([id])").remove(),b.find(".aloha-block + span:empty").remove(),b.find("div:empty").remove(),
b.find("br.Apple-interchange-newline").remove(),b.find(".aloha-block").prev("br").remove(),b.find("div > br:only-child").parent().remove());b.find(".aloha-block").each(function(){var b=l(this),f={},c={};l.each(b[0].attributes,function(b,a){"id"!==a.nodeName&&(a.nodeName.match(/^data-/)?c[a.nodeName.substr(5)]=a.nodeValue:f[a.nodeName]=a.nodeValue)});var e=GENTICS.Utils.guid(),g=l("<"+this.tagName+"/>").attr(f).attr("id",e).removeClass("aloha-block-active").removeClass("aloha-block").html(b.html());
b.replaceWith(g);window.setTimeout(function(){p._blockify(l("#"+e),c)},50)});return b.html()}})});define("block/editor",["jquery","aloha/observable","util/class"],function(l,b,p){b=p.extend(b,{schema:null,_constructor:function(b){this.schema=b},render:function(){},getValue:function(){},setValue:function(b){},destroy:function(){},_deactivate:function(){this.trigger("change",this.getValue());this.destroy()}});p=b.extend({formInputElementDefinition:null,_$formInputElement:null,render:function(){var b=
l('<div class="aloha-block-editor" />'),a=GENTICS.Utils.guid();b.append(this.renderLabel().attr("id",a));b.append(this.renderFormElement().attr("id",a));return b},renderLabel:function(){var b=l("<label />");b.html(this.schema.label);return b},renderFormElement:function(){var b=this;this._$formInputElement=l(this.formInputElementDefinition);this.afterRenderFormElement(this._$formInputElement);this._$formInputElement.change(function(){b.trigger("change",b.getValue())});return this._$formInputElement},
afterRenderFormElement:function(b){},getValue:function(){return this._$formInputElement.val()},setValue:function(b){this._$formInputElement.val(b)},destroy:function(){this._$formInputElement.remove()}});var m=p.extend({formInputElementDefinition:'<input type="text" />'}),k=p.extend({formInputElementDefinition:'<input type="range" />',afterRenderFormElement:function(b){this.schema.range&&(this.schema.range.min&&b.attr("min",this.schema.range.min),this.schema.range.max&&b.attr("max",this.schema.range.max),
this.schema.range.step&&b.attr("step",this.schema.range.step))}}),f=p.extend({formInputElementDefinition:'<input type="url" />'}),c=p.extend({formInputElementDefinition:'<input type="email" />'}),e=p.extend({formInputElementDefinition:"<select />",afterRenderFormElement:function(b){l.each(this.schema.values,function(){b.append(l("<option />").attr("value",this.key).html(this.label))})}}),g=p.extend({formInputElementDefinition:"<button />",afterRenderFormElement:function(b){var a=this;b.html(this.schema.buttonLabel);
b.click(function(){a.schema.callback()})}});return{AbstractEditor:b,AbstractFormElementEditor:p,StringEditor:m,NumberEditor:k,UrlEditor:f,EmailEditor:c,SelectEditor:e,ButtonEditor:g}});define("block/dragbehavior",["aloha/jquery","aloha","PubSub","aloha/copypaste"],function(l,b,p,m){function k(a,d){return!a||!(a.is(".ui-draggable-dragging")||0<a.closest(d).length)}function f(a){this.blockObject=a;this.$element=a.$element;this.insertBeforeOrAfterMode=!1;this.setDraggable()}var c="TABLE TR HR TBODY UL OL DL B STRONG A EM I PRE CODE SUP SUB".split(" "),
e=".aloha-block .aloha-block-handle .aloha-table-selectrow p span h1 h2 h3 h4 h5 h6 br".split(" "),g=[".aloha-table-selectcolumn",".aloha-ui",".ui-draggable-dragging"];p.sub("aloha.block.initialized",function(a){f.follow(a.block)});f.follow=function(a){0<l(">.aloha-block-draghandle",a.$element).length&&new f(a)};var q=function(){var a=null,d=0,b=0;return l.browser.msie?{save:function(){d=window.scrollX||document.documentElement.scrollLeft;b=window.scrollY||document.documentElement.scrollTop;a=m.getRange()},
restore:function(){var c=m.getEditableAt(a);c&&c.obj.focus();m.setSelectionAt(a);window.scrollTo(d,b)}}:{save:function(){},restore:function(){}}}();f.prototype.setDraggable=function(){var a=this,d=l(">.aloha-block-draghandle",this.$element),b=this.$element.get(0);b.onselectstart=function(){window.event.cancelBubble=!0};b.ondragstart=function(a){a.stopPropagation()};d.on("mousedown",function(){q.save()}).on("mouseup",function(){a._getHiglightElement().hide();a.stopListenMouseOver()});this.$element.draggable({handle:">.aloha-block-draghandle",
helper:"clone",cursorAt:{left:-10,top:-10},start:function(d,b){b.helper.css("zIndex",1E5);a.listenMouseOver();d.stopImmediatePropagation()},drag:function(a){a.stopImmediatePropagation()},stop:function(d,b){a._getHiglightElement().hide();a.stopListenMouseOver();a.onDragStop();b.helper.remove();q.restore();return!0}})};f.prototype._getEditableChilds=function(){var a,d,e=[];for(a=0;a<b.editables.length;a++)d=b.editables[a],e=e.concat(l("*:not("+c.join(",")+")",d.obj).toArray());return l(e)};f.prototype.listenMouseOver=
function(){var a=this;this._getEditableChilds().bind("mouseover.blockbehavior",function(d){return a.onMouseover(this,d)})};f.prototype.stopListenMouseOver=function(){this._getEditableChilds().unbind(".blockbehavior")};f.prototype.onMouseover=function(a,d){this.disableInsertBeforeOrAfter(this.$overElement);this.$overElement=l(a);if(this._isAllowedOverElement(a))return this.highlightElement(a),d.stopImmediatePropagation(),!1;this.enableInsertBeforeOrAfter(a);return!0};f.prototype.highlightElement=function(a){"DIV"===
a.nodeName&&"TD"===a.parentNode.nodeName&&a.parentNode.firstChild===a&&a.parentNode.lastChild===a&&(a=a.parentNode);a=l(a);this._getHiglightElement().show().css("zIndex",parseInt(a.zIndex(),10)+1).offset(a.offset()).width(a.outerWidth()).height(a.outerHeight())};f.prototype.enableInsertBeforeOrAfter=function(a){a=l(a);var d=this,b=a.offset().top,c=a.outerHeight()/2;k(a,this.$element)&&a.bind("mousemove.brIBOA",function(a){d.insertBeforeOrAfterMode=a.pageY-b>=c?"AFTER":"BEFORE";d.highlightEdge(this)})};
f.prototype.disableInsertBeforeOrAfter=function(a){this.insertBeforeOrAfterMode=!1;a&&a.unbind(".brIBOA")};f.prototype.highlightEdge=function(a){a=l(a);var d=this._getHiglightElement().show(),b;"BEFORE"===this.insertBeforeOrAfterMode?d.css("zIndex",parseInt(a.zIndex(),10)+1).offset(a.offset()).width(a.outerWidth()).height(10):(b=a.offset(),b.top=b.top+a.outerHeight()-10,d.css("zIndex",parseInt(a.zIndex(),10)+1).offset(b).width(a.outerWidth()).height(10))};f.prototype._isAllowedOverElement=function(a){if(0>
l.inArray(a.nodeName,c)){var d;d=a;if(1===d.nodeType){if("inherit"===d.contentEditable)for(;"inherit"===d.contentEditable;)d=d.parentNode;d="true"===d.contentEditable}else d=!1;if(!d)return!1;a=l(a);return 0<a.parents(g.join(",")).length||a.is(e.join(","))?!1:!0}return!1};f.prototype.onDragStop=function(){k(this.$overElement,this.$element)&&(this.$overElement&&!this._isAllowedOverElement(this.$overElement[0])&&this.enableInsertBeforeOrAfter(this.$overElement[0]),!1!==this.insertBeforeOrAfterMode?
"BEFORE"===this.insertBeforeOrAfterMode?this.$overElement.before(this.$element):this.$overElement.after(this.$element):this.$element.appendTo(this.$overElement));this.disableInsertBeforeOrAfter(this.$overElement)};f.prototype._getHiglightElement=function(){void 0===this.$hElm&&(0===l("#aloha-highlight-element").length?this.$hElm=l("<div>").attr("id","aloha-highlight-element").appendTo("body").css({position:"absolute",opacity:0.5,background:"blue"}).hide():this.$hElm=l("#aloha-highlight-element"));
return this.$hElm}});define("block/nls/i18n",{root:{"button.toggledragdrop.tooltip":"Toggle Drag & Drop"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("block/block-plugin","aloha aloha/plugin jquery aloha/contenthandlermanager block/blockmanager block/sidebarattributeeditor block/block block/editormanager block/blockcontenthandler block/editor block/dragbehavior ui/ui ui/toggleButton i18n!block/nls/i18n i18n!aloha/nls/i18n jqueryui".split(" "),function(l,b,p,m,k,f,c,e,g,q,a,d,n,
v,y){var A=["div","span"];b=b.create("block",{config:[],settings:{},init:function(){var a=this;this.settings.rootTags||(this.settings.rootTags=A);k.registerBlockType("DebugBlock",c.DebugBlock);k.registerBlockType("DefaultBlock",c.DefaultBlock);k.registerBlockType("EmptyBlock",c.EmptyBlock);e.register("string",q.StringEditor);e.register("number",q.NumberEditor);e.register("url",q.UrlEditor);e.register("email",q.EmailEditor);e.register("select",q.SelectEditor);e.register("button",q.ButtonEditor);m.register("block",
g);k.setDragDropState(a.isDragDropEnabled());k.registerEventHandlers();k.initializeBlockLevelDragDrop();l.bind("aloha-plugins-loaded",function(){a._createBlocks();!1!==a.settings.sidebarAttributeEditor&&f.init()});this.createButtons();l.bind("aloha-editable-created",function(d,b){a.setDropzones(b.obj)});l.bind("aloha-editable-activated",function(d,b){a.applyButtonConfig(b.editable)})},applyButtonConfig:function(a){this._isDragdropToggleEnabled(a)?(this._toggleDragDropButton.show(),this._toggleDragDropButton.setState(this._getDragdropState(a))):
this._toggleDragDropButton.hide()},_isDragdropToggleEnabled:function(a){a=this.getEditableConfig(a.obj);return(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal||"toggleDragdrop"===a[0]||!0==a.toggleDragdrop||"true"==a.toggleDragdrop||1==a.toggleDragdrop||"1"==a.toggleDragdrop)&&this.isDragDropEnabled()},_getDragdropState:function(a){return this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal?k.getDragDropState():a.obj.data("block-dragdrop")},
_toggleDragdropState:function(a){if(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal){var d=!k.getDragDropState();k.setDragDropState(d);for(var b=0;b<l.editables.length;b++)a=l.editables[b],this._setDragDropStateForEditable(a.obj,d)}else d=!a.obj.data("block-dragdrop"),this._setDragDropStateForEditable(a.obj,d)},createButtons:function(){var a=this;this._toggleDragDropButton=d.adopt("toggleDragDrop",n,{tooltip:v.t("button.toggledragdrop.tooltip"),icon:"aloha-icon aloha-icon-toggledragdrop",
scope:"Aloha.continuoustext",click:function(){a._toggleDragdropState(l.activeEditable)}})},setDropzones:function(a){var d=this.getEditableConfig(a);(d=d&&d.dropzones||this.settings.dropzones)?a.data("block-dropzones",d):a.data("block-dropzones",[".aloha-editable"])},isDragDropEnabled:function(){return this.settings&&"undefined"!==typeof this.settings.dragdrop?!0===this.settings.dragdrop||"true"===this.settings.dragdrop||1===this.settings.dragdrop||"1"===this.settings.dragdrop:!0},_createBlocks:function(){this.settings.defaults||
(this.settings.defaults={});p.each(this.settings.defaults,function(a,d){p(a).alohaBlock(d)})},_setDragDropStateForEditable:function(a,d){a.data("block-dragdrop",d);a.hasClass("ui-sortable")&&a.sortable("option","disabled",!d);a.find(".aloha-block.ui-draggable").each(function(){p(this).draggable("option","disabled",!d)});a.find(".aloha-block-handle").each(function(){d?p(this).addClass("aloha-block-draghandle"):p(this).removeClass("aloha-block-draghandle")})}});p.fn.alohaBlock=function(a){a=a||{};p(this).each(function(d,
b){k._blockify(b,a)});return p(this)};p.fn.mahaloBlock=function(){p(this).each(function(a,d){k._unblockify(d)})};return b});define("align/nls/i18n",{root:{"button.alignright.tooltip":"Align to the right","button.alignleft.tooltip":"Align to the left","button.aligncenter.tooltip":"Center","button.alignjustify.tooltip":"Justify","button.aligntop.tooltip":"Align to the top","button.alignmiddle.tooltip":"Align to the middle","button.alignbottom.tooltip":"Align to the bottom"},ca:!0,de:!0,mk:!0,"pt-br":!0,
ru:!0,uk:!0,"zh-hans":!0});define("align/align-plugin","aloha aloha/plugin util/html util/dom ui/ui ui/toggleButton i18n!align/nls/i18n i18n!aloha/nls/i18n jquery PubSub".split(" "),function(l,b,p,m,k,f,c,e,g,q){return b.create("align",{_constructor:function(){this._super("align")},config:{alignment:"right left center justify top middle bottom".split(" ")},alignment:"",verticalAlignment:"",lastAlignment:"",lastVerticalAlignment:"",init:function(){this.createButtons();var a=this;l.bind("aloha-editable-activated",
function(d,b){a.applyButtonConfig(b.editable.obj)});q.sub("aloha.selection.context-change",function(d){d=d.range;l.activeEditable&&a.buttonPressed(d)})},buttonPressed:function(a){this.horizontalButtonPressed(a);this.verticalButtonPressed(a)},horizontalButtonPressed:function(a){var d=this;this.lastAlignment=this.alignment;this.alignment="";a.findMarkup(function(){if(""!==this.style.textAlign)return d.alignment=this.style.textAlign,!0;d.alignment=g(this).css("text-align")},l.activeEditable.obj);if(this.alignment!=
this.lastAlignment)switch(this._alignRightButton.setState(!1),this._alignLeftButton.setState(!1),this._alignCenterButton.setState(!1),this._alignJustifyButton.setState(!1),this.alignment){case "right":this._alignRightButton.setState(!0);break;case "center":this._alignCenterButton.setState(!0);break;case "justify":this._alignJustifyButton.setState(!0);break;default:this._alignLeftButton.setState(!0),this.alignment="left"}},verticalButtonPressed:function(a){var d=this;this.lastVerticalAlignment=this.verticalAlignment;
this.verticalAlignment="";a.findMarkup(function(){if(""!==this.style.verticalAlign)return d.verticalAlignment=this.style.verticalAlign,!0;d.verticalAlignment=g(this).css("vertical-align")},l.activeEditable.obj);if(this.verticalAlignment!=this.lastVerticalAlignment)switch(this._alignTopButton.setState(!1),this._alignMiddleButton.setState(!1),this._alignBottomButton.setState(!1),this.verticalAlignment){case "top":this._alignTopButton.setState(!0);break;case "middle":this._alignMiddleButton.setState(!0);
break;case "bottom":this._alignBottomButton.setState(!0);break;default:this._alignTopButton.setState(!0),this.verticalAlignment="top"}},applyButtonConfig:function(a){a=this.getEditableConfig(a);a&&a.alignment&&!this.settings.alignment||(a[0]&&a[0].alignment?a=a[0]:this.settings.alignment&&(a.alignment=this.settings.alignment));"undefined"===typeof a.alignment&&(a=this.config);-1!=g.inArray("right",a.alignment)?this._alignRightButton.show(!0):this._alignRightButton.show(!1);-1!=g.inArray("left",a.alignment)?
this._alignLeftButton.show(!0):this._alignLeftButton.show(!1);-1!=g.inArray("center",a.alignment)?this._alignCenterButton.show(!0):this._alignCenterButton.show(!1);-1!=g.inArray("justify",a.alignment)?this._alignJustifyButton.show(!0):this._alignJustifyButton.show(!1);-1!=g.inArray("top",a.alignment)?this._alignTopButton.show(!0):this._alignTopButton.show(!1);-1!=g.inArray("middle",a.alignment)?this._alignMiddleButton.show(!0):this._alignMiddleButton.show(!1);-1!=g.inArray("bottom",a.alignment)?this._alignBottomButton.show(!0):
this._alignBottomButton.show(!1)},createButtons:function(){var a=this;this._alignLeftButton=k.adopt("alignLeft",f,{tooltip:c.t("button.alignleft.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-left",scope:"Aloha.continuoustext",click:function(){a.align("left")}});this._alignCenterButton=k.adopt("alignCenter",f,{tooltip:c.t("button.aligncenter.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-center",scope:"Aloha.continuoustext",click:function(){a.align("center")}});this._alignRightButton=
k.adopt("alignRight",f,{tooltip:c.t("button.alignright.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-right",scope:"Aloha.continuoustext",click:function(){a.align("right")}});this._alignJustifyButton=k.adopt("alignJustify",f,{tooltip:c.t("button.alignjustify.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-justify",scope:"Aloha.continuoustext",click:function(){a.align("justify")}});this._alignTopButton=k.adopt("alignTop",f,{tooltip:c.t("button.aligntop.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-top",
scope:"table.cell",click:function(){a.verticalAlign("top")}});this._alignMiddleButton=k.adopt("alignMiddle",f,{tooltip:c.t("button.alignmiddle.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-middle",scope:"table.cell",click:function(){a.verticalAlign("middle")}});this._alignBottomButton=k.adopt("alignBottom",f,{tooltip:c.t("button.alignbottom.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-bottom",scope:"table.cell",click:function(){a.verticalAlign("bottom")}})},verticalAlign:function(a){var d=
l.Selection.getRangeObject();this.lastVerticalAlignment=this.verticalAlignment;this.verticalAlignment=a;(a=this.getSelectedCells(d))&&this.toggleAlign(a,"vertical-align");if(this.verticalAlignment!=this.lastVerticalAlignment)switch(this.lastVerticalAlignment){case "top":this._alignTopButton.setState(!1);break;case "middle":this._alignMiddleButton.setState(!1);break;case "bottom":this._alignBottomButton.setState(!1)}d.select()},align:function(a){this.lastAlignment=this.alignment;this.alignment=a;a=
l.Selection.getRangeObject();for(var d=a.getCommonAncestorContainer();d&&!p.isBlock(d)&&!m.isEditingHost(d);)d=d.parentNode;if(m.isEditingHost(d)){var b=[];g.each(a.getSelectionTree(),function(){"none"!==this.selection&&3!==this.domobj.nodeType&&b.push(this.domobj)});this.toggleAlign(b)}else this.toggleAlign(d);if(this.alignment!==this.lastAlignment)switch(this.lastAlignment){case "right":this._alignRightButton.setState(!1);break;case "left":this._alignLeftButton.setState(!1);break;case "center":this._alignCenterButton.setState(!1);
break;case "justify":this._alignJustifyButton.setState(!1)}},getSelectedCells:function(a){var d;a=a.findMarkup(function(){g(this).is("td,th")&&(d=this);return g(this).is("table.aloha-table")},l.activeEditable.obj);a=g(a).find(".aloha-cell-selected");return a.length?a:d},toggleAlign:function(a,d){d=d||"text-align";var b="vertical-align"===d?this.verticalAlignment:this.alignment,c=!0;g(a).each(function(){if(g(this).css(d)!=b)return c=!1});g(a).each(function(){g(this).css(d)==b&&c?g(this).css(d,""):
g(this).css(d,b)})}})});define("abbr/nls/i18n",{root:{"floatingmenu.tab.abbr":"Abbreviation","button.addabbr.tooltip":"insert abbreviation","button.remabbr.tooltip":"remove abbreviation","button.abbr.tooltip":"format as abbreviation","newabbr.defaulttext":"Abbr"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("abbr/abbr-plugin","aloha jquery aloha/plugin ui/ui ui/toggleButton ui/button ui/scopes ui/port-helper-attribute-field i18n!abbr/nls/i18n i18n!aloha/nls/i18n".split(" "),function(l,
b,p,m,k,f,c,e,g,q){var a=window.GENTICS;return p.create("abbr",{config:["abbr"],init:function(){this.createButtons();this.subscribeEvents();this.bindInteractions()},createButtons:function(){var a=this;this._formatAbbrButton=m.adopt("formatAbbr",k,{tooltip:g.t("button.abbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",click:function(){a.formatAbbr()}});this._insertAbbrButton=m.adopt("insertAbbr",f,{tooltip:g.t("button.addabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",
click:function(){a.insertAbbr(!1)}});this.abbrField=e({width:320,name:"abbrText",scope:"Aloha.continuoustext"});this.remAbbrButton=m.adopt("removeAbbr",f,{tooltip:g.t("button.remabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr-rem",scope:"Aloha.continuoustext",click:function(){a.removeAbbr()}})},bindInteractions:function(){var a=this;this.abbrField.addListener("blur",function(b,c){""==this.getValue()&&a.removeAbbr()});for(var b=0;b<l.editables.length;b++)l.editables[b].obj.keydown(function(b){if(b.metaKey&&
71==b.which)return a.findAbbrMarkup()?(a.abbrField.foreground(),a.abbrField.focus()):a.insertAbbr(),b.stopPropagation(),b.preventDefault(),!1})},subscribeEvents:function(){var a=this,e={};l.bind("aloha-editable-activated",function(){if(l.activeEditable&&l.activeEditable.obj){var c=a.getEditableConfig(l.activeEditable.obj);e[l.activeEditable.getId()]=-1!==b.inArray("abbr",c)}});l.bind("aloha-editable-destroyed",function(){l.activeEditable&&l.activeEditable.obj&&delete e[l.activeEditable.getId()]});
l.bind("aloha-selection-changed",function(b,f){if(l.activeEditable)if(e[l.activeEditable.getId()]){a._formatAbbrButton.show();a._insertAbbrButton.show();var g=a.findAbbrMarkup(f);if(g){a._insertAbbrButton.hide();a._formatAbbrButton.setState(!0);a.abbrField.show();a.remAbbrButton.show();c.enterScope(a.name,"abbr");a.abbrField.setTargetObject(g,"title");for(var g=a.abbrField,k=f.findAllMarkupByTagName("ABBR",f),m=0,q=k.length;m<q;m++)g.addAdditionalTargetObject(k[m])}else a.abbrField.hide(),a.remAbbrButton.hide(),
c.leaveScope(a.name,"abbr",!0),a._formatAbbrButton.setState(!1),a.abbrField.setTargetObject(null)}else a._formatAbbrButton.hide(),a._insertAbbrButton.hide()})},findAbbrMarkup:function(a){"undefined"==typeof a&&(a=l.Selection.getRangeObject());return l.activeEditable?a.findMarkup(function(){return"abbr"==this.nodeName.toLowerCase()},l.activeEditable.obj):null},formatAbbr:function(){var a=l.Selection.getRangeObject();l.activeEditable&&(this.findAbbrMarkup(a)?this.removeAbbr():this.insertAbbr())},insertAbbr:function(d){var c=
l.Selection.getRangeObject();if(!this.findAbbrMarkup(c)){c.isCollapsed()&&!1!=d&&a.Utils.Dom.extendToWord(c);if(c.isCollapsed()){d=g.t("newabbr.defaulttext");var e=b('<abbr title="">'+d+"</abbr>");a.Utils.Dom.insertIntoDOM(e,c,b(l.activeEditable.obj));c.startContainer=c.endContainer=e.contents().get(0);c.startOffset=0;c.endOffset=d.length}else e=b('<abbr title=""></abbr>'),a.Utils.Dom.addMarkup(c,e,!1);c.select();this.abbrField.foreground();this.abbrField.focus()}},removeAbbr:function(){var d=l.Selection.getRangeObject(),
b=this.findAbbrMarkup();b&&(a.Utils.Dom.removeFromDOM(b,d,!0),d.select())},makeClean:function(a){},toString:function(){return"abbr"}})});define("horizontalruler/nls/i18n",{root:{"button.addhr.tooltip":"Add a horizontal ruler"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("horizontalruler/horizontalruler-plugin","aloha jquery aloha/plugin ui/ui ui/button i18n!horizontalruler/nls/i18n i18n!aloha/nls/i18n".split(" "),function(l,b,p,m,k,f,c){var e=window.GENTICS;return p.create("horizontalruler",
{_constructor:function(){this._super("horizontalruler")},config:["hr"],init:function(){var c=this;this._insertHorizontalRuleButton=m.adopt("insertHorizontalRule",k,{tooltip:f.t("button.addhr.tooltip"),iconOnly:!0,icon:"aloha-icon-horizontalruler",scope:"Aloha.continuoustext",click:function(){c.insertHR()}});l.bind("aloha-editable-activated",function(e,a){l.activeEditable&&(c.cfg=c.getEditableConfig(l.activeEditable.obj),-1!=b.inArray("hr",c.cfg)?c._insertHorizontalRuleButton.show(!0):c._insertHorizontalRuleButton.show(!1))})},
insertHR:function(c){c=l.Selection.getRangeObject();if(l.activeEditable){var f=b("<hr>");e.Utils.Dom.insertIntoDOM(f,c,b(l.activeEditable.obj),!0);c.select()}}})});(function(){function l(b,c){for(var e in c){var g=c[e];void 0!==g&&(b[e]=g)}return b}var b=function(){},p=function(f,c){var e;e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return f.apply(this,arguments)};b.prototype=f.prototype;e.prototype=new b;c&&l(e.prototype,c);e.prototype.constructor=e;e.__super__=f.prototype;return e},
m;m="undefined"!==typeof exports?exports:this.Undo={};m.Stack=function(){this.commands=[];this.savePosition=this.stackPosition=-1};l(m.Stack.prototype,{execute:function(b){this._clearRedo();b.execute();this.commands.push(b);this.stackPosition++;this.changed()},undo:function(){this.commands[this.stackPosition].undo();this.stackPosition--;this.changed()},canUndo:function(){return 0<=this.stackPosition},redo:function(){this.stackPosition++;this.commands[this.stackPosition].redo();this.changed()},canRedo:function(){return this.stackPosition<
this.commands.length-1},save:function(){this.savePosition=this.stackPosition;this.changed()},dirty:function(){return this.stackPosition!=this.savePosition},_clearRedo:function(){this.commands=this.commands.slice(0,this.stackPosition+1)},changed:function(){}});m.Command=function(b){this.name=b};var k=Error("override me!");l(m.Command.prototype,{execute:function(){throw k;},undo:function(){throw k;},redo:function(){this.execute()}});m.Command.extend=function(b){b=p(this,b);b.extend=m.Command.extend;
return b}}).call(this);define("undo/vendor/undo",function(){});u.prototype.diff_main=function(l,b,p,m){"undefined"==typeof m&&(m=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==l||null==b)throw Error("Null input. (diff_main)");if(l==b)return l?[[0,l]]:[];"undefined"==typeof p&&(p=!0);var k=p,f=this.diff_commonPrefix(l,b);p=l.substring(0,f);l=l.substring(f);b=b.substring(f);var f=this.diff_commonSuffix(l,b),c=l.substring(l.length-f);l=l.substring(0,l.length-
f);b=b.substring(0,b.length-f);l=this.diff_compute_(l,b,k,m);p&&l.unshift([0,p]);c&&l.push([0,c]);this.diff_cleanupMerge(l);return l};u.prototype.diff_compute_=function(l,b,p,m){if(!l)return[[1,b]];if(!b)return[[-1,l]];var k=l.length>b.length?l:b,f=l.length>b.length?b:l,c=k.indexOf(f);return-1!=c?(p=[[1,k.substring(0,c)],[0,f],[1,k.substring(c+f.length)]],l.length>b.length&&(p[0][0]=p[2][0]=-1),p):1==f.length?[[-1,l],[1,b]]:(k=this.diff_halfMatch_(l,b))?(b=k[1],f=k[3],l=k[4],k=this.diff_main(k[0],
k[2],p,m),p=this.diff_main(b,f,p,m),k.concat([[0,l]],p)):p&&100<l.length&&100<b.length?this.diff_lineMode_(l,b,m):this.diff_bisect_(l,b,m)};u.prototype.diff_lineMode_=function(l,b,p){var m=this.diff_linesToChars_(l,b);l=m[0];b=m[1];m=m[2];l=this.diff_bisect_(l,b,p);this.diff_charsToLines_(l,m);this.diff_cleanupSemantic(l);l.push([0,""]);for(var k=b=0,f=0,c=m="";b<l.length;){switch(l[b][0]){case 1:f++;c+=l[b][1];break;case -1:k++;m+=l[b][1];break;case 0:if(1<=k&&1<=f){m=this.diff_main(m,c,!1,p);l.splice(b-
k-f,k+f);b=b-k-f;for(k=m.length-1;0<=k;k--)l.splice(b,0,m[k]);b+=m.length}k=f=0;c=m=""}b++}l.pop();return l};u.prototype.diff_bisect_=function(l,b,p){for(var m=l.length,k=b.length,f=Math.ceil((m+k)/2),c=2*f,e=Array(c),g=Array(c),q=0;q<c;q++)e[q]=-1,g[q]=-1;e[f+1]=0;g[f+1]=0;for(var q=m-k,a=0!=q%2,d=0,n=0,v=0,y=0,A=0;A<f&&!((new Date).getTime()>p);A++){for(var z=-A+d;z<=A-n;z+=2){var r=f+z,t;t=z==-A||z!=A&&e[r-1]<e[r+1]?e[r+1]:e[r-1]+1;for(var s=t-z;t<m&&s<k&&l.charAt(t)==b.charAt(s);)t++,s++;e[r]=
t;if(t>m)n+=2;else if(s>k)d+=2;else if(a&&(r=f+q-z,0<=r&&r<c&&-1!=g[r])){var u=m-g[r];if(t>=u)return this.diff_bisectSplit_(l,b,t,s,p)}}for(z=-A+v;z<=A-y;z+=2){r=f+z;u=z==-A||z!=A&&g[r-1]<g[r+1]?g[r+1]:g[r-1]+1;for(t=u-z;u<m&&t<k&&l.charAt(m-u-1)==b.charAt(k-t-1);)u++,t++;g[r]=u;if(u>m)y+=2;else if(t>k)v+=2;else if(!a&&(r=f+q-z,0<=r&&r<c&&-1!=e[r]&&(t=e[r],s=f+t-r,u=m-u,t>=u)))return this.diff_bisectSplit_(l,b,t,s,p)}}return[[-1,l],[1,b]]};u.prototype.diff_bisectSplit_=function(l,b,p,m,k){var f=l.substring(0,
p),c=b.substring(0,m);l=l.substring(p);b=b.substring(m);f=this.diff_main(f,c,!1,k);k=this.diff_main(l,b,!1,k);return f.concat(k)};u.prototype.diff_linesToChars_=function(l,b){function p(b){for(var c="",f=0,a=-1,d=m.length;a<b.length-1;){a=b.indexOf("\n",f);-1==a&&(a=b.length-1);var n=b.substring(f,a+1),f=a+1;(k.hasOwnProperty?k.hasOwnProperty(n):void 0!==k[n])?c+=String.fromCharCode(k[n]):(c+=String.fromCharCode(d),k[n]=d,m[d++]=n)}return c}var m=[],k={};m[0]="";var f=p(l),c=p(b);return[f,c,m]};u.prototype.diff_charsToLines_=
function(l,b){for(var p=0;p<l.length;p++){for(var m=l[p][1],k=[],f=0;f<m.length;f++)k[f]=b[m.charCodeAt(f)];l[p][1]=k.join("")}};u.prototype.diff_commonPrefix=function(l,b){if(!l||!b||l.charAt(0)!=b.charAt(0))return 0;for(var p=0,m=Math.min(l.length,b.length),k=m,f=0;p<k;)l.substring(f,k)==b.substring(f,k)?f=p=k:m=k,k=Math.floor((m-p)/2+p);return k};u.prototype.diff_commonSuffix=function(l,b){if(!l||!b||l.charAt(l.length-1)!=b.charAt(b.length-1))return 0;for(var p=0,m=Math.min(l.length,b.length),
k=m,f=0;p<k;)l.substring(l.length-k,l.length-f)==b.substring(b.length-k,b.length-f)?f=p=k:m=k,k=Math.floor((m-p)/2+p);return k};u.prototype.diff_commonOverlap_=function(l,b){var p=l.length,m=b.length;if(0==p||0==m)return 0;p>m?l=l.substring(p-m):p<m&&(b=b.substring(0,p));p=Math.min(p,m);if(l==b)return p;for(var m=0,k=1;;){var f=l.substring(p-k),f=b.indexOf(f);if(-1==f)return m;k+=f;if(0==f||l.substring(p-k)==b.substring(0,k))m=k,k++}};u.prototype.diff_halfMatch_=function(l,b){function p(b,a,d){for(var c=
b.substring(d,d+Math.floor(b.length/4)),e=-1,g="",k,l,m,p;-1!=(e=a.indexOf(c,e+1));){var r=f.diff_commonPrefix(b.substring(d),a.substring(e)),t=f.diff_commonSuffix(b.substring(0,d),a.substring(0,e));g.length<t+r&&(g=a.substring(e-t,e)+a.substring(e,e+r),k=b.substring(0,d-t),l=b.substring(d+r),m=a.substring(0,e-t),p=a.substring(e+r))}return 2*g.length>=b.length?[k,l,m,p,g]:null}if(0>=this.Diff_Timeout)return null;var m=l.length>b.length?l:b,k=l.length>b.length?b:l;if(4>m.length||2*k.length<m.length)return null;
var f=this,c=p(m,k,Math.ceil(m.length/4)),m=p(m,k,Math.ceil(m.length/2));if(c||m)c=m?c?c[4].length>m[4].length?c:m:m:c;else return null;var e,g;l.length>b.length?(m=c[0],k=c[1],e=c[2],g=c[3]):(e=c[0],g=c[1],m=c[2],k=c[3]);return[m,k,e,g,c[4]]};u.prototype.diff_cleanupSemantic=function(l){for(var b=!1,p=[],m=0,k=null,f=0,c=0,e=0,g=0,q=0;f<l.length;)0==l[f][0]?(p[m++]=f,c=g,e=q,q=g=0,k=l[f][1]):(1==l[f][0]?g+=l[f][1].length:q+=l[f][1].length,null!==k&&k.length<=Math.max(c,e)&&k.length<=Math.max(g,q)&&
(l.splice(p[m-1],0,[-1,k]),l[p[m-1]+1][0]=1,m--,m--,f=0<m?p[m-1]:-1,q=g=e=c=0,k=null,b=!0)),f++;b&&this.diff_cleanupMerge(l);this.diff_cleanupSemanticLossless(l);for(f=1;f<l.length;){if(-1==l[f-1][0]&&1==l[f][0]){b=l[f-1][1];p=l[f][1];if(m=this.diff_commonOverlap_(b,p))l.splice(f,0,[0,p.substring(0,m)]),l[f-1][1]=b.substring(0,b.length-m),l[f+1][1]=p.substring(m),f++;f++}f++}};u.prototype.diff_cleanupSemanticLossless=function(l){function b(a,d){if(!a||!d)return 5;var b=0;if(a.charAt(a.length-1).match(p)||
d.charAt(0).match(p))if(b++,a.charAt(a.length-1).match(m)||d.charAt(0).match(m))if(b++,a.charAt(a.length-1).match(k)||d.charAt(0).match(k))b++,(a.match(f)||d.match(c))&&b++;return b}for(var p=/[^a-zA-Z0-9]/,m=/\s/,k=/[\r\n]/,f=/\n\r?\n$/,c=/^\r?\n\r?\n/,e=1;e<l.length-1;){if(0==l[e-1][0]&&0==l[e+1][0]){var g=l[e-1][1],q=l[e][1],a=l[e+1][1],d=this.diff_commonSuffix(g,q);if(d)var n=q.substring(q.length-d),g=g.substring(0,g.length-d),q=n+q.substring(0,q.length-d),a=n+a;for(var d=g,n=q,v=a,y=b(g,q)+b(q,
a);q.charAt(0)===a.charAt(0);){var g=g+q.charAt(0),q=q.substring(1)+a.charAt(0),a=a.substring(1),A=b(g,q)+b(q,a);A>=y&&(y=A,d=g,n=q,v=a)}l[e-1][1]!=d&&(d?l[e-1][1]=d:(l.splice(e-1,1),e--),l[e][1]=n,v?l[e+1][1]=v:(l.splice(e+1,1),e--))}e++}};u.prototype.diff_cleanupEfficiency=function(l){for(var b=!1,p=[],m=0,k="",f=0,c=!1,e=!1,g=!1,q=!1;f<l.length;)0==l[f][0]?(l[f][1].length<this.Diff_EditCost&&(g||q)?(p[m++]=f,c=g,e=q,k=l[f][1]):(m=0,k=""),g=q=!1):(-1==l[f][0]?q=!0:g=!0,k&&(c&&e&&g&&q||k.length<
this.Diff_EditCost/2&&3==c+e+g+q)&&(l.splice(p[m-1],0,[-1,k]),l[p[m-1]+1][0]=1,m--,k="",c&&e?(g=q=!0,m=0):(m--,f=0<m?p[m-1]:-1,g=q=!1),b=!0)),f++;b&&this.diff_cleanupMerge(l)};u.prototype.diff_cleanupMerge=function(l){l.push([0,""]);for(var b=0,p=0,m=0,k="",f="",c;b<l.length;)switch(l[b][0]){case 1:m++;f+=l[b][1];b++;break;case -1:p++;k+=l[b][1];b++;break;case 0:1<p+m?(0!==p&&0!==m&&(c=this.diff_commonPrefix(f,k),0!==c&&(0<b-p-m&&0==l[b-p-m-1][0]?l[b-p-m-1][1]+=f.substring(0,c):(l.splice(0,0,[0,f.substring(0,
c)]),b++),f=f.substring(c),k=k.substring(c)),c=this.diff_commonSuffix(f,k),0!==c&&(l[b][1]=f.substring(f.length-c)+l[b][1],f=f.substring(0,f.length-c),k=k.substring(0,k.length-c))),0===p?l.splice(b-p-m,p+m,[1,f]):0===m?l.splice(b-p-m,p+m,[-1,k]):l.splice(b-p-m,p+m,[-1,k],[1,f]),b=b-p-m+(p?1:0)+(m?1:0)+1):0!==b&&0==l[b-1][0]?(l[b-1][1]+=l[b][1],l.splice(b,1)):b++,p=m=0,f=k=""}""===l[l.length-1][1]&&l.pop();p=!1;for(b=1;b<l.length-1;)0==l[b-1][0]&&0==l[b+1][0]&&(l[b][1].substring(l[b][1].length-l[b-
1][1].length)==l[b-1][1]?(l[b][1]=l[b-1][1]+l[b][1].substring(0,l[b][1].length-l[b-1][1].length),l[b+1][1]=l[b-1][1]+l[b+1][1],l.splice(b-1,1),p=!0):l[b][1].substring(0,l[b+1][1].length)==l[b+1][1]&&(l[b-1][1]+=l[b+1][1],l[b][1]=l[b][1].substring(l[b+1][1].length)+l[b+1][1],l.splice(b+1,1),p=!0)),b++;p&&this.diff_cleanupMerge(l)};u.prototype.diff_xIndex=function(l,b){var p=0,m=0,k=0,f=0,c;for(c=0;c<l.length;c++){1!==l[c][0]&&(p+=l[c][1].length);-1!==l[c][0]&&(m+=l[c][1].length);if(p>b)break;k=p;f=
m}return l.length!=c&&-1===l[c][0]?f:f+(b-k)};u.prototype.diff_prettyHtml=function(l){for(var b=[],p=/&/g,m=/</g,k=/>/g,f=/\n/g,c=0;c<l.length;c++){var e=l[c][0],g=l[c][1].replace(p,"&amp;").replace(m,"&lt;").replace(k,"&gt;").replace(f,"&para;<br>");switch(e){case 1:b[c]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case -1:b[c]='<del style="background:#ffe6e6;">'+g+"</del>";break;case 0:b[c]="<span>"+g+"</span>"}}return b.join("")};u.prototype.diff_text1=function(l){for(var b=[],p=0;p<l.length;p++)1!==
l[p][0]&&(b[p]=l[p][1]);return b.join("")};u.prototype.diff_text2=function(l){for(var b=[],p=0;p<l.length;p++)-1!==l[p][0]&&(b[p]=l[p][1]);return b.join("")};u.prototype.diff_levenshtein=function(l){for(var b=0,p=0,m=0,k=0;k<l.length;k++){var f=l[k][1];switch(l[k][0]){case 1:p+=f.length;break;case -1:m+=f.length;break;case 0:b+=Math.max(p,m),m=p=0}}return b+=Math.max(p,m)};u.prototype.diff_toDelta=function(l){for(var b=[],p=0;p<l.length;p++)switch(l[p][0]){case 1:b[p]="+"+encodeURI(l[p][1]);break;
case -1:b[p]="-"+l[p][1].length;break;case 0:b[p]="="+l[p][1].length}return b.join("\t").replace(/%20/g," ")};u.prototype.diff_fromDelta=function(l,b){for(var p=[],m=0,k=0,f=b.split(/\t/g),c=0;c<f.length;c++){var e=f[c].substring(1);switch(f[c].charAt(0)){case "+":try{p[m++]=[1,decodeURI(e)]}catch(g){throw Error("Illegal escape in diff_fromDelta: "+e);}break;case "-":case "=":var q=parseInt(e,10);if(isNaN(q)||0>q)throw Error("Invalid number in diff_fromDelta: "+e);e=l.substring(k,k+=q);"="==f[c].charAt(0)?
p[m++]=[0,e]:p[m++]=[-1,e];break;default:if(f[c])throw Error("Invalid diff operation in diff_fromDelta: "+f[c]);}}if(k!=l.length)throw Error("Delta length ("+k+") does not equal source text length ("+l.length+").");return p};u.prototype.match_main=function(l,b,p){if(null==l||null==b||null==p)throw Error("Null input. (match_main)");p=Math.max(0,Math.min(p,l.length));return l==b?0:l.length?l.substring(p,p+b.length)==b?p:this.match_bitap_(l,b,p):-1};u.prototype.match_bitap_=function(l,b,p){function m(a,
d){var c=a/b.length,e=Math.abs(p-d);return f.Match_Distance?c+e/f.Match_Distance:e?1:c}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var k=this.match_alphabet_(b),f=this,c=this.Match_Threshold,e=l.indexOf(b,p);-1!=e&&(c=Math.min(m(0,e),c),e=l.lastIndexOf(b,p+b.length),-1!=e&&(c=Math.min(m(0,e),c)));for(var g=1<<b.length-1,e=-1,q,a,d=b.length+l.length,n,v=0;v<b.length;v++){q=0;for(a=d;q<a;)m(v,p+a)<=c?q=a:d=a,a=Math.floor((d-q)/2+q);d=a;q=Math.max(1,p-a+1);var y=
Math.min(p+a,l.length)+b.length;a=Array(y+2);for(a[y+1]=(1<<v)-1;y>=q;y--){var A=k[l.charAt(y-1)];a[y]=0===v?(a[y+1]<<1|1)&A:(a[y+1]<<1|1)&A|(n[y+1]|n[y])<<1|1|n[y+1];if(a[y]&g&&(A=m(v,y-1),A<=c))if(c=A,e=y-1,e>p)q=Math.max(1,2*p-e);else break}if(m(v+1,p)>c)break;n=a}return e};u.prototype.match_alphabet_=function(l){for(var b={},p=0;p<l.length;p++)b[l.charAt(p)]=0;for(p=0;p<l.length;p++)b[l.charAt(p)]|=1<<l.length-p-1;return b};u.prototype.patch_addContext_=function(l,b){if(0!=b.length){for(var p=
b.substring(l.start2,l.start2+l.length1),m=0;b.indexOf(p)!=b.lastIndexOf(p)&&p.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)m+=this.Patch_Margin,p=b.substring(l.start2-m,l.start2+l.length1+m);m+=this.Patch_Margin;(p=b.substring(l.start2-m,l.start2))&&l.diffs.unshift([0,p]);(m=b.substring(l.start2+l.length1,l.start2+l.length1+m))&&l.diffs.push([0,m]);l.start1-=p.length;l.start2-=p.length;l.length1+=p.length+m.length;l.length2+=p.length+m.length}};u.prototype.patch_make=function(l,
b,p){var m;if("string"==typeof l&&"string"==typeof b&&"undefined"==typeof p)m=l,b=this.diff_main(m,b,!0),2<b.length&&(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b));else if(l&&"object"==typeof l&&"undefined"==typeof b&&"undefined"==typeof p)b=l,m=this.diff_text1(b);else if("string"==typeof l&&b&&"object"==typeof b&&"undefined"==typeof p)m=l;else if("string"==typeof l&&"string"==typeof b&&p&&"object"==typeof p)m=l,b=p;else throw Error("Unknown call format to patch_make.");if(0===b.length)return[];
p=[];l=new s;for(var k=0,f=0,c=0,e=m,g=0;g<b.length;g++){var q=b[g][0],a=b[g][1];k||0===q||(l.start1=f,l.start2=c);switch(q){case 1:l.diffs[k++]=b[g];l.length2+=a.length;m=m.substring(0,c)+a+m.substring(c);break;case -1:l.length1+=a.length;l.diffs[k++]=b[g];m=m.substring(0,c)+m.substring(c+a.length);break;case 0:a.length<=2*this.Patch_Margin&&k&&b.length!=g+1?(l.diffs[k++]=b[g],l.length1+=a.length,l.length2+=a.length):a.length>=2*this.Patch_Margin&&k&&(this.patch_addContext_(l,e),p.push(l),l=new s,
k=0,e=m,f=c)}1!==q&&(f+=a.length);-1!==q&&(c+=a.length)}k&&(this.patch_addContext_(l,e),p.push(l));return p};u.prototype.patch_deepCopy=function(l){for(var b=[],p=0;p<l.length;p++){var m=l[p],k=new s;k.diffs=[];for(var f=0;f<m.diffs.length;f++)k.diffs[f]=m.diffs[f].slice();k.start1=m.start1;k.start2=m.start2;k.length1=m.length1;k.length2=m.length2;b[p]=k}return b};u.prototype.patch_apply=function(l,b){if(0==l.length)return[b,[]];l=this.patch_deepCopy(l);var p=this.patch_addPadding(l);b=p+b+p;this.patch_splitMax(l);
for(var m=0,k=[],f=0;f<l.length;f++){var c=l[f].start2+m,e=this.diff_text1(l[f].diffs),g,q=-1;if(e.length>this.Match_MaxBits){if(g=this.match_main(b,e.substring(0,this.Match_MaxBits),c),-1!=g&&(q=this.match_main(b,e.substring(e.length-this.Match_MaxBits),c+e.length-this.Match_MaxBits),-1==q||g>=q))g=-1}else g=this.match_main(b,e,c);if(-1==g)k[f]=!1,m-=l[f].length2-l[f].length1;else if(k[f]=!0,m=g-c,c=-1==q?b.substring(g,g+e.length):b.substring(g,q+this.Match_MaxBits),e==c)b=b.substring(0,g)+this.diff_text2(l[f].diffs)+
b.substring(g+e.length);else if(c=this.diff_main(e,c,!1),e.length>this.Match_MaxBits&&this.diff_levenshtein(c)/e.length>this.Patch_DeleteThreshold)k[f]=!1;else{this.diff_cleanupSemanticLossless(c);for(var e=0,a,q=0;q<l[f].diffs.length;q++){var d=l[f].diffs[q];0!==d[0]&&(a=this.diff_xIndex(c,e));1===d[0]?b=b.substring(0,g+a)+d[1]+b.substring(g+a):-1===d[0]&&(b=b.substring(0,g+a)+b.substring(g+this.diff_xIndex(c,e+d[1].length)));-1!==d[0]&&(e+=d[1].length)}}}b=b.substring(p.length,b.length-p.length);
return[b,k]};u.prototype.patch_addPadding=function(l){for(var b=this.Patch_Margin,p="",m=1;m<=b;m++)p+=String.fromCharCode(m);for(m=0;m<l.length;m++)l[m].start1+=b,l[m].start2+=b;var m=l[0],k=m.diffs;if(0==k.length||0!=k[0][0])k.unshift([0,p]),m.start1-=b,m.start2-=b,m.length1+=b,m.length2+=b;else if(b>k[0][1].length){var f=b-k[0][1].length;k[0][1]=p.substring(k[0][1].length)+k[0][1];m.start1-=f;m.start2-=f;m.length1+=f;m.length2+=f}m=l[l.length-1];k=m.diffs;0==k.length||0!=k[k.length-1][0]?(k.push([0,
p]),m.length1+=b,m.length2+=b):b>k[k.length-1][1].length&&(f=b-k[k.length-1][1].length,k[k.length-1][1]+=p.substring(0,f),m.length1+=f,m.length2+=f);return p};u.prototype.patch_splitMax=function(l){for(var b=this.Match_MaxBits,p=0;p<l.length;p++)if(l[p].length1>b){var m=l[p];l.splice(p--,1);for(var k=m.start1,f=m.start2,c="";0!==m.diffs.length;){var e=new s,g=!0;e.start1=k-c.length;e.start2=f-c.length;""!==c&&(e.length1=e.length2=c.length,e.diffs.push([0,c]));for(;0!==m.diffs.length&&e.length1<b-
this.Patch_Margin;){var c=m.diffs[0][0],q=m.diffs[0][1];1===c?(e.length2+=q.length,f+=q.length,e.diffs.push(m.diffs.shift()),g=!1):-1===c&&1==e.diffs.length&&0==e.diffs[0][0]&&q.length>2*b?(e.length1+=q.length,k+=q.length,g=!1,e.diffs.push([c,q]),m.diffs.shift()):(q=q.substring(0,b-e.length1-this.Patch_Margin),e.length1+=q.length,k+=q.length,0===c?(e.length2+=q.length,f+=q.length):g=!1,e.diffs.push([c,q]),q==m.diffs[0][1]?m.diffs.shift():m.diffs[0][1]=m.diffs[0][1].substring(q.length))}c=this.diff_text2(e.diffs);
c=c.substring(c.length-this.Patch_Margin);q=this.diff_text1(m.diffs).substring(0,this.Patch_Margin);""!==q&&(e.length1+=q.length,e.length2+=q.length,0!==e.diffs.length&&0===e.diffs[e.diffs.length-1][0]?e.diffs[e.diffs.length-1][1]+=q:e.diffs.push([0,q]));g||l.splice(++p,0,e)}}};u.prototype.patch_toText=function(l){for(var b=[],p=0;p<l.length;p++)b[p]=l[p];return b.join("")};u.prototype.patch_fromText=function(l){var b=[];if(!l)return b;l=l.split("\n");for(var p=0,m=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;p<
l.length;){var k=l[p].match(m);if(!k)throw Error("Invalid patch string: "+l[p]);var f=new s;b.push(f);f.start1=parseInt(k[1],10);""===k[2]?(f.start1--,f.length1=1):"0"==k[2]?f.length1=0:(f.start1--,f.length1=parseInt(k[2],10));f.start2=parseInt(k[3],10);""===k[4]?(f.start2--,f.length2=1):"0"==k[4]?f.length2=0:(f.start2--,f.length2=parseInt(k[4],10));for(p++;p<l.length;){k=l[p].charAt(0);try{var c=decodeURI(l[p].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+c);}if("-"==k)f.diffs.push([-1,
c]);else if("+"==k)f.diffs.push([1,c]);else if(" "==k)f.diffs.push([0,c]);else if("@"==k)break;else if(""!==k)throw Error('Invalid patch mode "'+k+'" in: '+c);p++}}return b};s.prototype.toString=function(){for(var l=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],b,p=0;p<this.diffs.length;p++){switch(this.diffs[p][0]){case 1:b="+";
break;case -1:b="-";break;case 0:b=" "}l[p+1]=b+encodeURI(this.diffs[p][1])+"\n"}return l.join("").replace(/%20/g," ")};window.diff_match_patch=u;window.patch_obj=s;window.DIFF_DELETE=-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;define("undo/vendor/diff_match_patch_uncompressed",function(){});define("undo/undo-plugin",["aloha","jquery","aloha/plugin","undo/vendor/undo","undo/vendor/diff_match_patch_uncompressed"],function(l,b,p){function m(b){b=k.patch_deepCopy(b);for(var e=0;e<b.length;e++)for(var f=
0;f<b[e].diffs.length;f++)b[e].diffs[f][0]=-b[e].diffs[f][0];return b}var k=new u,f=!1;return p.create("undo",{init:function(){this.stack=new Undo.Stack;var b=this,e=Undo.Command.extend({constructor:function(b,c){this.editable=b;this.patch=c},execute:function(){},undo:function(){this.phase(m(this.patch))},redo:function(){this.phase(this.patch)},phase:function(b){var c=this.editable.getContents();b=k.patch_apply(b,c)[0];this.reset(b)},reset:function(b){f=!0;var c=null;l.getActiveEditable()===this.editable&&
(l.deactivateEditable(),c=this.editable);this.editable.obj.html(b);null!==c&&c.activate();this.editable.smartContentChange({type:"blur"});f=!1}});this.stack.changed=function(){};l.bind("aloha-editable-created",function(e,f){f.obj.bind("keydown","ctrl+z shift+ctrl+z",function(a){a.preventDefault();a.shiftKey?b.redo():b.undo()})});l.bind("aloha-smart-content-changed",function(g,l){var a=l.getSnapshotContent();if(!f){var d=l.editable.getContents(),a=k.patch_make(a,d);0!==a.length&&b.stack.execute(new e(l.editable,
a))}})},toString:function(){return"undo"},undo:function(){null!==l.getActiveEditable()&&l.getActiveEditable().smartContentChange({type:"blur"});this.stack.canUndo()&&this.stack.undo()},redo:function(){null!==l.getActiveEditable()&&l.getActiveEditable().smartContentChange({type:"blur"});this.stack.canRedo()&&this.stack.redo()},stack:void 0})});define("paste/paste-plugin","jquery aloha/core aloha/plugin aloha/command contenthandler/contenthandler-utils aloha/console aloha/copypaste aloha/contenthandlermanager".split(" "),
function(l,b,p,m,k,f,c,e){function g(a,b){b.css({top:d.scrollTop(),left:d.scrollLeft()-200,width:200,overflow:"hidden"}).contents().remove();var e=c.getEditableAt(a);e&&e.obj.blur();c.setSelectionAt({startContainer:b[0],endContainer:b[0],startOffset:0,endOffset:0});b.focus()}function q(a,d,g){a.metaKey=null;a.stopPropagation();window.setTimeout(function(){if(d){var l;l=y.html();var m=/^<h\d+.*?>/i.exec(l),q;null!==m&&(m=m[0],q="</"+m.substr(1),l=l.replace(m,"").replace(q,""));l=(m=e.get("formatless"))?
m.handleContent(l):l;n&&/^&nbsp;/.test(l)&&(l=l.substring(6));(m=c.getEditableAt(d))&&m.obj.focus();c.setSelectionAt(d);window.scrollTo(z.x,z.y);m=d.startContainer;if(1===m.nodeType?"p"===m.nodeName.toLowerCase()&&k.isProppedParagraph(m.outerHTML):3===m.nodeType&&"p"===m.parentNode.nodeName.toLowerCase()&&1===m.parentNode.childNodes.length&&v.test(window.escape(m.data)))3===d.startContainer.nodeType?d.startContainer.data="":d.startContainer.innerHTML=" ",d.startOffset=0,d.endContainer===d.startContainer&&
(d.endOffset=0);b.queryCommandSupported("insertHTML")?b.execCommand("insertHTML",!1,l):f.error("Common.Paste",'Command "insertHTML" not available. Enable the plugin "common/commands".');y.contents().remove();"function"===typeof g&&g()}b.activeEditable.smartContentChange(a)},10)}function a(a,d){n?a.bind("beforepaste",function(a){z.x=window.scrollX||document.documentElement.scrollLeft;z.y=window.scrollY||document.documentElement.scrollTop;A=c.getRange();g(A,y);a.stopPropagation()}):a.bind("paste",function(a){z.x=
window.scrollX||document.documentElement.scrollLeft;z.y=window.scrollY||document.documentElement.scrollTop;var d=c.getRange();g(d,y);n&&document.selection.createRange().execCommand("paste");q(a,d)})}var d=l(window),n=!!l.browser.msie,v=/^(\s|%A0)$/,y=l('<div style="position:absolute; clip:rect(0px,0px,0px,0px); width:1px; height:1px;"></div>').contentEditable(!0),A=null,z={x:0,y:0};return p.create("paste",{settings:{},init:function(){l("body").append(y);var d=!this.settings.noclipboardaccess;b.bind("aloha-editable-created",
function(b,c){a(c.obj,d)});n&&y.bind("paste",function(a){q(a,A,function(){A=null})})},register:function(a){f.deprecated("Plugins.Paste","register() for pasteHandler is deprecated.  Use the ContentHandler Plugin instead.")}})});define("autoparagraph/autoparagraph-plugin",["jquery","aloha/plugin","aloha/core","util/html","util/dom"],function(l,b,p,m,k){function f(b){if(b){var c=b.obj;if(c){var a=c[0],d,e=p.Selection.rangeObject,f=!1;if(k.allowsNesting(a,l("<p></p>")[0])){var y=[],A;c.contents().each(function(){m.isBlock(this)?
A=null:(A||(A={objs:[]},y.push(A)),A.objs.push(this))});for(c=0;c<y.length;c++){f=y[c];d=k.getIndexInParent(f.objs[0]);var z=k.getIndexInParent(f.objs[f.objs.length-1]),r=l("<p></p>");e.startContainer===a&&(e.startOffset>d&&e.startOffset<=z?(e.startContainer=r[0],e.startOffset-=d):e.startOffset>z&&(e.startOffset-=z-d));e.endContainer===a&&(e.endOffset>d&&e.endOffset<=z?(e.endContainer=r[0],e.endOffset-=d):e.endOffset>z&&(e.endOffset-=z-d));l(f.objs[0]).before(r);for(d=0;d<f.objs.length;d++)r[0].appendChild(f.objs[d]);
f=!0}f&&b.isActive&&e.select()}}}}function c(b){return"array"===l.type(b)&&-1!==l.inArray(e,b)}var e="autoparagraph";return b.create(e,{config:[e],init:function(){var b=this;p.bind("aloha-editable-created",function(e,a){var d=b.getEditableConfig(a.obj);c(d)&&f(a)});p.bind("aloha-smart-content-changed",function(e,a){var d=b.getEditableConfig(a.editable.obj);c(d)&&f(a.editable)})}})});Aloha._load&&Aloha._load()})();require=define=null;(function(r,u){var s,t=function(){},l=function(a){for(var d in a)return 0;return 1},b={}.toString,p=function(a){return"[object Function]"==b.call(a)},m=function(a){return"[object String]"==b.call(a)},k=function(a){return"[object Array]"==b.call(a)},f=function(a,d){if(a)for(var b=0;b<a.length;)d(a[b++])},c=function(a,d){for(var b in d)a[b]=d[b];return a},e=function(a,d){return c(Error(a),{src:"dojoLoader",info:d})},g=1,q=function(){return"_"+g++},a=function(d,b,c){return Ma(d,b,c,0,a)},d=this,n=d.document,
v=n&&n.createElement("DiV"),y=a.has=function(a){return p(A[a])?A[a]=A[a](d,n,v):A[a]},A=y.cache=u.hasCache;y.add=function(a,d,b,c){(void 0===A[a]||c)&&(A[a]=d);return b&&y(a)};y.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);y("host-webworker")&&(c(u.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1}),u.loaderPatch={injectUrl:function(a,d){try{importScripts(a),d()}catch(b){console.error(b)}}});
for(var z in r.has)y.add(z,r.has[z],0,1);var B=0,C=[],E=0,D=t,H=t,L;a.isXdUrl=t;a.initSyncLoader=function(a,d,b){E||(E=a,D=d,H=b);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:C,modules:aa,execQ:ma,getModule:Ta,injectModule:bb,setArrived:na,signal:Q,finishExec:Oa,execModule:Eb,dojoRequirePlugin:E,getLegacyMode:function(){return B},guardCheckComplete:Da}};var T=location.protocol,I=location.host;a.isXdUrl=function(a){return/^\./.test(a)?!1:/^\/\//.test(a)?
!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=T||I&&a[2]!=I)};y.add("dojo-force-activex-xhr",!n.addEventListener&&"file:"==window.location.protocol);y.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(y("native-xhr")&&!y("dojo-force-activex-xhr"))L=function(){return new XMLHttpRequest};else{var Z=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],N;for(s=0;3>s;)try{if(N=Z[s++],new ActiveXObject(N))break}catch(x){}L=function(){return new ActiveXObject(N)}}a.getXhr=L;y.add("dojo-gettext-api",
1);a.getText=function(a,d,b){var c=L();c.open("GET",yb(a),!1);c.send(null);if(200==c.status||!location.host&&!c.status)b&&b(c.responseText,d);else throw e("xhrFailed",c.status);return c.responseText};var K=new Function("return eval(arguments[0]);");a.eval=function(a,d){return K(a+"\r\n//# sourceURL="+d)};var G={},Q=a.signal=function(a,d){var b=G[a];f(b&&b.slice(0),function(a){a.apply(null,k(d)?d:[d])})},S=a.on=function(a,d){var b=G[a]||(G[a]=[]);b.push(d);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===
d){b.splice(a,1);break}}}},ha=[],ba={},V=[],M={},U=a.map={},J=[],aa={},X="",fa={},ua={},va={},la=0,oa=function(a){var d,b,c,e;for(d in ua)b=ua[d],(c=d.match(/^url\:(.+)/))?fa["url:"+Sa(c[1],a)]=b:"*now"==d?e=b:"*noref"!=d&&(c=Na(d,a,!0),fa[c.mid]=fa["url:"+c.url]=b);e&&e(cb(a));ua={}},ka=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},Fa=function(a,d){d.splice(0,d.length);for(var b in a)d.push([b,a[b],RegExp("^"+ka(b)+"(/|$)"),b.length]);d.sort(function(a,d){return d[3]-
a[3]});return d},O=function(a,d){f(a,function(a){d.push([m(a[0])?RegExp("^"+ka(a[0])+"$"):a[0],a[1]])})},sa=function(a){var d=a.name;d||(d=a,a={name:d});a=c({main:"main"},a);a.location=a.location?a.location:d;a.packageMap&&(U[d]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));M[d]=a},kb=[],La=function(d,b,e){for(var g in d){"waitSeconds"==g&&(a.waitms=1E3*(d[g]||0));"cacheBust"==g&&(X=d[g]?m(d[g])?d[g]:(new Date).getTime()+"":"");if("baseUrl"==g||"combo"==g)a[g]=d[g];if("async"==
g){var k=d[g];a.legacyMode=B=m(k)&&/sync|legacyAsync/.test(k)?k:k?!1:"sync";a.async=!B}d[g]!==A&&(a.rawConfig[g]=d[g],"has"!=g&&y.add("config-"+g,d[g],0,b))}a.baseUrl||(a.baseUrl="./");/\/$/.test(a.baseUrl)||(a.baseUrl+="/");for(g in d.has)y.add(g,d.has[g],0,b);f(d.packages,sa);for(var n in d.packagePaths)f(d.packagePaths[n],function(a){var d=n+"/"+a;m(a)&&(a={name:a});a.location=d;sa(a)});Fa(c(U,d.map),J);f(J,function(a){a[1]=Fa(a[1],[]);"*"==a[0]&&(J.star=a)});Fa(c(ba,d.paths),V);O(d.aliases,ha);
if(b)kb.push({config:d.config});else for(g in d.config)b=Ta(g,e),b.config=c(b.config||{},d.config[g]);d.cache&&(oa(),ua=d.cache,d.cache["*noref"]&&oa());Q("config",[d,a.rawConfig])};y("dojo-cdn");var Ia=n.getElementsByTagName("script");s=0;for(var Ra,Qa,pb,pa;s<Ia.length;)if(Ra=Ia[s++],(pb=Ra.getAttribute("src"))&&(pa=pb.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(Qa=pa[3]||"",u.baseUrl=u.baseUrl||Qa,la=Ra),pb=Ra.getAttribute("data-dojo-config")||Ra.getAttribute("djConfig"))va=a.eval("({ "+pb+" })","data-dojo-config"),
la=Ra;a.rawConfig={};La(u,1);y("dojo-cdn")&&((M.dojo.location=Qa)&&(Qa+="/"),M.dijit.location=Qa+"../dijit/",M.dojox.location=Qa+"../dojox/");La(r,1);La(va,1);var ca=function(a){Da(function(){f(a.deps,bb)})},Ma=function(d,b,f,g,n){var l;if(m(d)){if((l=Ta(d,g,!0))&&l.executed)return l.result;throw e("undefinedModule",d);}k(d)||(La(d,0,g),d=b,b=f);if(k(d))if(d.length){f="require*"+q();for(var v,p=[],y=0;y<d.length;)v=d[y++],p.push(Ta(v,g));l=c(ub("",f,0,""),{injected:2,deps:p,def:b||t,require:g?g.require:
a,gc:1});aa[l.mid]=l;ca(l);var A=ga&&"sync"!=B;Da(function(){Eb(l,A)});l.executed||ma.push(l);Ja()}else b&&b();return n},cb=function(d){if(!d)return a;var b=d.require;b||(b=function(a,c,e){return Ma(a,c,e,d,b)},d.require=c(b,a),b.module=d,b.toUrl=function(a){return Sa(a,d)},b.toAbsMid=function(a){return ac(a,d)},b.syncLoadNls=function(a){a=Na(a,d);var b=aa[a.mid];if(!b||!b.executed)if(ja=fa[a.mid]||fa["url:"+a.url])Ua(ja),b=aa[a.mid];return b&&b.executed&&b.result});return b},ma=[],za=[],R={},Ga=
function(a){a.injected=1;R[a.mid]=1;a.url&&(R[a.url]=a.pack||1);Fb()},na=function(a){a.injected=2;delete R[a.mid];a.url&&delete R[a.url];l(R)&&(Ka(),"xd"==B&&(B="sync"))},Ca=a.idle=function(){return!za.length&&l(R)&&!ma.length&&!ga},$a=function(a,d){if(d)for(var b=0;b<d.length;b++)if(d[b][2].test(a))return d[b];return 0},hb=function(a){var d=[],b,c;for(a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&d.length&&".."!=c?(d.pop(),c=d[d.length-1]):"."!=b&&d.push(c=b);return d.join("/")},
ub=function(d,b,c,e){var f=a.isXdUrl(e);return{pid:d,mid:b,pack:c,url:e,executed:0,def:0,isXd:f,isAmd:!!(f||M[d]&&M[d].isAmd)}},ia=function(a,d,b,c,g,k,n,l,m){var q,v,A,z;z=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||z&&!d)return ub(0,a,0,a);a=hb(z?d.mid+"/../"+a:a);if(/^\./.test(a))throw e("irrationalPath",a);d&&(A=$a(d.mid,k));(A=(A=A||k.star)&&$a(a,A[1]))&&(a=A[1]+a.substring(A[3]));d=(pa=a.match(/^([^\/]+)(\/(.+))?$/))?pa[1]:"";(q=b[d])?a=d+"/"+(v=pa[3]||q.main):d="";var r=0;f(l,function(d){var b=
a.match(d[0]);b&&0<b.length&&(r=p(d[1])?a.replace(d[0],d[1]):d[1])});if(r)return ia(r,0,b,c,g,k,n,l,m);if(b=c[a])return m?ub(b.pid,b.mid,b.pack,b.url):c[a];c=(A=$a(a,n))?A[1]+a.substring(A[3]):d?q.location+"/"+v:y("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(c)||(c=g+c);return ub(d,a,q,hb(c+".js"))},Na=function(d,b,c){return ia(d,b,M,aa,a.baseUrl,c?[]:J,c?[]:V,c?[]:ha)},ib=function(a,d,b){return a.normalize?a.normalize(d,function(a){return ac(a,b)}):ac(d,b)},Wa=0,Ta=function(a,d,b){var c,
e;(c=a.match(/^(.+?)\!(.*)$/))?(e=Ta(c[1],d,b),"sync"!=B||e.executed||(bb(e),2!==e.injected||e.executed||Da(function(){Eb(e)}),e.executed?Db(e):ma.unshift(e)),5!==e.executed||e.load||Db(e),e.load?(c=ib(e,c[2],d),a=e.mid+"!"+(e.dynamic?++Wa+"!":"")+c):(c=c[2],a=e.mid+"!"+ ++Wa+"!waitingForPlugin"),a={plugin:e,mid:a,req:cb(d),prid:c}):a=Na(a,d);return aa[a.mid]||!b&&(aa[a.mid]=a)},ac=a.toAbsMid=function(a,d){return Na(a,d).mid},Sa=a.toUrl=function(a,d){var b=Na(a+"/x",d),c=b.url;return yb(0===b.pid?
a:c.substring(0,c.length-5))},ab={injected:2,executed:5,def:3,result:3},Ea=function(a){return aa[a]=c({mid:a},ab)},jb=Ea("require"),Ya=Ea("exports"),lb=Ea("module"),vb={},Rb=0,Db=function(a){var d=a.result;a.dynamic=d.dynamic;a.normalize=d.normalize;a.load=d.load;return a},mb=function(a){var d={};f(a.loadQ,function(b){var e=ib(a,b.prid,b.req.module),f=a.dynamic?b.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=c(c({},b),{mid:f,prid:e,injected:0});aa[f]||Cb(aa[f]=e);d[b.mid]=aa[f];na(b);delete aa[b.mid]});
a.loadQ=0;var b=function(a){for(var b=a.deps||[],c=0;c<b.length;c++)(a=d[b[c].mid])&&(b[c]=a)},e;for(e in aa)b(aa[e]);f(ma,b)},Oa=function(d){a.trace("loader-finish-exec",[d.mid]);d.executed=5;d.defOrder=Rb++;f(d.provides,function(a){a()});d.loadQ&&(Db(d),mb(d));for(s=0;s<ma.length;)ma[s]===d?ma.splice(s,1):s++;/^require\*/.test(d.mid)&&delete aa[d.mid]},Sc=[],Eb=function(d,b){if(4===d.executed)return a.trace("loader-circular-dependency",[Sc.concat(d.mid).join("->")]),!d.def||b?vb:d.cjs&&d.cjs.exports;
if(!d.executed){if(!d.def)return vb;var c=d.mid,f=d.deps||[],g,k=[],n=0;for(d.executed=4;g=f[n++];){g=g===jb?cb(d):g===Ya?d.cjs.exports:g===lb?d.cjs:Eb(g,b);if(g===vb)return d.executed=0,a.trace("loader-exec-module",["abort",c]),vb;k.push(g)}a.trace("loader-run-factory",[d.mid]);var c=d.def,l;C.unshift(d);if(y("config-dojo-loader-catches"))try{l=p(c)?c.apply(null,k):c}catch(m){Q("error",d.result=e("factoryThrew",[d,m]))}else l=p(c)?c.apply(null,k):c;d.result=void 0===l&&d.cjs?d.cjs.exports:l;C.shift(d);
Oa(d)}return d.result},ga=0,Da=function(a){try{ga++,a()}finally{ga--}Ca()&&Q("idle",[])},Ja=function(){ga||Da(function(){D();for(var a,d,b=0;b<ma.length;)a=Rb,d=ma[b],Eb(d),a!=Rb?(D(),b=0):b++})};void 0===y("dojo-loader-eval-hint-url")&&y.add("dojo-loader-eval-hint-url",1);var yb="function"==typeof r.fixupUrl?r.fixupUrl:function(a){a+="";return a+(X?(/\?/.test(a)?"&":"?")+X:"")},Cb=function(a){var d=a.plugin;5!==d.executed||d.load||Db(d);var b=function(d){a.result=d;na(a);Oa(a);Ja()};d.load?d.load(a.prid,
a.req,b):d.loadQ?d.loadQ.push(a):(d.loadQ=[a],ma.unshift(d),bb(d))},ja=0,Qb=0,Bb=0,Ua=function(d,b){y("config-stripStrict")&&(d=d.replace(/"use strict"/g,""));Bb=1;if(y("config-dojo-loader-catches"))try{d===ja?ja.call(null):a.eval(d,y("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(c){Q("error",e("evalModuleThrew",b))}else d===ja?ja.call(null):a.eval(d,y("dojo-loader-eval-hint-url")?b.url:b.mid);Bb=0},bb=function(d){var b=d.mid,g=d.url;if(!(d.executed||d.injected||R[b]||d.url&&(d.pack&&R[d.url]===
d.pack||1==R[d.url])))if(Ga(d),d.plugin)Cb(d);else{var k=function(){Jb(d);if(2!==d.injected){if(y("dojo-enforceDefine")){Q("error",e("noDefine",d));return}na(d);c(d,ab);a.trace("loader-define-nonmodule",[d.url])}B?!C.length&&Ja():Ja()};if(ja=fa[b]||fa["url:"+d.url])a.trace("loader-inject",["cache",d.mid,g]),Ua(ja,d),k();else{if(B)if(d.isXd)"sync"==B&&(B="xd");else if(!d.isAmd||"sync"==B){var n=function(c){if("sync"==B){C.unshift(d);Ua(c,d);C.shift();Jb(d);d.cjs||(na(d),Oa(d));if(d.finish){c=b+"*finish";
var e=d.finish;delete d.finish;qb(c,["dojo",("dojo/require!"+e.join(",")).replace(/\./g,"/")],function(a){f(e,function(d){a.require(d)})});ma.unshift(Ta(c))}k()}else(c=H(d,c))?(Ua(c,d),k()):(Qb=d,a.injectUrl(yb(g),k,d),Qb=0)};a.trace("loader-inject",["xhr",d.mid,g,"sync"!=B]);if(y("config-dojo-loader-catches"))try{a.getText(g,"sync"!=B,n)}catch(l){Q("error",e("xhrInjectFailed",[d,l]))}else a.getText(g,"sync"!=B,n);return}a.trace("loader-inject",["script",d.mid,g]);Qb=d;a.injectUrl(yb(g),k,d);Qb=0}}},
db=function(d,b,f){a.trace("loader-define-module",[d.mid,b]);var g=d.mid;if(2===d.injected)return Q("error",e("multipleDefine",d)),d;c(d,{deps:b,def:f,cjs:{id:d.mid,uri:d.url,exports:d.result={},setExports:function(a){d.cjs.exports=a},config:function(){return d.config}}});for(var k=0;b[k];k++)b[k]=Ta(b[k],d);B&&!R[g]&&(ca(d),ma.push(d),Ja());na(d);p(f)||b.length||(d.result=f,Oa(d));return d},Jb=function(a,d){for(var b=[],c,e;za.length;)e=za.shift(),d&&(e[0]=d.shift()),c=e[0]&&Ta(e[0])||a,b.push([c,
e[1],e[2]]);oa(a);f(b,function(a){ca(db.apply(null,a))})},Sb=0,Ka=t,Fb=t,Ka=function(){Sb&&clearTimeout(Sb);Sb=0},Fb=function(){Ka();a.waitms&&(Sb=d.setTimeout(function(){Ka();Q("error",e("timeout",R))},a.waitms))};y.add("ie-event-behavior",n.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Va=function(a,d,b,c){if(y("ie-event-behavior"))return a.attachEvent(b,c),function(){a.detachEvent(b,c)};a.addEventListener(d,c,!1);return function(){a.removeEventListener(d,
c,!1)}},ob=Va(window,"load","onload",function(){a.pageLoaded=1;"complete"!=n.readyState&&(n.readyState="complete");ob()}),Ia=n.getElementsByTagName("script");for(s=0;!la;)/^dojo/.test((Ra=Ia[s++])&&Ra.type)||(la=Ra);a.injectUrl=function(a,d,b){b=b.node=n.createElement("script");var c=Va(b,"load","onreadystatechange",function(a){a=a||window.event;var b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))c(),f(),d&&d()}),f=Va(b,"error","onerror",function(d){c();f();Q("error",
e("scriptError",[a,d]))});b.type="text/javascript";b.charset="utf-8";b.src=a;la.parentNode.insertBefore(b,la);return b};a.log=function(){try{for(var a=0;a<arguments.length;a++);}catch(d){}};a.trace=t;var qb=function(d,b,c){var f=arguments.length,g=["require","exports","module"],k=[0,d,b];1==f?k=[0,p(d)?g:[],d]:2==f&&m(d)?k=[d,p(b)?g:[],b]:3==f&&(k=[d,b,c]);a.trace("loader-define",k.slice(0,2));if((f=k[0]&&Ta(k[0]))&&!R[f.mid])ca(db(f,k[1],k[2]));else if(!y("ie-event-behavior")||Bb)za.push(k);else{f=
f||Qb;if(!f)for(d in R)if((g=aa[d])&&g.node&&"interactive"===g.node.readyState){f=g;break}f?(oa(f),ca(db(f,k[1],k[2]))):Q("error",e("ieDefineFailed",k[0]));Ja()}};qb.amd={vendor:"dojotoolkit.org"};c(c(a,u.loaderPatch),r.loaderPatch);S("error",function(a){try{if(console.error(a),a instanceof Error)for(var d in a);}catch(b){}});c(a,{uid:q,cache:fa,packs:M});if(d.define)Q("error",e("defineAlreadyDefined",0));else{d.define=qb;d.require=a;f(kb,function(a){La(a)});var rb=va.deps||r.deps||u.deps,zc=va.callback||
r.callback||u.callback;a.boot=rb||zc?[rb||[],zc]:0}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:".",name:"dojo"}]});
require({cache:{"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(r,u,s){function t(b){return p[b]=new Function("item","index","array",b)}function l(b){var c=!b;return function(e,g,k){var a=0,d=e&&e.length||0,n;d&&"string"==typeof e&&(e=e.split(""));"string"==typeof g&&(g=p[g]||t(g));if(k)for(;a<d;++a){if(n=!g.call(k,e[a],a,e),b^n)return!n}else for(;a<d;++a)if(n=!g(e[a],a,e),b^n)return!n;return c}}function b(b){var c=1,e=0,g=0;b||(c=e=g=-1);return function(l,a,d,n){if(n&&
0<c)return k.lastIndexOf(l,a,d);n=l&&l.length||0;var v=b?n+g:e;d===m?d=b?e:n+g:0>d?(d=n+d,0>d&&(d=e)):d=d>=n?n+g:d;for(n&&"string"==typeof l&&(l=l.split(""));d!=v;d+=c)if(l[d]==a)return d;return-1}}var p={},m,k={every:l(!1),some:l(!0),indexOf:b(!0),lastIndexOf:b(!1),forEach:function(b,c,e){var g=0,k=b&&b.length||0;k&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=p[c]||t(c));if(e)for(;g<k;++g)c.call(e,b[g],g,b);else for(;g<k;++g)c(b[g],g,b)},map:function(b,c,e,g){var k=0,a=b&&b.length||
0;g=new (g||Array)(a);a&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=p[c]||t(c));if(e)for(;k<a;++k)g[k]=c.call(e,b[k],k,b);else for(;k<a;++k)g[k]=c(b[k],k,b);return g},filter:function(b,c,e){var g=0,k=b&&b.length||0,a=[],d;k&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=p[c]||t(c));if(e)for(;g<k;++g)d=b[g],c.call(e,d,g,b)&&a.push(d);else for(;g<k;++g)d=b[g],c(d,g,b)&&a.push(d);return a},clearCache:function(){p={}}};s.mixin(r,k);return k})},"dojo/_base/kernel":function(){define(["../has",
"./config","require","module"],function(r,u,s,t){var l,b;l=function(){return this}();var p={},m={},k={config:u,global:l,dijit:p,dojox:m},p={dojo:["dojo",k],dijit:["dijit",p],dojox:["dojox",m]};t=s.map&&s.map[t.id.match(/[^\/]+/)[0]];for(b in t)p[b]?p[b][0]=t[b]:p[b]=[t[b],{}];for(b in p)t=p[b],t[1]._scopeName=t[0],u.noGlobals||(l[t[0]]=t[1]);k.scopeMap=p;k.baseUrl=k.config.baseUrl=s.baseUrl;k.isAsync=s.async;k.locale=u.locale;l="$Rev: 18f9767 $".match(/[0-9a-f]{7,}/);k.version={major:1,minor:10,patch:2,
flag:"",revision:l?l[0]:NaN,toString:function(){var b=k.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(k);k.exit=function(){};"undefined"!=typeof console||(console={});t="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var f;for(l=0;f=t[l++];)console[f]||function(){var b=f+"";console[b]="log"in
console?function(){var e=Array.prototype.slice.call(arguments);e.unshift(b+":");console.log(e.join(" "))}:function(){};console[b]._fake=!0}();r.add("dojo-debug-messages",!!u.isDebug);k.deprecated=k.experimental=function(){};r("dojo-debug-messages")&&(k.deprecated=function(b,e,f){b="DEPRECATED: "+b;e&&(b+=" "+e);f&&(b+=" -- will be removed in version: "+f);console.warn(b)},k.experimental=function(b,e){var f="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";e&&(f+=" "+e);console.warn(f)});
if(u.modulePaths){k.deprecated("dojo.modulePaths","use paths configuration");r={};for(b in u.modulePaths)r[b.replace(/\./g,"/")]=u.modulePaths[b];s({paths:r})}k.moduleUrl=function(b,e){k.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var f=null;b&&(f=s.toUrl(b.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/"));return f};k._hasResource={};return k})},"dojo/has":function(){define(["require","module"],function(r,u){var s=r.has||function(){};s.add("dom-addeventlistener",
!!document.addEventListener);s.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);s.add("touch-events","ontouchstart"in document);s.add("pointer-events","onpointerdown"in document);s.add("MSPointer","msMaxTouchPoints"in navigator);s.add("device-width",screen.availWidth||innerWidth);var t=document.createElement("form");s.add("dom-attributes-explicit",0==t.attributes.length);s.add("dom-attributes-specified-flag",0<t.attributes.length&&
40>t.attributes.length);s.clearElement=function(l){l.innerHTML="";return l};s.normalize=function(l,b){var p=l.match(/[\?:]|[^:\?]*/g),m=0,k=function(b){var c=p[m++];if(":"==c)return 0;if("?"==p[m++]){if(!b&&s(c))return k();k(!0);return k(b)}return c||0};return(l=k())&&b(l)};s.load=function(l,b,p){l?b([l],p):p()};return s})},"dojo/_base/config":function(){define(["../has","require"],function(r,u){var s={},t=u.rawConfig,l;for(l in t)s[l]=t[l];!s.locale&&"undefined"!=typeof navigator&&(t=navigator.language||
navigator.userLanguage)&&(s.locale=t.toLowerCase());return s})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(r,u){u.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var s=u("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],t=s.length,l=function(b,c,e){e||(e=b[0]&&r.scopeMap[b[0]]?r.scopeMap[b.shift()][1]:r.global);try{for(var g=0;g<b.length;g++){var k=
b[g];if(!(k in e))if(c)e[k]={};else return;e=e[k]}return e}catch(a){}},b=Object.prototype.toString,p=function(b,c,e){return(e||[]).concat(Array.prototype.slice.call(b,c||0))},m=/\{([^\}]+)\}/g,k={_extraNames:s,_mixin:function(b,c,e){var g,k,a,d={};for(g in c)k=c[g],g in b&&(b[g]===k||g in d&&d[g]===k)||(b[g]=e?e(k):k);if(u("bug-for-in-skips-shadowed")&&c)for(a=0;a<t;++a)g=s[a],k=c[g],g in b&&(b[g]===k||g in d&&d[g]===k)||(b[g]=e?e(k):k);return b},mixin:function(b,c){b||(b={});for(var e=1,g=arguments.length;e<
g;e++)k._mixin(b,arguments[e]);return b},setObject:function(b,c,e){var g=b.split(".");b=g.pop();return(e=l(g,!0,e))&&b?e[b]=c:void 0},getObject:function(b,c,e){return l(b?b.split("."):[],c,e)},exists:function(b,c){return void 0!==k.getObject(b,!1,c)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&(b instanceof Array||"array"==typeof b)},isFunction:function(f){return"[object Function]"===b.call(f)},isObject:function(b){return void 0!==b&&(null===b||
"object"==typeof b||k.isArray(b)||k.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!k.isString(b)&&!k.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(k.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!k.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,c){for(var e=1,g=arguments.length;e<g;e++)k._mixin(b.prototype,arguments[e]);return b},_hitchArgs:function(b,c){var e=k._toArray(arguments,2),g=k.isString(c);return function(){var l=
k._toArray(arguments),a=g?(b||r.global)[c]:c;return a&&a.apply(b||this,e.concat(l))}},hitch:function(b,c){if(2<arguments.length)return k._hitchArgs.apply(r,arguments);c||(c=b,b=null);if(k.isString(c)){b=b||r.global;if(!b[c])throw['lang.hitch: scope["',c,'"] is null (scope="',b,'")'].join("");return function(){return b[c].apply(b,arguments||[])}}return b?function(){return c.apply(b,arguments||[])}:c},delegate:function(){function b(){}return function(c,e){b.prototype=c;var g=new b;b.prototype=null;
e&&k._mixin(g,e);return g}}(),_toArray:u("ie")?function(){function b(c,e,f){f=f||[];for(e=e||0;e<c.length;e++)f.push(c[e]);return f}return function(c){return(c.item?b:p).apply(this,arguments)}}():p,partial:function(b){return k.hitch.apply(r,[null].concat(k._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||k.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var c,e,
g;if(k.isArray(b))for(c=[],e=0,g=b.length;e<g;++e)e in b&&c.push(k.clone(b[e]));else c=b.constructor?new b.constructor:{};return k._mixin(c,b,k.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,c,e){return b.replace(e||m,k.isFunction(c)?c:function(b,e){return k.getObject(e,!1,c)})}};k.mixin(r,k);return k})},"dojo/sniff":function(){define(["./has"],function(r){var u=navigator,s=u.userAgent,u=u.appVersion,
t=parseFloat(u);r.add("air",0<=s.indexOf("AdobeAIR"));r.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0);r.add("khtml",0<=u.indexOf("Konqueror")?t:void 0);r.add("webkit",parseFloat(s.split("WebKit/")[1])||void 0);r.add("chrome",parseFloat(s.split("Chrome/")[1])||void 0);r.add("safari",0<=u.indexOf("Safari")&&!r("chrome")?parseFloat(u.split("Version/")[1]):void 0);r.add("mac",0<=u.indexOf("Macintosh"));r.add("quirks","BackCompat"==document.compatMode);if(s.match(/(iPhone|iPod|iPad)/)){var l=
RegExp.$1.replace(/P/,"p"),b=s.match(/OS ([\d_]+)/)?RegExp.$1:"1",b=parseFloat(b.replace(/_/,".").replace(/_/g,""));r.add(l,b);r.add("ios",b)}r.add("android",parseFloat(s.split("Android ")[1])||void 0);r.add("bb",(0<=s.indexOf("BlackBerry")||0<=s.indexOf("BB10"))&&parseFloat(s.split("Version/")[1])||void 0);r.add("trident",parseFloat(u.split("Trident/")[1])||void 0);r.add("svg","undefined"!==typeof SVGAngle);r("webkit")||(0<=s.indexOf("Opera")&&r.add("opera",9.8<=t?parseFloat(s.split("Version/")[1])||
t:t),0<=s.indexOf("Gecko")&&!r("khtml")&&!r("webkit")&&!r("trident")&&r.add("mozilla",t),r("mozilla")&&r.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0),document.all&&!r("opera")&&(s=parseFloat(u.split("MSIE ")[1])||void 0,(u=document.documentMode)&&5!=u&&Math.floor(s)!=u&&(s=u),r.add("ie",s)),r.add("wii","undefined"!=typeof opera&&opera.wiiremote));return r})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(r,u,s,t){function l(b,
c,e,g,k,a){a=a||"px";b=b.style;isNaN(c)||(b.left=c+a);isNaN(e)||(b.top=e+a);0<=g&&(b.width=g+a);0<=k&&(b.height=k+a)}function b(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function p(f){return"border-box"==m.boxModel||"table"==f.tagName.toLowerCase()||b(f)}var m={boxModel:"content-box"};r("ie")&&(m.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");m.getPadExtents=function(b,c){b=s.byId(b);var e=
c||t.getComputedStyle(b),g=t.toPixelValue,k=g(b,e.paddingLeft),a=g(b,e.paddingTop),d=g(b,e.paddingRight),e=g(b,e.paddingBottom);return{l:k,t:a,r:d,b:e,w:k+d,h:a+e}};m.getBorderExtents=function(b,c){b=s.byId(b);var e=t.toPixelValue,g=c||t.getComputedStyle(b),k="none"!=g.borderLeftStyle?e(b,g.borderLeftWidth):0,a="none"!=g.borderTopStyle?e(b,g.borderTopWidth):0,d="none"!=g.borderRightStyle?e(b,g.borderRightWidth):0,e="none"!=g.borderBottomStyle?e(b,g.borderBottomWidth):0;return{l:k,t:a,r:d,b:e,w:k+
d,h:a+e}};m.getPadBorderExtents=function(b,c){b=s.byId(b);var e=c||t.getComputedStyle(b),g=m.getPadExtents(b,e),e=m.getBorderExtents(b,e);return{l:g.l+e.l,t:g.t+e.t,r:g.r+e.r,b:g.b+e.b,w:g.w+e.w,h:g.h+e.h}};m.getMarginExtents=function(b,c){b=s.byId(b);var e=c||t.getComputedStyle(b),g=t.toPixelValue,k=g(b,e.marginLeft),a=g(b,e.marginTop),d=g(b,e.marginRight),e=g(b,e.marginBottom);return{l:k,t:a,r:d,b:e,w:k+d,h:a+e}};m.getMarginBox=function(b,c){b=s.byId(b);var e=c||t.getComputedStyle(b),g=m.getMarginExtents(b,
e),k=b.offsetLeft-g.l,a=b.offsetTop-g.t,d=b.parentNode,n=t.toPixelValue;if(r("mozilla")){var l=parseFloat(e.left),e=parseFloat(e.top);isNaN(l)||isNaN(e)?d&&d.style&&(d=t.getComputedStyle(d),"visible"!=d.overflow&&(k+="none"!=d.borderLeftStyle?n(b,d.borderLeftWidth):0,a+="none"!=d.borderTopStyle?n(b,d.borderTopWidth):0)):(k=l,a=e)}else(r("opera")||8==r("ie")&&!r("quirks"))&&d&&(d=t.getComputedStyle(d),k-="none"!=d.borderLeftStyle?n(b,d.borderLeftWidth):0,a-="none"!=d.borderTopStyle?n(b,d.borderTopWidth):
0);return{l:k,t:a,w:b.offsetWidth+g.w,h:b.offsetHeight+g.h}};m.getContentBox=function(b,c){b=s.byId(b);var e=c||t.getComputedStyle(b),g=b.clientWidth,k=m.getPadExtents(b,e),a=m.getBorderExtents(b,e);g?(e=b.clientHeight,a.w=a.h=0):(g=b.offsetWidth,e=b.offsetHeight);r("opera")&&(k.l+=a.l,k.t+=a.t);return{l:k.l,t:k.t,w:g-k.w-a.w,h:e-k.h-a.h}};m.setContentSize=function(b,c,e){b=s.byId(b);var g=c.w;c=c.h;p(b)&&(e=m.getPadBorderExtents(b,e),0<=g&&(g+=e.w),0<=c&&(c+=e.h));l(b,NaN,NaN,g,c)};var k={l:0,t:0,
w:0,h:0};m.setMarginBox=function(f,c,e){f=s.byId(f);var g=e||t.getComputedStyle(f);e=c.w;var q=c.h,a=p(f)?k:m.getPadBorderExtents(f,g),g=m.getMarginExtents(f,g);if(r("webkit")&&b(f)){var d=f.style;0<=e&&!d.width&&(d.width="4px");0<=q&&!d.height&&(d.height="4px")}0<=e&&(e=Math.max(e-a.w-g.w,0));0<=q&&(q=Math.max(q-a.h-g.h,0));l(f,c.l,c.t,e,q)};m.isBodyLtr=function(b){b=b||u.doc;return"ltr"==(u.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};m.docScroll=function(b){b=b||u.doc;var c=u.doc.parentWindow||
u.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=r("quirks")?u.body(b):b.documentElement)&&{x:m.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};r("ie")&&(m.getIeDocumentElementOffset=function(b){b=b||u.doc;b=b.documentElement;if(8>r("ie")){var c=b.getBoundingClientRect(),e=c.left,c=c.top;7>r("ie")&&(e+=b.clientLeft,c+=b.clientTop);return{x:0>e?0:e,y:0>c?0:c}}return{x:0,y:0}});m.fixIeBiDiScrollLeft=function(b,c){c=c||u.doc;var e=r("ie");if(e&&!m.isBodyLtr(c)){var g=
r("quirks"),k=g?u.body(c):c.documentElement,a=u.global;6==e&&!g&&a.frameElement&&k.scrollHeight>k.clientHeight&&(b+=k.clientLeft);return 8>e||g?b+k.clientWidth-k.scrollWidth:-b}return b};m.position=function(b,c){b=s.byId(b);var e=u.body(b.ownerDocument),g=b.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>r("ie")){var k=m.getIeDocumentElementOffset(b.ownerDocument);g.x-=k.x+(r("quirks")?e.clientLeft+e.offsetLeft:0);g.y-=k.y+(r("quirks")?e.clientTop+e.offsetTop:0)}c&&
(e=m.docScroll(b.ownerDocument),g.x+=e.x,g.y+=e.y);return g};m.getMarginSize=function(b,c){b=s.byId(b);var e=m.getMarginExtents(b,c||t.getComputedStyle(b)),g=b.getBoundingClientRect();return{w:g.right-g.left+e.w,h:g.bottom-g.top+e.h}};m.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!r("dom-addeventlistener")){var c=b.target,c=c&&c.ownerDocument||document,e=r("quirks")?c.body:c.documentElement,g=m.getIeDocumentElementOffset(c);b.pageX=b.clientX+m.fixIeBiDiScrollLeft(e.scrollLeft||
0,c)-g.x;b.pageY=b.clientY+(e.scrollTop||0)-g.y}};return m})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(r,u,s){var t={global:r.global,doc:r.global.document||null,body:function(l){l=l||r.doc;return l.body||l.getElementsByTagName("body")[0]},setContext:function(l,b){r.global=t.global=l;r.doc=t.doc=b},withGlobal:function(l,b,p,m){var k=r.global;try{return r.global=t.global=l,t.withDoc.call(null,l.document,b,p,m)}finally{r.global=t.global=k}},withDoc:function(l,b,
p,m){var k=t.doc,f=s("quirks"),c=s("ie"),e,g,q;try{return r.doc=t.doc=l,r.isQuirks=s.add("quirks","BackCompat"==r.doc.compatMode,!0,!0),s("ie")&&(q=l.parentWindow)&&q.navigator&&(e=parseFloat(q.navigator.appVersion.split("MSIE ")[1])||void 0,(g=l.documentMode)&&5!=g&&Math.floor(e)!=g&&(e=g),r.isIE=s.add("ie",e,!0,!0)),p&&"string"==typeof b&&(b=p[b]),b.apply(p,m||[])}finally{r.doc=t.doc=k,r.isQuirks=s.add("quirks",f,!0,!0),r.isIE=s.add("ie",c,!0,!0)}}};u.mixin(r,t);return t})},"dojo/dom":function(){define(["./sniff",
"./_base/window"],function(r,u){if(7>=r("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}var t={};r("ie")?t.byId=function(b,l){if("string"!=typeof b)return b;var m=l||u.doc,k=b&&m.getElementById(b);if(!k||k.attributes.id.value!=b&&k.id!=b){m=m.all[b];if(!m||m.nodeName)m=[m];for(var f=0;k=m[f++];)if(k.attributes&&k.attributes.id&&k.attributes.id.value==b||k.id==b)return k}else return k}:t.byId=function(b,l){return("string"==typeof b?(l||u.doc).getElementById(b):b)||null};t.isDescendant=
function(b,l){try{for(b=t.byId(b),l=t.byId(l);b;){if(b==l)return!0;b=b.parentNode}}catch(m){}return!1};r.add("css-user-select",function(b,l,m){if(!m)return!1;b=m.style;l=["Khtml","O","Moz","Webkit"];m=l.length;var k="userSelect";do if("undefined"!==typeof b[k])return k;while(m--&&(k=l[m]+"UserSelect"));return!1});var l=r("css-user-select");t.setSelectable=l?function(b,p){t.byId(b).style[l]=p?"":"none"}:function(b,l){b=t.byId(b);var m=b.getElementsByTagName("*"),k=m.length;if(l)for(b.removeAttribute("unselectable");k--;)m[k].removeAttribute("unselectable");
else for(b.setAttribute("unselectable","on");k--;)m[k].setAttribute("unselectable","on")};return t})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(r,u){function s(e,k,a){k=k.toLowerCase();if(r("ie")||r("trident")){if("auto"==a){if("height"==k)return e.offsetHeight;if("width"==k)return e.offsetWidth}if("fontweight"==k)switch(a){case 700:return"bold";default:return"normal"}}k in f||(f[k]=c.test(k));return f[k]?b(e,a):a}var t,l={};t=r("webkit")?function(b){var c;if(1==b.nodeType){var a=
b.ownerDocument.defaultView;c=a.getComputedStyle(b,null);!c&&b.style&&(b.style.display="",c=a.getComputedStyle(b,null))}return c||{}}:r("ie")&&(9>r("ie")||r("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};l.getComputedStyle=t;var b;b=r("ie")?function(b,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&"px"==c.slice(-2))return parseFloat(c);var a=b.style,d=b.runtimeStyle,e=a.left,
f=d.left;d.left=b.currentStyle.left;try{a.left=c,c=a.pixelLeft}catch(k){c=0}a.left=e;d.left=f;return c}:function(b,c){return parseFloat(c)||0};l.toPixelValue=b;var p=function(b,c){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(a){return c?{}:null}},m=9>r("ie")||10>r("ie")&&r("quirks")?function(b){try{return p(b).Opacity/100}catch(c){return 1}}:function(b){return t(b).opacity},k=9>r("ie")||10>r("ie")&&r("quirks")?function(b,c){""===c&&(c=1);var a=100*c;1===c?(b.style.zoom="",p(b)&&
(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,p(b)?p(b,1).Opacity=a:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+a+")",p(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(a=b.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&k(a,c);return c}:function(b,c){return b.style.opacity=c},f={left:!0,top:!0},c=/margin|padding|width|height|max|min|offset/,e={cssFloat:1,styleFloat:1,"float":1};l.get=
function(b,c){var a=u.byId(b),d=arguments.length;if(2==d&&"opacity"==c)return m(a);c=e[c]?"cssFloat"in a.style?"cssFloat":"styleFloat":c;var f=l.getComputedStyle(a);return 1==d?f:s(a,c,f[c]||a.style[c])};l.set=function(b,c,a){var d=u.byId(b),f=arguments.length,m="opacity"==c;c=e[c]?"cssFloat"in d.style?"cssFloat":"styleFloat":c;if(3==f)return m?k(d,a):d.style[c]=a;for(var p in c)l.set(b,p,c[p]);return l.getComputedStyle(d)};return l})},"dojo/aspect":function(){define([],function(){function r(b,k,
f,c){var e=b[k],g="around"==k,l;if(g){var a=f(function(){return e.advice(this,arguments)});l={remove:function(){a&&(a=b=f=null)},advice:function(d,b){return a?a.apply(d,b):e.advice(d,b)}}}else l={remove:function(){if(l.advice){var a=l.previous,c=l.next;c||a?(a?a.next=c:b[k]=c,c&&(c.previous=a)):delete b[k];b=f=l.advice=null}},id:t++,advice:f,receiveArguments:c};if(e&&!g)if("after"==k){for(;e.next&&(e=e.next););e.next=l;l.previous=e}else"before"==k&&(b[k]=l,l.next=e,e.previous=l);else b[k]=l;return l}
function u(b){return function(k,f,c,e){var g=k[f],l;g&&g.target==k||(k[f]=l=function(){for(var a=t,d=arguments,b=l.before;b;)d=b.advice.apply(this,d)||d,b=b.next;if(l.around)var c=l.around.advice(this,d);for(b=l.after;b&&b.id<a;){if(b.receiveArguments)var e=b.advice.apply(this,d),c=e===s?c:e;else c=b.advice.call(this,c,d);b=b.next}return c},g&&(l.around={advice:function(a,d){return g.apply(a,d)}}),l.target=k);k=r(l||g,b,c,e);c=null;return k}}var s,t=0,l=u("after"),b=u("before"),p=u("around");return{before:b,
around:p,after:l}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(r,u,s){function t(a,d,b,c,f){if(c=d.match(/(.*):(.*)/))return d=c[2],c=c[1],m.selector(c,d).call(f,a,b);s("touch")&&(k.test(d)&&(b=C(b)),s("event-orientationchange")||"orientationchange"!=d||(d="resize",a=window,b=C(b)));q&&(b=q(b));if(a.addEventListener){var g=d in e,n=g?e[d]:d;a.addEventListener(n,b,g);return{remove:function(){a.removeEventListener(n,b,g)}}}if(v&&a.attachEvent)return v(a,
"on"+d,b);throw Error("Target must be an event emitter");}function l(){this.cancelable=!1;this.defaultPrevented=!0}function b(){this.bubbles=!1}var p=window.ScriptEngineMajorVersion;s.add("jscript",p&&p()+ScriptEngineMinorVersion()/10);s.add("event-orientationchange",s("touch")&&!s("android"));s.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);s.add("event-focusin",function(a,d,b){return"onfocusin"in b});s("touch")&&s.add("touch-can-modify-event-delegate",
function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var d=new a;d.target=null;return null===d.target}catch(b){return!1}});var m=function(a,d,b,c){return"function"!=typeof a.on||"function"==typeof d||a.nodeType?m.parse(a,d,b,t,c,this):a.on(d,b)};m.pausable=function(a,d,b,c){var e;a=m(a,d,function(){if(!e)return b.apply(this,arguments)},c);a.pause=function(){e=!0};a.resume=function(){e=!1};return a};m.once=function(a,d,b,c){var e=m(a,d,function(){e.remove();return b.apply(this,
arguments)});return e};m.parse=function(a,d,b,c,e,f){if(d.call)return d.call(f,a,b);if(d instanceof Array)g=d;else if(-1<d.indexOf(","))var g=d.split(/\s*,\s*/);if(g){var k=[];d=0;for(var n;n=g[d++];)k.push(m.parse(a,n,b,c,e,f));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}return c(a,d,b,e,f)};var k=/^touch/;m.matches=function(a,d,b,c,e){e=e&&e.matches?e:u.query;c=!1!==c;1!=a.nodeType&&(a=a.parentNode);for(;!e.matches(a,d,b);)if(a==b||!1===c||!(a=a.parentNode)||1!=a.nodeType)return!1;
return a};m.selector=function(a,d,b){return function(c,e){function f(d){return m.matches(d,a,c,b,g)}var g="function"==typeof a?{matches:a}:this,k=d.bubble;return k?m(c,k(f),e):m(c,d,function(a){var d=f(a.target);if(d)return e.call(d,a)})}};var f=[].slice,c=m.emit=function(a,d,c){var e=f.call(arguments,2),g="on"+d;if("parentNode"in a){var k=e[0]={},n;for(n in c)k[n]=c[n];k.preventDefault=l;k.stopPropagation=b;k.target=a;k.type=d;c=k}do a[g]&&a[g].apply(a,e);while(c&&c.bubbles&&(a=a.parentNode));return c&&
c.cancelable&&c},e=s("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!s("event-stopimmediatepropagation"))var g=function(){this.modified=this.immediatelyStopped=!0},q=function(a){return function(d){if(!d.immediatelyStopped)return d.stopImmediatePropagation=g,a.apply(this,arguments)}};if(s("dom-addeventlistener"))m.emit=function(a,d,b){if(a.dispatchEvent&&document.createEvent){var e=(a.ownerDocument||document).createEvent("HTMLEvents");e.initEvent(d,!!b.bubbles,!!b.cancelable);for(var f in b)f in
e||(e[f]=b[f]);return a.dispatchEvent(e)&&e}return c.apply(m,arguments)};else{m._fixEvent=function(d,b){d||(d=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!d)return d;try{a&&d.type==a.type&&d.srcElement==a.target&&(d=a)}catch(c){}if(!d.target)switch(d.target=d.srcElement,d.currentTarget=b||d.srcElement,"mouseover"==d.type&&(d.relatedTarget=d.fromElement),"mouseout"==d.type&&(d.relatedTarget=d.toElement),d.stopPropagation||(d.stopPropagation=y,d.preventDefault=A),d.type){case "keypress":var e=
"charCode"in d?d.charCode:d.keyCode;10==e?(e=0,d.keyCode=13):13==e||27==e?e=0:3==e&&(e=99);d.charCode=e;e=d;e.keyChar=e.charCode?String.fromCharCode(e.charCode):"";e.charOrCode=e.keyChar||e.keyCode}return d};var a,d=function(a){this.handle=a};d.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var n=function(d){return function(b){b=m._fixEvent(b,this);var c=d.call(this,b);b.modified&&(a||setTimeout(function(){a=null}),a=b);return c}},v=function(a,b,c){c=n(c);if(((a.ownerDocument?
a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>s("jscript"))&&!s("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=a[b];if(!e||!e.listeners){var f=e,e=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");e.listeners=[];a[b]=e;e.global=this;f&&e.listeners.push(_dojoIEListeners_.push(f)-1)}e.listeners.push(a=
e.global._dojoIEListeners_.push(c)-1);return new d(a)}return r.after(a,b,c,!0)},y=function(){this.cancelBubble=!0},A=m._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(s("touch"))var z=function(){},B=window.orientation,C=function(a){return function(d){var b=d.corrected;if(!b){var c=d.type;try{delete d.type}catch(e){}if(d.type){if(s("touch-can-modify-event-delegate"))z.prototype=
d,b=new z;else{var b={},f;for(f in d)b[f]=d[f]}b.preventDefault=function(){d.preventDefault()};b.stopPropagation=function(){d.stopPropagation()}}else b=d,b.type=c;d.corrected=b;if("resize"==c){if(B==window.orientation)return null;B=window.orientation;b.type="orientationchange";return a.call(this,b)}"rotation"in b||(b.rotation=0,b.scale=1);var c=b.changedTouches[0],g;for(g in c)delete b[g],b[g]=c[g]}return a.call(this,b)}};return m})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(r,u,s,t,l,b,p,m,k){s.add("dojo-preload-i18n-Api",1);var f=r.i18n={},c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,e=function(a,d,b,c){var e=[b+c];d=d.split("-");for(var f="",g=0;g<d.length;g++)if(f+=(f?"-":"")+d[g],!a||a[f])e.push(b+f+"/"+c),e.specificity=f;return e},g={},q=function(a,d,b){b=b?b.toLowerCase():r.locale;a=a.replace(/\./g,"/");d=d.replace(/\./g,"/");return/root/i.test(b)?a+"/nls/"+d:a+"/nls/"+b+"/"+d},a=r.getL10nName=function(a,d,b){return k.id+"!"+q(a,d,b)},d=function(a,d,c,
f,k,n){a([d],function(l){var m=b.clone(l.root||l.ROOT),q=e(!l._v1x&&l,k,c,f);a(q,function(){for(var a=1;a<q.length;a++)m=b.mixin(b.clone(m),arguments[a]);g[d+"/"+k]=m;m.$locale=q.specificity;n()})})},n=function(a){var d=l.extraLocale||[],d=b.isArray(d)?d:[d];d.push(a);return d},v=function(a,e,f){if(s("dojo-preload-i18n-Api")){var k=a.split("*"),l="preload"==k[1];l&&(g[a]||(g[a]=1,C(k[2],m.parse(k[3]),1,e)),f(1));(k=l)||(z&&B.push([a,e,f]),k=z);if(k)return}a=c.exec(a);var q=a[1]+"/",v=a[5]||a[4],p=
q+v,k=(a=a[5]&&a[4])||r.locale||"",y=p+"/"+k;a=a?[k]:n(k);var A=a.length,u=function(){--A||f(b.delegate(g[y]))};t.forEach(a,function(a){var b=p+"/"+a;s("dojo-preload-i18n-Api")&&E(b);g[b]?u():d(e,p,q,v,a,u)})};if(s("dojo-unit-tests"))var y=f.unitTests=[];s("dojo-preload-i18n-Api");var A=f.normalizeLocale=function(a){a=a?a.toLowerCase():r.locale;return"root"==a?"ROOT":a},z=0,B=[],C=f._preloadLocalizations=function(a,d,c,e){function f(a,d){e.isXdUrl(u.toUrl(a+".js"))||c?e([a],d):L([a],d,e)}function k(a,
d){for(var b=a.split("-");b.length;){if(d(b.join("-")))return;b.pop()}d("ROOT")}function n(){for(--z;!z&&B.length;)v.apply(null,B.shift())}function l(c){c=A(c);k(c,function(l){if(0<=t.indexOf(d,l)){var m=a.replace(/\./g,"/")+"_"+l;z++;f(m,function(a){for(var d in a){var f=a[d],m=d.match(/(.+)\/([^\/]+)$/),q;if(m){q=m[2];m=m[1]+"/";f._localized=f._localized||{};var v;if("ROOT"===l){var p=v=f._localized;delete f._localized;p.root=f;g[u.toAbsMid(d)]=p}else v=f._localized,g[u.toAbsMid(m+q+"/"+l)]=f;l!==
c&&function(a,d,f,l){var m=[],q=[];k(c,function(b){l[b]&&(m.push(u.toAbsMid(a+b+"/"+d)),q.push(u.toAbsMid(a+d+"/"+b)))});m.length?(z++,e(m,function(){for(var e=0;e<m.length;e++)f=b.mixin(b.clone(f),arguments[e]),g[q[e]]=f;g[u.toAbsMid(a+d+"/"+c)]=b.clone(f);n()})):g[u.toAbsMid(a+d+"/"+c)]=f}(m,q,f,v)}}n()});return!0}return!1})}e=e||u;l();t.forEach(r.config.extraLocale,l)},E=function(){},D={},H=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
L=function(a,d,b){var c=[];t.forEach(a,function(a){function d(b){b=H(b,E,a,D);b===D?c.push(g[e]=D.result):(b instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+e,b),b={}),c.push(g[e]=/nls\/[^\/]+\/[^\/]+$/.test(e)?b:{root:b,_v1x:1}))}var e=b.toUrl(a+".js");if(g[e])c.push(g[e]);else{var f=b.syncLoadNls(a);if(f)c.push(f);else if(p)p.get({url:e,sync:!0,load:d,error:function(){c.push(g[e]={})}});else try{b.getText(e,!0,d)}catch(k){c.push(g[e]={})}}});d&&d.apply(null,c)},E=function(a){for(var d,
b=a.split("/"),c=r.global[b[0]],e=1;c&&e<b.length-1;c=c[b[e++]]);c&&((d=c[b[e]])||(d=c[b[e].replace(/-/g,"_")]),d&&(g[a]=d));return d};f.getLocalization=function(a,d,b){var c;a=q(a,d,b);v(a,u.isXdUrl(u.toUrl(a+".js"))?u:function(a,d){L(a,d,u)},function(a){c=a});return c};s("dojo-unit-tests")&&y.push(function(a){a.register("tests.i18n.unit",function(a){var d;d=H("{prop:1}",E,"nonsense",D);a.is({prop:1},d);a.is(void 0,d[1]);d=H("({prop:1})",E,"nonsense",D);a.is({prop:1},d);a.is(void 0,d[1]);d=H("{'prop-x':1}",
E,"nonsense",D);a.is({"prop-x":1},d);a.is(void 0,d[1]);d=H("({'prop-x':1})",E,"nonsense",D);a.is({"prop-x":1},d);a.is(void 0,d[1]);d=H("define({'prop-x':1})",E,"nonsense",D);a.is(D,d);a.is({"prop-x":1},D.result);d=H("define('some/module', {'prop-x':1})",E,"nonsense",D);a.is(D,d);a.is({"prop-x":1},D.result);d=H("this is total nonsense and should throw an error",E,"nonsense",D);a.is(d instanceof Error,!0)})});return b.mixin(f,{dynamic:!0,normalize:function(a,d){return/^\./.test(a)?d(a):a},load:v,cache:g,
getL10nName:a})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){r._xhrObj=a._create;var n=r.config;r.objectToQuery=t.objectToQuery;r.queryToObject=t.queryToObject;r.fieldToObject=b.fieldToObject;r.formToObject=b.toObject;r.formToQuery=b.toQuery;r.formToJson=b.toJson;r._blockAsync=!1;var v=r._contentHandlers=
r.contentHandlers={text:function(a){return a.responseText},json:function(a){return k.fromJson(a.responseText||null)},"json-comment-filtered":function(a){m.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");a=a.responseText;var d=a.indexOf("/*"),b=a.lastIndexOf("*/");
if(-1==d||-1==b)throw Error("JSON was not comment filtered");return k.fromJson(a.substring(d+2,b))},javascript:function(a){return r.eval(a.responseText)},xml:function(a){var d=a.responseXML;d&&u("dom-qsa2.1")&&!d.querySelectorAll&&u("dom-parser")&&(d=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(u("ie")&&(!d||!d.documentElement)){var b=function(a){return"MSXML"+a+".DOMDocument"},b=["Microsoft.XMLDOM",b(6),b(4),b(3),b(2)];c.some(b,function(b){try{var c=new ActiveXObject(b);
c.async=!1;c.loadXML(a.responseText);d=c}catch(e){return!1}return!0})}return d},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?v["json-comment-filtered"](a):v.json(a)}};r._ioSetArgs=function(a,d,c,e){var g={args:a,url:a.url},k=null;if(a.form){var k=l.byId(a.form),m=k.getAttributeNode("action");g.url=g.url||(m?m.value:null);k=b.toObject(k)}m=[{}];k&&m.push(k);a.content&&m.push(a.content);a.preventCache&&m.push({"dojo.preventCache":(new Date).valueOf()});
g.query=t.objectToQuery(f.mixin.apply(null,m));g.handleAs=a.handleAs||"text";var q=new p(function(a){a.canceled=!0;d&&d(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});q.addCallback(c);var v=a.load;v&&f.isFunction(v)&&q.addCallback(function(d){return v.call(a,d,g)});var y=a.error;y&&f.isFunction(y)&&q.addErrback(function(d){return y.call(a,d,g)});var A=a.handle;A&&f.isFunction(A)&&q.addBoth(function(d){return A.call(a,d,g)});q.addErrback(function(a){return e(a,
q)});n.ioPublish&&r.publish&&!1!==g.args.ioPublish&&(q.addCallbacks(function(a){r.publish("/dojo/io/load",[q,a]);return a},function(a){r.publish("/dojo/io/error",[q,a]);return a}),q.addBoth(function(a){r.publish("/dojo/io/done",[q,a]);return a}));q.ioArgs=g;return q};var y=function(a){a=v[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},A=function(a,d){d.ioArgs.args.failOk||console.error(a);return a},z=function(a){0>=B&&(B=0,n.ioPublish&&r.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&
r.publish("/dojo/io/stop"))},B=0;g.after(q,"_onAction",function(){B-=1});g.after(q,"_onInFlight",z);r._ioCancelAll=q.cancelAll;r._ioNotifyStart=function(a){n.ioPublish&&r.publish&&!1!==a.ioArgs.args.ioPublish&&(B||r.publish("/dojo/io/start"),B+=1,r.publish("/dojo/io/send",[a]))};r._ioWatch=function(a,d,b,c){a.ioArgs.options=a.ioArgs.args;f.mixin(a,{response:a.ioArgs,isValid:function(b){return d(a)},isReady:function(d){return b(a)},handleResponse:function(d){return c(a)}});q(a);z(a)};r._ioAddQueryToUrl=
function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null)};r.xhr=function(d,b,c){var e,f=r._ioSetArgs(b,function(a){e&&e.cancel()},y,A),g=f.ioArgs;"postData"in b?g.query=b.postData:"putData"in b?g.query=b.putData:"rawBody"in b?g.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(d.toUpperCase()))&&r._ioAddQueryToUrl(g);var k={method:d,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:g};"undefined"!==typeof b.headers&&(k.headers=
b.headers);"undefined"!==typeof b.contentType&&(k.headers||(k.headers={}),k.headers["Content-Type"]=b.contentType);"undefined"!==typeof g.query&&(k.data=g.query);"undefined"!==typeof b.sync&&(k.sync=b.sync);r._ioNotifyStart(f);try{e=a(g.url,k,!0)}catch(n){return f.cancel(),f}f.ioArgs.xhr=e.response.xhr;e.then(function(){f.resolve(f)}).otherwise(function(a){g.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);f.reject(a)});return f};r.xhrGet=function(a){return r.xhr("GET",
a)};r.rawXhrPost=r.xhrPost=function(a){return r.xhr("POST",a,!0)};r.rawXhrPut=r.xhrPut=function(a){return r.xhr("PUT",a,!0)};r.xhrDelete=function(a){return r.xhr("DELETE",a)};r._isDocumentOk=function(a){return d.checkStatus(a.status)};r._getText=function(a){var d;r.xhrGet({url:a,sync:!0,load:function(a){d=a}});return d};f.mixin(r.xhr,{_xhrObj:r._xhrObj,fieldToObject:b.fieldToObject,formToObject:b.toObject,objectToQuery:t.objectToQuery,formToQuery:b.toQuery,formToJson:b.toJson,queryToObject:t.queryToObject,
contentHandlers:v,_ioSetArgs:r._ioSetArgs,_ioCancelAll:r._ioCancelAll,_ioNotifyStart:r._ioNotifyStart,_ioWatch:r._ioWatch,_ioAddQueryToUrl:r._ioAddQueryToUrl,_isDocumentOk:r._isDocumentOk,_getText:r._getText,get:r.xhrGet,post:r.xhrPost,put:r.xhrPut,del:r.xhrDelete});return r.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(r,u,s){r._name="browser";u.mixin(r,{isBrowser:!0,isFF:s("ff"),isIE:s("ie"),isKhtml:s("khtml"),isWebKit:s("webkit"),isMozilla:s("mozilla"),isMoz:s("mozilla"),
isOpera:s("opera"),isSafari:s("safari"),isChrome:s("chrome"),isMac:s("mac"),isIos:s("ios"),isAndroid:s("android"),isWii:s("wii"),isQuirks:s("quirks"),isAir:s("air")});return s})},"dojo/io-query":function(){define(["./_base/lang"],function(r){var u={};return{objectToQuery:function(s){var t=encodeURIComponent,l=[],b;for(b in s){var p=s[b];if(p!=u[b]){var m=t(b)+"=";if(r.isArray(p))for(var k=0,f=p.length;k<f;++k)l.push(m+t(p[k]));else l.push(m+t(p))}}return l.join("&")},queryToObject:function(s){var t=
decodeURIComponent;s=s.split("&");for(var l={},b,p,m=0,k=s.length;m<k;++m)if(p=s[m],p.length){var f=p.indexOf("=");0>f?(b=t(p),p=""):(b=t(p.slice(0,f)),p=t(p.slice(f+1)));"string"==typeof l[b]&&(l[b]=[l[b]]);r.isArray(l[b])?l[b].push(p):l[b]=p}return l}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(r,u,s,t){var l={fieldToObject:function(b){var l=null;if(b=u.byId(b)){var m=b.name,k=(b.type||"").toLowerCase();if(m&&k&&!b.disabled)if("radio"==k||"checkbox"==
k)b.checked&&(l=b.value);else if(b.multiple)for(l=[],b=[b.firstChild];b.length;)for(m=b.pop();m;m=m.nextSibling)if(1==m.nodeType&&"option"==m.tagName.toLowerCase())m.selected&&l.push(m.value);else{m.nextSibling&&b.push(m.nextSibling);m.firstChild&&b.push(m.firstChild);break}else l=b.value}return l},toObject:function(b){var p={};b=u.byId(b).elements;for(var m=0,k=b.length;m<k;++m){var f=b[m],c=f.name,e=(f.type||"").toLowerCase();if(c&&e&&0>"file|submit|image|reset|button".indexOf(e)&&!f.disabled){var g=
p,q=c,f=l.fieldToObject(f);if(null!==f){var a=g[q];"string"==typeof a?g[q]=[a,f]:r.isArray(a)?a.push(f):g[q]=f}"image"==e&&(p[c+".x"]=p[c+".y"]=p[c].x=p[c].y=0)}}return p},toQuery:function(b){return s.objectToQuery(l.toObject(b))},toJson:function(b,p){return t.stringify(l.toObject(b),null,p?4:0)}};return l})},"dojo/json":function(){define(["./has"],function(r){var u="undefined"!=typeof JSON;r.add("json-parse",u);r.add("json-stringify",u&&'{"a":1}'==JSON.stringify({a:0},function(r,l){return l||1}));
if(r("json-stringify"))return JSON;var s=function(r){return('"'+r.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:r("json-parse")?JSON.parse:function(r,l){if(l&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(r))throw new SyntaxError("Invalid characters in JSON");return eval("("+r+")")},stringify:function(r,l,b){function p(k,f,c){l&&
(k=l(c,k));var e;e=typeof k;if("number"==e)return isFinite(k)?k+"":"null";if("boolean"==e)return k+"";if(null===k)return"null";if("string"==typeof k)return s(k);if("function"==e||"undefined"==e)return m;if("function"==typeof k.toJSON)return p(k.toJSON(c),f,c);if(k instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,d,b){a=k["getUTC"+d]()+(b?1:0);return 10>a?"0"+a:a});if(k.valueOf()!==k)return p(k.valueOf(),f,c);var g=b?f+b:"",q=b?
" ":"",a=b?"\n":"";if(k instanceof Array){var q=k.length,d=[];for(c=0;c<q;c++)e=p(k[c],g,c),"string"!=typeof e&&(e="null"),d.push(a+g+e);return"["+d.join(",")+a+f+"]"}d=[];for(c in k){var n;if(k.hasOwnProperty(c)){if("number"==typeof c)n='"'+c+'"';else if("string"==typeof c)n=s(c);else continue;e=p(k[c],g,c);"string"==typeof e&&d.push(a+g+n+":"+q+e)}}return"{"+d.join(",")+a+f+"}"}var m;"string"==typeof l&&(b=l,l=null);return p(r,"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
function(r,u,s,t,l,b,p){var m=function(){},k=Object.freeze||function(){},f=r.Deferred=function(c){function e(d){if(a)throw Error("This deferred has already been resolved");q=d;a=!0;g()}function g(){for(var d;!d&&A;){var c=A;A=A.next;if(d=c.progress==m)a=!1;var e=v?c.error:c.resolved;l("config-useDeferredInstrumentation")&&v&&u.instrumentRejected&&u.instrumentRejected(q,!!e);if(e)try{var f=e(q);f&&"function"===typeof f.then?f.then(b.hitch(c.deferred,"resolve"),b.hitch(c.deferred,"reject"),b.hitch(c.deferred,
"progress")):(e=d&&void 0===f,d&&!e&&(v=f instanceof Error),c.deferred[e&&v?"reject":"resolve"](e?q:f))}catch(g){c.deferred.reject(g)}else v?c.deferred.reject(q):c.deferred.resolve(q)}}var q,a,d,n,v,p,A,z=this.promise=new s;this.isResolved=z.isResolved=function(){return 0==n};this.isRejected=z.isRejected=function(){return 1==n};this.isFulfilled=z.isFulfilled=function(){return 0<=n};this.isCanceled=z.isCanceled=function(){return d};this.resolve=this.callback=function(a){this.fired=n=0;this.results=
[a,null];e(a)};this.reject=this.errback=function(a){v=!0;this.fired=n=1;l("config-useDeferredInstrumentation")&&u.instrumentRejected&&u.instrumentRejected(a,!!A);e(a);this.results=[null,a]};this.progress=function(a){for(var d=A;d;){var b=d.progress;b&&b(a);d=d.next}};this.addCallbacks=function(a,d){this.then(a,d,m);return this};z.then=this.then=function(d,b,c){var e=c==m?this:new f(z.cancel);d={resolved:d,error:b,progress:c,deferred:e};A?p=p.next=d:A=p=d;a&&g();return e.promise};var r=this;z.cancel=
this.cancel=function(){if(!a){var b=c&&c(r);a||(b instanceof Error||(b=new t(b)),b.log=!1,r.reject(b))}d=!0};k(z)};b.extend(f,{addCallback:function(c){return this.addCallbacks(b.hitch.apply(r,arguments))},addErrback:function(c){return this.addCallbacks(null,b.hitch.apply(r,arguments))},addBoth:function(c){var e=b.hitch.apply(r,arguments);return this.addCallbacks(e,e)},fired:-1});f.when=r.when=p;return f})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./promise/instrumentation"],function(r,u,s,t,l){var b=Object.freeze||function(){},p=function(b,f,k,a,d){2===f&&c.instrumentRejected&&0===b.length&&c.instrumentRejected(k,!1,a,d);for(d=0;d<b.length;d++)m(b[d],f,k,a)},m=function(b,g,l,a){var d=b[g],n=b.deferred;if(d)try{var m=d(l);if(0===g)"undefined"!==typeof m&&f(n,g,m);else{if(m&&"function"===typeof m.then){b.cancel=m.cancel;m.then(k(n,1),k(n,2),k(n,0));return}f(n,1,m)}}catch(p){f(n,2,p)}else f(n,g,l);2===g&&c.instrumentRejected&&c.instrumentRejected(l,
!!d,a,n.promise)},k=function(b,c){return function(k){f(b,c,k)}},f=function(b,c,f){if(!b.isCanceled())switch(c){case 0:b.progress(f);break;case 1:b.resolve(f);break;case 2:b.reject(f)}},c=function(e){var f=this.promise=new t,k=this,a,d,n,l=!1,y=[];Error.captureStackTrace&&(Error.captureStackTrace(k,c),Error.captureStackTrace(f,c));this.isResolved=f.isResolved=function(){return 1===a};this.isRejected=f.isRejected=function(){return 2===a};this.isFulfilled=f.isFulfilled=function(){return!!a};this.isCanceled=
f.isCanceled=function(){return l};this.progress=function(d,b){if(a){if(!0===b)throw Error("This deferred has already been fulfilled.");return f}p(y,0,d,null,k);return f};this.resolve=function(b,c){if(a){if(!0===c)throw Error("This deferred has already been fulfilled.");return f}p(y,a=1,d=b,null,k);y=null;return f};var A=this.reject=function(b,c){if(a){if(!0===c)throw Error("This deferred has already been fulfilled.");return f}Error.captureStackTrace&&Error.captureStackTrace(n={},A);p(y,a=2,d=b,n,
k);y=null;return f};this.then=f.then=function(b,e,k){var l=[k,b,e];l.cancel=f.cancel;l.deferred=new c(function(a){return l.cancel&&l.cancel(a)});a&&!y?m(l,a,d,n):y.push(l);return l.deferred.promise};this.cancel=f.cancel=function(b,c){if(!a){if(e){var f=e(b);b="undefined"===typeof f?b:f}l=!0;if(!a)return"undefined"===typeof b&&(b=new s),A(b),b;if(2===a&&d===b)return b}else if(!0===c)throw Error("This deferred has already been fulfilled.");};b(f)};c.prototype.toString=function(){return"[object Deferred]"};
l&&l(c);return c})},"dojo/errors/CancelError":function(){define(["./create"],function(r){return r("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(r){return function(u,s,t,l){t=t||Error;var b=function(l){if(t===Error){Error.captureStackTrace&&Error.captureStackTrace(this,b);var m=Error.call(this,l),k;for(k in m)m.hasOwnProperty(k)&&(this[k]=m[k]);this.message=l;this.stack=m.stack}else t.apply(this,arguments);s&&s.apply(this,arguments)};
b.prototype=r.delegate(t.prototype,l);b.prototype.name=u;return b.prototype.constructor=b}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(r){function u(){throw new TypeError("abstract");}return r.extend(function(){},{then:function(r,t,l){u()},cancel:function(r,t){u()},isResolved:function(){u()},isRejected:function(){u()},isFulfilled:function(){u()},isCanceled:function(){u()},always:function(r){return this.then(r,r)},otherwise:function(r){return this.then(null,r)},trace:function(){return this},
traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(r,u,s,t){function l(b,c,f){var a="";b&&b.stack&&(a+=b.stack);c&&c.stack&&(a+="\n    ----------------------------------------\n    rejected"+c.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));f&&f.stack&&(a+="\n    ----------------------------------------\n"+f.stack);console.error(b,a)}function b(b,
c,f,a){c||l(b,f,a)}function p(b,g,l,a){t.some(k,function(a){if(a.error===b)return g&&(a.handled=!0),!0})||k.push({error:b,rejection:l,handled:g,deferred:a,timestamp:(new Date).getTime()});f||(f=setTimeout(m,c))}function m(){var b=(new Date).getTime(),g=b-c;k=t.filter(k,function(b){return b.timestamp<g?(b.handled||l(b.error,b.rejection,b.deferred),!1):!0});f=k.length?setTimeout(m,k[0].timestamp+c-b):!1}u.add("config-useDeferredInstrumentation","report-unhandled-rejections");var k=[],f=!1,c=1E3;return function(e){var f=
u("config-useDeferredInstrumentation");if(f){r.on("resolved",s.hitch(console,"log","resolved"));r.on("rejected",s.hitch(console,"log","rejected"));r.on("progress",s.hitch(console,"log","progress"));var k=[];"string"===typeof f&&(k=f.split(","),f=k.shift());if("report-rejections"===f)e.instrumentRejected=b;else if("report-unhandled-rejections"===f||!0===f||1===f)e.instrumentRejected=p,c=parseInt(k[0],10)||c;else throw Error("Unsupported instrumentation usage <"+f+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang",
"./Promise","../Evented"],function(r,u,s){function t(p){setTimeout(function(){b.apply(l,p)},0)}var l=new s,b=l.emit;l.emit=null;u.prototype.trace=function(){var b=r._toArray(arguments);this.then(function(l){t(["resolved",l].concat(b))},function(l){t(["rejected",l].concat(b))},function(l){t(["progress",l].concat(b))});return this};u.prototype.traceRejected=function(){var b=r._toArray(arguments);this.otherwise(function(l){t(["rejected",l].concat(b))});return this};return l})},"dojo/Evented":function(){define(["./aspect",
"./on"],function(r,u){function s(){}var t=r.after;s.prototype={on:function(l,b){return u.parse(this,l,b,function(l,m){return t(l,"on"+m,b,!0)})},emit:function(l,b){var p=[this];p.push.apply(p,arguments);return u.emit.apply(u,p)}};return s})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(r,u){return function(s,t,l,b){var p=s&&"function"===typeof s.then,m=p&&s instanceof u;if(!p)return 1<arguments.length?t?t(s):s:(new r).resolve(s);m||(p=new r(s.cancel),s.then(p.resolve,
p.reject,p.progress),s=p.promise);return t||l||b?s.then(t,l,b):s}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(r,u){r.fromJson=function(r){return eval("("+r+")")};r._escapeString=u.stringify;r.toJsonIndentStr="\t";r.toJson=function(s,t){return u.stringify(s,function(l,b){if(b){var p=b.__json__||b.json;if("function"==typeof p)return p.call(b)}return b},t&&r.toJsonIndentStr)};return r})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
function(r,u,s,t,l,b){function p(){for(var b=+new Date,e=0,g;e<f.length&&(g=f[e]);e++){var l=g.response,a=l.options;g.isCanceled&&g.isCanceled()||g.isValid&&!g.isValid(l)?(f.splice(e--,1),m._onAction&&m._onAction()):g.isReady&&g.isReady(l)?(f.splice(e--,1),g.handleResponse(l),m._onAction&&m._onAction()):g.startTime&&g.startTime+(a.timeout||0)<b&&(f.splice(e--,1),g.cancel(new u("Timeout exceeded",l)),m._onAction&&m._onAction())}m._onInFlight&&m._onInFlight(g);f.length||(clearInterval(k),k=null)}function m(b){b.response.options.timeout&&
(b.startTime=+new Date);b.isFulfilled()||(f.push(b),k||(k=setInterval(p,50)),b.response.options.sync&&p())}var k=null,f=[];m.cancelAll=function(){try{t.forEach(f,function(b){try{b.cancel(new s("All requests canceled."))}catch(c){}})}catch(b){}};l&&b&&l.doc.attachEvent&&b(l.global,"unload",function(){m.cancelAll()});return m})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
function(r,u,s,t,l,b,p,m){function k(b){return c(b)}function f(b){return b.data||b.text}r.deepCopy=function(b,c){for(var f in c){var a=b[f],d=c[f];a!==d&&(a&&"object"===typeof a&&d&&"object"===typeof d?r.deepCopy(a,d):b[f]=d)}return b};r.deepCreate=function(b,c){c=c||{};var f=p.delegate(b),a,d;for(a in b)(d=b[a])&&"object"===typeof d&&(f[a]=r.deepCreate(d,c[a]));return r.deepCopy(f,c)};var c=Object.freeze||function(b){return b};r.deferred=function(b,g,l,a,d,n){var v=new t(function(a){g&&g(v,b);return a&&
(a instanceof u||a instanceof s)?a:new s("Request canceled",b)});v.response=b;v.isValid=l;v.isReady=a;v.handleResponse=d;l=v.then(k).otherwise(function(a){a.response=b;throw a;});r.notify&&l.then(p.hitch(r.notify,"emit","load"),p.hitch(r.notify,"emit","error"));a=l.then(f);d=new m;for(var y in a)a.hasOwnProperty(y)&&(d[y]=a[y]);d.response=l;c(d);n&&v.then(function(a){n.call(v,a)},function(a){n.call(v,b,a)});v.promise=d;v.then=d.then;return v};r.addCommonMethods=function(c,f){b.forEach(f||["GET","POST",
"PUT","DELETE"],function(b){c[("DELETE"===b?"DEL":b).toLowerCase()]=function(a,d){d=p.delegate(d||{});d.method=b;return c(a,d)}})};r.parseArgs=function(b,c,f){var a=c.data,d=c.query;a&&!f&&"object"===typeof a&&(c.data=l.objectToQuery(a));d?("object"===typeof d&&(d=l.objectToQuery(d)),c.preventCache&&(d+=(d?"&":"")+"request.preventCache="+ +new Date)):c.preventCache&&(d="request.preventCache="+ +new Date);b&&d&&(b+=(~b.indexOf("?")?"&":"?")+d);return{url:b,options:c,getHeader:function(a){return null}}};
r.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],function(r){return r("RequestError",function(r,s){this.response=s})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(r,u){return r("RequestTimeoutError",null,u,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(r,u,s,t,l){function b(a,
d){var b=a.xhr;a.status=a.xhr.status;try{a.text=b.responseText}catch(c){}"xml"===a.options.handleAs&&(a.data=b.responseXML);if(!d)try{s(a)}catch(e){d=e}d?this.reject(d):t.checkStatus(b.status)?this.resolve(a):(d=new r("Unable to load "+a.url+" status: "+b.status,a),this.reject(d))}function p(a){return this.xhr.getResponseHeader(a)}function m(d,n,A){var z=l("native-formdata")&&n&&n.data&&n.data instanceof FormData,B=t.parseArgs(d,t.deepCreate(a,n),z);d=B.url;n=B.options;var s,E=t.deferred(B,g,f,c,
b,function(){s&&s()}),D=B.xhr=m._create();if(!D)return E.cancel(new r("XHR was not created")),A?E:E.promise;B.getHeader=p;e&&(s=e(D,E,B));var H=n.data,L=!n.sync,T=n.method;try{D.open(T,d,L,n.user||q,n.password||q);n.withCredentials&&(D.withCredentials=n.withCredentials);l("native-response-type")&&n.handleAs in k&&(D.responseType=k[n.handleAs]);var I=n.headers;d=z?!1:"application/x-www-form-urlencoded";if(I)for(var Z in I)"content-type"===Z.toLowerCase()?d=I[Z]:I[Z]&&D.setRequestHeader(Z,I[Z]);d&&
!1!==d&&D.setRequestHeader("Content-Type",d);I&&"X-Requested-With"in I||D.setRequestHeader("X-Requested-With","XMLHttpRequest");t.notify&&t.notify.emit("send",B,E.promise.cancel);D.send(H)}catch(N){E.reject(N)}u(E);D=null;return A?E:E.promise}l.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});l.add("dojo-force-activex-xhr",function(){return l("activex")&&!document.addEventListener&&"file:"===window.location.protocol});l.add("native-xhr2",function(){if(l("native-xhr")){var a=
new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});l.add("native-formdata",function(){return"undefined"!==typeof FormData});l.add("native-response-type",function(){return l("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});l.add("native-xhr2-blob",function(){if(l("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var d=a.responseType;a.abort();return"blob"===
d}});var k={blob:l("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},f,c,e,g;l("native-xhr2")?(f=function(a){return!this.isFulfilled()},g=function(a,d){d.xhr.abort()},e=function(a,d,b){function c(a){d.handleResponse(b)}function e(a){a=new r("Unable to load "+b.url+" status: "+a.target.status,b);d.handleResponse(b,a)}function f(a){a.lengthComputable?(b.loaded=a.loaded,b.total=a.total,d.progress(b)):3===b.xhr.readyState&&(b.loaded=a.position,d.progress(b))}a.addEventListener("load",
c,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",f,!1);return function(){a.removeEventListener("load",c,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",f,!1);a=null}}):(f=function(a){return a.xhr.readyState},c=function(a){return 4===a.xhr.readyState},g=function(a,d){var b=d.xhr,c=typeof b.abort;"function"!==c&&"object"!==c&&"unknown"!==c||b.abort()});var q,a={data:null,query:null,sync:!1,method:"GET"};m._create=function(){throw Error("XMLHTTP not available");
};if(l("native-xhr")&&!l("dojo-force-activex-xhr"))m._create=function(){return new XMLHttpRequest};else if(l("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),m._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(d){try{new ActiveXObject("Microsoft.XMLHTTP"),m._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(n){}}t.addCommonMethods(m);return m})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],
function(r,u,s,t){function l(b){var e=f[b.options.handleAs];b.data=e?e(b):b.data||b.text;return b}t.add("activex","undefined"!==typeof ActiveXObject);t.add("dom-parser",function(b){return"DOMParser"in b});var b;if(t("activex")){var p=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],m;b=function(b){function e(a){try{var d=new ActiveXObject(a);d.async=!1;d.loadXML(k);f=d;m=a}catch(b){return!1}return!0}var f=b.data,k=b.text;f&&t("dom-qsa2.1")&&!f.querySelectorAll&&
t("dom-parser")&&(f=(new DOMParser).parseFromString(k,"application/xml"));f&&f.documentElement||m&&e(m)||s.some(p,e);return f}}var k=function(b){return t("native-xhr2-blob")||"blob"!==b.options.handleAs||"undefined"===typeof Blob?b.xhr.response:new Blob([b.xhr.response],{type:b.xhr.getResponseHeader("Content-Type")})},f={javascript:function(b){return u.eval(b.text||"")},json:function(b){return r.parse(b.text||null)},xml:b,blob:k,arraybuffer:k,document:k};l.register=function(b,e){f[b]=e};return l})},
"dojo/selector/_loader":function(){define(["../has","require"],function(r,u){var s=document.createElement("div");r.add("dom-qsa2.1",!!s.querySelectorAll);r.add("dom-qsa3",function(){try{return s.innerHTML="<p class='TEST'></p>",1==s.querySelectorAll(".TEST:empty").length}catch(l){}});var t;return{load:function(l,b,p,m){m=u;l="default"==l?r("config-selectorEngine")||"css3":l;l="css2"==l||"lite"==l?"./lite":"css2.1"==l?r("dom-qsa2.1")?"./lite":"./acme":"css3"==l?r("dom-qsa3")?"./lite":"./acme":"acme"==
l?"./acme":(m=b)&&l;if("?"==l.charAt(l.length-1)){l=l.substring(0,l.length-1);var k=!0}if(k&&(r("dom-compliant-qsa")||t))return p(t);m([l],function(b){"./lite"!=l&&(t=b);p(b)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(r,u,s,t,l){var b=t.trim,p=s.forEach,m="BackCompat"==l.doc.compatMode,k=!1,f=function(){return!0},c=function(a){a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var d=function(d,c){return b(a.slice(d,
c))},c=[],e=-1,f=-1,g=-1,n=-1,l=-1,m=-1,q=-1,v,p="",y="",A,r=0,z=a.length,t=null,s=null,B=function(){0<=m&&(t.id=d(m,r).replace(/\\/g,""),m=-1);if(0<=q){var a=q==r?null:d(q,r);t[0>">~+".indexOf(a)?"tag":"oper"]=a;q=-1}0<=l&&(t.classes.push(d(l+1,r).replace(/\\/g,"")),l=-1)};p=y,y=a.charAt(r),r<z;r++)"\\"!=p&&(t||(A=r,t={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return k?this.otag:this.tag}},q=r),v?y==v&&(v=null):"'"==y||'"'==y?v=y:0<=e?"]"==y?(s.attr?s.matchFor=
d(g||e+1,r):s.attr=d(e+1,r),!(e=s.matchFor)||'"'!=e.charAt(0)&&"'"!=e.charAt(0)||(s.matchFor=e.slice(1,-1)),s.matchFor&&(s.matchFor=s.matchFor.replace(/\\/g,"")),t.attrs.push(s),s=null,e=g=-1):"="==y&&(g=0<="|~^$*".indexOf(p)?p:"",s.type=g+y,s.attr=d(e+1,r-g.length),g=r+1):0<=f?")"==y&&(0<=n&&(s.value=d(f+1,r)),n=f=-1):"#"==y?(B(),m=r+1):"."==y?(B(),l=r):":"==y?(B(),n=r):"["==y?(B(),e=r,s={}):"("==y?(0<=n&&(s={name:d(n+1,r),value:null},t.pseudos.push(s)),f=r):" "==y&&p!=y&&(B(),0<=n&&t.pseudos.push({name:d(n+
1,r)}),t.loops=t.pseudos.length||t.attrs.length||t.classes.length,t.oquery=t.query=d(A,r),t.otag=t.tag=t.oper?null:t.tag||"*",t.tag&&(t.tag=t.tag.toUpperCase()),c.length&&c[c.length-1].oper&&(t.infixOper=c.pop(),t.query=t.infixOper.query+" "+t.query),c.push(t),t=null));return c},e=function(a,d){return a?d?function(){return a.apply(window,arguments)&&d.apply(window,arguments)}:a:d},g=function(a,d){var b=d||[];a&&b.push(a);return b},q=function(a){return 1==a.nodeType},a=function(a,d){return a?"class"==
d?a.className||"":"for"==d?a.htmlFor||"":"style"==d?a.style.cssText||"":(k?a.getAttribute(d):a.getAttribute(d,2))||"":""},d={"*=":function(d,b){return function(c){return 0<=a(c,d).indexOf(b)}},"^=":function(d,b){return function(c){return 0==a(c,d).indexOf(b)}},"$=":function(d,b){return function(c){c=" "+a(c,d);var e=c.lastIndexOf(b);return-1<e&&e==c.length-b.length}},"~=":function(d,b){var c=" "+b+" ";return function(b){return 0<=(" "+a(b,d)+" ").indexOf(c)}},"|=":function(d,b){var c=b+"-";return function(e){e=
a(e,d);return e==b||0==e.indexOf(c)}},"=":function(d,b){return function(c){return a(c,d)==b}}},n="undefined"==typeof l.doc.firstChild.nextElementSibling,v=n?"nextSibling":"nextElementSibling",y=n?"previousSibling":"previousElementSibling",A=n?q:f,z=function(a){for(;a=a[y];)if(A(a))return!1;return!0},B=function(a){for(;a=a[v];)if(A(a))return!1;return!0},C=function(a){var d=a.parentNode,d=7!=d.nodeType?d:d.nextSibling,b=0,c=d.children||d.childNodes,e=a._i||a.getAttribute("_i")||-1,f=d._l||("undefined"!==
typeof d.getAttribute?d.getAttribute("_l"):-1);if(!c)return-1;c=c.length;if(f==c&&0<=e&&0<=f)return e;u("ie")&&"undefined"!==typeof d.setAttribute?d.setAttribute("_l",c):d._l=c;e=-1;for(d=d.firstElementChild||d.firstChild;d;d=d[v])A(d)&&(u("ie")?d.setAttribute("_i",++b):d._i=++b,a===d&&(e=b));return e},E=function(a){return!(C(a)%2)},D=function(a){return C(a)%2},H={checked:function(a,d){return function(a){return!("checked"in a?!a.checked:!a.selected)}},disabled:function(a,d){return function(a){return a.disabled}},
enabled:function(a,d){return function(a){return!a.disabled}},"first-child":function(){return z},"last-child":function(){return B},"only-child":function(a,d){return function(a){return z(a)&&B(a)}},empty:function(a,d){return function(a){var d=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var b=d[a].nodeType;if(1===b||3==b)return!1}return!0}},contains:function(a,d){var b=d.charAt(0);if('"'==b||"'"==b)d=d.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(d)}},not:function(a,d){var b=c(d)[0],
e={el:1};"*"!=b.tag&&(e.tag=1);b.classes.length||(e.classes=1);var f=T(b,e);return function(a){return!f(a)}},"nth-child":function(a,d){var b=parseInt;if("odd"==d)return D;if("even"==d)return E;if(-1!=d.indexOf("n")){var c=d.split("n",2),e=c[0]?"-"==c[0]?-1:b(c[0]):1,f=c[1]?b(c[1]):0,g=0,k=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(g=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(k=f,f%=e));if(0<e)return function(a){a=C(a);return a>=g&&(0>k||a<=k)&&a%e==f};d=f}var n=b(d);return function(a){return C(a)==n}}},L=9>u("ie")||
9==u("ie")&&u("quirks")?function(a){var d=a.toLowerCase();"class"==d&&(a="className");return function(b){return k?b.getAttribute(a):b[a]||b[d]}}:function(a){return function(d){return d&&d.getAttribute&&d.hasAttribute(a)}},T=function(a,b){if(!a)return f;b=b||{};var c=null;"el"in b||(c=e(c,q));"tag"in b||"*"!=a.tag&&(c=e(c,function(d){return d&&(k?d.tagName:d.tagName.toUpperCase())==a.getTag()}));"classes"in b||p(a.classes,function(a,d,b){var f=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=e(c,function(a){return f.test(a.className)});
c.count=d});"pseudos"in b||p(a.pseudos,function(a){var d=a.name;H[d]&&(c=e(c,H[d](d,a.value)))});"attrs"in b||p(a.attrs,function(a){var b,f=a.attr;a.type&&d[a.type]?b=d[a.type](f,a.matchFor):f.length&&(b=L(f));b&&(c=e(c,b))});"id"in b||a.id&&(c=e(c,function(d){return!!d&&d.id==a.id}));c||"default"in b||(c=f);return c},I=function(a){return function(d,b,c){for(;d=d[v];)if(!n||q(d)){c&&!ua(d,c)||!a(d)||b.push(d);break}return b}},Z=function(a){return function(d,b,c){for(d=d[v];d;){if(A(d)){if(c&&!ua(d,
c))break;a(d)&&b.push(d)}d=d[v]}return b}},N=function(a){a=a||f;return function(d,b,c){for(var e=0,f=d.children||d.childNodes;d=f[e++];)A(d)&&(!c||ua(d,c))&&a(d,e)&&b.push(d);return b}},x={},K=function(a){var d=x[a.query];if(d)return d;var b=a.infixOper,b=b?b.oper:"",c=T(a,{el:1}),e="*"==a.tag,k=l.doc.getElementsByClassName;if(b)k={el:1},e&&(k.tag=1),c=T(a,k),"+"==b?d=I(c):"~"==b?d=Z(c):">"==b&&(d=N(c));else if(a.id)c=!a.loops&&e?f:T(a,{el:1,id:1}),d=function(d,b){var e=r.byId(a.id,d.ownerDocument||
d);if(e&&c(e)){if(9==d.nodeType)return g(e,b);for(var f=e.parentNode;f&&f!=d;)f=f.parentNode;if(f)return g(e,b)}};else if(k&&/\{\s*\[native code\]\s*\}/.test(String(k))&&a.classes.length&&!m)var c=T(a,{el:1,classes:1,id:1}),n=a.classes.join(" "),d=function(a,d,b){d=g(0,d);for(var e,f=0,k=a.getElementsByClassName(n);e=k[f++];)c(e,a)&&ua(e,b)&&d.push(e);return d};else e||a.loops?(c=T(a,{el:1,tag:1,id:1}),d=function(d,b,e){b=g(0,b);for(var f,k=0,n=(f=a.getTag())?d.getElementsByTagName(f):[];f=n[k++];)c(f,
d)&&ua(f,e)&&b.push(f);return b}):d=function(d,b,c){b=g(0,b);for(var e=0,f=a.getTag(),f=f?d.getElementsByTagName(f):[];d=f[e++];)ua(d,c)&&b.push(d);return b};return x[a.query]=d},G={},Q={},S=function(a){var d=c(b(a));if(1==d.length){var e=K(d[0]);return function(a){if(a=e(a,[]))a.nozip=!0;return a}}return function(a){a=g(a);for(var b,c,e=d.length,f,k,n=0;n<e;n++){k=[];b=d[n];c=a.length-1;0<c&&(f={},k.nozip=!0);c=K(b);for(var l=0;b=a[l];l++)c(b,k,f);if(!k.length)break;a=k}return k}},ha=u("ie")?"commentStrip":
"nozip",ba=!!l.doc.querySelectorAll,V=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,M=function(a,d,b,c){return b?(d?d+" ":"")+b+(c?" "+c:""):a},U=/([^[]*)([^\]]*])?/g,J=function(a,d,b){return d.replace(V,M)+(b||"")},aa=function(a,d){a=a.replace(U,J);if(ba){var b=Q[a];if(b&&!d)return b}if(b=G[a])return b;var b=a.charAt(0),c=-1==a.indexOf(" ");0<=a.indexOf("#")&&c&&(d=!0);if(!ba||d||-1!=">~+".indexOf(b)||u("ie")&&-1!=a.indexOf(":")||m&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf(":checked")||
-1!=a.indexOf("|=")){var e=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return G[a]=2>e.length?S(a):function(a){for(var d=0,b=[],c;c=e[d++];)b=b.concat(S(c)(a));return b}}var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return Q[a]=function(d){try{if(9!=d.nodeType&&!c)throw"";var b=d.querySelectorAll(f);b[ha]=!0;return b}catch(e){return aa(a,!0)(d)}}},X=0,fa=u("ie")?function(a){return k?a.getAttribute("_uid")||a.setAttribute("_uid",++X)||X:a.uniqueID}:function(a){return a._uid||
(a._uid=++X)},ua=function(a,d){if(!d)return 1;var b=fa(a);return d[b]?0:d[b]=1},va=function(a){if(a&&a.nozip)return a;if(!a||!a.length)return[];if(2>a.length)return[a[0]];var d=[];X++;var b,c;if(u("ie")&&k){var e=X+"";for(b=0;b<a.length;b++)(c=a[b])&&c.getAttribute("_zipIdx")!=e&&(d.push(c),c.setAttribute("_zipIdx",e))}else if(u("ie")&&a.commentStrip)try{for(b=0;b<a.length;b++)(c=a[b])&&q(c)&&d.push(c)}catch(f){}else for(b=0;b<a.length;b++)(c=a[b])&&c._zipIdx!=X&&(d.push(c),c._zipIdx=X);return d},
la=function(a,d){d=d||l.doc;k="div"===(d.ownerDocument||d).createElement("div").tagName;var b=aa(a)(d);return b&&b.nozip?b:va(b)};la.filter=function(a,d,b){for(var e=[],f=c(d),f=1!=f.length||/[^\w#\.]/.test(d)?function(a){return-1!=s.indexOf(la(d,r.byId(b)),a)}:T(f[0]),g=0,k;k=a[g];g++)f(k)&&e.push(k);return e};return la})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(r,u){var s=document.createElement("div"),t=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||
s.msMatchesSelector||s.oMatchesSelector,l=s.querySelectorAll,b=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;r.add("dom-matches-selector",!!t);r.add("dom-qsa",!!l);var p=function(b,e){if(f&&-1<b.indexOf(","))return f(b,e);var g=e?e.ownerDocument||e:u.doc||document,q=(l?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b);e=e||g;if(q){if(q[2]){var a=u.byId?u.byId(q[2],g):g.getElementById(q[2]);if(!a||q[1]&&q[1]!=a.tagName.toLowerCase())return[];
if(e!=g)for(g=a;g!=e;)if(g=g.parentNode,!g)return[];return q[3]?p(q[3],a):[a]}if(q[3]&&e.getElementsByClassName)return e.getElementsByClassName(q[4]);if(q[5])if(a=e.getElementsByTagName(q[5]),q[4]||q[6])b=(q[4]||"")+q[6];else return a}if(l)return 1===e.nodeType&&"object"!==e.nodeName.toLowerCase()?m(e,b,e.querySelectorAll):e.querySelectorAll(b);a||(a=e.getElementsByTagName("*"));for(var q=[],g=0,d=a.length;g<d;g++){var n=a[g];1==n.nodeType&&k(n,b,e)&&q.push(n)}return q},m=function(c,e,f){var k=c,
a=c.getAttribute("id"),d=a||"__dojo__",n=c.parentNode,l=/^\s*[+~]/.test(e);if(l&&!n)return[];a?d=d.replace(/'/g,"\\$&"):c.setAttribute("id",d);l&&n&&(c=c.parentNode);e=e.match(b);for(n=0;n<e.length;n++)e[n]="[id='"+d+"'] "+e[n];e=e.join(",");try{return f.call(c,e)}finally{a||k.removeAttribute("id")}};if(!r("dom-matches-selector"))var k=function(){function b(a,d,c){var e=d.charAt(0);if('"'==e||"'"==e)d=d.slice(1,-1);d=d.replace(/\\/g,"");var f=n[c||""];return function(b){return(b=b.getAttribute(a))&&
f(b,d)}}function e(a){return function(d,b){for(;(d=d.parentNode)!=b;)if(a(d,b))return!0}}function f(a){return function(d,b){d=d.parentNode;return a?d!=b&&a(d,b):d==b}}function k(a,d){return a?function(b,c){return d(b)&&a(b,c)}:d}var a="div"==s.tagName?"toLowerCase":"toUpperCase",d={"":function(d){d=d[a]();return function(a){return a.tagName==d}},".":function(a){var d=" "+a+" ";return function(b){return-1<b.className.indexOf(a)&&-1<(" "+b.className+" ").indexOf(d)}},"#":function(a){return function(d){return d.id==
a}}},n={"^=":function(a,d){return 0==a.indexOf(d)},"*=":function(a,d){return-1<a.indexOf(d)},"$=":function(a,d){return a.substring(a.length-d.length,a.length)==d},"~=":function(a,d){return-1<(" "+a+" ").indexOf(" "+d+" ")},"|=":function(a,d){return 0==(a+"-").indexOf(d+"-")},"=":function(a,d){return a==d},"":function(a,d){return!0}},l={};return function(a,n,m){var p=l[n];if(!p){if(n.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,
function(a,n,l,m,v,y,A){m?p=k(p,d[l||""](m.replace(/\\/g,""))):n?p=(" "==n?e:f)(p):v&&(p=k(p,b(v,A,y)));return""}))throw Error("Syntax error in query");if(!p)return!0;l[n]=p}return p(a,m)}}();if(!r("dom-qsa"))var f=function(c,e){for(var f=c.match(b),k=[],a=0;a<f.length;a++){c=new String(f[a].replace(/\s*$/,""));c.indexOf=escape;for(var d=p(c,e),n=0,l=d.length;n<l;n++){var m=d[n];k[m.sourceIndex]=m}}f=[];for(a in k)f.push(k[a]);return f};p.match=t?function(b,e,f){return f&&9!=f.nodeType?m(f,e,function(e){return t.call(b,
e)}):t.call(b,e)}:k;return p})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(r,u,s){return r("dojo.dnd.Target",s,{constructor:function(){this.isSource=!1;u.remove(this.node,"dojoDndSource")}})})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(r,u,s){function t(a,d){throw Error("declare"+(d?" "+d:"")+": "+a);}function l(a,d,b){var c,e,f,g,k,n,l,m=this._inherited=this._inherited||{};"string"==typeof a&&(c=a,a=d,d=b);b=0;
g=a.callee;(c=c||g.nom)||t("can't deduce a name to call inherited()",this.declaredClass);k=this.constructor._meta;f=k.bases;l=m.p;if(c!=E){if(m.c!==g&&(l=0,n=f[0],k=n._meta,k.hidden[c]!==g)){(e=k.chains)&&"string"==typeof e[c]&&t("calling chained method with inherited: "+c,this.declaredClass);do if(k=n._meta,e=n.prototype,k&&(e[c]===g&&e.hasOwnProperty(c)||k.hidden[c]===g))break;while(n=f[++l]);l=n?l:-1}if(n=f[++l])if(e=n.prototype,n._meta&&e.hasOwnProperty(c))b=e[c];else{g=A[c];do if(e=n.prototype,
(b=e[c])&&(n._meta?e.hasOwnProperty(c):b!==g))break;while(n=f[++l])}b=n&&b||A[c]}else{if(m.c!==g&&(l=0,(k=f[0]._meta)&&k.ctor!==g)){for((e=k.chains)&&"manual"===e.constructor||t("calling chained constructor with inherited",this.declaredClass);(n=f[++l])&&(!(k=n._meta)||k.ctor!==g););l=n?l:-1}for(;(n=f[++l])&&!(b=(k=n._meta)?k.ctor:n););b=n&&b}m.c=b;m.p=l;if(b)return!0===d?b:b.apply(this,d||a)}function b(a,d){return"string"==typeof a?this.__inherited(a,d,!0):this.__inherited(a,!0)}function p(a,d,b){var c=
this.getInherited(a,d);if(c)return c.apply(this,b||d||a)}function m(a){for(var d=this.constructor._meta.bases,b=0,c=d.length;b<c;++b)if(d[b]===a)return!0;return this instanceof a}function k(a,d){for(var b in d)b!=E&&d.hasOwnProperty(b)&&(a[b]=d[b]);if(u("bug-for-in-skips-shadowed"))for(var c=s._extraNames,e=c.length;e;)b=c[--e],b!=E&&d.hasOwnProperty(b)&&(a[b]=d[b])}function f(a){v.safeMixin(this.prototype,a);return this}function c(a,d){a instanceof Array||"function"==typeof a||(d=a,a=void 0);d=d||
{};a=a||[];return v([this].concat(a),d)}function e(a,d){return function(){var b=arguments,c=b,e=b[0],f,g;g=a.length;var k;if(!(this instanceof b.callee))return n(b);if(d&&(e&&e.preamble||this.preamble))for(k=Array(a.length),k[0]=b,f=0;;){(e=b[0])&&(e=e.preamble)&&(b=e.apply(this,b)||b);e=a[f].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(b=e.apply(this,b)||b);if(++f==g)break;k[f]=b}for(f=g-1;0<=f;--f)e=a[f],(e=(g=e._meta)?g.ctor:e)&&e.apply(this,k?k[f]:b);(e=this.postscript)&&e.apply(this,
c)}}function g(a,d){return function(){var b=arguments,c=b,e=b[0];if(!(this instanceof b.callee))return n(b);d&&(e&&(e=e.preamble)&&(c=e.apply(this,c)||c),(e=this.preamble)&&e.apply(this,c));a&&a.apply(this,b);(e=this.postscript)&&e.apply(this,b)}}function q(a){return function(){var d=arguments,b=0,c,e;if(!(this instanceof d.callee))return n(d);for(;c=a[b];++b)if(c=(e=c._meta)?e.ctor:c){c.apply(this,d);break}(c=this.postscript)&&c.apply(this,d)}}function a(a,d,b){return function(){var c,e,f=0,g=1;
b&&(f=d.length-1,g=-1);for(;c=d[f];f+=g)e=c._meta,(c=(e?e.hidden:c.prototype)[a])&&c.apply(this,arguments)}}function d(a){B.prototype=a.prototype;a=new B;B.prototype=null;return a}function n(a){var b=a.callee,c=d(b);b.apply(c,a);return c}function v(n,p,r){"string"!=typeof n&&(r=p,p=n,n="");r=r||{};var B,u,N,x,K,G,Q,S=1,ha=p;if("[object Array]"==z.call(p)){S=n;N=[];x=[{cls:0,refs:[]}];G={};for(var ba=1,V=p.length,M=0,U,J,aa,X;M<V;++M){(U=p[M])?"[object Function]"!=z.call(U)&&t("mixin #"+M+" is not a callable constructor.",
S):t("mixin #"+M+" is unknown. Did you use dojo.require to pull it in?",S);J=U._meta?U._meta.bases:[U];aa=0;for(U=J.length-1;0<=U;--U)X=J[U].prototype,X.hasOwnProperty("declaredClass")||(X.declaredClass="uniqName_"+C++),X=X.declaredClass,G.hasOwnProperty(X)||(G[X]={count:0,refs:[],cls:J[U]},++ba),X=G[X],aa&&aa!==X&&(X.refs.push(aa),++aa.count),aa=X;++aa.count;x[0].refs.push(aa)}for(;x.length;){aa=x.pop();N.push(aa.cls);for(--ba;u=aa.refs,1==u.length;){aa=u[0];if(!aa||--aa.count){aa=0;break}N.push(aa.cls);
--ba}if(aa)for(M=0,V=u.length;M<V;++M)aa=u[M],--aa.count||x.push(aa)}ba&&t("can't build consistent linearization",S);U=p[0];N[0]=U?U._meta&&U===N[N.length-U._meta.bases.length]?U._meta.bases.length:1:0;G=N;N=G[0];S=G.length-N;p=G[S]}else G=[0],p?"[object Function]"==z.call(p)?(N=p._meta,G=G.concat(N?N.bases:p)):t("base class is not a callable constructor.",n):null!==p&&t("unknown base class. Did you use dojo.require to pull it in?",n);if(p)for(u=S-1;;--u){B=d(p);if(!u)break;N=G[u];(N._meta?k:y)(B,
N.prototype);x=new Function;x.superclass=p;x.prototype=B;p=B.constructor=x}else B={};v.safeMixin(B,r);N=r.constructor;N!==A.constructor&&(N.nom=E,B.constructor=N);for(u=S-1;u;--u)(N=G[u]._meta)&&N.chains&&(Q=y(Q||{},N.chains));B["-chains-"]&&(Q=y(Q||{},B["-chains-"]));N=!Q||!Q.hasOwnProperty(E);G[0]=x=Q&&"manual"===Q.constructor?q(G):1==G.length?g(r.constructor,N):e(G,N);x._meta={bases:G,hidden:r,chains:Q,parents:ha,ctor:r.constructor};x.superclass=p&&p.prototype;x.extend=f;x.createSubclass=c;x.prototype=
B;B.constructor=x;B.getInherited=b;B.isInstanceOf=m;B.inherited=D;B.__inherited=l;n&&(B.declaredClass=n,s.setObject(n,x));if(Q)for(K in Q)B[K]&&"string"==typeof Q[K]&&K!=E&&(N=B[K]=a(K,G,"after"===Q[K]),N.nom=K);return x}var y=s.mixin,A=Object.prototype,z=A.toString,B=new Function,C=0,E="constructor",D=r.config.isDebug?p:l;r.safeMixin=v.safeMixin=function(a,d){var b,c;for(b in d)c=d[b],c===A[b]&&b in A||b==E||("[object Function]"==z.call(c)&&(c.nom=b),a[b]=c);if(u("bug-for-in-skips-shadowed"))for(var e=
s._extraNames,f=e.length;f;)b=e[--f],c=d[b],c===A[b]&&b in A||b==E||("[object Function]"==z.call(c)&&(c.nom=b),a[b]=c);return a};return r.declare=v})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(r,u,s){function t(k){if("string"==typeof k||k instanceof String){if(k&&!b.test(k))return p[0]=k,p;k=k.split(b);k.length&&!k[0]&&k.shift();k.length&&!k[k.length-1]&&k.pop();return k}return k?u.filter(k,function(b){return b}):[]}var l,b=/\s+/,p=[""],m={};return l={contains:function(b,
f){return 0<=(" "+s.byId(b).className+" ").indexOf(" "+f+" ")},add:function(b,f){b=s.byId(b);f=t(f);var c=b.className,e,c=c?" "+c+" ":" ";e=c.length;for(var g=0,l=f.length,a;g<l;++g)(a=f[g])&&0>c.indexOf(" "+a+" ")&&(c+=a+" ");e<c.length&&(b.className=c.substr(1,c.length-2))},remove:function(b,f){b=s.byId(b);var c;if(void 0!==f){f=t(f);c=" "+b.className+" ";for(var e=0,g=f.length;e<g;++e)c=c.replace(" "+f[e]+" "," ");c=r.trim(c)}else c="";b.className!=c&&(b.className=c)},replace:function(b,f,c){b=
s.byId(b);m.className=b.className;l.remove(m,c);l.add(m,f);b.className!==m.className&&(b.className=m.className)},toggle:function(b,f,c){b=s.byId(b);if(void 0===c){f=t(f);for(var e=0,g=f.length,m;e<g;++e)m=f[e],l[l.contains(b,m)?"remove":"add"](b,m)}else l[c?"add":"remove"](b,f);return c}}})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(r,
u,s,t,l,b,p,m,k,f,c,e){s.isAsync||m(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var g=u("dojo.dnd.Source",c,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,a){t.mixin(this,t.mixin({},a));var d=this.accept;if(d.length){this.accept={};for(var c=0;c<d.length;++c)this.accept[d[c]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=
!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&l.add(this.node,"dojoDndSource");this.targetState="";this.accept&&l.add(this.node,"dojoDndTarget");this.horizontal&&l.add(this.node,"dojoDndHorizontal");this.topics=[k.subscribe("/dnd/source/over",t.hitch(this,"onDndSourceOver")),k.subscribe("/dnd/start",t.hitch(this,"onDndStart")),k.subscribe("/dnd/drop",t.hitch(this,"onDndDrop")),k.subscribe("/dnd/cancel",t.hitch(this,"onDndCancel"))]},checkAcceptance:function(b,a){if(this==b)return!this.copyOnly||
this.selfAccept;for(var d=0;d<a.length;++d){for(var c=b.getItem(a[d].id).type,e=!1,f=0;f<c.length;++f)if(c[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(b,a){if(b)return!0;2>arguments.length&&(a=this==e.manager().target);if(a){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){g.superclass.destroy.call(this);r.forEach(this.topics,function(b){b.remove()});this.targetAnchor=null},onMouseMove:function(c){if(!this.isDragging||"Disabled"!=
this.targetState){g.superclass.onMouseMove.call(this,c);var a=e.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(c.pageX-this._lastX)>this.delay||Math.abs(c.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&a.startDrag(this,d,this.copyState(f.getCopyKeyState(c),!0))}this.isDragging&&(d=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=b.position(this.current,!0)),d=this.horizontal?c.pageX-this.targetBox.x<this.targetBox.w/
2==b.isBodyLtr(this.current.ownerDocument):c.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||d!=this.before)&&(this._markTargetAnchor(d),a.canDrop(!this.current||a.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(b){this.mouseDown||!this._legalMouseDown(b)||this.skipForm&&f.isFormElement(b)||(this.mouseDown=!0,this._lastX=b.pageX,this._lastY=b.pageY,g.superclass.onMouseDown.call(this,b))},onMouseUp:function(b){this.mouseDown&&(this.mouseDown=
!1,g.superclass.onMouseUp.call(this,b))},onDndSourceOver:function(b){this!==b?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(b=e.manager(),b.canDrop("Disabled"!=this.targetState&&(!this.current||b.source!=this||!(this.current.id in this.selection))))},onDndStart:function(b,a,d){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==b?d?"Copied":"Moved":"");a=this.accept&&this.checkAcceptance(b,a);this._changeState("Target",a?"":"Disabled");
this==b&&e.manager().overSource(this);this.isDragging=!0},onDndDrop:function(b,a,d,c){if(this==c)this.onDrop(b,a,d);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(b,a,d){if(this!=b)this.onDropExternal(b,a,d);else this.onDropInternal(a,d)},onDropExternal:function(b,a,d){var c=this._normalizedCreator;this._normalizedCreator=
this.creator?function(a,d){return c.call(this,b.getItem(a.id).data,d)}:d?function(a){var d=b.getItem(a.id);a=a.cloneNode(!0);a.id=f.getUniqueId();return{node:a,data:d.data,type:d.type}}:function(a){var d=b.getItem(a.id);b.delItem(a.id);return{node:a,data:d.data,type:d.type}};this.selectNone();d||this.creator||b.selectNone();this.insertNodes(!0,a,this.before,this.current);!d&&this.creator&&b.deleteSelectedNodes();this._normalizedCreator=c},onDropInternal:function(b,a){var d=this._normalizedCreator;
if(!(this.current&&this.current.id in this.selection)){if(a)this._normalizedCreator=this.creator?function(a,b){return d.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id);a=a.cloneNode(!0);a.id=f.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,b,this.before,this.current);this._normalizedCreator=d}},
onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){g.superclass.onOverEvent.call(this);e.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){g.superclass.onOutEvent.call(this);e.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(b){if(this.current!=this.targetAnchor||this.before!=b)this.targetAnchor&&this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=b,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(b){this._changeState("Source",b?"Copied":"Moved")},_legalMouseDown:function(b){if("touchstart"!=b.type&&!p.isLeft(b))return!1;
if(!this.withHandles)return!0;for(b=b.target;b&&b!==this.node;b=b.parentNode){if(l.contains(b,"dojoDndHandle"))return!0;if(l.contains(b,"dojoDndItem")||l.contains(b,"dojoDndIgnore"))break}return!1}});return g})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(r,u,s,t,l){function b(l,m){var k=function(b,c){return u(b,l,function(e){if(m)return m(e,c);if(!t.isDescendant(e.relatedTarget,b))return c.call(this,e)})};k.bubble=function(f){return b(l,function(b,
e){var g=f(b.target),k=b.relatedTarget;if(g&&g!=(k&&1==k.nodeType&&f(k)))return e.call(g,b)})};return k}s.add("dom-quirks",l.doc&&"BackCompat"==l.doc.compatMode);s.add("events-mouseenter",l.doc&&"onmouseenter"in l.doc.createElement("div"));s.add("events-mousewheel",l.doc&&"onmousewheel"in l.doc);l=s("dom-quirks")&&s("ie")||!s("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,l){return b.button&l},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&
2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,l){return b.button==l},isLeft:function(b){return 0==b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};r.mouseButtons=l;r=s("events-mousewheel")?"mousewheel":function(b,l){return u(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;l.call(this,b)})};return{_eventHandler:b,enter:b("mouseover"),leave:b("mouseout"),wheel:r,isLeft:l.isLeft,isMiddle:l.isMiddle,isRight:l.isRight}})},"dojo/ready":function(){define(["./_base/kernel",
"./has","require","./domReady","./_base/lang"],function(r,u,s,t,l){var b=0,p=[],m=0;u=function(){b=1;r._postLoad=r.config.afterOnLoad=!0;k()};var k=function(){if(!m){for(m=1;b&&(!t||0==t._Q.length)&&(s.idle?s.idle():1)&&p.length;){var c=p.shift();try{c()}catch(f){if(f.info=f.message,s.signal)s.signal("error",f);else throw f;}}m=0}};s.on&&s.on("idle",k);t&&(t._onQEmpty=k);var f=r.ready=r.addOnLoad=function(b,c,f){var a=l._toArray(arguments);"number"!=typeof b?(f=c,c=b,b=1E3):a.shift();f=f?l.hitch.apply(r,
a):function(){c()};f.priority=b;for(a=0;a<p.length&&b>=p[a].priority;a++);p.splice(a,0,f);k()},c=r.config.addOnLoad;if(c)f[l.isArray(c)?"apply":"call"](r,c);r.config.parseOnLoad&&!r.isAsync&&f(99,function(){r.parser||(r.deprecated("Add explicit require(['dojo/parser']);","","2.0"),s(["dojo/parser"]))});t?t(u):u();return f})},"dojo/domReady":function(){define(["./has"],function(r){function u(a){k.push(a);m&&s()}function s(){if(!f){for(f=!0;k.length;)try{k.shift()(l)}catch(a){console.error(a,"in domReady callback",
a.stack)}f=!1;u._onQEmpty()}}var t=function(){return this}(),l=document,b={loaded:1,complete:1},p="string"!=typeof l.readyState,m=!!b[l.readyState],k=[],f;u.load=function(a,b,d){u(d)};u._Q=k;u._onQEmpty=function(){};p&&(l.readyState="loading");if(!m){var c=[],e=function(a){a=a||t.event;m||"readystatechange"==a.type&&!b[l.readyState]||(p&&(l.readyState="complete"),m=1,s())},g=function(a,b){a.addEventListener(b,e,!1);k.push(function(){a.removeEventListener(b,e,!1)})};if(!r("dom-addeventlistener")){var g=
function(a,b){b="on"+b;a.attachEvent(b,e);k.push(function(){a.detachEvent(b,e)})},q=l.createElement("div");try{q.doScroll&&null===t.frameElement&&c.push(function(){try{return q.doScroll("left"),1}catch(a){}})}catch(a){}}g(l,"DOMContentLoaded");g(t,"load");"onreadystatechange"in l?g(l,"readystatechange"):p||c.push(function(){return b[l.readyState]});if(c.length){var d=function(){if(!m){for(var a=c.length;a--;)if(c[a]()){e("poller");return}setTimeout(d,30)}};d()}}return u})},"dojo/topic":function(){define(["./Evented"],
function(r){var u=new r;return{publish:function(r,t){return u.emit.apply(u,arguments)},subscribe:function(r,t){return u.on.apply(u,arguments)}}})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(r,u,s,t){var l=s.getObject("dojo.dnd",!0);l.getCopyKeyState=function(b){return b[r("mac")?"metaKey":"ctrlKey"]};l._uniqueId=0;l.getUniqueId=function(){var b;do b=u._scopeName+"Unique"+ ++l._uniqueId;while(t.byId(b));return b};l._empty={};l.isFormElement=
function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")};return l})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e){var g=u("dojo.dnd.Selector",e,{constructor:function(b,a){a||(a={});this.singular=a.singular;this.autoSync=
a.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(k(this.node,f.press,t.hitch(this,"onMouseDown")),k(this.node,f.release,t.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var b=new m,a=c._empty,d;for(d in this.selection)d in a||b.push(l.byId(d));return b},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(b,a){this._addItemClass(l.byId(a),"Selected");this.selection[a]=1},this);
return this._removeAnchor()},deleteSelectedNodes:function(){var e=c._empty,a;for(a in this.selection)if(!(a in e)){var d=l.byId(a);this.delItem(a);b.destroy(d)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(b,a){a=a||s.global;var d=this.selection,e=c._empty,f;for(f in d)f in e||b.call(a,this.getItem(f),f,this)},sync:function(){g.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var b=[],a=c._empty,d;for(d in this.selection)d in a||
this.getItem(d)||b.push(d);r.forEach(b,function(a){delete this.selection[a]},this);return this},insertNodes:function(b,a,d,c){var e=this._normalizedCreator;this._normalizedCreator=function(a,d){var c=e.call(this,a,d);b?(this.anchor?this.anchor!=c.node&&(this._removeItemClass(c.node,"Anchor"),this._addItemClass(c.node,"Selected")):(this.anchor=c.node,this._removeItemClass(c.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[c.node.id]=1):(this._removeItemClass(c.node,"Selected"),
this._removeItemClass(c.node,"Anchor"));return c};g.superclass.insertNodes.call(this,a,d,c);this._normalizedCreator=e;return this},destroy:function(){g.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(b){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!c.getCopyKeyState(b)&&!b.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,p.isLeft(b)&&(b.stopPropagation(),b.preventDefault());else{if(!this.singular&&b.shiftKey){c.getCopyKeyState(b)||
this._removeSelection();var a=this.getAllNodes();if(a.length&&(this.anchor||(this.anchor=a[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,e;d<a.length&&(e=a[d],e!=this.anchor&&e!=this.current);++d);for(++d;d<a.length;++d){e=a[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==
this.current?c.getCopyKeyState(b)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):c.getCopyKeyState(b)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),
this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);b.stopPropagation();b.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},
onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=k(this.node,f.move,t.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var b=c._empty,a;for(a in this.selection)if(!(a in b)){var d=l.byId(a);d&&this._removeItemClass(d,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),
this.anchor=null);return this}});return g})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(r,u,s,t,l,b){function p(a,b){var d=b.parentNode;d&&d.insertBefore(a,b)}function m(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(b){}for(var d;d=a.lastChild;)a.removeChild(d)}var k={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],
caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},f=/<\s*([\w\:]+)/,c={},e=0,g="__"+u._scopeName+"ToDomId",q;for(q in k)k.hasOwnProperty(q)&&(u=k[q],u.pre="option"==q?'<select multiple="multiple">':"<"+u.join("><")+">",u.post="</"+u.reverse().join("></")+">");var a;8>=s("ie")&&(a=function(a){a.__dojo_html5_tested="yes";var b=d("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});n(b)});r.toDom=function(b,d){d=d||t.doc;var n=d[g];n||(d[g]=n=++e+"",c[n]=d.createElement("div"));8>=s("ie")&&!d.__dojo_html5_tested&&d.body&&a(d);b+="";var l=b.match(f),m=l?l[1].toLowerCase():"",n=c[n];if(l&&k[m])for(l=k[m],n.innerHTML=l.pre+b+l.post,l=l.length;l;--l)n=n.firstChild;else n.innerHTML=b;if(1==n.childNodes.length)return n.removeChild(n.firstChild);for(m=d.createDocumentFragment();l=n.firstChild;)m.appendChild(l);return m};r.place=function(a,b,d){b=l.byId(b);
"string"==typeof a&&(a=/^\s*</.test(a)?r.toDom(a,b.ownerDocument):l.byId(a));if("number"==typeof d){var c=b.childNodes;!c.length||c.length<=d?b.appendChild(a):p(a,c[0>d?0:d])}else switch(d){case "before":p(a,b);break;case "after":d=a;(c=b.parentNode)&&(c.lastChild==b?c.appendChild(d):c.insertBefore(d,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":r.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){p(a,b.firstChild);break}default:b.appendChild(a)}return a};
var d=r.create=function(a,d,c,e){var f=t.doc;c&&(c=l.byId(c),f=c.ownerDocument);"string"==typeof a&&(a=f.createElement(a));d&&b.set(a,d);c&&r.place(a,c,e);return a};r.empty=function(a){m(l.byId(a))};var n=r.destroy=function(a){if(a=l.byId(a)){var b=a;a=a.parentNode;b.firstChild&&m(b);a&&(s("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(r,u,s,t,l,b){function p(b,
c){var e=b.getAttributeNode&&b.getAttributeNode(c);return!!e&&e.specified}var m={innerHTML:1,textContent:1,className:1,htmlFor:u("ie"),value:1},k={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};r.has=function(f,c){var e=c.toLowerCase();return m[b.names[e]||c]||p(t.byId(f),k[e]||c)};r.get=function(f,c){f=t.byId(f);var e=c.toLowerCase(),g=b.names[e]||c,l=f[g];if(m[g]&&"undefined"!=typeof l)return l;if("textContent"==g)return b.get(f,g);if("href"!=g&&("boolean"==typeof l||s.isFunction(l)))return l;
e=k[e]||c;return p(f,e)?f.getAttribute(e):null};r.set=function(f,c,e){f=t.byId(f);if(2==arguments.length){for(var g in c)r.set(f,g,c[g]);return f}g=c.toLowerCase();var q=b.names[g]||c,a=m[q];if("style"==q&&"string"!=typeof e)return l.set(f,e),f;if(a||"boolean"==typeof e||s.isFunction(e))return b.set(f,c,e);f.setAttribute(k[g]||c,e);return f};r.remove=function(b,c){t.byId(b).removeAttribute(k[c.toLowerCase()]||c)};r.getNodeProp=function(f,c){f=t.byId(f);var e=c.toLowerCase(),g=b.names[e]||c;if(g in
f&&"href"!=g)return f[g];e=k[e]||c;return p(f,e)?f.getAttribute(e):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(r,u,s,t,l,b,p,m){function k(b){var c="";b=b.childNodes;for(var a=0,d;d=b[a];a++)8!=d.nodeType&&(c=1==d.nodeType?c+k(d):c+d.nodeValue);return c}var f={},c=0,e=u._scopeName+"attrid";s.add("dom-textContent",function(b,c,a){return"textContent"in a});r.names={"class":"className",
"for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};r.get=function(b,c){b=l.byId(b);var a=c.toLowerCase(),a=r.names[a]||c;return"textContent"!=a||s("dom-textContent")?b[a]:k(b)};r.set=function(g,k,a){g=l.byId(g);if(2==arguments.length&&"string"!=typeof k){for(var d in k)r.set(g,d,k[d]);return g}d=k.toLowerCase();d=r.names[d]||k;if("style"==d&&"string"!=typeof a)return b.set(g,a),g;if("innerHTML"==
d)return s("ie")&&g.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(p.empty(g),g.appendChild(p.toDom(a,g.ownerDocument))):g[d]=a,g;if("textContent"==d&&!s("dom-textContent"))return p.empty(g),g.appendChild(g.ownerDocument.createTextNode(a)),g;if(t.isFunction(a)){var n=g[e];n||(n=c++,g[e]=n);f[n]||(f[n]={});var v=f[n][d];if(v)m.disconnect(v);else try{delete g[d]}catch(y){}a?f[n][d]=m.connect(g,d,a):g[d]=null;return g}g[d]=a;return g}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(r,u,s,t,l,b,p,m){function k(a,c,e,f,g){f=m.hitch(e,f);if(!a||!a.addEventListener&&!a.attachEvent)return t.after(a||r.global,c,f,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));a||(a=r.global);if(!g)switch(c){case "keypress":c=q;break;case "mouseenter":c=b.enter;break;case "mouseleave":c=b.leave}return u(a,c,f,g)}function f(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}p.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!p("opera")});var c={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},e=p("mac")?"metaKey":"ctrlKey",g=function(a,b){var c=m.mixin({},a,b);f(c);c.preventDefault=function(){a.preventDefault()};c.stopPropagation=function(){a.stopPropagation()};return c},q;q=p("events-keypress-typed")?function(a,
b){var e=u(a,"keydown",function(a){var d=a.keyCode,e=13!=d&&32!=d&&(27!=d||!p("ie"))&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&229!=d;if(e||a.ctrlKey){e=e?0:d;if(a.ctrlKey){if(3==d||13==d)return b.call(a.currentTarget,a);e=95<e&&106>e?e-48:!a.shiftKey&&65<=e&&90>=e?e+32:c[e]||e}d=g(a,{type:"keypress",faux:!0,charCode:e});b.call(a.currentTarget,d);if(p("ie"))try{a.keyCode=d.keyCode}catch(f){}}}),f=u(a,"keypress",function(a){var d=a.charCode;a=g(a,{charCode:32<=d?d:0,faux:!0});return b.call(this,
a)});return{remove:function(){e.remove();f.remove()}}}:p("opera")?function(a,b){return u(a,"keypress",function(a){var d=a.which;3==d&&(d=99);d=32>d&&!a.shiftKey?0:d;a.ctrlKey&&!a.shiftKey&&65<=d&&90>=d&&(d+=32);return b.call(this,g(a,{charCode:d}))})}:function(a,b){return u(a,"keypress",function(a){f(a);return b.call(this,a)})};var a={_keypress:q,connect:function(a,b,c,e,f){var g=arguments,l=[],m=0;l.push("string"==typeof g[0]?null:g[m++],g[m++]);var q=g[m+1];l.push("string"==typeof q||"function"==
typeof q?g[m++]:null,g[m++]);for(q=g.length;m<q;m++)l.push(g[m]);return k.apply(this,l)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return s.subscribe(a,m.hitch(b,c))},publish:function(a,b){return s.publish.apply(s,[a].concat(b))},connectPublisher:function(b,c,e){var f=function(){a.publish(b,arguments)};return e?a.connect(c,e,f):a.connect(c,f)},isCopyKey:function(a){return a[e]}};a.unsubscribe=a.disconnect;m.mixin(r,a);return a})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(r,u,s,t){if(u._fixEvent){var l=u._fixEvent;u._fixEvent=function(b,m){(b=l(b,m))&&t.normalizeEvent(b);return b}}var b={fix:function(b,l){return u._fixEvent?u._fixEvent(b,l):b},stop:function(b){s("dom-addeventlistener")||b&&b.preventDefault?(b.preventDefault(),b.stopPropagation()):(b=b||window.event,b.cancelBubble=!0,u._preventDefault.call(b))}};r.fixEvent=b.fix;r.stopEvent=b.stop;return b})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(r,
u){return r.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:u("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,
NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:u("mac")&&!u("air")?u("safari")?91:224:17}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(r,u,s){u=u.NodeList;var t=u.prototype;t.connect=u._adaptAsForEach(function(){return r.connect.apply(this,arguments)});
t.coords=u._adaptAsMap(r.coords);u.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");s.forEach(u.events,function(l){var b="on"+l;t[b]=function(l,m){return this.connect(b,l,m)}});return r.NodeList=u})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(r,u,s,t,l,b,p,m){function k(a,b){var d=
function(d,c){if("string"==typeof c&&(c=s.byId(c),!c))return new b([]);var e="string"==typeof d?a(d,c):d?d.end&&d.on?d:[d]:[];return e.end&&e.on?e:new b(e)};d.matches=a.match||function(a,b,c){return 0<d.filter([a],b,c).length};d.filter=a.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<l.indexOf(a,b)})};if("function"!=typeof a){var c=a.search;a=function(a,b){return c(b||document,a)}}return d}u.add("array-extensible",function(){return 1==b.delegate([],{length:1}).length&&!u("bug-for-in-skips-shadowed")});
var f=Array.prototype,c=f.slice,e=f.concat,g=l.forEach,q=function(a,b,d){b=[0].concat(c.call(b,0));d=d||r.global;return function(c){b[0]=c;return a.apply(d,b)}},a=function(a){var c=this instanceof d&&u("array-extensible");"number"==typeof a&&(a=Array(a));var e=a&&"length"in a?a:arguments;if(c||!e.sort){for(var f=c?this:[],g=f.length=e.length,k=0;k<g;k++)f[k]=e[k];if(c)return f;e=f}b._mixin(e,n);e._NodeListCtor=function(a){return d(a)};return e},d=a,n=d.prototype=u("array-extensible")?[]:{};d._wrap=
n._wrap=function(a,b,c){a=new (c||this._NodeListCtor||d)(a);return b?a._stash(b):a};d._adaptAsMap=function(a,b){return function(){return this.map(q(a,arguments,b))}};d._adaptAsForEach=function(a,b){return function(){this.forEach(q(a,arguments,b));return this}};d._adaptAsFilter=function(a,b){return function(){return this.filter(q(a,arguments,b))}};d._adaptWithCondition=function(a,b,d){return function(){var c=arguments,e=q(a,c,d);if(b.call(d||r.global,c))return this.map(e);this.forEach(e);return this}};
g(["slice","splice"],function(a){var b=f[a];n[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});g(["indexOf","lastIndexOf","every","some"],function(a){var b=l[a];n[a]=function(){return b.apply(r,[this].concat(c.call(arguments,0)))}});b.extend(a,{constructor:d,_NodeListCtor:d,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var d=this.map(function(d){return t(d,a,b)});d.remove=function(){for(var a=0;a<d.length;a++)d[a].remove()};
return d},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=c.call(this,0),d=l.map(arguments,function(a){return c.call(a,0)});return this._wrap(e.apply(b,d),this)},map:function(a,b){return this._wrap(l.map(this,a,b),this)},forEach:function(a,b){g(this,a,b);return this},filter:function(a){var b=arguments,d=this,c=0;if("string"==typeof a){d=v._filterResult(this,b[0]);if(1==b.length)return d._stash(this);c=1}return this._wrap(l.filter(d,b[c],b[c+1]),
this)},instantiate:function(a,d){var c=b.isFunction(a)?a:b.getObject(a);d=d||{};return this.forEach(function(a){new c(d,a)})},at:function(){var a=new this._NodeListCtor(0);g(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var v=k(m,a);r.query=k(m,function(b){return a(b)});v.load=function(b,d,c){p.load(b,d,function(b){c(k(b,a))})};r._filterQueryResult=v._filterResult=function(b,d,c){return new a(v.filter(b,d,c))};r.NodeList=v.NodeList=a;return v})},
"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(r,u,s,t,l,b,p,m){r.byId=u.byId;r.isDescendant=u.isDescendant;r.setSelectable=u.setSelectable;r.getAttr=t.get;r.setAttr=t.set;r.hasAttr=t.has;r.removeAttr=t.remove;r.getNodeProp=t.getNodeProp;r.attr=function(b,f,c){return 2==arguments.length?t["string"==typeof f?"get":"set"](b,f):t.set(b,f,c)};r.hasClass=b.contains;r.addClass=b.add;r.removeClass=
b.remove;r.toggleClass=b.toggle;r.replaceClass=b.replace;r._toDom=r.toDom=p.toDom;r.place=p.place;r.create=p.create;r.empty=function(b){p.empty(b)};r._destroyElement=r.destroy=function(b){p.destroy(b)};r._getPadExtents=r.getPadExtents=m.getPadExtents;r._getBorderExtents=r.getBorderExtents=m.getBorderExtents;r._getPadBorderExtents=r.getPadBorderExtents=m.getPadBorderExtents;r._getMarginExtents=r.getMarginExtents=m.getMarginExtents;r._getMarginSize=r.getMarginSize=m.getMarginSize;r._getMarginBox=r.getMarginBox=
m.getMarginBox;r.setMarginBox=m.setMarginBox;r._getContentBox=r.getContentBox=m.getContentBox;r.setContentSize=m.setContentSize;r._isBodyLtr=r.isBodyLtr=m.isBodyLtr;r._docScroll=r.docScroll=m.docScroll;r._getIeDocumentElementOffset=r.getIeDocumentElementOffset=m.getIeDocumentElementOffset;r._fixIeBiDiScrollLeft=r.fixIeBiDiScrollLeft=m.fixIeBiDiScrollLeft;r.position=m.position;r.marginBox=function(b,f){return f?m.setMarginBox(b,f):m.getMarginBox(b)};r.contentBox=function(b,f){return f?m.setContentSize(b,
f):m.getContentBox(b)};r.coords=function(b,f){r.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");b=u.byId(b);var c=s.getComputedStyle(b),c=m.getMarginBox(b,c),e=m.position(b,f);c.x=e.x;c.y=e.y;return c};r.getProp=l.get;r.setProp=l.set;r.prop=function(b,f,c){return 2==arguments.length?l["string"==typeof f?"get":"set"](b,f):l.set(b,f,c)};r.getStyle=s.get;r.setStyle=s.set;r.getComputedStyle=s.getComputedStyle;r.__toPixelValue=r.toPixelValue=s.toPixelValue;r.style=function(b,f,c){switch(arguments.length){case 1:return s.get(b);
case 2:return s["string"==typeof f?"get":"set"](b,f)}return s.set(b,f,c)};return r})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(r,u,s,t,l,b,p,m,k){function f(a){return function(b,d,c){return 2==arguments.length?a["string"==typeof d?"get":"set"](b,d):a.set(b,d,c)}}var c=function(a){return 1==a.length&&"string"==typeof a[0]},e=function(a){var b=a.parentNode;b&&b.removeChild(a)},
g=u.NodeList,q=g._adaptWithCondition,a=g._adaptAsForEach,d=g._adaptAsMap;t.extend(g,{_normalize:function(a,d){var c=!0===a.parse;if("string"==typeof a.template){var e=a.templateFunc||r.string&&r.string.substitute;a=e?e(a.template,a):a}e=typeof a;"string"==e||"number"==e?(a=b.toDom(a,d&&d.ownerDocument),a=11==a.nodeType?t._toArray(a.childNodes):[a]):t.isArrayLike(a)?t.isArray(a)||(a=t._toArray(a)):a=[a];c&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,
d,c,e){if(1==d.nodeType||"only"!=c)for(var f,g=a.length,k=g-1;0<=k;k--){var l=e?this._cloneNode(a[k]):a[k];if(a._runParse&&r.parser&&r.parser.parse)for(f||(f=d.ownerDocument.createElement("div")),f.appendChild(l),r.parser.parse(f),l=f.firstChild;f.firstChild;)f.removeChild(f.firstChild);k==g-1?b.place(l,d,c):d.parentNode.insertBefore(l,d);d=l}},position:d(p.position),attr:q(f(m),c),style:q(f(k),c),addClass:a(l.add),removeClass:a(l.remove),toggleClass:a(l.toggle),replaceClass:a(l.replace),empty:a(b.empty),
removeAttr:a(m.remove),marginBox:d(p.getMarginBox),place:function(a,d){var c=u(a)[0];return this.forEach(function(a){b.place(a,c,d)})},orphan:function(a){return(a?u._filterResult(this,a):this).forEach(e)},adopt:function(a,b){return u(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new g;this.map(function(d){u(a,d).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,d=this,c=0;if("string"==typeof a){d=u._filterResult(this,
b[0]);if(1==b.length)return d._stash(this);c=1}return this._wrap(s.filter(d,b[c],b[c+1]),this)},addContent:function(a,d){a=this._normalize(a,this[0]);for(var c=0,e;e=this[c];c++)a.length?this._place(a,e,d,0<c):b.empty(e);return this}});return g})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(r,u,s,t,l,b,p,m,k,f){function c(d,c,e){return a&&e?function(a,d){return b(a,e,d)}:n?function(a,e){var f=
b(a,c,function(a){e.call(this,a);L=(new Date).getTime()}),g=b(a,d,function(a){(!L||(new Date).getTime()>L+1E3)&&e.call(this,a)});return{remove:function(){f.remove();g.remove()}}}:function(a,c){return b(a,d,c)}}function e(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function g(a,d,c){var g=e(a.target);if(y=!a.target.disabled&&g&&g.dojoClick)if(z=(A="useTarget"==y)?g:a.target,A&&a.preventDefault(),B=a.changedTouches?a.changedTouches[0].pageX-f.global.pageXOffset:a.clientX,C=a.changedTouches?
a.changedTouches[0].pageY-f.global.pageYOffset:a.clientY,E=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,D=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!v){v=!0;var k=function(a){y=A?s.isDescendant(f.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-f.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-f.global.pageYOffset:a.clientY),z):y&&(a.changedTouches?a.changedTouches[0].target:a.target)==z&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-f.global.pageXOffset:
a.clientX)-B)<=E&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-f.global.pageYOffset:a.clientY)-C)<=D};f.doc.addEventListener(d,function(a){k(a);A&&a.preventDefault()},!0);f.doc.addEventListener(c,function(a){k(a);if(y){H=(new Date).getTime();var d=A?z:a.target;"LABEL"===d.tagName&&(d=s.byId(d.getAttribute("for"))||d);var c=a.changedTouches?a.changedTouches[0]:a,e=document.createEvent("MouseEvents");e._dojo_click=!0;e.initMouseEvent("click",!0,!0,a.view,a.detail,c.screenX,c.screenY,c.clientX,
c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){b.emit(d,"click",e);H=(new Date).getTime()},0)}},!0);a=function(a){f.doc.addEventListener(a,function(b){b._dojo_click||!((new Date).getTime()<=H+1E3)||"INPUT"==b.target.tagName&&t.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==
b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)};a("click");a("mousedown");a("mouseup")}}var q=5>p("ios"),a=p("pointer-events")||p("MSPointer"),d=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=p("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),n=p("touch-events"),v,y,A=!1,z,B,C,E,D,H,L,T;a?k(function(){f.doc.addEventListener(d.down,function(a){g(a,d.move,d.up)},!0)}):n&&k(function(){function a(b){var d=l.delegate(b,
{bubbles:!0});6<=p("ios")&&(d.touches=b.touches,d.altKey=b.altKey,d.changedTouches=b.changedTouches,d.ctrlKey=b.ctrlKey,d.metaKey=b.metaKey,d.shiftKey=b.shiftKey,d.targetTouches=b.targetTouches);return d}T=f.body();f.doc.addEventListener("touchstart",function(a){L=(new Date).getTime();var d=T;T=a.target;b.emit(d,"dojotouchout",{relatedTarget:T,bubbles:!0});b.emit(T,"dojotouchover",{relatedTarget:d,bubbles:!0});g(a,"touchmove","touchend")},!0);b(f.doc,"touchmove",function(d){L=(new Date).getTime();
var c=f.doc.elementFromPoint(d.pageX-(q?0:f.global.pageXOffset),d.pageY-(q?0:f.global.pageYOffset));c&&(T!==c&&(b.emit(T,"dojotouchout",{relatedTarget:c,bubbles:!0}),b.emit(c,"dojotouchover",{relatedTarget:T,bubbles:!0}),T=c),b.emit(c,"dojotouchmove",a(d))||d.preventDefault())});b(f.doc,"touchend",function(d){L=(new Date).getTime();var c=f.doc.elementFromPoint(d.pageX-(q?0:f.global.pageXOffset),d.pageY-(q?0:f.global.pageYOffset))||f.body();b.emit(c,"dojotouchend",a(d))})});u={press:c("mousedown",
"touchstart",d.down),move:c("mousemove","dojotouchmove",d.move),release:c("mouseup","dojotouchend",d.up),cancel:c(m.leave,"touchcancel",a?d.cancel:null),over:c("mouseover","dojotouchover",d.over),out:c("mouseout","dojotouchout",d.out),enter:m._eventHandler(c("mouseover","dojotouchover",d.over)),leave:m._eventHandler(c("mouseout","dojotouchout",d.out))};return r.touch=u})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q){u=u("dojo.dnd.Container",k,{skipForm:!1,allowNested:!1,constructor:function(a,d){this.node=b.byId(a);d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&b.byId(d.dropParent);this.map={};this.current=null;this.containerState="";p.add(this.node,"dojoDndContainer");d&&d._skipStartup||this.startup();this.events=[c(this.node,g.over,t.hitch(this,"onMouseOver")),c(this.node,g.out,t.hitch(this,"onMouseOut")),c(this.node,"dragstart",
t.hitch(this,"onSelectStart")),c(this.node,"selectstart",t.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||s.global;var c=this.map,e=q._empty,f;for(f in c)f in e||a.call(b,c[f],f,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return e((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=
this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=q.getUniqueId();var c=b.getAttribute("dndType"),e=b.getAttribute("dndData");a[b.id]={data:e||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var e;if(c)for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),c.parentNode.insertBefore(e.node,c);else for(b=0;b<
a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),this.parent.appendChild(e.node);return this},destroy:function(){r.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=
a[0])}this.defaultCreator=q._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&b!=this.node;)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&
(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.skipForm&&q.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,e=a.toLowerCase()+"State";p.replace(this.node,c+b,c+this[e]);this[e]=b},_addItemClass:function(a,b){p.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){p.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=
a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&p.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,b){var c=(this.creator||this.defaultCreator).call(this,a,b);t.isArray(c.type)||(c.type=["text"]);c.node.id||(c.node.id=q.getUniqueId());p.add(c.node,"dojoDndItem");return c}});q._createNode=function(a){return a?function(b){return m.create(a,{innerHTML:b})}:q._createSpan};q._createTrTd=function(a){var b=m.create("tr");m.create("td",
{innerHTML:a},b);return b};q._createSpan=function(a){return m.create("span",{innerHTML:a})};q._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};q._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?q._createTrTd:q._createNode(q._defaultCreatorNodes[a]);return function(a,c){var e=a&&t.isObject(a),f,g;e&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],g=a):(f=e&&a.data?a.data:
a,e=e&&a.type?a.type:["text"],g=("avatar"==c?q._createSpan:b)(String(f)));g.id||(g.id=q.getUniqueId());return{node:g,data:f,type:e}}};return u})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g,q){var a=u("dojo.dnd.Manager",[b],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;
this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:p("touch")?0:16,OFFSET_Y:p("touch")?-64:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());f.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),f.publish("/dnd/source/over",null)):f.publish("/dnd/source/over",null)},startDrag:function(a,b,e){function m(a){a.preventDefault();
a.stopPropagation()}g.autoScrollStart(t.doc);this.source=a;this.nodes=b;this.copy=Boolean(e);this.avatar=this.makeAvatar();t.body().appendChild(this.avatar.node);f.publish("/dnd/start",a,b,this.copy);this.events=[k(t.doc,c.move,s.hitch(this,"onMouseMove")),k(t.doc,c.release,s.hitch(this,"onMouseUp")),k(t.doc,"keydown",s.hitch(this,"onKeyDown")),k(t.doc,"keyup",s.hitch(this,"onKeyUp")),k(t.doc,"dragstart",m),k(t.body(),"selectstart",m)];a="dojoDnd"+(e?"Copy":"Move");l.add(t.body(),a)},canDrop:function(a){a=
Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){l.remove(t.body(),["dojoDndCopy","dojoDndMove"]);r.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new q(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(g.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",
b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(e.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b));p("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(e.getCopyKeyState(a)));f.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);f.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else f.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case m.CTRL:a=
Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case m.ESCAPE:f.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==m.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();l.replace(t.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});e._manager=null;a.manager=e.manager=function(){e._manager||
(e._manager=new a);return e._manager};return a})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(r,u,s,t,l,b){var p={};r.setObject("dojo.dnd.autoscroll",p);p.getViewport=b.getBox;p.V_TRIGGER_AUTOSCROLL=32;p.H_TRIGGER_AUTOSCROLL=32;p.V_AUTOSCROLL_VALUE=16;p.H_AUTOSCROLL_VALUE=16;var m,k=s.doc,f=Infinity,c=Infinity;p.autoScrollStart=function(e){k=e;m=b.getBox(k);e=s.body(k).parentNode;f=Math.max(e.scrollHeight-
m.h,0);c=Math.max(e.scrollWidth-m.w,0)};p.autoScroll=function(e){var g=m||b.getBox(k),l=s.body(k).parentNode,a=0,d=0;e.clientX<p.H_TRIGGER_AUTOSCROLL?a=-p.H_AUTOSCROLL_VALUE:e.clientX>g.w-p.H_TRIGGER_AUTOSCROLL&&(a=Math.min(p.H_AUTOSCROLL_VALUE,c-l.scrollLeft));e.clientY<p.V_TRIGGER_AUTOSCROLL?d=-p.V_AUTOSCROLL_VALUE:e.clientY>g.h-p.V_TRIGGER_AUTOSCROLL&&(d=Math.min(p.V_AUTOSCROLL_VALUE,f-l.scrollTop));window.scrollBy(a,d)};p._validNodes={div:1,p:1,td:1};p._validOverflow={auto:1,scroll:1};p.autoScrollNodes=
function(b){for(var c,f,a,d,k,m,y=0,r=0,z=b.target;z;){if(1==z.nodeType&&z.tagName.toLowerCase()in p._validNodes){a=l.getComputedStyle(z);d=a.overflow.toLowerCase()in p._validOverflow;k=a.overflowX.toLowerCase()in p._validOverflow;m=a.overflowY.toLowerCase()in p._validOverflow;if(d||k||m)c=t.getContentBox(z,a),f=t.position(z,!0);if(d||k){a=Math.min(p.H_TRIGGER_AUTOSCROLL,c.w/2);k=b.pageX-f.x;if(u("webkit")||u("opera"))k+=s.body().scrollLeft;y=0;0<k&&k<c.w&&(k<a?y=-a:k>c.w-a&&(y=a),z.scrollLeft+=y)}if(d||
m){d=Math.min(p.V_TRIGGER_AUTOSCROLL,c.h/2);m=b.pageY-f.y;if(u("webkit")||u("opera"))m+=s.body().scrollTop;r=0;0<m&&m<c.h&&(m<d?r=-d:m>c.h-d&&(r=d),z.scrollTop+=r)}if(y||r)return}try{z=z.parentNode}catch(B){z=null}}p.autoScroll(b)};return p})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(r,u,s,t,l,b,p){u.add("rtl-adjust-position-for-verticalScrollBar",function(b,f){var c=s.body(f),e=p.create("div",{style:{overflow:"scroll",
overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},c,"last"),g=p.create("div",{style:{overflow:"hidden",direction:"ltr"}},e,"last"),m=0!=l.position(g).x;e.removeChild(g);c.removeChild(e);return m});u.add("position-fixed-support",function(b,f){var c=s.body(f),e=p.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},c,"last"),g=p.create("span",{style:{position:"fixed",left:"0",top:"0"}},e,"last"),m=l.position(g).x!=
l.position(e).x;e.removeChild(g);c.removeChild(e);return m});var m={getBox:function(b){b=b||s.doc;var f="BackCompat"==b.compatMode?s.body(b):b.documentElement,c=l.docScroll(b);if(u("touch")){var e=m.get(b);b=e.innerWidth||f.clientWidth;f=e.innerHeight||f.clientHeight}else b=f.clientWidth,f=f.clientHeight;return{l:c.x,t:c.y,w:b,h:f}},get:function(b){if(u("ie")&&m!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var f=b._parentWindow;b._parentWindow=
null;return f}return b.parentWindow||b.defaultView},scrollIntoView:function(k,f){try{k=t.byId(k);var c=k.ownerDocument||s.doc,e=s.body(c),g=c.documentElement||e.parentNode,m=u("ie"),a=u("webkit");if(k!=e&&k!=g)if(!(u("mozilla")||m||a||u("opera")||u("trident"))&&"scrollIntoView"in k)k.scrollIntoView(!1);else{var d="BackCompat"==c.compatMode,n=Math.min(e.clientWidth||g.clientWidth,g.clientWidth||e.clientWidth),p=Math.min(e.clientHeight||g.clientHeight,g.clientHeight||e.clientHeight),c=a||d?e:g,y=f||
l.position(k),r=k.parentNode,a=function(a){return 6>=m||7==m&&d?!1:u("position-fixed-support")&&"fixed"==b.get(a,"position").toLowerCase()},z=this,B=function(a,b,d){"BODY"==a.tagName||"HTML"==a.tagName?z.get(a.ownerDocument).scrollBy(b,d):(b&&(a.scrollLeft+=b),d&&(a.scrollTop+=d))};if(!a(k))for(;r;){r==e&&(r=c);var C=l.position(r),E=a(r),D="rtl"==b.getComputedStyle(r).direction.toLowerCase();if(r==c){C.w=n;C.h=p;c==g&&(m||u("trident"))&&D&&(C.x+=c.offsetWidth-C.w);if(0>C.x||!m||9<=m||u("trident"))C.x=
0;if(0>C.y||!m||9<=m||u("trident"))C.y=0}else{var H=l.getPadBorderExtents(r);C.w-=H.w;C.h-=H.h;C.x+=H.l;C.y+=H.t;var L=r.clientWidth,T=C.w-L;0<L&&0<T&&(D&&u("rtl-adjust-position-for-verticalScrollBar")&&(C.x+=T),C.w=L);L=r.clientHeight;T=C.h-L;0<L&&0<T&&(C.h=L)}E&&(0>C.y&&(C.h+=C.y,C.y=0),0>C.x&&(C.w+=C.x,C.x=0),C.y+C.h>p&&(C.h=p-C.y),C.x+C.w>n&&(C.w=n-C.x));var I=y.x-C.x,Z=y.y-C.y,N=I+y.w-C.w,x=Z+y.h-C.h,K,G;0<N*I&&(r.scrollLeft||r==c||r.scrollWidth>r.offsetHeight)&&(K=Math[0>I?"max":"min"](I,N),
D&&(8==m&&!d||9<=m||u("trident"))&&(K=-K),G=r.scrollLeft,B(r,K,0),K=r.scrollLeft-G,y.x-=K);0<x*Z&&(r.scrollTop||r==c||r.scrollHeight>r.offsetHeight)&&(K=Math.ceil(Math[0>Z?"max":"min"](Z,x)),G=r.scrollTop,B(r,0,K),K=r.scrollTop-G,y.y-=K);r=r!=c&&!E&&r.parentNode}}}catch(Q){console.error("scrollIntoView: "+Q),k.scrollIntoView(!1)}}};r.setObject("dojo.window",m);return m})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),
function(r,u,s,t,l,b,p,m){return r("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var k=b.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),f=this.manager.source,c,e=b.create("tbody",null,k),g=b.create("tr",null,e),l=b.create("td",null,g),a=Math.min(5,this.manager.nodes.length),d=0;p("highcontrast")&&b.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},l);b.create("span",{innerHTML:f.generateText?
this._generateText():""},l);for(t.set(g,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});d<a;++d)f.creator?c=f._normalizedCreator(f.getItem(this.manager.nodes[d].id).data,"avatar").node:(c=this.manager.nodes[d].cloneNode(!0),"tr"==c.tagName.toLowerCase()&&(g=b.create("table"),b.create("tbody",null,g).appendChild(c),c=g)),c.id="",g=b.create("tr",null,e),l=b.create("td",null,g),l.appendChild(c),t.set(g,{"class":"dojoDndAvatarItem",style:{opacity:(9-d)/10}});this.node=k},destroy:function(){b.destroy(this.node);
this.node=!1},update:function(){l.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(p("highcontrast")){var b=s.byId("a11yIcon"),f="+";this.manager.canDropFlag&&!this.manager.copy?f="< ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(f="x"):f="o";b.innerHTML=f}m("tr.dojoDndAvatarHeader td span"+(p("highcontrast")?" span":""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(r,u,s,t,l,b,p){l.add("highcontrast",function(){var b=p.doc.createElement("div");b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(u.blankGif||r.toUrl("./resources/blank.gif"))+'");';p.body().appendChild(b);var k=t.getComputedStyle(b),f=k.backgroundImage,k=k.borderTopColor==k.borderRightColor||
f&&("none"==f||"url(invalid-url:)"==f);8>=l("ie")?b.outerHTML="":p.body().removeChild(b);return k});b(function(){l("highcontrast")&&s.add(p.body(),"dj_a11y")});return l})},"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(r,u){return r("dojo.dnd.AutoSource",u,{constructor:function(){this.autoSync=!0}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(r,u,s,t){return u("dojo.fx.Toggler",null,{node:null,showFunc:s.fadeIn,
hideFunc:s.fadeOut,showDuration:200,hideDuration:200,constructor:function(l){r.mixin(this,l);this.node=l.node;this._showArgs=r.mixin({},l);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=r.mixin({},l);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);t.after(this.showAnim,"beforeBegin",r.hitch(this.hideAnim,"stop",!0),!0);t.after(this.hideAnim,"beforeBegin",
r.hitch(this.showAnim,"stop",!0),!0)},show:function(l){return this.showAnim.play(l||0)},hide:function(l){return this.hideAnim.play(l||0)}})})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(r,u,s,t,l,b,p,m,k){var f=s.mixin,c={},e=c._Line=function(a,b){this.start=a;this.end=b};e.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var g=c.Animation=function(a){f(this,a);s.isArray(this.curve)&&
(this.curve=new e(this.curve[0],this.curve[1]))};g.prototype=new t;s.extend(g,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var d=b||[];if(this[a])if(u.debugAtAllCosts)this[a].apply(this,d);else try{this[a].apply(this,d)}catch(c){console.error("exception in animation handler for:",a),console.error(c)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),
this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var d=a||this.delay,c=s.hitch(this,"_play",b);if(0<d)return this._delayTimer=setTimeout(c,d),this;c();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||
(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;
this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():
(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var q=0,a=null,d={run:function(){}};s.extend(g,{_startTimer:function(){this._timer||(this._timer=b.after(d,"run",s.hitch(this,"_cycle"),!0),
q++);a||(a=setInterval(s.hitch(d,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,q--);0>=q&&(clearInterval(a),a=null,q=0)}});var n=p("ie")?function(a){var b=a.style;b.width.length||"auto"!=k.get(a,"width")||(b.width="auto")}:function(){};c._fade=function(a){a.node=m.byId(a.node);var d=f({properties:{}},a);a=d.properties.opacity={};a.start="start"in d?d.start:function(){return+k.get(d.node,"opacity")||0};a.end=d.end;a=c.animateProperty(d);b.after(a,"beforeBegin",
s.partial(n,d.node),!0);return a};c.fadeIn=function(a){return c._fade(f({end:1},a))};c.fadeOut=function(a){return c._fade(f({end:0},a))};c._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var v=function(a){this._properties=a;for(var b in a){var d=a[b];d.start instanceof l&&(d.tempColor=new l)}};v.prototype.getValue=function(a){var b={},d;for(d in this._properties){var c=this._properties[d],e=c.start;e instanceof l?b[d]=l.blendColors(e,c.end,a,c.tempColor).toCss():s.isArray(e)||(b[d]=
(c.end-e)*a+e+("opacity"!=d?c.units||"px":0))}return b};c.animateProperty=function(a){var d=a.node=m.byId(a.node);a.easing||(a.easing=r._defaultEasing);a=new g(a);b.after(a,"beforeBegin",s.hitch(a,function(){var a={},b;for(b in this.properties){if("width"==b||"height"==b)this.node.display="block";var c=this.properties[b];s.isFunction(c)&&(c=c(d));c=a[b]=f({},s.isObject(c)?c:{end:c});s.isFunction(c.start)&&(c.start=c.start(d));s.isFunction(c.end)&&(c.end=c.end(d));var e=0<=b.toLowerCase().indexOf("color"),
g=function(a,b){var d={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==d)return d;d=k.get(a,b);return"opacity"==b?+d:e?d:parseFloat(d)};"end"in c?"start"in c||(c.start=g(d,b)):c.end=g(d,b);e?(c.start=new l(c.start),c.end=new l(c.end)):c.start="opacity"==b?+c.start:parseFloat(c.start)}this.curve=new v(a)}),!0);b.after(a,"onAnimate",s.hitch(k,"set",a.node),!0);return a};c.anim=function(a,b,d,e,f,k){return c.animateProperty({node:a,duration:d||g.prototype.duration,properties:b,easing:e,onEnd:f}).play(k||
0)};f(r,c);r._Animation=g;return c})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(r,u,s,t){var l=r.Color=function(b){b&&this.setColor(b)};l.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:t.transparentColor||[0,
0,0,0]};u.extend(l,{r:255,g:255,b:255,a:1,_set:function(b,l,m,k){this.r=b;this.g=l;this.b=m;this.a=k},setColor:function(b){u.isString(b)?l.fromString(b,this):u.isArray(b)?l.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof l||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+s.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+
b:b},this).join("")},toCss:function(b){var l=this.r+", "+this.g+", "+this.b;return(b?"rgba("+l+", "+this.a:"rgb("+l)+")"},toString:function(){return this.toCss(!0)}});l.blendColors=r.blendColors=function(b,p,m,k){var f=k||new l;s.forEach(["r","g","b","a"],function(c){f[c]=b[c]+(p[c]-b[c])*m;"a"!=c&&(f[c]=Math.round(f[c]))});return f.sanitize()};l.fromRgb=r.colorFromRgb=function(b,p){var m=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&l.fromArray(m[1].split(/\s*,\s*/),p)};l.fromHex=r.colorFromHex=
function(b,p){var m=p||new l,k=4==b.length?4:8,f=(1<<k)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;s.forEach(["b","g","r"],function(c){var e=b&f;b>>=k;m[c]=4==k?17*e:e});m.a=1;return m};l.fromArray=r.colorFromArray=function(b,p){var m=p||new l;m._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(m.a)&&(m.a=1);return m.sanitize()};l.fromString=r.colorFromString=function(b,p){var m=l.named[b];return m&&l.fromArray(m,p)||l.fromRgb(b,p)||l.fromHex(b,p)};return l})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare",
"./Grid","./OnDemandList"],function(r,u,s){return r([u,s],{})})},"dgrid/Grid":function(){define("dojo/_base/declare dojo/_base/kernel dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),function(r,u,s,t,l,b,p){function m(b,f){f&&f.nodeType&&b.appendChild(f)}r=r(b,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(b){return"object"!==typeof b?this.columns[b]:this.cell(b).column},listType:"grid",cell:function(b,f){if(b.column&&b.element)return b;
b.target&&b.target.nodeType&&(b=b.target);var c;if(b.nodeType){do{if(this._rowIdToObject[b.id])break;var e=b.columnId;if(e){f=e;c=b;break}b=b.parentNode}while(b&&b!==this.domNode)}if(!c&&"undefined"!==typeof f){var g=this.row(b);if(e=g&&g.element)for(var e=e.getElementsByTagName("td"),l=0;l<e.length;l++)if(e[l].columnId===f){c=e[l];break}}if(null!=b)return{row:g||this.row(b),column:f&&this.column(f),element:c}},createRowCells:function(b,f,c,e){var g=l("table.dgrid-row-table[role=presentation]"),m=
9>t("ie")?l(g,"tbody"):g,a,d,n,v,y,r,z,s,u,E;c=c||this.subRows;d=0;for(n=c.length;d<n;d++)for(r=c[d],a=l(m,"tr"),r.className&&l(a,"."+r.className),v=0,y=r.length;v<y;v++){z=r[v];s=z.id;u=z.field?".field-"+p.escapeCssIdentifier(z.field,"-"):"";(E="function"===typeof z.className?z.className(e):z.className)&&(u+="."+E);u=l(b+".dgrid-cell"+(s?".dgrid-column-"+p.escapeCssIdentifier(s,"-"):"")+u.replace(/ +/g,".")+"[role="+("th"===b?"columnheader":"gridcell")+"]");u.columnId=s;if(s=z.colSpan)u.colSpan=
s;if(s=z.rowSpan)u.rowSpan=s;f(u,z);a.appendChild(u)}return g},left:function(b,f){b.element||(b=this.cell(b));return this.cell(this._move(b,-(f||1),"dgrid-cell"))},right:function(b,f){b.element||(b=this.cell(b));return this.cell(this._move(b,f||1,"dgrid-cell"))},_defaultRenderCell:function(b,f,c){if(this.formatter){var e=this.formatter,g=this.grid.formatterScope;c.innerHTML="string"===typeof e&&g?g[e](f,b):this.formatter(f,b)}else null!=f&&c.appendChild(document.createTextNode(f))},renderRow:function(b,
f){var c=this,e=this.createRowCells("td",function(e,l){var a=b;l.get?a=l.get(b):"field"in l&&"_item"!==l.field&&(a=a[l.field]);l.renderCell?m(e,l.renderCell(b,a,e,f)):c._defaultRenderCell.call(l,b,a,e,f)},f&&f.subRows,b);return l("div[role=row]>",e)},renderHeader:function(){var b=this,f=this.headerNode,c=f.childNodes.length;for(f.setAttribute("role","row");c--;)l(f.childNodes[c],"!");c=this.createRowCells("th",function(b,c){var f=c.headerNode=b,a=c.field;a&&(b.field=a);c.renderHeaderCell?m(f,c.renderHeaderCell(f)):
("label"in c||c.field)&&f.appendChild(document.createTextNode("label"in c?c.label:c.field));!1!==c.sortable&&a&&"_item"!==a&&(b.sortable=!0,b.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[c.id=this.id+"-header"]=this.columns;f.appendChild(c);this._sortListener&&this._sortListener.remove();this._sortListener=s(c,"click,keydown",function(c){if("click"===c.type||32===c.keyCode||!t("opera")&&13===c.keyCode){var g=c.target,l,a,d;do if(g.sortable){d=[{property:l=
g.field||g.columnId,descending:(a=b.sort[0])&&a.property===l&&!a.descending}];l={bubbles:!0,cancelable:!0,grid:b,parentType:c.type,sort:d};s.emit(c.target,"dgrid-sort",l)&&(b._sortNode=g,b.set("sort",d));break}while((g=g.parentNode)&&g!==f)}})},resize:function(){var b=this.headerNode.firstChild,f=this.contentNode,c;this.inherited(arguments);f.style.width="";f&&b&&(c=b.offsetWidth)>f.offsetWidth&&(f.style.width=c+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();
this.inherited(arguments)},_setSort:function(){this.inherited(arguments);this.updateSortArrow(this.sort)},_findSortArrowParent:function(b){var f=this.columns,c;for(c in f){var e=f[c];if(e.field===b)return e.headerNode}},updateSortArrow:function(b,f){this._lastSortedArrow&&(l(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),l(this._lastSortedArrow,"!"),delete this._lastSortedArrow);f&&(this.sort=b);if(b[0]){var c=b[0].property,e=b[0].descending,c=this._sortNode||this._findSortArrowParent(c),
g;delete this._sortNode;c&&(c=c.contents||c,g=this._lastSortedArrow=l("div.dgrid-sort-arrow.ui-icon[role=presentation]"),g.innerHTML="&nbsp;",c.insertBefore(g,c.firstChild),l(c,e?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(b,f){return this.addCssRule("#"+p.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+p.escapeCssIdentifier(b,"-"),f)},_configColumns:function(b,f){var c=[],e=f instanceof Array;p.each(f,function(g,l){"string"===typeof g&&(f[l]=g={label:g});e||
g.field||(g.field=l);l=g.id=g.id||(isNaN(l)?l:b+l);this._configColumn&&(this._configColumn(g,f,b),l=g.id);e&&(this.columns[l]=g);g.grid=this;"function"===typeof g.init&&(u.deprecated("colum.init","Column plugins are being phased out in favor of mixins for better extensibility. column.init may be removed in a future release."),g.init());c.push(g)},this);return e?f:c},_destroyColumns:function(){var b=this.subRows,f=b&&b.length,c,e,g,l;this.cleanup();for(c=0;c<f;c++)for(e=0,l=b[c].length;e<l;e++)g=b[c][e],
"function"===typeof g.destroy&&(u.deprecated("colum.destroy","Column plugins are being phased out in favor of mixins for better extensibility. column.destroy may be removed in a future release."),g.destroy())},configStructure:function(){var b=this.subRows,f=this._columns=this.columns;this.columns=!f||f instanceof Array?{}:f;if(b)for(f=0;f<b.length;f++)b[f]=this._configColumns(f+"-",b[f]);else this.subRows=[this._configColumns("",f)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(b){this._destroyColumns();
this.subRows=null;this.columns=b;this._updateColumns()},_setSubRows:function(b){this._destroyColumns();this.subRows=b;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this.sort.length?this.updateSortArrow(this.sort):this.resize())}});r.appendIfNode=m;return r})},"put-selector/put":function(){(function(r){var u,s=/[-+,> ]/;r([],u=function(r,l){function b(c){function e(){n&&
d&&n!=d&&(d==c&&(g||(g=s.test(z)&&r.createDocumentFragment()))?g:d).insertBefore(n,a||null)}for(var g,l,a,d,n,v=arguments,y=v[0],A=0;A<v.length;A++){var z=v[A];if("object"==typeof z){l=!1;if(z instanceof Array){n=r.createDocumentFragment();for(var B=0;B<z.length;B++)n.appendChild(b(z[B]));z=n}if(z.nodeType)n=z,e(),d=z,a=0;else for(B in z)n[B]=z[B]}else if(l)l=!1,n.appendChild(r.createTextNode(z));else{1>A&&(c=null);l=!0;if(y=z.replace(p,function(g,l,q,p,y,s){l&&(e(),"-"==l||"+"==l?(d=(a=n||d).parentNode,
n=null,"+"==l&&(a=a.nextSibling)):("<"==l?d=n=(n||d).parentNode:(","==l?d=c:n&&(d=n),n=null),a=0),n&&(d=n));if((g=!q&&p)||!n&&(q||y))"$"==g?(g=v[++A],d.appendChild(r.createTextNode(g))):(g=g||b.defaultTag,(l=f&&v[A+1]&&v[A+1].name)&&(g="<"+g+' name="'+l+'">'),n=k&&~(m=g.indexOf("|"))?r.createElementNS(k[g.slice(0,m)],g.slice(m+1)):r.createElement(g));if(q)if("$"==p&&(p=v[++A]),"#"==q)n.id=p;else if(l=(g=n.className)&&(" "+g+" ").replace(" "+p+" "," "),"."==q)n.className=g?(l+p).substring(1):p;else if("!"==
z){var B;f?b("div",n,"<").innerHTML="":(B=n.parentNode)&&B.removeChild(n)}else l=l.substring(1,l.length-1),l!=g&&(n.className=l);y&&("$"==s&&(s=v[++A]),"style"==y?n.style.cssText=s:(q="!"==y.charAt(0)?(y=y.substring(1))&&"removeAttribute":"setAttribute",s=""===s?y:s,k&&~(m=y.indexOf("|"))?n[q+"NS"](k[y.slice(0,m)],y.slice(m+1),s):n[q](y,s)));return""}))throw new SyntaxError("Unexpected char "+y+" in "+z);e();d=y=n||d}}c&&g&&c.appendChild(g);return y}s=l||s;var p=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w\u00A0-\uFFFF%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,
m,k=!1;r=r||document;var f="object"==typeof r.createElement;b.addNamespace=function(b,e){r.createElementNS?(k||(k={}))[b]=e:r.namespaces.add(b,e)};b.defaultTag="div";b.forDocument=u;return b})})(function(r,u,s){s=s||u;"function"===typeof define?define([],function(){return s()}):"undefined"==typeof window?require("./node-html")(module,s):put=s()})},"dgrid/List":function(){define("dojo/_base/declare dojo/on dojo/has ./util/misc xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),
function(r,u,s,t,l,b){function p(a,d){b(document.body,a,".dgrid-scrollbar-measure");var c=a["offset"+d]-a["client"+d];a.className="";a.parentNode&&document.body.removeChild(a);return c}function m(a){var d=a?"."+a.replace(g,"."):"";this._class&&(d="!"+this._class.replace(g,"!")+d);b(this.domNode,d);this._class=a}function k(){return this._class}l("mozilla","touch");s.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});var f,c;s.add("dom-scrollbar-width",
function(a,b,c){return p(c,"Width")});s.add("dom-scrollbar-height",function(a,b,c){return p(c,"Height")});s.add("dom-rtl-scrollbar-left",function(a,d,c){a=b("div");b(document.body,c,".dgrid-scrollbar-measure[dir=rtl]");b(c,a);d=!!s("ie")||!!s("trident")||a.offsetLeft>=s("dom-scrollbar-width");c.className="";c.parentNode&&document.body.removeChild(c);b(a,"!");c.removeAttribute("dir");return d});var e=0,g=/ +/g,q=function(){this._started&&this.resize()};return r(null,{tabableHeader:!1,showHeader:!1,
showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!0,highlightDuration:250,postscript:function(a,b){var c=this;(this._Row=function(a,b,d){this.id=a;this.data=b;this.element=d}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,d){var c=this.domNode=d||b("div"),f;a&&(this.params=a,r.safeMixin(this,a),f=a["class"]||a.className||c.className);this.sort=this.sort||[];this._listeners=
[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=c.id=c.id||this.id||"dgrid_"+e++;this.buildRendering();f&&m.call(this,f);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,d=this.addUiClasses,c=this,e,f,g,k;k=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";b(a,"[role=grid].dgrid.dgrid-"+this.listType+(d?
".ui-widget":""));e=this.headerNode=b(a,"div.dgrid-header.dgrid-header-row"+(d?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));f=this.bodyNode=b(a,"div.dgrid-scroller");s("ff")&&(f.tabIndex=-1);this.headerScrollNode=b(a,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(d?".ui-widget-header":""));g=this.footerNode=b("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));b(a,g);k&&(a.className+=" dgrid-rtl"+(s("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));
u(f,"scroll",function(b){c.showHeader&&(e.scrollLeft=b.scrollLeft||f.scrollLeft);b.stopPropagation();u.emit(a,"scroll",{scrollTarget:f})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=b(this.bodyNode,"div.dgrid-content"+(d?".ui-widget-content":""));this._listeners.push(this._resizeHandle=u(window,"resize",t.throttleDelayed(q,this)))},postCreate:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this.sort))},
configStructure:function(){},resize:function(){var a=this.bodyNode,b=this.footerNode,b=this.showFooter?b.offsetHeight:0;this.headerScrollNode.style.height=a.style.marginTop=this.headerNode.offsetHeight+"px";a.style.marginBottom=b+"px";f||(f=s("dom-scrollbar-width"),c=s("dom-scrollbar-height"),s("ie")&&(f++,c++),t.addCssRule(".dgrid-scrollbar-width","width: "+f+"px"),t.addCssRule(".dgrid-scrollbar-height","height: "+c+"px"),17!==f&&(t.addCssRule(".dgrid-header-row","right: "+f+"px"),t.addCssRule(".dgrid-rtl-swap .dgrid-header-row",
"left: "+f+"px")))},addCssRule:function(a,b){var c=t.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(a,b){var c=u(this.domNode,a,b);s("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){for(var a in this._rowIdToObject)if(this._rowIdToObject[a]!==this.columns){var b=document.getElementById(a);b&&this.removeRow(b,!0)}},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();this._listeners=
null}this._started=!1;this.cleanup();b(this.domNode,"!")},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},highlightRow:function(a,d){a=a.element||a;b(a,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":""));setTimeout(function(){b(a,"!dgrid-highlight!ui-state-highlight")},d||this.highlightDuration)},adjustRowIndices:function(a){var d=a.rowIndex;if(-1<d){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+
" ").indexOf("dgrid-row ")&&b(a,"."+(1===d%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0===d%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=d++);while((a=a.nextSibling)&&a.rowIndex!==d)}},renderArray:function(a,b,c){c=c||{};var e=c.start||0,f=document.createDocumentFragment(),g=[],k=0,l=a.length;b||(this._lastCollection=a);for(;k<l;)g[k]=this.insertRow(a[k],f,null,e++,c),k++;(a=b?b.parentNode:this.contentNode)&&a.parentNode&&(a!==this.contentNode||l)&&(a.insertBefore(f,b||null),l&&this.adjustRowIndices(g[l-
1]));return g},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,e,f){var g=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(a):this._autoId++),k=document.getElementById(g),l=k&&k.previousSibling;k&&(k===c&&(c=(c.connected||c).nextSibling),this.removeRow(k));k=this.renderRow(a,f);k.className=(k.className||"")+" dgrid-row "+(1===e%2?"dgrid-row-odd":"dgrid-row-even")+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[k.id=g]=a;b.insertBefore(k,
c||null);k.rowIndex=e;l&&l.rowIndex!==k.rowIndex-1&&this.adjustRowIndices(l);return k},renderRow:function(a){return b("div",""+a)},removeRow:function(a,d){a=a.element||a;delete this._rowIdToObject[a.id];d||b(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!==this.domNode)}else return"object"===typeof a?
b=this.collection.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,e){var f,g;g=f=a.element;b=b||1;do if(a=f[0>b?"previousSibling":"nextSibling"]){do if((f=a)&&-1<(f.className+" ").indexOf(c+" ")){g=f;b+=0>b?1:-1;break}while(a=(!e||!f.hidden)&&f[0>b?"lastChild":"firstChild"])}else if(f=f.parentNode,!f||f===this.bodyNode||f===this.headerNode)break;while(b);return g},
up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===
typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:k,_setClass:m,_getClassName:k,_setClassName:m,_setSort:function(a,b){this.sort="string"!==typeof a?a:[{property:a,descending:b}];this._applySort()},_applySort:function(){this.refresh();if(this._lastCollection){var a=
this.sort;if(a&&0<a.length){var b=a[0].property,c=!!a[0].descending;this._lastCollection.sort(function(a,e){var f=a[b],g=e[b];void 0===f&&(f="");void 0===g&&(g="");return f===g?0:f>g!==c?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(a){var d=this.headerNode;this.showHeader=a;b(d,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(d.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(a){this.showFooter=a;b(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");
this.resize()}})})},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(r,u){r.add("dom-contains",function(b,f,c){return!!c.contains});var s=[],t,l,b,p=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,m={defaultDelay:15,throttle:function(b,f,c){var e=!1;c=c||m.defaultDelay;return function(){e||(e=!0,b.apply(f,arguments),setTimeout(function(){e=!1},c))}},throttleDelayed:function(b,f,c){var e=!1;c=c||m.defaultDelay;return function(){if(!e){e=!0;var g=arguments;setTimeout(function(){e=!1;b.apply(f,
g)},c)}}},debounce:function(b,f,c){var e;c=c||m.defaultDelay;return function(){e&&(clearTimeout(e),e=null);var g=arguments;e=setTimeout(function(){b.apply(f,g)},c)}},each:function(b,f,c){var e,g;if(b)if("number"===typeof b.length)for(e=0,g=b.length;e<g;e++)f.call(c,b[e],e,b);else for(e in b)f.call(c,b[e],e,b)},contains:function(b,f){return r("dom-contains")?b.contains(f):b.compareDocumentPosition(f)&8},addCssRule:function(k,f){t||(t=u(document.getElementsByTagName("head")[0],"style"),t=t.sheet||t.styleSheet,
l=t.deleteRule?"deleteRule":"removeRule",b=t.cssRules?"cssRules":"rules");var c=s.length;s[c]=(t.cssRules||t.rules).length;t.addRule?t.addRule(k,f):t.insertRule(k+"{"+f+"}",s[c]);return{get:function(e){return t[b][s[c]].style[e]},set:function(e,f){"undefined"!==typeof s[c]&&(t[b][s[c]].style[e]=f)},remove:function(){var b=s[c],f,k;if(void 0!==b)for(t[l](b),s[c]=void 0,f=c+1,k=s.length;f<k;f++)s[f]>b&&s[f]--}}},escapeCssIdentifier:function(b,f){return"string"===typeof b?b.replace(p,f||"\\$1"):b}};
return m})},"xstyle/has-class":function(){define(["dojo/has"],function(r){var u={};return function(){for(var s,t=arguments,l=0;l<t.length;l++)if(s=t[l],!u[s]){u[s]=!0;var b=s.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),p=r(b[2]),m=-b[4];(0<m?m<=p&&(-b[5]||m)>=p:!!p)==!b[1]&&(document.documentElement.className+=" has-"+s)}}})},"xstyle/css":function(){define(["require"],function(r){function u(r,t,l){var b=document.documentElement;r=b.insertBefore(document.createElement(r),b.firstChild);r.id=t;t=
(r.currentStyle||getComputedStyle(r,null))[l];b.removeChild(r);return t}return{load:function(s,t,l,b){function p(){var b=u("x-parse",null,"content");b&&"none"!=b?t([eval(b)],l):l()}var m=t.toUrl(s),k=t.cache&&t.cache["url:"+m];if(k)return k.xCss&&(k=k.cssText),r(["./util/createStyleSheet"],function(b){b(k)}),p();if("none"==u("div",s.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return p();r(["./core/load-css"],function(b){b(m,p)})}}})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/on dojo/when ./util/misc put-selector/put".split(" "),
function(r,u,s,t,l,b,p,m){return s([r,u],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:p.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var b=this;l(this.bodyNode,"scroll",p[this.pagingMethod](function(f){b._processScroll(f)},null,this.pagingDelay))},renderQuery:function(k,f){var c=this,e=f&&f.container||this.contentNode,g={query:k,count:0},l,a=this.preload,
d={node:m(e,"div.dgrid-preload",{rowIndex:0}),count:0,query:k,next:g};d.node.style.height="0";g.node=l=m(e,"div.dgrid-preload");g.previous=d;l.rowIndex=this.minRowsPerPage;a?((g.next=a.next)&&l.offsetTop>=a.node.offsetTop?g.previous=a:(g.next=a,g.previous=a.previous),g.previous.next=g,g.next.previous=g):this.preload=g;var n=m(l,"-div.dgrid-loading");m(n,"div.dgrid-below").innerHTML=this.loadingMessage;f=t.mixin({start:0,count:this.minRowsPerPage},"level"in k?{queryLevel:k.level}:null);return this._trackError(function(){var a=
k(f);return c.renderQueryResults(a,l,f).then(function(d){return b(a.totalLength,function(a){var e=d.length,k=l.parentNode,p=c.noDataNode;c._rows&&(c._rows.min=0,c._rows.max=e===a?Infinity:e-1);m(n,"!");"queryLevel"in f||(c._total=a);0===a&&(p&&(m(p,"!"),delete c.noDataNode),c.noDataNode=p=m("div.dgrid-no-data"),k.insertBefore(p,c._getFirstRowSibling(k)),p.innerHTML=c.noDataMessage);for(p=k=0;p<e;p++)k+=c._calcRowHeight(d[p]);e&&k&&(c.rowHeight=k/e);a-=e;g.count=a;l.rowIndex=e;a?l.style.height=Math.min(a*
c.rowHeight,c.maxEmptySpace)+"px":l.style.display="none";c._previousScrollPosition&&(c.scrollTo(c._previousScrollPosition),delete c._previousScrollPosition);return b(c._processScroll()).then(function(){return d})})}).otherwise(function(a){m(n,"!");throw a;})})},refresh:function(b){var f=this,c=b&&b.keepScrollPosition;"undefined"===typeof c&&(c=this.keepScrollPosition);c&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(b){return f._renderedCollection.fetchRange({start:b.start,
end:b.start+b.count})}).then(function(){setTimeout(function(){l.emit(f.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:f})},0)})},resize:function(){this.inherited(arguments);this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(k){var f=this.inherited(arguments),c=this._renderedCollection;c&&c.releaseRange&&b(f,function(e){e[0]&&!e[0].parentNode.tagName&&b(k.totalLength,function(){c.releaseRange(e[0].rowIndex,e[e.length-
1].rowIndex+1)})});return f},_getFirstRowSibling:function(b){return b.lastChild},_calcRowHeight:function(b){var f=b.nextSibling;return f&&!/\bdgrid-preload\b/.test(f.className)?f.offsetTop-b.offsetTop:b.offsetHeight},lastScrollTop:0,_processScroll:function(k){function f(a,b,d,e){var f=g.farOffRemoval,k=a.node;if(b>2*f){for(var n,l=k[d],q=0,p=0,v=[],y=l&&l.rowIndex,r;n=l;){var t=g._calcRowHeight(n);if(q+t+f>b||0>l.className.indexOf("dgrid-row")&&0>l.className.indexOf("dgrid-loading"))break;l=n[d];
q+=t;p+=n.count||1;g.removeRow(n,!0);v.push(n);"rowIndex"in n&&(r=n.rowIndex)}g._renderedCollection.releaseRange&&"number"===typeof y&&"number"===typeof r&&(e?g._renderedCollection.releaseRange(r,y+1):g._renderedCollection.releaseRange(y,r+1),g._rows[e?"max":"min"]=r,g._rows.max>=g._total-1&&(g._rows.max=Infinity));a.count+=p;e?(k.rowIndex-=p,c(a)):k.style.height=k.offsetHeight+q+"px";var A=m("div",v);setTimeout(function(){m(A,"!")},1)}}function c(a,b){a.node.style.height=Math.min(a.count*g.rowHeight,
b?Infinity:g.maxEmptySpace)+"px"}function e(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var g=this,l=g.bodyNode;k=k&&k.scrollTop||this.getScrollPosition().y;var l=l.offsetHeight+k,a,d,n=g.preload,p=g.lastScrollTop,y=g.bufferRows*g.rowHeight,r=y-g.rowHeight,t,s=!0;for(g.lastScrollTop=k;n&&!n.node.offsetWidth;)n=n.previous;for(;n&&n!==a;){a=g.preload;g.preload=n;d=n.node;var u=d.offsetTop;if(l+1+r<u)n=e(n,s=!1);else if(k-1-r>u+d.offsetHeight)n=e(n,s=!0);else{var u=((d.rowIndex?
k-y:l)-u)/g.rowHeight,E=(l-k+2*y)/g.rowHeight,D=Math.max(Math.min((k-p)*g.rowHeight,g.maxRowsPerPage/2),g.maxRowsPerPage/-2),E=E+Math.min(Math.abs(D),10);0===d.rowIndex&&(u-=E);u=Math.max(u,0);10>u&&0<u&&E+u<g.maxRowsPerPage&&(E+=Math.max(0,u),u=0);E=Math.min(Math.max(E,g.minRowsPerPage),g.maxRowsPerPage,n.count);if(0===E)n=e(n,s);else{var E=Math.ceil(E),u=Math.min(Math.floor(u),n.count-E),H={};n.count-=E;var L=d,T,D=g.queryRowsOverlap,I=(0<d.rowIndex||d.offsetTop>k)&&n;if(I){var Z=n.previous;Z&&
(f(Z,k-(Z.node.offsetTop+Z.node.offsetHeight),"nextSibling"),0<u&&Z.node===d.previousSibling?(u=Math.min(n.count,u),n.previous.count+=u,c(n.previous,!0),d.rowIndex+=u,D=0):E+=u,n.count-=u);H.start=d.rowIndex-D;H.count=Math.min(E+D,g.maxRowsPerPage);d.rowIndex=H.start+H.count}else n.next&&(f(n.next,n.next.node.offsetTop-l,"previousSibling",!0),L=d.nextSibling,L===n.next.node?(n.next.count+=n.count-u,n.next.node.rowIndex=u+E,c(n.next),n.count=u,D=0):T=!0),H.start=n.count,H.count=Math.min(E+D,g.maxRowsPerPage);
T&&L&&L.offsetWidth&&(T=L.offsetTop);c(n);"level"in n.query&&(H.queryLevel=n.query.level);if("queryLevel"in H||!(H.start>g._total||0>H.count)){var N=m(L,"-div.dgrid-loading[style=height:"+E*g.rowHeight+"px]");m(N,"div.dgrid-"+(I?"below":"above")).innerHTML=g.loadingMessage;N.count=E;g._trackError(function(){(function(a,d,e){var f=n.query(H);t=g.renderQueryResults(f,a,H).then(function(k){var n=g._rows;!n||"queryLevel"in H||!k.length||(d?(n.max<=n.min&&(n.min=k[0].rowIndex),n.max=k[k.length-1].rowIndex):
(n.max<=n.min&&(n.max=k[k.length-1].rowIndex),n.min=k[0].rowIndex));L=a.nextSibling;m(a,"!");e&&L&&L.offsetWidth&&(n=g.getScrollPosition(),g.scrollTo({x:n.x,y:n.y+L.offsetTop-e,preserveMomentum:!0}));b(f.totalLength,function(a){"queryLevel"in H||(g._total=a,g._rows&&g._rows.max>=g._total-1&&(g._rows.max=Infinity));d&&(d.count=a-d.node.rowIndex,c(d))});g._processScroll();return k},function(b){m(a,"!");throw b;})})(N,I,T)});n=n.previous}}}}return t}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/on dojo/when put-selector/put".split(" "),
function(r,u,s,t,l,b,p){function m(b){if("object"!==typeof b)b=Error(b);else if("cancel"===b.dojoType)return;l.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return r(null,{collection:null,_renderedCollection:null,_rows:null,_observerHandle:null,shouldTrackCollection:!0,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};t.before(this,"configStructure",u.hitch(this,
function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);this._renderedCollection&&this._cleanupCollection()},_configColumn:function(b){b.set&&(this._columnsWithSet[b.field]=b);this.inherited(arguments)},_setCollection:function(b){this._renderedCollection&&(this.cleanup(),this._cleanupCollection({shouldRevert:!b||b.storage!==this._renderedCollection.storage}));if(b){var f=b;this.sort&&0<this.sort.length&&(f=b.sort(this.sort));f.track&&this.shouldTrackCollection&&(f=f.track(),
this._rows=[],this._observerHandle=this._observeCollection(f,this.contentNode,{rows:this._rows}));this._renderedCollection=f}this.collection=b;this.refresh()},_setStore:function(){},_getTotal:function(){return this._total},_cleanupCollection:function(b){b=b||{};this._renderedCollection.tracking&&this._renderedCollection.tracking.remove();this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null);!1!==b.shouldRevert&&(this.dirty={});this._renderedCollection=this.collection=
null},_applySort:function(){this.collection&&this.set("collection",this.collection)},row:function(){var b=this.inherited(arguments);b&&b.data&&"undefined"!==typeof b.id&&(b.id=this.collection.getIdentity(b.data));return b},refresh:function(){var b=this.inherited(arguments);this.collection||(this.noDataNode=p(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return b},renderArray:function(){var b=this.inherited(arguments);this.collection||b.length&&this.noDataNode&&
p(this.noDataNode,"!");return b},insertRow:function(b,f,c,e,g){var l=this.collection,a=this.dirty,l=l&&l.getIdentity(b),d;l in a&&!(l in this._updating)&&(d=a[l]);d&&(b=u.delegate(b,d));a=this.inherited(arguments);g&&g.rows&&(g.rows[e]=a);this.noDataNode&&(p(this.noDataNode,"!"),this.noDataNode=null);return a},updateDirty:function(b,f,c){var e=this.dirty,g=e[b];g||(g=e[b]={});g[f]=c},save:function(){function k(a,d){return function(g){var k=f._columnsWithSet,n=f._updating,l,m;if("function"===typeof g.set)g.set(d);
else for(l in d)g[l]=d[l];for(l in k)m=k[l].set(g),void 0!==m&&(g[l]=m);n[a]=!0;return b(c.put(g),function(){delete e[a];delete n[a]})}}var f=this,c=this.collection,e=this.dirty,g=new s,l=g.promise,a=function(a){var b;return f.getBeforePut||!(b=f.row(a).data)?function(){return c.get(a)}:function(){return b}},d;for(d in e)var n=k(d,e[d]),l=l.then(a(d)).then(n);g.resolve();return l},revert:function(){this.dirty={};this.refresh()},_trackError:function(k){"string"===typeof k&&(k=u.hitch(this,k));var f=
this,c;try{c=b(k())}catch(e){k=new s,k.reject(e),c=k.promise}c.otherwise(function(b){m.call(f,b)});return c},removeRow:function(b,f,c){var e={element:b};!f&&this.noDataMessage&&this.up(e).element===b&&this.down(e).element===b&&(this.noDataNode=p(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);(e=c&&c.rows||this._rows)&&delete e[b.rowIndex];return this.inherited(arguments)},renderQueryResults:function(k,f,c){c=u.mixin({rows:this._rows},c);var e=this;return b(k).then(function(b){b=
e.renderArray(b,f,c);delete e._lastCollection;return b})},_observeCollection:function(b,f,c){var e=this,g=c.rows,l,a=[b.on("delete, update",function(a){var b=a.previousIndex,k=a.index;void 0!==b&&g[b]&&("max"in g&&(void 0===k||k<g.min||k>g.max)&&g.max--,l=g[b],l.parentNode===f&&e.removeRow(l,!1,c),g.splice(b,1),("delete"===a.type||"update"===a.type&&(b<k||void 0===k))&&g[b]&&g[b].rowIndex--,e._processScroll&&e._processScroll());"delete"===a.type&&(l=null)}),b.on("add, update",function(a){var b=a.previousIndex,
k=a.index;if(void 0!==k&&(!("max"in g)||k>=g.min&&k<=g.max)){"max"in g&&(void 0===b||b<g.min||b>g.max)&&g.max++;if(g.length){if(b=g[k],!b&&(b=g[k-1]))b=(b.connected||b).nextSibling}else b=e._getFirstRowSibling&&e._getFirstRowSibling(f);l&&b&&l.id===b.id&&(b=(b.connected||b).nextSibling);b&&!b.parentNode&&(b=document.getElementById(b.id));g.splice(k,0,void 0);l=e.insertRow(a.target,f,b,k,c);e.highlightRow(l)}l=null}),b.on("add, delete, update",function(a){var c="undefined"!==typeof a.previousIndex?
a.previousIndex:Infinity,f="undefined"!==typeof a.index?a.index:Infinity,l=Math.min(c,f);c!==f&&g[l]&&e.adjustRowIndices(g[l]);e._onNotification(g,a,b);b===e._renderedCollection&&"totalLength"in a&&(e._total=a.totalLength)})];return{remove:function(){for(;0<a.length;)a.pop().remove()}}},_onNotification:function(){}})})},"dgrid/Selection":function(){define("dojo/_base/declare dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(r,
u,s,t,l,b,p){function m(a,b){for(var c=a.unselectable=b?"on":"",e=a.getElementsByTagName("*"),f=e.length;--f;)"INPUT"!==e[f].tagName&&"TEXTAREA"!==e[f].tagName&&(e[f].unselectable=c)}function k(a,b){var e=a.bodyNode,f=b?"text":21>s("ff")?"-moz-none":"none";c&&"msUserSelect"!==c?e.style[c]=f:s("dom-selectstart")?b||a._selectstartHandle?b&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=u(e,"selectstart",function(a){var b=a.target&&a.target.tagName;
"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(m(e,!b),b||a._unselectableHandle)?b&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=t.after(a,"renderRow",function(a){m(a,!0);return a})}s.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition});s.add("css-user-select",function(a,b,c){a=c.style;b=["Khtml","O","ms","Moz","Webkit"];c=b.length;var e="userSelect";do if("undefined"!==typeof a[e])return e;while(c--&&
(e=b[c]+"UserSelect"));return!1});s.add("dom-selectstart","undefined"!==typeof document.onselectstart);var f=s("mac")?"metaKey":"ctrlKey",c=s("css-user-select"),e=(l=s("pointer"))&&"MS"===l.slice(0,2),g=l?l+(e?"Down":"down"):"mousedown",q=l?l+(e?"Up":"up"):"mouseup";return r(null,{selectionDelegate:".dgrid-row",selectionEvents:g+","+q+",dgrid-cellfocusin",selectionTouchEvents:s("touch")?b.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,
_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!==
this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},_setAllowTextSelection:function(a){"undefined"!==typeof a?k(this,a):k(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(a,b){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(b))&&!("dgrid-cellfocusin"===a.type&&"mousedown"===a.parentType||a.type===q&&b!==this._waitForMouseUp)){this._waitForMouseUp=
null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32===a.keyCode)if(!a.shiftKey&&a.type===g&&this.isSelected(b))this._waitForMouseUp=b;else this[this._selectionHandlerName](a,b);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){var c=a.keyCode?a.ctrlKey:a[f];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c=this._lastSelected,e=a.keyCode?a.ctrlKey:
a[f],g;a.shiftKey||(g=e?null:!0,c=null);this.select(b,c,g);c||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[f])||this.clearSelection(null,!0);this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,d=this.contentNode,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};s("touch")&&!s("pointer")&&this.selectionTouchEvents?
(u(d,b.selector(c,this.selectionTouchEvents),function(b){a._handleSelect(b,this);a._ignoreMouseSelect=this}),u(d,u.selector(c,this.selectionEvents),function(b){a._ignoreMouseSelect!==this?a._handleSelect(b,this):b.type===q&&(a._ignoreMouseSelect=null)})):u(d,u.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(b){b[f]&&65===b.keyCode&&!/\bdgrid-input\b/.test(b.target.className)&&
(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&t.before(this,"_setCollection",function(b){a._updateDeselectionAspect(b)});this._updateDeselectionAspect()},_updateDeselectionAspect:function(a){function b(a,d){var e=c.row(a);if(e&&c.selection[e.id])c[d](e)}var c=this,e;this._removeDeselectSignals&&this._removeDeselectSignals();e=a&&a.track&&this._observeCollection?[t.before(this,"_observeCollection",function(a){e.push(a.on("delete",function(a){"undefined"===
typeof a.index&&b(a.id,"deselect")}))}),t.after(this,"_observeCollection",function(a){e.push(a.on("update",function(c){"undefined"!==typeof c.index&&b(a.getIdentity(c.target),"select")}))},!0)]:[t.before(this,"removeRow",function(a,b){var d;b||(d=this.row(a))&&d.id in this.selection&&this.deselect(d)})];this._removeDeselectSignals=function(){for(var a=e.length;a--;)e[a].remove();e=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],c=this._selectionTriggerEvent,
e;e={bubbles:!0,grid:this};c&&(e.parentType=c.type);e[this._selectionTargetType]=b;this._selectionEventQueues[a]=[];u.emit(this.contentNode,"dgrid-"+a,e)},_fireSelectionEvents:function(){var a=this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,c){var e,f,g;"undefined"===typeof c&&(c=!0);a.element||(a=this.row(a));if(!1===c||this.allowSelect(a))if(e=this.selection,f=!!e[a.id],null===c&&(c=!f),g=a.element,c||this.allSelected?e[a.id]=c:delete this.selection[a.id],
g&&(c?p(g,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):p(g,"!dgrid-selected!ui-state-active")),c!==f&&g&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)if(b.element||(b=this.row(b)),b){if(b=b.element)for(e=this._determineSelectionDirection(g,b),e||(b=document.getElementById(b.id),e=this._determineSelectionDirection(g,b));a.element!==b&&(a=this[e](a));)this._select(a,null,c)}else this._lastSelected=g,console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.")},
_determineSelectionDirection:s("dom-comparedocumentposition")?function(a,b){var c=b.compareDocumentPosition(a);return c&1?!1:2===c?"down":"up"}:function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,c){this._select(a,b,c);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},
selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},
renderArray:function(){var a=this.inherited(arguments),b=this.selection,c,e,f;for(c=0;c<a.length;c++)e=this.row(a[c]),(f=e.id in b?b[e.id]:this.allSelected)&&this.select(e,null,f);this._fireSelectionEvents();return a}})})},"dgrid/Tree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/on dojo/query dojo/when ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(r,u,s,t,l,b,p,m,k,f,c){return r(null,{collapseOnRefresh:!1,enableTreeTransitions:!0,
treeIndentWidth:9,constructor:function(){this._treeColumnListeners=[]},shouldExpand:function(b,c,f){return f},expand:function(e,f,k){if(this._treeColumn){var a=this,d=e.element?e:this.row(e),n=!!this._expanded[d.id],v=m("transitionend"),r;e=d.element;e=-1<e.className.indexOf("dgrid-expando-icon")?e:b(".dgrid-expando-icon",e)[0];k=k||!this.enableTreeTransitions;if(e&&e.mayHaveChildren&&(k||f!==n)){var t=void 0===f?!this._expanded[d.id]:f;c(e,".ui-icon-triangle-1-"+(t?"se":"e")+"!ui-icon-triangle-1-"+
(t?"e":"se"));c(d.element,(t?".":"!")+"dgrid-row-expanded");f=d.element;var s=f.connected,B,C,E={};if(!s){var s=E.container=f.connected=c(f,"+div.dgrid-tree-container"),D=function(b){var c=a._renderedCollection.getChildren(d.data);a.sort&&(c=c.sort(a.sort));c.track&&a.shouldTrackCollection&&(s._rows=b.rows=[],c=c.track(),s._handles=[c.tracking,a._observeCollection(c,s,b)]);return"start"in b?c.fetchRange({start:b.start,end:b.start+b.count}):c.fetch()};"level"in e&&(D.level=e.level);if(this.renderQuery)r=
this.renderQuery(D,E);else{var H=c(s,"div");r=this._trackError(function(){return a.renderQueryResults(D(E),H,u.mixin({rows:E.rows},"level"in D?{queryLevel:D.level}:null)).then(function(a){c(H,"!");return a})})}if(v&&!k)l.once(s,v,this._onTreeTransitionEnd);else this._onTreeTransitionEnd.call(s)}s.hidden=!t;B=s.style;!v||k?(B.display=t?"block":"none",B.height=""):(t?(B.display="block",C=s.scrollHeight,B.height="0px"):(c(s,".dgrid-tree-resetting"),B.height=s.scrollHeight+"px"),setTimeout(function(){c(s,
"!dgrid-tree-resetting");B.height=t?C?C+"px":"auto":"0px"},0));t?this._expanded[d.id]=!0:delete this._expanded[d.id]}return p(r)}},_configColumns:function(){var b=this.inherited(arguments);this._expanded={};for(var c=0,f=b.length;c<f;c++)if(b[c].renderExpando){this._configureTreeColumn(b[c]);break}return b},insertRow:function(){var b=this.inherited(arguments),c=this.row(b);this.shouldExpand(c,this._currentLevel,this._expanded[c.id])&&this.expand(b,!0,!0);return b},removeRow:function(e,f){var k=e.connected,
a={};k&&(k._handles&&(s.forEach(k._handles,function(a){a.remove()}),delete k._handles),k._rows&&(a.rows=k._rows),b(">.dgrid-row",k).forEach(function(b){this.removeRow(b,!0,a)},this),k._rows&&(k._rows.length=0,delete k._rows),f||c(k,"!"));this.inherited(arguments)},cleanup:function(){this.inherited(arguments);this.collapseOnRefresh&&(this._expanded={})},_destroyColumns:function(){for(var b=this._treeColumnListeners,c=b.length;c--;)b[c].remove();this._treeColumnListeners=[];this._treeColumn=null},_calcRowHeight:function(b){var c=
b.connected;return this.inherited(arguments)+(c?c.offsetHeight:0)},_configureTreeColumn:function(b){var g=b.renderCell||this._defaultRenderCell,k;this._treeColumn=b;var a=this,d=".dgrid-content .dgrid-column-"+b.id;if(!a.collection)throw Error("dgrid Tree mixin requires a collection to operate.");"function"!==typeof b.renderExpando&&(b.renderExpando=this._defaultRenderExpando);this._treeColumnListeners.push(this.on(b.expandOn||".dgrid-expando-icon:click,"+d+":dblclick,"+d+":keydown",function(b){var d=
a.row(b);a.collection.mayHaveChildren&&!a.collection.mayHaveChildren(d.data)||"keydown"===b.type&&32!==b.keyCode||"dblclick"===b.type&&k&&1<k.count&&d.id===k.id&&-1<b.target.className.indexOf("dgrid-expando-icon")||a.expand(d);-1<b.target.className.indexOf("dgrid-expando-icon")&&(k&&k.id===a.row(b).id?k.count++:k={id:a.row(b).id,count:1})}));m("touch")&&this._treeColumnListeners.push(this.on(f.selector(d,f.dbltap),function(){a.expand(this)}));b.renderCell=function(a,d,f,k){var l=b.grid,m=Number(k&&
k.queryLevel)+1,q=!l.collection.mayHaveChildren||l.collection.mayHaveChildren(a),m=l._currentLevel=isNaN(m)?0:m,l=b.renderExpando(m,q,l._expanded[l.collection.getIdentity(a)],a);l.level=m;l.mayHaveChildren=q;(a=g.call(b,a,d,f,k))&&a.nodeType?(c(f,l),c(f,a)):f.insertBefore(l,f.firstChild)}},_defaultRenderExpando:function(b,f,k){var a=this.grid.isRTL?"right":"left",d=".dgrid-expando-icon";f&&(d+=".ui-icon.ui-icon-triangle-1-"+(k?"se":"e"));b=c("div"+d+"[style=margin-"+a+": "+b*this.grid.treeIndentWidth+
"px; float: "+a+"]");b.innerHTML="&nbsp;";return b},_onTreeTransitionEnd:function(b){var f=this,k=this.style.height;k&&(this.style.display="0px"===k?"none":"block");b&&(c(this,".dgrid-tree-resetting"),setTimeout(function(){c(f,"!dgrid-tree-resetting")},0));this.style.height=""}})})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(r){function u(r,l){var b=r.style,p;if(l in b)return!0;l=l.slice(0,1).toUpperCase()+l.slice(1);for(p=s.length;p--;)if(s[p]+l in b)return s[p];return!1}var s=
["ms","O","Moz","Webkit"];r.add("css-transitions",function(r,l,b){return u(b,"transitionProperty")});r.add("css-transforms",function(r,l,b){return u(b,"transform")});r.add("css-transforms3d",function(r,l,b){return u(b,"perspective")});r.add("transitionend",function(){var t=r("css-transitions");return t?!0===t?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[t]:!1});return r})},"dgrid/Editor":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/on dojo/has dojo/query ./Grid put-selector/put dojo/_base/sniff".split(" "),
function(r,u,s,t,l,b,p,m){return r(null,{constructor:function(){this._editorInstances={};this._editorColumnListeners=[];this._editorsPendingStartup=[]},postCreate:function(){var b=this;this.inherited(arguments);this.on(".dgrid-input:focusin",function(){b._focusedEditorCell=b.cell(this)});this._editorFocusoutHandle=t.pausable(this.domNode,".dgrid-input:focusout",function(){b._focusedEditorCell=null});this._listeners.push(this._editorFocusoutHandle)},insertRow:function(){var b=this.inherited(arguments),
f=this.row(b),c=this._previouslyFocusedEditorCell;c&&c.row.id===f.id&&this.edit(this.cell(f,c.column.id));return b},removeRow:function(b){var f=this,c=this._focusedEditorCell;c&&c.row.id===this.row(b).id&&(this._previouslyFocusedEditorCell=c,this._editorFocusoutHandle.pause(),setTimeout(function(){f._editorFocusoutHandle.resume();f._previouslyFocusedEditorCell=null},0));for(c=this._alwaysOnWidgetColumns.length;c--;){var e=this.cell(b,this._alwaysOnWidgetColumns[c].id).element;if(e=e&&(e.contents||
e).widget)this._editorFocusoutHandle.pause(),e.destroyRecursive()}return this.inherited(arguments)},renderArray:function(){var b=this.inherited(arguments);b.length?this._startupPendingEditors():this._editorsPendingStartup=[];return b},_onNotification:function(){this.inherited(arguments);this._startupPendingEditors()},_destroyColumns:function(){this._editorStructureCleanup();this.inherited(arguments)},_editorStructureCleanup:function(){var b=this._editorInstances,f=this._editorColumnListeners;this._editTimer&&
clearTimeout(this._editTimer);for(var c in b){var e=b[c];e.domNode&&e.destroyRecursive()}this._editorInstances={};for(b=f.length;b--;)f[b].remove();this._editorColumnListeners=[];this._editorsPendingStartup=[]},_configColumns:function(){var b=this.inherited(arguments);this._alwaysOnWidgetColumns=[];for(var f=0,c=b.length;f<c;f++)b[f].editor&&this._configureEditorColumn(b[f]);return b},_configureEditorColumn:function(b){var f=this,c=b.renderCell||this._defaultRenderCell,e=b.editOn,g="string"!==typeof b.editor;
e?this._editorInstances[b.id]=this._createSharedEditor(b,c):g&&this._alwaysOnWidgetColumns.push(b);b.renderCell=e?function(g,a,d,n){n&&n.alreadyHooked||f._editorColumnListeners.push(t(d,e,function(){f._activeOptions=n;f.edit(this)}));return c.call(b,g,a,d,n)}:function(e,a,d,n){if(!b.canEdit||b.canEdit(e,a))e=f._createEditor(b),f._showEditor(e,b,d,a),d[g?"widget":"input"]=e;else return c.call(b,e,a,d,n)}},edit:function(b){function f(a){c._activeCell=g;c._showEditor(n,e,g,d);c._editTimer=setTimeout(function(){n.focus&&
n.focus();e._editorBlurHandle&&e._editorBlurHandle.resume();c._editTimer=null;a.resolve(n)},0)}var c=this,e,g,l,a,d,n,m;b.column||(b=this.cell(b));if(!b||!b.element)return null;e=b.column;a=e.field;g=b.element.contents||b.element;if(n=this._editorInstances[e.id]){if(this._activeCell!==g){var p=b.row;d=(l=this.dirty&&this.dirty[p.id])&&a in l?l[a]:e.get?e.get(p.data):p.data[a];if(!e.canEdit||e.canEdit(b.row.data,d))return m=new s,b=n.domNode||n,b.offsetWidth?(b.blur(),setTimeout(function(){f(m)},0)):
f(m),m.promise}}else if(e.editor&&(n=g.widget||g.input))return m=new s,n.focus&&n.focus(),m.resolve(n),m.promise;return null},_showEditor:function(b,f,c,e){var g=b.domNode;g||this._updateInputValue(b,e);c.innerHTML="";m(c,".dgrid-cell-editing");m(c,b.domNode||b);g&&!f.editOn?this._editorsPendingStartup.push([b,f,c,e]):this._startupEditor(b,f,c,e)},_startupEditor:function(b,f,c,e){b.domNode&&(b._started||b.startup(),b._dgridIgnoreChange=!0,b.set("value",e),setTimeout(function(){b._dgridIgnoreChange=
!1},0));b._dgridLastValue=e;this._activeCell&&(this._activeValue=e,t.emit(c,"dgrid-editor-show",{grid:this,cell:this.cell(c),column:f,editor:b,bubbles:!0,cancelable:!1}))},_startupPendingEditors:function(){for(var b=this._editorsPendingStartup,f=b.length;f--;)this._startupEditor.apply(this,b[f]);this._editorsPendingStartup=[]},_handleEditorChange:function(b,f){var c=b.target;"_dgridLastValue"in c&&-1<c.className.indexOf("dgrid-input")&&this._updatePropertyFromEditor(f||this.cell(c).column,c,b)},_createEditor:function(b){var f=
b.editor,c=b.editOn,e=this,g="string"!==typeof f&&f,q,a;q=b.editorArgs||{};"function"===typeof q&&(q=q.call(this,b));g?(a=new g(q),g=a.focusNode||a.domNode,g.className+=" dgrid-input",a.on(c?"blur":"change",function(){a._dgridIgnoreChange||e._updatePropertyFromEditor(b,this,{type:"widget"})})):(this._hasInputListener||(this._hasInputListener=!0,this.on("change",function(a){e._handleEditorChange(a)})),a=g=m(("textarea"===f?"textarea":"input[type="+f+"]")+".dgrid-input",u.mixin({name:b.field,tabIndex:isNaN(b.tabIndex)?
-1:b.tabIndex},q)),9>l("ie")&&("radio"===f||"checkbox"===f?this._editorColumnListeners.push(t(a,"click",function(a){e._handleEditorChange(a,b)})):this._editorColumnListeners.push(t(a,"change",function(a){e._handleEditorChange(a,b)}))));if(b.autoSelect){var d=a.focusNode||a;d.select&&t(d,"focus",function(){setTimeout(function(){d.select()},0)})}return a},_createSharedEditor:function(b){function f(){var b=e._activeCell;a.blur();"function"===typeof e.focus&&setTimeout(function(){e.focus(b)},g&&9>l("ie")?
15:0)}var c=this._createEditor(b),e=this,g=c.domNode,q=c.domNode||c,a=c.focusNode||q,d=g?function(){c.set("value",c._dgridLastValue)}:function(){e._updateInputValue(c,c._dgridLastValue);e._updatePropertyFromEditor(b,c)};this._editorColumnListeners.push(t(a,"keydown",function(a){a=a.keyCode||a.which;27===a?(d(),e._activeValue=c._dgridLastValue,f()):13===a&&!1!==b.dismissOnEnter&&f()}));(b._editorBlurHandle=t.pausable(c,"blur",function(){var a=q.parentNode,d=a.children.length-1,f={alreadyHooked:!0},
g=e.cell(q);t.emit(g.element,"dgrid-editor-hide",{grid:e,cell:g,column:b,editor:c,bubbles:!0,cancelable:!1});b._editorBlurHandle.pause();a.removeChild(q);if(g.row){for(m(g.element,"!dgrid-cell-editing");d--;)m(a.firstChild,"!");p.appendIfNode(a,b.renderCell(g.row.data,e._activeValue,a,e._activeOptions?u.delegate(f,e._activeOptions):f))}e._focusedEditorCell=e._activeCell=e._activeValue=e._activeOptions=null})).pause();this._editorColumnListeners.push(b._editorBlurHandle);return c},_updatePropertyFromEditor:function(k,
f,c){var e;if(!f.isValid||f.isValid())if(c=this._updateProperty((f.domNode||f).parentNode,this._activeCell?this._activeValue:f._dgridLastValue,this._retrieveEditorValue(k,f),c),this._activeCell?this._activeValue=c:f._dgridLastValue=c,"radio"===f.type&&f.name&&!k.editOn&&k.field)for(e in c=this.row(f),b("input[type=radio][name="+f.name+"]",this.contentNode).forEach(function(b){var c=this.row(b);b!==f&&b._dgridLastValue&&(b._dgridLastValue=!1,this.updateDirty?this.updateDirty(c.id,k.field,!1):c.data[k.field]=
!1)},this),this.dirty)c.id.toString()!==e&&this.dirty[e][k.field]&&this.updateDirty(e,k.field,!1)},_updateProperty:function(b,f,c,e){var g=this;if((f&&f.valueOf())!==(c&&c.valueOf())){var l=this.cell(b),a=l.row,d=l.column;b=l.element;if(d.field&&a)if(l={grid:this,cell:l,oldValue:f,value:c,bubbles:!0,cancelable:!0},e&&e.type&&(l.parentType=e.type),t.emit(b,"dgrid-datachange",l))this.updateDirty?(this.updateDirty(a.id,d.field,c),d.autoSave&&setTimeout(function(){g._trackError("save")},0)):a.data[d.field]=
c;else{var n;(n=b.widget)?(n._dgridIgnoreChange=!0,n.set("value",f),setTimeout(function(){n._dgridIgnoreChange=!1},0)):(n=b.input)&&this._updateInputValue(n,f);return f}}return c},_updateInputValue:function(b,f){b.value=f;if("radio"===b.type||"checkbox"===b.type)b.checked=b.defaultChecked=!!f},_retrieveEditorValue:function(b,f){return"function"===typeof f.get?this._convertEditorValue(f.get("value")):this._convertEditorValue(f["checkbox"===f.type||"radio"===f.type?"checked":"value"])},_convertEditorValue:function(b,
f){if("number"===typeof f)b=isNaN(b)?b:parseFloat(b);else if("boolean"===typeof f)b="true"===b?!0:"false"===b?!1:b;else if(f instanceof Date){var c=new Date(b);b=isNaN(c.getTime())?b:c}return b}})})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),function(r,u,s,t,l,b,p,m,k){function f(a){for(var b=a.length,
c=b,e=a[0].length,f=Array(b);b--;)f[b]=Array(e);for(var g={},b=0;b<c;b++)for(var k=f[b],l=a[b],m=0,q=0;m<e;m++){var p=l[q],r;if("undefined"===typeof k[m]){k[m]=p.id;if(p.rowSpan&&1<p.rowSpan){r=f;for(var t=p.rowSpan,s=b,u=m,Z=p.id,N=1;N<t;N++)r[s+N][u]=Z}if(0<b&&p.colSpan&&1<p.colSpan)for(r=1;r<p.colSpan;r++)if(k[++m]=p.id,p.rowSpan&&1<p.rowSpan)for(var t=f,s=p.rowSpan,u=b,Z=m,N=p.id,x=1;x<s;x++)t[u+x][Z]=N;g[p.id]=a[0][m].id;q++}}return g}function c(a,b,c,e,f){if(!(0>=c)){var g=a.columns[b],k;if(g&&
(k={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0},e&&(k.parentType=e),!a._resizedColumns||u.emit(a.headerNode,"dgrid-columnresize",k)))return"auto"===c?delete g.width:(g.width=c,c+="px"),(e=a._columnSizes[b])?e.set("width",c):e=m.addCssRule("#"+m.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+m.escapeCssIdentifier(b,"-"),"width: "+c+";"),a._columnSizes[b]=e,!1!==f&&a.resize(),!0}}var e,g=0,q={create:function(){e=k("div.dgrid-column-resizer")},destroy:function(){k(e,"!");e=null},show:function(a){a=
b.position(a.domNode,!0);e.style.top=a.y+"px";e.style.height=a.h+"px";k(document.body,e)},move:function(a){e.style.left=a+"px"},hide:function(){e.parentNode.removeChild(e)}};return r(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);g||q.create();g++},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--g||q.destroy()},resizeColumnWidth:function(a,b){return c(this,a,b)},
configStructure:function(){var a=this._oldColumnSizes=t.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=m.addCssRule("#"+m.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+m.escapeCssIdentifier(b,"-"),"width: "+a.width+"px;"),this._columnSizes[b]=
c)},renderHeader:function(){this.inherited(arguments);if(!this.resizerDisabled){var a=this,b;if(this.columnSets&&this.columnSets.length)for(var c=this.columnSets.length;c--;)b=t.mixin(b||{},f(this.columnSets[c]));else this.subRows&&1<this.subRows.length&&(b=f(this.subRows));for(var c=s(".dgrid-cell",a.headerNode),e=c.length;e--;){var g=c[e],l=g.columnId,q=a.columns[l],r=g.childNodes;if(q&&!1!==q.resizable){q=k("div.dgrid-resize-header-container");for(g.contents=q;0<r.length;)k(q,r[0]);g=k(g,q,"div.dgrid-resize-handle.resizeNode-"+
m.escapeCssIdentifier(l,"-"));g.columnId=b&&b[l]||l}}a.mouseMoveListen||(u(a.headerNode,".dgrid-resize-handle:mousedown"+(p("touch")?",.dgrid-resize-handle:touchstart":""),function(b){a._resizeMouseDown(b,this);a.mouseMoveListen.resume();a.mouseUpListen.resume()}),a._listeners.push(a.mouseMoveListen=u.pausable(document,"mousemove"+(p("touch")?",touchmove":""),m.throttleDelayed(function(b){a._updateResizerPosition(b)}))),a._listeners.push(a.mouseUpListen=u.pausable(document,"mouseup"+(p("touch")?",touchend":
""),function(b){a._resizeMouseUp(b);a.mouseMoveListen.pause();a.mouseUpListen.pause()})),a.mouseMoveListen.pause(),a.mouseUpListen.pause())}},_resizeMouseDown:function(a,b){a.preventDefault();l.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=s(".dgrid-column-"+m.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);q.show(this)},_resizeMouseUp:function(a){var b=this._columnSizes,e,f,g;this.adjustLastColumn&&(g=this.headerNode.clientWidth-
1);this._resizedColumns||(e=s(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?e=e.filter(function(a){return"0"===a.columnId.split("-")[0]&&!(a.columnId in b)}):this.subRows&&1<this.subRows.length&&(e=e.filter(function(a){return"0"===a.columnId.charAt(0)&&!(a.columnId in b)})),f=e.map(function(a){return a.offsetWidth}),e.forEach(function(a,b){c(this,a.columnId,f[b],null,!1)},this),this._resizedColumns=!0);l.setSelectable(this.domNode,!0);e=this._targetCell;var k=this._getResizeMouseLocation(a)-
this._startX,p=e.offsetWidth+k,r=this._getResizedColumnWidths(),t=r.totalWidth,r=r.lastColId,u=s(".dgrid-column-"+m.escapeCssIdentifier(r,"-"),this.headerNode)[0].offsetWidth;p<this.minWidth&&(p=this.minWidth);c(this,e.columnId,p,a.type)&&e.columnId!==r&&this.adjustLastColumn&&(t+k<g?c(this,r,"auto",a.type):u-k<=this.minWidth&&c(this,r,this.minWidth,a.type));q.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){a=this._getResizeMouseLocation(a);
var b=this._targetCell.offsetWidth,c=a;b+(a-this._startX)<this.minWidth&&(c=this._startX-(b-this.minWidth));q.move(c)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=s((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),c=b.length;if(!c)return{};for(var e=b[c-1].columnId;c--;)a+=b[c].offsetWidth;return{totalWidth:a,
lastColId:e}}})})},"dgrid/extensions/ColumnHider":function(){define("dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),function(r,u,s,t,l,b){var p,m;return r(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:b,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var b=this.subRows,f=!0,c,e,g,l;delete this._columnHiderFirstCheckbox;g=
0;for(c=b.length;g<c;g++)for(l=0,e=b[g].length;l<e;l++)this._renderHiderMenuEntry(b[g][l]),f&&(f=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[b[g][l].id])},_renderHiderMenuEntry:function(b){var f=b.id,c=t.escapeCssIdentifier(f,"-"),e,g;b.hidden&&(b.hidden=!1,this._hideColumn(f),b.hidden=!0);b.unhidable||(e=l("div.dgrid-hider-menu-row"),g=this.domNode.id+"-hider-menu-check-"+c,f=this._columnHiderCheckboxes[f]=l(e,"input.dgrid-hider-menu-check.hider-menu-check-"+c+"[type=checkbox]"),
f.id=g,l(e,"label.dgrid-hider-menu-label.hider-menu-label-"+c+"[for="+g+"]",b.label||b.field||""),l(this.hiderMenuNode,e),b.hidden||(f.checked=!0))},renderHeader:function(){function b(c){c.stopPropagation()}var f=this,c=this.hiderMenuNode,e=this.hiderToggleNode,g;this.inherited(arguments);if(!this.hiderDisabled){if(c){for(g in this._columnHiderRules)this._columnHiderRules[g].remove();c.innerHTML=""}else e=this.hiderToggleNode=l(this.domNode,"button.ui-icon.dgrid-hider-toggle[type=button][aria-label="+
this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(s(e,"click",function(b){f._toggleColumnHiderMenu(b)})),c=this.hiderMenuNode=l("div.dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]"),c.id=this.id+"-hider-menu",this._listeners.push(s(c,"keyup",function(b){27===(b.charCode||b.keyCode)&&(f._toggleColumnHiderMenu(b),e.focus())})),c.style.display="none",l(this.domNode,c),this._listeners.push(s(c,".dgrid-hider-menu-check:"+(9>u("ie")?"click":"change"),function(b){f._updateColumnHiddenState(b.target.id.substr(f.id.length+
18),!b.target.checked)})),this._listeners.push(s(c,"mousedown",b),s(e,"mousedown",b)),m||(m=s.pausable(document,"mousedown",function(b){p&&p._toggleColumnHiderMenu(b)}),m.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()}},destroy:function(){this.inherited(arguments);for(var b in this._columnHiderRules)this._columnHiderRules[b].remove()},left:function(b,f){return this.right(b,-f)},right:function(b,f){b.element||(b=this.cell(b));for(var c=this.inherited(arguments),
e=b;c.column.hidden;){c=this.inherited(arguments,[c,0<f?1:-1]);if(e.element===c.element)return b;e=c}return c},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(){var b=this._hiderMenuOpened,f=this.hiderMenuNode,c=this.domNode,e;f.style.display=b?"none":"";b?f.style.height="":(f.offsetHeight>c.offsetHeight-12&&(f.style.height=c.offsetHeight-12+"px"),(e=this._columnHiderFirstCheckbox)&&e.focus());m[b?"pause":"resume"]();p=b?null:this;this._hiderMenuOpened=
!b},_hideColumn:function(b){var f=this,c="#"+t.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",e;this._columnHiderRules[b]||(this._columnHiderRules[b]=t.addCssRule(c+t.escapeCssIdentifier(b,"-"),"display: none;"),8!==u("ie")&&10!==u("ie"))||(e=t.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){e.remove();f.resize()},0))},_showColumn:function(b){this._columnHiderRules[b]&&(this._columnHiderRules[b].remove(),delete this._columnHiderRules[b])},_updateColumnHiddenState:function(b,
f){this[f?"_hideColumn":"_showColumn"](b);this.columns[b].hidden=f;s.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:f,bubbles:!0});this.resize()},toggleColumnHiddenState:function(b,f){"undefined"===typeof f&&(f=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,f);this._columnHiderCheckboxes[b].checked=!f}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),
function(r,u,s,t,l,b,p){function m(b,c){var f=c[2],a=b[f?"columnSets":"subRows"][c[1]];return f?a[c[2]]:a}function k(b,c,f){c[2]?b.columnSets[c[1]][c[2]]=f:b.subRows[c[1]]=f}function f(b,c){return c.slice(("dgrid-"+b+"-").length)}var c=/(\d+)(?:-(\d+))?$/;r=u(b,{copyState:function(){return!1},checkAcceptance:function(b){return b===this},_legalMouseDown:function(b){return-1<b.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var g=this.grid,l=
c.exec(f(g.id,b[0].getAttribute("dndType"))),a=l[2]?"columnSets":"subRows",d=m(g,l),n=g.columns;this.inherited(arguments);l&&setTimeout(function(){var c=s.map(b[0].parentNode.childNodes,function(a){return n[a.columnId]});k(g,l,c);c={grid:g,subRow:c,column:n[b[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};c[a]=g[a];t.emit(g.domNode,"dgrid-columnreorder",c)?g.set(a,g[a]):(k(g,l,d),g.renderHeader(),g.sort.length&&g.updateSortArrow(g.sort))},0)}});u=u(null,{columnDndConstructor:r,_initSubRowDnd:function(b,
c){var f,a,d,k;a=0;for(d=b.length;a<d;a++)k=b[a],!1!==k.reorderable&&(k=k.headerNode,p(k,".dojoDndItem[dndType="+c+"]"),f||(f=k.parentNode));f&&this._columnDndSources.push(new this.columnDndConstructor(f,{horizontal:!0,grid:this}))},renderHeader:function(){var b="dgrid-"+this.id+"-",c,f;this.inherited(arguments);if(!this.reorderDisabled)if(this._columnDndSources=[],this.columnSets)for(f=0,c=this.columnSets.length;f<c;f++)s.forEach(this.columnSets[f],function(a,d){this._initSubRowDnd(a,b+f+"-"+d)},
this);else s.forEach(this.subRows,function(a,d){this._initSubRowDnd(a,b+d)},this)},_destroyColumns:function(){this._columnDndSources&&s.forEach(this._columnDndSources,function(b){b.destroy()});this.inherited(arguments)}});u.ColumnDndSource=r;return u})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(r,u,s){return r(null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){s.add(this);this.inherited(arguments);
this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var r=s.getEnclosingWidget(this.domNode.parentNode);r&&r.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);s.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(r){r&&u.setMarginBox(this.domNode,r);this.inherited(arguments)},_set:function(r,l){this[r]=
l},watch:function(){},getParent:function(){return s.getEnclosingWidget(this.domNode.parentNode)}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(r,u,s){var t={},l={},b={length:0,add:function(b){if(l[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");l[b.id]=b;this.length++},remove:function(b){l[b]&&(delete l[b],this.length--)},byId:function(b){return"string"==typeof b?l[b]:b},byNode:function(b){return l[b.getAttribute("widgetId")]},
toArray:function(){var b=[],m;for(m in l)b.push(l[m]);return b},getUniqueId:function(b){var m;do m=b+"_"+(b in t?++t[b]:t[b]=0);while(l[m]);return"dijit"==s._scopeName?m:s._scopeName+"_"+m},findWidgets:function(b,m){function k(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var e=b.getAttribute("widgetId");e?(e=l[e])&&f.push(e):b!==m&&k(b)}}var f=[];k(b);return f},_destroyAll:function(){s._curFocus=null;s._prevFocus=null;s._activeStack=[];r.forEach(b.findWidgets(u.body()),function(b){b._destroyed||
(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var m=1==b.nodeType&&b.getAttribute("widgetId");if(m)return l[m];b=b.parentNode}return null},_hash:l};return s.registry=b})},"dijit/main":function(){define(["dojo/_base/kernel"],function(r){return r.dijit})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/on dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q){var a=r(k,{grid:null,getObject:function(a){var b=this.grid;return b.collection.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,c){var e=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,k=g.collection;!this.before&&f&&(f=f.nextSibling);f=f&&g.row(f);m(f&&k.get(f.id),function(f){if(e!==a)e.onDropExternal(a,b,c,f);else e.onDropInternal(b,c,f)})},onDropInternal:function(a,
b,c){var e=this.grid,f=e.collection,g=this,k=g._targetAnchor,l;k&&(l=this.before?k.previousSibling:k.nextSibling);k=e.row(a[0]);(b||l!==a[0]&&(c||!k||e.down(k).element!==a[0]))&&a.forEach(function(a){m(g.getObject(a),function(a){var d=f.getIdentity(a);f[b&&f.copy?"copy":"put"](a,{beforeId:c?f.getIdentity(c):null});g._selectedNodes[d]&&(g._selectedNodes[d]=e.row(d).element)})})},onDropExternal:function(a,b,c,e){var f=this.grid.collection,g=a.grid;b.forEach(function(b,k){m(a.getObject(b),function(l){c||
(g?m(g.collection.getIdentity(l),function(c){!k&&a.selectNone();a.delItem(b.id);g.collection.remove(c)}):a.deleteSelectedNodes());f[f.copy?"copy":"put"](l,{beforeId:e?f.getIdentity(e):null})})})},onDndStart:function(a){this.inherited(arguments);a===this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),f.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){p("touch")&&this.isDragging&&1<q.countCurrentTouches(a,this.grid.touchNode)?(b.publish("/dnd/cancel"),
f.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!p("touch")||1>=q.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a){return a.getObject&&k.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new c,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});r=r(g,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:a,
postMixInProperties:function(){this.inherited(arguments);this.dndParams=u.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function b(a){f[a.id]=a.element}function c(a){delete f[a.id];e(a.element,"!dojoDndItemSelected!dojoDndItemAnchor")}this.inherited(arguments);this.dndSource=new (this.dndConstructor||a)(this.bodyNode,u.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var f=this.dndSource._selectedNodes={};this.on("dgrid-select",function(a){s.forEach(a.rows,
b)});this.on("dgrid-deselect",function(a){s.forEach(a.rows,c)});t.after(this,"destroy",function(){delete this.dndSource._selectedNodes;f=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];e(b,".dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});
r.GridSource=a;return r})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A,z){var B=r("dojox.form._CheckedMultiSelectItem",[k,f,c],{templateString:y,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled||(this.disabled=this.option.disabled=this.option.disabled||!1);this.readOnly||(this.readOnly=this.option.readOnly=this.option.readOnly||!1);
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){this.get("disabled")||this.get("readOnly")||(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(a){this.get("disabled")||this.get("readOnly")?t.stop(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",
this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",this.disabled);b.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",a);this.readOnly=a}}),C=r("dojox.form._CheckedMultiSelectMenu",g,{multiple:!1,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,d=this.domNode=p.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});
a.parentNode&&a.parentNode.replaceChild(d,a);b.remove(a,"dijitMenuTable");d.className=a.className+" dojoxCheckedMultiSelectMenu";a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");d.setAttribute("role","presentation");d.appendChild(a)},resize:function(a){a&&(l.setMarginBox(this.domNode,a),"w"in a&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(a,b){"undefined"==
typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();a.onClick(b)}}),E=r("dojox.form._CheckedMultiSelectMenuItem",q,{templateString:v,option:null,parent:null,iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;
this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(a){},_updateBox:function(){b.toggle(this.domNode,"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||b.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(a){this.disabled||this.readOnly||(this.parent.multiple?(this.option.selected=
!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(s.forEach(this.parent.getChildren(),function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return r("dojox.form.CheckedMultiSelect",d,{templateString:A,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],postMixInProperties:function(){this.inherited(arguments);
this._nlsResources=m.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown&&(b.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=new C({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,
onChange:u.hitch(this,"_updateSelection")}))},startup:function(){this.dropDown&&(this.dropDownButton=new n({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode));this.inherited(arguments)},_onMouseDown:function(a){a.preventDefault()},validator:function(){return this.required?s.some(this.getOptions(),function(a){return a.selected&&null!=a.value&&0!=a.value.toString().length}):!0},validate:function(b){a.hide(this.domNode);
(b=this.isValid(b))||this.displayMessage(this.invalidMessage);return b},isValid:function(a){return this.validator()},getErrorMessage:function(a){return this.invalidMessage},displayMessage:function(b){a.hide(this.domNode);b&&a.show(b,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(a,b){},_addOptionItem:function(a){var b;this.dropDown?(b=new E({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):(b=new B({option:a,parent:this,disabled:this.disabled,readOnly:this.readOnly}),
this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(a){this._refreshState()},reset:function(){this.inherited(arguments);a.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);s.forEach(this._getChildren(),function(a){a._updateBox()});p.empty(this.containerNode);var a=this;s.forEach(this.value,function(b){b=p.create("option",{value:b,label:b,selected:"selected"});
p.place(b,a.containerNode)});if(this.dropDown&&this.dropDownButton){var b=0,d="";s.forEach(this.options,function(a){a.selected&&(b++,d=a.label)});this.dropDownButton.set("label",this.multiple?u.replace(this._nlsResources.multiSelectLabelText,{num:b}):d)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():s.map(this.wrapperDiv.childNodes,function(a){return e.byNode(a)})},invertSelection:function(a){this.multiple&&(s.forEach(this.options,function(a){a.selected=!a.selected}),
this._updateSelection())},_setDisabledAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",a);s.forEach(this._getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",a);this.readOnly=a;s.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},uninitialize:function(){a.hide(this.domNode);s.forEach(this._getChildren(),
function(a){a.destroyRecursive()});this.inherited(arguments)}})})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,
d,n,v,y,A,z,B,C){function E(a){return function(b){m[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}g.add("dijit-legacy-requires",!q.isAsync);g.add("dojo-bidi",!1);g("dijit-legacy-requires")&&n(0,function(){r(["dijit/_base/manager"])});var D={};t=b("dijit._WidgetBase",[v,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:E("lang"),dir:"",_setDirAttr:E("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,
containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:t.blankGif||r.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,d=a._setterAttrs=[],a=a._onMap={},c;for(c in b.attributeMap)d.push(c);for(c in b)/^on/.test(c)&&(a[c.substring(2).toLowerCase()]=c),/^_set[A-Z](.*)Attr$/.test(c)&&(c=c.charAt(4).toLowerCase()+c.substr(5,c.length-9),b.attributeMap&&c in b.attributeMap||
d.push(c))}},postscript:function(a,b){this.create(a,b)},create:function(b,d){this._introspect();this.srcNodeRef=p.byId(d);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);b&&(this.params=b,a.mixin(this,b));this.postMixInProperties();this.id||(this.id=C.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:
document);this.ownerDocumentBody=A.body(this.ownerDocument);C.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&e.parentNode&&this.domNode!==e&&(e.parentNode.replaceChild(this.domNode,e),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);u.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var d=
this._get(b);d&&this.set(b,d)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(u.map(a,function(a){return a+"Rtl"})));k.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,u.forEach(this.getChildren(),function(b){b._started||b._destroyed||
!a.isFunction(b.startup)||(b.startup(),b._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(b){function d(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b)}this._beingDestroyed=!0;this.uninitialize();u.forEach(this._connects,a.hitch(this,"disconnect"));u.forEach(this._supportingWidgets,d);this.domNode&&u.forEach(C.findWidgets(this.domNode,this.containerNode),d);this.destroyRendering(b);C.remove(this.id);
this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?m.remove(this.domNode,"widgetId"):f.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||f.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){u.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(b){var d=this.domNode;a.isObject(b)?e.set(d,b):
d.style.cssText=d.style.cssText?d.style.cssText+("; "+b):b;this._set("style",b)},_attrToDom:function(b,d,c){c=3<=arguments.length?c:this.attributeMap[b];u.forEach(a.isArray(c)?c:[c],function(c){var e=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":a.isFunction(d)&&(d=a.hitch(this,d));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;e.tagName?m.set(e,c,d):e.set(c,d);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(d));
break;case "innerHTML":e.innerHTML=d;break;case "class":k.replace(e,d,this[b])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(b,d){if("object"===typeof b){for(var c in b)this.set(c,b[c]);return this}c=this._getAttrNames(b);var e=this[c.s];if(a.isFunction(e))var f=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!a.isFunction(this.focusNode)?"focusNode":"domNode",g=this[e]&&this[e].tagName,k;if((k=g)&&!(k=
D[g])){k=this[e];var l={},n;for(n in k)l[n.toLowerCase()]=!0;k=D[g]=l}n=k;c=b in this.attributeMap?this.attributeMap[b]:c.s in this?this[c.s]:n&&c.l in n&&"function"!=typeof d||/^aria-|^data-|^role$/.test(b)?e:null;null!=c&&this._attrToDom(b,d,c);this._set(b,d)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var d=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+d+"Attr",
g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(a,b){var d=this[a];this[a]=b;!this._created||d===b||d!==d&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,d,b),this.emit("attrmodified-"+a,{detail:{prevValue:d,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var e,f=this["on"+a];f&&(e=f.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
d.emit(this.domNode,a.toLowerCase(),b);return e},on:function(a,b){var c=this._onMap(a);return c?s.after(this,c,b,!0):this.own(d(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,d=b._onMap;if(!d){var d=b._onMap={},c;for(c in b.prototype)/^on/.test(c)&&(d[c.replace(/^on/,"").toLowerCase()]=c)}return d["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?C.findWidgets(this.containerNode):
[]},getParent:function(){return C.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,d){return this.own(l.connect(a,b,this,d))[0]},disconnect:function(a){a.remove()},subscribe:function(b,d){return this.own(y.subscribe(b,a.hitch(this,d)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:c.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=e.get(this.domNode,"display")},placeAt:function(a,b){var d=!a.tagName&&
C.byId(a);!d||!d.addChild||b&&"number"!==typeof b?(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(b||"")?d.containerNode:d.domNode:p.byId(a,this.ownerDocument),f.place(this.domNode,d,b),!this._started&&(this.getParent()||{})._started&&this.startup()):d.addChild(this,b);return this},defer:function(b,d){var c=setTimeout(a.hitch(this,function(){c&&(c=null,this._destroyed||a.hitch(this,b)())}),d||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});g("dojo-bidi")&&
t.extend(B);return t})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(r,u,s,t){return r("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(l){var b=this._attrPairNames;return b[l]?b[l]:b[l]={s:"_"+l+"Setter",g:"_"+l+"Getter"}},postscript:function(l){l&&this.set(l)},_get:function(l,b){return"function"===typeof this[b.g]?this[b.g]():this[l]},get:function(l){return this._get(l,this._getAttrNames(l))},set:function(l,b){if("object"===
typeof l){for(var p in l)l.hasOwnProperty(p)&&"_watchCallbacks"!=p&&this.set(p,l[p]);return this}p=this._getAttrNames(l);var m=this._get(l,p);p=this[p.s];var k;"function"===typeof p?k=p.apply(this,Array.prototype.slice.call(arguments,1)):this[l]=b;if(this._watchCallbacks){var f=this;t(k,function(){f._watchCallbacks(l,m,b)})}return this},_changeAttrValue:function(l,b){var p=this.get(l);this[l]=b;this._watchCallbacks&&this._watchCallbacks(l,p,b);return this},watch:function(l,b){var p=this._watchCallbacks;
if(!p)var m=this,p=this._watchCallbacks=function(b,e,f,k){var a=function(a){if(a){a=a.slice();for(var k=0,l=a.length;k<l;k++)a[k].call(m,b,e,f)}};a(p["_"+b]);k||a(p["*"])};b||"function"!==typeof l?l="_"+l:(b=l,l="*");var k=p[l];"object"!==typeof k&&(k=p[l]=[]);k.push(b);var f={};f.unwatch=f.remove=function(){var c=s.indexOf(k,b);-1<c&&k.splice(c,1)};return f}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(r,u,s){return s("dijit.Destroyable",
null,{destroy:function(r){this._destroyed=!0},own:function(){var t=["destroyRecursive","destroy","remove"];r.forEach(arguments,function(l){function b(){m.remove();r.forEach(k,function(b){b.remove()})}var p,m=u.before(this,"destroy",function(b){l[p](b)}),k=[];l.then?(p="cancel",l.then(b,b)):r.forEach(t,function(f){"function"===typeof l[f]&&(p||(p=f),k.push(u.after(l,f,b,!0)))})},this);return arguments}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(r,u,s,t,l,b,p,m){var k=u("dijit._TemplatedMixin",m,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var c=this.declaredClass,e=this;return p.substitute(b,this,function(b,f){"!"==f.charAt(0)&&(b=t.getObject(f.substr(1),!1,e));if("undefined"==typeof b)throw Error(c+" template:"+f);return null==b?"":"!"==f.charAt(0)?b:this._escapeValue(""+b)},this)},_escapeValue:function(b){return b.replace(/["'<>&]/g,function(b){return{"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=r(this.templatePath,{sanitize:!0}));var b=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(t.isString(b)){if(c=s.toDom(this._stringRepl(b),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+b);}else c=b.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=
!0},_fillContent:function(b){var c=this.containerNode;if(b&&c)for(;b.hasChildNodes();)c.appendChild(b.firstChild)}});k._templateCache={};k.getCachedTemplate=function(b,c,e){var g=k._templateCache,l=b,a=g[l];if(a){try{if(!a.ownerDocument||a.ownerDocument==(e||document))return a}catch(d){}s.destroy(a)}b=p.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return g[l]=b;c=s.toDom(b,e);if(1!=c.nodeType)throw Error("Invalid template: "+b);return g[l]=c};b("ie")&&l(window,"unload",function(){var b=k._templateCache,
c;for(c in b){var e=b[c];"object"==typeof e&&s.destroy(e);delete b[c]}});return k})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(r){return r.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(r,u,s,t){var l;l=function(b,c,e){t(b,{sync:!!c,headers:{"X-Requested-With":null}}).then(e)};var b={},p=function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
c&&(b=c[1])}else b="";return b},m={},k={};r.cache=function(f,c,e){var g;"string"==typeof f?/\//.test(f)?(g=f,e=c):g=u.toUrl(f.replace(/\./g,"/")+(c?"/"+c:"")):(g=f+"",e=c);f=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof f)return b[g]=f,e?p(f):f;if(null===f)return delete b[g],null;g in b||l(g,!0,function(c){b[g]=c});return e?p(b[g]):b[g]};return{dynamic:!0,normalize:function(b,c){var e=b.split("!"),g=e[0];return(/^\./.test(g)?c(g):g)+(e[1]?"!"+e[1]:"")},load:function(f,
c,e){f=f.split("!");var g=1<f.length,q=f[0],a=c.toUrl(f[0]);f="url:"+a;var d=m,n=function(a){e(g?p(a):a)};q in b?d=b[q]:c.cache&&f in c.cache?d=c.cache[f]:a in b&&(d=b[a]);if(d===m)if(k[a])k[a].push(n);else{var v=k[a]=[n];l(a,!c.async,function(d){b[q]=b[a]=d;for(var c=0;c<v.length;)v[c++](d);delete k[a]})}else n(d)}}})},"dojo/request":function(){define(["./request/default!"],function(r){return r})},"dojo/request/default":function(){define(["exports","require","../has"],function(r,u,s){var t=s("config-requestProvider");
t||(t="./xhr");r.getPlatformDefaultId=function(){return"./xhr"};r.load=function(l,b,p,m){u(["platform"==l?"./xhr":t],function(b){p(b)})}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(r,u){var s=/[&<>'"\/]/g,t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},l={};u.setObject("dojo.string",l);l.escape=function(b){return b?b.replace(s,function(b){return t[b]}):""};l.rep=function(b,l){if(0>=l||!b)return"";for(var m=[];;){l&1&&m.push(b);if(!(l>>=
1))break;b+=b}return m.join("")};l.pad=function(b,p,m,k){m||(m="0");b=String(b);p=l.rep(m,Math.ceil((p-b.length)/m.length));return k?b+p:p+b};l.substitute=function(b,l,m,k){k=k||r.global;m=m?u.hitch(k,m):function(b){return b};return b.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(b,c,e){b=u.getObject(c,!1,l);e&&(b=u.getObject(e,!1,k).call(k,b,c));return m(b,c).toString()})};l.trim=String.prototype.trim?u.trim:function(b){b=b.replace(/^\s+/,"");for(var l=b.length-1;0<=l;l--)if(/\S/.test(b.charAt(l))){b=
b.substring(0,l+1);break}return b};return l})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(r,u,s,t,l,b,p,m,k){var f=l.delegate(m,{mouseenter:b.enter,mouseleave:b.leave,keypress:s._keypress}),c;s=t("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(b,a){return b.getAttribute(a)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,c,f){var a=!0,d=this.attachScope||this,k=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(k)for(var m=k.split(/\s*,\s*/);k=
m.shift();)l.isArray(d[k])?d[k].push(b):d[k]=b,a="containerNode"!=k,this._attachPoints.push(k);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event"))for(k=c.split(/\s*,\s*/),m=l.trim;c=k.shift();)if(c){var p=null;-1!=c.indexOf(":")?(p=c.split(":"),c=m(p[0]),p=m(p[1])):c=m(c);p||(p=c);this._attachEvents.push(f(b,c,l.hitch(d,p)))}return a},_attach:function(b,g,k){g=g.replace(/^on/,"").toLowerCase();g="dijitclick"==g?c||(c=r("./a11yclick")):f[g]||g;return p(b,g,k)},_detachTemplateNodes:function(){var b=
this.attachScope||this;u.forEach(this._attachPoints,function(c){delete b[c]});this._attachPoints=[];u.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});l.extend(k,{dojoAttachEvent:"",dojoAttachPoint:""});return s})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(r,u,s,t,l){return s("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);l.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(t.hitch(this,function(b){this._startupWidgets=b;for(var l=0;l<b.length;l++)this._processTemplateNode(b[l],
function(b,f){return b[f]},function(b,f,c){return f in b?b.connect(b,f,c):b.on(f,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,l,m){return l(b,"dojoType")||l(b,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){r.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){function n(a){return eval("("+a+")")}function v(a){var b=
a._nameCaseMap,d=a.prototype;if(!b||b._extendCnt<A){var b=a._nameCaseMap={},c;for(c in d)"_"!==c.charAt(0)&&(b[c.toLowerCase()]=c);b._extendCnt=A}return b}function y(a,b){var d=a.join();if(!z[d]){for(var c=[],e=0,f=a.length;e<f;e++){var g=a[e];c[c.length]=z[g]=z[g]||s.getObject(g)||~g.indexOf("/")&&(b?b(g):r(g))}e=c.shift();z[d]=c.length?e.createSubclass?e.createSubclass(c):e.extend.apply(e,c):e}return z[d]}new Date("X");var A=0;k.after(s,"extend",function(){A++},!0);var z={},B={_clearCache:function(){A++;
z={}},_functionFromScript:function(a,b){var d="",c="",e=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),e=(e||"").split(/\s*,\s*/);f&&f.length&&t.forEach(f.split(/\s*,\s*/),function(a){d+="with("+a+"){";c+="}"});return new Function(e,d+a.innerHTML+c)},instantiate:function(a,b,d){b=b||{};d=d||{};var c=(d.scope||u._scopeName)+"Type",e="data-"+(d.scope||u._scopeName)+"-",f=e+"type",g=e+"mixins",k=[];t.forEach(a,function(a){var d=c in b?b[c]:a.getAttribute(f)||a.getAttribute(c);
if(d){var e=a.getAttribute(g),d=e?[d].concat(e.split(/\s*,\s*/)):[d];k.push({node:a,types:d})}});return this._instantiate(k,b,d)},_instantiate:function(a,b,d,c){function e(a){b._started||d.noStart||t.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=t.map(a,function(a){var c=a.ctor||y(a.types,d.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(c,a.node,b,d,a.scripts,a.inherited)},this);return c?
f(a).then(e):e(a)},construct:function(b,d,e,f,l,p){function r(b){ha&&s.setObject(ha,b);for(Q=0;Q<J.length;Q++)k[J[Q].advice||"after"](b,J[Q].method,s.hitch(b,J[Q].func),!0);for(Q=0;Q<aa.length;Q++)aa[Q].call(b);for(Q=0;Q<X.length;Q++)b.watch(X[Q].prop,X[Q].func);for(Q=0;Q<fa.length;Q++)a(b,fa[Q].event,fa[Q].func);return b}var y=b&&b.prototype;f=f||{};var A={};f.defaults&&s.mixin(A,f.defaults);p&&s.mixin(A,p);var z;g("dom-attributes-explicit")?z=d.attributes:g("dom-attributes-specified-flag")?z=t.filter(d.attributes,
function(a){return a.specified}):(p=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),z=t.map(p.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));var B=f.scope||u._scopeName;p="data-"+B+"-";var G={};"dojo"!==B&&(G[p+"props"]="data-dojo-props",G[p+"type"]="data-dojo-type",G[p+"mixins"]=
"data-dojo-mixins",G[B+"type"]="dojoType",G[p+"id"]="data-dojo-id");for(var Q=0,S,B=[],ha,ba;S=z[Q++];){var V=S.name,M=V.toLowerCase();S=S.value;switch(G[M]||M){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ba=S;break;case "data-dojo-id":case "jsid":ha=S;break;case "data-dojo-attach-point":case "dojoattachpoint":A.dojoAttachPoint=S;break;case "data-dojo-attach-event":case "dojoattachevent":A.dojoAttachEvent=S;break;case "class":A["class"]=d.className;break;
case "style":A.style=d.style&&d.style.cssText;break;default:if(V in y||(V=v(b)[M]||V),V in y)switch(typeof y[V]){case "string":A[V]=S;break;case "number":A[V]=S.length?Number(S):NaN;break;case "boolean":A[V]="false"!=S.toLowerCase();break;case "function":""===S||-1!=S.search(/[^\w\.]+/i)?A[V]=new Function(S):A[V]=s.getObject(S,!1)||new Function(S);B.push(V);break;default:M=y[V],A[V]=M&&"length"in M?S?S.split(/\s*,\s*/):[]:M instanceof Date?""==S?new Date(""):"now"==S?new Date:c.fromISOString(S):M instanceof
m?u.baseUrl+S:n(S)}else A[V]=S}}for(z=0;z<B.length;z++)G=B[z].toLowerCase(),d.removeAttribute(G),d[G]=null;if(ba)try{ba=n.call(f.propsThis,"{"+ba+"}"),s.mixin(A,ba)}catch(U){throw Error(U.toString()+" in data-dojo-props='"+ba+"'");}s.mixin(A,e);l||(l=b&&(b._noScript||y._noScript)?[]:q("> script[type^='dojo/']",d));var J=[],aa=[],X=[],fa=[];if(l)for(Q=0;Q<l.length;Q++)G=l[Q],d.removeChild(G),e=G.getAttribute(p+"event")||G.getAttribute("event"),f=G.getAttribute(p+"prop"),ba=G.getAttribute(p+"method"),
B=G.getAttribute(p+"advice"),z=G.getAttribute("type"),G=this._functionFromScript(G,p),e?"dojo/connect"==z?J.push({method:e,func:G}):"dojo/on"==z?fa.push({event:e,func:G}):A[e]=G:"dojo/aspect"==z?J.push({method:ba,advice:B,func:G}):"dojo/watch"==z?X.push({prop:f,func:G}):aa.push(G);b=(l=b.markupFactory||y.markupFactory)?l(A,d,b):new b(A,d);return b.then?b.then(r):r(b)},scan:function(a,b){function d(a){if(!a.inherited){a.inherited={};var b=a.node,c=d(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||
c.lang,textDir:b.getAttribute(q)||c.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var c=[],f=[],k={},l=(b.scope||u._scopeName)+"Type",n="data-"+(b.scope||u._scopeName)+"-",m=n+"type",q=n+"textdir",n=n+"mixins",p=a.firstChild,v=b.inherited;if(!v){var s=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&s(a.parentNode,b)},v={dir:s(a,"dir"),lang:s(a,"lang"),textDir:s(a,q)},A;for(A in v)v[A]||delete v[A]}for(var v={inherited:v},z,B;;)if(p)if(1!=p.nodeType)p=p.nextSibling;
else if(z&&"script"==p.nodeName.toLowerCase())(V=p.getAttribute("type"))&&/^dojo\/\w/i.test(V)&&z.push(p),p=p.nextSibling;else if(B)p=p.nextSibling;else{var V=p.getAttribute(m)||p.getAttribute(l);A=p.firstChild;if(V||A&&(3!=A.nodeType||A.nextSibling)){B=null;if(V){var M=p.getAttribute(n);z=M?[V].concat(M.split(/\s*,\s*/)):[V];try{B=y(z,b.contextRequire)}catch(U){}B||t.forEach(z,function(a){~a.indexOf("/")&&!k[a]&&(k[a]=!0,f[f.length]=a)});M=B&&!B.prototype._noScript?[]:null;v={types:z,ctor:B,parent:v,
node:p,scripts:M};v.inherited=d(v);c.push(v)}else v={node:p,scripts:z,parent:v};z=M;B=p.stopParser||B&&B.prototype.stopParser&&!b.template;p=A}else p=p.nextSibling}else{if(!v||!v.node)break;p=v.node.nextSibling;B=!1;v=v.parent;z=v.scripts}var J=new e;f.length?(g("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+f.join(", ")),(b.contextRequire||r)(f,function(){J.resolve(t.filter(c,function(a){if(!a.ctor)try{a.ctor=y(a.types,b.contextRequire)}catch(d){}for(var c=a.parent;c&&
!c.types;)c=c.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):J.resolve(c);return J.promise},_require:function(a,b){var d=n("{"+a.innerHTML+"}"),c=[],f=[],g=new e,k=b&&b.contextRequire||r,l;for(l in d)c.push(l),f.push(d[l]);k(f,function(){for(var a=0;a<c.length;a++)s.setObject(c[a],arguments[a]);g.resolve(arguments)});return g.promise},_scanAmd:function(a,b){var d=new e,c=
d.promise;d.resolve(!0);var f=this;q("script[type='dojo/require']",a).forEach(function(a){c=c.then(function(){return f._require(a,b)});a.parentNode.removeChild(a)});return c},parse:function(a,d){var c;!d&&a&&a.rootNode?(d=a,c=d.rootNode):!a||!s.isObject(a)||"nodeType"in a?c=a:d=a;c=c?b.byId(c):p.body();d=d||{};var e=d.template?{template:!0}:{},f=[],g=this,k=this._scanAmd(c,d).then(function(){return g.scan(c,d)}).then(function(a){return g._instantiate(a,e,d,!0)}).then(function(a){return f=f.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});s.mixin(f,k);return f}};u.parser=B;l.parseOnLoad&&d(100,B,"parse");return B})},"dojo/_base/url":function(){define(["./kernel"],function(r){var u=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,s=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,t=function(){for(var l=arguments,b=[l[0]],p=1;p<l.length;p++)if(l[p]){var m=new t(l[p]+""),b=new t(b[0]+"");if(""==m.path&&!m.scheme&&!m.authority&&!m.query)null!=m.fragment&&(b.fragment=m.fragment),m=b;else if(!m.scheme&&
(m.scheme=b.scheme,!m.authority&&(m.authority=b.authority,"/"!=m.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+m.path).split("/"),k=0;k<b.length;k++)"."==b[k]?k==b.length-1?b[k]="":(b.splice(k,1),k--):0<k&&(1!=k||""!=b[0])&&".."==b[k]&&".."!=b[k-1]&&(k==b.length-1?(b.splice(k,1),b[k-1]=""):(b.splice(k-1,2),k-=2));m.path=b.join("/")}b=[];m.scheme&&b.push(m.scheme,":");m.authority&&b.push("//",m.authority);b.push(m.path);m.query&&b.push("?",m.query);m.fragment&&b.push("#",
m.fragment)}this.uri=b.join("");l=this.uri.match(u);this.scheme=l[2]||(l[1]?"":null);this.authority=l[4]||(l[3]?"":null);this.path=l[5];this.query=l[7]||(l[6]?"":null);this.fragment=l[9]||(l[8]?"":null);null!=this.authority&&(l=this.authority.match(s),this.user=l[3]||null,this.password=l[4]||null,this.host=l[6]||l[7],this.port=l[9]||null)};t.prototype.toString=function(){return this.uri};return r._Url=t})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(r,
u,s){var t=r.some;return function(l){var b,p;l instanceof Array?p=l:l&&"object"===typeof l&&(b=l);var m,k=[];if(b){p=[];for(var f in b)Object.hasOwnProperty.call(b,f)&&(k.push(f),p.push(b[f]));m={}}else p&&(m=[]);if(!p||!p.length)return(new u).resolve(m);var c=new u;c.promise.always(function(){m=k=null});var e=p.length;t(p,function(f,l){b||k.push(l);s(f,function(a){c.isFulfilled()||(m[k[l]]=a,0===--e&&c.resolve(m))},c.reject);return c.isFulfilled()});return c.promise}})},"dojo/date/stamp":function(){define(["../_base/lang",
"../_base/array"],function(r,u){var s={};r.setObject("dojo.date.stamp",s);s.fromISOString=function(r,l){s._isoRegExp||(s._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=s._isoRegExp.exec(r),p=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);l&&(l=new Date(l),u.forEach(u.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return l["get"+b]()}),function(f,c){b[c]=b[c]||f}));p=new Date(b[0]||
1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&p.setFullYear(b[0]||1970);var m=0,k=b[7]&&b[7].charAt(0);"Z"!=k&&(m=60*(b[8]||0)+(Number(b[9])||0),"-"!=k&&(m*=-1));k&&(m-=p.getTimezoneOffset());m&&p.setTime(p.getTime()+6E4*m)}return p};s.toISOString=function(r,l){var b=function(b){return 10>b?"0"+b:b};l=l||{};var p=[],m=l.zulu?"getUTC":"get",k="";"time"!=l.selector&&(k=r[m+"FullYear"](),k=["0000".substr((k+"").length)+k,b(r[m+"Month"]()+1),b(r[m+"Date"]())].join("-"));p.push(k);if("date"!=
l.selector){k=[b(r[m+"Hours"]()),b(r[m+"Minutes"]()),b(r[m+"Seconds"]())].join(":");m=r[m+"Milliseconds"]();l.milliseconds&&(k+="."+(100>m?"0":"")+b(m));if(l.zulu)k+="Z";else if("time"!=l.selector)var m=r.getTimezoneOffset(),f=Math.abs(m),k=k+((0<m?"-":"+")+b(Math.floor(f/60))+":"+b(f%60));p.push(k)}return p.join("T")};return s})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){c("dijit-legacy-requires")&&d(0,function(){r(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return s("dijit.Menu",a,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):u.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return g.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=t.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var d=a;b=this._iframeContentWindow(d);b=e.body(b.document)}else b=a==e.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var c={node:a,
iframe:d};l.set(a,"_dijitMenu"+this.id,this._bindings.push(c));var g=k.hitch(this,function(a){var b=this.selector,c=b?function(a){return f.selector(b,a)}:function(a){return a},e=this;return[f(a,c(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<this._lastKeyDown+500||e._scheduleOpen(this,d,{x:a.pageX,y:a.pageY},a.target)}),f(a,c("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==m.F10||this.leftClickToOpen&&a.keyCode==
m.SPACE)a.stopPropagation(),a.preventDefault(),e._scheduleOpen(this,d,null,a.target),this._lastKeyDown=(new Date).getTime()})]});c.connects=b?g(b):[];d&&(c.onloadHandler=k.hitch(this,function(){var a=this._iframeContentWindow(d),a=e.body(a.document);c.connects=g(a)}),d.addEventListener?d.addEventListener("load",c.onloadHandler,!1):d.attachEvent("onload",c.onloadHandler))},unBindDomNode:function(a){var b;try{b=t.byId(a,this.ownerDocument)}catch(d){return}a="_dijitMenu"+this.id;if(b&&l.has(b,a)){for(var c=
l.get(b,a)-1,e=this._bindings[c],f;f=e.connects.pop();)f.remove();(f=e.iframe)&&(f.removeEventListener?f.removeEventListener("load",e.onloadHandler,!1):f.detachEvent("onload",e.onloadHandler));l.remove(b,a);delete this._bindings[c]}},_scheduleOpen:function(a,b,d,c){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:c,delegatedTarget:a,iframe:b,coords:d})},1))},_openMyself:function(a){function d(){s.refocus&&u&&u.focus();q.close(s)}var e=a.target,
f=a.iframe,g=a.coords,k=!g;this.currentTarget=a.delegatedTarget;if(g){if(f){a=b.position(f,!0);var e=this._iframeContentWindow(f),e=b.docScroll(e.document),l=p.getComputedStyle(f),m=p.toPixelValue,r=(c("ie")&&c("quirks")?0:m(f,l.paddingLeft))+(c("ie")&&c("quirks")?m(f,l.borderLeftWidth):0),f=(c("ie")&&c("quirks")?0:m(f,l.paddingTop))+(c("ie")&&c("quirks")?m(f,l.borderTopWidth):0);g.x+=a.x+r-e.x;g.y+=a.y+f-e.y}}else g=b.position(e,!0),g.x+=10,g.y+=10;var s=this,f=this._focusManager.get("prevNode");
a=this._focusManager.get("curNode");var u=!a||t.isDescendant(a,this.domNode)?f:a;q.open({popup:this,x:g.x,y:g.y,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);q.close(this)}},destroy:function(){u.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){function n(){this._popupWrapper&&(b.destroy(this._popupWrapper),delete this._popupWrapper)}s=s(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=p.position(this._firstAroundNode,!0),d=b.x-a.x,a=b.y-a.y;if(d||a)for(this._firstAroundPosition=b,b=0;b<this._stack.length;b++){var e=this._stack[b].wrapper.style;e.top=parseFloat(e.top)+a+"px";"auto"==e.right?e.left=parseFloat(e.left)+d+
"px":e.right=parseFloat(e.right)-d+"px"}this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),d||a?10:50)}},_createWrapper:function(a){var d=a._popupWrapper,c=a.domNode;d||(d=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),d.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=d,u.after(a,"destroy",n,!0),"ontouchend"in document&&e(d,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}));return d},moveOffScreen:function(a){var b=this._createWrapper(a);a=p.isBodyLtr(a.ownerDocument);var d={visibility:"hidden",top:"-9999px",display:""};d[a?"left":"right"]="-9999px";d[a?"right":"left"]="auto";m.set(b,d);return b},hide:function(a){var b=this._createWrapper(a);m.set(b,{display:"none",height:"auto",overflow:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},getTopPopup:function(){for(var a=
this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var d=this._stack,n=b.popup,r=n.domNode,s=b.orient||["below","below-alt","above","above-alt"],u=b.parent?b.parent.isLeftToRight():p.isBodyLtr(n.ownerDocument),E=b.around,D=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;d.length&&(!b.parent||!t.isDescendant(b.parent.domNode,d[d.length-1].widget.domNode));)this.close(d[d.length-1].widget);var H=this.moveOffScreen(n);n.startup&&!n._started&&
n.startup();var L,T=p.position(r);if("maxHeight"in b&&-1!=b.maxHeight)L=b.maxHeight||Infinity;else{L=a.getEffectiveBox(this.ownerDocument);var I=E?p.position(E,!1):{y:b.y-(b.padding||0),h:2*(b.padding||0)};L=Math.floor(Math.max(I.y,L.h-(I.y+I.h)))}T.h>L&&(T=m.getComputedStyle(r),m.set(H,{overflowY:"scroll",height:L+"px",border:T.borderLeftWidth+" "+T.borderLeftStyle+" "+T.borderLeftColor}),r._originalStyle=r.style.cssText,r.style.border="none");l.set(H,{id:D,style:{zIndex:this._beginZIndex+d.length},
"class":"dijitPopup "+(n.baseClass||n["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==d.length&&E&&(this._firstAroundNode=E,this._firstAroundPosition=p.position(E,!0),this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),50));k("config-bgIframe")&&!n.bgIframe&&(n.bgIframe=new q(H));D=n.orient?c.hitch(n,"orient"):null;s=E?g.around(H,E,s,u,D):g.at(H,b,"R"==s?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,D);H.style.visibility="visible";r.style.visibility=
"visible";r=[];r.push(e(H,"keydown",c.hitch(this,function(a){if(a.keyCode==f.ESCAPE&&b.onCancel)a.stopPropagation(),a.preventDefault(),b.onCancel();else if(a.keyCode==f.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));n.onCancel&&b.onCancel&&r.push(n.on("cancel",b.onCancel));r.push(n.on(n.onExecute?"execute":"change",c.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));d.push({widget:n,wrapper:H,parent:b.parent,onExecute:b.onExecute,
onCancel:b.onCancel,onClose:b.onClose,handlers:r});if(n.onOpen)n.onOpen(s);return s},close:function(a){for(var b=this._stack;a&&r.some(b,function(b){return b.widget==a})||!a&&b.length;){var d=b.pop(),c=d.widget,e=d.onClose;c.bgIframe&&(c.bgIframe.destroy(),delete c.bgIframe);if(c.onClose)c.onClose();for(var f;f=d.handlers.pop();)f.remove();c&&c.domNode&&this.hide(c);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return d.popup=new s})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(r,u,s,t,l,b,p){function m(f,c,e,g){var k=b.getEffectiveBox(f.ownerDocument);f.parentNode&&"body"==String(f.parentNode.tagName).toLowerCase()||l.body(f.ownerDocument).appendChild(f);var a=null;r.some(c,function(b){var d=b.corner,c=b.pos,l=0,n={w:{L:k.l+k.w-c.x,R:c.x-k.l,M:k.w}[d.charAt(1)],
h:{T:k.t+k.h-c.y,B:c.y-k.t,M:k.h}[d.charAt(0)]},m=f.style;m.left=m.right="auto";e&&(l=e(f,b.aroundCorner,d,n,g),l="undefined"==typeof l?0:l);var p=f.style,r=p.display,t=p.visibility;"none"==p.display&&(p.visibility="hidden",p.display="");m=u.position(f);p.display=r;p.visibility=t;r={L:c.x,R:c.x-m.w,M:Math.max(k.l,Math.min(k.l+k.w,c.x+(m.w>>1))-m.w)}[d.charAt(1)];t={T:c.y,B:c.y-m.h,M:Math.max(k.t,Math.min(k.t+k.h,c.y+(m.h>>1))-m.h)}[d.charAt(0)];c=Math.max(k.l,r);p=Math.max(k.t,t);r=Math.min(k.l+k.w,
r+m.w);t=Math.min(k.t+k.h,t+m.h);r-=c;t-=p;l+=m.w-r+(m.h-t);if(null==a||l<a.overflow)a={corner:d,aroundCorner:b.aroundCorner,x:c,y:p,w:r,h:t,overflow:l,spaceAvailable:n};return!l});a.overflow&&e&&e(f,a.aroundCorner,a.corner,a.spaceAvailable,g);c=a.y;var d=a.x,n=l.body(f.ownerDocument);/relative|absolute/.test(s.get(n,"position"))&&(c-=s.get(n,"marginTop"),d-=s.get(n,"marginLeft"));n=f.style;n.top=c+"px";n.left=d+"px";n.right="auto";return a}var k={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return p.place={at:function(b,
c,e,g,l){e=r.map(e,function(a){var b={corner:a,aroundCorner:k[a],pos:{x:c.x,y:c.y}};g&&(b.pos.x+="L"==a.charAt(1)?g.x:-g.x,b.pos.y+="T"==a.charAt(0)?g.y:-g.y);return b});return m(b,e,l)},around:function(b,c,e,g,k){function a(a,b){H.push({aroundCorner:a,corner:b,pos:{x:{L:B,R:B+E,M:B+(E>>1)}[a.charAt(1)],y:{T:C,B:C+D,M:C+(D>>1)}[a.charAt(0)]}})}var d;if("string"==typeof c||"offsetWidth"in c||"ownerSVGElement"in c){if(d=u.position(c,!0),/^(above|below)/.test(e[0])){var l=u.getBorderExtents(c),p=c.firstChild?
u.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},y=u.getBorderExtents(b),A=b.firstChild?u.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};d.y+=Math.min(l.t+p.t,y.t+A.t);d.h-=Math.min(l.t+p.t,y.t+A.t)+Math.min(l.b+p.b,y.b+A.b)}}else d=c;if(c.parentNode)for(l="absolute"==s.getComputedStyle(c).position,c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){p=u.position(c,!0);y=s.getComputedStyle(c);/relative|absolute/.test(y.position)&&(l=!1);if(!l&&/hidden|auto|scroll/.test(y.overflow)){var A=Math.min(d.y+
d.h,p.y+p.h),z=Math.min(d.x+d.w,p.x+p.w);d.x=Math.max(d.x,p.x);d.y=Math.max(d.y,p.y);d.h=A-d.y;d.w=z-d.x}"absolute"==y.position&&(l=!0);c=c.parentNode}var B=d.x,C=d.y,E="w"in d?d.w:d.w=d.width,D="h"in d?d.h:(t.deprecated("place.around: dijit/place.__Rectangle: { x:"+B+", y:"+C+", height:"+d.height+", width:"+E+" } has been deprecated.  Please use { x:"+B+", y:"+C+", h:"+d.height+", w:"+E+" }","","2.0"),d.h=d.height),H=[];r.forEach(e,function(b){var d=g;switch(b){case "above-centered":a("TM","BM");
break;case "below-centered":a("BM","TM");break;case "after-centered":d=!d;case "before-centered":a(d?"ML":"MR",d?"MR":"ML");break;case "after":d=!d;case "before":a(d?"TL":"TR",d?"TR":"TL");a(d?"BL":"BR",d?"BR":"BL");break;case "below-alt":d=!d;case "below":a(d?"BL":"BR",d?"TL":"TR");a(d?"BR":"BL",d?"TR":"TL");break;case "above-alt":d=!d;case "above":a(d?"TL":"TR",d?"BL":"BR");a(d?"TR":"TL",d?"BR":"BL");break;default:a(b.aroundCorner,b.corner)}});b=m(b,H,k,{w:E,h:D});b.aroundNodePos=d;return b}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(r,u,s,t,l){var b=new r,p;s(function(){var m=l.getBox();b._rlh=u(window,"resize",function(){var f=l.getBox();if(m.h!=f.h||m.w!=f.w)m=f,b.emit("resize")});if(8==t("ie")){var k=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=k&&(k=screen.deviceXDPI,b.emit("resize"))},500)}t("ios")&&(u(document,"focusin",function(b){p=b.target}),u(document,"focusout",function(b){p=null}))});b.getEffectiveBox=
function(b){b=l.getBox(b);var k=p&&p.tagName&&p.tagName.toLowerCase();t("ios")&&p&&!p.readOnly&&("textarea"==k||"input"==k&&/^(color|email|number|password|search|tel|text|url)$/.test(p.type))&&(b.h*=0==orientation||180==orientation?0.66:0.4,k=p.getBoundingClientRect(),b.h=Math.max(b.h,k.top+k.height));return b};return b})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(r,u,s,t,l,
b,p,m){m.add("config-bgIframe",m("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||m("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var k=new function(){var b=[];this.pop=function(){var c;b.length?(c=b.pop(),c.style.display=""):(9>m("ie")?(c="<iframe src='"+(s.dojoBlankHtmlUrl||r.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",c=document.createElement(c)):(c=t.create("iframe"),
c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role","presentation"),l.set(c,"opacity",0.1)),c.tabIndex=-1);return c};this.push=function(c){c.style.display="none";b.push(c)}};u.BackgroundIframe=function(f){if(!f.id)throw Error("no id");if(m("config-bgIframe")){var c=this.iframe=k.pop();f.appendChild(c);7>m("ie")||m("quirks")?(this.resize(f),this._conn=p(f,"resize",b.hitch(this,"resize",f))):l.set(c,{width:"100%",height:"100%"})}};b.extend(u.BackgroundIframe,{resize:function(b){this.iframe&&
l.set(this.iframe,{width:b.offsetWidth+"px",height:b.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),k.push(this.iframe),delete this.iframe)}});return u.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(r,u,s,t){return r("dijit.DropDownMenu",t,{templateString:s,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},
_onDownArrow:function(){this.focusNext()},_onRightArrow:function(l){this._moveToPopup(l);l.stopPropagation();l.preventDefault()},_onLeftArrow:function(l){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else l.stopPropagation(),l.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a){return u("dijit._MenuBase",[e,a,q,g],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){l.toggle(this.domNode,"dijitMenuActive",a);l.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var b=c.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,e="string"==typeof this.childSelector?this.childSelector:b.hitch(this,"childSelector");this.own(m(this.containerNode,m.selector(e,p.enter),function(){a.onItemHover(c.byNode(this))}),m(this.containerNode,m.selector(e,p.leave),function(){a.onItemUnhover(c.byNode(this))}),m(this.containerNode,m.selector(e,f),function(b){a.onItemClick(c.byNode(this),b);b.stopPropagation()}),
m(this.containerNode,m.selector(e,"focusin"),function(){a._onItemFocus(c.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,e){this.inherited(arguments);if(a&&(-1==e||a.popup&&1==e))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||
b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,c){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var e=a.popup;e.parentMenu=this;this.own(this._mouseoverHandle=m.once(e.domNode,"mouseover",b.hitch(this,"_onPopupHover")));var f=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&
f.focusChild(a);f._cleanUp()},onExecute:b.hitch(this,"_cleanUp",!0),onClose:function(){f._mouseoverHandle&&(f._mouseoverHandle.remove(),delete f._mouseoverHandle)}},c);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(t.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on",
"dojo/touch"],function(r,u,s,t){function l(b){if((b.keyCode===r.ENTER||b.keyCode===r.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var b;s(document,"keydown",function(m){l(m)?(b=m.target,m.preventDefault()):b=null});s(document,"keyup",function(m){l(m)&&m.target==b&&(b=null,s.emit(m.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:m.ctrlKey,shiftKey:m.shiftKey,metaKey:m.metaKey,altKey:m.altKey,_origType:m.type}))});var p=function(b,
k){b.dojoClick=!0;return s(b,"click",k)};p.click=p;p.press=function(b,k){var f=s(b,t.press,function(b){("mousedown"!=b.type||u.isLeft(b))&&k(b)}),c=s(b,"keydown",function(b){b.keyCode!==r.ENTER&&b.keyCode!==r.SPACE||k(b)});return{remove:function(){f.remove();c.remove()}}};p.release=function(b,k){var f=s(b,t.release,function(b){("mouseup"!=b.type||u.isLeft(b))&&k(b)}),c=s(b,"keyup",function(b){b.keyCode!==r.ENTER&&b.keyCode!==r.SPACE||k(b)});return{remove:function(){f.remove();c.remove()}}};p.move=
t.move;return p})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g){function q(){}function a(a){return function(b,c,e,f){return b&&"string"==typeof c&&b[c]==q?b.on(c.substring(2).toLowerCase(),p.hitch(e,f)):a.apply(s,arguments)}}r.around(s,"connect",a);b.connect&&
r.around(b,"connect",a);r=t("dijit._Widget",[c,e,g],{onClick:q,onDblClick:q,onKeyDown:q,onKeyPress:q,onKeyUp:q,onMouseDown:q,onMouseMove:q,onMouseOut:q,onMouseOver:q,onMouseLeave:q,onMouseEnter:q,onMouseUp:q,constructor:function(a){this._toConnect={};for(var b in a)this[b]===q&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===
q?s.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,c)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.",
"","2.0");return this.containerNode?m("[widgetId]",this.containerNode).map(f.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});l("dijit-legacy-requires")&&k(0,function(){require(["dijit/_base"])});return r})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(r,u,s,t,l,b){r=t("dijit._OnDijitClickMixin",null,{connect:function(l,m,k){return this.inherited(arguments,
[l,"ondijitclick"==m?b:m,k])}});r.a11yclick=b;return r})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(r,u,s,t){t.extend(u,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return s("dijit._FocusMixin",null,{_focusManager:r})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n){var v,y,A=new (u([e,p],{curNode:null,activeStack:[],constructor:function(){var a=m.hitch(this,function(a){s.isDescendant(this.curNode,a)&&this.set("curNode",null);s.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});r.before(b,"empty",a);r.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,d){var e=this,f=b.document&&b.document.body;if(f){var g=c("pointer-events")?"pointerdown":c("MSPointer")?
"MSPointerDown":c("touch-events")?"mousedown, touchstart":"mousedown",l=k(b.document,g,function(a){a&&a.target&&null==a.target.parentNode||e._onTouchNode(d||a.target,"mouse")}),n=k(f,"focusin",function(b){if(b.target.tagName){var c=b.target.tagName.toLowerCase();"#document"!=c&&"body"!=c&&(a.isFocusable(b.target)?e._onFocusNode(d||b.target):e._onTouchNode(d||b.target))}}),m=k(f,"focusout",function(a){e._onBlurNode(d||a.target)});return{remove:function(){l.remove();n.remove();m.remove();f=l=n=m=null}}}},
_onBlurNode:function(a){a=(new Date).getTime();a<v+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(m.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<y+100||(this._clearActiveWidgetsTimer=setTimeout(m.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){y=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);l.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var e=t.get(a,"dijitPopupParent");if(e)a=d.byId(e).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===g.body())break;a=q.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),k=f&&d.byId(f);!k||"mouse"==b&&k.get("disabled")||c.unshift(f);a=a.parentNode}}}catch(n){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(v=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,e=c.length-1,f=a.length-1;if(a[f]!=c[e]){this.set("activeStack",a);var g;for(g=e;0<=g&&c[g]!=a[g];g--)if(e=d.byId(c[g]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(b),
this.emit("widget-blur",e,b);for(g++;g<=f;g++)if(e=d.byId(a[g]))e.set("focused",!0),e._focusManager==this&&e._onFocus(b),this.emit("widget-focus",e,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));f(function(){var a=A.registerWin(q.get(document));c("ie")&&k(window,"unload",function(){a&&(a.remove(),a=null)})});n.focus=function(a){A.focus(a)};for(var z in A)/^_/.test(z)||(n.focus[z]="function"==typeof A[z]?m.hitch(A,z):A[z]);A.watch(function(a,b,d){n.focus[a]=d});return A})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(r,u,s,t,l,b,p){var m={_isElementShown:function(b){var f=t.get(b);return"hidden"!=f.visibility&&"collapsed"!=f.visibility&&"none"!=f.display&&"hidden"!=s.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return s.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var f;try{var c=b.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;f=c.body}catch(e){try{f=b.contentWindow.document.body}catch(g){return!1}}return f&&
("true"==f.contentEditable||f.firstChild&&"true"==f.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){return s.get(b,"disabled")?void 0:s.has(b,"tabIndex")?+s.get(b,"tabIndex"):m.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=m.effectiveTabIndex(b)},isFocusable:function(b){return-1<=m.effectiveTabIndex(b)},_getTabNavigable:function(k){function f(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}function c(a){return p[f(a)]||a}var e,g,l,a,d,n,p={},r=m._isElementShown,t=m.effectiveTabIndex,z=function(c){for(c=c.firstChild;c;c=c.nextSibling)if(1==c.nodeType&&!(9>=b("ie")&&"HTML"!==c.scopeName)&&r(c)){var k=t(c);if(0<=k){if(0==k)e||(e=c),g=c;else if(0<k){if(!l||k<a)a=k,l=c;if(!d||k>=n)n=k,d=c}k=f(c);s.get(c,"checked")&&k&&(p[k]=c)}"SELECT"!=c.nodeName.toUpperCase()&&z(c)}};r(k)&&z(k);return{first:c(e),last:c(g),lowest:c(l),highest:c(d)}},getFirstInTabbingOrder:function(b,
f){var c=m._getTabNavigable(u.byId(b,f));return c.lowest?c.lowest:c.first},getLastInTabbingOrder:function(b,f){var c=m._getTabNavigable(u.byId(b,f));return c.last?c.last:c.highest}};l.mixin(p,m);return m})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(r,u,s,t,l){var b=l.doc.documentElement;l=t("ie");var p=t("opera"),m=Math.floor,k=t("ff"),f=r.boxModel.replace(/-/,""),p={dj_quirks:t("quirks"),dj_opera:p,dj_khtml:t("khtml"),dj_webkit:t("webkit"),
dj_safari:t("safari"),dj_chrome:t("chrome"),dj_gecko:t("mozilla"),dj_ios:t("ios"),dj_android:t("android")};l&&(p.dj_ie=!0,p["dj_ie"+m(l)]=!0,p.dj_iequirks=t("quirks"));k&&(p["dj_ff"+m(k)]=!0);p["dj_"+f]=!0;var c="",e;for(e in p)p[e]&&(c+=e+" ");b.className=u.trim(b.className+" "+c);s(function(){if(!r.isBodyLtr()){var e="dj_rtl dijitRtl "+c.replace(/ /g,"-rtl ");b.className=u.trim(b.className+" "+e+"dj_rtl dijitRtl "+c.replace(/ /g,"-rtl "))}});return t})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(r,u,s,t){s(function(){u("highcontrast")&&r.add(t.body(),"dijit_a11y")});return u})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e){u=u("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);r.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(c){this.watch(c,b.hitch(this,"_setStateClass"))},this);for(var c in this.cssStateNodes||{})this._trackMouseState(this[c],this.cssStateNodes[c]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(a){c=c.concat(r.map(c,function(b){return b+a}),"dijit"+a)}var c=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var a="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(a);this.state&&b(this.state);
this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var a=this.stateNode||this.domNode,d={};r.forEach(a.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&r.forEach(this._stateClasses,function(a){delete d[a]});r.forEach(c,function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);a.className=e.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(b,
c,a){function d(a){t.toggle(b,c+"Active",a)}if(!this.disabled&&!this.readOnly)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":t.toggle(b,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":t.toggle(b,c+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":t.toggle(b,
c+"Focused",!0);break;case "blur":case "focusout":t.toggle(b,c+"Focused",!1)}},_trackMouseState:function(b,c){b._cssState=c}});m(function(){function b(a,c,f){if(!f||!s.isDescendant(f,c))for(;c&&c!=f;c=c.parentNode)if(c._cssState){var g=e.getEnclosingWidget(c);g&&(c==g.domNode?g._cssMouseEvent(a):g._subnodeCssMouseEvent(c,c._cssState,a))}}var l=f.body(),a;p(l,k.over,function(a){b(a,a.target,a.relatedTarget)});p(l,k.out,function(a){b(a,a.target,a.relatedTarget)});p(l,c.press,function(d){a=d.target;
b(d,a)});p(l,c.release,function(d){b(d,a);a=null});p(l,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=e.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return u})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(r,u,s,t,l,b,p,m,k,f){return u("dijit._KeyNavContainer",
[k,f,m],{connectKeyNavHandlers:function(c,e){var f=this._keyNavCodes={},k=b.hitch(this,"focusPrev"),a=b.hitch(this,"focusNext");r.forEach(c,function(a){f[a]=k});r.forEach(e,function(b){f[b]=a});f[l.HOME]=b.hitch(this,"focusFirstChild");f[l.END]=b.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){t.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);r.forEach(this.getChildren(),b.hitch(this,"_startupChild"))},addChild:function(b,
e){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=p.byNode(b))&&b.getParent()==this}})})},
"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(r,u,s,t){return u("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(l,b){var p=this.containerNode;if(0<b){for(p=p.firstChild;0<b;)1==p.nodeType&&b--,p=p.nextSibling;p?b="before":(p=this.containerNode,b="last")}s.place(l.domNode,p,b);this._started&&!l._started&&l.startup()},
removeChild:function(l){"number"==typeof l&&(l=this.getChildren()[l]);l&&(l=l.domNode)&&l.parentNode&&l.parentNode.removeChild(l)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(l,b){t.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var p=this.getChildren(),m=r.indexOf(p,l);return p[m+b]},getIndexOfChild:function(l){return r.indexOf(this.getChildren(),l)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(r,u,s,t,l,b,p,m){return u("dijit._KeyNavMixin",m,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);s.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var k=this._keyNavCodes={};k[t.HOME]=l.hitch(this,"focusFirstChild");k[t.END]=l.hitch(this,"focusLastChild");k[this.isLeftToRight()?t.LEFT_ARROW:t.RIGHT_ARROW]=l.hitch(this,"_onLeftArrow");k[this.isLeftToRight()?t.RIGHT_ARROW:t.LEFT_ARROW]=l.hitch(this,"_onRightArrow");k[t.UP_ARROW]=l.hitch(this,
"_onUpArrow");k[t.DOWN_ARROW]=l.hitch(this,"_onDownArrow")}var f=this,k="string"==typeof this.childSelector?this.childSelector:l.hitch(this,"childSelector");this.own(b(this.domNode,"keypress",l.hitch(this,"_onContainerKeypress")),b(this.domNode,"keydown",l.hitch(this,"_onContainerKeydown")),b(this.domNode,"focus",l.hitch(this,"_onContainerFocus")),b(this.containerNode,b.selector(k,"focusin"),function(b){f._onChildFocus(p.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(b,f){b&&(this.focusedChild&&b!==this.focusedChild&&this._onChildBlur(this.focusedChild),
b.set("tabIndex",this.tabIndex),b.focus(f?"end":"start"))},_onContainerFocus:function(b){b.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){s.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(b){s.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(b){b&&b!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),b.set("tabIndex",this.tabIndex),this.lastFocused=b,this._set("focusedChild",b))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,f,c,e){b&&this.focusChild(b)},_keyboardSearchCompare:function(b,f){var c=b.domNode,c=(b.label||(c.focusNode?c.focusNode.label:"")||c.innerText||c.textContent||"").replace(/^\s+/,"").substr(0,f.length).toLowerCase();return f.length&&c==f?-1:0},_onContainerKeydown:function(b){var f=
this._keyNavCodes[b.keyCode];f?(f(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=t.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),this._keyboardSearch(b," "))},_onContainerKeypress:function(b){b.charCode<=t.SPACE||b.ctrlKey||b.altKey||b.metaKey||(b.preventDefault(),b.stopPropagation(),this._keyboardSearch(b,String.fromCharCode(b.charCode).toLowerCase()))},_keyboardSearch:function(b,f){var c=
null,e,g=0;l.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=f;var b=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;e=this._searchString.substr(0,b);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var a=this.focusedChild||null;if(1==b||!a)if(a=this._getNextFocusableChild(a,1),!a)return;b=a;do{var d=this._keyboardSearchCompare(a,e);d&&0==g++&&(c=a);if(-1==d){g=-1;break}a=this._getNextFocusableChild(a,
1)}while(a!=b)})();this.onKeyboardSearch(c,b,e,g)},_onChildBlur:function(){},_getNextFocusableChild:function(b,f){var c=b;do{if(b)b=this._getNext(b,f);else if(b=this[0<f?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=c&&b.isFocusable())return b}while(b!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(b,f){if(b)for(b=b.domNode;b;)if((b=b[0>f?"previousSibling":"nextSibling"])&&"getAttribute"in b){var c=p.byNode(b);if(c)return c}return null}})})},
"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e){p=r("dijit.MenuItem"+(b("dojo-bidi")?"_NoBidi":""),[m,k,f,c],{templateString:e,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var c="",a;a=b.search(/{\S}/);if(0<=a){var c=b.charAt(a+1),d=b.substr(0,
a);b=b.substr(a+3);a=d+c+b;b=d+'<span class="dijitMenuItemShortcutKey">'+c+"</span>"+b}else a=b;this.domNode.setAttribute("aria-label",a+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);s.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&
s.set(this.accelKeyNode,"id",this.id+"_accel");u.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==b("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(c){}},_setSelected:function(b){t.toggle(this.domNode,"dijitMenuItemSelected",b)},setLabel:function(b){l.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){l.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=b?"":"none",this.accelKeyNode.innerHTML=b,s.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});b("dojo-bidi")&&(p=r("dijit.MenuItem",p,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));
return p})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(r,u){return r("dijit._Contained",null,{_getSibling:function(r){var t=this.domNode;do t=t[r+"Sibling"];while(t&&1!=t.nodeType);return t&&u.byNode(t)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var r=this.getParent();return r&&r.getIndexOfChild?r.getIndexOfChild(this):-1}})})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v){function y(){}var A=u("dijit._MasterTooltip",[q,a],{duration:e.defaultDuration,templateString:n,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new d(this.domNode);this.fadeIn=s.fadeIn({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,"_onShow")});this.fadeOut=s.fadeOut({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,"_onHide")})},show:function(a,b,d,c,e,f,k){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;e&&this.set("textDir",e);this.containerNode.align=c?"right":"left";var l=g.around(this.domNode,b,d&&d.length?d:z.defaultPosition,!c,m.hitch(this,"orient")),n=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=n.y+(n.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&
"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=n.x+(n.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");p.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=f||y;this.onMouseLeave=k||y}},orient:function(a,d,e,f,g){this.connectorNode.style.top="";var k=f.h;f=f.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[d+"-"+e];this.domNode.style.width="auto";var l=b.position(this.domNode);if(c("ie")||c("trident"))l.w+=2;var n=Math.min(Math.max(f,1),l.w);b.setMarginBox(this.domNode,{w:n});"B"==e.charAt(0)&&"B"==d.charAt(0)?(a=b.position(a),d=
this.connectorNode.offsetHeight,a.h>k?(this.connectorNode.style.top=k-(g.h+d>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-d/2,0),a.h-d)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,l.w-f)},_onShow:function(){c("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=
!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=y},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});c("dojo-bidi")&&A.extend({_setAutoTextDir:function(a){this.applyTextDir(a);r.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=
this.textDir}});v.showTooltip=function(a,b,d,c,e,f,g){d&&(d=r.map(d,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));z._masterTT||(v._masterTT=z._masterTT=new A);return z._masterTT.show(a,b,d,c,e,f,g)};v.hideTooltip=function(a){return z._masterTT&&z._masterTT.hide(a)};var z=u("dijit.Tooltip",q,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(a){r.forEach(this._connections||[],function(a){r.forEach(a,function(a){a.remove()})},
this);this._connectIds=r.filter(m.isArrayLike(a)?a:a?[a]:[],function(a){return t.byId(a,this.ownerDocument)},this);this._connections=r.map(this._connectIds,function(a){a=t.byId(a,this.ownerDocument);var b=this.selector,d=b?function(a){return f.selector(b,a)}:function(a){return a},c=this;return[f(a,d(k.enter),function(){c._onHover(this)}),f(a,d("focusin"),function(){c._onHover(this)}),f(a,d(k.leave),m.hitch(c,"_onUnHover")),f(a,d("focusout"),m.hitch(c,"set","state","DORMANT"))]},this);this._set("connectId",
a)},addTarget:function(a){a=a.id||a;-1==r.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=r.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;r.forEach(m.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||
this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(z.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state",
"SHOWING")},this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}z.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,m.hitch(this,"set","state","SHOWING"),m.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&
a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");r.forEach(this._connections||[],function(a){r.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});
z._MasterTooltip=A;z.show=v.showTooltip;z.hide=v.hideTooltip;z.defaultPosition=["after-centered","before-centered"];return z})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(r,u,s,t,l){var b={};r.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(l){b[l]=t[l]});s.mixin(b,{defaultDuration:u.defaultDuration||200});s.mixin(l,b);return l})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g){return l("dijit.form._FormSelectWidget",g,{multiple:!1,options:null,store:null,_setStoreAttr:function(b){this._created&&this._deprecatedSetStore(b)},query:null,_setQueryAttr:function(b){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:b})},queryOptions:null,_setQueryOptionsAttr:function(b){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:b})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(b){var a=this.options||[];if(null==b)return a;if(k.isArray(b))return r.map(b,"return this.getOptions(item);",this);k.isString(b)&&(b={value:b});k.isObject(b)&&(r.some(a,function(a,c){for(var e in b)if(!(e in a)||a[e]!=b[e])return!1;b=c;return!0})||(b=-1));return 0<=b&&b<a.length?a[b]:null},addOption:function(b){r.forEach(k.isArray(b)?b:[b],function(a){a&&k.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(b){b=this.getOptions(k.isArray(b)?
b:[b]);r.forEach(b,function(a){a&&(this.options=r.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(b){r.forEach(k.isArray(b)?b:[b],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(b,a,d){m.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(b,a,d)},_deprecatedSetStore:function(b,a,d){var f=this.store;d=d||{};if(f!==b){for(var g;g=this._notifyConnections.pop();)g.remove();b.get||(k.mixin(b,{_oldAPI:!0,get:function(a){var b=new u;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var d=new u(function(){c.abort&&c.abort()});d.total=new u;var c=this.fetch(k.mixin({query:a,onBegin:function(a){d.total.resolve(a)},
onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},b));return new e(d)}}),b.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[s.after(b,"onNew",k.hitch(this,"_onNewItem"),!0),s.after(b,"onDelete",k.hitch(this,"_onDeleteItem"),!0),s.after(b,"onSet",k.hitch(this,"_onSetItem"),!0)]));this._set("store",b)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);d.query&&this._set("query",d.query);d.queryOptions&&this._set("queryOptions",d.queryOptions);b&&b.query&&(this._loadingStore=!0,this.onLoadDeferred=new u,this._queryRes=b.query(this.query,this.queryOptions),c(this._queryRes,k.hitch(this,function(c){if(this.sortByLabel&&!d.sort&&c.length)if(b.getValue)c.sort(t.createSortFunction([{attribute:b.getLabelAttributes(c[0])[0]}],b));else{var e=this.labelAttr;c.sort(function(a,b){return a[e]>b[e]?1:b[e]>
a[e]?-1:0})}d.onFetch&&(c=d.onFetch.call(this,c,d));r.forEach(c,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(k.hitch(this,function(a,b,d){b==d?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=d&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:a);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(c):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return f},_setValueAttr:function(b,a){this._onChangeActive||(a=null);if(this._loadingStore)this._pendingValue=b;else if(null!=b){b=k.isArray(b)?r.map(b,function(a){return k.isObject(a)?a:{value:a}}):k.isObject(b)?[b]:[{value:b}];b=r.filter(this.getOptions(b),function(a){return a&&a.value});var d=this.getOptions()||[];this.multiple||b[0]&&b[0].value||!d.length||(b[0]=d[0]);r.forEach(d,
function(a){a.selected=r.some(b,function(b){return b.value===a.value})});d=r.map(b,function(a){return a.value});if("undefined"!=typeof d&&"undefined"!=typeof d[0]){var c=r.map(b,function(a){return a.label});this._setDisplay(this.multiple?c:c[0]);this.inherited(arguments,[this.multiple?d:d[0],a]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var b=r.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?b:b[0]},
_setDisplayedValueAttr:function(b){this.set("value",this.getOptions("string"==typeof b?{label:b}:b))},_loadChildren:function(){this._loadingStore||(r.forEach(this._getChildren(),function(b){b.destroyRecursive()}),r.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var b=[].concat(this.value);if(b&&b[0]){var a=this;r.forEach(this._getChildren(),function(d){var c=r.some(b,function(a){return d.option&&
a===d.option.value});c&&!a.multiple&&(a.focusedChild=d);p.toggle(d.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),c);d.domNode.setAttribute("aria-selected",c?"true":"false")},this)}},_getValueFromOpts:function(){var b=this.getOptions()||[];if(!this.multiple&&b.length){var a=r.filter(b,function(a){return a.selected})[0];if(a&&a.value)return a.value;b[0].selected=!0;return b[0].value}return this.multiple?r.map(r.filter(b,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(b,a){a&&a.parent||this._addOptionForItem(b)},_onDeleteItem:function(b){this.removeOption({value:this.store.getIdentity(b)})},_onSetItem:function(b){this.updateOption(this._getOptionObjForItem(b))},_getOptionObjForItem:function(b){var a=this.store,d=this.labelAttr&&this.labelAttr in b?b[this.labelAttr]:a.getLabel(b);return{value:d?a.getIdentity(b):null,label:d,item:b}},_addOptionForItem:function(b){var a=this.store;a.isItemLoaded&&!a.isItemLoaded(b)?a.loadItem({item:b,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(b=this._getOptionObjForItem(b),this.addOption(b))},constructor:function(b){this._oValue=(b||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);b.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?f("> *",this.srcNodeRef).map(function(b){return"separator"===b.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:b.getAttribute("data-"+m._scopeName+"-value")||b.getAttribute("value"),
label:String(b.innerHTML),selected:b.getAttribute("selected")||!1,disabled:b.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);s.after(this,"onChange",k.hitch(this,"_updateSelection"));var b=this.store;b&&(b.getIdentity||b.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(b,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var b;b=this._notifyConnections.pop();)b.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(r){var u={};r.setObject("dojo.data.util.sorter",u);u.basicComparator=function(r,t){var l=-1;null===r&&(r=void 0);null===t&&(t=void 0);if(r==t)l=0;else if(r>t||null==r)l=1;return l};u.createSortFunction=function(r,t){function l(b,c,a,d){return function(e,f){var k=d.getValue(e,b),l=d.getValue(f,
b);return c*a(k,l)}}for(var b=[],p,m=t.comparatorMap,k=u.basicComparator,f=0;f<r.length;f++){p=r[f];var c=p.attribute;if(c){p=p.descending?-1:1;var e=k;m&&("string"!==typeof c&&"toString"in c&&(c=c.toString()),e=m[c]||k);b.push(l(c,p,e,t))}}return function(c,e){for(var a=0;a<b.length;){var d=b[a++](c,e);if(0!==d)return d}return 0}};return u})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(r,u,s){var t=function(l){function b(b){l[b]=
function(){var k=arguments,f=s(l,function(c){Array.prototype.unshift.call(k,c);return t(r[b].apply(r,k))});if("forEach"!==b||p)return f}}if(!l)return l;var p=!!l.then;p&&(l=u.delegate(l));b("forEach");b("filter");b("map");null==l.total&&(l.total=s(l,function(b){return b.length}));return l};u.setObject("dojo.store.util.QueryResults",t);return t})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(r,u,s,t){return r("dijit.form._FormValueWidget",
[s,t],{_layoutHackIE7:function(){if(7==u("ie"))for(var l=this.domNode,b=l.parentNode,p=l.firstChild||l,m=p.style.filter,k=this;b&&0==b.clientHeight;)(function(){var f=k.connect(b,"onscroll",function(){k.disconnect(f);p.style.filter=(new Date).getMilliseconds();k.defer(function(){p.style.filter=m})})})(),b=b.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(r,u,s,t,l,b,p,m){u("dijit-legacy-requires")&&t(0,function(){require(["dijit/form/_FormValueWidget"])});return r("dijit.form._FormWidget",[l,p,b,m],{setDisabled:function(b){s.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){s.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){s.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!u("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(r,u,s,t,l,b,p,m,k,f){return u("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);s.set(this.focusNode,"disabled",b);this.valueNode&&s.set(this.valueNode,"disabled",b);this.focusNode.setAttribute("aria-disabled",b?"true":"false");b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in
this?this._setTabIndexAttr:"focusNode",r.forEach(l.isArray(b)?b:[b],function(b){b=this[b];m("webkit")||f.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var e=this.own(p(this.focusNode,"focus",function(){q.remove();e.remove()}))[0],f=m("pointer-events")?"pointerup":m("MSPointer")?"MSPointerUp":m("touch-events")?"touchend, mouseup":"mouseup",q=this.own(p(this.ownerDocumentBody,
f,l.hitch(this,function(a){q.remove();e.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){k.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=t.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,e){return"number"==typeof b&&"number"==typeof e?isNaN(b)&&isNaN(e)?
0:b-e:b>e?1:b<e?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,e){void 0!=this._lastValueReported||null!==e&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||e||void 0===e)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(r,u,s,t,l,b){return r("dijit.form._FormValueMixin",
b,{readOnly:!1,_setReadOnlyAttr:function(b){u.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,l){this._handleOnChange(b,l)},_handleOnChange:function(b,l){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,
!0)}})})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(r,u,s,t,l){return r("dijit.form.ComboButton",t,{templateString:l,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,
_onButtonKeyDown:function(b){b.keyCode==u[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(s.focus(this._popupStateNode),b.stopPropagation(),b.preventDefault())},_onArrowKeyDown:function(b){b.keyCode==u[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(s.focus(this.titleNode),b.stopPropagation(),b.preventDefault())},focus:function(b){this.disabled||s.focus("start"==b?this.titleNode:this._popupStateNode)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(r,u,s,t,l,b,p,m,k){return r("dijit.form.DropDownButton",[b,p,m],{baseClass:"dijitDropDownButton",templateString:k,_fillContent:function(){if(this.srcNodeRef){var b=s("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var b=s("[widgetId]",this.dropDownContainer)[0];b&&(this.dropDown=t.byNode(b));delete this.dropDownContainer}this.dropDown&&l.hide(this.dropDown);this.inherited(arguments)}},
isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,e=c.on("load",u.hitch(this,function(){e.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(r,
u,s,t,l,b,p,m,k,f){t("dijit-legacy-requires")&&p(0,function(){r(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});p=u("dijit.form.Button"+(t("dojo-bidi")?"_NoBidi":""),[m,k],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:f,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},_fillContent:function(c){!c||this.params&&"label"in this.params||
!(c=b.trim(c.innerHTML))||(this.label=c)},_setShowLabelAttr:function(b){this.containerNode&&s.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){l.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},_setLabelAttr:function(c){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=b.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});
t("dojo-bidi")&&(p=u("dijit.form.Button",p,{_setLabelAttr:function(b){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return p})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(r,u,s,t){var l=r("dijit.form._ButtonMixin"+(s("dojo-bidi")?"_NoBidi":""),null,{label:"",
type:"button",__onClick:function(b){b.stopPropagation();b.preventDefault();this.disabled||this.valueNode.click(b);return!1},_onClick:function(b){if(this.disabled)return b.stopPropagation(),b.preventDefault(),!1;!1===this.onClick(b)&&b.preventDefault();var l=b.defaultPrevented;if(!l&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var m=this.domNode;m.parentNode;m=m.parentNode){var k=t.byNode(m);if(k&&"function"==typeof k._onSubmit){k._onSubmit(b);b.preventDefault();l=!0;break}}return!l},
postCreate:function(){this.inherited(arguments);u.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(b){this._set("label",b);(this.containerNode||this.focusNode).innerHTML=b}});s("dojo-bidi")&&(l=r("dijit.form._ButtonMixin",l,{_setLabelAttr:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return l})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){return r("dijit._HasDropDown",d,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(c.once(this.ownerDocument,e.release,f.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var d=
this.dropDown,c=!1;if(a&&this._opened){var e=b.position(this._buttonNode,!0);if(!(a.pageX>=e.x&&a.pageX<=e.x+e.w&&a.pageY>=e.y&&a.pageY<=e.y+e.h)){for(e=a.target;e&&!c;)l.contains(e,"dijitPopup")?c=!0:e=e.parentNode;if(c){e=a.target;if(d.onItemClick){for(var f;e&&!(f=g.byNode(e));)e=e.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}this._opened?d.focus&&(!1!==d.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){d.focus();
delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";l.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(c(this._buttonNode,e.press,f.hitch(this,"_onDropDownMouseDown")),c(this._buttonNode,"click",f.hitch(this,"_onDropDownClick")),c(a,"keydown",f.hitch(this,"_onKey")),c(a,"keyup",f.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),
delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,d=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&a.keyCode==k.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==k.DOWN_ARROW||(a.keyCode==k.ENTER||a.keyCode==k.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(d.tagName||"").toLowerCase()||
d.type&&"text"!==d.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(f.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new u,b=f.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});
this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var d=this.dropDown,c=d.domNode,e=this._aroundNode||this.domNode,g=this,k=a.open({parent:this,popup:d,around:e,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},onClose:function(){t.set(g._popupStateNode,"popupActive",
!1);l.remove(g._popupStateNode,"dijitHasDropDownOpen");g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&e.offsetWidth>d._popupWrapper.offsetWidth){var e=e.offsetWidth-d._popupWrapper.offsetWidth,m={w:d.domNode.offsetWidth+e};f.isFunction(d.resize)?d.resize(m):b.setMarginBox(c,m);"R"==k.corner[1]&&(d._popupWrapper.style.left=d._popupWrapper.style.left.replace("px","")-e+"px")}t.set(this._popupStateNode,"popupActive","true");l.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",
!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",d.id);"presentation"===c.getAttribute("role")||c.getAttribute("aria-labelledby")||c.setAttribute("aria-labelledby",this.id);return k},closeDropDown:function(b){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),b&&this.focus&&this.focus(),a.close(this.dropDown),this._opened=!1)}})})},
"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(r,u,s,t,l,b,p,m,k){t("dijit-legacy-requires")&&b(0,function(){r(["dijit/form/RadioButton"])});return u("dijit.form.CheckBox",[p,m],{templateString:k,baseClass:"dijitCheckBox",_setValueAttr:function(b,c){"string"==typeof b&&(this.inherited(arguments),b=!0);this._created&&
this.set("checked",b,c)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&l("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&l("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(r,u,s,t){return r("dijit.form.ToggleButton",[s,t],{baseClass:"dijitToggleButton",setChecked:function(l){u.deprecated("setChecked("+l+") is deprecated. Use set('checked',"+l+") instead.","","2.0");this.set("checked",l)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(r,u){return r("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(r){var t=
this.checked;this._set("checked",!t);var l=this.inherited(arguments);this.set("checked",l?this.checked:t);return l},_setCheckedAttr:function(r,t){this._set("checked",r);var l=this.focusNode||this.domNode;this._created&&u.get(l,"checked")!=!!r&&u.set(l,"checked",!!r);l.setAttribute(this._aria_attr,String(r));this._handleOnChange(r,t)},postCreate:function(){this.inherited(arguments);var r=this.focusNode||this.domNode;this.checked&&r.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=
this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(r,u){return r("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(r){this._set("readOnly",r);u.set(this.focusNode,"readOnly",r)},_setLabelAttr:void 0,_getSubmitValue:function(r){return null==r||""===r?"on":r},_setValueAttr:function(r){r=
this._getSubmitValue(r);this._set("value",r);u.set(this.focusNode,"value",r)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));u.set(this.focusNode,"value",this.value)},_onClick:function(r){return this.readOnly?(r.stopPropagation(),r.preventDefault(),!1):this.inherited(arguments)}})})},"dojox/form/FileInput":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/fx dojo/dom-attr dojo/dom-class dojo/text!./resources/FileInput.html dijit/form/_FormWidget dijit/_Templated".split(" "),
function(r,u,s,t,l,b,p,m){u.experimental("dojox.form.FileInput");return r("dojox.form.FileInput",p,{label:"Browse ...",cancelText:"Cancel",name:"uploadFile",templateString:b,startup:function(){this._listener=this.connect(this.fileInput,"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue")},postCreate:function(){},_matchValue:function(){this.inputNode.value=this.fileInput.value;this.inputNode.value&&(this.cancelNode.style.visibility="visible",s.fadeIn({node:this.cancelNode,
duration:275}).play())},setLabel:function(b,f){this.titleNode.innerHTML=b},reset:function(b){this.disconnect(this._listener);this.disconnect(this._keyListener);this.fileInput&&this.domNode.removeChild(this.fileInput);s.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);l.add(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);
this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value=""}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(r,u,s,t,l,b,p){b.extend(r,{waiRole:"",waiState:""});return l("dijit._Templated",[u,s],{widgetsInTemplate:!1,constructor:function(){p.deprecated(this.declaredClass+
": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(b,k){var f=this.inherited(arguments),c=k(b,"waiRole");c&&b.setAttribute("role",c);(c=k(b,"waiState"))&&t.forEach(c.split(/\s*,\s*/),function(c){-1!=c.indexOf("-")&&(c=c.split("-"),b.setAttribute("aria-"+c[0],c[1]))});return f}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A){return u("dojox.form.Uploader",[a,q,d,n,v],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:y.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:A,baseClass:"dijitUploader "+q.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":
"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);p.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();f.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=c.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,
"onChange",function(a){for(var b=0,d,c=[];d=a[b++];)d&&d.name&&c.push(d.name);this.displayInput.value=c.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},
upload:function(a){a=a||{};a.uploadType=this.uploadType;this.inherited(arguments)},submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();a=e.toObject(a);a.uploadType=this.uploadType;this.upload(a)},reset:function(){delete this._files;this._disconnectButton();t.forEach(this._inputs,c.destroy);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?t.forEach(this._files,function(b,d){a.push({index:d,name:b.name,size:b.size,type:b.type})},
this):t.forEach(this._inputs,function(b,d){b.value&&a.push({index:d,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),p.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:p.get(a,
"width"),h:p.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(p.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=
c.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&this.multiple&&f.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);p.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(l.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));
!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,this._cons.push(l.connect(this.inputNode,"focus",this,function(){m.add(this.domNode,this.focusedClass)})),this._cons.push(l.connect(this.inputNode,"blur",this,function(){m.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){t.forEach(this._cons,l.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(r,u,s,t,l,b,p,m,k,f){l.add("FormData",function(){return!!window.FormData});l.add("xhr-sendAsBinary",function(){var b=window.XMLHttpRequest&&new window.XMLHttpRequest;return b&&!!b.sendAsBinary});l.add("file-multiple",function(){return!!{"true":1,"false":1}[t.get(document.createElement("input",{type:"file"}),"multiple")]});return b("dojox.form.uploader._Base",[m,k,f],{getForm:function(){if(!this.form)for(var b=this.domNode;b&&b.tagName&&b!==document.body;){if("form"==b.tagName.toLowerCase()){this.form=
b;break}b=b.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(b){p.stop(b);this.submit(this.form)}))},supports:function(b){switch(b){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return l("file-multiple");case "FormData":return l(b);
case "sendAsBinary":return l("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(b){return b.substring(b.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(b){var e=Math.round(b/1024*1E5)/1E5,f=Math.round(b/1048576*1E5)/1E5,k=Math.round(b/1073741824*1E5)/1E5,a=b;1<e&&(a=e.toFixed(1)+" kb");1<f&&(a=f.toFixed(1)+" mb");1<k&&(a=k.toFixed(1)+" gb");return{kb:e,mb:f,gb:k,bytes:b,value:a}}})})},"dojox/form/uploader/_HTML5":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo"],function(r,u,s,t){return r("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(l){this.upload(l[0])})},_drop:function(l){t.stopEvent(l);this._files=l.dataTransfer.files;this.onChange(this.getFileList())},upload:function(l){this.onBegin(this.getFileList());
this.uploadWithFormData(l)},addDropTarget:function(l,b){b||(this.connect(l,"dragenter",t.stopEvent),this.connect(l,"dragover",t.stopEvent),this.connect(l,"dragleave",t.stopEvent));this.connect(l,"drop","_drop")},uploadWithFormData:function(l){if(this.getUrl()){var b=new FormData,p=this._getFileFieldName();s.forEach(this._files,function(k,f){b.append(p,k)},this);if(l){l.uploadType=this.uploadType;for(var m in l)b.append(m,l[m])}this.createXhr().send(b)}else console.error("No upload url found.",this)},
_xhrProgress:function(l){if(l.lengthComputable){var b={bytesLoaded:l.loaded,bytesTotal:l.total,type:l.type,timeStamp:l.timeStamp};"load"==l.type?(b.percent="100%",b.decimal=1):(b.decimal=l.loaded/l.total,b.percent=Math.ceil(l.loaded/l.total*100)+"%");this.onProgress(b)}},createXhr:function(){var l=new XMLHttpRequest,b;l.upload.addEventListener("progress",u.hitch(this,"_xhrProgress"),!1);l.addEventListener("load",u.hitch(this,"_xhrProgress"),!1);l.addEventListener("error",u.hitch(this,function(l){this.onError(l);
clearInterval(b)}),!1);l.addEventListener("abort",u.hitch(this,function(l){this.onAbort(l);clearInterval(b)}),!1);l.onreadystatechange=u.hitch(this,function(){if(4===l.readyState){clearInterval(b);try{this.onComplete(JSON.parse(l.responseText.replace(/^\{\}&&/,"")))}catch(p){console.error("Error parsing server result:",p),console.error(l.responseText),this.onError("Error parsing server result:",p)}}});l.open("POST",this.getUrl());l.setRequestHeader("Accept","application/json");b=setInterval(u.hitch(this,
function(){}),250);return l}})})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(r,u,s,t,l,b,p,m){p.isDebug&&s(["./_firebug/firebug"]);var k=p.require;k&&(k=b.map(l.isArray(k)?k:[k],function(b){return b.replace(/\./g,"/")}),r.isAsync?s(k):m(1,function(){s(k)}));return r})},
"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(r){return r})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(r,u,s){var t=window,l={addOnWindowUnload:function(b,l){r.windowUnloaded||s(t,"unload",r.windowUnloaded=function(){});s(t,"unload",u.hitch(b,l))},addOnUnload:function(b,l){s(t,"beforeunload",u.hitch(b,
l))}};r.addOnWindowUnload=l.addOnWindowUnload;r.addOnUnload=l.addOnUnload;return l})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(r,u,s,t,l,b,p){var m=function(a){return a.replace(/\./g,"/")},k=/\/\/>>built/,f=[],c=[],e=function(a,b,d){f.push(d);p.forEach(a.split(","),function(a){a=I(a,b.module);c.push(a);Z(a)});g()},g=function(){var a,b;for(b in L)if(a=L[b],void 0===a.noReqPluginCheck&&(a.noReqPluginCheck=/loadInit\!/.test(b)||
/require\!/.test(b)?1:0),!a.executed&&!a.noReqPluginCheck&&a.injected==z)return;S(function(){var a=f;f=[];p.forEach(a,function(a){a(1)})})},q=function(a,b,d){var c=/\(|\)/g,e=1;for(c.lastIndex=b;(b=c.exec(a))&&(e=")"==b[0]?e-1:e+1,0!=e););if(0!=e)throw"unmatched paren around character "+c.lastIndex+" in: "+a;return[r.trim(a.substring(d,c.lastIndex))+";\n",c.lastIndex]},a=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,d=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,
n=/(^|\s)(require|define)\s*\(/m,v=function(b,c){var e,f,g,k=[],l=[];e=[];for(c=c||b.replace(a,function(a){d.lastIndex=n.lastIndex=0;return d.test(a)||n.test(a)?"":a});e=d.exec(c);)f=d.lastIndex,g=f-e[0].length,f=q(c,f,g),"loadInit"==e[2]?k.push(f[0]):l.push(f[0]),d.lastIndex=f[1];e=k.concat(l);return e.length||!n.test(c)?[b.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),e.join(""),e]:0},y=s.initSyncLoader(e,g,function(a,b){var d,c,e=[],f=[];if(k.test(b)||!(d=v(b)))return 0;c=a.mid+
"-*loadInit";for(var g in I("dojo",a).result.scopeMap)e.push(g),f.push('"'+g+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+c+"',{\n\tnames:"+l.stringify(e)+",\n\tdef:function("+e.join(",")+"){"+d[1]+"}});\n\ndefine("+l.stringify(e.concat(["dojo/loadInit!"+c]))+", function("+e.join(",")+"){\n"+d[0]+"});"}),A=y.sync,z=y.requested,B=y.arrived,C=y.nonmodule,E=y.executing,D=y.executed,H=y.syncExecStack,L=y.modules,T=y.execQ,I=y.getModule,Z=y.injectModule,N=y.setArrived,x=y.signal,K=y.finishExec,
G=y.execModule,Q=y.getLegacyMode,S=y.guardCheckComplete,e=y.dojoRequirePlugin;r.provide=function(a){var d=H[0],c=b.mixin(I(m(a),s.module),{executed:E,result:b.getObject(a,!0)});N(c);d&&(d.provides||(d.provides=[])).push(function(){c.result=b.getObject(a);delete c.provides;c.executed!==D&&K(c)});return c.result};u.add("config-publishRequireResult",1,0,0);r.require=function(a,d){var c=function(a,b){var d=I(m(a),s.module);if(H.length&&H[0].finish)H[0].finish.push(a);else{if(d.executed)return d.result;
b&&(d.result=C);var c=Q();Z(d);c=Q();d.executed!==D&&d.injected===B&&y.guardCheckComplete(function(){G(d)});if(d.executed)return d.result;c==A?d.cjs?T.unshift(d):H.length&&(H[0].finish=[a]):T.push(d)}}(a,d);u("config-publishRequireResult")&&!b.exists(a)&&void 0!==c&&b.setObject(a,c);return c};r.loadInit=function(a){a()};r.registerModulePath=function(a,b){var d={};d[a.replace(/\./g,"/")]=b;s({paths:d})};r.platformRequire=function(a){a=(a.common||[]).concat(a[r._name]||a["default"]||[]);for(var d;a.length;)b.isArray(d=
a.shift())?r.require.apply(r,d):r.require(d)};r.requireIf=r.requireAfterIf=function(a,b,d){a&&r.require(b,d)};r.requireLocalization=function(a,b,d){s(["../i18n"],function(c){c.getLocalization(a,b,d)})};return{extractLegacyApiApplications:v,require:e,loadInit:function(a,b,d){b([a],function(a){b(a.names,function(){for(var c="",f=[],g=0;g<arguments.length;g++)c+="var "+a.names[g]+"= arguments["+g+"]; ",f.push(arguments[g]);eval(c);var k=b.module,l=[],n,c={provide:function(a){a=m(a);a=I(a,k);a!==k&&N(a)},
require:function(a,b){a=m(a);b&&(I(a,k).result=C);l.push(a)},requireLocalization:function(a,b,d){n||(n=["dojo/i18n"]);d=(d||r.locale).toLowerCase();a=m(a)+"/nls/"+(/root/i.test(d)?"":d+"/")+m(b);I(a,k).isXd&&n.push("dojo/i18n!"+a)},loadInit:function(a){a()}},g={},p;try{for(p in c)g[p]=r[p],r[p]=c[p];a.def.apply(null,f)}catch(q){x("error",[{src:t.id,id:"failedDojoLoadInit"},q])}finally{for(p in c)r[p]=g[p]}n&&(l=l.concat(n));l.length?e(l.join(","),b,d):d()})})}}})},"dojox/form/uploader/_IFrame":function(){define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),
function(r,u,s,t,l,b,p){return s("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(b){var k={},f;this.getForm();var c=this.getUrl(),e=this;b=b||{};b.uploadType=this.uploadType;f=u.place('<form enctype="multipart/form-data" method="post"></form>',this.domNode);l.forEach(this._inputs,function(b,c){""!==b.value&&(f.appendChild(b),k[b.name]=b.value)},this);
if(b)for(nm in b)void 0===k[nm]&&u.create("input",{name:nm,value:b[nm],type:"hidden"},f);p.post(c,{form:f,handleAs:"json",content:b}).then(function(b){u.destroy(f);if(b.ERROR||b.error)e.onError(b);else e.onComplete(b)},function(b){console.error("error parsing server result",b);u.destroy(f);e.onError(b)})}})})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e){function g(a){return!this.isFulfilled()}function q(a){return!!this._finished}function a(a,d){if(!d)try{var c=a.options,e=n.doc(n._frame),f=c.handleAs;if("html"!==f){if("xml"===f)if("html"===e.documentElement.tagName.toLowerCase()){m("a",e.documentElement).orphan();var g=e.documentElement.innerText,g=g.replace(/>\s+</g,"><");a.text=b.trim(g)}else a.data=e;else a.text=e.getElementsByTagName("textarea")[0].value;l(a)}else a.data=e}catch(k){d=k}d?this.reject(d):this._finished?
this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function d(a){this._callNext()}function n(b,c,e){var f=t.parseArgs(b,t.deepCreate(A,c),!0);b=f.url;c=f.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");n._frame||(n._frame=n.create(n._iframeName,y+"();"));b=t.deferred(f,null,g,q,a,d);b._callNext=function(){this._calledNext||(this._calledNext=!0,n._currentDfd=null,n._fireNextRequest())};b._legacy=e;n._dfdQueue.push(b);
n._fireNextRequest();s(b);return e?b:b.promise}var v=r.id.replace(/[\/\.\-]/g,"_"),y=v+"_onload";e.global[y]||(e.global[y]=function(){var a=n._currentDfd;if(a){var b=f.byId(a.response.options.form)||a._tmpForm;if(b){for(var d=a._contentToClean,e=0;e<d.length;e++)for(var g=d[e],k=0;k<b.childNodes.length;k++){var l=b.childNodes[k];if(l.name===g){c.destroy(l);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);
a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(c.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else n._fireNextRequest()});var A={method:"POST"};n.create=function(a,b,d){if(e.global[a])return e.global[a];if(e.global.frames[a])return e.global.frames[a];d||(k("config-useXDomain")&&!k("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
d=k("config-dojoBlankHtmlUrl")||u.toUrl("dojo/resources/blank.html"));b=c.place('<iframe id="'+a+'" name="'+a+'" src="'+d+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',e.body());return e.global[a]=b};n.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var d=e.doc.getElementsByTagName("iframe");if(a.document&&d[b].contentWindow&&d[b].contentWindow.document)return d[b].contentWindow.document;if(e.doc.frames[b]&&
e.doc.frames[b].document)return e.doc.frames[b].document}return null};n.setSrc=function(a,b,d){a=e.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{d?a.location.replace(b):a.location=b}catch(c){}};n._iframeName=v+"_IoIframe";n._notifyStart=function(){};n._dfdQueue=[];n._currentDfd=null;n._fireNextRequest=function(){var a;try{if(!n._currentDfd&&n._dfdQueue.length){do a=n._currentDfd=n._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&n._dfdQueue.length);if(!a||a.canceled||
a.isCanceled&&a.isCanceled())n._currentDfd=null;else{var d=a.response,g=d.options,k=a._contentToClean=[],l=f.byId(g.form),m=t.notify,q=g.data||null,r;a._legacy||"POST"!==g.method||l?"GET"===g.method&&l&&-1<d.url.indexOf("?")&&(r=d.url.slice(d.url.indexOf("?")+1),q=b.mixin(p.queryToObject(r),q)):l=a._tmpForm=c.create("form",{name:v+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},e.body());if(l){if(!a._legacy){var y=l;do y=y.parentNode;while(y&&y!==e.doc.documentElement);y||(l.style.position=
"absolute",l.style.left="-1000px",l.style.top="-1000px",e.body().appendChild(l));l.name||(l.name=v+"_form")}if(q){var y=function(a,b){c.create("input",{type:"hidden",name:a,value:b},l);k.push(a)},s;for(s in q){var u=q[s];if(b.isArray(u)&&1<u.length)for(r=0;r<u.length;r++)y(s,u[r]);else l[s]?l[s].value=u:y(s,u)}}var A=l.getAttributeNode("action"),K=l.getAttributeNode("method"),G=l.getAttributeNode("target");d.url&&(a._originalAction=A?A.value:null,A?A.value=d.url:l.setAttribute("action",d.url));a._legacy?
K&&K.value||(K?K.value=g.method:l.setAttribute("method",g.method)):(a._originalMethod=K?K.value:null,K?K.value=g.method:l.setAttribute("method",g.method));a._originalTarget=G?G.value:null;G?G.value=n._iframeName:l.setAttribute("target",n._iframeName);l.target=n._iframeName;m&&m.emit("send",d,a.promise.cancel);n._notifyStart(d);l.submit()}else g="",d.options.data&&(g=d.options.data,"string"!==typeof g&&(g=p.objectToQuery(g))),y=d.url+(-1<d.url.indexOf("?")?"&":"?")+g,m&&m.emit("send",d,a.promise.cancel),
n._notifyStart(d),n.setSrc(n._frame,y,!0)}}}catch(Q){a.reject(Q)}};t.addCommonMethods(n,["GET","POST"]);return n})},"dojox/form/uploader/_Flash":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(r,u,s,t,l,b,p,m,k,f){return l("dojox.form.uploader._Flash",[],{swfPath:b.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,
skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(b){},onLoad:function(b){},onFileChange:function(b){},onFileProgress:function(b){},getFlashFileList:function(){return this._files},
flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(b){this.onBegin(this.getFileList());b=b||{};b.returnType="F";b.uploadType=this.uploadType;this.flashMovie.doUpload(b)},_change:function(b){this._files=this._files.concat(b);k.forEach(b,function(b){b.bytesLoaded=0;b.bytesTotal=b.size;this._fileMap[b.name+"_"+b.size]=b},this);this.onChange(this._files);this.onFileChange(b)},_complete:function(b){this._getCustomEvent().type="load";this.onComplete(b)},
_progress:function(b){this._fileMap[b.name+"_"+b.bytesTotal].bytesLoaded=b.bytesLoaded;var e=this._getCustomEvent();this.onFileProgress(b);this.onProgress(e)},_error:function(b){this.onError(b)},_onFlashBlur:function(b){},_getCustomEvent:function(){var b={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},e;for(e in this._fileMap)b.bytesTotal+=this._fileMap[e].bytesTotal,b.bytesLoaded+=this._fileMap[e].bytesLoaded;b.decimal=b.bytesLoaded/b.bytesTotal;b.percent=Math.ceil(b.bytesLoaded/
b.bytesTotal*100)+"%";return b},_connectFlash:function(){this._subs=[];this._cons=[];var b=m.hitch(this,function(b,c){this._subs.push(p.subscribe(this.id+b,this,c))});b("/filesSelected","_change");b("/filesUploaded","_complete");b("/filesProgress","_progress");b("/filesError","_error");b("/filesCanceled","onCancel");b("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&t.set(this.domNode,"tabIndex",this.tabIndex)},
_createFlashUploader:function(){var b=this.btnSize.w,e=this.btnSize.h;if(b){var g=this.getUrl();if(g){if(0>g.toLowerCase().indexOf("http")&&0!=g.indexOf("/")){var k=window.location.href.split("/");k.pop();k=k.join("/")+"/";g=k+g}}else console.warn("Warning: no uploadUrl provided.");this.inputNode=s.create("div",{className:"dojoxFlashNode"},this.domNode,"first");u.set(this.inputNode,{position:"absolute",top:"-2px",width:b+"px",height:e+"px",opacity:0});b={expressInstall:!0,path:(this.swfPath.uri||
this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:b,height:e,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:g,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};
this.flashObject=new f(b,this.inputNode);this.flashObject.onError=m.hitch(function(a){console.error("Flash Error: "+a)});this.flashObject.onReady=m.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=m.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window".split(" "),
function(r,u,s,t,l,b,p,m){function k(a){a=r.delegate(q,a);if(!("path"in a))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),null;"id"in a||(a.id=e+g++);return a}var f,c,e="dojox-embed-flash-",g=0,q={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};l("ie")?(f=function(a){a=k(a);if(!a)return null;var b,c=a.path;if(a.vars){var e=[];for(b in a.vars)e.push(b+"="+a.vars[b]);
a.params.FlashVars=e.join("&");delete a.vars}c='<object id="'+a.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+a.width+'" height="'+a.height+'"'+(a.style?' style="'+a.style+'"':"")+'><param name="movie" value="'+c+'" />';if(a.params)for(b in a.params)c+='<param name="'+b+'" value="'+a.params[b]+'" />';return{id:a.id,markup:c+"</object>"}},c=function(){for(var a=10,b=null;!b&&7<a;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(c){}return b?(a=b.GetVariable("$version").split(" ")[1].split(","),
{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}(),u.addOnWindowUnload(function(){console.warn("***************UNLOAD");var a=function(){};t("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(e){}})})):(f=function(a){a=k(a);if(!a)return null;var b,c=a.path;if(a.vars){var e=[];for(b in a.vars)e.push(b+"="+a.vars[b]);a.params.flashVars=
e.join("&");delete a.vars}c='<embed type="application/x-shockwave-flash" src="'+c+'" id="'+a.id+'" width="'+a.width+'" height="'+a.height+'"'+(a.style?' style="'+a.style+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(a.params)for(b in a.params)c+=" "+b+'="'+a.params[b]+'"';return{id:a.id,markup:c+" />"}},c=function(){var a=navigator.plugins["Shockwave Flash"];return a&&a.description?(a=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,
".").split("."),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}());var a=function(a,e){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=c.major;this.minimumVersion=a.minimumVersion||9;this.domNode=this.movie=this.id=null;e&&(e=b.byId(e));setTimeout(r.hitch(this,
function(){if(a.expressInstall||this.available&&this.available>=this.minimumVersion)if(a&&e)this.init(a,e);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),100)};r.extend(a,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){clearInterval(this._poller);delete this._poller;
delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(d,c){this.destroy();c=b.byId(c||this.domNode);if(!c)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var e=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;a.initialized&&(this.id=a.place(d,c),this.domNode=c,setTimeout(r.hitch(this,function(){this.movie=this.byId(this.id,d.doc);this.onReady(this.movie);this._poller=setInterval(r.hitch(this,function(){try{e=this.movie.PercentLoaded()}catch(a){console.warn("this.movie.PercentLoaded() failed",
a,this.movie)}if(100==e)this._onload();else if(0==e&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(a){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=r.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),b;for(b in this)a[b]||delete this[b];this._poller?p(this,"Load",this,"_destroy"):this._destroy()}},byId:function(a,b){b=
b||document;return b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}});r.mixin(a,{minSupported:8,available:c.major,supported:c.major>=c.required,minimumRequired:c.required,version:c,initialized:!1,onInitialize:function(){a.initialized=!0},__ie_markup__:function(a){return f(a)},proxy:function(a,b){s.forEach(b instanceof Array?b:[b],function(a){this[a]=r.hitch(this,function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+a+'" returntype="javascript"><arguments>'+
s.map(arguments,function(a){return __flash__toXML(a)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},a)}});a.place=function(a,c){var e=f(a);c=b.byId(c);c||(c=m.doc.createElement("div"),c.id=e.id+"-container",m.body().appendChild(c));return e?(c.innerHTML=e.markup,e.id):null};a.onInitialize();r.setObject("dojox.embed.Flash",a);return a})},"dojox/form/uploader/FileList":function(){define("dojo/_base/fx dojo/dom-style dojo/dom-class dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_base/manager dojox/form/uploader/_Base dojo/text!../resources/UploaderFileList.html".split(" "),
function(r,u,s,t,l,b,p,m,k){return t("dojox.form.uploader.FileList",m,{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:k,postCreate:function(){this.setUploader();this.hideProgress()},reset:function(){for(var b=0;b<this.rowAmt;b++)this.listNode.deleteRow(0);this.rowAmt=0},setUploader:function(){if(!this.uploaderId&&!this.uploader)console.warn("uploaderId not passed to UploaderFileList");else if(this.uploaderId&&
!this.uploader)this.uploader=p.byId(this.uploaderId);else if(4<this._upCheckCnt){console.warn("uploader not found for ID ",this.uploaderId);return}this.uploader?(this.connect(this.uploader,"onChange","_onUploaderChange"),this.connect(this.uploader,"reset","reset"),this.connect(this.uploader,"onBegin",function(){this.showProgress(!0)}),this.connect(this.uploader,"onProgress","_progress"),this.connect(this.uploader,"onComplete",function(){setTimeout(l.hitch(this,function(){this.hideProgress(!0)}),1250)}),
(this._fileSizeAvail={html5:1,flash:1}[this.uploader.uploadType])||(this.sizeHeader.style.display="none")):(this._upCheckCnt++,setTimeout(l.hitch(this,"setUploader"),250))},hideProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:!1})},showProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:!1})},_progress:function(b){this.percentTextNode.innerHTML=b.percent;u.set(this.percentBarNode,"width",b.percent)},
_hideShowProgress:function(b){var c=this.progressNode,e=function(){u.set(c,"display",b.endDisp)};b.ani?(u.set(c,"display","block"),r.animateProperty({node:c,properties:{height:{start:b.beg,end:b.end,units:"px"}},onEnd:e}).play()):e()},_onUploaderChange:function(f){this.reset();b.forEach(f,function(b,e){this._addRow(e+1,this.getFileType(b.name),b.name,b.size)},this)},_addRow:function(b,c,e,g){var k,a=this.listNode.insertRow(-1);k=a.insertCell(-1);s.add(k,"dojoxUploaderIndex");k.innerHTML=b;k=a.insertCell(-1);
s.add(k,"dojoxUploaderIcon");k.innerHTML=c;k=a.insertCell(-1);s.add(k,"dojoxUploaderFileName");k.innerHTML=e;this._fileSizeAvail&&(k=a.insertCell(-1),s.add(k,"dojoxUploaderSize"),k.innerHTML=this.convertBytes(g).value);this.rowAmt++}})})},"dojox/validate/web":function(){define(["./_base","./regexp"],function(r,u){r.isIpAddress=function(r,t){return RegExp("^"+u.ipAddress(t)+"$","i").test(r)};r.isUrl=function(r,t){return RegExp("^"+u.url(t)+"$","i").test(r)};r.isEmailAddress=function(r,t){return RegExp("^"+
u.emailAddress(t)+"$","i").test(r)};r.isEmailAddressList=function(r,t){return RegExp("^"+u.emailAddressList(t)+"$","i").test(r)};r.getEmailAddressList=function(s,t){t||(t={});t.listSeparator||(t.listSeparator="\\s;,");return r.isEmailAddressList(s,t)?s.split(RegExp("\\s*["+t.listSeparator+"]\\s*")):[]};return r})},"dojox/validate/_base":function(){define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(r,u,s,t){var l=r.getObject("dojox.validate",!0);l.isText=function(b,l){l="object"==
typeof l?l:{};return/^\s*$/.test(b)||"number"==typeof l.length&&l.length!=b.length||"number"==typeof l.minlength&&l.minlength>b.length||"number"==typeof l.maxlength&&l.maxlength<b.length?!1:!0};l._isInRangeCache={};l.isInRange=function(b,p){b=s.parse(b,p);if(isNaN(b))return!1;p="object"==typeof p?p:{};var m="number"==typeof p.max?p.max:Infinity,k="number"==typeof p.min?p.min:-Infinity,f=l._isInRangeCache,c=b+"max"+m+"min"+k+"dec"+("string"==typeof p.decimal?p.decimal:".");if("undefined"!=typeof f[c])return f[c];
f[c]=!(b<k||b>m);return f[c]};l.isNumberFormat=function(b,l){return RegExp("^"+t.numberFormat(l)+"$","i").test(b)};l.isValidLuhn=function(b){var l=0,m,k;r.isString(b)||(b=String(b));b=b.replace(/[- ]/g,"");m=b.length%2;for(var f=0;f<b.length;f++)k=parseInt(b.charAt(f)),f%2==m&&(k*=2),9<k&&(k-=9),l+=k;return!(l%10)};return l})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(r,u){var s={};u.setObject("dojo.regexp",s);s.escapeString=function(r,l){return r.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,
function(b){return l&&-1!=l.indexOf(b)?b:"\\"+b})};s.buildGroupRE=function(r,l,b){if(!(r instanceof Array))return l(r);for(var p=[],m=0;m<r.length;m++)p.push(l(r[m]));return s.group(p.join("|"),b)};s.group=function(r,l){return"("+(l?"?:":"")+r+")"};return s})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(r,u,s,t,l){var b={};r.setObject("dojo.number",b);b.format=function(l,k){k=r.mixin({},k||{});var f=u.normalizeLocale(k.locale),
f=u.getLocalization("dojo.cldr","number",f);k.customs=f;f=k.pattern||f[(k.type||"decimal")+"Format"];return isNaN(l)||Infinity==Math.abs(l)?null:b._applyPattern(l,f,k)};b._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;b._applyPattern=function(l,k,f){f=f||{};var c=f.customs.group,e=f.customs.decimal;k=k.split(";");var g=k[0];k=k[0>l?1:0]||"-"+g;if(-1!=k.indexOf("%"))l*=100;else if(-1!=k.indexOf("\u2030"))l*=1E3;else if(-1!=k.indexOf("\u00a4"))c=f.customs.currencyGroup||c,e=f.customs.currencyDecimal||e,k=
k.replace(/\u00a4{1,3}/,function(a){return f[["symbol","currency","displayName"][a.length-1]]||f.currency||""});else if(-1!=k.indexOf("E"))throw Error("exponential notation not supported");var p=b._numberPatternRE,g=g.match(p);if(!g)throw Error("unable to find a number expression in pattern: "+k);!1===f.fractional&&(f.places=0);return k.replace(p,b._formatAbsolute(l,g[0],{decimal:e,group:c,places:f.places,round:f.round}))};b.round=function(b,k,f){f=10/(f||10);return(f*+b).toFixed(k)/f};if(0==(0.9).toFixed()){var p=
b.round;b.round=function(b,k,f){var c=Math.pow(10,-k||0),e=Math.abs(b);if(!b||e>=c)c=0;else if(e/=c,0.5>e||0.95<=e)c=0;return p(b,k,f)+(0<b?c:-c)}}b._formatAbsolute=function(l,k,f){f=f||{};!0===f.places&&(f.places=0);Infinity===f.places&&(f.places=6);k=k.split(".");var c="string"==typeof f.places&&f.places.indexOf(","),e=f.places;c?e=f.places.substring(c+1):0<=e||(e=(k[1]||[]).length);0>f.round||(l=b.round(l,e,f.round));l=String(Math.abs(l)).split(".");var g=l[1]||"";k[1]||f.places?(c&&(f.places=
f.places.substring(0,c)),c=void 0!==f.places?f.places:k[1]&&k[1].lastIndexOf("0")+1,c>g.length&&(l[1]=t.pad(g,c,"0",!0)),e<g.length&&(l[1]=g.substr(0,e))):l[1]&&l.pop();e=k[0].replace(",","");c=e.indexOf("0");-1!=c&&(c=e.length-c,c>l[0].length&&(l[0]=t.pad(l[0],c)),-1==e.indexOf("#")&&(l[0]=l[0].substr(l[0].length-c)));var e=k[0].lastIndexOf(","),p,a;-1!=e&&(p=k[0].length-e-1,k=k[0].substr(0,e),e=k.lastIndexOf(","),-1!=e&&(a=k.length-e-1));k=[];for(e=l[0];e;)c=e.length-p,k.push(0<c?e.substr(c):e),
e=0<c?e.slice(0,c):"",a&&(p=a,delete a);l[0]=k.reverse().join(f.group||",");return l.join(f.decimal||".")};b.regexp=function(l){return b._parseInfo(l).regexp};b._parseInfo=function(m){m=m||{};var k=u.normalizeLocale(m.locale),k=u.getLocalization("dojo.cldr","number",k),f=m.pattern||k[(m.type||"decimal")+"Format"],c=k.group,e=k.decimal,g=1;if(-1!=f.indexOf("%"))g/=100;else if(-1!=f.indexOf("\u2030"))g/=1E3;else{var p=-1!=f.indexOf("\u00a4");p&&(c=k.currencyGroup||c,e=k.currencyDecimal||e)}k=f.split(";");
1==k.length&&k.push("-"+k[0]);k=l.buildGroupRE(k,function(a){a="(?:"+l.escapeString(a,".")+")";return a.replace(b._numberPatternRE,function(a){var f={signed:!1,separator:m.strict?c:[c,""],fractional:m.fractional,decimal:e,exponent:!1};a=a.split(".");var k=m.places;1==a.length&&1!=g&&(a[1]="###");1==a.length||0===k?f.fractional=!1:(void 0===k&&(k=m.pattern?a[1].lastIndexOf("0")+1:Infinity),k&&void 0==m.fractional&&(f.fractional=!0),!m.places&&k<a[1].length&&(k+=","+a[1].length),f.places=k);a=a[0].split(",");
1<a.length&&(f.groupSize=a.pop().length,1<a.length&&(f.groupSize2=a.pop().length));return"("+b._realNumberRegexp(f)+")"})},!0);p&&(k=k.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,c,e){a=l.escapeString(m[["symbol","currency","displayName"][c.length-1]]||m.currency||"");b=b?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return m.strict?b+a+e:(b&&(b+="*"),e&&(e+="*"),"(?:"+b+a+e+")?")}));return{regexp:k.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:c,decimal:e,factor:g}};b.parse=function(l,k){var f=b._parseInfo(k),
c=RegExp("^"+f.regexp+"$").exec(l);if(!c)return NaN;var e=c[1];if(!c[1]){if(!c[2])return NaN;e=c[2];f.factor*=-1}e=e.replace(RegExp("["+f.group+"\\s\\xa0]","g"),"").replace(f.decimal,".");return e*f.factor};b._realNumberRegexp=function(m){m=m||{};"places"in m||(m.places=Infinity);"string"!=typeof m.decimal&&(m.decimal=".");"fractional"in m&&!/^0/.test(m.places)||(m.fractional=[!0,!1]);"exponent"in m||(m.exponent=[!0,!1]);"eSigned"in m||(m.eSigned=[!0,!1]);var k=b._integerRegexp(m),f=l.buildGroupRE(m.fractional,
function(b){var c="";b&&0!==m.places&&(c="\\"+m.decimal,c=Infinity==m.places?"(?:"+c+"\\d+)?":c+("\\d{"+m.places+"}"));return c},!0),c=l.buildGroupRE(m.exponent,function(c){return c?"([eE]"+b._integerRegexp({signed:m.eSigned})+")":""}),k=k+f;f&&(k="(?:(?:"+k+")|(?:"+f+"))");return k+c};b._integerRegexp=function(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var k=l.buildGroupRE(b.signed,function(b){return b?"[-+]":""},!0),f=l.buildGroupRE(b.separator,
function(c){if(!c)return"(?:\\d+)";c=l.escapeString(c);" "==c?c="\\s":"\u00a0"==c&&(c="\\s\\xa0");var e=b.groupSize,f=b.groupSize2;return f?(c="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+c+"]\\d{"+f+"})*["+c+"]\\d{"+e+"})",0<e-f?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+c+"]\\d{"+e+"})*)"},!0);return k+f};return b})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(r,u,s){var t=r.getObject("validate.regexp",!0,s);return t=s.validate.regexp=
{ipAddress:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowDottedDecimal&&(l.allowDottedDecimal=!0);"boolean"!=typeof l.allowDottedHex&&(l.allowDottedHex=!0);"boolean"!=typeof l.allowDottedOctal&&(l.allowDottedOctal=!0);"boolean"!=typeof l.allowDecimal&&(l.allowDecimal=!0);"boolean"!=typeof l.allowHex&&(l.allowHex=!0);"boolean"!=typeof l.allowIPv6&&(l.allowIPv6=!0);"boolean"!=typeof l.allowHybrid&&(l.allowHybrid=!0);var b=[];l.allowDottedDecimal&&b.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");
l.allowDottedHex&&b.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");l.allowDottedOctal&&b.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");l.allowDecimal&&b.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");l.allowHex&&b.push("0[xX]0*[\\da-fA-F]{1,8}");l.allowIPv6&&b.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");l.allowHybrid&&b.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");
l="";0<b.length&&(l="("+b.join("|")+")");return l},host:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowIP&&(l.allowIP=!0);"boolean"!=typeof l.allowLocal&&(l.allowLocal=!1);"boolean"!=typeof l.allowPort&&(l.allowPort=!0);"boolean"!=typeof l.allowNamed&&(l.allowNamed=!1);var b=l.allowPort?"(\\:\\d+)?":"",p="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)";l.allowIP&&(p+="|"+t.ipAddress(l));l.allowLocal&&(p+="|localhost");l.allowNamed&&
(p+="|^[^-][a-zA-Z0-9_-]*");return"("+p+")"+b},url:function(l){l="object"==typeof l?l:{};"scheme"in l||(l.scheme=[!0,!1]);return u.buildGroupRE(l.scheme,function(b){return b?"(https?|ftps?)\\://":""})+t.host(l)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},emailAddress:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowCruft&&(l.allowCruft=!1);l.allowPort=!1;var b="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@"+t.host(l);l.allowCruft&&(b="<?(mailto\\:)?"+
b+">?");return b},emailAddressList:function(l){l="object"==typeof l?l:{};"string"!=typeof l.listSeparator&&(l.listSeparator="\\s;,");var b=t.emailAddress(l);return"("+b+"\\s*["+l.listSeparator+"]\\s*)*"+b+"\\s*["+l.listSeparator+"]?\\s*"},numberFormat:function(l){l="object"==typeof l?l:{};"undefined"==typeof l.format&&(l.format="###-###-####");return u.buildGroupRE(l.format,function(b){return u.escapeString(b,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},
province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowTerritories&&(l.allowTerritories=!0);"boolean"!=typeof l.allowMilitary&&(l.allowMilitary=!0);var b="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";l.allowTerritories&&(b+="|AS|FM|GU|MH|MP|PW|PR|VI");l.allowMilitary&&(b+="|AA|AE|AP");return"("+b+")"}}}})},
"dojox/main":function(){define(["dojo/_base/kernel"],function(r){return r.dojox})},"dojox/validate/check":function(){define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(r,u,s){r.experimental("dojox.validate.check");s.check=function(r,l){var b=[],p=[],m={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return 0<b.length},getMissing:function(){return b},isMissing:function(a){for(var d=0;d<b.length;d++)if(a==b[d])return!0;return!1},hasInvalid:function(){return 0<
p.length},getInvalid:function(){return p},isInvalid:function(a){for(var b=0;b<p.length;b++)if(a==p[b])return!0;return!1}},k=function(a,b){return"undefined"==typeof b[a]};if(l.trim instanceof Array)for(var f=0;f<l.trim.length;f++){var c=r[l.trim[f]];k("type",c)||"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||(c.value=c.value.replace(/(^\s*|\s*$)/g,""))}if(l.uppercase instanceof Array)for(f=0;f<l.uppercase.length;f++)c=r[l.uppercase[f]],k("type",c)||"text"!=c.type&&"textarea"!=c.type&&"password"!=
c.type||(c.value=c.value.toUpperCase());if(l.lowercase instanceof Array)for(f=0;f<l.lowercase.length;f++)c=r[l.lowercase[f]],k("type",c)||"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||(c.value=c.value.toLowerCase());if(l.ucfirst instanceof Array)for(f=0;f<l.ucfirst.length;f++)c=r[l.ucfirst[f]],k("type",c)||"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||(c.value=c.value.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}));if(l.digit instanceof
Array)for(f=0;f<l.digit.length;f++)c=r[l.digit[f]],k("type",c)||"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||(c.value=c.value.replace(/\D/g,""));if(l.required instanceof Array)for(f=0;f<l.required.length;f++)if(u.isString(l.required[f]))if(c=r[l.required[f]],!k("type",c)&&("text"==c.type||"textarea"==c.type||"password"==c.type||"file"==c.type)&&/^\s*$/.test(c.value))b[b.length]=c.name;else if(!(k("type",c)||"select-one"!=c.type&&"select-multiple"!=c.type||-1!=c.selectedIndex&&!/^\s*$/.test(c.options[c.selectedIndex].value)))b[b.length]=
c.name;else if(c instanceof Array){for(var e=!1,g=0;g<c.length;g++)c[g].checked&&(e=!0);e||(b[b.length]=c[0].name)}if(l.required instanceof Array)for(f=0;f<l.required.length;f++)if(u.isObject(l.required[f])){var q,a;for(a in l.required[f])c=r[a],q=l.required[f][a];if(c instanceof Array){for(g=e=0;g<c.length;g++)c[g].checked&&e++;e<q&&(b[b.length]=c[0].name)}else if(!k("type",c)&&"select-multiple"==c.type){for(g=e=0;g<c.options.length;g++)c.options[g].selected&&!/^\s*$/.test(c.options[g].value)&&e++;
e<q&&(b[b.length]=c.name)}}if(u.isObject(l.dependencies))for(a in l.dependencies)c=r[a],k("type",c)||"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||/\S+/.test(c.value)||m.isMissing(c.name)||(f=r[l.dependencies[a]],"text"!=f.type&&"textarea"!=f.type&&"password"!=f.type||/^\s*$/.test(f.value)||(b[b.length]=c.name));if(u.isObject(l.constraints))for(a in l.constraints)if((c=r[a])&&(k("tagName",c)||!(0<=c.tagName.toLowerCase().indexOf("input")||0<=c.tagName.toLowerCase().indexOf("textarea"))||
!/^\s*$/.test(c.value))){var d;if(u.isFunction(l.constraints[a]))d=l.constraints[a](c.value);else if(u.isFunction(u.getObject(a,!1,l.constraints)))d=u.getObject(a,!1,l.constraints)(c.value);else if(u.isArray(l.constraints[a]))if(u.isArray(l.constraints[a][0]))for(f=0;f<l.constraints[a].length&&(d=s.evaluateConstraint(l,l.constraints[a][f],a,c),d.isValid);f++);else d=u.isFunction(u.getObject(a,!1,l.constraints))?s.evaluateConstraint(l,l.constraints[l.constraints[a]],a,c):s.evaluateConstraint(l,l.constraints[a],
a,c);d?d.isValid||(p[p.length]={field:c.name,message:d.message}):p[p.length]=c.name}if(u.isObject(l.confirm))for(a in l.confirm)c=r[a],f=r[l.confirm[a]],k("type",c)||k("type",f)||"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||f.type!=c.type||f.value==c.value||m.isInvalid(c.name)||/^\s*$/.test(f.value)||(p[p.length]=c.name);return m};s.evaluateConstraint=function(r,l,b,p){r=l[0];l=l.slice(1);l.unshift(p.value);return"undefined"!=typeof r&&"string"!=typeof r?r.apply(null,l):"undefined"!=typeof r&&
"string"==typeof r&&u.isFunction(u.getObject(r))?u.getObject(r).apply(null,l):!1};return s.check})},"dojox/widget/Calendar":function(){define(["dojo/_base/kernel","dojo/_base/declare","./_CalendarBase","./_CalendarDay","./_CalendarMonthYear"],function(r,u,s,t,l){r.experimental("dojox/widget/Calendar");return u("dojox.widget.Calendar",[s,t,l],{})})},"dojox/widget/_CalendarBase":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/_WidgetsInTemplateMixin dijit/typematic dojo/_base/declare dojo/date dojo/date/stamp dojo/date/locale dojo/dom-style dojo/dom-class dojo/_base/fx dojo/on dojo/_base/array dojo/_base/lang dojo/text!./Calendar/Calendar.html".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){return b("dojox.widget._CalendarBase",[r,u,s,t],{templateString:d,_views:null,useFx:!0,value:new Date,constraints:null,footerFormat:"medium",constructor:function(){this._views=[];this.value=new Date},_setConstraintsAttr:function(a){if(a=this.constraints=a)"string"==typeof a.min&&(a.min=m.fromISOString(a.min)),"string"==typeof a.max&&(a.max=m.fromISOString(a.max))},postMixInProperties:function(){this.inherited(arguments);this.value=this.parseInitialValue(this.value)},
parseInitialValue:function(a){if(!a||-1===a)return new Date;a.getFullYear||isNaN(a)||("string"==typeof this.value&&(a=parseInt(a)),a=this._makeDate(a));return a},_makeDate:function(a){return a},postCreate:function(){this.displayMonth=new Date(this.get("value"));this._isInvalidDate(this.displayMonth)&&(this.displayMonth=new Date);var b={parent:this,_getValueAttr:a.hitch(this,function(){return new Date(this._internalValue||this.value)}),_getDisplayMonthAttr:a.hitch(this,function(){return new Date(this.displayMonth)}),
_getConstraintsAttr:a.hitch(this,function(){return this.constraints}),getLang:a.hitch(this,function(){return this.lang}),isDisabledDate:a.hitch(this,this.isDisabledDate),getClassForDate:a.hitch(this,this.getClassForDate),addFx:this.useFx?a.hitch(this,this.addFx):function(){}};q.forEach(this._views,function(d){d=(new d(b)).placeAt(this);var c=d.getHeader();c&&(this.header.appendChild(c),f.set(c,"display","none"));f.set(d.domNode,"visibility","hidden");d.on("valueSelected",a.hitch(this,"_onDateSelected"));
d.set("value",this.get("value"))},this);2>this._views.length&&f.set(this.header,"cursor","auto");this.inherited(arguments);this._children=this.getChildren();this._currentChild=0;this.footer.innerHTML="Today: "+k.format(new Date,{formatLength:this.footerFormat,selector:"date",locale:this.lang});g(this.footer,"click",a.hitch(this,"goToToday"));var d=this._children[0];f.set(d.domNode,"top","0px");f.set(d.domNode,"visibility","visible");d.getHeader()&&f.set(d.getHeader(),"display","");c.toggle(this.container,
"no-header",!d.useHeader);d.onDisplay();var e=this,d=function(a,b,d){l.addMouseListener(e[a],e,function(a){0<=a&&e._adjustDisplay(b,d)},0.8,500)};d("incrementMonth","month",1);d("decrementMonth","month",-1);this._updateTitleStyle()},addFx:function(a,b){},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a){a||(a=new Date);a.getFullYear||(a=m.fromISOString(a+""));return this._isInvalidDate(a)?!1:!this.value||p.compare(a,this.value)?
(a=new Date(a),this.displayMonth=new Date(a),this._internalValue=a,this.isDisabledDate(a,this.lang)||0!=this._currentChild||(this.value=a,this.onChange(a)),this._children&&0<this._children.length&&this._children[this._currentChild].set("value",this.value),!0):!1},isDisabledDate:function(a,b){var d=this.constraints,c=p.compare;return d&&(d.min&&0<c(d.min,a,"date")||d.max&&0>c(d.max,a,"date"))},onValueSelected:function(a){},_onDateSelected:function(a,b,d){this.displayMonth=a;this.set("value",a);this._transitionVert(-1)||
(b||0===b||(b=this.get("value")),this.onValueSelected(b))},onChange:function(a){},onHeaderClick:function(a){this._transitionVert(1)},goToToday:function(){this.set("value",new Date);this.onValueSelected(this.get("value"))},_transitionVert:function(a){var b=this._children[this._currentChild],d=this._children[this._currentChild+a];if(!d)return!1;f.set(d.domNode,"visibility","visible");var g=f.get(this.containerNode,"height");d.set("value",this.displayMonth);b.header&&f.set(b.header,"display","none");
d.header&&f.set(d.header,"display","");f.set(d.domNode,"top",-1*g+"px");f.set(d.domNode,"visibility","visible");this._currentChild+=a;a*=g;f.set(d.domNode,"top",-1*a+"px");a=e.animateProperty({node:b.domNode,properties:{top:a},onEnd:function(){f.set(b.domNode,"visibility","hidden")}});g=e.animateProperty({node:d.domNode,properties:{top:0},onEnd:function(){d.onDisplay()}});c.toggle(this.container,"no-header",!d.useHeader);a.play();g.play();b.onBeforeUnDisplay();d.onBeforeDisplay();this._updateTitleStyle();
return!0},_updateTitleStyle:function(){c.toggle(this.header,"navToPanel",this._currentChild<this._children.length-1)},_slideTable:function(a,b,d){a=a.domNode;var c=a.cloneNode(!0),g=f.get(a,"width");a.parentNode.appendChild(c);f.set(a,"left",g*b+"px");d();b=e.animateProperty({node:c,properties:{left:g*b*-1},duration:500,onEnd:function(){c.parentNode.removeChild(c)}});d=e.animateProperty({node:a,properties:{left:0},duration:500});b.play();d.play()},_addView:function(a){this._views.push(a)},getClassForDate:function(a,
b){},_adjustDisplay:function(a,b,d){var c=this._children[this._currentChild],e=this.displayMonth=c.adjustDate(this.displayMonth,b);this._slideTable(c,b,function(){c.set("value",e)})}})})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(r,u,s,t,l,b){var p=b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?
this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(s.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(b,k,f,c,e,g,l,a){if(e!=this._obj){this.stop();this._initialDelay=l||500;this._subsequentDelay=g||0.9;this._minDelay=a||10;this._obj=e;this._node=f;this._count=this._currentTimeout=-1;this._callback=s.hitch(k,c);this._evt={faux:!0};for(var d in b)"layerX"!=d&&"layerY"!=
d&&(k=b[d],"function"!=typeof k&&"undefined"!=typeof k&&(this._evt[d]=k));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(b,k,f,c,e,g,l){var a="keyCode"in k?"keyCode":"charCode"in k?"charCode":"charOrCode",d=[t(b,"keyCode"in k?"keydown":"charCode"in k?"keypress":u._keypress,s.hitch(this,function(d){d[a]!=k[a]||void 0!==k.ctrlKey&&k.ctrlKey!=d.ctrlKey||
void 0!==k.altKey&&k.altKey!=d.altKey||void 0!==k.metaKey&&k.metaKey!=(d.metaKey||!1)||void 0!==k.shiftKey&&k.shiftKey!=d.shiftKey?p._obj==k&&p.stop():(d.stopPropagation(),d.preventDefault(),p.trigger(d,f,b,c,k,e,g,l))})),t(b,"keyup",s.hitch(this,function(){p._obj==k&&p.stop()}))];return{remove:function(){r.forEach(d,function(a){a.remove()})}}},addMouseListener:function(b,k,f,c,e,g){var q=[t(b,"mousedown",s.hitch(this,function(a){a.preventDefault();p.trigger(a,k,b,f,b,c,e,g)})),t(b,"mouseup",s.hitch(this,
function(a){this._obj&&a.preventDefault();p.stop()})),t(b,"mouseout",s.hitch(this,function(a){this._obj&&a.preventDefault();p.stop()})),t(b,"dblclick",s.hitch(this,function(a){a.preventDefault();9>l("ie")&&(p.trigger(a,k,b,f,b,c,e,g),setTimeout(s.hitch(this,p.stop),50))}))];return{remove:function(){r.forEach(q,function(a){a.remove()})}}},addListener:function(b,k,f,c,e,g,l,a){var d=[this.addKeyListener(k,f,c,e,g,l,a),this.addMouseListener(b,c,e,g,l,a)];return{remove:function(){r.forEach(d,function(a){a.remove()})}}}};
return p})},"dojo/date":function(){define(["./has","./_base/lang"],function(r,u){var s={getDaysInMonth:function(r){var l=r.getMonth();return 1==l&&s.isLeapYear(r)?29:[31,28,31,30,31,30,31,31,30,31,30,31][l]},isLeapYear:function(r){r=r.getFullYear();return!(r%400)||!(r%4)&&!!(r%100)},getTimezoneName:function(r){var l=r.toString(),b="",p=l.indexOf("(");if(-1<p)b=l.substring(++p,l.indexOf(")"));else if(p=/([A-Z\/]+) \d{4}$/,l=l.match(p))b=l[1];else if(l=r.toLocaleString(),p=/ ([A-Z\/]+)$/,l=l.match(p))b=
l[1];return"AM"==b||"PM"==b?"":b},compare:function(r,l,b){r=new Date(+r);l=new Date(+(l||new Date));"date"==b?(r.setHours(0,0,0,0),l.setHours(0,0,0,0)):"time"==b&&(r.setFullYear(0,0,0),l.setFullYear(0,0,0));return r>l?1:r<l?-1:0},add:function(r,l,b){var p=new Date(+r),m=!1,k="Date";switch(l){case "day":break;case "weekday":var f;(l=b%5)?f=parseInt(b/5):(l=0<b?5:-5,f=0<b?(b-5)/5:(b+5)/5);var c=r.getDay(),e=0;6==c&&0<b?e=1:0==c&&0>b&&(e=-1);c+=l;if(0==c||6==c)e=0<b?2:-2;b=7*f+l+e;break;case "year":k=
"FullYear";m=!0;break;case "week":b*=7;break;case "quarter":b*=3;case "month":m=!0;k="Month";break;default:k="UTC"+l.charAt(0).toUpperCase()+l.substring(1)+"s"}if(k)p["set"+k](p["get"+k]()+b);m&&p.getDate()<r.getDate()&&p.setDate(0);return p},difference:function(r,l,b){l=l||new Date;b=b||"day";var p=l.getFullYear()-r.getFullYear(),m=1;switch(b){case "quarter":r=r.getMonth();l=l.getMonth();r=Math.floor(r/3)+1;l=Math.floor(l/3)+1;m=l+4*p-r;break;case "weekday":p=Math.round(s.difference(r,l,"day"));
b=parseInt(s.difference(r,l,"week"));m=p%7;if(0==m)p=5*b;else{var k=0,f=r.getDay();l=l.getDay();b=parseInt(p/7);m=p%7;r=new Date(r);r.setDate(r.getDate()+7*b);r=r.getDay();if(0<p)switch(!0){case 6==f:k=-1;break;case 0==f:k=0;break;case 6==l:k=-1;break;case 0==l:k=-2;break;case 5<r+m:k=-2}else if(0>p)switch(!0){case 6==f:k=0;break;case 0==f:k=1;break;case 6==l:k=2;break;case 0==l:k=1;break;case 0>r+m:k=2}p=p+k-2*b}m=p;break;case "year":m=p;break;case "month":m=l.getMonth()-r.getMonth()+12*p;break;
case "week":m=parseInt(s.difference(r,l,"day")/7);break;case "day":m/=24;case "hour":m/=60;case "minute":m/=60;case "second":m/=1E3;case "millisecond":m*=l.getTime()-r.getTime()}return Math.round(m)}};u.mixin(u.getObject("dojo.date",!0),s);return s})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(r,u,s,t,l,b,p,m,k){function f(a,b,c,e){return e.replace(/([a-z])\1*/ig,
function(f){var k,l,m=f.charAt(0);f=f.length;var q=["abbr","wide","narrow"];switch(m){case "G":k=b[4>f?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":k=a.getFullYear();switch(f){case 1:break;case 2:if(!c.fullYear){k=String(k);k=k.substr(k.length-2);break}default:l=!0}break;case "Q":case "q":k=Math.ceil((a.getMonth()+1)/3);l=!0;break;case "M":case "L":k=a.getMonth();3>f?(k+=1,l=!0):(m=["months","L"==m?"standAlone":"format",q[f-3]].join("-"),k=b[m][k]);break;case "w":k=g._getWeekOfYear(a,
0);l=!0;break;case "d":k=a.getDate();l=!0;break;case "D":k=g._getDayOfYear(a);l=!0;break;case "e":case "c":if(k=a.getDay(),2>f){k=(k-t.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":k=a.getDay();3>f?(k+=1,l=!0):(m=["days","c"==m?"standAlone":"format",q[f-3]].join("-"),k=b[m][k]);break;case "a":m=12>a.getHours()?"am":"pm";k=c[m]||b["dayPeriods-format-wide-"+m];break;case "h":case "H":case "K":case "k":l=a.getHours();switch(m){case "h":k=l%12||12;break;case "H":k=l;break;case "K":k=l%12;break;case "k":k=
l||24}l=!0;break;case "m":k=a.getMinutes();l=!0;break;case "s":k=a.getSeconds();l=!0;break;case "S":k=Math.round(a.getMilliseconds()*Math.pow(10,f-3));l=!0;break;case "v":case "z":if(k=g._getZone(a,!0,c))break;f=4;case "Z":m=g._getZone(a,!1,c);m=[0>=m?"+":"-",p.pad(Math.floor(Math.abs(m)/60),2),p.pad(Math.abs(m)%60,2)];4==f&&(m.splice(0,0,"GMT"),m.splice(3,0,":"));k=m.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+e);}l&&(k=p.pad(k,f));return k})}function c(a,
b,c,e){var f=function(a){return a};b=b||f;c=c||f;e=e||f;var g=a.match(/(''|[^'])+/g),k="'"==a.charAt(0);u.forEach(g,function(a,e){a?(g[e]=(k?c:b)(a.replace(/''/g,"'")),k=!k):g[e]=""});return e(g.join(""))}function e(a,d,c,e){e=b.escapeString(e);c.strict||(e=e.replace(" a"," ?a"));return e.replace(/([a-z])\1*/ig,function(b){var e;e=b.charAt(0);var f=b.length,g="",k="";c.strict?(1<f&&(g="0{"+(f-1)+"}"),2<f&&(k="0{"+(f-2)+"}")):(g="0?",k="0{0,2}");switch(e){case "y":e="\\d{2,4}";break;case "M":case "L":e=
2<f?"\\S+?":"1[0-2]|"+g+"[1-9]";break;case "D":e="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+g+"[1-9][0-9]|"+k+"[1-9]";break;case "d":e="3[01]|[12]\\d|"+g+"[1-9]";break;case "w":e="[1-4][0-9]|5[0-3]|"+g+"[1-9]";break;case "E":case "e":case "c":e=".+?";break;case "h":e="1[0-2]|"+g+"[1-9]";break;case "k":e="1[01]|"+g+"\\d";break;case "H":e="1\\d|2[0-3]|"+g+"\\d";break;case "K":e="1\\d|2[0-4]|"+g+"[1-9]";break;case "m":case "s":e="[0-5]\\d";break;case "S":e="\\d{"+f+"}";break;case "a":f=c.am||d["dayPeriods-format-wide-am"];
g=c.pm||d["dayPeriods-format-wide-pm"];e=f+"|"+g;c.strict||(f!=f.toLowerCase()&&(e+="|"+f.toLowerCase()),g!=g.toLowerCase()&&(e+="|"+g.toLowerCase()),-1!=e.indexOf(".")&&(e+="|"+e.replace(/\./g,"")));e=e.replace(/\./g,"\\.");break;default:e=".*"}a&&a.push(b);return"("+e+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var g={};r.setObject(k.id.replace(/\//g,"."),g);g._getZone=function(a,b,c){return b?s.getTimezoneName(a):a.getTimezoneOffset()};g.format=function(a,b){b=b||{};var e=l.normalizeLocale(b.locale),
k=b.formatLength||"short",e=g._getGregorianBundle(e),m=[],p=r.hitch(this,f,a,e,b);if("year"==b.selector)return c(e["dateFormatItem-yyyy"]||"yyyy",p);var q;"date"!=b.selector&&(q=b.timePattern||e["timeFormat-"+k])&&m.push(c(q,p));"time"!=b.selector&&(q=b.datePattern||e["dateFormat-"+k])&&m.push(c(q,p));return 1==m.length?m[0]:e["dateTimeFormat-"+k].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return m[b]})};g.regexp=function(a){return g._parseInfo(a).regexp};g._parseInfo=function(a){a=a||{};
var b=l.normalizeLocale(a.locale),b=g._getGregorianBundle(b),f=a.formatLength||"short",k=a.datePattern||b["dateFormat-"+f],m=a.timePattern||b["timeFormat-"+f],f="date"==a.selector?k:"time"==a.selector?m:b["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,b){return[m,k][b]}),p=[];return{regexp:c(f,r.hitch(this,e,p,b,a)),tokens:p,bundle:b}};g.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,e=g._parseInfo(b),f=e.tokens,k=e.bundle,c=RegExp("^"+e.regexp.replace(c,"")+"$",e.strict?"":"i").exec(a&&
a.replace(c,""));if(!c)return null;var l=["abbr","wide","narrow"],m=[1970,0,1,0,0,0,0],p="",c=u.every(c,function(a,c){if(!c)return!0;var e=f[c-1],g=e.length,e=e.charAt(0);switch(e){case "y":if(2!=g&&b.strict)m[0]=a;else if(100>a)a=Number(a),e=""+(new Date).getFullYear(),g=100*e.substring(0,2),e=Math.min(Number(e.substring(2,4))+20,99),m[0]=a<e?g+a:g-100+a;else{if(b.strict)return!1;m[0]=a}break;case "M":case "L":if(2<g){if(g=k["months-"+("L"==e?"standAlone":"format")+"-"+l[g-3]].concat(),b.strict||
(a=a.replace(".","").toLowerCase(),g=u.map(g,function(a){return a.replace(".","").toLowerCase()})),a=u.indexOf(g,a),-1==a)return!1}else a--;m[1]=a;break;case "E":case "e":case "c":g=k["days-"+("c"==e?"standAlone":"format")+"-"+l[g-3]].concat();b.strict||(a=a.toLowerCase(),g=u.map(g,function(a){return a.toLowerCase()}));a=u.indexOf(g,a);if(-1==a)return!1;break;case "D":m[1]=0;case "d":m[2]=a;break;case "a":g=b.am||k["dayPeriods-format-wide-am"];e=b.pm||k["dayPeriods-format-wide-pm"];if(!b.strict){var n=
/\./g;a=a.replace(n,"").toLowerCase();g=g.replace(n,"").toLowerCase();e=e.replace(n,"").toLowerCase()}if(b.strict&&a!=g&&a!=e)return!1;p=a==e?"p":a==g?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;m[3]=a;break;case "m":m[4]=a;break;case "s":m[5]=a;break;case "S":m[6]=a}return!0}),e=+m[3];"p"===p&&12>e?m[3]=e+12:"a"===p&&12==e&&(m[3]=0);e=new Date(m[0],m[1],m[2],m[3],m[4],m[5],m[6]);b.strict&&e.setFullYear(m[0]);var q=f.join(""),r=-1!=q.indexOf("d"),q=-1!=q.indexOf("M");
if(!c||q&&e.getMonth()>m[1]||r&&e.getDate()>m[2])return null;if(q&&e.getMonth()<m[1]||r&&e.getDate()<m[2])e=s.add(e,"hour",1);return e};var q=[];g.addCustomFormats=function(a,b){q.push({pkg:a,name:b})};g._getGregorianBundle=function(a){var b={};u.forEach(q,function(c){c=l.getLocalization(c.pkg,c.name,a);b=r.mixin(b,c)},this);return b};g.addCustomFormats(k.id.replace(/\/date\/locale$/,".cldr"),"gregorian");g.getNames=function(a,b,c,e){var f;e=g._getGregorianBundle(e);a=[a,c,b];"standAlone"==c&&(c=
a.join("-"),f=e[c],1==f[0]&&(f=void 0));a[1]="format";return(f||e[a.join("-")]).concat()};g.isWeekend=function(a,b){var c=t.getWeekend(b),e=(a||new Date).getDay();c.end<c.start&&(c.end+=7,e<c.start&&(e+=7));return e>=c.start&&e<=c.end};g._getDayOfYear=function(a){return s.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};g._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),e=(c-b+7)%7,e=Math.floor((g._getDayOfYear(a)+e-1)/7);c==b&&e++;
return e};return g})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(r,u){var s={};r.setObject("dojo.cldr.supplemental",s);s.getFirstDayOfWeek=function(r){r={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,
pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[s._region(r)];return void 0===r?1:r};s._region=function(r){r=u.normalizeLocale(r);r=r.split("-");var l=r[1];l?4==l.length&&(l=r[2]):l={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",
eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",
ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",
uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",
crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",
khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",
nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",
teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[r[0]];return l};s.getWeekend=function(r){var l=s._region(r);r={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[l];l={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,
iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[l];void 0===r&&(r=6);void 0===l&&(l=0);return{start:r,end:l}};return s})},"dojox/widget/_CalendarDay":function(){define(["dojo/_base/declare","./_CalendarDayView"],function(r,u){return r("dojox.widget._CalendarDay",null,{parent:null,constructor:function(){this._addView(u)}})})},"dojox/widget/_CalendarDayView":function(){define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/event dojo/date dojo/date/locale dojo/text!./Calendar/CalendarDay.html dojo/cldr/supplemental dojo/NodeList-dom".split(" "),
function(r,u,s,t,l,b,p,m,k,f){return r("dojox.widget._CalendarDayView",[u,s],{templateString:k,datePart:"month",dayWidth:"narrow",postCreate:function(){this.cloneClass(".dijitCalendarDayLabelTemplate",6);this.cloneClass(".dijitCalendarDateTemplate",6);this.cloneClass(".dijitCalendarWeekTemplate",5);var b=m.getNames("days",this.dayWidth,"standAlone",this.getLang()),e=f.getFirstDayOfWeek(this.getLang());t(".dijitCalendarDayLabel",this.domNode).forEach(function(f,k){this._setText(f,b[(k+e)%7])},this)},
onDisplay:function(){this._addedFx||(this._addedFx=!0,this.addFx(".dijitCalendarDateTemplate div",this.domNode))},_onDayClick:function(c){if("undefined"!=typeof c.target._date){var e=new Date(this.get("displayMonth")),f=c.target.parentNode;(f=l.contains(f,"dijitCalendarPreviousMonth")?-1:l.contains(f,"dijitCalendarNextMonth")?1:0)&&(e=p.add(e,"month",f));e.setDate(c.target._date);this.isDisabledDate(e)?b.stop(c):this.parent._onDateSelected(e)}},_setValueAttr:function(b){this._populateDays()},_populateDays:function(){var b=
new Date(this.get("displayMonth"));b.setDate(1);var e=b.getDay(),g=p.getDaysInMonth(b),k=p.getDaysInMonth(p.add(b,"month",-1)),a=new Date,d=this.get("value"),l=f.getFirstDayOfWeek(this.getLang());l>e&&(l-=7);var v=p.compare,r=this._lastDate,r=null==r||r.getMonth()!=b.getMonth()||r.getFullYear()!=b.getFullYear();this._lastDate=b;r?(t(".dijitCalendarDateTemplate",this.domNode).forEach(function(f,m){m+=l;var r=new Date(b),y,s="dijitCalendar",u=0;m<e?(y=k-e+m+1,u=-1,s+="Previous"):m>=e+g?(y=m-e-g+1,u=
1,s+="Next"):(y=m-e+1,s+="Current");u&&(r=p.add(r,"month",u));r.setDate(y);v(r,a,"date")||(s="dijitCalendarCurrentDate "+s);v(r,d,"date")||v(r,d,"month")||v(r,d,"year")||(s="dijitCalendarSelectedDate "+s);this.isDisabledDate(r,this.getLang())&&(s=" dijitCalendarDisabledDate "+s);(y=this.getClassForDate(r,this.getLang()))&&(s=y+" "+s);f.className=s+"Month dijitCalendarDateTemplate";f.dijitDateValue=r.valueOf();s=t(".dijitCalendarDateLabel",f)[0];this._setText(s,r.getDate());s._date=s.parentNode._date=
r.getDate()},this),r=m.getNames("months","wide","standAlone",this.getLang()),this._setText(this.monthLabelNode,r[b.getMonth()]),this._setText(this.yearLabelNode,b.getFullYear())):t(".dijitCalendarDateTemplate",this.domNode).removeClass("dijitCalendarSelectedDate").filter(function(a){return-1<a.className.indexOf("dijitCalendarCurrent")&&a._date==d.getDate()}).addClass("dijitCalendarSelectedDate")}})})},"dojox/widget/_CalendarView":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-construct dojo/query dojo/date dojo/_base/window".split(" "),
function(r,u,s,t,l,b){return r("dojox.widget._CalendarView",u,{headerClass:"",useHeader:!0,cloneClass:function(b,l,k){var f=t(b,this.domNode)[0];if(k)for(k=t(b,this.domNode)[0],b=0;b<l;b++)f.parentNode.insertBefore(f.cloneNode(!0),k);else for(b=0;b<l;b++)f.parentNode.appendChild(f.cloneNode(!0))},_setText:function(l,m){l.innerHTML!=m&&(s.empty(l),l.appendChild(b.doc.createTextNode(m)))},getHeader:function(){return this.header||(this.header=s.create("span",{"class":this.headerClass}))},onValueSelected:function(b){},
adjustDate:function(b,m){return l.add(b,this.datePart,m)},onDisplay:function(){},onBeforeDisplay:function(){},onBeforeUnDisplay:function(){}})})},"dojox/widget/_CalendarMonthYear":function(){define(["dojo/_base/declare","./_CalendarMonthYearView"],function(r,u){return r("dojox.widget._CalendarMonthYear",null,{constructor:function(){this._addView(u)}})})},"dojox/widget/_CalendarMonthYearView":function(){define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/connect dojo/_base/event dojo/_base/lang dojo/date/locale dojo/text!./Calendar/CalendarMonthYear.html".split(" "),
function(r,u,s,t,l,b,p,m,k,f){return r("dojox.widget._CalendarMonthYearView",[u,s],{templateString:f,datePart:"year",displayedYears:10,useHeader:!1,postCreate:function(){this.cloneClass(".dojoxCal-MY-G-Template",5,".dojoxCal-MY-btns");this.monthContainer=this.yearContainer=this.myContainer;t(".dojoxCalendarYearLabel",this.myContainer).forEach(function(b,e){var f="dojoxCalendarIncrease";switch(e){case 0:f="dojoxCalendarDecrease";case 1:l.remove(b,"dojoxCalendarYearLabel"),l.add(b,f)}});this._decBtn=
t(".dojoxCalendarDecrease",this.myContainer)[0];this._incBtn=t(".dojoxCalendarIncrease",this.myContainer)[0];t(".dojoxCal-MY-M-Template",this.domNode).filter(function(b){return 1==b.cellIndex}).addClass("dojoxCal-MY-M-last");b.connect(this,"onBeforeDisplay",m.hitch(this,function(){this._cachedDate=new Date(this.get("value").getTime());this._populateYears(this._cachedDate.getFullYear());this._populateMonths();this._updateSelectedMonth();this._updateSelectedYear()}));b.connect(this,"_populateYears",
m.hitch(this,function(){this._updateSelectedYear()}));b.connect(this,"_populateMonths",m.hitch(this,function(){this._updateSelectedMonth()}));this._cachedDate=this.get("value");this._populateYears();this._populateMonths();this.addFx(".dojoxCalendarMonthLabel,.dojoxCalendarYearLabel ",this.myContainer)},_setValueAttr:function(b){b&&b.getFullYear()&&this._populateYears(b.getFullYear())},getHeader:function(){return null},_getMonthNames:function(b){return this._monthNames=this._monthNames||k.getNames("months",
b,"standAlone",this.getLang())},_populateMonths:function(){var b,e=this._getMonthNames("abbr"),f=this.get("value").getFullYear(),k=e[this.get("value").getMonth()],a=this.get("displayedYear");t(".dojoxCalendarMonthLabel",this.monthContainer).forEach(m.hitch(this,function(d,n){this._setText(d,e[n]);b=k===e[n]&&f===a;l.toggle(d.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],b)}));var d=this.get("constraints");if(d){(new Date).setFullYear(this._year);var n=-1,p=12;if(d.min){var r=
d.min.getFullYear();r>this._year?n=12:r==this._year&&(n=d.min.getMonth())}d.max&&(r=d.max.getFullYear(),r<this._year?p=-1:r==this._year&&(p=d.max.getMonth()));t(".dojoxCalendarMonthLabel",this.monthContainer).forEach(m.hitch(this,function(a,b){l[b<n||b>p?"add":"remove"](a,"dijitCalendarDisabledDate")}))}},_populateYears:function(b){var e,f=this.get("constraints"),k=this.get("value").getFullYear(),a=b||k,d=a-Math.floor(this.displayedYears/2);b=f&&f.min?f.min.getFullYear():d-1E4;this._displayedYear=
a;var a=t(".dojoxCalendarYearLabel",this.yearContainer),n=f&&f.max?f.max.getFullYear()-d:a.length,p;a.forEach(m.hitch(this,function(a,b){b<=n&&this._setText(a,d+b);p=d+b==k;l.toggle(a.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],p);l.toggle(a,"dijitCalendarDisabledDate",b>n);e=d+b==k;l.toggle(a.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],e)}));this._incBtn&&l.toggle(this._incBtn,"dijitCalendarDisabledDate",n<a.length);this._decBtn&&l.toggle(this._decBtn,
"dijitCalendarDisabledDate",b>=d);this.getHeader()&&this._setText(this.getHeader(),d+" - "+(d+11))},_updateSelectedYear:function(){this._year=String((this._cachedDate||this.get("value")).getFullYear());this._updateSelectedNode(".dojoxCalendarYearLabel",m.hitch(this,function(b){return null!==this._year&&b.innerHTML==this._year}))},_updateSelectedMonth:function(){var b=(this._cachedDate||this.get("value")).getMonth();this._month=b;this._updateSelectedNode(".dojoxCalendarMonthLabel",function(e,f){return f==
b})},_updateSelectedNode:function(b,e){t(b,this.domNode).forEach(function(b,a,d){l.toggle(b.parentNode,"dijitCalendarSelectedDate",e(b,a,d))});var f=t(".dojoxCal-MY-M-Template div",this.myContainer).filter(function(b){return l.contains(b.parentNode,"dijitCalendarSelectedDate")})[0];f&&(f=l.contains(f,"dijitCalendarDisabledDate"),l.toggle(this.okBtn,"dijitDisabled",f))},onClick:function(b){function e(e){return l.contains(b.target,e)}if(e("dijitCalendarDisabledDate"))return p.stop(b),!1;if(e("dojoxCalendarMonthLabel"))this._month=
b.target.parentNode.cellIndex+2*b.target.parentNode.parentNode.rowIndex,this._cachedDate.setMonth(this._month),this._updateSelectedMonth();else if(e("dojoxCalendarYearLabel"))this._year=Number(b.target.innerHTML),this._cachedDate.setYear(this._year),this._populateMonths(),this._updateSelectedYear();else return e("dojoxCalendarDecrease")?this._populateYears(this._displayedYear-10):e("dojoxCalendarIncrease")&&this._populateYears(this._displayedYear+10),!0;p.stop(b);return!1},onOk:function(b){p.stop(b);
if(l.contains(this.okBtn,"dijitDisabled"))return!1;this.onValueSelected(this._cachedDate);return!1},onCancel:function(b){p.stop(b);this.onValueSelected(this.get("value"));return!1}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(r,u,s){u.switchTo(s);return u})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(r,u,s,t,l,b,p,m,k){var f=u.getObject("dojox.gfx",!0),c=f._base={};f._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};f._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};f._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};c._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,c;t("ie")&&(c=l.doc.documentElement.style.fontSize||"",c||(l.doc.documentElement.style.fontSize="100%"));var e=m.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},l.body());for(b in a)e.style.fontSize=b,a[b]=16*Math.round(12*e.offsetHeight/16)/12/1E3;
t("ie")&&(l.doc.documentElement.style.fontSize=c);l.body().removeChild(e);return a};var e=null;c._getCachedFontMeasurements=function(a){if(a||!e)e=c._getFontMeasurements();return e};var g=null,q={};c._getTextBox=function(a,b,c){var e,f,p=arguments.length,r;g||(g=m.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},l.body()));e=g;e.className="";f=e.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<p&&b)for(r in b)r in q||(f[r]=b[r]);2<p&&c&&(e.className=
c);e.innerHTML=a;e.getBoundingClientRect?(f=e.getBoundingClientRect(),f={l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):f=k.getMarginBox(e);e.innerHTML="";return f};c._computeTextLocation=function(a,b,c,e){var f={};switch(a.align){case "end":f.x=a.x-b;break;case "middle":f.x=a.x-b/2;break;default:f.x=a.x}f.y=a.y-c*(e?0.75:1);return f};c._computeTextBoundingBox=function(a){if(!f._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var e=a.getFont()||f.defaultFont;
a=a.getTextWidth();e=f.normalizedLength(e.size);b=c._computeTextLocation(b,a,e,!0);return{x:b.x,y:b.y,width:a,height:e}};c._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var a=0;c._getUniqueId=function(){var b;do b=r._scopeName+"xUnique"+ ++a;while(p.byId(b));return b};c._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};u.mixin(f,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",
points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",
color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=
a[b];if(c)return new c;c=a[b]=new Function;c.prototype=f["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof s?a:new s(a)},normalizeParameters:function(a,b){var c;if(b){var e={};for(c in a)c in b&&!(c in e)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return u.delegate(a);var e={};for(c in a)c in e||(e[c]=u.clone(c in b?b[c]:a[c]));return e},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var e=c.indexOf(".");
0<=e&&5<c.length-e&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=f.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var e=4;0>c&&("/"==a[4]?e=6:"/"==a[4].charAt(0)&&(e=5));e<a.length&&(b.family=a.slice(e).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return f._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(a){return a*f.px_in_pt()},px2pt:function(a){return a/f.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=f.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*f.mm_in_pt*b;case "cm":return c*f.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var c="string"==typeof a?f[a]:a;c&&(b.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(a){f[a]=c[a]}),"string"==typeof a?f.renderer=a:b.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return f.renderer=f[a]&&f[a].Surface===f.Surface?a:null}))}});return f})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff",
"dojo/_base/window","dojo/_base/config"],function(r,u,s,t,l){var b=null;s.add("vml",function(b,l,k){k.innerHTML='<v:shape adj="1"/>';b="adj"in k.firstChild;k.innerHTML="";return b});return{load:function(p,m,k){function f(){m(["dojox/gfx/"+c],function(a){r.renderer=c;b=a;k(a)})}if(b&&"force"!=p)k(b);else{var c=l.forceGfxRenderer;p=!c&&(u.isString(l.gfxRenderer)?l.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var e,g;!c&&p.length;)switch(p.shift()){case "svg":"SVGAngle"in t.global&&(c="svg");
break;case "vml":s("vml")&&(c="vml");break;case "silverlight":try{s("ie")?(e=new ActiveXObject("AgControl.AgControl"))&&e.IsVersionSupported("1.0")&&(g=!0):navigator.plugins["Silverlight Plug-In"]&&(g=!0)}catch(q){g=!1}finally{e=null}g&&(c="silverlight");break;case "canvas":t.global.CanvasRenderingContext2D&&(c="canvas")}"canvas"===c&&!1!==l.canvasEvents&&(c="canvasWithEvents");"svg"==c&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(f):f()}}}})},"dojox/gfx/path":function(){define(["./_base",
"dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(r,u,s,t,l){l=s("dojox.gfx.path.Path",l.Shape,{constructor:function(b){this.shape=u.clone(r.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=b;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();
return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var b=this.bbox,l=this._getRealMatrix();this.bbox=null;for(var m=0,k=this.segments.length;m<k;++m)this._updateWithSegment(this.segments[m],l);l=this.bbox;this.bbox=b;return this.tbbox=l?[{x:l.l,y:l.t},{x:l.r,y:l.t},{x:l.r,y:l.b},{x:l.l,y:l.b}]:null},getLastPosition:function(){this._confirmSegmented();
return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,l,m){m&&(l=t.multiplyPoint(m,b,l),b=l.x,l=l.y);this.bbox&&"l"in this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>l&&(this.bbox.t=l),this.bbox.b<l&&(this.bbox.b=l)):this.bbox={l:b,b:l,r:b,t:l}},_updateWithSegment:function(b,l){var m=b.args,k=m.length,f;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(f=
0;f<k;f+=2)this._updateBBox(m[f],m[f+1],l);this.last.x=m[k-2];this.last.y=m[k-1];this.absolute=!0;break;case "H":for(f=0;f<k;++f)this._updateBBox(m[f],this.last.y,l);this.last.x=m[k-1];this.absolute=!0;break;case "V":for(f=0;f<k;++f)this._updateBBox(this.last.x,m[f],l);this.last.y=m[k-1];this.absolute=!0;break;case "m":f=0;"x"in this.last||(this._updateBBox(this.last.x=m[0],this.last.y=m[1],l),f=2);for(;f<k;f+=2)this._updateBBox(this.last.x+=m[f],this.last.y+=m[f+1],l);this.absolute=!1;break;case "l":case "t":for(f=
0;f<k;f+=2)this._updateBBox(this.last.x+=m[f],this.last.y+=m[f+1],l);this.absolute=!1;break;case "h":for(f=0;f<k;++f)this._updateBBox(this.last.x+=m[f],this.last.y,l);this.absolute=!1;break;case "v":for(f=0;f<k;++f)this._updateBBox(this.last.x,this.last.y+=m[f],l);this.absolute=!1;break;case "c":for(f=0;f<k;f+=6)this._updateBBox(this.last.x+m[f],this.last.y+m[f+1],l),this._updateBBox(this.last.x+m[f+2],this.last.y+m[f+3],l),this._updateBBox(this.last.x+=m[f+4],this.last.y+=m[f+5],l);this.absolute=
!1;break;case "s":case "q":for(f=0;f<k;f+=4)this._updateBBox(this.last.x+m[f],this.last.y+m[f+1],l),this._updateBBox(this.last.x+=m[f+2],this.last.y+=m[f+3],l);this.absolute=!1;break;case "A":for(f=0;f<k;f+=7)this._updateBBox(m[f+5],m[f+6],l);this.last.x=m[k-2];this.last.y=m[k-1];this.absolute=!0;break;case "a":for(f=0;f<k;f+=7)this._updateBBox(this.last.x+=m[f+5],this.last.y+=m[f+6],l);this.absolute=!1}var c=[b.action];for(f=0;f<k;++f)c.push(r.formatNumber(m[f],!0));if("string"==typeof this.shape.path)this.shape.path+=
c.join("");else for(f=0,k=c.length;f<k;++f)this.shape.path.push(c[f])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,l){this.tbbox=null;var m=this._validSegments[b.toLowerCase()];"number"==typeof m&&(m?l.length>=m&&(m={action:b,args:l.slice(0,l.length-l.length%m)},this.segments.push(m),this._updateWithSegment(m)):(m={action:b,args:[]},this.segments.push(m),this._updateWithSegment(m)))},_collectArgs:function(b,l){for(var m=0;m<l.length;++m){var k=l[m];"boolean"==
typeof k?b.push(k?1:0):"number"==typeof k?b.push(k):k instanceof Array?this._collectArgs(b,k):"x"in k&&"y"in k&&b.push(k.x,k.y)}},moveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?
"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=
[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"T":"t",b);return this},arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=
this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(b){b=u.isArray(b)?b:b.match(r.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var l="",m=[],k=b.length,f=0;f<k;++f){var c=b[f],e=parseFloat(c);isNaN(e)?(l&&this._pushSegment(l,m),m=[],l=c):m.push(e)}this._pushSegment(l,m)}},setShape:function(b){this.inherited(arguments,["string"==typeof b?{path:b}:b]);this.segmented=!1;this.segments=
[];r.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});s=s("dojox.gfx.path.TextPath",l,{constructor:function(b){"text"in this||(this.text=u.clone(r.defaultTextPath));"fontStyle"in this||(this.fontStyle=u.clone(r.defaultFont))},getText:function(){return this.text},setText:function(b){this.text=r.makeParameters(this.text,"string"==typeof b?{text:b}:b);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?
r.splitFontString(b):r.makeParameters(r.defaultFont,b);this._setFont();return this}});return r.path={Path:l,TextPath:s}})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(r,u){var s=r.matrix={},t={};s._degToRad=function(l){return t[l]||(t[l]=Math.PI*l/180)};s._radToDeg=function(l){return l/Math.PI*180};s.Matrix2D=function(l){if(l)if("number"==typeof l)this.xx=this.yy=l;else if(l instanceof Array){if(0<l.length){for(var b=s.normalize(l[0]),p=1;p<l.length;++p){var m=b,k=
s.normalize(l[p]),b=new s.Matrix2D;b.xx=m.xx*k.xx+m.xy*k.yx;b.xy=m.xx*k.xy+m.xy*k.yy;b.yx=m.yx*k.xx+m.yy*k.yx;b.yy=m.yx*k.xy+m.yy*k.yy;b.dx=m.xx*k.dx+m.xy*k.dy+m.dx;b.dy=m.yx*k.dx+m.yy*k.dy+m.dy}u.mixin(this,b)}}else u.mixin(this,l)};u.extend(s.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});u.mixin(s,{identity:new s.Matrix2D,flipX:new s.Matrix2D({xx:-1}),flipY:new s.Matrix2D({yy:-1}),flipXY:new s.Matrix2D({xx:-1,yy:-1}),translate:function(l,b){return 1<arguments.length?new s.Matrix2D({dx:l,dy:b}):new s.Matrix2D({dx:l.x,
dy:l.y})},scale:function(l,b){return 1<arguments.length?new s.Matrix2D({xx:l,yy:b}):"number"==typeof l?new s.Matrix2D({xx:l,yy:l}):new s.Matrix2D({xx:l.x,yy:l.y})},rotate:function(l){var b=Math.cos(l);l=Math.sin(l);return new s.Matrix2D({xx:b,xy:-l,yx:l,yy:b})},rotateg:function(l){return s.rotate(s._degToRad(l))},skewX:function(l){return new s.Matrix2D({xy:Math.tan(l)})},skewXg:function(l){return s.skewX(s._degToRad(l))},skewY:function(l){return new s.Matrix2D({yx:Math.tan(l)})},skewYg:function(l){return s.skewY(s._degToRad(l))},
reflect:function(l,b){1==arguments.length&&(b=l.y,l=l.x);var p=l*l,m=b*b,k=p+m,f=2*l*b/k;return new s.Matrix2D({xx:2*p/k-1,xy:f,yx:f,yy:2*m/k-1})},project:function(l,b){1==arguments.length&&(b=l.y,l=l.x);var p=l*l,m=b*b,k=p+m,f=l*b/k;return new s.Matrix2D({xx:p/k,xy:f,yx:f,yy:m/k})},normalize:function(l){return l instanceof s.Matrix2D?l:new s.Matrix2D(l)},isIdentity:function(l){return 1==l.xx&&0==l.xy&&0==l.yx&&1==l.yy&&0==l.dx&&0==l.dy},clone:function(l){var b=new s.Matrix2D,p;for(p in l)"number"==
typeof l[p]&&"number"==typeof b[p]&&b[p]!=l[p]&&(b[p]=l[p]);return b},invert:function(l){l=s.normalize(l);var b=l.xx*l.yy-l.xy*l.yx;return l=new s.Matrix2D({xx:l.yy/b,xy:-l.xy/b,yx:-l.yx/b,yy:l.xx/b,dx:(l.xy*l.dy-l.yy*l.dx)/b,dy:(l.yx*l.dx-l.xx*l.dy)/b})},_multiplyPoint:function(l,b,p){return{x:l.xx*b+l.xy*p+l.dx,y:l.yx*b+l.yy*p+l.dy}},multiplyPoint:function(l,b,p){l=s.normalize(l);return"number"==typeof b&&"number"==typeof p?s._multiplyPoint(l,b,p):s._multiplyPoint(l,b.x,b.y)},multiplyRectangle:function(l,
b){var p=s.normalize(l);b=b||{x:0,y:0,width:0,height:0};if(s.isIdentity(p))return{x:b.x,y:b.y,width:b.width,height:b.height};var m=s.multiplyPoint(p,b.x,b.y),k=s.multiplyPoint(p,b.x,b.y+b.height),f=s.multiplyPoint(p,b.x+b.width,b.y),c=s.multiplyPoint(p,b.x+b.width,b.y+b.height),p=Math.min(m.x,k.x,f.x,c.x),e=Math.min(m.y,k.y,f.y,c.y),g=Math.max(m.x,k.x,f.x,c.x),m=Math.max(m.y,k.y,f.y,c.y);return{x:p,y:e,width:g-p,height:m-e}},multiply:function(l){for(var b=s.normalize(l),p=1;p<arguments.length;++p){var m=
b,k=s.normalize(arguments[p]),b=new s.Matrix2D;b.xx=m.xx*k.xx+m.xy*k.yx;b.xy=m.xx*k.xy+m.xy*k.yy;b.yx=m.yx*k.xx+m.yy*k.yx;b.yy=m.yx*k.xy+m.yy*k.yy;b.dx=m.xx*k.dx+m.xy*k.dy+m.dx;b.dy=m.yx*k.dx+m.yy*k.dy+m.dy}return b},_sandwich:function(l,b,p){return s.multiply(s.translate(b,p),l,s.translate(-b,-p))},scaleAt:function(l,b,p,m){switch(arguments.length){case 4:return s._sandwich(s.scale(l,b),p,m);case 3:return"number"==typeof p?s._sandwich(s.scale(l),b,p):s._sandwich(s.scale(l,b),p.x,p.y)}return s._sandwich(s.scale(l),
b.x,b.y)},rotateAt:function(l,b,p){return 2<arguments.length?s._sandwich(s.rotate(l),b,p):s._sandwich(s.rotate(l),b.x,b.y)},rotategAt:function(l,b,p){return 2<arguments.length?s._sandwich(s.rotateg(l),b,p):s._sandwich(s.rotateg(l),b.x,b.y)},skewXAt:function(l,b,p){return 2<arguments.length?s._sandwich(s.skewX(l),b,p):s._sandwich(s.skewX(l),b.x,b.y)},skewXgAt:function(l,b,p){return 2<arguments.length?s._sandwich(s.skewXg(l),b,p):s._sandwich(s.skewXg(l),b.x,b.y)},skewYAt:function(l,b,p){return 2<arguments.length?
s._sandwich(s.skewY(l),b,p):s._sandwich(s.skewY(l),b.x,b.y)},skewYgAt:function(l,b,p){return 2<arguments.length?s._sandwich(s.skewYg(l),b,p):s._sandwich(s.skewYg(l),b.x,b.y)}});r.Matrix2D=s.Matrix2D;return s})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(r,u,s,t,l,b,p,m,k,f){var c=r.shape={};c.Shape=s("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(l("gfxRegistry")){var b=c.register(this);this.getUID=function(){return b}}},destroy:function(){l("gfxRegistry")&&c.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},
getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var c=this._getRealMatrix();return[f.multiplyPoint(c,b.x,b.y),f.multiplyPoint(c,b.x+b.width,b.y),f.multiplyPoint(c,b.x+b.width,b.y+b.height),f.multiplyPoint(c,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(b){this.clip=b},getClip:function(){return this.clip},setShape:function(b){this.shape=r.makeParameters(this.shape,
b);this.bbox=null;return this},setFill:function(b){if(!b)return this.fillStyle=null,this;var c=null;if("object"==typeof b&&"type"in b)switch(b.type){case "linear":c=r.makeParameters(r.defaultLinearGradient,b);break;case "radial":c=r.makeParameters(r.defaultRadialGradient,b);break;case "pattern":c=r.makeParameters(r.defaultPattern,b)}else c=r.normalizeColor(b);this.fillStyle=c;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||u.isArray(b)||b instanceof
k)b={color:b};b=this.strokeStyle=r.makeParameters(r.defaultStroke,b);b.color=r.normalizeColor(b.color);return this},setTransform:function(b){this.matrix=f.clone(b?f.normalize(b):f.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var b=this.getParent();b&&(b._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var b=this.getParent();b&&(b._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},
_moveToBack:function(){},applyRightTransform:function(b){return b?this.setTransform([this.matrix,b]):this},applyLeftTransform:function(b){return b?this.setTransform([b,this.matrix]):this},applyTransform:function(b){return b?this.setTransform([this.matrix,b]):this},removeShape:function(b){this.parent&&this.parent.remove(this,b);return this},_setParent:function(b,c){this.parent=b;return this._updateParentMatrix(c)},_updateParentMatrix:function(b){this.parentMatrix=b?f.clone(b):null;return this._applyTransform()},
_getRealMatrix:function(){for(var b=this.matrix,c=this.parent;c;)c.matrix&&(b=f.multiply(c.matrix,b)),c=c.parent;return b}});c._eventsProcessing={on:function(e,f){return b(this.getEventSource(),e,c.fixCallback(this,r.fixTarget,f))},connect:function(b,c,f){"on"==b.substring(0,2)&&(b=b.substring(2));return this.on(b,f?u.hitch(c,f):c)},disconnect:function(b){return b.remove()}};c.fixCallback=function(b,c,f,a){a||(a=f,f=null);if(u.isString(a)){f=f||t.global;if(!f[a])throw['dojox.gfx.shape.fixCallback: scope["',
a,'"] is null (scope="',f,'")'].join("");return function(d){return c(d,b)?f[a].apply(f,arguments||[]):void 0}}return f?function(d){return c(d,b)?a.apply(f,arguments||[]):void 0}:function(d){return c(d,b)?a.apply(f,arguments):void 0}};u.extend(c.Shape,c._eventsProcessing);c.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(b){var c=b.getParent();c&&c.remove(b,!0);this.children.push(b);return b._setParent(this,
this._getRealMatrix())},remove:function(b,c){for(var f=0;f<this.children.length;++f)if(this.children[f]==b){c||(b.parent=null,b.parentMatrix=null);this.children.splice(f,1);break}return this},clear:function(b){for(var c,f=0;f<this.children.length;++f)c=this.children[f],c.parent=null,c.parentMatrix=null,b&&c.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;p.forEach(this.children,function(c){var k=c.getBoundingBox();k&&((c=c.getTransform())&&(k=f.multiplyRectangle(c,
k)),b?(b.x=Math.min(b.x,k.x),b.y=Math.min(b.y,k.y),b.endX=Math.max(b.endX,k.x+k.width),b.endY=Math.max(b.endY,k.y+k.height)):b={x:k.x,y:k.y,endX:k.x+k.width,endY:k.y+k.height})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b}return null},_moveChildToFront:function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]==b){this.children.splice(c,1);this.children.push(b);break}return this},_moveChildToBack:function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]==b){this.children.splice(c,
1);this.children.unshift(b);break}return this}};c.Surface=s("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){p.forEach(this._nodes,m.destroy);this._nodes=[];p.forEach(this._events,function(b){b&&b.remove()});this._events=[];this.rawNode=null;if(l("ie"))for(;this._parent.lastChild;)m.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},
_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(b){},whenLoaded:function(c,f){var k=u.hitch(c,f);if(this.isLoaded)k(this);else b.once(this,"load",function(a){k(a)})}});u.extend(c.Surface,c._eventsProcessing);c.Rect=s("dojox.gfx.shape.Rect",c.Shape,{constructor:function(b){this.shape=r.getDefault("Rect");this.rawNode=b},getBoundingBox:function(){return this.shape}});c.Ellipse=s("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(b){this.shape=r.getDefault("Ellipse");this.rawNode=
b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.rx,y:b.cy-b.ry,width:2*b.rx,height:2*b.ry}}return this.bbox}});c.Circle=s("dojox.gfx.shape.Circle",c.Shape,{constructor:function(b){this.shape=r.getDefault("Circle");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.r,y:b.cy-b.r,width:2*b.r,height:2*b.r}}return this.bbox}});c.Line=s("dojox.gfx.shape.Line",c.Shape,{constructor:function(b){this.shape=r.getDefault("Line");this.rawNode=
b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:Math.min(b.x1,b.x2),y:Math.min(b.y1,b.y2),width:Math.abs(b.x2-b.x1),height:Math.abs(b.y2-b.y1)}}return this.bbox}});c.Polyline=s("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(b){this.shape=r.getDefault("Polyline");this.rawNode=b},setShape:function(b,c){b&&b instanceof Array?(this.inherited(arguments,[{points:b}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[b]);
return this},_normalizePoints:function(){var b=this.shape.points,c=b&&b.length;if(c&&"number"==typeof b[0]){for(var f=[],a=0;a<c;a+=2)f.push({x:b[a],y:b[a+1]});this.shape.points=f}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var b=this.shape.points,c=b.length,f=b[0],a=f.x,d=f.y,k=f.x,l=f.y,m=1;m<c;++m)f=b[m],a>f.x&&(a=f.x),k<f.x&&(k=f.x),d>f.y&&(d=f.y),l<f.y&&(l=f.y);this.bbox={x:a,y:d,width:k-a,height:l-d}}return this.bbox}});c.Image=s("dojox.gfx.shape.Image",c.Shape,
{constructor:function(b){this.shape=r.getDefault("Image");this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});c.Text=s(c.Shape,{constructor:function(b){this.fontStyle=null;this.shape=r.getDefault("Text");this.rawNode=b},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?r.splitFontString(b):r.makeParameters(r.defaultFont,b);this._setFont();return this},getBoundingBox:function(){var b=
null;this.getShape().text&&(b=r._base._computeTextBoundingBox(this));return b}});c.Creator={createShape:function(b){switch(b.type){case r.defaultPath.type:return this.createPath(b);case r.defaultRect.type:return this.createRect(b);case r.defaultCircle.type:return this.createCircle(b);case r.defaultEllipse.type:return this.createEllipse(b);case r.defaultLine.type:return this.createLine(b);case r.defaultPolyline.type:return this.createPolyline(b);case r.defaultImage.type:return this.createImage(b);
case r.defaultText.type:return this.createText(b);case r.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(r.Group)},createRect:function(b){return this.createObject(r.Rect,b)},createEllipse:function(b){return this.createObject(r.Ellipse,b)},createCircle:function(b){return this.createObject(r.Circle,b)},createLine:function(b){return this.createObject(r.Line,b)},createPolyline:function(b){return this.createObject(r.Polyline,b)},createImage:function(b){return this.createObject(r.Image,
b)},createText:function(b){return this.createObject(r.Text,b)},createPath:function(b){return this.createObject(r.Path,b)},createTextPath:function(b){return this.createObject(r.TextPath,{}).setText(b)},createObject:function(b,c){return null}};return c})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e){function g(a,
b){return s.doc.createElementNS?s.doc.createElementNS(a,b):s.doc.createElement(b)}function q(a,b,d,c){return a.setAttributeNS?a.setAttributeNS(b,d,c):a.setAttribute(d,c)}function a(a){return d.useSvgWeb?s.doc.createTextNode(a,!0):s.doc.createTextNode(a)}var d=f.svg={};d.useSvgWeb="undefined"!=typeof window.svgweb;var n=navigator.userAgent,v=u("ios"),y=u("android"),A=u("chrome")||y&&4<=y?"auto":"optimizeLegibility";d.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};d.getRef=
function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?t.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?t.byId(a.slice(1)):null:null};d.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var z=0;d.Shape=l("dojox.gfx.svg.Shape",c.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");
(a=d.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=t.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);c.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var d,c=function(a){this.setAttribute(a,d[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":d=f.makeParameters(f.defaultLinearGradient,
a);a=this._setFillObject(d,"linearGradient");b.forEach(["x1","y1","x2","y2"],c,a);break;case "radial":d=f.makeParameters(f.defaultRadialGradient,a);a=this._setFillObject(d,"radialGradient");b.forEach(["cx","cy","r"],c,a);break;case "pattern":d=f.makeParameters(f.defaultPattern,a),a=this._setFillObject(d,"pattern"),b.forEach(["x","y","width","height"],c,a)}this.fillStyle=d;return this}this.fillStyle=d=f.normalizeColor(a);this.rawNode.setAttribute("fill",d.toCss());this.rawNode.setAttribute("fill-opacity",
d.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),this;if("string"==typeof a||r.isArray(a)||a instanceof k)a={color:a};a=this.strokeStyle=f.makeParameters(f.defaultStroke,a);a.color=f.normalizeColor(a.color);if(a){b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",a.width);b.setAttribute("stroke-linecap",
a.cap);"number"==typeof a.join?(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var c=a.style.toLowerCase();c in d.dasharray&&(c=d.dasharray[c]);if(c instanceof Array){var c=r._toArray(c),e;for(e=0;e<c.length;++e)c[e]*=a.width;if("butt"!=a.cap){for(e=0;e<c.length;e+=2)c[e]-=a.width,1>c[e]&&(c[e]=1);for(e=1;e<c.length;e+=2)c[e]+=a.width}c=c.join(",")}b.setAttribute("stroke-dasharray",c);b.setAttribute("dojoGfxStrokeStyle",
a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof f.Surface);a=a.parent);return a},_setFillObject:function(a,b){var c=d.xmlns.svg;this.fillStyle=a;var e=this._getParentSurface().defNode,k=this.rawNode.getAttribute("fill");if(k=d.getRef(k))if(k.tagName.toLowerCase()!=b.toLowerCase()){var l=k.id;k.parentNode.removeChild(k);k=g(c,b);k.setAttribute("id",l);e.appendChild(k)}else for(;k.childNodes.length;)k.removeChild(k.lastChild);else k=g(c,b),k.setAttribute("id",
f._base._getUniqueId()),e.appendChild(k);if("pattern"==b)k.setAttribute("patternUnits","userSpaceOnUse"),c=g(c,"image"),c.setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("width",a.width.toFixed(8)),c.setAttribute("height",a.height.toFixed(8)),q(c,d.xmlns.xlink,"xlink:href",a.src),k.appendChild(c);else for(k.setAttribute("gradientUnits","userSpaceOnUse"),e=0;e<a.colors.length;++e){var l=a.colors[e],n=g(c,"stop"),m=l.color=f.normalizeColor(l.color);n.setAttribute("offset",l.offset.toFixed(8));
n.setAttribute("stop-color",m.toCss());n.setAttribute("stop-opacity",m.a);k.appendChild(n)}this.rawNode.setAttribute("fill","url(#"+k.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return k},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");
return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=f.makeParameters(this.shape,a);for(var b in this.shape)"type"!=b&&this.rawNode.setAttribute(b,
this.shape[b]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;"polyline"===b&&(a=r.clone(a),a.points=a.points.join(","));var c,e=m.get(this.rawNode,"clip-path");
e&&(c=t.byId(e.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=g(d.xmlns.svg,b),c.appendChild(b)):(e="gfx_clip"+ ++z,this.rawNode.setAttribute("clip-path","url(#"+e+")"),c=g(d.xmlns.svg,"clipPath"),b=g(d.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.insertBefore(c,this.rawNode),m.set(c,"id",e)),m.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,b=m.get(this.rawNode,"clip-path");b&&(a=t.byId(b.match(/gfx_clip[\d]+/)[0]))&&
a.parentNode.removeChild(a);return a}});d.Group=l("dojox.gfx.svg.Group",d.Shape,{constructor:function(){c.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);d.Shape.prototype.destroy.apply(this,arguments)}});d.Group.nodeType="g";d.Rect=l("dojox.gfx.svg.Rect",[d.Shape,c.Rect],{setShape:function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;for(var b in this.shape)"type"!=b&&"r"!=b&&this.rawNode.setAttribute(b,
this.shape[b]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});d.Rect.nodeType="rect";d.Ellipse=l("dojox.gfx.svg.Ellipse",[d.Shape,c.Ellipse],{});d.Ellipse.nodeType="ellipse";d.Circle=l("dojox.gfx.svg.Circle",[d.Shape,c.Circle],{});d.Circle.nodeType="circle";d.Line=l("dojox.gfx.svg.Line",[d.Shape,c.Line],{});d.Line.nodeType="line";d.Polyline=l("dojox.gfx.svg.Polyline",[d.Shape,c.Polyline],{setShape:function(a,b){a&&a instanceof
Array?(this.shape=f.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=f.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();for(var d=[],c=this.shape.points,e=0;e<c.length;++e)d.push(c[e].x.toFixed(8),c[e].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});d.Polyline.nodeType="polyline";d.Image=l("dojox.gfx.svg.Image",[d.Shape,c.Image],{setShape:function(a){this.shape=f.makeParameters(this.shape,
a);this.bbox=null;a=this.rawNode;for(var b in this.shape)"type"!=b&&"src"!=b&&a.setAttribute(b,this.shape[b]);a.setAttribute("preserveAspectRatio","none");q(a,d.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this}});d.Image.nodeType="image";d.Text=l("dojox.gfx.svg.Text",[d.Shape,c.Text],{setShape:function(b){this.shape=f.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;var d=this.shape;b.setAttribute("x",d.x);b.setAttribute("y",d.y);b.setAttribute("text-anchor",d.align);
b.setAttribute("text-decoration",d.decoration);b.setAttribute("rotate",d.rotated?90:0);b.setAttribute("kerning",d.kerning?"auto":0);b.setAttribute("text-rendering",A);b.firstChild?b.firstChild.nodeValue=d.text:b.appendChild(a(d.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var d=0,c=a.firstChild.nodeValue;b.appendChild(a);if(""!=c)for(;!d;)d=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return d},getBoundingBox:function(){var a=
null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a}});d.Text.nodeType="text";d.Path=l("dojox.gfx.svg.Path",[d.Shape,e.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});d.Path.nodeType="path";d.TextPath=
l("dojox.gfx.svg.TextPath",[d.Shape,e.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var c=g(d.xmlns.svg,"textPath"),e=a("");c.appendChild(e);b.appendChild(c)}c=(c=b.firstChild.getAttributeNS(d.xmlns.xlink,"href"))&&d.getRef(c);if(!c&&(e=this._getParentSurface())){var e=e.defNode,
c=g(d.xmlns.svg,"path"),k=f._base._getUniqueId();c.setAttribute("id",k);e.appendChild(c);q(b.firstChild,d.xmlns.xlink,"xlink:href","#"+k)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var b=this.rawNode;if(!b.firstChild){var c=g(d.xmlns.svg,"textPath"),e=a("");c.appendChild(e);b.appendChild(c)}b=b.firstChild;c=this.text;b.setAttribute("alignment-baseline","middle");switch(c.align){case "middle":b.setAttribute("text-anchor","middle");b.setAttribute("startOffset","50%");break;case "end":b.setAttribute("text-anchor",
"end");b.setAttribute("startOffset","100%");break;default:b.setAttribute("text-anchor","start"),b.setAttribute("startOffset","0%")}b.setAttribute("baseline-shift","0.5ex");b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:0);b.setAttribute("kerning",c.kerning?"auto":0);b.firstChild.data=c.text}});d.TextPath.nodeType="text";var B=534<function(){var a=/WebKit\/(\d*)/.exec(n);return a?a[1]:0}();d.Surface=l("dojox.gfx.svg.Surface",c.Surface,{constructor:function(){c.Container._init.call(this)},
destroy:function(){c.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);B&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:f.normalizedLength(this.rawNode.getAttribute("width")),height:f.normalizedLength(this.rawNode.getAttribute("height"))}:null}});d.createSurface=function(a,
b,c){var e=new d.Surface;e.rawNode=g(d.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");b&&e.rawNode.setAttribute("width",b);c&&e.rawNode.setAttribute("height",c);b=g(d.xmlns.svg,"defs");e.rawNode.appendChild(b);e.defNode=b;e._parent=t.byId(a);e._parent.appendChild(e.rawNode);f._base._fixMsTouchAction(e);return e};u={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",
a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var C=c.Container;l=d.Container={openBatch:function(){if(!this._batch){var a;a=d.useSvgWeb?s.doc.createDocumentFragment(!0):s.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&
(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),C.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),C.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=
this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return C.clear.apply(this,arguments)},getBoundingBox:C.getBoundingBox,_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};e=d.Creator={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,e=g(d.xmlns.svg,a.nodeType);c.setRawNode(e);c.setShape(b);this.add(c);return c}};r.extend(d.Text,u);r.extend(d.TextPath,u);r.extend(d.Group,l);r.extend(d.Group,c.Creator);r.extend(d.Group,e);r.extend(d.Surface,
l);r.extend(d.Surface,c.Creator);r.extend(d.Surface,e);d.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=v&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};d.useSvgWeb&&(d.createSurface=function(a,b,c){var e=new d.Surface;if(!b||!c){var k=p.position(a);b=b||k.w;c=c||k.h}a=t.byId(a);var k=a.id?a.id+"_svgweb":f._base._getUniqueId(),l=g(d.xmlns.svg,"svg");l.id=k;l.setAttribute("width",b);l.setAttribute("height",c);svgweb.appendChild(l,a);l.addEventListener("SVGLoad",
function(){e.rawNode=this;e.isLoaded=!0;var a=g(d.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},d.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}}),u={connect:function(a,b,d){"on"===a.substring(0,2)&&(a=a.substring(2));d=2==arguments.length?b:r.hitch(b,d);this.getEventSource().addEventListener(a,d,!1);return[this,a,d]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);
delete a[0]}},r.extend(d.Shape,u),r.extend(d.Surface,u));return d})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),function(r,u,s,t,l,b,p,m){function k(a,b){this.start=a;this.end=b}function f(a,b,d){this.start=a;this.end=b;this.units=d}function c(a,b){this.start=a;this.end=b;this.temp=new t}function e(a){this.values=a;this.length=a.length}function g(a,b){this.values=a;this.def=b?b:{}}function q(a,
b){this.stack=a;this.original=b}function a(a,b,d,f){if(a.values)return new e(a.values);var g,k;k=a.start?u.normalizeColor(a.start):g=b?d?b[d]:b:f;a.end?a=u.normalizeColor(a.end):(g||(g=b?d?b[d]:b:f),a=g);return new c(k,a)}var d=u.fx={};k.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};f.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};c.prototype.getValue=function(a){return t.blendColors(this.start,this.end,a,this.temp)};e.prototype.getValue=
function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};g.prototype.getValue=function(a){var b=r.clone(this.def),d;for(d in this.values)b[d]=this.values[d].getValue(a);return b};q.prototype.getValue=function(a){var b=[];l.forEach(this.stack,function(d){if(d instanceof s.Matrix2D)b.push(d);else if("original"==d.name&&this.original)b.push(this.original);else if("matrix"==d.name){if(d.start instanceof s.Matrix2D&&d.end instanceof s.Matrix2D){var c=new s.Matrix2D,e;for(e in d.start)c[e]=
(d.end[e]-d.start[e])*a+d.start[e];b.push(c)}}else d.name in s&&(c=s[d.name],"function"!=typeof c?b.push(c):(e=l.map(d.start,function(b,c){return(d.end[c]-b)*a+b}),c=c.apply(s,e),c instanceof s.Matrix2D&&b.push(c)))},this);return b};var n=new t(0,0,0,0);d.animateStroke=function(d){d.easing||(d.easing=b._defaultEasing);var c=new b.Animation(d),f=d.shape,l;p.connect(c,"beforeBegin",c,function(){l=f.getStroke();var b=d.color,c={},m;b&&(c.color=a(b,l,"color",n));(b=d.style)&&b.values&&(c.style=new e(b.values));
if(b=d.width){var p=b,q=l;p.values?m=new e(p.values):(b=p.start?p.start:m=q?q.width:1,p.end?m=p.end:"number"!=typeof m&&(m=q?q.width:1),m=new k(b,m));c.width=m}(b=d.cap)&&b.values&&(c.cap=new e(b.values));if(b=d.join)b.values?c.join=new e(b.values):(m=b.start?b.start:l&&l.join||0,b=b.end?b.end:l&&l.join||0,"number"==typeof m&&"number"==typeof b&&(c.join=new k(m,b)));this.curve=new g(c,l)});p.connect(c,"onAnimate",f,"setStroke");return c};d.animateFill=function(d){d.easing||(d.easing=b._defaultEasing);
var c=new b.Animation(d),e=d.shape,f;p.connect(c,"beforeBegin",c,function(){f=e.getFill();var b=d.color;b&&(this.curve=a(b,f,"",n))});p.connect(c,"onAnimate",e,"setFill");return c};d.animateFont=function(a){a.easing||(a.easing=b._defaultEasing);var d=new b.Animation(a),c=a.shape,k;p.connect(d,"beforeBegin",d,function(){k=c.getFont();var b=a.style,d={},l,n;b&&b.values&&(d.style=new e(b.values));(b=a.variant)&&b.values&&(d.variant=new e(b.values));(b=a.weight)&&b.values&&(d.weight=new e(b.values));
(b=a.family)&&b.values&&(d.family=new e(b.values));(b=a.size)&&b.units&&(l=parseFloat(b.start?b.start:c.font&&c.font.size||"0"),n=parseFloat(b.end?b.end:c.font&&c.font.size||"0"),d.size=new f(l,n,b.units));this.curve=new g(d,k)});p.connect(d,"onAnimate",c,"setFont");return d};d.animateTransform=function(a){a.easing||(a.easing=b._defaultEasing);var d=new b.Animation(a),c=a.shape,e;p.connect(d,"beforeBegin",d,function(){e=c.getTransform();this.curve=new q(a.transform,e)});p.connect(d,"onAnimate",c,
"setTransform");if("svg"===u.renderer&&10<=m("ie"))var f=[p.connect(d,"onBegin",d,function(){for(var a=c.getParent();a&&a.getParent;)a=a.getParent();a&&(c.__svgContainer=a.rawNode.parentNode)}),p.connect(d,"onAnimate",d,function(){try{if(c.__svgContainer){var a=c.__svgContainer.style.visibility;c.__svgContainer.style.visibility="visible";c.__svgContainer.style.visibility=a}}catch(b){}}),p.connect(d,"onEnd",d,function(){l.forEach(f,p.disconnect);if(c.__svgContainer){var a=c.__svgContainer.style.visibility,
b=c.__svgContainer;c.__svgContainer.style.visibility="visible";setTimeout(function(){try{b.style.visibility=a,b=null}catch(d){}},100)}delete c.__svgContainer})];return d};return d})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),function(r,u,s,t,l,b,p,m,k,f,c){var e=s.utils={};u.mixin(e,{forEach:function(b,c,a){a=a||r.global;
c.call(a,b);(b instanceof s.Surface||b instanceof s.Group)&&l.forEach(b.children,function(b){e.forEach(b,c,a)})},serialize:function(b){var c={},a;if((a=b instanceof s.Surface)||b instanceof s.Group){if(c.children=l.map(b.children,e.serialize),a)return c.children}else c.shape=b.getShape();b.getTransform&&(a=b.getTransform())&&(c.transform=a);b.getStroke&&(a=b.getStroke())&&(c.stroke=a);b.getFill&&(a=b.getFill())&&(c.fill=a);b.getFont&&(a=b.getFont())&&(c.font=a);return c},toJson:function(b,c){return p.toJson(e.serialize(b),
c)},deserialize:function(b,c){if(c instanceof Array)return l.map(c,u.hitch(null,e.deserialize,b));var a="shape"in c?b.createShape(c.shape):b.createGroup();"transform"in c&&a.setTransform(c.transform);"stroke"in c&&a.setStroke(c.stroke);"fill"in c&&a.setFill(c.fill);"font"in c&&a.setFont(c.font);"children"in c&&l.forEach(c.children,u.hitch(null,e.deserialize,a));return a},fromJson:function(b,c){return e.deserialize(b,p.fromJson(c))},toSvg:function(c){var f=new m;if("svg"===s.renderer)try{var a=e._cleanSvg(e._innerXML(c.rawNode));
f.callback(a)}catch(d){f.errback(d)}else{e._initSvgSerializerDeferred||e._initSvgSerializer();var k=e.toJson(c),a=function(){try{var a=c.getDimensions(),d=a.width,l=a.height,m=e._gfxSvgProxy.document.createElement("div");e._gfxSvgProxy.document.body.appendChild(m);b.withDoc(e._gfxSvgProxy.document,function(){t.style(m,"width",d);t.style(m,"height",l)},this);e._gfxSvgProxy[dojox._scopeName].gfx.createSurface(m,d,l).whenLoaded(null,function(a){try{e._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(a,
k);var b=e._cleanSvg(m.innerHTML);a.clear();a.destroy();e._gfxSvgProxy.document.body.removeChild(m);f.callback(b)}catch(d){f.errback(d)}})}catch(p){f.errback(p)}};0<e._initSvgSerializerDeferred.fired?a():e._initSvgSerializerDeferred.addCallback(a)}return f},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){e._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!e._initSvgSerializerDeferred){e._initSvgSerializerDeferred=new m;var g=b.doc.createElement("iframe");
t.style(g,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var l;k("ie")?g.onreadystatechange=function(){"complete"==g.contentWindow.document.readyState&&(g.onreadystatechange=function(){},l=setInterval(function(){g.contentWindow[r.scopeMap.dojo[1]._scopeName]&&g.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx&&g.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(l),g.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=g.contentWindow,
g.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:g.onload=function(){g.onload=function(){};l=setInterval(function(){g.contentWindow[r.scopeMap.dojo[1]._scopeName]&&g.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx&&g.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(l),g.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=g.contentWindow,g.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var a=c.dojoxGfxSvgProxyFrameUrl||f.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");g.setAttribute("src",a.toString());b.body().appendChild(g)}},_innerXML:function(b){return b.innerXML?b.innerXML:b.xml?b.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(b):null},_cleanSvg:function(b){b&&(-1==b.indexOf('xmlns="http://www.w3.org/2000/svg"')&&(b=b.substring(4,b.length),b='<svg xmlns="http://www.w3.org/2000/svg"'+b),-1==b.indexOf('xmlns:xlink="http://www.w3.org/1999/xlink"')&&
(b=b.substring(4,b.length),b='<svg xmlns:xlink="http://www.w3.org/1999/xlink"'+b),-1===b.indexOf("xlink:href")&&(b=b.replace(/href\s*=/g,"xlink:href=")),b=b.replace(/<img\b([^>]*)>/gi,"<image $1 />"),b=b.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),b=b.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),b=b.replace(/[=]([^"']+?)(\s|>)/g,'="$1"$2'),b=b.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return b}});return e})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover".split(" "),
function(r,u,s,t,l,b,p,m,k){return u("dojox.gfx.Moveable",null,{constructor:function(f,c){this.shape=f;this.delay=c&&0<c.delay?c.delay:0;this.mover=c&&c.mover?c.mover:k;this.events=[this.shape.on(b.press,r.hitch(this,"onMouseDown"))]},destroy:function(){s.forEach(this.events,function(b){b.remove()});this.events=this.shape=null},onMouseDown:function(f){this.delay?(this.events.push(this.shape.on(b.move,r.hitch(this,"onMouseMove")),this.shape.on(b.release,r.hitch(this,"onMouseUp"))),this._lastX=f.clientX,
this._lastY=f.clientY):new this.mover(this.shape,f,this);t.stop(f)},onMouseMove:function(b){var c=b.clientY;if(Math.abs(b.clientX-this._lastX)>this.delay||Math.abs(c-this._lastY)>this.delay)this.onMouseUp(b),new this.mover(this.shape,b,this);t.stop(b)},onMouseUp:function(b){this.events.pop().remove()},onMoveStart:function(b){l.publish("/gfx/move/start",b);p.add(m.body(),"dojoMove")},onMoveStop:function(b){l.publish("/gfx/move/stop",b);p.remove(m.body(),"dojoMove")},onFirstMove:function(b){},onMove:function(b,
c){this.onMoving(b,c);this.shape.applyLeftTransform(c);this.onMoved(b,c)},onMoving:function(b,c){},onMoved:function(b,c){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(r,u,s,t,l,b){return s("dojox.gfx.Mover",null,{constructor:function(p,m,k){this.shape=p;this.lastX=m.clientX;this.lastY=m.clientY;p=this.host=k;m=document;k=t(m,l.move,r.hitch(this,"onFirstMove"));this.events=[t(m,l.move,r.hitch(this,
"onMouseMove")),t(m,l.release,r.hitch(this,"destroy")),t(m,"dragstart",r.hitch(b,"stop")),t(m,"selectstart",r.hitch(b,"stop")),k];if(p&&p.onMoveStart)p.onMoveStart(this)},onMouseMove:function(l){var m=l.clientX,k=l.clientY;this.host.onMove(this,{dx:m-this.lastX,dy:k-this.lastY});this.lastX=m;this.lastY=k;b.stop(l)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){u.forEach(this.events,function(b){b.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);
this.events=this.shape=null}})})},"dojox/gesture/tap":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base","../main"],function(r,u,s,t,l){r.experimental("dojox.gesture.tap");r=u(t,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(b,l){if(l.touches&&2<=l.touches.length)clearTimeout(b.tapTimeOut),delete b.context;else{var m=l.target;this._initTap(b,l);b.tapTimeOut=setTimeout(s.hitch(this,function(){this._isTap(b,
l)&&this.fire(m,{type:"tap.hold"});delete b.context}),this.holdThreshold)}},release:function(b,l){if(b.context&&this._isTap(b,l))switch(b.context.c){case 1:this.fire(l.target,{type:"tap"});break;case 2:this.fire(l.target,{type:"tap.doubletap"})}clearTimeout(b.tapTimeOut)},_initTap:function(b,l){b.context||(b.context={x:0,y:0,t:0,c:0});var m=(new Date).getTime();m-b.context.t<=this.doubleTapTimeout?b.context.c++:(b.context.c=1,b.context.x=l.screenX,b.context.y=l.screenY);b.context.t=m},_isTap:function(b,
l){var m=Math.abs(b.context.x-l.screenX),k=Math.abs(b.context.y-l.screenY);return m<=this.tapRadius&&k<=this.tapRadius}});l.gesture.tap=new r;l.gesture.tap.Tap=r;return l.gesture.tap})},"dojox/gesture/Base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/touch dojo/has ../main".split(" "),function(r,u,s,t,l,b,p,m,k){r.experimental("dojox.gesture.Base");t.getObject("gesture",!0,k);return u(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,
_elements:null,constructor:function(b){t.mixin(this,b);this.init()},init:function(){this._elements=[];if(!m("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,"] is only supported on touch devices!");else{var b=this.defaultEvent;this.call=this._handle(b);this._events=[b];s.forEach(this.subEvents,function(c){this[c]=this._handle(b+"."+c);this._events.push(b+"."+c)},this)}},_handle:function(f){var c=this;return function(e,g){var k=arguments;2<k.length&&(e=k[1],g=k[2]);if(e&&(e.nodeType||
e.attachEvent||e.addEventListener)){var a=c._add(e,f,g);return{remove:function(){a.remove();c._remove(e,f)}}}return b(e,f,g)}},_add:function(f,c,e){var g=this._getGestureElement(f);if(!g){var g={target:f,data:{},handles:{}},k=t.hitch(this,"_process",g,"press"),a=t.hitch(this,"_process",g,"move"),d=t.hitch(this,"_process",g,"release"),l=t.hitch(this,"_process",g,"cancel"),m=g.handles;this.touchOnly?(m.press=b(f,"touchstart",k),m.move=b(f,"touchmove",a),m.release=b(f,"touchend",d),m.cancel=b(f,"touchcancel",
l)):(m.press=p.press(f,k),m.move=p.move(f,a),m.release=p.release(f,d),m.cancel=p.cancel(f,l));this._elements.push(g)}g.handles[c]=g.handles[c]?++g.handles[c]:1;return b(f,c,e)},_getGestureElement:function(b){for(var c=0,e;c<this._elements.length;c++)if(e=this._elements[c],e.target===b)return e},_process:function(b,c,e){e._locking=e._locking||{};e._locking[this.defaultEvent]||this.isLocked(e.currentTarget)||("INPUT"==e.target.tagName&&"radio"!=e.target.type&&"checkbox"!=e.target.type||"TEXTAREA"==
e.target.tagName||e.preventDefault(),e._locking[this.defaultEvent]=!0,this[c](b.data,e))},press:function(b,c){},move:function(b,c){},release:function(b,c){},cancel:function(b,c){},fire:function(f,c){f&&c&&(c.bubbles=!0,c.cancelable=!0,b.emit(f,c.type,c))},_remove:function(b,c){var e=this._getGestureElement(b);if(e&&e.handles){e.handles[c]--;var g=e.handles;s.some(this._events,function(b){return 0<g[b]})||(this._cleanHandles(g),e=s.indexOf(this._elements,e),0<=e&&this._elements.splice(e,1))}},_cleanHandles:function(b){for(var c in b)b[c].remove&&
b[c].remove(),delete b[c]},lock:function(b){this._lock=b},unLock:function(){this._lock=null},isLocked:function(b){return this._lock&&b?this._lock!==b&&l.isDescendant(b,this._lock):!1},destroy:function(){s.forEach(this._elements,function(b){this._cleanHandles(b.handles)},this);this._elements=null}})})},"dojox/gesture/swipe":function(){define(["dojo/_base/kernel","dojo/_base/declare","./Base","../main"],function(r,u,s,t){r.experimental("dojox.gesture.swipe");r=u(s,{defaultEvent:"swipe",subEvents:["end"],
press:function(l,b){b.touches&&2<=b.touches.length?delete l.context:(l.context||(l.context={x:0,y:0,t:0}),l.context.x=b.screenX,l.context.y=b.screenY,l.context.t=(new Date).getTime(),this.lock(b.currentTarget))},move:function(l,b){this._recognize(l,b,"swipe")},release:function(l,b){this._recognize(l,b,"swipe.end");delete l.context;this.unLock()},cancel:function(l,b){delete l.context;this.unLock()},_recognize:function(l,b,p){l.context&&(l=this._getSwipeInfo(l,b))&&(l.type=p,this.fire(b.target,l))},
_getSwipeInfo:function(l,b){var p,m,k={};m=l.context;k.time=(new Date).getTime()-m.t;p=b.screenX-m.x;m=b.screenY-m.y;if(0===p&&0===m)return null;k.dx=p;k.dy=m;return k}});t.gesture.swipe=new r;t.gesture.swipe.Swipe=r;return t.gesture.swipe})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(r,u,s,t){var l=r.getObject("dojox.html",!0),b={},p={},m=[];l.insertCssRule=function(b,f,c){c=l.getDynamicStyleSheet(c);var e=b+" {"+f+
"}";t("ie")?c.cssText+=e:c.sheet?c.sheet.insertRule(e,c._indicies.length):c.appendChild(s.doc.createTextNode(e));c._indicies.push(b+" "+f);return b};l.removeCssRule=function(k,f,c){var e,g=-1,l,a;for(l in b)if(!c||c===l){e=b[l];for(a=0;a<e._indicies.length;a++)if(k+" "+f===e._indicies[a]){g=a;break}if(-1<g)break}if(!e)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===g)return console.warn("The css rule was not found and could not be removed."),
!1;e._indicies.splice(g,1);t("ie")?e.removeRule(g):e.sheet&&e.sheet.deleteRule(g);return!0};l.modifyCssRule=function(b,f,c){};l.getStyleSheet=function(k){if(b[k||"default"])return b[k||"default"];if(!k)return!1;var f=l.getStyleSheets();if(f[k])return l.getStyleSheets()[k];for(var c in f)if(f[c].href&&-1<f[c].href.indexOf(k))return f[c];return!1};l.getDynamicStyleSheet=function(k){k||(k="default");b[k]||(s.doc.createStyleSheet?(b[k]=s.doc.createStyleSheet(),9>t("ie")&&(b[k].title=k)):(b[k]=s.doc.createElement("style"),
b[k].setAttribute("type","text/css"),s.doc.getElementsByTagName("head")[0].appendChild(b[k])),b[k]._indicies=[]);return b[k]};l.enableStyleSheet=function(b){if(b=l.getStyleSheet(b))b.sheet?b.sheet.disabled=!1:b.disabled=!1};l.disableStyleSheet=function(b){if(b=l.getStyleSheet(b))b.sheet?b.sheet.disabled=!0:b.disabled=!0};l.activeStyleSheet=function(b){var f=l.getToggledStyleSheets(),c;if(1===arguments.length)u.forEach(f,function(c){c.disabled=c.title===b?!1:!0});else for(c=0;c<f.length;c++)if(!1===
f[c].disabled)return f[c];return!0};l.getPreferredStyleSheet=function(){};l.getToggledStyleSheets=function(){var b;if(!m.length){var f=l.getStyleSheets();for(b in f)f[b].title&&m.push(f[b])}return m};l.getStyleSheets=function(){if(p.collected)return p;u.forEach(s.doc.styleSheets,function(b){var f=b.sheet?b.sheet:b;b=f.title||f.href;if(t("ie"))-1===f.cssText.indexOf("#default#VML")&&(f.href?p[b]=f:f.imports.length?u.forEach(f.imports,function(b){p[b.title||b.href]=b}):p[b]=f);else{p[b]=f;p[b].id=f.ownerNode.id;
b=[];try{b=f[f.cssRules?"cssRules":"rules"]}catch(c){console.warn("Reading css rules from stylesheet "+f.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",f)}u.forEach(b,function(b){b.href&&(p[b.href]=b.styleSheet,p[b.href].id=f.ownerNode.id)})}});p.collected=!0;return p};return l})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),
function(r){return r._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(r,u,s,t){var l=u("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(b){if(this._hash[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");this._hash[b.id]=b;this.length++},remove:function(b){this._hash[b]&&(delete this._hash[b],this.length--)},forEach:function(b,l){l=
l||s.global;var m=0,k;for(k in this._hash)b.call(l,this._hash[k],m++,this._hash);return this},filter:function(b,p){p=p||s.global;var m=new l,k=0,f;for(f in this._hash){var c=this._hash[f];b.call(p,c,k++,this._hash)&&m.add(c)}return m},byId:function(b){return this._hash[b]},byClass:function(b){var p=new l,m,k;for(m in this._hash)k=this._hash[m],k.declaredClass==b&&p.add(k);return p},toArray:function(){var b=[],l;for(l in this._hash)b.push(this._hash[l]);return b},map:function(b,l){return r.map(this.toArray(),
b,l)},every:function(b,l){l=l||s.global;var m=0,k;for(k in this._hash)if(!b.call(l,this._hash[k],m++,this._hash))return!1;return!0},some:function(b,l){l=l||s.global;var m=0,k;for(k in this._hash)if(b.call(l,this._hash[k],m++,this._hash))return!0;return!1}});r.forEach("forEach filter byClass map every some".split(" "),function(b){t[b]=l.prototype[b]});return l})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(r,u,s,t,l,b,p,m){b.focus=function(k){if(k){var f="node"in k?k.node:k,c=k.bookmark;k=k.openedForWindow;var e=c?c.isCollapsed:!1;if(f){var g="iframe"==f.tagName.toLowerCase()?f.contentWindow:f;if(g&&g.focus)try{g.focus()}catch(p){}b._onFocusNode(f)}if(c&&l.withGlobal(k||l.global,m.isCollapsed)&&!e){k&&k.focus();try{l.withGlobal(k||l.global,m.moveToBookmark,null,[c])}catch(a){}}}};b.watch("curNode",function(b,f,c){m._curFocus=c;m._prevFocus=f;c&&t.publish("focusNode",c)});b.watch("activeStack",
function(b,f,c){m._activeStack=c});b.on("widget-blur",function(b,f){t.publish("widgetBlur",b,f)});b.on("widget-focus",function(b,f){t.publish("widgetFocus",b,f)});s.mixin(m,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return m.getBookmark().isCollapsed},getBookmark:function(){return(l.global==window?p:new p.SelectionManager(l.global)).getBookmark()},moveToBookmark:function(b){return(l.global==window?p:new p.SelectionManager(l.global)).moveToBookmark(b)},getFocus:function(k,f){var c=!b.curNode||
k&&u.isDescendant(b.curNode,k.domNode)?m._prevFocus:b.curNode;return{node:c,bookmark:c&&c==b.curNode&&l.withGlobal(f||l.global,m.getBookmark),openedForWindow:f}},_activeStack:[],registerIframe:function(k){return b.registerIframe(k)},unregisterIframe:function(b){b&&b.remove()},registerWin:function(k,f){return b.registerWin(k,f)},unregisterWin:function(b){b&&b.remove()}});return m})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),
function(r,u,s,t,l,b){var p=function(k){var f=k.document;this.getType=function(){if(f.getSelection){var b="text",e;try{e=k.getSelection()}catch(g){}e&&1==e.rangeCount&&(e=e.getRangeAt(0),e.startContainer==e.endContainer&&1==e.endOffset-e.startOffset&&3!=e.startContainer.nodeType&&(b="control"));return b}return f.selection.type.toLowerCase()};this.getSelectedText=function(){if(f.getSelection){var b=k.getSelection();return b?b.toString():""}return"control"==this.getType()?null:f.selection.createRange().text};
this.getSelectedHtml=function(){if(f.getSelection){var b=k.getSelection();if(b&&b.rangeCount){var e,g="";for(e=0;e<b.rangeCount;e++){var l=b.getRangeAt(e).cloneContents(),a=f.createElement("div");a.appendChild(l);g+=a.innerHTML}return g}return null}return"control"==this.getType()?null:f.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(f.getSelection){var b=k.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}if((b=f.selection.createRange())&&
b.item)return f.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(f.getSelection){if(b=f.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;return b}}else return b=f.selection.createRange(),b.collapse(!0),b.parentElement();return null};this.hasAncestorElement=function(b){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(b){var e=
this.getSelectedElement()||this.getParentElement();return this.getParentOfType(e,arguments)};this.isTag=function(b,e){if(b&&b.tagName)for(var f=b.tagName.toLowerCase(),k=0;k<e.length;k++){var a=String(e[k]).toLowerCase();if(f==a)return a}return""};this.getParentOfType=function(b,e){for(;b;){if(this.isTag(b,e).length)return b;b=b.parentNode}return null};this.collapse=function(b){if(f.getSelection){var e=k.getSelection();e.removeAllRanges?b?e.collapseToStart():e.collapseToEnd():e.collapse(b)}else e=
f.selection.createRange(),e.collapse(b),e.select()};this.remove=function(){var b=f.selection;f.getSelection?(b=k.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b};this.selectElementChildren=function(b,e){var g;b=u.byId(b);if(f.getSelection){var l=k.getSelection();t("opera")?(g=l.rangeCount?l.getRangeAt(0):f.createRange(),g.setStart(b,0),g.setEnd(b,3==b.nodeType?b.length:b.childNodes.length),l.addRange(g)):l.selectAllChildren(b)}else if(g=b.ownerDocument.body.createTextRange(),
g.moveToElementText(b),!e)try{g.select()}catch(a){}};this.selectElement=function(b,e){var g;b=u.byId(b);if(f.getSelection){var k=f.getSelection();g=f.createRange();k.removeAllRanges&&(t("opera")&&k.getRangeAt(0)&&(g=k.getRangeAt(0)),g.selectNode(b),k.removeAllRanges(),k.addRange(g))}else try{k=b.tagName?b.tagName.toLowerCase():"",g="img"===k||"table"===k?l.body(f).createControlRange():l.body(f).createRange(),g.addElement(b),e||g.select()}catch(a){this.selectElementChildren(b,e)}};this.inSelection=
function(b){if(b){var e,g;if(f.getSelection){var l=k.getSelection();l&&0<l.rangeCount&&(g=l.getRangeAt(0));if(g&&g.compareBoundaryPoints&&f.createRange)try{if(e=f.createRange(),e.setStart(b,0),1===g.compareBoundaryPoints(g.START_TO_END,e))return!0}catch(a){}}else{g=f.selection.createRange();try{e=b.ownerDocument.body.createTextRange(),e.moveToElementText(b)}catch(d){}if(g&&e&&1===g.compareEndPoints("EndToStart",e))return!0}}return!1};this.getBookmark=function(){var c,e,g=f.selection,l=b.curNode;if(f.getSelection){if(g=
k.getSelection())if(g.isCollapsed){if(c=l?l.tagName:"")if(c=c.toLowerCase(),"textarea"==c||"input"==c&&(!l.type||"text"==l.type.toLowerCase()))return g={start:l.selectionStart,end:l.selectionEnd,node:l,pRange:!0},{isCollapsed:g.end<=g.start,mark:g};c={isCollapsed:!0};g.rangeCount&&(c.mark=g.getRangeAt(0).cloneRange())}else e=g.getRangeAt(0),c={isCollapsed:!1,mark:e.cloneRange()}}else if(g){c=l?l.tagName:"";c=c.toLowerCase();if(l&&c&&("button"==c||"textarea"==c||"input"==c)){if(g.type&&"none"==g.type.toLowerCase())return{isCollapsed:!0,
mark:null};e=g.createRange();return{isCollapsed:e.text&&e.text.length?!1:!0,mark:{range:e,pRange:!0}}}c={};try{e=g.createRange(),c.isCollapsed=!("Text"==g.type?e.htmlText.length:e.length)}catch(a){return c.isCollapsed=!0,c}if("CONTROL"==g.type.toUpperCase())if(e.length)for(c.mark=[],g=0,l=e.length;g<l;)c.mark.push(e.item(g++));else c.isCollapsed=!0,c.mark=null;else c.mark=e.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return c};this.moveToBookmark=
function(b){if(b=b.mark)if(f.getSelection){var e=k.getSelection();e&&e.removeAllRanges?b.pRange?(e=b.node,e.selectionStart=b.start,e.selectionEnd=b.end):(e.removeAllRanges(),e.addRange(b)):console.warn("No idea how to restore selection for this browser!")}else if(f.selection&&b){var g;b.pRange?g=b.range:s.isArray(b)?(g=f.body.createControlRange(),r.forEach(b,function(b){g.addElement(b)})):(g=f.body.createTextRange(),g.moveToBookmark(b));g.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},
m=new p(window);m.SelectionManager=p;return m})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(r,u,s,t,l){var b={getViewport:function(){return s.getBox()}};b.placeOnScreen=t.at;b.placeOnScreenAroundElement=function(b,l,k,f){var c;if(u.isArray(k))c=k;else{c=[];for(var e in k)c.push({aroundCorner:e,corner:k[e]})}return t.around(b,l,c,!0,f)};b.placeOnScreenAroundNode=b.placeOnScreenAroundElement;b.placeOnScreenAroundRectangle=
b.placeOnScreenAroundElement;b.getPopupAroundAlignment=function(b,l){var k={};r.forEach(b,function(b){var c=l;switch(b){case "after":k[l?"BR":"BL"]=l?"BL":"BR";break;case "before":k[l?"BL":"BR"]=l?"BR":"BL";break;case "below-alt":c=!c;case "below":k[c?"BL":"BR"]=c?"TL":"TR";k[c?"BR":"BL"]=c?"TR":"TL";break;case "above-alt":c=!c;default:k[c?"TL":"TR"]=c?"BL":"BR",k[c?"TR":"TL"]=c?"BR":"BL"}});return k};u.mixin(l,b);return l})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window",
"../popup","../BackgroundIframe"],function(r,u,s){var t=s._createWrapper;s._createWrapper=function(b){b.declaredClass||(b={_popupWrapper:b.parentNode&&r.contains(b.parentNode,"dijitPopup")?b.parentNode:null,domNode:b,destroy:function(){},ownerDocument:b.ownerDocument,ownerDocumentBody:u.body(b.ownerDocument)});return t.call(this,b)};var l=s.open;s.open=function(b){if(b.orient&&"string"!=typeof b.orient&&!("length"in b.orient)){var p=[],m;for(m in b.orient)p.push({aroundCorner:m,corner:b.orient[m]});
b.orient=p}return l.call(this,b)};return s})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(r,u){u.scrollIntoView=function(s,t){r.scrollIntoView(s,t)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(r,u,s){u.mixin(s,{hasWaiRole:function(r,l){var b=this.getWaiRole(r);return l?
-1<b.indexOf(l):0<b.length},getWaiRole:function(t){return u.trim((r.get(t,"role")||"").replace("wairole:",""))},setWaiRole:function(t,l){r.set(t,"role",l)},removeWaiRole:function(t,l){var b=r.get(t,"role");b&&(l?(b=u.trim((" "+b+" ").replace(" "+l+" "," ")),r.set(t,"role",b)):t.removeAttribute("role"))},hasWaiState:function(r,l){return r.hasAttribute?r.hasAttribute("aria-"+l):!!r.getAttribute("aria-"+l)},getWaiState:function(r,l){return r.getAttribute("aria-"+l)||""},setWaiState:function(r,l,b){r.setAttribute("aria-"+
l,b)},removeWaiState:function(r,l){r.removeAttribute("aria-"+l)}});return s})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(r,u){u.getDocumentWindow=function(s){return r.get(s)}})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(r,u,s,t){return r("dijit.ToolbarSeparator",[s,t],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);
u.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g){r=r("dijit.TooltipDialog",[m,c,f,k],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,
templateString:e,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,"keydown",l.hitch(this,"_onKey")))},orient:function(b,a,d){b={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight",
"BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[a+"-"+d];u.replace(this.domNode,b,this._currentOrientClass||"");this._currentOrientClass=b},focus:function(){this._getFocusItems();p.focus(this._firstFocusItem)},onOpen:function(b){this.orient(this.domNode,b.aroundCorner,b.corner);var a=b.aroundNodePos;"M"==b.corner.charAt(0)&&"M"==
b.aroundCorner.charAt(0)?(this.connectorNode.style.top=a.y+(a.h-this.connectorNode.offsetHeight>>1)-b.y+"px",this.connectorNode.style.left=""):"M"==b.corner.charAt(1)&&"M"==b.aroundCorner.charAt(1)&&(this.connectorNode.style.left=a.x+(a.w-this.connectorNode.offsetWidth>>1)-b.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(b){if(b.keyCode==t.ESCAPE)this.defer("onCancel"),b.stopPropagation(),b.preventDefault();else if(b.keyCode==t.TAB){var a=b.target;this._getFocusItems();
this._firstFocusItem==this._lastFocusItem?(b.stopPropagation(),b.preventDefault()):a==this._firstFocusItem&&b.shiftKey?(p.focus(this._lastFocusItem),b.stopPropagation(),b.preventDefault()):a!=this._lastFocusItem||b.shiftKey?b.stopPropagation():(p.focus(this._firstFocusItem),b.stopPropagation(),b.preventDefault())}}});s("dojo-bidi")&&r.extend({_setTitleAttr:function(b){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,b):b;this._set("title",b)},_setTextDirAttr:function(b){this._created&&
this.textDir==b||(this._set("textDir",b),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return r})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/i18n!../nls/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),function(r,u,s,t,l,b,p,m,
k,f,c,e,g,q,a,d,n){return f("dijit.layout.ContentPane",[s,t,l],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:r._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,
_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,d){var c=new d(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=e.byId(b);for(var d=b.ownerDocument.createDocumentFragment();b.firstChild;)d.appendChild(b.firstChild);a=u.delegate(a,{content:d})}this.inherited(arguments,[a,b])},
postMixInProperties:function(){this.inherited(arguments);var a=d.getLocalization("dijit","loading",this.lang);this.loadingMessage=b.substitute(this.loadingMessage,a);this.errorMessage=b.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&k.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||
!u.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){k.forEach(this.getChildren(),function(a){a._started||a._destroyed||!u.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&k.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!u.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){r.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",
a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new c(u.hitch(this,"cancel"));this.onLoadDeferred.then(u.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){r.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=
new c(u.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(u.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);
if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new c(u.hitch(this,"cancel"));this.onLoadDeferred.then(u.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var b=this,d={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};u.isObject(this.ioArgs)&&u.mixin(d,this.ioArgs);var c=this._xhrDfd=
(this.ioMethod||a.get)(d),e;c.then(function(a){e=a;try{return b._isDownloaded=!0,b._setContent(a,!1)}catch(d){b._onError("Content",d)}},function(a){c.canceled||b._onError("Download",a);delete b._xhrDfd;return a}).then(function(){b.onDownloadEnd();delete b._xhrDfd;return e});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;k.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(k.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||
q.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var d=this._contentSetter;d&&d instanceof p._ContentSetter||(d=this._contentSetter=new p._ContentSetter({node:this.containerNode,_onError:u.hitch(this,this._onError),onContentError:u.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})}));var c=u.mixin({cleanContent:this.cleanContent,
extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),c=d.set(u.isObject(a)&&a.domNode?a.domNode:a,c),e=this;return n(c&&c.then?c:d.parseDeferred,function(){delete e._contentSetterParams;b||(e._started&&(e._startChildren(),e._scheduleLayout()),e._onLoadHandler(a))})},_onError:function(a,b,d){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);
d?console.error(d,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(r,u,s,t,l,b,p,m,k,f){return u("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var c=this.getParent();this._childOfLayoutWidget=c&&c.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(k.on("resize",b.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],e=!1;p("> *",this.containerNode).some(function(f){var k=m.byNode(f);k&&k.resize?b.push(k):!/script|link|style/i.test(f.nodeName)&&
f.offsetHeight&&(e=!0)});this._singleChild=1!=b.length||e?null:b[0];s.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,e){this._resizeCalled=!0;this._scheduleLayout(b,e)},_scheduleLayout:function(b,e){this._isShown()?this._layout(b,e):(this._needLayout=!0,this._changeSize=b,this._resultSize=e)},_layout:function(c,e){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();c&&t.setMarginBox(this.domNode,c);var g=this.containerNode;if(g===
this.domNode){var k=e||{};b.mixin(k,c||{});"h"in k&&"w"in k||(k=b.mixin(t.getMarginBox(g),k));this._contentBox=f.marginBox2contentBox(g,k)}else this._contentBox=t.getContentBox(g);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||t.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),e,f=0;e=b[f++];)e.resize&&e.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&
"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,e=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!s.contains(b,"dijitHidden")&&e&&e.style&&"none"!=e.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],
function(r,u,s,t,l){function b(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function p(b,f){var c=b.resize?b.resize(f):s.setMarginBox(b.domNode,f);c?l.mixin(b,c):(l.mixin(b,s.getMarginBox(b.domNode)),l.mixin(b,f))}var m={marginBox2contentBox:function(b,f){var c=t.getComputedStyle(b),e=s.getMarginExtents(b,c),g=s.getPadBorderExtents(b,c);return{l:t.toPixelValue(b,c.paddingLeft),t:t.toPixelValue(b,c.paddingTop),w:f.w-(e.w+g.w),h:f.h-(e.h+g.h)}},layoutChildren:function(k,f,c,e,g){f=l.mixin({},
f);u.add(k,"dijitLayoutContainer");c=r.filter(c,function(b){return"center"!=b.region&&"client"!=b.layoutAlign}).concat(r.filter(c,function(b){return"center"==b.region||"client"==b.layoutAlign}));r.forEach(c,function(c){var a=c.domNode,d=c.region||c.layoutAlign;if(!d)throw Error("No region setting for "+c.id);var k=a.style;k.left=f.l+"px";k.top=f.t+"px";k.position="absolute";u.add(a,"dijitAlign"+b(d));a={};e&&e==c.id&&(a["top"==c.region||"bottom"==c.region?"h":"w"]=g);"leading"==d&&(d=c.isLeftToRight()?
"left":"right");"trailing"==d&&(d=c.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(a.w=f.w,p(c,a),f.h-=c.h,"top"==d?f.t+=c.h:k.top=f.t+f.h+"px"):"left"==d||"right"==d?(a.h=f.h,p(c,a),f.w-=c.w,"left"==d?f.l+=c.w:k.left=f.l+f.w+"px"):"client"!=d&&"center"!=d||p(c,f)})}};l.setObject("dijit.layout.utils",m);return m})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(r,u,s,t,l,b,p){var m=0,k={_secureForInnerHtml:function(b){return b.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:b.empty,_setNodeContent:function(f,c){b.empty(f);if(c)if("string"==typeof c&&(c=b.toDom(c,f.ownerDocument)),!c.nodeType&&u.isArrayLike(c))for(var e=c.length,g=0;g<c.length;g=e==c.length?g+1:0)b.place(c[g],f,"last");else b.place(c,f,"last");return f},_ContentSetter:t("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:r._scopeName,startup:!0,constructor:function(b,c){u.mixin(this,b||{});c=this.node=l.byId(this.node||
c);this.id||(this.id=["Setter",c?c.id||c.tagName:"",m++].join("_"))},set:function(b,c){void 0!==b&&(this.content=b);c&&this._mixin(c);this.onBegin();this.setContent();var e=this.onEnd();return e&&e.then?e:this.node},setContent:function(){var b=this.node;if(!b)throw Error(this.declaredClass+": setContent given no node");try{b=k._setNodeContent(b,this.content)}catch(c){var e=this.onContentError(c);try{b.innerHTML=e}catch(g){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+
g.message,g)}}this.node=b},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(s.forEach(this.parseResults,function(b){b.destroy&&b.destroy()}),delete this.parseResults);b.empty(this.node)},onBegin:function(){var b=this.content;if(u.isString(b)&&(this.cleanContent&&(b=k._secureForInnerHtml(b)),this.extractContent)){var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(b=c[1])}this.empty();
this.content=b;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(b){return"Error occurred setting content: "+b},onExecError:function(b){return"Error occurred executing scripts: "+b},_mixin:function(b){var c={},e;for(e in b)e in c||(this[e]=b[e])},_parse:function(){var b=this.node;try{var c={};s.forEach(["dir","lang","textDir"],function(b){this[b]&&
(c[b]=this[b])},this);var e=this;this.parseDeferred=p.parse({rootNode:b,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(b){return e.parseResults=b},function(b){e._onError("Content",b,"Error parsing in _ContentSetter#"+this.id)})}catch(g){this._onError("Content",g,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(b,c,e){b=this["on"+b+"Error"].call(this,c);e?console.error(e,c):b&&k._setNodeContent(this.node,b,!0)}}),set:function(b,c,e){void 0==c&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
c="");return e?(new k._ContentSetter(u.mixin(e,{content:c,node:b}))).set():k._setNodeContent(b,c,!0)}};u.setObject("dojo.html",k);return k})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(r,u){return r("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var r=u._getTabNavigable(this.domNode);this._firstFocusItem=
r.lowest||r.first||this.closeButtonNode||this.domNode;this._lastFocusItem=r.last||r.highest||this._firstFocusItem}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(r,u,s,t,l,b){return u("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var l=[];r.forEach(b||this.getChildren(),function(b){"value"in b?l.push(b):l=l.concat(this._getDescendantFormWidgets(b.getChildren()))},
this);return l},reset:function(){r.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var l=!1;return r.every(r.map(this._getDescendantFormWidgets(),function(m){m._hasBeenBlurred=!0;var k=m.disabled||!m.validate||m.validate();k||l||(b.scrollIntoView(m.containerNode||m.domNode),m.focus(),l=!0);return k}),function(b){return b})},setValues:function(b){s.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",
b)},_setValueAttr:function(b){var l={};r.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(l[b.name]||(l[b.name]=[])).push(b)});for(var k in l)if(l.hasOwnProperty(k)){var f=l[k],c=t.getObject(k,!1,b);void 0!==c&&(c=[].concat(c),"boolean"==typeof f[0].checked?r.forEach(f,function(b){b.set("value",-1!=r.indexOf(c,b._get("value")))}):f[0].multiple?f[0].set("value",c):r.forEach(f,function(b,f){b.set("value",c[f])}))}},getValues:function(){s.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},_getValueAttr:function(){var b={};r.forEach(this._getDescendantFormWidgets(),function(l){var k=l.name;if(k&&!l.disabled){var f=l.get("value");"boolean"==typeof l.checked?/Radio/.test(l.declaredClass)?!1!==f?t.setObject(k,f,b):(f=t.getObject(k,!1,b),void 0===f&&t.setObject(k,null,b)):(l=t.getObject(k,!1,b),l||(l=[],t.setObject(k,l,b)),!1!==f&&l.push(f)):(l=t.getObject(k,!1,b),"undefined"!=typeof l?t.isArray(l)?l.push(f):t.setObject(k,[l,f],b):t.setObject(k,f,b))}});
return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=r.map(this._descendants,function(b){return b.get("state")||""});return 0<=r.indexOf(b,"Error")?"Error":0<=r.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();r.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){b&&"state"!=
b&&"disabled"!=b||this._set("state",this._getState());b&&"value"!=b&&"disabled"!=b&&"checked"!=b||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(l(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",
function(l){l.target!=b.domNode&&b._onChildChange(l.type.replace("attrmodified-",""))}));this.watch("state",function(b,k,f){this.onValidStateChange(""==f)})},destroy:function(){this.inherited(arguments)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(r,u,s){return r("dijit.form.RadioButton",[u,s],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(r,u,s,t,l,b){return u("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var p=[];l("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(t.hitch(this,function(l){l.name==this.name&&l.form==this.focusNode.form&&(l=b.getEnclosingWidget(l))&&p.push(l)}));return p},_setCheckedAttr:function(b){this.inherited(arguments);this._created&&b&&r.forEach(this._getRelatedWidgets(),t.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(b){return null==
b?"on":b},_onClick:function(b){return this.checked||this.disabled?(b.stopPropagation(),b.preventDefault(),!1):this.readOnly?(b.stopPropagation(),b.preventDefault(),r.forEach(this._getRelatedWidgets(),t.hitch(this,function(b){s.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(r,u,s,t){return r("dijit.CheckedMenuItem",
s,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:t,checked:!1,_setCheckedAttr:function(l){this.domNode.setAttribute("aria-checked",l?"true":"false");this._set("checked",l)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(l){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(l)}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),
function(r,u,s,t,l,b,p){return r("dijit.PopupMenuItem",p,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var b=t("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(b,k){var f=this.popup;l.open(s.delegate(b,{popup:this.popup,around:this.domNode}));k&&f.focus&&f.focus()},_closePopup:function(){l.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);
if(!this.popup){var l=t("[widgetId]",this.dropDownContainer)[0];this.popup=b.byNode(l)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&u.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(b){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(b),delete this.popup);
this.inherited(arguments)}})})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A,z,B,C,E,D,H,L,T,I,Z){var N=new l;N.resolve(!0);z=t("dijit._DialogBase"+(d("dojo-bidi")?"_NoBidi":""),[C,D,H,E],{templateString:Z,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:z.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,
_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=c.getLocalization("dijit","common");g.mixin(this,a);this.inherited(arguments)},postCreate:function(){k.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);s.after(this,"onExecute",g.hitch(this,"hide"),!0);s.after(this,"onCancel",g.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this.resize();
this._position();this.autofocus&&K.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();A.focus(this._firstFocusItem)},_endDrag:function(){var a=m.position(this.domNode),b=n.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==d("ie")?y:
v)(a,{handle:this.titleBar}),s.after(this._moveable,"onMoveStop",g.hitch(this,"_endDrag"),!0)):p.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":u.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:g.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!p.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=n.getBox(this.ownerDocument),d=this._relativePosition,c=d?null:
m.position(a);k.set(a,{left:Math.floor(b.l+(d?d.x:(b.w-c.w)/2))+"px",top:Math.floor(b.t+(d?d.y:(b.h-c.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==e.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(A.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey||(A.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&
a.keyCode==e.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return N.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),K.hide(this));var a=n.get(this.ownerDocument);this._modalconnects.push(q(a,"scroll",g.hitch(this,"resize",null)));this._modalconnects.push(q(this.domNode,"keydown",g.hitch(this,"_onKey")));k.set(this.domNode,{opacity:0,display:""});
this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new l(g.hitch(this,function(){b.stop();delete this._fadeInDeferred}));a=this._fadeInDeferred.promise;b=f.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:g.hitch(this,function(){K.show(this,this.underlayAttrs)}),onEnd:g.hitch(this,function(){this.autofocus&&K.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();
return a},hide:function(){if(!this._alreadyInitialized||!this.open)return N.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new l(g.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(g.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=f.fadeOut({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,function(){this.domNode.style.display="none";K.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();
this._scrollConnected&&(this._scrollConnected=!1);for(var d;d=this._modalconnects.pop();)d.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),u.forEach([this.domNode,this.containerNode,
this.titleBar],function(a){k.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=n.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var c=m.position(this.domNode);c.w>=b.w||c.h>=b.h?(a={w:Math.min(c.w,b.w),h:Math.min(c.h,b.h)},this._shrunk=!0):this._shrunk=!1}a?(m.setMarginBox(this.domNode,a),b=I.marginBox2contentBox(this.domNode,a),c={domNode:this.containerNode,region:"center"},I.layoutChildren(this.domNode,b,[{domNode:this.titleBar,
region:"top"},c]),this._singleChild?(b=I.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())):this._layoutChildren();d("touch")||a||this._position()}},_layoutChildren:function(){u.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();
for(var a;a=this._modalconnects.pop();)a.remove();K.hide(this);this.inherited(arguments)}});d("dojo-bidi")&&(z=t("dijit._DialogBase",z,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var x=t("dijit.Dialog",[T,z],{});x._DialogBase=z;var K=x._DialogLevelManager={_beginZIndex:950,show:function(a,b){G[G.length-1].focus=A.curNode;
var d=G[G.length-1].dialog?G[G.length-1].zIndex+2:x._DialogLevelManager._beginZIndex;k.set(a.domNode,"zIndex",d);L.show(b,d-1);G.push({dialog:a,underlayAttrs:b,zIndex:d})},hide:function(a){if(G[G.length-1].dialog==a){G.pop();var d=G[G.length-1];1==G.length?L.hide():L.show(d.underlayAttrs,d.zIndex-1);if(a.refocus&&(a=d.focus,!d.dialog||a&&b.isDescendant(a,d.dialog.domNode)||(d.dialog._getFocusItems(),a=d.dialog._firstFocusItem),a))try{a.focus()}catch(c){}}else d=u.indexOf(u.map(G,function(a){return a.dialog}),
a),-1!=d&&G.splice(d,1)},isTop:function(a){return G[G.length-1].dialog==a}},G=x._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(a,b,d){a=G[G.length-1].dialog;if(d&&a&&!a._fadeOutDeferred&&d.ownerDocument==a.ownerDocument){do if(d==a.domNode||p.contains(d,"dijitPopup"))return;while(d=d.parentNode);a.focus()}});d("dijit-legacy-requires")&&a(0,function(){r(["dijit/TooltipDialog"])});return x})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e){return u("dojo.dnd.Moveable",[b],{handle:"",delay:0,skip:!1,constructor:function(b,e){this.node=t.byId(b);e||(e={});this.handle=e.handle?t.byId(e.handle):null;this.handle||(this.handle=this.node);this.delay=0<e.delay?e.delay:0;this.skip=e.skip;this.mover=e.mover?e.mover:c;this.events=[p(this.handle,k.press,s.hitch(this,"onMouseDown")),p(this.handle,"dragstart",s.hitch(this,"onSelectStart")),p(this.handle,"selectstart",s.hitch(this,"onSelectStart"))]},markupFactory:function(b,
c,a){return new a(c,b)},destroy:function(){r.forEach(this.events,function(b){b.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!f.isFormElement(b)){if(this.delay)this.events.push(p(this.handle,k.move,s.hitch(this,"onMouseMove")),p(this.handle,k.release,s.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(b){if(Math.abs(b.pageX-this._lastX)>this.delay||
Math.abs(b.pageY-this._lastY)>this.delay)this.onMouseUp(b),this.onDragDetected(b);b.stopPropagation();b.preventDefault()},onMouseUp:function(b){for(var c=0;2>c;++c)this.events.pop().remove();b.stopPropagation();b.preventDefault()},onSelectStart:function(b){this.skip&&f.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onDragDetected:function(b){new this.mover(this.node,b,this)},onMoveStart:function(b){m.publish("/dnd/move/start",b);l.add(e.body(),"dojoMove");l.add(this.node,"dojoMoveItem")},
onMoveStop:function(b){m.publish("/dnd/move/stop",b);l.remove(e.body(),"dojoMove");l.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(b,c){this.onMoving(b,c);var a=b.node.style;a.left=c.l+"px";a.top=c.t+"px";this.onMoved(b,c)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g){return u("dojo.dnd.Mover",[k],{constructor:function(e,a,d){function k(a){a.preventDefault();a.stopPropagation()}this.node=b.byId(e);this.marginBox={l:a.pageX,t:a.pageY};this.mouseButton=a.button;a=this.host=d;e=e.ownerDocument;this.events=[f(e,c.move,s.hitch(this,"onFirstMove")),f(e,c.move,s.hitch(this,"onMouseMove")),f(e,c.release,s.hitch(this,"onMouseUp")),f(e,"dragstart",k),f(e.body,"selectstart",k)];g.autoScrollStart(e);if(a&&a.onMoveStart)a.onMoveStart(this)},
onMouseMove:function(b){g.autoScroll(b);var a=this.marginBox;this.host.onMove(this,{l:a.l+b.pageX,t:a.t+b.pageY},b);b.preventDefault();b.stopPropagation()},onMouseUp:function(b){(t("webkit")&&t("mac")&&2==this.mouseButton?0==b.button:this.mouseButton==b.button)&&this.destroy();b.preventDefault();b.stopPropagation()},onFirstMove:function(b){var a=this.node.style,d,c=this.host;switch(a.position){case "relative":case "absolute":d=Math.round(parseFloat(a.left))||0;a=Math.round(parseFloat(a.top))||0;break;
default:a.position="absolute";a=p.getMarginBox(this.node);d=l.doc.body;var e=m.getComputedStyle(d),f=p.getMarginBox(d,e),e=p.getContentBox(d,e);d=a.l-(e.l-f.l);a=a.t-(e.t-f.t)}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=a-this.marginBox.t;if(c&&c.onFirstMove)c.onFirstMove(this,b);this.events.shift().remove()},destroy:function(){r.forEach(this.events,function(a){a.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(r,u){var s=u.prototype.onMove;return r("dojo.dnd.TimedMoveable",u,{timeout:40,constructor:function(r,l){l||(l={});l.timeout&&"number"==typeof l.timeout&&0<=l.timeout&&(this.timeout=l.timeout)},onMoveStop:function(r){r._timer&&(clearTimeout(r._timer),s.call(this,r,r._leftTop));u.prototype.onMoveStop.apply(this,arguments)},onMove:function(r,l){r._leftTop=l;if(!r._timer){var b=this;r._timer=setTimeout(function(){r._timer=null;s.call(b,r,r._leftTop)},this.timeout)}}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e){var g=r("dijit.DialogUnderlay",[m,k],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(b){t.set(this.node,"id",b+"_underlay");this._set("dialogId",b)},_setClassAttr:function(b){this.node.className="dijitDialogUnderlay "+b;this._set("class",b)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(b(this.domNode,"keydown",u.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var b=this.node.style,a=this.domNode.style;a.display="none";var d=p.getBox(this.ownerDocument);a.top=d.t+"px";a.left=d.l+"px";b.width=d.w+"px";b.height=d.h+"px";a.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new f(this.domNode);var e=p.get(this.ownerDocument);this._modalConnects=[c.on("resize",u.hitch(this,"layout")),b(e,"scroll",
u.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});g.show=function(b,a){var d=g._singleton;!d||d._destroyed?d=e._underlay=g._singleton=new g(b):b&&d.set(b);l.set(d.domNode,"zIndex",a);d.open||d.show()};g.hide=function(){var b=
g._singleton;b&&!b._destroyed&&b.hide()};return g})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(r,u,s,t,l,b,p,m){s("dijit-legacy-requires")&&l(0,function(){r(["dijit/ToolbarSeparator"])});return u("dijit.Toolbar",[b,m,p],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},
_onRightArrow:function(){this.focusNext()}})})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),function(r,u,s,t,l,b,p,m){return u("dijit.ProgressBar",[b,p],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:m,_indeterminateHighContrastImagePath:r.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);
this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update()},_setDirAttr:function(b){s.toggle(this.domNode,"dijitProgressBarRtl","rtl"==b);s.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&"rtl"==b);this.inherited(arguments)},update:function(b){t.mixin(this,b||{});b=this.internalProgress;
var f=this.domNode,c=1;this.indeterminate?f.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(c=Math.min(parseFloat(this.progress)/100,1),this.progress=c*this.maximum):(this.progress=Math.min(this.progress,this.maximum),c=this.maximum?this.progress/this.maximum:0),f.setAttribute("aria-valuenow",this.progress));f.setAttribute("aria-labelledby",this.labelNode.id);f.setAttribute("aria-valuemin",0);f.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(c);
s.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);s.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());b.style.width=100*c+"%";this.onChange()},_setValueAttr:function(b){this._set("value",b);Infinity==b?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:b})},_setLabelAttr:function(b){this._set("label",b);this.update()},_setIndeterminateAttr:function(b){this._set("indeterminate",b);this.update()},report:function(b){return this.label?
this.label:this.indeterminate?"&#160;":l.format(b,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(r,u,s,t,l,b,p,m,k,f,c){m=r("dijit.form.TextBox"+(p("dojo-bidi")?"_NoBidi":""),[m,k],{templateString:f,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:p("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>p("ie")&&this.defer(function(){try{var b=s.getComputedStyle(this.domNode);if(b){var c=b.fontFamily;
if(c){var f=this.domNode.getElementsByTagName("INPUT");if(f)for(b=0;b<f.length;b++)f[b].style.fontFamily=c}}}catch(a){}})},_setPlaceHolderAttr:function(c){this._set("placeHolder",c);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=u.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(b(this._phspan,"mousedown",function(b){b.preventDefault()}),b(this._phspan,"touchend, pointerup, MSPointerUp",l.hitch(this,function(){this.focus()}))));this._phspan.innerHTML=
"";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(c));this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(b,c,f){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){t.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.",
"","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){t.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),p("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});
9>p("ie")&&(m.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();return b.parentElement()==this.textbox&&0<b.text.length},c._setSelectionRange=k._setSelectionRange=function(b,c,f){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",-99999),b.moveStart("character",c),b.moveEnd("character",f-c),b.select())});p("dojo-bidi")&&(m=r("dijit.form.TextBox",m,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));
return m})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(r,u,s,t,l,b,p,m){var k=u("dijit.form._TextBoxMixin"+(t("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(b,c,e){var g;void 0!==b&&(g=this.filter(b),
"string"!=typeof e&&(e=null===g||"number"==typeof g&&isNaN(g)?"":this.filter(this.format(g,this.constraints)),0!=this.compare(g,this.filter(this.parse(e,this.constraints)))&&(e=null)));null==e||"number"==typeof e&&isNaN(e)||this.textbox.value==e||(this.textbox.value=e,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[g,c])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(b){null==b?b="":"string"!=
typeof b&&(b=String(b));this.textbox.value=b;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(b){return null==b?"":b.toString?b.toString():b},parse:function(b){return b},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(b){this._processInput(b);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(b){this._refreshState();this._set("displayedValue",
this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(p(this.textbox,"keydown, keypress, paste, cut, input, compositionend",b.hitch(this,function(f){var c;if("keydown"==f.type){c=f.keyCode;switch(c){case l.SHIFT:case l.ALT:case l.CTRL:case l.META:case l.CAPS_LOCK:case l.NUM_LOCK:case l.SCROLL_LOCK:return}if(!f.ctrlKey&&!f.metaKey&&!f.altKey){switch(c){case l.NUMPAD_0:case l.NUMPAD_1:case l.NUMPAD_2:case l.NUMPAD_3:case l.NUMPAD_4:case l.NUMPAD_5:case l.NUMPAD_6:case l.NUMPAD_7:case l.NUMPAD_8:case l.NUMPAD_9:case l.NUMPAD_MULTIPLY:case l.NUMPAD_PLUS:case l.NUMPAD_ENTER:case l.NUMPAD_MINUS:case l.NUMPAD_PERIOD:case l.NUMPAD_DIVIDE:return}if(65<=
c&&90>=c||48<=c&&57>=c||c==l.SPACE)return;c=!1;for(var e in l)if(l[e]===f.keyCode){c=!0;break}if(!c)return}}(c=32<=f.charCode?String.fromCharCode(f.charCode):f.charCode)||(c=65<=f.keyCode&&90>=f.keyCode||48<=f.keyCode&&57>=f.keyCode||f.keyCode==l.SPACE?String.fromCharCode(f.keyCode):f.keyCode);c||(c=229);if("keypress"==f.type){if("string"!=typeof c)return;if("a"<=c&&"z">=c||"A"<=c&&"Z">=c||"0"<=c&&"9">=c||" "===c)if(f.ctrlKey||f.metaKey||f.altKey)return}if("input"==f.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var g={faux:!0},k;for(k in f)/^(layer[XY]|returnValue|keyLocation)$/.test(k)||(e=f[k],"function"!=typeof e&&"undefined"!=typeof e&&(g[k]=e));b.mixin(g,{charOrCode:c,_wasConsumed:!1,preventDefault:function(){g._wasConsumed=!0;f.preventDefault()},stopPropagation:function(){f.stopPropagation()}});!1===this.onInput(g)&&(g.preventDefault(),g.stopPropagation());g._wasConsumed||this.defer(function(){this._onInput(g)})})),p(this.domNode,"keypress",function(b){b.stopPropagation()}))},
_blankValue:"",filter:function(f){if(null===f)return this._blankValue;if("string"!=typeof f)return f;this.trim&&(f=b.trim(f));this.uppercase&&(f=f.toUpperCase());this.lowercase&&(f=f.toLowerCase());this.propercase&&(f=f.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return f},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(b){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=
this.textbox.selectionEnd},_onFocus:function(f){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==f&&(this._selectOnClickHandle=p.once(this.domNode,"mouseup, touchend",b.hitch(this,function(b){this._isTextSelected()||k.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value=
"";this.inherited(arguments)}});t("dojo-bidi")&&(k=u("dijit.form._TextBoxMixin",k,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));k._setSelectionRange=m._setSelectionRange=function(b,c,e){b.setSelectionRange&&b.setSelectionRange(c,e)};k.selectInputText=m.selectInputText=function(b,c,
e){b=s.byId(b);isNaN(c)&&(c=0);isNaN(e)&&(e=b.value?b.value.length:0);try{b.focus(),k._setSelectionRange(b,c,e)}catch(g){}};return k})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(r,u,s){return r("dijit.form.DateTextBox",s,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:u,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n){var v=t("dijit.Calendar",[g,q,a],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){m.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new v._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:f.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"keydown",f.hitch(this,"_onKeyDown")),c(this.dateRowsNode,"mouseover",f.hitch(this,"_onDayMouseOver")),c(this.dateRowsNode,"mouseout",f.hitch(this,"_onDayMouseOut")),c(this.dateRowsNode,"mousedown",f.hitch(this,"_onDayMouseDown")),c(this.dateRowsNode,"mouseup",f.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var d=this.currentFocus.getDate();b.setDate(Math.min(d,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=b.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(b.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||
a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",b.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),b.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")&&(b.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&b.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,d,c=this.currentFocus;switch(a.keyCode){case k.RIGHT_ARROW:b=1;case k.LEFT_ARROW:d="day";this.isLeftToRight()||(b*=-1);break;case k.DOWN_ARROW:b=1;case k.UP_ARROW:d="week";break;case k.PAGE_DOWN:b=1;case k.PAGE_UP:d=a.ctrlKey||a.altKey?"year":"month";break;case k.END:c=this.dateModule.add(c,"month",1),d="day";case k.HOME:c=new this.dateClassObj(c);c.setDate(1);break;default:return!0}d&&(c=this.dateModule.add(c,d,b));this._setCurrentFocusAttr(c);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});v._MonthDropDownButton=t("dijit.Calendar._MonthDropDownButton",n,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new v._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==e("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});v._MonthDropDown=t("dijit.Calendar._MonthDropDown",[q,d,a],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"<div data-dojo-attach-event='ondijitclick:_onClick'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML="";r.forEach(a,function(a,b){p.create("div",
{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(l.get(a.target,"month"))},onChange:function(){}});return v})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a){var d=u("dijit.CalendarLite",[g,q],{templateString:a,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,
d){"string"==typeof a&&(a=b.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(d||"undefined"==typeof d))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),d=this.dateModule.getDaysInMonth(a),c=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),e=new this.dateClassObj,f=s.getFirstDayOfWeek(this.lang);f>b&&(f-=7);if(!this.summary){var g=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",g[a.getMonth()])}this._date2cell={};r.forEach(this.dateCells,function(g,
k){var l=k+f,m=new this.dateClassObj(a),p="dijitCalendar",q=0;l<b?(l=c-b+l+1,q=-1,p+="Previous"):l>=b+d?(l=l-b-d+1,q=1,p+="Next"):(l=l-b+1,p+="Current");q&&(m=this.dateModule.add(m,"month",q));m.setDate(l);this.dateModule.compare(m,e,"date")||(p="dijitCalendarCurrentDate "+p);this.isDisabledDate(m,this.lang)?(p="dijitCalendarDisabledDate "+p,g.setAttribute("aria-disabled","true")):(p="dijitCalendarEnabledDate "+p,g.removeAttribute("aria-disabled"),g.setAttribute("aria-selected","false"));(q=this.getClassForDate(m,
this.lang))&&(p=q+" "+p);g.className=p+"Month dijitCalendarDateTemplate";p=m.valueOf();this._date2cell[p]=g;g.dijitDateValue=p;this._setText(this.dateLabels[k],m.getDateLocalized?m.getDateLocalized(this.lang):m.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,d=new this.dateClassObj;r.forEach(["previous","current","next"],function(a){d.setFullYear(b++);this._setText(this[a+"YearLabelNode"],
this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?k.getObject(a.datePackage,!1):t;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?k.getObject(a.datePackage+".locale",!1):l},_createMonthWidget:function(){return d._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=
this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=s.getFirstDayOfWeek(this.lang);this.dayCellsHtml=e.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[d++%7]});a=e.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);p.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();
this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=k.hitch(this,function(a,b,d){this[a].dojoClick=!0;return f(this[a],"click",k.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,d))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var d=this.currentFocus,
e=this._getNodeByDate(d);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(d,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));d=this._getNodeByDate(a);d.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&d.focus();e&&e!=d&&(c("webkit")?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();
a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!m.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,d){m.toggle(d,"dijitCalendarSelectedDate",a);d.setAttribute("aria-selected",a?"true":"false")}r.forEach(this._selectedCells||[],k.partial(b,!1));this._selectedCells=r.filter(r.map(a,this._getNodeByDate,
this),function(a){return a});r.forEach(this._selectedCells,k.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});d._MonthWidget=u("dijit.CalendarLite._MonthWidget",g,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),d=6==c("ie")?"":"<div class='dijitSpacer'>"+r.map(b,function(a){return"<div>"+a+"</div>"}).join("")+"</div>";this.domNode.innerHTML=d+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+
b[a.getMonth()]+"</div>"}});return d})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(r,u,s,t,l,b,p,m){new Date("X");return t("dijit.form._DateTimeTextBox",[b,p],{templateString:m,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:u.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);
this._set("type","text")},compare:function(b,f){var c=this._isInvalidDate(b),e=this._isInvalidDate(f);if(c||e)return c&&e?0:c?-1:1;var c=this.format(b,this._unboundedConstraints),e=this.format(f,this._unboundedConstraints),g=this.parse(c,this._unboundedConstraints),l=this.parse(e,this._unboundedConstraints);return c==e?0:r.compare(g,l,this._selector)},autoWidth:!0,format:function(b,f){return b?this.dateLocaleModule.format(b,f):""},parse:function(b,f){return this.dateLocaleModule.parse(b,f)||(this._isEmpty(b)?
null:void 0)},serialize:function(b,f){b.toGregorian&&(b=b.toGregorian());return s.toISOString(b,f)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){b=b||{};this.dateModule=b.datePackage?l.getObject(b.datePackage,!1):r;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?l.getObject(b.datePackage+".locale",!1):u;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},
buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=this._selector;b.fullYear=!0;var f=s.fromISOString;"string"==typeof b.min&&(b.min=f(b.min));"string"==typeof b.max&&(b.max=f(b.max));this.inherited(arguments);this._unboundedConstraints=l.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(b){return!b||
isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,f,c){void 0!==b&&("string"==typeof b&&(b=s.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments);this.value instanceof Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,f){var c=this._get("value");"value"==b&&c instanceof Date&&0==this.compare(f,c)||this.inherited(arguments)},
_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var f=l.isString(this.popupClass)?l.getObject(this.popupClass,!1):this.popupClass,c=this,e=this.get("value");this.dropDown=new f({onChange:function(b){c.set("value",b,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:e,textDir:c.textDir,currentFocus:this._isInvalidDate(e)?this.dropDownDefaultValue:e,constraints:c.constraints,
filterString:c.filterString,datePackage:c.datePackage,isDisabledDate:function(b){return!c.rangeCheck(b,c.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,f){this._setValueAttr(this.parse(b,this.constraints),f,b)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(r,u,s){return r("dijit.form.RangeBoundTextBox",s,{rangeMessage:"",
rangeCheck:function(r,l){return("min"in l?0<=this.compare(r,l.min):!0)&&("max"in l?0>=this.compare(r,l.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var r=this.get("value");if(null==r)return!1;var l=!1;"min"in this.constraints&&(l=this.constraints.min,l=0>this.compare(r,"number"==typeof l&&0<=l&&0!=r?0:l));!l&&"max"in this.constraints&&(l=this.constraints.max,l=0<this.compare(r,"number"!=typeof l||0<l?l:0));return l},
_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(r){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(r))},getErrorMessage:function(r){var l=this.get("value");return null==l||""===l||"number"==typeof l&&isNaN(l)||this.isInRange(r)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=u.getLocalization("dijit.form",
"validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(r,u,s,t){return r("dijit.form.MappedTextBox",t,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(l){return l.toString?l.toString():""},toString:function(){var l=this.filter(this.get("value"));return null!=l?"string"==
typeof l?l:this.serialize(l,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=s.place("<input type='hidden'"+(this.name&&!u("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(r,u,s,t,l,b,p){var m;return m=r("dijit.form.ValidationTextBox",l,{templateString:p,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,f){f!=m.prototype[b]&&(u.deprecated("ValidationTextBox id="+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",f))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",
b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(b,f){return RegExp("^(?:"+this._computeRegexp(f)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,f))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,f="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?f:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var f=
"",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var e=this._isEmpty(this.textbox.value),g=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||b)&&e||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=b&&g,f=this.getErrorMessage(b)):"Incomplete"==this.state?(f=this.getPromptMessage(b),this._maskValidSubsetError=
!this._hasBeenBlurred||b):e&&(f=this.getPromptMessage(b));this.set("message",f);return c},displayMessage:function(k){k&&this.focused?b.show(k,this.domNode,this.tooltipPosition,!this.isLeftToRight()):b.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints=s.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&
this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},_computeRegexp:function(b){var f=this.pattern;"function"==typeof f&&(f=f.call(this,b));if(f!=this._lastRegExp){var c="";this._lastRegExp=f;".*"!=f&&f.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=b;break;case ")":c+="|$)";break;default:c+=
"(?:"+b+"|$)"}});try{"".search(c)}catch(e){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return f},postMixInProperties:function(){this.inherited(arguments);this.messages=t.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",
b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){b.hide(this.domNode);this.inherited(arguments)}})})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(r,u,s,t,l,b,p,m){return r("dijit.form.Form",[l,b,p,m],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){u.set(this.domNode,"encType",
b);t("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var f={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(f)&&f.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var f=this.constructor.prototype;if(this.execute!=f.execute||
this.onExecute!=f.onExecute)s.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(r,
u,s,t,l){return r("dijit.form.FilteringSelect",[t,l],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(b,l,m,k){l&&l[this.searchAttr]!==this._lastQuery||!l&&b.length&&this.store.getIdentity(b[0])!=this._lastQuery||(b.length?this.set("item",b[0],k):this.set("value","",k||void 0===k&&!this.focused,
this.textbox.value,null))},_openResultList:function(b,l,m){l[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(b,l,m,k){this._onChangeActive||(l=null);if(void 0===k){if(null===b||""===b)if(b="",!u.isString(m)){this._setDisplayedValueAttr(m||"",l);return}var f=this;this._lastQuery=b;s(this.store.get(b),function(b){f._callbackSetLabel(b?
[b]:[],void 0,void 0,l)})}else this.valueNode.value=b,this.inherited(arguments,[b,l,m,k])},_setItemAttr:function(b,l,m){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(b){return b.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(b,l){null==b&&(b="");if(!this._created){if(!("displayedValue"in this.params))return;l=!1}if(this.store){this.closeDropDown();var m=u.clone(this.query),k=this._getDisplayQueryString(b),f;this.store._oldAPI?
f=k:(f=this._patternToRegExp(k),f.toString=function(){return k});this._lastQuery=m[this.searchAttr]=f;this._lastDisplayedValue=this.textbox.value=b;this._set("displayedValue",b);var c=this,e={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};u.mixin(e,this.fetchProperties);this._fetchHandle=this.store.query(m,e);s(this._fetchHandle,function(b){c._fetchHandle=null;c._callbackSetLabel(b||[],m,e,l)},function(b){c._fetchHandle=null;c._cancelingQuery||console.error("dijit.form.FilteringSelect: "+b.toString())})}},
undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(r,u,s,t,l,b,p,m,k){return r("dijit.form.ComboBoxMixin",[m,b],{dropDownClass:p,hasDownArrow:!0,templateString:k,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},
_setHasDownArrowAttr:function(b){this._set("hasDownArrow",b);this._buttonNode.style.display=b?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||t.mixin(b,{_oldAPI:!0,get:function(b){var e=new u;this.fetchItemByIdentity({identity:b,onItem:function(b){e.resolve(b)},onError:function(b){e.reject(b)}});return e.promise},query:function(b,e){var f=new u(function(){k.abort&&k.abort()});f.total=new u;var k=this.fetch(t.mixin({query:b,
onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},e));return l(f)}});this._set("store",b)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var c=this.declaredClass;t.mixin(this.store,{getValue:function(b,f){s.deprecated(c+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");
return b[f]},getLabel:function(b){s.deprecated(c+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return b.name},fetch:function(b){s.deprecated(c+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],t.hitch(this,function(c){(new c({objectStore:this})).fetch(b)}))}})}}})})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c){u=u("dijit.form._AutoCompleterMixin",c,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(b){var c=0;if("number"==typeof b.selectionStart)c=b.selectionStart;else if(m("ie")){var f=b.ownerDocument.selection.createRange().duplicate();b=b.createTextRange();f.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",f),c=String(b.text).replace(/\r/g,"").length}catch(a){}}return c},
_setCaretPos:function(b,c){c=parseInt(c);f.selectInputText(b,c,c)},_setDisabledAttr:function(b){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",b?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var c=b.charCode||b.keyCode;if(c!=t.ALT&&c!=t.CTRL&&c!=t.META&&c!=t.SHIFT){var f=this.dropDown,a=null;this._abortQuery();this.inherited(arguments);if(!(b.altKey||b.ctrlKey||b.metaKey))switch(this._opened&&(a=f.getHighlightedOption()),c){case t.PAGE_DOWN:case t.DOWN_ARROW:case t.PAGE_UP:case t.UP_ARROW:this._opened&&
this._announceOption(a);b.stopPropagation();b.preventDefault();break;case t.ENTER:if(a){if(a==f.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(a==f.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case t.TAB:c=this.get("displayedValue");if(f&&(c==f._messages.previousMessage||c==f._messages.nextMessage))break;
a&&this._selectOption(a);case t.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(b){var c=this.focusNode;f.selectInputText(c,c.value.length);var k=this.ignoreCase?"toLowerCase":"substr";0==b[k](0).indexOf(this.focusNode.value[k](0))?(k=this.autoComplete?this._getCaretPos(c):c.value.length,k+1>c.value.length&&(c.value=b,f.selectInputText(c,k))):(c.value=b,f.selectInputText(c))},_openResultList:function(b,c,f){var a=this.dropDown.getHighlightedOption();
this.dropDown.clearResultList();b.length||0!=f.start?(this._nextSearch=this.dropDown.onPage=l.hitch(this,function(a){b.nextPage(-1!==a);this.focus()}),this.dropDown.createOptions(b,f,l.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in f?(f.direction?this.dropDown.highlightFirstOption():f.direction||this.dropDown.highlightLastOption(),a&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(c[this.searchAttr].toString())||
this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var b=this.get("displayedValue"),c=this.dropDown;
!c||b!=c._messages.previousMessage&&b!=c._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",b)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(b,c,f){var a="";b&&(f||(f=this.store._oldAPI?this.store.getValue(b,this.searchAttr):b[this.searchAttr]),a=this._getValueField()!=this.searchAttr?
this.store.getIdentity(b):f);this.set("value",a,c,f,b)},_announceOption:function(b){if(b){var c;if(b==this.dropDown.nextButton||b==this.dropDown.previousButton)c=b.innerHTML,this.item=void 0,this.value="";else{var f=this.dropDown.items[b.getAttribute("item")];c=(this.store._oldAPI?this.store.getValue(f,this.searchAttr):f[this.searchAttr]).toString();this.set("item",f,!1,c)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",
s.get(b,"id"));this._autoCompleteText(c)}},_selectOption:function(b){this.closeDropDown();b&&this._announceOption(b);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(b){if(!this.dropDown){var c=this.id+"_popup";this.dropDown=new (l.isString(this.dropDownClass)?
l.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:l.hitch(this,this._selectOption),id:c,dir:this.dir,textDir:this.textDir})}this._lastInput=b;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new k({},this.srcNodeRef),!("value"in this.params))){var b=this.item=this.store.fetchSelectedItem();if(b){var c=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,
c):b[c]}}},postCreate:function(){var c=b('label[for="'+this.id+'"]');c.length&&(c[0].id||(c[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",c[0].id));this.inherited(arguments);r.after(this,"onSearch",l.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(b){b=this.labelFunc(b,this.store);var c=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),c="html");return{html:"html"==c,label:b}},doHighlight:function(b,
c){var f=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),a=this.queryExpr.indexOf("${0}");c=p.escapeString(c);return this._escapeHtml(b.replace(RegExp((0==a?"^":"")+"("+c+")"+(a==this.queryExpr.length-4?"$":""),f),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(b){return b=String(b).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;
this.inherited(arguments)},labelFunc:function(b,c){return(c._oldAPI?c.getValue(b,this.labelAttr||this.searchAttr):b[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(b,c,f,a){this._set("item",a||null);null==b&&(b="");this.inherited(arguments)}});m("dojo-bidi")&&u.extend({_setTextDirAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",b)}});return u})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),
function(r,u,s,t,l,b){function p(b){return{id:b.value,value:b.value,name:s.trim(b.innerText||b.textContent||"")}}return r("dijit.form.DataList",l,{constructor:function(l,k){this.domNode=u.byId(k);s.mixin(this,l);this.id&&b.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:t("option",this.domNode).map(p)}])},destroy:function(){b.remove(this.id)},fetchSelectedItem:function(){var b=t("> option[selected]",this.domNode)[0]||t("> option",this.domNode)[0];return b&&p(b)}})})},"dojo/store/Memory":function(){define(["../_base/declare",
"./util/QueryResults","./util/SimpleQueryEngine"],function(r,u,s){return r("dojo.store.Memory",null,{constructor:function(r){for(var l in r)this[l]=r[l];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:s,get:function(r){return this.data[this.index[r]]},getIdentity:function(r){return r[this.idProperty]},put:function(r,l){var b=this.data,p=this.index,m=this.idProperty,m=r[m]=l&&"id"in l?l.id:m in r?r[m]:Math.random();if(m in p){if(l&&!1===l.overwrite)throw Error("Object already exists");
b[p[m]]=r}else p[m]=b.push(r)-1;return m},add:function(r,l){(l=l||{}).overwrite=!1;return this.put(r,l)},remove:function(r){var l=this.index,b=this.data;if(r in l)return b.splice(l[r],1),this.setData(b),!0},query:function(r,l){return u(this.queryEngine(r,l)(this.data))},setData:function(r){r.items?(this.idProperty=r.identifier||this.idProperty,r=this.data=r.items):this.data=r;this.index={};for(var l=0,b=r.length;l<b;l++)this.index[r[l][this.idProperty]]=l}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],
function(r){return function(u,s){function t(b){b=r.filter(b,u);var l=s&&s.sort;l&&b.sort("function"==typeof l?l:function(b,f){for(var c,e=0;c=l[e];e++){var g=b[c.attribute],m=f[c.attribute],g=null!=g?g.valueOf():g,m=null!=m?m.valueOf():m;if(g!=m)return!!c.descending==(null==g||g>m)?-1:1}return 0});if(s&&(s.start||s.count)){var m=b.length;b=b.slice(s.start||0,(s.start||0)+(s.count||Infinity));b.total=m}return b}switch(typeof u){default:throw Error("Can not query with a "+typeof u);case "object":case "undefined":var l=
u;u=function(b){for(var p in l){var m=l[p];if(m&&m.test){if(!m.test(b[p],b))return!1}else if(m!=b[p])return!1}return!0};break;case "string":if(!this[u])throw Error("No filter function "+u+" was found in store");u=this[u];case "function":}t.matches=u;return t}})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(r,u,s,t,l,b,p){return r("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,
fetchProperties:{},query:{},list:"",_setListAttr:function(b){this._set("list",b)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(b){return RegExp("^"+b.replace(/(\\.)|(\*)|(\?)|\W/g,function(b,f,c,e){return c?".*":e?".":f?f:"\\"+b})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&
(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(b){if(!this.disabled&&!this.readOnly){var k=b.charOrCode;if(!("type"in b&&"key"==b.type.substring(0,3)&&(b.altKey||(b.ctrlKey||b.metaKey)&&"x"!=k&&"v"!=k||k==u.SHIFT))){this._prev_key_backspace=b=!1;switch(k){case u.DELETE:case u.BACKSPACE:b=this._maskValidSubsetError=this._prev_key_backspace=
!0;break;default:b="string"==typeof k||229==k}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(m){this._abortQuery();var k=this,f=s.clone(this.query),c={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},e=l.substitute(this.queryExpr,[m.replace(/([\\\*\?])/g,"\\$1")]),g,p=function(){var a=k._fetchHandle=k.store.query(f,
c);k.disabled||k.readOnly||g!==k._lastQuery||b(a,function(d){k._fetchHandle=null;k.disabled||k.readOnly||g!==k._lastQuery||b(a.total,function(a){d.total=a;var b=k.pageSize;if(isNaN(b)||b>d.total)b=d.total;d.nextPage=function(a){c.direction=a=!1!==a;c.count=b;a?(c.start+=d.length,c.start>=d.total&&(c.count=0)):(c.start-=b,0>c.start&&(c.count=Math.max(b+c.start,0),c.start=0));0>=c.count?(d.length=0,k.onSearch(d,f,c)):p()};k.onSearch(d,f,c)})},function(a){k._fetchHandle=null;k._cancelingQuery||console.error(k.declaredClass+
" "+a.toString())})};s.mixin(c,this.fetchProperties);this.store._oldAPI?g=e:(g=this._patternToRegExp(e),g.toString=function(){return e});this._lastQuery=f[this.searchAttr]=g;this._queryDeferHandle=this.defer(p,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;b&&(this.store=p.byId(b))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),
function(r,u,s,t,l,b,p,m){return r("dijit.form._ComboBoxMenu",[l,b,m,p],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);
this.isLeftToRight()||(u.add(this.previousButton,"dijitMenuItemRtl"),u.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){u.add(b,"dijitMenuItemHover")},onUnhover:function(b){u.remove(b,"dijitMenuItemHover")},onSelect:function(b){u.add(b,"dijitMenuItemSelected")},
onDeselect:function(b){u.remove(b,"dijitMenuItemSelected")},_page:function(b){var f=0,c=this.domNode.scrollTop,e=s.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();f<e;){var g=this.getHighlightedOption();if(b){if(!g.previousSibling||"none"==g.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!g.nextSibling||"none"==g.nextSibling.style.display)break;this.selectNextNode()}g=this.domNode.scrollTop;f+=(g-c)*(b?-1:1);c=g}},handleKey:function(b){switch(b.keyCode){case t.DOWN_ARROW:return this.selectNextNode(),
!1;case t.PAGE_DOWN:return this._page(!1),!1;case t.UP_ARROW:return this.selectPreviousNode(),!1;case t.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(r,u,s,t,l){var b=u("dijit.form._ComboBoxMenuMixin"+(t("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=
l.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(b){this._set("value",b);this.onChange(b)},onClick:function(b){if(b==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(b==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(b)},onChange:function(){},onPage:function(){},
onClose:function(){this._setSelectedAttr(null)},_createOption:function(b,l){var k=this._createMenuItem(),f=l(b);f.html?k.innerHTML=f.label:k.appendChild(k.ownerDocument.createTextNode(f.label));""==k.innerHTML&&(k.innerHTML="&#160;");return k},createOptions:function(b,l,k){this.items=b;this.previousButton.style.display=0==l.start?"none":"";s.set(this.previousButton,"id",this.id+"_prev");r.forEach(b,function(b,e){var f=this._createOption(b,k);f.setAttribute("item",e);s.set(f,"id",this.id+e);this.nextButton.parentNode.insertBefore(f,
this.nextButton)},this);var f=!1;b.total&&!b.total.then&&-1!=b.total?l.start+l.count<b.total?f=!0:l.start+l.count>b.total&&l.count==b.length&&(f=!0):l.count==b.length&&(f=!0);this.nextButton.style.display=f?"":"none";s.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var b=this.containerNode;2<b.childNodes.length;)b.removeChild(b.childNodes[b.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},
selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});t("dojo-bidi")&&(b=u("dijit.form._ComboBoxMenuMixin",b,{_createOption:function(){var b=this.inherited(arguments);this.applyTextDir(b);return b}}));return b})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/on","dojo/touch","./_ListBase"],function(r,u,s,t){return r("dijit.form._ListMouseMixin",t,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(l,b){this._setSelectedAttr(b,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=
this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(l,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b,!1)},_onMouseUp:function(l,b){this._isDragging=!1;var p=this.selected,m=this._hoveredNode;p&&b==p?this.defer(function(){this._onClick(l,p)}):m&&this.defer(function(){this._onClick(l,m)})},_onMouseOut:function(l,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=
null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(l,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(r,u,s){return r("dijit.form._ListBase",null,{selected:null,_listConnect:function(r,l){var b=this;return b.own(u(b.containerNode,
u.selector(function(b,l,k){return b.parentNode==k},r),function(p){b[l](p,this)}))},selectFirstNode:function(){for(var r=this.containerNode.firstChild;r&&"none"==r.style.display;)r=r.nextSibling;this._setSelectedAttr(r,!0)},selectLastNode:function(){for(var r=this.containerNode.lastChild;r&&"none"==r.style.display;)r=r.previousSibling;this._setSelectedAttr(r,!0)},selectNextNode:function(){var r=this.selected;if(r){for(r=r.nextSibling;r&&"none"==r.style.display;)r=r.nextSibling;r?this._setSelectedAttr(r,
!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var r=this.selected;if(r){for(r=r.previousSibling;r&&"none"==r.style.display;)r=r.previousSibling;r?this._setSelectedAttr(r,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(r,l){if(this.selected!=r){var b=this.selected;if(b)this.onDeselect(b);r&&(l&&s.scrollIntoView(r),this.onSelect(r));this._set("selected",r)}else if(r)this.onSelect(r)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare",
"dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(r,u,s,t){return r("dijit.form.Textarea",[t,s],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);u.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),
function(r,u,s,t,l,b,p){s.add("textarea-needs-help-shrinking",function(){var l=b.body(),k=u.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},l,"last"),f=k.scrollHeight>=k.clientHeight;l.removeChild(k);return f});return r("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var b=this.textbox;b.style.overflowY="hidden";this.own(l(b,"focus, resize",t.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(p.on("resize",t.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.rows=(b.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function b(){var a=!1;""===k.value&&(k.value=" ",a=!0);var c=k.scrollHeight;a&&(k.value="");return c}var k=this.textbox;"hidden"==k.style.overflowY&&(k.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(b()||k.offsetHeight){var f=b()+Math.max(k.offsetHeight-k.clientHeight,0),c=f+"px";c!=k.style.height&&(k.style.height=c,k.rows=1);if(s("textarea-needs-help-shrinking")){var e=b(),g=k.style.minHeight,l=4,a=k.scrollTop;k.style.minHeight=c;for(k.style.height="auto";0<f;){k.style.minHeight=
Math.max(f-l,4)+"px";c=b();e-=c;f-=e;if(e<l)break;e=c;l<<=1}k.style.height=f+"px";k.style.minHeight=g;k.scrollTop=a}k.style.overflowY=b()>k.clientHeight?"auto":"hidden";"hidden"==k.style.overflowY&&(k.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(r,u,s,t){return r("dijit.form.SimpleTextarea",t,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);s("ie")&&this.cols&&u.add(this.textbox,"dijitTextAreaCols")},filter:function(l){l&&(l=l.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(l){if(this.maxLength){var b=parseInt(this.maxLength),p=this.textbox.value.replace(/\r/g,""),b=p.length-b;if(0<b){var m=this.textbox;if(m.selectionStart){var k=m.selectionStart,
f=0;s("opera")&&(f=(this.textbox.value.substring(0,k).match(/\r/g)||[]).length);this.textbox.value=p.substring(0,k-b-f)+p.substring(k-f);m.setSelectionRange(k-b,k-b)}else this.ownerDocument.selection&&(m.focus(),p=this.ownerDocument.selection.createRange(),p.moveStart("character",-b),p.text="",p.select())}}this.inherited(arguments)}})})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(r,u,s,
t,l,b){var p=function(b){b=b||{};var f=s.getLocalization("dojo.cldr","number",s.normalizeLocale(b.locale)),c=b.pattern?b.pattern:f[(b.type||"decimal")+"Format"];b="number"==typeof b.places?b.places:-1!=c.indexOf(".")?c.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:f.decimal,places:b}},m=r("dijit.form.NumberTextBoxMixin",null,{pattern:function(b){return"("+(this.focused&&this.editOptions?this._regExpGenerator(u.delegate(b,this.editOptions))+"|":"")+this._regExpGenerator(b)+")"},value:NaN,
editOptions:{pattern:"#.######"},_formatter:l.format,_regExpGenerator:l.regexp,_decimalInfo:p(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(b){var f="number"==typeof b.places?b.places:0;f&&f++;"number"!=typeof b.max&&(b.max=9*Math.pow(10,15-f));"number"!=typeof b.min&&(b.min=-9*Math.pow(10,15-f));this.inherited(arguments,[b]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value);this._decimalInfo=
p(b)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var b=this.get("value");"number"!=typeof b||isNaN(b)||(b=this.format(b,this.constraints),void 0!==b&&(this.textbox.value=b));this.inherited(arguments)}},format:function(b,f){var c=String(b);if("number"!=typeof b)return c;if(isNaN(b))return"";if(!("rangeCheck"in this&&this.rangeCheck(b,f))&&!1!==f.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&(f=u.mixin({},f,this.editOptions));return this._formatter(b,f)},_parser:l.parse,
parse:function(b,f){var c=this._parser(b,u.mixin({},f,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(c)&&(c=this._parser(b,f));return c},_getDisplayedValueAttr:function(){var b=this.inherited(arguments);return isNaN(b)?this.textbox.value:b},filter:function(b){if(null==b||"string"==typeof b&&""==b)return NaN;"number"!=typeof b||isNaN(b)||0==b||(b=l.round(b,this._decimalInfo.places));return this.inherited(arguments,[b])},serialize:function(b,f){return"number"!=
typeof b||isNaN(b)?"":this.inherited(arguments)},_setBlurValue:function(){var b=u.hitch(u.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(b,!0)},_setValueAttr:function(b,f,c){if(void 0!==b&&void 0===c)if(c=String(b),"number"==typeof b)if(isNaN(b))c="";else{if("rangeCheck"in this&&this.rangeCheck(b,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else b?b=void 0:(c="",b=NaN);this.inherited(arguments,[b,f,c])},_getValueAttr:function(){var b=this.inherited(arguments);
if(isNaN(b)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+l._realNumberRegexp(u.delegate(this.constraints))+"$").test(this.textbox.value))return b=Number(this.textbox.value),isNaN(b)?void 0:b}else return b},isValid:function(b){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var f=this.get("value");return!isNaN(f)&&this.rangeCheck(f,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?
!0:this.inherited(arguments):!1},_isValidSubset:function(){var b="number"==typeof this.constraints.min,f="number"==typeof this.constraints.max,c=this.get("value");if(isNaN(c)||!b&&!f)return this.inherited(arguments);var e=c|0,g=0>c,l=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),a=(this.maxLength||20)-this.textbox.value.length,d=l?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",e=l?e+"."+d:e+"",a=t.rep("9",a),l=c;g?l=Number(e+a):c=Number(e+a);return!(b&&c<this.constraints.min||
f&&l>this.constraints.max)}});r=r("dijit.form.NumberTextBox",[b,m],{baseClass:"dijitTextBox dijitNumberTextBox"});r.Mixin=m;return r})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(r,u,s){return r("dijit.form.ComboBox",[u,s],{})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(r,u,s,t,l){return r("dijit.form.TimeTextBox",l,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",
popupClass:t,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(b){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),b.keyCode){case u.ENTER:case u.TAB:case u.ESCAPE:case u.DOWN_ARROW:case u.UP_ARROW:break;default:this.defer(function(){var b=this.get("displayedValue");this.filterString=b&&!this.parse(b,this.constraints)?b.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){return l("dijit._TimePicker",[a,d],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:t.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){m.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.",
"","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,d,c){a=[];for(b=0;b<this._maxIncrement;b++)(d=this._createOption(b))&&a.push(d);return a},_showText:function(){var a=t.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);
var b=function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},d=b(this._clickableIncrementDate),b=b(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=a(this.pickerMin);this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=b/d;a=a(this.pickerMax);a.setFullYear(1970,0,1);a=0.001*(a.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((a+1)/d);d=this._getFilteredNodes();r.forEach(d,function(a){this.domNode.appendChild(a)},
this);!d.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var d=new Date(this._refDate),c=this._clickableIncrementDate;d.setHours(d.getHours()+c.getHours()*
a,d.getMinutes()+c.getMinutes()*a,d.getSeconds()+c.getSeconds()*a);"time"==this.constraints.selector&&d.setFullYear(1970,0,1);c=s.format(d,this.constraints);if(this.filterString&&0!==c.toLowerCase().indexOf(this.filterString))return null;var e=this.ownerDocument.createElement("div");e.className=this.baseClass+"Item";e.date=d;e.idx=a;p.create("div",{"class":this.baseClass+"ItemInner",innerHTML:c},e);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?b.add(e,this.baseClass+"Marker"):a%this._clickableIncrement||
b.add(e,this.baseClass+"Tick");this.isDisabledDate(d)&&b.add(e,this.baseClass+"ItemDisabled");this.value&&!u.compare(this.value,d,this.constraints.selector)&&(e.selected=!0,b.add(e,this.baseClass+"ItemSelected"),this._selectedDiv=e,b.contains(e,this.baseClass+"Marker")?b.add(e,this.baseClass+"MarkerSelected"):b.add(e,this.baseClass+"TickSelected"),this._highlightOption(e,!0));return e},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){(a=
a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a)&&(this._highlighted_option=null,this.set("value",a),this.onChange(a))},onChange:function(){},_highlightOption:function(a,d){if(a){if(d)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}b.toggle(a,this.baseClass+"ItemHover",d);b.contains(a,this.baseClass+"Marker")?b.toggle(a,this.baseClass+"MarkerHover",d):
b.toggle(a,this.baseClass+"TickHover",d)}},handleKey:function(a){if(a.keyCode==k.DOWN_ARROW)return this.selectNextNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==k.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==k.ENTER||a.keyCode===k.TAB){if(!this._keyboardSelected&&a.keyCode===k.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.keyCode===k.TAB}},onHover:function(a){this._highlightOption(a,
!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y){function A(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(m.hitch(this,a,b))}}var z=u("dijit.form._SelectMenu",g,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(k(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;
m.isArray(b)&&(b=b[b.length-1]);b&&r.forEach(this.parentWidget._getChildren(),function(d){d.option&&b===d.option.value&&(a=!0,this.focusChild(d,!1))},this);a||this.inherited(arguments)}});l=u("dijit.form.Select"+(f("dojo-bidi")?"_NoBidi":""),[c,e,n],{baseClass:"dijitSelect dijitValidationTextBox",templateString:y,_buttonInputDisabled:f("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new z({id:this.id+"_menu",parentWidget:this});t.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(b){if(b.value||b.label){var d=m.hitch(this,"_setValueAttr",b);b=new q({option:b,label:("text"===this.labelType?(b.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):b.label)||this.emptyLabel,
onClick:d,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:b.disabled||!1});b.focusNode.setAttribute("role","option");return b}return new a({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",
a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=v.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,d,c){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{r.forEach(this._getChildren(),function(a){a.destroyRecursive()});
var b=new q({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);s.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",
_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,
"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?d.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):d.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);
d.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=b.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(k(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[p.LEFT_ARROW];delete a[p.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments);
t.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);d.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){d.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
f("dojo-bidi")&&(l=u("dijit.form.Select",l,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));l._Menu=z;l.prototype._onContainerKeydown=A("_onContainerKeydown");l.prototype._onContainerKeypress=A("_onContainerKeypress");return l})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(r,u,s,t,l,b){return r("dijit.MenuSeparator",[s,t,l],
{templateString:b,buildRendering:function(){this.inherited(arguments);u.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(r,u,s,t){return r("dijit.form.NumberSpinner",[s,t.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(l,b){var p=this.constraints,m=isNaN(l),k=!isNaN(p.max),f=!isNaN(p.min);m&&0!=b&&(l=0<b?f?p.min:k?p.max:0:k?this.constraints.max:
f?p.min:0);var c=l+b;if(m||isNaN(c))return l;k&&c>p.max&&(c=p.max);f&&c<p.min&&(c=p.min);return c},_onKeyDown:function(l){if(!(this.disabled||this.readOnly||l.keyCode!=u.HOME&&l.keyCode!=u.END||l.ctrlKey||l.altKey||l.metaKey||"undefined"==typeof this.get("value"))){var b=this.constraints[l.keyCode==u.HOME?"min":"max"];"number"==typeof b&&this._setValueAttr(b,!1);l.stopPropagation();l.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),
function(r,u,s,t,l,b,p,m,k,f){return r("dijit.form._Spinner",m,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:k,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(b){return b},_arrowPressed:function(b,e,g){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),e*g),!1),f.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=
null},_typematicCallback:function(b,e,f){var k=this.smallDelta;e==this.textbox&&(e=f.keyCode,k=e==u.PAGE_UP||e==u.PAGE_DOWN?this.largeDelta:this.smallDelta,e=e==u.UP_ARROW||e==u.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==b?this._arrowReleased(e):this._arrowPressed(e,e==this.upArrowNode?1:-1,k)},_wheelTimer:null,_mouseWheeled:function(b){b.stopPropagation();b.preventDefault();var e=b.wheelDelta/120;Math.floor(e)!=e&&(e=0<b.wheelDelta?1:-1);b=b.detail?-1*b.detail:e;if(0!==b){var f=this[0<b?"upArrowNode":
"downArrowNode"];this._arrowPressed(f,b,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(f)},50)}},_setConstraintsAttr:function(b){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},
_setValueAttr:function(b,e){this.focusNode.setAttribute("aria-valuenow",b);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,l.wheel,s.hitch(this,"_mouseWheeled")),p.addListener(this.upArrowNode,this.textbox,{keyCode:u.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.downArrowNode,this.textbox,{keyCode:u.DOWN_ARROW,ctrlKey:!1,altKey:!1,
shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.upArrowNode,this.textbox,{keyCode:u.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.downArrowNode,this.textbox,{keyCode:u.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},
"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A,z){var B=u("dijit.form._SliderMover",c,{onMouseMove:function(a){var b=
this.widget,d=b._abspos;d||(d=b._abspos=l.position(b.sliderBarContainer,!0),b._setPixelValue_=m.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-d[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?d[b._pixelCount]-a:a,d[b._pixelCount],!1)},destroy:function(a){c.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}});s=u("dijit.form.HorizontalSlider",[y,A],{templateString:z,value:0,showButtons:!0,minimum:0,maximum:100,
discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:a.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,
!0)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case p.HOME:this._setValueAttr(this.minimum,!1);break;case p.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?p.RIGHT_ARROW:p.LEFT_ARROW:case !1===this._descending?p.DOWN_ARROW:p.UP_ARROW:case !1===this._descending?p.PAGE_DOWN:p.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?p.LEFT_ARROW:p.RIGHT_ARROW:case !1===this._descending?
p.UP_ARROW:p.DOWN_ARROW:case !1===this._descending?p.PAGE_UP:p.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(k("ie")||d.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){d.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=l.position(this.sliderBarContainer,
!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,d){if(!this.disabled&&!this.readOnly){var c=this.discreteValues;if(1>=c||Infinity==c)c=b;c--;a=Math.round(a/(b/c));this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/c+this.minimum,this.maximum),this.minimum),d)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=
a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var d=this.maximum>this.minimum?(a-this.minimum)/(this.maximum-this.minimum):0,c=!1===this._descending?this.remainingBar:this.progressBar,e=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&0<this.slideDuration&&c.style[this._progressPixelSize]){var f=this,g={},k=parseFloat(c.style[this._progressPixelSize]),l=this.slideDuration*
(d-k/100);0!=l&&(0>l&&(l=0-l),g[this._progressPixelSize]={start:k,end:100*d,units:"%"},this._inProgressAnim=t.animateProperty({node:c,duration:l,onAnimate:function(a){e.style[f._progressPixelSize]=100-parseFloat(a[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:g}),this._inProgressAnim.play())}else c.style[this._progressPixelSize]=100*d+"%",e.style[this._progressPixelSize]=100*(1-d)+"%"},_bumpValue:function(a,d){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var c=
b.getComputedStyle(this.sliderBarContainer),e=l.getContentBox(this.sliderBarContainer,c),c=this.discreteValues;if(1>=c||Infinity==c)c=e[this._pixelCount];c--;e=(this.value-this.minimum)*c/(this.maximum-this.minimum)+a;0>e&&(e=0);e>c&&(e=c);e=e*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(e,d)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},
_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==p.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==p.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){a.stopPropagation();a.preventDefault();this._bumpValue(0>a.wheelDelta?-1:1,!0)},startup:function(){this._started||(r.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},
this),this.inherited(arguments))},_typematicCallback:function(a,b,d){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](d)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var a=e('label[for="'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));
this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(n.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),n.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(q(this.domNode,g.wheel,m.hitch(this,"_mouseWheeled")));var a=u(B,{widget:this});this._movable=new f(this.sliderHandle,{mover:a});this._layoutHackIE7()},
destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});s._Mover=B;return s})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(r,u,s,t,l,b){t=r("dojo.dnd.move.constrainedMoveable",b,{constraints:function(){},within:!1,constructor:function(b,l){l||(l={});this.constraints=l.constraints;this.within=l.within},onFirstMove:function(b){var l=
this.constraintBox=this.constraints.call(this,b);l.r=l.l+l.w;l.b=l.t+l.h;this.within&&(b=u.getMarginSize(b.node),l.r-=b.w,l.b-=b.h)},onMove:function(b,l){var k=this.constraintBox,f=b.node.style;this.onMoving(b,l);l.l=l.l<k.l?k.l:k.r<l.l?k.r:l.l;l.t=l.t<k.t?k.t:k.b<l.t?k.b:l.t;f.left=l.l+"px";f.top=l.t+"px";this.onMoved(b,l)}});l=r("dojo.dnd.move.boxConstrainedMoveable",t,{box:{},constructor:function(b,l){var k=l&&l.box;this.constraints=function(){return k}}});r=r("dojo.dnd.move.parentConstrainedMoveable",
t,{area:"content",constructor:function(b,l){var k=l&&l.area;this.constraints=function(){var b=this.node.parentNode,c=s.getComputedStyle(b),e=u.getMarginBox(b,c);if("margin"==k)return e;var g=u.getMarginExtents(b,c);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;if("border"==k)return e;g=u.getBorderExtents(b,c);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;if("padding"==k)return e;g=u.getPadExtents(b,c);e.l+=g.l;e.t+=g.t;e.w-=g.w;e.h-=g.h;return e}}});return{constrainedMoveable:t,boxConstrainedMoveable:l,parentConstrainedMoveable:r}})},
"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(r,u,s,t,l){return u("dijit.layout.TabContainer",s,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(b){var l=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?r.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,
dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":l,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},b)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?t:l)}})})},"dijit/layout/_TabContainerBase":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../registry ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),
function(r,u,s,t,l,b,p,m,k){return r("dijit.layout._TabContainerBase",[l,m],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:k,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&t.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||
u.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(u.add(this.domNode,"dijitTabContainerNested"),u.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),u.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),u.add(this.containerNode,"dijitTabPaneWrapperNested")):u.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(b){u.add(b.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},
layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var f=this.selectedChildWidget;if(this.doLayout){var c=this.tabPosition.replace(/-h/,"");this.tablist.region=c;c=[this.tablist,{domNode:this.tablistSpacer,region:c},{domNode:this.containerNode,region:"center"}];b.layoutChildren(this.domNode,this._contentBox,c);this._containerContentBox=b.marginBox2contentBox(this.containerNode,c[2]);f&&f.resize&&f.resize(this._containerContentBox)}else{if(this.tablist.resize){c=this.tablist.domNode.style;
c.width="0";var e=s.getContentBox(this.domNode).w;c.width="";this.tablist.resize({w:e})}f&&f.resize&&f.resize()}}},destroy:function(b){this.tablist&&this.tablist.destroy(b);this.inherited(arguments)},selectChild:function(b,c){this._focused&&(b=p.byId(b),this.tablist.pane2button(b.id).focus());return this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q){b("dijit-legacy-requires")&&k(0,function(){require(["dijit/layout/StackController"])});s=s("dijit.layout.StackContainer",q,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);t.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(m(this.domNode,"keydown",p.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();r.forEach(a,this._setupChild,
this);this.persist?this.selectedChildWidget=e.byId(u(this.id+"_selectedChild")):r.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);f.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},
_setupChild:function(a){var b=a.domNode,c=l.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",a.domNode,"replace"),e=a["aria-label"]||a.title||a.label;e&&c.setAttribute("aria-label",e);l.place(b,c);a._wrapper=c;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments);this._started&&(f.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},
removeChild:function(a){var b=r.indexOf(this.getChildren(),a);this.inherited(arguments);l.destroy(a._wrapper);delete a._wrapper;this._started&&f.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var c=this.getChildren();c.length&&this.selectChild(c[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var g;a=e.byId(a);this.selectedChildWidget!=a&&(g=this._transition(a,this.selectedChildWidget,
b),this._set("selectedChildWidget",a),f.publish(this.id+"-selectChild",a),this.persist&&u(this.id+"_selectedChild",this.selectedChildWidget.id));return c(g||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=r.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),
!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){f.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&t.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||
!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&t.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;r.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});s.ChildWidgetProperties={selected:!1,disabled:!1,
closable:!1,iconClass:"dijitNoIcon",showTitle:!0};p.extend(g,s.ChildWidgetProperties);return s})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(r,u){r.cookie=function(r,t,l){var b=document.cookie,p;if(1==arguments.length)p=(p=b.match(RegExp("(?:^|; )"+u.escapeString(r)+"=([^;]*)")))?decodeURIComponent(p[1]):void 0;else{l=l||{};b=l.expires;if("number"==typeof b){var m=new Date;m.setTime(m.getTime()+864E5*b);b=l.expires=m}b&&b.toUTCString&&(l.expires=b.toUTCString());t=encodeURIComponent(t);
var b=r+"="+t,k;for(k in l)b+="; "+k,m=l[k],!0!==m&&(b+="="+m);document.cookie=b}return p};r.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return r.cookie})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(r,u,s,t,l,b,p,m,k){return b("dijit.layout._LayoutWidget",[u,s,t],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);p.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(l.on("resize",r.hitch(this,"resize"))))}},resize:function(b,c){var e=this.domNode;b&&m.setMarginBox(e,b);var g=c||
{};r.mixin(g,b||{});"h"in g&&"w"in g||(g=r.mixin(m.getMarginBox(e),g));var l=k.getComputedStyle(e),a=m.getMarginExtents(e,l),d=m.getBorderExtents(e,l),g=this._borderBox={w:g.w-(a.w+d.w),h:g.h-(a.h+d.h)},a=m.getPadExtents(e,l);this._contentBox={l:k.toPixelValue(e,l.paddingLeft),t:k.toPixelValue(e,l.paddingTop),w:g.w-a.w,h:g.h-a.h};this.layout()},layout:function(){},_setupChild:function(b){p.add(b.domNode,this.baseClass+"-child "+(b.baseClass?this.baseClass+"-"+b.baseClass:""))},addChild:function(b,
c){this.inherited(arguments);this._started&&this._setupChild(b)},removeChild:function(b){p.remove(b.domNode,this.baseClass+"-child"+(b.baseClass?" "+this.baseClass+"-"+b.baseClass:""));this.inherited(arguments)}})})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),function(r,u,s,t,l,b,
p,m,k,f,c,e){e=r("dijit.layout._TabButton"+(l("dojo-bidi")?"_NoBidi":""),m.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:e,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);u.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(c){this._set("closeButton",c);t.toggle(this.domNode,
"dijitClosable",c);this.closeNode.style.display=c?"":"none";c&&(c=b.getLocalization("dijit","common"),this.closeNode&&s.set(this.closeNode,"title",c.itemClose))},_setDisabledAttr:function(c){this.inherited(arguments);if(this.closeNode)if(c)s.remove(this.closeNode,"title");else{var e=b.getLocalization("dijit","common");s.set(this.closeNode,"title",e.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=p.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});l("dojo-bidi")&&(e=r("dijit.layout._TabButton",e,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));r=r("dijit.layout.TabController",m,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:e,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var e=new f({id:this.id+
"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return t.contains(a,"dijitClosable")&&!t.contains(a,"dijitTabDisabled")}});this.own(e);var l=b.getLocalization("dijit","common"),a=this;e.addChild(new c({label:l.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(b){b=k.byNode(this.getParent().currentTarget);a.onCloseButtonClick(b.page)}}))}});r.TabButton=
e;return r})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(r,u,s,t,l,b,p,m,k,f,c,e,g,q){t=u("dijit.layout._StackButton",q,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role",
"tab")}});u=u("dijit.layout.StackController",[c,e,g],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:t,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return f.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments);this.own(m.subscribe(this.containerId+"-startup",b.hitch(this,"onStartup")),m.subscribe(this.containerId+"-addChild",b.hitch(this,"onAddChild")),m.subscribe(this.containerId+
"-removeChild",b.hitch(this,"onRemoveChild")),m.subscribe(this.containerId+"-selectChild",b.hitch(this,"onSelectChild")),m.subscribe(this.containerId+"-containerKeyDown",b.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(p(this.containerNode,"click",b.hitch(this,function(a){var b=f.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(s.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);
break}else if(a==b.domNode){this.onButtonClick(b.page);break}})))},onStartup:function(a){this.textDir=a.textDir;r.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected);var d=f.byId(this.containerId).containerNode,c=b.hitch(this,"pane2button");a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var e=function(a,b){return p(d,"attrmodified-"+a,function(a){var d=c(a.detail&&a.detail.widget&&
a.detail.widget.id);d&&d.set(b,a.detail.newValue)})},g;for(g in a)this.own(e(g,a[g]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,d){var c=new (b.isString(this.buttonWidget)?b.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,
title:a.tooltip,page:a});this.addChild(c,d);a.controlButton=c;if(!this._currentChild)this.onSelectChild(a);c=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+c.id:c.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",c)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=
this.pane2button(this._currentChild.id);b.set("checked",!1);b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button(a.id);b.set("checked",!0);this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");f.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);k.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0);f.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){f.byId(this.containerId).closeChild(a);this._currentChild&&
(a=this.pane2button(this._currentChild.id))&&k.focus(a.focusNode||a.domNode)},adjacent:function(a){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(a=!a);var b=this.getChildren(),c=r.indexOf(b,this.pane2button(this._currentChild.id)),e=b[c],f;do c=(c+(a?1:b.length-1))%b.length,f=b[c];while(f.disabled&&f!=e);return f},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case l.LEFT_ARROW:case l.UP_ARROW:a._djpage||
(c=!1);break;case l.PAGE_UP:a.ctrlKey&&(c=!1);break;case l.RIGHT_ARROW:case l.DOWN_ARROW:a._djpage||(c=!0);break;case l.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case l.HOME:for(var e=this.getChildren(),f=0;f<e.length;f++){var g=e[f];if(!g.disabled){this.onButtonClick(g.page);break}}a.stopPropagation();a.preventDefault();break;case l.END:e=this.getChildren();for(f=e.length-1;0<=f;f--)if(g=e[f],!g.disabled){this.onButtonClick(g.page);break}a.stopPropagation();a.preventDefault();break;case l.DELETE:case 87:this._currentChild.closable&&
(a.keyCode==l.DELETE||a.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault());break;case l.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});u.StackButton=t;return u})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A){e=u("dijit.layout.ScrollingTabController",[q,d],{baseClass:"dijitTabController dijitScrollingTabController",templateString:e,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",s.add(a,"tabStrip-disabled"));s.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);l.set(this.domNode,"visibility","");this._postStartup=!0;this.own(m(this.containerNode,"attrmodified-label, attrmodified-iconclass",p.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);l.set(this.containerNode,"width",l.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var d=this.pane2button(a.id);this._selectedTab===d.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=k("> .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=t.getMarginSize(a).w,!0;l.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||l.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(b){this._dim=b;this.scrollNode.style.height="auto";var d=this._contentBox=a.marginBox2contentBox(this.domNode,{h:0,w:b.w});d.h=this.scrollNode.offsetHeight;t.setContentSize(this.domNode,d);d=this._enableBtn(this._contentBox.w);
this._buttons.style("display",d?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";a.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:b.w}},_getScroll:function(){return this.isLeftToRight()||8>f("ie")||f("ie")&&f("quirks")||f("webkit")?this.scrollNode.scrollLeft:l.get(this.containerNode,"width")-l.get(this.scrollNode,"width")+(8<=f("ie")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>f("ie")||f("ie")&&f("quirks")||f("webkit"))return a;var b=l.get(this.containerNode,"width")-l.get(this.scrollNode,"width");return(8<=f("ie")?-1:1)*(a-b)},
onSelectChild:function(a){var b=this.pane2button(a.id);if(b){b=b.domNode;if(b!=this._selectedTab&&(this._selectedTab=b,this._postResize)){var d=this._getScroll();(d>b.offsetLeft||d+l.get(this.scrollNode,"width")<b.offsetLeft+l.get(b,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=l.get(this.scrollNode,"width"),d=l.get(this.containerNode,"width")-b,c=this._getTabsWidth();if(a.length&&c>b)return{min:this.isLeftToRight()?
0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:d};a=this.isLeftToRight()?0:d;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=l.get(this.scrollNode,"width"),d=this._getScrollBounds(),a=a.offsetLeft+l.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,d.min),d.max)},createSmoothScroll:function(a){if(0<arguments.length){var d=this._getScrollBounds();a=Math.min(Math.max(a,d.min),d.max)}else a=
this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var c=this,e=this.scrollNode,f=new b.Animation({beforeBegin:function(){this.curve&&delete this.curve;var d=e.scrollLeft,g=c._convertToScrollLeft(a);f.curve=new b._Line(d,g)},onAnimate:function(a){e.scrollLeft=a}});this._anim=f;this._setButtonClass(a);return f},_getBtnNode:function(a){for(a=a.target;a&&!s.contains(a,"tabStripButton");)a=a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},
doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!s.contains(b,"dijitTabDisabled")){var d=0.75*l.get(this.scrollNode,"width")*a,d=this._getScroll()+d;this._setButtonClass(d);this.createSmoothScroll(d).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});g=u("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:g,
tabIndex:"",isFocusable:function(){return!1}});u("dijit.layout._ScrollingTabControllerButton",[y,g]);u("dijit.layout._ScrollingTabControllerMenuButton",[y,A,g],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new n({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var b=c.byId(this.containerId);r.forEach(b.getChildren(),function(a){var d=new v({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,
disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||b.textDir,onClick:function(){b.selectChild(a)}});this.dropDown.addChild(d)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return e})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d){var n=s("dijit.layout._Splitter",[g,q],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);t.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=u(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",d=b.getMarginBox(this.child.domNode)[a],c=r.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=b.getContentBox(c.domNode)[a]-
10;return Math.min(this.child.maxSize,d+a)},_startDrag:function(a){this.cover||(this.cover=l.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after"));t.add(this.cover,"dijitSplitterCoverActive");this.fake&&l.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),t.add(this.domNode,"dijitSplitterShadow"),l.place(this.fake,this.domNode,"after"));t.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&t.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var d=this._factor,e=this.horizontal,g=e?"pageY":"pageX",m=a[g],n=this.domNode.style,e=e?"h":"w",q=p.getComputedStyle(this.child.domNode),r=b.getMarginBox(this.child.domNode,q)[e],v=this._computeMaxSize(),s=Math.max(this.child.minSize,b.getPadBorderExtents(this.child.domNode,q)[e]+10),e=this.region,u="top"==e||"bottom"==e?"top":"left",Z=parseInt(n[u],10),N=this._resize,x=k.hitch(this.container,"_layoutChildren",
this.child.id),e=this.ownerDocument;this._handlers=this._handlers.concat([f(e,c.move,this._drag=function(a,b){var c=a[g]-m,e=d*c+r,f=Math.max(Math.min(e,v),s);(N||b)&&x(f);n[u]=c+Z+d*(f-e)+"px"}),f(e,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),f(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();a.preventDefault()}),f(e,c.release,k.hitch(this,"_stopDrag"))]);a.stopPropagation();a.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;
t.toggle(this.domNode,"dijitSplitterHover",a);t.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&t.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&l.destroy(this.fake),t.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&u(this._cookieName,this.child.domNode.style[this.horizontal?
"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var d=this.horizontal,c=1;switch(a.keyCode){case d?m.UP_ARROW:m.LEFT_ARROW:c*=-1;case d?m.DOWN_ARROW:m.RIGHT_ARROW:break;default:return}d=b.getMarginSize(this.child.domNode)[d?"h":"w"]+this._factor*c;this.container._layoutChildren(this.child.id,Math.max(Math.min(d,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();
delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),v=s("dijit.layout._Gutter",[g,q],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);t.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});s=s("dijit.layout.BorderContainer",a,{gutters:!0,liveSplitters:!0,persist:!1,
baseClass:"dijitBorderContainer",_splitterClass:n,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,d=a.isLeftToRight();"leading"==b&&(b=d?"left":"right");"trailing"==b&&(b=d?"right":"left");b&&"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget&&(d=a.splitter?this._splitterClass:v,k.isString(d)&&(d=k.getObject(d)),d=new d({id:a.id+"_splitter",container:this,child:a,region:b,
live:this.liveSplitters}),d.isSplitter=!0,a._splitterWidget=d,b="bottom"==b||b==(this.isLeftToRight()?"right":"left"),l.place(d.domNode,a.domNode,b?"before":"after"),d.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);this.inherited(arguments)},getChildren:function(){return r.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return r.filter(this.getChildren(),function(b){return b.region==
a})[0]._splitterWidget},resize:function(a,d){if(!this.cs||!this.pe){var c=this.domNode;this.cs=p.getComputedStyle(c);this.pe=b.getPadExtents(c,this.cs);this.pe.r=p.toPixelValue(c,this.cs.paddingRight);this.pe.b=p.toPixelValue(c,this.cs.paddingBottom);p.set(c,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=[];r.forEach(this._getOrderedChildren(),function(a){c.push(a);a._splitterWidget&&c.push(a._splitterWidget)});d.layoutChildren(this.domNode,
{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},c,a,b)}},destroyRecursive:function(){r.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});s.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:Infinity};k.mixin(s.ChildWidgetProperties,a.ChildWidgetProperties);k.extend(e,s.ChildWidgetProperties);s._Splitter=n;s._Gutter=v;return s})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),
function(r,u,s,t,l,b,p,m){u=u("dijit.layout.LayoutContainer",p,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(r.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);b.region&&s.add(b.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=r.map(this.getChildren(),function(b,c){return{pane:b,weight:["center"==b.region?Infinity:0,b.layoutPriority,("sidebar"==this.design?1:
-1)*(/top|bottom/.test(b.region)?1:-1),c]}},this);b.sort(function(b,c){for(var e=b.weight,g=c.weight,k=0;k<e.length;k++)if(e[k]!=g[k])return e[k]-g[k];return 0});return r.map(b,function(b){return b.pane})},layout:function(){m.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(b,f){this.inherited(arguments);this._started&&this.layout()},removeChild:function(b){this.inherited(arguments);this._started&&this.layout();s.remove(b.domNode,this.baseClass+"Pane");t.set(b.domNode,
{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});t.set(b.domNode,/top|bottom/.test(b.region)?"width":"height","auto")}});u.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};l.extend(b,u.ChildWidgetProperties);return u})},"dijit/layout/AccordionContainer":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/keys dojo/_base/lang dojo/sniff dojo/topic ../focus ../_base/manager dojo/ready ../_Widget ../_Container ../_TemplatedMixin ../_CssStateMixin ./StackContainer ./ContentPane dojo/text!./templates/AccordionButton.html ../a11yclick".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q,a,d,n,v,y,A,z,B,C){g=s("dijit.layout._AccordionButton",[n,y,A],{templateString:C,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");b.set(this.titleTextNode,
"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",b.get(this.titleTextNode,"id"));l.setSelectable(this.domNode,!1)},getTitleHeight:function(){return k.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);q.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",
a?"true":"false");this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});e("dojo-bidi")&&g.extend({_setLabelAttr:function(a){this._set("label",a);b.set(this.titleTextNode,"innerHTML",a);this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a);b.set(this.titleTextNode,"title",a);this.applyTextDir(this.titleTextNode)}});var E=s("dijit.layout._AccordionInnerContainer"+(e("dojo-bidi")?"_NoBidi":""),[n,A],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=
m.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var a=this.contentWidget,b=c.isString(this.buttonWidget)?c.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=m.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",
this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);m.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",c.hitch(this,function(b,d,c){a.set("label",c)})),b.watch("tooltip",c.hitch(this,function(b,d,c){a.set("title",c)})),b.watch("iconClass",c.hitch(this,function(b,d,c){a.set("iconClass",c)}))]},_setSelectedAttr:function(a){this._set("selected",
a);this.button.set("selected",a);if(a&&(a=this.contentWidget,a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();u.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});e("dojo-bidi")&&(E=s("dijit.layout._AccordionInnerContainer",E,
{postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,d,c){a.set("textDir",c)}))}}));s=s("dijit.layout.AccordionContainer",z,{duration:a.defaultDuration,buttonWidget:g,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&
this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,d=k.getMarginExtents(b),b=k.getPadBorderExtents(b),c=a._wrapperWidget.containerNode,e=k.getMarginExtents(c),c=k.getPadBorderExtents(c),f=this._contentBox,g=0;u.forEach(this.getChildren(),function(b){b!=a&&(g+=k.getMarginSize(b._wrapperWidget.domNode).h)});this._verticalSpace=f.h-g-d.h-b.h-e.h-c.h-a._buttonWidget.getTitleHeight();this._containerContentBox=
{h:this._verticalSpace,w:this._contentBox.w-d.w-b.w-e.w-c.w};a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=E({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this});this.inherited(arguments);m.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(m.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);p.remove(a.domNode,
"dijitHidden");this.inherited(arguments)},getChildren:function(){return u.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();u.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},
_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},_transition:function(a,b,d){8>e("ie")&&(d=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var c=this;if(a){a._wrapperWidget.set("selected",!0);var f=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}b&&(b._wrapperWidget.set("selected",!1),d||this._hideChild(b));if(d){var g=a._wrapperWidget.containerNode,l=b._wrapperWidget.containerNode;d=a._wrapperWidget.containerNode;
a=k.getMarginExtents(d);d=k.getPadBorderExtents(d);var m=a.h+d.h;l.style.height=c._verticalSpace-m+"px";this._animation=new t.Animation({node:g,duration:this.duration,curve:[1,this._verticalSpace-m-1],onAnimate:function(a){a=Math.floor(a);g.style.height=a+"px";l.style.height=c._verticalSpace-m-a+"px"},onEnd:function(){delete c._animation;g.style.height="auto";b._wrapperWidget.containerNode.style.display="none";l.style.height="auto";c._hideChild(b)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return f},
_onKeyDown:function(a,b){if(!this.disabled&&!a.altKey&&(b||a.ctrlKey)){var d=a.keyCode;if(b&&(d==f.LEFT_ARROW||d==f.UP_ARROW)||a.ctrlKey&&d==f.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault();else if(b&&(d==f.RIGHT_ARROW||d==f.DOWN_ARROW)||a.ctrlKey&&(d==f.PAGE_DOWN||d==f.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()}}});e("dijit-legacy-requires")&&d(0,function(){r(["dijit/layout/AccordionPane"])});s._InnerContainer=
E;s._Button=g;return s})},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(r,u,s){return r("dijit.layout.AccordionPane",s,{constructor:function(){u.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g){s.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");b=g._iframeName;b=b.substring(0,b.lastIndexOf("_"));var q=t.delegate(g,{create:function(){return q._frame=g.create.apply(g,arguments)},get:null,post:null,send:function(a){var b,c=l._ioSetArgs(a,function(a){b&&b.cancel()},function(a){var c=null;a=a.ioArgs;try{var e=a.handleAs;"xml"===e||"html"===e?c=b.response.data:(c=b.response.text,"json"===e?c=u.fromJson(c):"javascript"===e&&(c=s.eval(c)))}catch(f){c=
f}return c},function(a,b){b.ioArgs._hasError=!0;return a}),f=c.ioArgs,k="GET",p=m.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&p&&(k="POST");a={method:k,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:p?null:a.content,data:p?a.content:null,timeout:a.timeout,ioArgs:f};a.method&&(a.method=a.method.toUpperCase());if(r.ioPublish&&s.publish&&!1!==f.args.ioPublish)var q=e.after(g,"_notifyStart",function(a){a.options.ioArgs===f&&(q.remove(),l._ioNotifyStart(c))},
!0);b=g(f.url,a,!0);f._callNext=b._callNext;b.then(function(){c.resolve(c)}).otherwise(function(a){c.ioArgs.error=a;c.reject(a)});return c},_iframeOnload:p.global[b+"_onload"]});t.setObject("dojo.io.iframe",q);return q})},"xstyle/core/load-css":function(){define([],function(){function r(b,a){var d=b[p]("link");d.rel="stylesheet";d.type="text/css";a&&(d.href=a);return d}function u(b,a){return b.lastIndexOf(".")<=b.lastIndexOf("/")?b+"."+a:b}function s(b){b=b.split("!");for(var a,d=1;a=b[d++];)a=a.split("=",
2),b[a[0]]=2==a.length?a[1]:!0;return b}function t(b){if(c["dom-create-style-element"])return a=document.createElement("style"),a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(b)),e.insertBefore(a,e.firstChild),a;var a=document.createStyleSheet();a.cssText=b;return a.owningElement}var l="onreadystatechange",b="onload",p="createElement",m=!1,k=document,f="undefined"==typeof _css_cache?{}:_css_cache,c={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),
"dom-create-style-element":!document.createStyleSheet},e=k.head||(k.head=k.getElementsByTagName("head")[0]);if(!c["bundled-css"])var g=function(e,a){function d(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,d=b.length;0<d;d--)if(b[d-1]==a)return!0}function f(a,b){d(a.link)?(g(a),b()):m||setTimeout(function(){f(a,b)},a.wait)}function g(a){a=a.link;a[l]=a[b]=null}function k(){p||(p=!0,a())}require.onError&&(require.onError=function(a){return function(){m=!0;a.apply(this,arguments)}}(require.onError));
var p;(function(a,d){var e=a.link;e[l]=e[b]=function(){e.readyState&&"complete"!=e.readyState||(c["event-link-onload"]=!0,g(a),d())}})(e,k);c["event-link-onload"]||f(e,k)};return function(b,a,d){for(var c=b.split(","),l=c.length,m=function(){0==--l&&a(B.sheet||B.styleSheet)},p=0;p<c.length;p++){b=c[p];var z=f[b];if(z)return B=t(z),m();b=s(b);var z=b.shift(),z=u(z,"css"),B=r(k);b="nowait"in b?"false"!=b.nowait:!(!d||!d.cssDeferLoad);g({link:B,url:z,wait:d&&d.cssWatchPeriod||25},m);b&&a(B);B.href=z;
e.appendChild(B)}}})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',"url:dijit/templates/MenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"\n\t\trole="presentation"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</span>\n\t</td>\n</tr>\n',
"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip" data-dojo-attach-event="mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n',"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\ttabIndex="-1" role="presentation" aria-hidden="true" data-dojo-attach-point="valueNode"\n/></span>\n',
"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\tdata-dojo-attach-point="valueNode" role="presentation" aria-hidden="true"\n/></span>\n',
"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t></div\n\t\t></td\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event="onkeydown:_onArrowKeyDown"\n\t\t\ttitle="${optionsTitle}"\n\t\t\trole="button" aria-haspopup="true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t\t><td style="display:none !important;"\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode"\n\t\t\t\tclass="dijitOffScreen"\n\t\t\t\trole="presentation" aria-hidden="true"\n\t\t\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\t/></td></tr></tbody\n></table>\n',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitemcheckbox" tabIndex="-1"\n\tdojoAttachEvent="ondijitclick:_onClick"\n\t><td class="dijitReset dijitMenuItemIconCell" role="presentation"\n\t\t><div src="${_blankGif}" alt="" class="dijitMenuItemIcon ${_iconClass}" dojoAttachPoint="iconNode"\n\t\t\t><input class="dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint="inputNode" type="${_type.type}"\n\t\t/></div></td\n\t><td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td\n\t><td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td\n\t><td class="dijitReset dijitMenuArrowCell" role="presentation">&nbsp;</td\n></tr>',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'<div class="dijitReset ${baseClass}"\n\t><input class="${baseClass}Box" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="checkBox" \n\t\tdata-dojo-attach-event="_onClick:_changeBox" type="${_type.type}" data-dojo-props=\'disabled:${disabled}, readOnly:${readOnly}\' baseClass="${_type.baseClass}"\n\t/><div class="dijitInline ${baseClass}Label" data-dojo-attach-point="labelNode" data-dojo-attach-event="onclick:_onClick"></div\n></div>\n',
"url:dojox/form/resources/CheckedMultiSelect.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}"\n\t><div data-dojo-attach-point="comboButtonNode"\n\t></div\n\t><div data-dojo-attach-point="selectNode" class="dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event="onmousedown:_onMouseDown,onclick:focus"\n\t\t><select class="${baseClass}Select dojoxCheckedMultiSelectHidden" multiple="true" data-dojo-attach-point="containerNode,focusNode"></select\n\t\t><div data-dojo-attach-point="wrapperDiv"></div\n\t></div\n></div>',
"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="ondijitclick:_onClick"\n/></div>\n',"url:dojox/form/resources/FileInput.html":'<div class="dijitFileInput">\n\t<input id="${id}" class="dijitFileInputReal" type="file" dojoAttachPoint="fileInput" name="${name}" />\n\t<div class="dijitFakeInput">\n\t\t<input class="dijitFileInputVisible" type="text" dojoAttachPoint="focusNode, inputNode" />\n\t\t<div class="dijitInline dijitFileInputText" dojoAttachPoint="titleNode">${label}</div>\n\t\t<div class="dijitInline dijitFileInputButton" dojoAttachPoint="cancelNode" \n\t\t\tdojoAttachEvent="onclick:reset">${cancelText}</div>\n\t</div>\n</div>\n',
"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t> \n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1" data-dojo-attach-point="valueNode" />\n</span>\n',
"url:dojox/form/resources/UploaderFileList.html":'<div class="dojoxUploaderFileList">\n\t<div data-dojo-attach-point="progressNode" class="dojoxUploaderFileListProgress">\n\t\t<div data-dojo-attach-point="percentBarNode" class="dojoxUploaderFileListProgressBar"></div>\n\t\t<div data-dojo-attach-point="percentTextNode" class="dojoxUploaderFileListPercentText">0%</div>\n\t</div>\n\t<table class="dojoxUploaderFileListTable">\n\t\t<thead>\n\t\t\t<tr class="dojoxUploaderFileListHeader">\n\t\t\t\t<th class="dojoxUploaderIndex">${headerIndex}</th>\n\t\t\t\t<th class="dojoxUploaderIcon">${headerType}</th>\n\t\t\t\t<th class="dojoxUploaderFileName">${headerFilename}</th>\n\t\t\t\t<th class="dojoxUploaderFileSize" data-dojo-attach-point="sizeHeader">${headerFilesize}</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody class="dojoxUploaderFileListContent" data-dojo-attach-point="listNode"></tbody>\n\t</table>\n<div>',
"url:dojox/widget/Calendar/Calendar.html":'<div class="dojoxCalendar">\n    <div tabindex="0" class="dojoxCalendarContainer" style="visibility: visible;" dojoAttachPoint="container">\n\t\t<div style="display:none">\n\t\t\t<div dojoAttachPoint="previousYearLabelNode"></div>\n\t\t\t<div dojoAttachPoint="nextYearLabelNode"></div>\n\t\t\t<div dojoAttachPoint="monthLabelSpacer"></div>\n\t\t</div>\n        <div class="dojoxCalendarHeader">\n            <div>\n                <div class="dojoxCalendarDecrease" dojoAttachPoint="decrementMonth"></div>\n            </div>\n            <div class="">\n                <div class="dojoxCalendarIncrease" dojoAttachPoint="incrementMonth"></div>\n            </div>\n            <div class="dojoxCalendarTitle" dojoAttachPoint="header" dojoAttachEvent="onclick: onHeaderClick">\n            </div>\n        </div>\n        <div class="dojoxCalendarBody" dojoAttachPoint="containerNode"></div>\n        <div class="">\n            <div class="dojoxCalendarFooter" dojoAttachPoint="footer">                        \n            </div>\n        </div>\n    </div>\n</div>\n',
"url:dojox/widget/Calendar/CalendarDay.html":'<div class="dijitCalendarDayLabels" style="left: 0px;" dojoAttachPoint="dayContainer">\n\t<div dojoAttachPoint="header">\n\t\t<div dojoAttachPoint="monthAndYearHeader">\n\t\t\t<span dojoAttachPoint="monthLabelNode" class="dojoxCalendarMonthLabelNode"></span>\n\t\t\t<span dojoAttachPoint="headerComma" class="dojoxCalendarComma">,</span>\n\t\t\t<span dojoAttachPoint="yearLabelNode" class="dojoxCalendarDayYearLabel"></span>\n\t\t</div>\n\t</div>\n\t<table cellspacing="0" cellpadding="0" border="0" style="margin: auto;">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td class="dijitCalendarDayLabelTemplate"><div class="dijitCalendarDayLabel"></div></td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody dojoAttachEvent="onclick: _onDayClick">\n\t\t\t<tr class="dijitCalendarWeekTemplate">\n\t\t\t\t<td class="dojoxCalendarNextMonth dijitCalendarDateTemplate">\n\t\t\t\t\t<div class="dijitCalendarDateLabel"></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n',
"url:dojox/widget/Calendar/CalendarMonthYear.html":'<div class="dojoxCal-MY-labels" style="left: 0px;"\t\n\tdojoAttachPoint="myContainer" dojoAttachEvent="onclick: onClick">\n\t\t<table cellspacing="0" cellpadding="0" border="0" style="margin: auto;">\n\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr class="dojoxCal-MY-G-Template">\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-M-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarMonthLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-M-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarMonthLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-Y-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarYearLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-Y-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarYearLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t </tr>\n\t\t\t\t\t\t <tr class="dojoxCal-MY-btns">\n\t\t\t\t\t\t \t <td class="dojoxCal-MY-btns" colspan="4">\n\t\t\t\t\t\t \t\t <span class="dijitReset dijitInline dijitButtonNode ok-btn" dojoAttachEvent="onclick: onOk" dojoAttachPoint="okBtn">\n\t\t\t\t\t\t \t \t \t <button\tclass="dijitReset dijitStretch dijitButtonContents">OK</button>\n\t\t\t\t\t\t\t\t </span>\n\t\t\t\t\t\t\t\t <span class="dijitReset dijitInline dijitButtonNode cancel-btn" dojoAttachEvent="onclick: onCancel" dojoAttachPoint="cancelBtn">\n\t\t\t\t\t\t \t \t\t <button\tclass="dijitReset dijitStretch dijitButtonContents">Cancel</button>\n\t\t\t\t\t\t\t\t </span>\n\t\t\t\t\t\t \t </td>\n\t\t\t\t\t\t </tr>\n\t\t\t\t</tbody>\n\t\t</table>\n</div>\n',
"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\n\t<div class="dijitTooltipContainer" role="presentation">\n\t\t<div data-dojo-attach-point="contentsNode" class="dijitTooltipContents dijitTooltipFocusNode">\n\t\t\t<div data-dojo-attach-point="containerNode"></div>\n\t\t\t${!actionBarTemplate}\n\t\t</div>\n\t</div>\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n',"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t\t<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${!checkedChar}</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="-1">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n\t${!actionBarTemplate}\n</div>\n\n',
"url:dijit/templates/ProgressBar.html":'<div class="dijitProgressBar dijitProgressBarEmpty" role="progressbar"\n\t><div  data-dojo-attach-point="internalProgress" class="dijitProgressBarFull"\n\t\t><div class="dijitProgressBarTile" role="presentation"></div\n\t\t><span style="visibility:hidden">&#160;</span\n\t></div\n\t><div data-dojo-attach-point="labelNode" class="dijitProgressBarLabel" id="${id}_label"></div\n\t><span data-dojo-attach-point="indeterminateHighContrastImage"\n\t\t   class="dijitInline dijitProgressBarIndeterminateHighContrastImage"></span\n></div>\n',
"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n',
"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n',
"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n',"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,textDirNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeydown:_onKeyDown"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n',
"url:dijit/form/templates/HorizontalSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeydown:_onKeyDown, onkeyup:_onKeyUp"\n\trole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"\n\t\t\t\t><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n',
"url:dijit/layout/templates/TabContainer.html":'<div class="dijitTabContainer">\n\t<div class="dijitTabListWrapper" data-dojo-attach-point="tablistNode"></div>\n\t<div data-dojo-attach-point="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point="containerNode"></div>\n</div>\n',"url:dijit/layout/templates/_TabButton.html":'<div role="presentation" data-dojo-attach-point="titleNode,innerDiv,tabContent" class="dijitTabInner dijitTabContent">\n\t<span role="presentation" class="dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point="iconNode"></span>\n\t<span data-dojo-attach-point=\'containerNode,focusNode\' class=\'tabLabel\'></span>\n\t<span class="dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point=\'closeNode\'\n\t\t  role="presentation">\n\t\t<span data-dojo-attach-point=\'closeText\' class=\'dijitTabCloseText\'>[x]</span\n\t\t\t\t></span>\n</div>\n',
"url:dijit/layout/templates/ScrollingTabController.html":'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_menuBtn"\n\t\t data-dojo-props="containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point="_menuBtn" showLabel="false" title="">&#9660;</div>\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_leftBtn"\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point="_leftBtn" data-dojo-attach-event="onClick: doSlideLeft">&#9664;</div>\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_rightBtn"\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point="_rightBtn" data-dojo-attach-event="onClick: doSlideRight">&#9654;</div>\n\t<div class=\'dijitTabListWrapper\' data-dojo-attach-point=\'tablistWrapper\'>\n\t\t<div role=\'tablist\' data-dojo-attach-event=\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point=\'containerNode\' class=\'nowrapTabStrip\'></div>\n\t</div>\n</div>',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'<div data-dojo-attach-event="ondijitclick:_onClick" class="dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point="focusNode" role="button">\n\t<span role="presentation" class="dijitInline dijitTabStripIcon" data-dojo-attach-point="iconNode"></span>\n\t<span data-dojo-attach-point="containerNode,titleNode" class="dijitButtonText"></span>\n</div>',"url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n",
"*now":function(r){r(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var r=this.require;r({cache:{}});!r.async&&r(["dojo"]);r.boot&&r.apply(null,r.boot)})();require("dojo/_base/array dojo/dom-geometry dojo/aspect dojo/on dgrid/OnDemandGrid dgrid/Grid dgrid/Selection dgrid/Tree dgrid/Editor dgrid/extensions/ColumnResizer dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/DijitRegistry dgrid/extensions/DnD dojox/form/CheckedMultiSelect dojox/form/FileInput dojox/form/Uploader dojox/form/uploader/FileList dojox/validate/web dojox/validate/check dojox/widget/Calendar dojox/gfx dojox/gfx/fx dojox/gfx/utils dojox/gfx/Moveable dojox/gesture/tap dojox/gesture/swipe dojox/html/styles dojo/dom-construct dijit/Menu dijit/Dialog dijit/Toolbar dijit/ProgressBar dijit/Tooltip dijit/form/TextBox dijit/form/DateTextBox dijit/form/Form dijit/form/FilteringSelect dijit/form/Textarea dijit/form/NumberTextBox dijit/form/ComboBox dijit/form/TimeTextBox dijit/form/Select dijit/form/NumberSpinner dijit/form/HorizontalSlider dijit/layout/ContentPane dijit/layout/TabContainer dijit/layout/BorderContainer dijit/layout/AccordionContainer dojo/io/iframe".split(" "),
function(r,u,s,t,l,b,p,m,k,f,c,e,g,q){dojo.array=r;dojo.domGeo=u;dojo.aspect=s;dojo.on=t;dgrid={};dgrid.OnDemandGrid=l;dgrid.Grid=b;dgrid.Selection=p;dgrid.Tree=m;dgrid.Editor=k;dgrid.ColumnResizer=f;dgrid.ColumnHider=c;dgrid.ColumnReorder=e;dgrid.DijitRegistry=g;dgrid.DnD=q;dojo.declare("FIRMOS.wsConnectionHandler",null,{constructor:function(){this.ws=null;this.binDataKey=this.reqId=0;this.openReq={};this.updateId=null;this.docLoaded=!1;this._createWS();this._logLoadingError=!0},documentLoaded:function(){console.log("DOCUMENT ONLOAD");
new FIRMOS.Menu({contextMenuForWindow:!0});this.docLoaded=!0},_createWS:function(){var a=this.getSessionId();this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-FREDB-"+(a?a:"NEW"));this.ws.binaryType="arraybuffer";this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onclose=this.wsCloseListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.ws.onopen=this.wsOpenListener.bind(this)},
callServerFunction:function(a,b,c,e,f,g,k,l){var m=G_UI_COM.beforeCallServerFunction(a,b,c,e);if(!m.abort)if(m.uidPath&&(c=m.uidPath),m.params&&(e=m.params),this.docLoaded)if(1!=this.ws.readyState)switch(this.ws.readyState){case 0:console.log("WS CONNECTING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,c,e,f,g,k),10);break;case 2:console.log("WS CLOSING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,c,e,f,g,k),100);break;case 3:console.log("WS CLOSED => RECREATE"),this._createWS()}else console.log("WS OK => CALL"),
console.log(a+" - "+b+" - "+c+" - "+JSON.stringify(e)+" - BLOB: "+("undefined"!=typeof k)+" - STATE: "+this.ws.readyState),a={cn:a,fn:b,uidPath:c,rId:this.reqId,rType:"S"},"undefined"!=typeof l&&null!=l&&(a.bDK=l),"undefined"!=typeof g&&null!=g&&(a.cId=g),"undefined"!=typeof e&&null!=e&&(a.params=e),e=dojo.toJson(a),f||(f=this.handleServerFunctionResponse.bind(this)),this.openReq[this.reqId]={fn:f,uiState:G_UI_COM.getUIState(),messageObj:a},"undefined"!=typeof k&&null!=k?(f=this.encodeString2Message(e),
e=new Uint8Array(4),g=f.length,e[3]=g>>24,e[2]=g>>16&255,e[1]=g>>8&255,e[0]=g&255,this.ws.send(new Blob([e,f,k]))):this.ws.send(this.encodeString2Message(e)),G_UI_COM.clearUIState(),this.reqId++;else this._logLoadingError&&(console.log("DOCUMENT LOADING => WAIT"),this._logLoadingError=!1),setTimeout(this.callServerFunction.bind(this,a,b,c,e,f,g,k),10)},handleAsyncServerRequest:function(a,b){this.handleServerFunctionResponse({},b,a,G_UI_COM.getUIState())},handleSyncServerRequest:function(a){this.handleServerFunctionResponse({},
!0,a,G_UI_COM.getUIState());a=dojo.toJson({rId:a.rid,rType:"SR"});this.ws.send(this.encodeString2Message(a))},handleServerFunctionResponse:function(a,b,c,e){if(b){if(""!=c.output)switch(b=dojo.fromJson(c.output),b.actiontype){case "jsupdate":case "jsexecute":G_UI_COM.restoreUIState(e);this.updateId="";a.cId&&(this.updateId=a.cId);"undefined"!=typeof b.updateid&&""!=b.updateid&&(this.updateId=b.updateid);G_UI_COM.clearUpdateArea(b.id);eval(b.action);break;default:console.error("Server Function Error => Unknown action type: "+
b.actiontype)}}else console.error("Server Function Error => "+c.cn+"."+c.fn+(c.error?": "+c.error:"")),c.output&&(b=dojo.fromJson(c.output),b.action&&eval(b.action))},wsMessageListener:function(a){a=dojo.fromJson(this.decodeMessage2String(a.data));a.session&&this.storeSessionId(a.session);if(a.error)this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!1,a,this.openReq[a.rid].uiState);else switch(a.rtype){case "E":this.openReq[a.rid]?(this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!1,a,this.openReq[a.rid].uiState),
delete this.openReq[a.rid]):this.handleAsyncServerRequest(a,!1);break;case "SR":this.openReq[a.rid]?(this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!0,a,this.openReq[a.rid].uiState),delete this.openReq[a.rid]):console.error(" Error => Got answer for unknown request id: "+a.rid);break;case "S":this.handleSyncServerRequest(a);break;case "A":this.handleAsyncServerRequest(a,!0);break;default:console.error(" Error => Unknown Server Request Type: "+a.rtype)}},wsCloseListener:function(a){console.log("WS CLOSE "+
JSON.stringify(a))},wsErrorListener:function(a){console.log("WS ERROR "+JSON.stringify(a))},wsOpenListener:function(a){console.log("WS OPEN "+JSON.stringify(a));this.callServerFunction("FIRMOS","init")},encodeString2Message:function(a){return a},decodeMessage2String:function(a){return a},storeSessionId:function(a){sessionStorage.setItem("sessionId",a)},getSessionId:function(){return sessionStorage.getItem("sessionId")},getBinaryDataKey:function(){return this.binDataKey++}});dojo.declare("FIRMOS.uiHandler",
null,{constructor:function(a){this.clearUIState();this.dialog_=[];this.uiState_={};this.showSectionPathInProgress=!1;this.stores_={};this.formDBOs_={};this.selDepFuncs_={views:{},classes:{}};this.liveCharts_={};this.msgProgress_={};this.createdCSSRules_={};this.serverCom=a;this.buttonClickStates_={};this.sitemap_=null;this.storeDepData={}},refreshView:function(a){a.isInstanceOf(FIRMOS.GridBase)?a.refresh():console.error("REFRESH VIEW TYPE UNKNOWN")},refreshStore:function(a){if(a=G_UI_COM.getStoreById(a))for(var b=
0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},setMenu:function(a){this.menu_=a},isDialogAction:function(){this.dialogAction_=!0},setGridDetailsId:function(a){this.gridDetailsId_=a},setActionCoords:function(a){this.actionCoords_=a},getUIState:function(){return{dialogAction:this.dialogAction_,dialog:this.dialog_,menu:this.menu_,gridDetailsId:this.gridDetailsId_,actionCoords:this.actionCoords_}},clearUIState:function(){this.dialogAction_=!1;this.actionCoords_=this.gridDetailsId_=this.menu_=
null},restoreUIState:function(a){this.uiState_=a},closeDialog:function(){0<this.uiState_.dialog.length&&0<this.dialog_.length&&this.uiState_.dialog[this.uiState_.dialog.length-1].id==this.dialog_[this.dialog_.length-1].id&&this.dialog_[this.dialog_.length-1].hide(!0)},dialogLoaded:function(a){this.uiState_.dialogAction&&this.closeDialog();this.dialog_.push(a);a.show()},dialogClosed:function(a){if(this.dialog_[this.dialog_.length]==a)this.dialog_.pop();else{for(var b=[],c=0;c<this.dialog_.length;c++)this.dialog_[c].id!=
a&&(b[b.length]=this.dialog_[c]);this.dialog_=b}},showMessage:function(a){a.show();this.dialog_.push(a)},setWinTitle:function(a){a&&""!=a&&(document.title=a)},clearContentArea:function(a){this.serverCom.updateId=a;this.clearUpdateArea("");this.contentLoaded(new dijit.layout.ContentPane({}))},clearUpdateArea:function(a){if(""!=a){var b=dijit.byId(a);""==this.serverCom.updateId&&b&&(this.serverCom.updateId=a)}if(""!=this.serverCom.updateId)if("FirmOSViewport"==this.serverCom.updateId)for(var b=dojo.byId("FirmOSViewport"),
b=dijit.findWidgets(b),c=0;c<b.length;c++)b[c].destroyRecursive();else if(b=dijit.byId(this.serverCom.updateId)){c=b.getParent();if(c.isInstanceOf(dijit.layout.TabContainer)||c.isTCElem)return;if(b._contentId)var e=b._contentId;else e=b.id,this.serverCom.updateId=c.id,b=c;if(c=dijit.byId(e))c.region&&(b.updatingRegion_=c.region,b.updatingStyle_=c.style),b.removeChild(c),c.destroyRecursive()}(b=dijit.byId(a))&&b.destroyRecursive()},contentLoaded:function(a,b){this.setWinTitle(b);this.uiState_.dialogAction&&
this.closeDialog();if("FirmOSViewport"==this.serverCom.updateId){var c=dojo.byId("FirmOSViewport");a.placeAt(c);a.startup()}else(c=dijit.byId(this.serverCom.updateId))?(c.getParent(),c.updatingRegion_&&(a.set("region",c.updatingRegion_),delete c.updatingRegion_,a.set("style",c.updatingStyle_),delete c.updatingStyle_),c.isInstanceOf(dijit.layout.ContentPane)?c.set("content",a):c.addChild(a),c._contentId&&(c._contentId=a.id),a.startup()):(console.warn("NO CONTENT AREA FOUND FOR "+a.id),a.destroyRecursive());
this.serverCom.updateId=null},formProxyLoaded:function(a){console.error("IMPLEMENT ME")},menuLoaded:function(a){if(0<a.length)if(this.uiState_.menu)this.uiState_.menu.entriesLoaded(a);else if(this.uiState_.actionCoords){var b=new FIRMOS.Menu;b.setCoords(this.uiState_.actionCoords.x,this.uiState_.actionCoords.y);b.entriesLoaded(a)}},updateStore:function(a,b){var c=this.getStoreById(a);c&&(b.updated&&c.store.updateItems(b.updated),b.deleted&&c.store.deleteItems(b.deleted),b["new"]&&c.store.newItems(b["new"]))},
registerStore:function(a){this.stores_[a.id]?this.stores_[a.id].store=a:this.stores_[a.id]={store:a,views:[]}},unregisterStore:function(a){delete this.stores_[a.id]},registerFormDBOs:function(a,b){this.formDBOs_[a.id]?console.error("Form "+a.id+" already registered"):this.formDBOs_[a.id]={form:a,ids:b}},unregisterFormDBOs:function(a,b){this.formDBOs_[a]?(G_SERVER_COM.callServerFunction("FIRMOS","unregisterDBO",null,{ids:b}),delete this.formDBOs_[a]):console.error("Form "+a+" not registered")},updateFormDBO:function(a){for(var b in this.formDBOs_)for(var c=
0;c<this.formDBOs_[b].ids.length;c++)if(this.formDBOs_[b].ids[c]==a.uid){this.formDBOs_[b].form.updateValues(a);break}},updateForm:function(a,b){var c=dijit.byId(a+"_form");c&&c.isInstanceOf(FIRMOS.Form)&&c.updateValues(b)},resetForm:function(a){(a=dijit.byId(a+"_form"))&&a.isInstanceOf(FIRMOS.Form)&&a.resetValues()},updateSVG:function(a,b,c,e){(a=dijit.byId(a))&&a.isInstanceOf(FIRMOS.SVG)&&a.updateElement(b,c,e)},registerSelDepFunc:function(a,b,c){this.selDepFuncs_.views[c.id]=c;this.selDepFuncs_.classes[a]||
(this.selDepFuncs_.classes[a]={});this.selDepFuncs_.classes[a][b]||(this.selDepFuncs_.classes[a][b]={viewIds:{}});this.selDepFuncs_.classes[a][b].viewIds[c.id]=!0},unregisterSelDepFunc:function(a,b,c){this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]&&(delete this.selDepFuncs_.classes[a][b].viewIds[c.id],0==Object.keys(this.selDepFuncs_.classes[a][b].viewIds).length&&(delete this.selDepFuncs_.classes[a][b].viewIds,0==Object.keys(this.selDepFuncs_.classes[a][b]).length&&(delete this.selDepFuncs_.classes[a][b],
0==Object.keys(this.selDepFuncs_.classes[a]).length&&delete this.selDepFuncs_.classes[a])));delete this.selDepFuncs_.views[c.id]},beforeCallServerFunction:function(a,b,c,e){var f={};if(this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]){var g=[],k;for(k in this.selDepFuncs_.classes[a][b].viewIds)a=this.selDepFuncs_.views[k],g=g.concat(a.getSelectedIds()),dojo.mixin(e,a.contentParmas);c||1==g.length?(f.uidPath=c||[g[0]],e.selected=g,f.params=e):((c=dijit.byId(this.parentId).getParent()._contentId)&&
G_UI_COM.clearContentArea(c),f.abort=!0)}return f},registerLiveChart:function(a){this.liveCharts_[a.id]=a},unregisterLiveChart:function(a){delete this.liveCharts_[a.id]},updateLiveChart:function(a,b,c){this.liveCharts_[a]?this.liveCharts_[a].setData(b,c):console.error("updateLiveChart: "+a+" chart not found")},redefineLiveChart:function(a,b){this.liveCharts_[a]?this.liveCharts_[a].redefine(b):console.error("redefineLiveChart: "+a+" chart not found")},registerMsgProgress:function(a,b){this.msgProgress_[a]=
b},unregisterMsgProgress:function(a){delete this.msgProgress_[a]},updateMsgProgress:function(a,b){this.msgProgress_[a]?this.msgProgress_[a].updateProgress(b):console.error("updateMsgProgress: "+a+" message progress not registered")},registerStoreView:function(a,b){if(this.getStoreById(a)){for(var c=!1,e=0;e<this.stores_[a].views.length;e++)this.stores_[a].views[e].id==b.id&&(c=!0,this.stores_[a].views[e]=b);c||(this.stores_[a].views[this.stores_[a].views.length]=b)}else console.error("registerStoreView: "+
a+" store not registered")},unregisterStoreView:function(a,b){if(this.getStoreById(a)){for(var c=0;c<this.stores_[a].views.length;c++)if(this.stores_[a].views[c].id==b.id){this.stores_[a].views.splice(c,1);break}0==this.stores_[a].views.length&&this.stores_[a].store.destroy()}},getStore:function(a,b){var c=G_UI_COM.getStoreById(a);if(c)return c.store;this.storeDepData[a]&&(b._dependency=this.storeDepData[a],delete this.storeDepData[a]);return new FIRMOS.Store(b)},setStoreDepData:function(a,b){this.storeDepData[a]=
b},setStoreDependency:function(a,b,c,e,f,g){var k={};k.filterfieldname=b;k.filtervalues=e;k.filtertype=c;f&&(k.numfiltertype=f);g&&(k.strfiltertype=g);(c=this.getStoreById(a))?c.store.params_.dependency[b+"_ref"]=k:(this.storeDepData[a]||(this.storeDepData[a]={}),this.storeDepData[a][b+"_ref"]=k)},deleteStoreDependency:function(a,b){var c=this.getStoreById(a);c?delete c.store.params_.dependency[b+"_ref"]:this.storeDepData[a]&&(delete this.storeDepData[a][b+"_ref"],0==Object.keys(this.storeDepData[a]).length&&
delete this.storeDepData[a])},getStoreById:function(a){return this.stores_[a]},sortFuncSubSecOrd:function(a,b){return a._subSecOrd<b._subSecOrd?-1:a._subSecOrd>b._subSecOrd?1:0},createCSSRule:function(a,b){this.createdCSSRules_[a]||(dojox.html.insertCssRule("."+a,b),this.createdCSSRules_[a]=b)},removeCSSRule:function(a){this.createdCSSRules_[a]&&(dojox.html.removeCssRule("."+a,this.createdCSSRules_[a]),delete this.createdCSSRules_[a])},buildSVGDef:function(a){var b=dojo.doc.createElementNS("http://www.w3.org/2000/svg",
a.tagname);if(a.attrs){a.attrs instanceof Array||(a.attrs=[a.attrs]);for(var c=0;c<a.attrs.length;c++)b.setAttribute(a.attrs[c].name,a.attrs[c].value)}if(a.elems)for(a.elems instanceof Array||(a.elems=[a.elems]),c=0;c<a.elems.length;c++){var e=this.buildSVGDef(a.elems[c]);b.appendChild(e)}return b},toggleFormGroupStatus:function(a,b){var c=dojo.byId(b+"_tl"),e=dojo.byId(b+"_tr");if(dojo.hasClass(c,"firmosFormGroupShowLeft")){var f="";dojo.removeClass(c,"firmosFormGroupShowLeft");dojo.removeClass(e,
"firmosFormGroupShowRight");dojo.addClass(c,"firmosFormGroupHideLeft");dojo.addClass(e,"firmosFormGroupHideRight")}else f="none",dojo.removeClass(c,"firmosFormGroupHideLeft"),dojo.removeClass(e,"firmosFormGroupHideRight"),dojo.addClass(c,"firmosFormGroupShowLeft"),dojo.addClass(e,"firmosFormGroupShowRight");c=dojo.byId(a);c=dojo.query('tr[firmosGroup~="'+b+'"]',c);for(e=0;e<c.length;e++)dojo.style(c[e],"display",f)},addMenuEntries:function(a,b,c){for(var e=!0,f=0;f<b.length;f++){var g={};g.label=
b[f].caption;g.disabled=b[f].disabled||c;if(b[f].icon){var k=b[f].icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(k,"background-image: url('"+b[f].icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");g.iconClass=k}if(b[f].menu){k={};b[f].id&&(k.id=b[f].id);k=new dijit.Menu(k);g.disabled=this.addMenuEntries(k,b[f].menu,g.disabled)||g.disabled;g.popup=k;var l=new dijit.PopupMenuItem(g);k._parentUIElement=l;a.addChild(l)}else b[f].id&&(g.id=b[f].id),b[f].action&&(g._action=
b[f].action,g.onClick=function(){G_SERVER_COM.callServerFunction(this._action["class"],this._action.func,this._action.uidPath,this._action.params)}),b[f].downloadId&&(g._downloadId=b[f].downloadId,g.onClick=function(){dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this._downloadId,!0)}),a.addChild(new dijit.MenuItem(g));e=e&&g.disabled}return e},_handleTabContainer:function(a,b,c,e){c.shift();if(0<c.length)b=1==c.length,this.showSectionPath(a,c,e)||console.error("Could not resolve given sub section path: container: "+
a.id+", sections: "+JSON.stringify(c)),b&&(G_UI_COM.showSectionPathInProgress=!1);else if(e&&(a=a.getChildren()[0])&&a.isInstanceOf(FIRMOS.MultiContentContainer))for(c=a.getChildren(),e=0;e<c.length;e++)if(c[e].id==a.selectedChildWidget.id){e==c.length-1?a.selectChild(c[0].id):a.selectChild(c[e+1].id);break}},showSectionPath:function(a,b,c){if("string"==typeof a){if("FirmOSViewport"==a)var e=dojo.byId("FirmOSViewport"),e=dijit.byId(e.children[0].id);else e=dijit.byId(a);e||console.error('Base container "'+
a+'" not found.')}else e=a;if(e.isInstanceOf(dijit.layout.ContentPane))return e.hasChildren()?this.showSectionPath(e.getChildren()[0],b,c):!1;if(e.isInstanceOf(dijit.layout.BorderContainer)){a=e.getChildren();for(e=0;e<a.length;e++)if(this.showSectionPath(a[e],b,c))return!0;return!1}if(e.isInstanceOf(FIRMOS.TabContainer)){var f=e.getChild(b[0]);if(f)return c=c&&e.selectedChildWidget.id==b[0],e.selectChild(f,this._handleTabContainer.bind(this,f,a,b,c)),!0;e.selectDefault();return!1}},registerSitemap:function(a){this.sitemap_=
a},unregisterSitemap:function(a){delete this.sitemap_},_updateElement:function(a,b){a.set("disabled",b);a._parentUIElement&&a._parentUIElement.set("disabled",b)},_updateChildElements:function(a,b){if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)||a.isInstanceOf(dijit.PopupMenuItem))for(var c=a.isInstanceOf(dijit.PopupMenuItem)?a.popup.getChildren():a.getChildren(),e=0;e<c.length;e++)this._updateElement(c[e],b),this._updateChildElements(c[e],b)},_updateParent:function(a){a=a._parentUIElement?
a._parentUIElement.getParent():a.getParent();if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)){for(var b=a.getChildren(),c=!0,e=0;e<b.length;e++)if(!b[e].get("disabled")){c=!1;break}a.get("disabled")!=c&&(this._updateElement(a,c),this._updateParent(a))}},updateGridDrag:function(a,b){var c=dijit.byId(a+"_grid");c&&(c.dndDisabled=b)},updateUIElement:function(a,b,c,e){var f=dijit.byId(a);f&&(this._updateElement(f,b),""!=c&&f.set("label",c),e&&(a=dijit.byId(a+"_tooltip"))&&(c=a.displayedFor(),
a.set("label",e),c&&(a.close(),a.open(c))),this._updateChildElements(f,b),this._updateParent(f))},updateUIElementSubmenu:function(a,b){var c=dijit.byId(a);if(c){c.destroyDescendants();var e=G_UI_COM.addMenuEntries(c,b,c.get("disabled"));this._updateElement(c,e)}},openUrl:function(a,b){b?window.open(a)||alert(G_TEXTS.openWindow.error):document.location.href=a}});G_SERVER_COM=new FIRMOS.wsConnectionHandler;G_UI_COM=new FIRMOS.uiHandler(G_SERVER_COM);dojo.declare("FIRMOS.Dialog",dijit.Dialog,{postCreate:function(){this.inherited(arguments);
if(this._contentObj){var a=this._maxHeight,b=this._maxWidth,c=dojo.domGeo.position(document.body);0==this._percHeight&&0==a&&(this._percHeight=80);0==this._percWidth&&0==b&&(this._percWidth=80);0!=this._percHeight&&(a=this._percHeight/100*c.h);0!=this._percWidth&&(b=this._percWidth/100*c.w);c=dijit.layout.BorderContainer({});c.set("style","height: "+a+"px; width: "+b+"px;");this._contentObj.set("region","center");c.addChild(this._contentObj);this._buttonDef&&(this._buttonsCP=dijit.layout.ContentPane({content:this._buttonDef,
region:"bottom",style:"text-align:center;"}),c.addChild(this._buttonsCP));this.set("content",c)}this.styleClass&&dojo.addClass(this.domNode,this.styleClass)},disableAllButtons:function(){if(this._buttonsCP)for(var a=this.getDescendants(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b]._orgState=a[b].get("disabled"),a[b].set("disabled",!0))},restoreAllButtons:function(){if(this._buttonsCP)for(var a=this.getDescendants(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b].set("disabled",
a[b]._orgState),delete a[b]._orgState)},onShow:function(){this.closable||dojo.style(this.closeButtonNode,"display","none")},hide:function(a){if(this.closable||a)G_UI_COM.dialogClosed(this.id),this.destroyRecursive()}});dojo.declare("FIRMOS.Message",FIRMOS.Dialog,{texts:G_TEXTS.msg,closable:!1,destroy:function(){this.progressBarId&&G_UI_COM.unregisterMsgProgress(this.progressBarId);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a;switch(this.type){case "msg_error":a=
"Error";break;case "msg_warning":a="Info";break;case "msg_info":a="Confirm";break;case "msg_confirm":a="Warning";break;case "msg_wait":a="Wait"}var b='<div class="firmosMessageIcon'+a+'"></div><div class="firmosMessage'+a+'">'+this.msg+"</div>";this.progressBarId&&(b=b+'<div class="firmosMessageProgressBar" id="'+this.id+'_pb"></div>');b=b+'<div class="firmosMessageButtons'+a+'" id="'+this.id+'_buttons"></div>';this.set("content",b);switch(this.type){case "msg_error":case "msg_warning":case "msg_info":a=
new dijit.form.Button({type:"button",label:this.texts.ok,onClick:this._onClick.bind(this)});a.placeAt(dojo.byId(this.id+"_buttons"));break;case "msg_confirm":a=new dijit.form.Button({type:"button",label:this.texts.yes,onClick:this._onClick.bind(this,!0)});a.placeAt(dojo.byId(this.id+"_buttons"));a=new dijit.form.Button({type:"button",label:this.texts.no,onClick:this._onClick.bind(this,!1)});a.placeAt(dojo.byId(this.id+"_buttons"));break;case "msg_wait":this.sfClassname&&(a=new dijit.form.Button({type:"button",
label:this.texts.abort,onClick:this._onClick.bind(this)}),a.placeAt(dojo.byId(this.id+"_buttons")))}this.progressBarId&&(G_UI_COM.registerMsgProgress(this.progressBarId,this),this._pb=new dijit.ProgressBar({style:"width: 100%"}),this._pb.set("value",0),this._pb.set("label","0%"),this._pb.placeAt(dojo.byId(this.id+"_pb")))},updateProgress:function(a){this._pb.set("value",a);this._pb.set("label",Math.round(a)+"%")},_onClick:function(a){this.hide(!0);if(this.sfClassname){var b=dojo.clone(this.sfParams);
"boolean"==typeof a&&(b.confirmed=a);G_SERVER_COM.callServerFunction(this.sfClassname,this.sfFunctionname,this.sfUidPath,b)}}});dojo.declare("FIRMOS.Store",null,{idAttribute:"uid",tracked:!1,constructor:function(a){this._orgArgs=a;this.params_={};a._dependency?(this.params_.dependency=a._dependency,delete a._dependency):this.params_.dependency={};for(var b in a)this[b]=a[b];this.queryId_=0;this.queryResults_={};this.childStores={};G_UI_COM.registerStore(this)},destroy:function(){console.log("DESTROY STORE "+
this.id);for(var a in this.childStores)this.childStores[a].destroy();this.parent?(delete this.parentStore.childStores[this.parentStore.getIdentity(this.parent)],delete this.parent,delete this.parentStore):(this.destroyClassname&&G_SERVER_COM.callServerFunction(this.destroyClassname,this.destroyFunctionname,this.destroyUidPath,this.destroyParams),G_UI_COM.unregisterStore(this),G_UI_COM.setStoreDepData(this.id,this.params_.dependency));this.inherited(arguments)},filter:function(a){return this},sort:function(a,
b){if(a instanceof Array)for(var c=a.length-1;0<=c;c--)this._sort(a[c].property,a[c].descending);else this._sort(a,b);return this},_sort:function(a,b){},_forEachCallback:function(a,b,c){for(var e=0;e<c.length;e++)a.call(b,c[e])},forEach:function(a,b){this.fetch().addCallback(this._forEachCallback.bind(this,a,b))},fetch:function(a){console.log("FUNCTION fetch "+JSON.stringify(arguments));return this.fetchRange()},fetchRange:function(a){console.log("FUNTION fetchRange "+JSON.stringify(arguments));a=
a||{};var b=this._doQuery(a);b.request=a;return b},track:function(){this.tracked=!0;this.tracking={};this.tracking.remove=this.stopTracking.bind(this);return this},stopTracking:function(){this.tracked=!1;delete this.tracking},_getOnTracked:function(a,b,c){switch(c){case "delete":b="onDelete";break;case "add":b="onAdd";break;case "update":b="onUpdate";break;default:return{remove:function(){}}}return dojo.aspect.after(this,b,a,!0)},on:function(a,b){console.log("ON "+a+" "+this.id);return dojo.on.parse(this,
a,b,this._getOnTracked.bind(this,b))},releaseRange:function(a,b){console.log("FUNCTION releaseRange "+a+" "+b)},get:function(a){var b={};b[this.idAttribute]=a;return b},getIdentity:function(a){return a[this.idAttribute]},put:function(a,b){},add:function(a,b){},remove:function(a){if(this.dragClassname){var b=dojo.clone(this.dragParams);dojo.mixin(b,this.params_);b.selected=a;G_SERVER_COM.callServerFunction(this.dragClassname,this.dragFunctionname,this.dragUidPath,b)}},put:function(a,b){console.log("PUT "+
JSON.stringify(a)+" - "+JSON.stringify(b));if(b){if(this.dropClassname){var c=dojo.clone(this.dropParams);dojo.mixin(c,this.params_);c.selected=[];for(var e=0;e<a.length;e++)c.selected.push(this.getIdentity(a[e]));b.before&&(c.target=b.source?b.source.getIdentity(b.before):this.getIdentity(b.before));b.mousePos&&G_UI_COM.setActionCoords(b.mousePos);G_SERVER_COM.callServerFunction(this.dropClassname,this.dropFunctionname,this.dropUidPath,c)}}else this.saveClassname&&(c=dojo.clone(this.saveParams),
dojo.mixin(c,this.params_),c.data=a,G_SERVER_COM.callServerFunction(this.saveClassname,this.saveFunctionname,this.saveUidPath,c))},transaction:function(){},create:function(a){},getChildren:function(a){args=dojo.clone(this._orgArgs);args.id=this.id+"_"+this.getIdentity(a);var b=new FIRMOS.Store(args);b.parent=a;b.parentStore=this;this.childStores[this.getIdentity(a)]=b;a._childrenfunc_&&(b.getClassname=a._funcclassname_||this.getClassname,b.getFunctionname=a._childrenfunc_,b.getUidPath=a.uidpath?a.uidpath instanceof
Array?a.uidpath:[a.uidpath]:[a.uid]);return b},mayHaveChildren:function(a){return a.children?!0:!1},getRootCollection:function(){return this.parentStore?this.parentStore.getRootCollection():this},_doQuery:function(a){var b=new dojo.Deferred,c=this.getRootCollection().queryId_++;this.queryResults_[c]={};this.queryResults_[c].query=a.query;this.queryResults_[c].queryArgs=a;this.queryResults_[c].dataIds=[];this.queryResults_[c].parentId="";var e=dojo.clone(this.getParams);dojo.mixin(e,this.params_);
if(this.parent){var f=this.getIdentity(this.parent);this.queryResults_[c].parentId=f;e.parentid=f}e.queryid=c;a.query&&(e.query=a.query);"undefined"!=typeof a.count&&(e.count=a.count);"undefined"!=typeof a.start&&(e.start=a.start,"undefined"!=typeof a.end&&(e.count=a.end-a.start+1,e.end=a.end));if(a.sort)for(e.sort=[],f=0;f<a.sort.length;f++)e.sort[f]={},e.sort[f].property=a.sort[f].attribute,e.sort[f].ascending=!a.sort[f].descending;b.totalLength=new dojo.Deferred;a=function(a,c,e,f){if(e)if(c=dojo.fromJson(f.output),
c.actiontype&&"jsexecute"==c.actiontype)b.reject(),eval(c.action);else{b.totalLength.resolve(c.total);if(this.queryResults_[a])for(e=0;e<c.data.length;e++)this.queryResults_[a].dataIds.push(this.getIdentity(c.data[e]));b.resolve(c.data)}else b.reject(f.error),f.output&&(c=dojo.fromJson(f.output),c.action&&eval(c.action))}.bind(this,c);G_SERVER_COM.callServerFunction(this.getClassname,this.getFunctionname,this.getUidPath,e,a);return b},onAdd:function(a){},onDelete:function(a){},onUpdate:function(a){},
_getItemQueryPos:function(a,b){for(var c=0;c<this.queryResults_[b].dataIds.length;c++)if(this.queryResults_[b].dataIds[c]==a)return c;return-1},_findChildrenCallResultSets:function(a){var b=[],c;for(c in this.queryResults_)this.queryResults_[c].parentId==a&&b.push({queryId:c});return b},_removeChildrenQuerys:function(a){for(var b in this.queryResults_)if(this.queryResults_[b].parentId==a){for(var c=0;c<this.queryResults_[b].dataIds.length;c++)this._removeChildrenQuerys(this.queryResults_[b].dataIds[c]);
delete this.queryResults_[b]}},_checkUpdateInput:function(a,b,c,e){if(!this.queryResults_[a])return console.warn(c+': Query "'+a+'" not found for item "'+b+'" in store "'+this.id+'"'),-1;var f=this._getItemQueryPos(b,a);-1==f?e||console.warn(c+': Item "'+b+'" not found in query "'+a+'" for store "'+this.id+'"'):e&&console.warn(c+': Item "'+b+'" already found in query "'+a+'" for store "'+this.id+'"');return f},newItems:function(a){for(var b=0;b<a.length;b++){var c={type:"add"};c.target=a[b].item;
if(-1!=this._checkUpdateInput(a[b].qid,this.getIdentity(a[b].item),"NewItems",!0))break;if(a[b].revid&&""!=a[b].revid){var e=this._checkUpdateInput(a[b].qid,a[b].revid,"NewItems",!1);-1==e&&(e=this.queryResults_[a[b].qid].dataIds.length,this.queryResults_[a[b].qid].dataIds.push(this.getIdentity(a[b].item)));this.queryResults_[a[b].qid].dataIds.splice(e,0,this.getIdentity(a[b].item))}else e=this.queryResults_[a[b].qid].dataIds.length,this.queryResults_[a[b].qid].dataIds.push(this.getIdentity(a[b].item));
c.index=e;this.onAdd(c)}},deleteItems:function(a){for(var b=0;b<a.length;b++){var c={type:"delete"};c.id=a[b].itemid;var e=this._checkUpdateInput(a[b].qid,a[b].itemid,"DeleteItems",!1);if(-1==e)break;c.previousIndex=e;this._removeChildrenQuerys(a[b].itemid);this.queryResults_[a[b].qid].dataIds.splice(e,1);this.onDelete(c)}},updateItems:function(a){for(var b=0;b<a.length;b++){var c={type:"update"};c.target=a[b].item;var e=this._checkUpdateInput(a[b].qid,this.getIdentity(a[b].item),"UpdateItems",!1);
if(-1==e)break;if(a[b].revid&&""!=a[b].revid){var f=this._checkUpdateInput(a[b].qid,a[b].revid,"UpdateItems",!1);if(-1==f)break}else f=e;c.index=f;c.previousIndex=e;this.onUpdate(c)}}});_ColumnDnDSource=dojo.declare("FIRMOS.ColumnDnDSource",dgrid.ColumnReorder.ColumnDndSource,{onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)}});dojo.declare("FIRMOS.ColumnReorder",dgrid.ColumnReorder,{columnDndConstructor:_ColumnDnDSource});_GridDnDSource=dojo.declare("FIRMOS.GridDnDSource",
dgrid.DnD.GridSource,{allowNested:!0,checkAcceptance:function(a,b){for(var c=0;c<b.length;++c){for(var e=a.getItem(b[c].id).type,f=!1,g=0;g<e.length;++g)if(e[g]in this.accept){f=!0;break}if(!f)return!1}return!0},onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)},copyState:function(a,b){return!1},getSelectedNodes:function(){if(this.grid.dndDisabled)return[];var a=[];if(!this.current)return[];var b=new dojo.NodeList,c;for(c in this.grid.selection){var e=this.grid.row(c).data;
this.grid.dragClasses_&&!(e.dndclass in this.grid.dragClasses_)||e._disabledrag_?a.push(e):b.push(this._selectedNodes[c])}if(0<a.length){b="";for(c=0;c<a.length;c++)b+=", "+this.grid.collection.getIdentity(a[c]);b=b.substr(2);console.log("Object(s) not dragable "+b);return[]}return b},onDrop:function(a,b,c){var e=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,k=g.collection,f=f&&g.row(f);dojo.Deferred.when(f&&k.get(k.getIdentity(f.data)),function(f){if(e!=a)e.onDropExternal(a,b,c,f);else e.onDropInternal(b,
c,f)})},onDropInternal:function(a,b,c){var e=this.grid.collection,f=this,g=[];a.forEach(function(a){g.push(f.getObject(a))});e[b&&e.copy?"copy":"put"](g,{before:c,mousePos:this.mousePos_})},onDropExternal:function(a,b,c,e){var f=this.grid.collection,g=a.grid,k=[];b.forEach(function(b,d){k.push(a.getObject(b))});f[c&&f.copy?"copy":"put"](k,{source:g.collection,before:e,mousePos:this.mousePos_})},getObject:function(a){return this.grid.row(a).data},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=
this.targetState){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.Manager.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(dojo.dnd.getCopyKeyState(a),!0))}if(this.isDragging&&(this.mousePos_={x:a.pageX,y:a.pageY},c=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=dojo.domGeo.position(this.current,
!0)),c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==dojo.domGeo.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||c!=this.before))if(this._markTargetAnchor(c),this.grid.dropClassesMultiple_||this.grid.dropClassesSimple_)if(this.current)if(a=this.grid.row(this.current).data,(this.grid.dropClassesSingle_&&a.dndclass in this.grid.dropClassesSingle_&&1==this.grid.selection_.length||this.grid.dropClassesMultiple_&&a.dndclass in
this.grid.dropClassesMultiple_)&&!a._disabledrop_){for(var c=!1,e=0;e<b.nodes.length;e++)if(b.source.grid.collection.getIdentity(b.source.grid.row(b.nodes[e]))==this.grid.collection.getIdentity(a)){c=!0;break}c?b.canDrop(!1):b.canDrop(!0)}else b.canDrop(!1);else b.canDrop(!1);else b.canDrop(!0)}},onMouseDown:function(a){if(!(this.mouseDown||!this._legalMouseDown(a)||this.skipForm&&dojo.dnd.isFormElement(a))&&(this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,this.autoSync&&this.sync(),this.current))if(!this.singular&&
!dojo.dnd.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0;else if(!this.singular&&a.shiftKey){if(dojo.dnd.getCopyKeyState(a)||this._removeSelection(),a=this.getAllNodes(),a.length&&(this.anchor||(this.anchor=a[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var b=0,c;b<a.length&&(c=a[b],c!=this.anchor&&c!=this.current);++b);for(++b;b<a.length;++b){c=a[b];if(c==this.anchor||c==this.current)break;
this._addItemClass(c,"Selected");this.selection[c.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?dojo.dnd.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):dojo.dnd.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,
"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1)}});dojo.declare("FIRMOS.GridDnD",dgrid.DnD,{dndAcceptType:["dgrid-row"],dndConstructor:_GridDnDSource,
postMixInProperties:function(){this.inherited(arguments);this.dndParams=dojo.mixin(this.dndParams,{accept:this.dndAcceptType})}});dojo.declare("FIRMOS.Selection",dgrid.Selection,{clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null)}});dojo.declare("FIRMOS.GridSearch",dijit.form.TextBox,{intermediateChanges:!0,searchDelay:500,doSearch:function(){delete this._sendTimeout;this.grid.doSearch(this.get("value"))},onChange:function(a){this._sendTimeout&&
clearTimeout(this._sendTimeout);this._sendTimeout=setTimeout(this.doSearch.bind(this),this.searchDelay)}});dojo.declare("FIRMOS.GridBase",null,{getBeforePut:!1,constructor:function(a){if(a.dragClasses){this.dragClasses_={};for(var b=0;b<a.dragClasses.length;b++)this.dragClasses_[a.dragClasses[b]]=!0;delete a.dragClasses}if(a.dropClassesMultiple){this.dropClassesMultiple_={};for(b=0;b<a.dropClassesMultiple.length;b++)this.dropClassesMultiple_[a.dropClassesMultiple[b]]=!0;delete a.dropClassesMultiple}if(a.dropClassesSingle){this.dropClassesSingle_=
{};for(b=0;b<a.dropClassesSingle.length;b++)this.dropClassesSingle_[a.dropClassesSingle[b]]=!0;delete a.dropClassesSingle}this.depStores_=[];this.buttons_=[];this.storeRefreshHandler_={};this.selection_=[];this._events=[];G_UI_COM.registerStoreView(a.collection.id,this);a.selDepClassname&&(this.id=a.id,G_UI_COM.registerSelDepFunc(a.selDepClassname,a.selDepFunctionname,this))},destroy:function(){this.selection={};this.notifyServer();this.selDepClassname&&G_UI_COM.unregisterSelDepFunc(this.selDepClassname,
this.selDepFunctionname,this);for(var a=0;a<this.depStores_.length;a++)G_UI_COM.deleteStoreDependency(this.depStores_[a].storeId,this.depStores_[a].refId);for(;0<this._events.length;)this._events.pop().remove();for(a in this._rowIdToObject)this._cleanupRow(this._rowIdToObject[a]);G_UI_COM.unregisterStoreView(this.collection.id,this);this.inherited(arguments)},getObjectDndType:function(a){return[this.id]},postCreate:function(){this.inherited(arguments);this._events.push(this.on(".dgrid-row:contextmenu",
this.onContextMenu.bind(this)));this._events.push(this.on("dgrid-select",this.onSelect.bind(this)));this._events.push(this.on("dgrid-deselect",this.onDeselect.bind(this)));this._events.push(dojo.aspect.after(this,"expand",this._onExpand.bind(this),!0))},getSelectedIds:function(){var a=[],b;for(b in this.selection){var c=this.row(b);a.push(this.collection.getIdentity(c.data))}return a},_onExpand:function(a){var b=a.element?a:this.row(a);a=(b=this._expanded[b.id])?dojo.query(".firmosIconNode",a.element):
dojo.query(".firmosIconNodeOpen",a.element);for(var c=0;c<a.length;c++){var e=a[c].parentNode;b?e.nextSibling&&dojo.hasClass(e.nextSibling,"firmosIconNodeDiv")&&(dojo.style(e,"display","none"),dojo.style(e.nextSibling,"display","")):e.previousSibling&&dojo.hasClass(e.previousSibling,"firmosIconNodeDiv")&&(dojo.style(e,"display","none"),dojo.style(e.previousSibling,"display",""))}},_renderIconCell:function(a,b,c,e,f,g){c=document.createElement("div");f="<div class='firmosIconNodeDiv'><img src='"+a[f]+
"' class='firmosIconNode'></div>";g&&""!=g&&(f=f+"<div class='firmosIconNodeDiv' style='display:none;'><img src='"+a[g]+"' class='firmosIconNodeOpen'></div>");c.innerHTML=f+"<span class='firmosIconNodeContentSpan'>"+b+"</span>";return c},_renderDate:function(a,b,c,e){a=document.createElement("div");b&&(a.innerHTML=dojo.date.locale.format(new Date(b),{formatLength:"short"}));return a},_renderBool:function(a,b,c,e){a=document.createElement("div");c=document.createElement("input");c.setAttribute("type",
"checkbox");c.onclick=function(){return!1};b&&c.setAttribute("checked","true");a.appendChild(c);return a},_renderIcons:function(a,b,c,e){a=document.createElement("div");if(!b||""==b)return"";b=b instanceof Array?b:b.split(",");c="";for(e=0;e<b.length;e++)c=c+'<img src="'+b[e]+'">';a.innerHTML=c;return a},_selectionChanged:function(){var a=!1,b=this.getSelectedIds();if(b.length!=this.selection_.length)a=!0;else for(var c=0;c<b.length;c++)b[c]!=this.selection_[c]&&(a=!0);a&&(this.selection_=b);return a},
onSelect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,this.selection_)},onDeselect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,this.selection_)},onSelectionChanged:function(a,b){this.refreshDepStores(b);this.refreshButtons(b);this.notifyServer()},_cleanupRow:function(a){a=this.row(a);var b=dijit.byId(this.id+"_"+a.id+"_dcp");b&&b.destroyRecursive();(a=dijit.byId(this.id+"_"+a.id+"_cc"))&&a.destroyRecursive()},renderRow:function(a,b){this._cleanupRow(a);var c=
this.inherited(arguments);if(""!=this.descrField&&a[this.descrField]&&""!=a[this.descrField]){var e=this.row(a),f=new dijit.layout.ContentPane({id:this.id+"_"+e.id+"_dcp","class":this.isTree?"dgrid-description-row-tree":"dgrid-description-row",content:'<div style="margin-left: '+("undefined"==typeof b.queryLevel?0:b.queryLevel+1)*(this.indentWidth||9)+'px; float: left;"><div>'+a[this.descrField]});dojo.place(f.domNode,c)}this.showDetailsSection&&(f={params:{}},a._detailsfunc_&&a._funcclassname_?(f.classname=
a._funcclassname_,f.functionname=a._detailsfunc_):this.detailsClassname&&(f.classname=this.detailsClassname,f.functionname=this.detailsFunctionname,dojo.mixin(f.params,this.detailsParams),this.detailsUidPath&&(f.uidPath=this.detailsUidPath)),f.classname&&(f.params.selected=a.uidpath?a.uidpath instanceof Array?a.uidpath:[a.uidpath]:[a.uid],f.uidPath||(f.uidPath=f.params.selected),a._detailsfunc_=f,e=this.row(a),f=dijit.byId(this.id+"_"+e.id+"_cc"),f||(f=new dijit.layout.ContentPane({id:this.id+"_"+
e.id+"_cc"}),e=new dijit.layout.ContentPane({id:this.id+"_"+e.id+"_cp"}),f.addChild(e),dojo.style(f.domNode,"display","none")),dojo.place(f.domNode,c)));return c},showDetails:function(a){var b=this.id+"_"+a.id+"_cc";G_UI_COM.setGridDetailsId(b);b=dijit.byId(b);G_SERVER_COM.callServerFunction(a.data._detailsfunc_.classname,a.data._detailsfunc_.functionname,a.data._detailsfunc_.uidPath,a.data._detailsfunc_.params,this.detailsCallback.bind(this),b.getChildren()[0].id)},detailsCallback:function(a,b,c,
e){G_SERVER_COM.handleServerFunctionResponse(a,b,c,e);a=dijit.byId(e.gridDetailsId);dojo.style(a.domNode,"display","")},hideDetails:function(a){a=dijit.byId(this.id+"_"+a.id+"_cc");dojo.style(a.domNode,"display","none")},onContextMenu:function(a){var b=this.row(a);this.contextMenu._handleGridMenu(a,this,b.data)},_refreshDepStoreViews:function(a){delete this.storeRefreshHandler_[a.store.id];for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},refreshDepStore:function(a,b,c){G_UI_COM.setStoreDependency(a,
b,"G",c);if(b=G_UI_COM.getStoreById(a))this.storeRefreshHandler_[a]&&(clearTimeout(this.storeRefreshHandler_[a]),delete this.storeRefreshHandler_[a]),this.storeRefreshHandler_[a]=setTimeout(this._refreshDepStoreViews.bind(this,b),0)},refreshDepStores:function(a){for(var b=0;b<this.depStores_.length;b++)this.refreshDepStore(this.depStores_[b].storeId,this.depStores_[b].refId,a)},refreshButtons:function(a){a=a.length;for(var b=0;b<this.buttons_.length;b++)switch(this.buttons_[b].bType){case "gbd_single":1==
a?this.buttons_[b].button.set("disabled",!1):this.buttons_[b].button.set("disabled",!0);break;case "gbd_multi":0==a?this.buttons_[b].button.set("disabled",!0):this.buttons_[b].button.set("disabled",!1)}},notifyServer:function(){if(this.selDepClassname){var a=dojo.clone(this.collection.params_);dojo.mixin(a,this.selDepParams);var b=dijit.byId(this.parentId).getParent(),c=null;b&&b._contentId&&(c=b._contentId);G_SERVER_COM.callServerFunction(this.selDepClassname,this.selDepFunctionname,this.selDepUidPath,
a,null,c)}},registerDepStore:function(a,b){this.depStores_.push({storeId:a,refId:b});this.refreshDepStore(a,b,this.selection_)},registerButton:function(a,b){this.buttons_.push({button:a,bType:b});a.setGrid(this)},doSearch:function(a){this.collection.params_.fulltext=a;this.refresh()}});dojo.declare("FIRMOS.FormButton",dijit.form.Button,{onClick:function(a){a.preventDefault();dojo.stopEvent(a);this._getWidget().disableAllButtons();switch(this.type){case "submit":this.handleTypeSubmit();break;case "button":this.handleTypeButton()}},
_getWidget:function(a){for(var b=this.getParent();b&&!b.isInstanceOf(dijit.form.Form)&&!b.isInstanceOf(FIRMOS.Dialog);)b=b.getParent();if(a)for(;b&&!b.isInstanceOf(FIRMOS.Dialog);)b=b.getParent();return b},handleTypeButton:function(){if(this.closeDialog){var a=this._getWidget(!0);a&&a.isInstanceOf(FIRMOS.Dialog)&&a.hide()}this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams,this.sfCallback.bind(this));this.downloadId&&
(dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0),this.closeDialog||this._getWidget().restoreAllButtons())},handleTypeSubmit:function(){var a=this._getWidget();if(a.isInstanceOf(dijit.form.Form)){var b=dojo.clone(this.actionParams);a.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,b,this.hiddenFields,this.isDialog)}},sfCallback:function(a,b,c,e){this.domNode&&this._getWidget().restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,
c,e)}});dojo.declare("FIRMOS.Tooltip",dijit.Tooltip,{displayedFor:function(){return this._connectNode}});dojo.declare("FIRMOS.GridButton",dijit.form.Button,{destroy:function(){var a=dijit.byId(this.id+"_tooltip");a&&a.destroyRecursive();this.inherited(arguments)},setGrid:function(a){this.grid_=a},onClick:function(){var a={},b=this.grid_.getSelectedIds(),c;a.dependency=this.grid_.collection.params_.dependency;dojo.mixin(a,this.actionParams);a.selected=b;if(this.actionUidPath)c=this.actionUidPath;else if(0<
b.length){for(var e in this.grid.selection){var f=e;break}e=this.grid_.row(f);c=[b[0]];e.uidPath?c=e.uidPath:e.uid&&(c=[e.uid])}G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,c,a)}});dojo.declare("FIRMOS.widget.Calendar",dojox.widget.Calendar,{_setValueAttr:function(a){a&&this.inherited(arguments)}});dojo.declare("FIRMOS.GridDateTextBox",dijit.form.DateTextBox,{popupClass:"FIRMOS.widget.Calendar",_blankValue:"",style:"width: 100%"});dojo.declare("FIRMOS.GridTextBox",
dijit.form.TextBox,{style:"width: 100%"});dojo.declare("FIRMOS.GridNumberTextBox",dijit.form.NumberTextBox,{style:"width: 100%"});dojo.declare("FIRMOS.GridCheckBox",dijit.form.CheckBox,{});dojo.declare("FIRMOS.DateTextBox",dijit.form.DateTextBox,{popupClass:"FIRMOS.widget.Calendar",_blankValue:"",constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):
this.groupRequired=!1},_setDisplayedValueAttr:function(a,b){isNaN(a)?this.inherited(arguments):0==Number(a)?this._setValueAttr("",b,""):this._setValueAttr(new Date(Number(a)),b,new Date(Number(a)))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkDepAndGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.Recurrence",dijit.form._FormValueWidget,{texts:G_TEXTS.recurrence,
_selectedRadioCSS:"dijitChecked dijitRadioChecked",_selectedStr:'aria-checked="true"',_rtypeStr:"",_rtypeDetailsStr:"",_startStr:"",_endStr:"",rtypes:"once minute hour day week month quarter year".split(" "),days:"mo tu we th fr sa su".split(" "),minuteDetails:[{label:"1",value:"1"},{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"30",value:"30"},{label:"45",value:"45"}],hourDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},
{label:"6",value:"6"},{label:"12",value:"12"}],dayDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],monthDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"}],rtypesVis:[],baseClass:"firmosRecurrenceInput",templateString:"",templateStart:'<div data-dojo-attach-point="wrapperDiv,focusNode" id="${id}" role="presentation">',templateEnd:"</div>",
templateDivider:'<div class="firmosRecurrenceDividerContainer"><div class="firmosRecurrenceDivider"></div></div>',templateStartDate:'<div id="${id}_sd"></div><div id="${id}_st"></div>',templateEndDate:'<div id="${id}_ed"></div><div id="${id}_et"></div>',templateCount:'<div id="${id}_count"></div>',templateCB:'<div data-dojo-attach-point="${value}Div" class="firmosRecurrenceInputItem" role="presentation"><div class="firmosRecurrenceCBContainer"><div class="dijit dijitReset dijitInline dojoxMultiSelectItemBox dijitRadio" role="presentation"><input class="dijitCheckBoxInput" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onclick:_onRadioClick, onmouseover: _onRadioMOver, onmouseout: _onRadioMOut" data-onclick="${onclick}" data-cbid="${value}" type="radio" "/></div><div class="dijitInline dojoxMultiSelectItemLabel" data-dojo-attach-event="onclick:${onclick}" data-cbid="${value}">${caption}</div></div>${details}</div>',
templateonceDetails:"",templateminuteDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_m_detail"></div></div>',templatehourDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_h_detail"></div></div>',templatedayDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_d_detail"></div></div>',
templateweekCB:'<div data-dojo-attach-point="${value}DayDiv" class="dijit dijitReset dijitInline dijitCheckBox" role="presentation"><input class="dijitReset dijitCheckBoxInput" data-onclick="_setWeekDetails" data-day="${value}" type="checkbox" data-dojo-attach-event="onclick:_onBoxClick, onmouseover: _onBoxMOver, onmouseout: _onBoxMOut" style="-moz-user-select: none;"></div>',templateweekDetails:'<div class="dijitInline" style="float:right;">${week_days}</div>',templatemonthDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_mo_detail"></div></div>',
templatequarterDetails:"",templateyearDetails:"",constructor:function(a){for(var b="",c=0;c<this.days.length;c++)b=b+this.templateweekCB.replace(/\$\{value\}/g,this.days[c])+this.texts[this.days[c]]+" ";this.templateweekDetails=this.templateweekDetails.replace(/\$\{week_days\}/g,b);this.templateString=this.templateStart;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.startDate).replace(/\$\{value\}/g,"sd").replace(/\$\{details\}/g,this.templateStartDate).replace(/\$\{onclick\}/g,
"_onSTSelect");this.templateString+=this.templateDivider;for(c=0;c<this.rtypes.length;c++)a["ri"+this.rtypes[c]]&&(this.rtypesVis.push(this.rtypes[c]),this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts[this.rtypes[c]]).replace(/\$\{value\}/g,this.rtypes[c]).replace(/\$\{details\}/g,this["template"+this.rtypes[c]+"Details"].replace(/\$\{caption\}/g,this.texts.interval)).replace(/\$\{onclick\}/g,"_onRTSelect"));this.templateString+=this.templateDivider;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,
this.texts.noEndDate).replace(/\$\{value\}/g,"ned").replace(/\$\{details\}/g,"").replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.endDate).replace(/\$\{value\}/g,"ed").replace(/\$\{details\}/g,this.templateEndDate).replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.count).replace(/\$\{value\}/g,"count").replace(/\$\{details\}/g,this.templateCount).replace(/\$\{onclick\}/g,
"_onETSelect");this.templateString+=this.templateEnd;a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},startup:function(){this.inherited(arguments);this.startDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this)},this.id+"_sd");this.startTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this),
constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T01:00:00"}},this.id+"_st");this.endDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this)},this.id+"_ed");this.endTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T01:00:00"}},this.id+"_et");this.countSelect=
new dijit.form.NumberSpinner({style:"float: right; width: 60px;",onChange:this._onCountChange.bind(this),constraints:{min:1,places:0}},this.id+"_count");this.riminute&&(this.minuteCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMinuteDetails.bind(this),options:this.minuteDetails},this.id+"_m_detail"),this._setMinuteDetailsUI(""));this.rihour&&(this.hourCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setHourDetails.bind(this),options:this.hourDetails},this.id+"_h_detail"),
this._setHourDetailsUI(""));this.riday&&(this.dayCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setDayDetails.bind(this),options:this.dayDetails},this.id+"_d_detail"),this._setDayDetailsUI(""));this.riweek&&this._setWeekDetailsUI("");this.rimonth&&(this.monthCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMonthDetails.bind(this),options:this.monthDetails},this.id+"_mo_detail"),this._setMonthDetailsUI(""));this._selectRB(this.sdDiv);this._setValueUI(this.value||"")},
_setValueUI:function(a){var b=[];""!=a&&(b=a.split("#"));for(var c=a=!0,e=0;e<b.length;e++)0==b[e].indexOf("DTSTART")?(this._setValueUIStart(b[e]),a=!1):0==b[e].indexOf("RRULE")?(this._setValueUIRRule(b[e]),c=!1):console.error("Unknown part in recurrence rule definition: "+b[e]);a&&this._setValueUIStart("");c&&this._setValueUIRRule("")},_getChooserTime:function(a){switch(Math.round(a.getMinutes()/15)){case 0:a.setMinutes(0);break;case 1:a.setMinutes(15);break;case 2:a.setMinutes(30);break;case 3:a.setMinutes(45);
break;case 4:a.setMinutes(0),a.setHours(a.getHours()+1)}return a},_setValueUIStart:function(a){""==a?(a=this._getChooserTime(new Date),this.startDate.set("value",a),this.startTime.set("value",a)):(a=this._stringToDateTime(a.substring(8)),this.startDate.set("value",a.date),this.startTime.set("value",a.time))},_setValueUIRRule:function(a){""==a?(this._setRecurrenceTypeUI([]),this._setUntilUI(""),this._setCountUI("")):(a=a.substr(6).split(";"),1<a.length&&0==a[a.length-1].indexOf("UNTIL")?(this._setCountUI(""),
this._setUntilUI(a[a.length-1]),a.pop()):(this._setUntilUI(""),1<a.length&&0==a[a.length-1].indexOf("COUNT")?(this._setCountUI(a[a.length-1]),a.pop()):this._setCountUI("")),this._setRecurrenceTypeUI(a))},_setRecurrenceTypeUI:function(a){var b="";if(0<a.length)switch(a[0].substr(5)){case "MINUTELY":b="minute";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMinuteDetailsUI(a[1]):this._setMinuteDetailsUI("");break;case "HOURLY":b="hour";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setHourDetailsUI(a[1]):
this._setHourDetailsUI("");break;case "DAILY":b="day";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setDayDetailsUI(a[1]):this._setDayDetailsUI("");break;case "WEEKLY":b="week";1<a.length&&0==a[1].indexOf("BYDAY")?this._setWeekDetailsUI(a[1]):this._setWeekDetailsUI("");break;case "MONTHLY":1<a.length&&"INTERVAL=3"==a[1]?b="quarter":(b="month",1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMonthDetailsUI(a[1]):this._setMonthDetailsUI(""));break;case "YEARLY":b="year"}if(""==b||!this[b+"Div"])for(a=
0;a<this.rtypes.length;a++)if(this[this.rtypes[a]+"Div"]){b=this.rtypes[a];break}for(a=0;a<this.rtypesVis.length;a++)this._unselectRB(this[this.rtypesVis[a]+"Div"]);this._selectRB(this[b+"Div"]);this._setRecurrenceType(b)},_setUntilUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),a=new Date,a.setFullYear(a.getFullYear()+1),a=this._getChooserTime(a),this.endDate.set("value",a),this.endTime.set("value",a),this.endDate.set("disabled",!0),
this.endTime.set("disabled",!0)):(this._selectRB(this.edDiv),this._unselectRB(this.nedDiv),this._unselectRB(this.countDiv),a=this._stringToDateTime(a.substring(6)),this.endDate.set("value",a.date),this.endTime.set("value",a.time),this.endDate.set("disabled",!1),this.endTime.set("disabled",!1));this.countSelect.set("disabled",!0)},_setCountUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),this.countSelect.set("value",1),this.endDate.set("disabled",
!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._selectRB(this.countDiv),this._unselectRB(this.nedDiv),this.countSelect.set("value",Number(a.substring(6))),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1))},_setForeverUI:function(){},_internalSetValue:function(){this.value=this._startStr;""!=this._rtypeStr&&(this.value=this.value+"#"+this._rtypeStr+this._rtypeDetailsStr+this._endStr)},_setRecurrenceType:function(a){this._disableDetails();
this._rtypeDetailsStr="";if(a==this.rtypes[0])this._rtypeStr="",this._disableEndBlock(!0);else switch(this._disableEndBlock(!1),a){case this.rtypes[1]:this._disableMinuteDetails(!1);this._setMinuteDetails();this._rtypeStr="RRULE:FREQ=MINUTELY";break;case this.rtypes[2]:this._disableHourDetails(!1);this._setHourDetails();this._rtypeStr="RRULE:FREQ=HOURLY";break;case this.rtypes[3]:this._disableDayDetails(!1);this._setDayDetails();this._rtypeStr="RRULE:FREQ=DAILY";break;case this.rtypes[4]:this._disableWeekDetails(!1);
this._setWeekDetails();this._rtypeStr="RRULE:FREQ=WEEKLY";break;case this.rtypes[5]:this._disableMonthDetails(!1);this._setMonthDetails();this._rtypeStr="RRULE:FREQ=MONTHLY";break;case this.rtypes[6]:this._rtypeStr="RRULE:FREQ=MONTHLY;INTERVAL=3";break;case this.rtypes[7]:this._rtypeStr="RRULE:FREQ=YEARLY"}this._internalSetValue()},_setMinuteDetailsUI:function(a){""==a?this.minuteCB.set("value",this.minuteDetails[0].id):(a=a.substr(9),this.minuteCB.set("value",a))},_setHourDetailsUI:function(a){""==
a?this.hourCB.set("value",this.hourDetails[0].id):(a=a.substr(9),this.hourCB.set("value",a))},_setDayDetailsUI:function(a){""==a?this.dayCB.set("value",this.dayDetails[0].id):(a=a.substr(9),this.dayCB.set("value",a))},_setWeekDetailsUI:function(a){for(var b=0;b<this.days.length;b++)this._unselectCB(this[this.days[b]+"DayDiv"]);if(""==a)b=(new Date).getDay(),0==b?b=6:b--,this._selectCB(this[this.days[b]+"DayDiv"]);else for(a=a.substr(6).split(","),b=0;b<a.length;b++)this._selectCB(this[a[b].toLowerCase()+
"DayDiv"])},_setMonthDetailsUI:function(a){""==a?this.monthCB.set("value",this.monthDetails[0].id):(a=a.substr(9),this.monthCB.set("value",a))},_setMinuteDetails:function(){var a=this.minuteCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setHourDetails:function(){var a=this.hourCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setDayDetails:function(){var a=this.dayCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+
a:"";this._internalSetValue()},_setWeekDetails:function(){for(var a=[],b=0;b<this.days.length;b++)this._isSelectedCB(this[this.days[b]+"DayDiv"])&&a.push(this.days[b].toUpperCase());this._rtypeDetailsStr=a.join(",");0<this._rtypeDetailsStr.length&&(this._rtypeDetailsStr=";BYDAY="+this._rtypeDetailsStr);this._internalSetValue()},_setMonthDetails:function(){var a=this.monthCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_disableDetails:function(){this._disableMinuteDetails(!0);
this._disableHourDetails(!0);this._disableDayDetails(!0);this._disableWeekDetails(!0);this._disableMonthDetails(!0)},_disableMinuteDetails:function(a){this.minuteCB.set("disabled",a)},_disableHourDetails:function(a){this.hourCB.set("disabled",a)},_disableDayDetails:function(a){this.dayCB.set("disabled",a)},_disableWeekDetails:function(a){if(a)for(a=0;a<this.days.length;a++)this._disableCB(this[this.days[a]+"DayDiv"]);else for(a=0;a<this.days.length;a++)this._enableCB(this[this.days[a]+"DayDiv"])},
_disableMonthDetails:function(a){this.monthCB.set("disabled",a)},_disableEndBlock:function(a){a?(this._disableRB(this.edDiv),this._disableRB(this.nedDiv),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._enableRB(this.edDiv),this._enableRB(this.nedDiv),this._isSelectedRB(this.edDiv)&&(this.endDate.set("disabled",!1),this.endTime.set("disabled",!1)),this._isSelectedRB(this.countDiv)&&this.countSelect.set("disabled",!1))},_onCountChange:function(){this._endStr=
";COUNT="+this.countSelect.get("value");this._internalSetValue()},_onEDTChange:function(){this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),this.endTime.get("value"));this._internalSetValue()},_onSDTChange:function(){this._startStr="DTSTART:"+this._dateTimeToString(this.startDate.get("value"),this.startTime.get("value"));this._internalSetValue()},_stringToDateTime:function(a){var b={};a=a.split("T");b.date=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,
2)));1<a.length&&(b.time=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)),Number(a[1].substr(0,2)),Number(a[1].substr(2,2)),Number(a[1].substr(4,2))),7==a[1].length&&"Z"==a[6]&&b.time.setMinutes(b.time.getMinutes()+b.time.getTimezoneOffset()));return b},_dateTimeToString:function(a,b){var c=""+a.getFullYear();9>a.getMonth()&&(c+="0");c+=a.getMonth()+1;10>a.getDate()&&(c+="0");c+=a.getDate();c+="T";10>b.getHours()&&(c+="0");c+=b.getHours();10>b.getMinutes()&&(c+=
"0");c+=b.getMinutes();10>b.getSeconds()&&(c+="0");return c+=b.getSeconds()},_onSTSelect:function(a){},_onETSelect:function(a){switch(a.target.getAttribute("data-cbid")){case "ned":this._selectRB(this.nedDiv);this._unselectRB(this.edDiv);this._unselectRB(this.countDiv);this._endStr="";this.endDate.set("disabled",!0);this.endTime.set("disabled",!0);this.countSelect.set("disabled",!0);break;case "ed":this._selectRB(this.edDiv);this._unselectRB(this.nedDiv);this._unselectRB(this.countDiv);this.endDate.set("disabled",
!1);this.endTime.set("disabled",!1);this.countSelect.set("disabled",!0);this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),this.endTime.get("value"));break;case "count":this._selectRB(this.countDiv),this._unselectRB(this.nedDiv),this._unselectRB(this.edDiv),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1),this._endStr=";COUNT="+this.countSelect.get("value")}this._internalSetValue()},_onRTSelect:function(a){for(var b=0;b<this.rtypesVis.length;b++)this._unselectRB(this[this.rtypesVis[b]+
"Div"]);this._selectRB(this[a.target.getAttribute("data-cbid")+"Div"]);this._setRecurrenceType(a.target.getAttribute("data-cbid"))},_disableRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],"dijitDisabled");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");this._isSelectedRB(a)&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled"),dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled"))},_enableRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],
"dijitDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled")},_unselectRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioChecked")},_selectRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.addClass(a.childNodes[0].childNodes[0],
"dijitRadioChecked");dojo.hasClass(a.childNodes[0].childNodes[0],"dijitHover")&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedHover"),dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioCheckedHover"))},_isSelectedRB:function(a){return dojo.hasClass(a.childNodes[0].childNodes[0],"dijitChecked")},_disableCB:function(a){dojo.addClass(a,"dijitDisabled");dojo.addClass(a,"dijitCheckBoxDisabled");this._isSelectedCB(a)&&(dojo.addClass(a,"dijitCheckedDisabled"),dojo.addClass(a,"dijitCheckBoxCheckedDisabled"))},
_enableCB:function(a){dojo.removeClass(a,"dijitDisabled");dojo.removeClass(a,"dijitCheckBoxDisabled");dojo.removeClass(a,"dijitCheckedDisabled");dojo.removeClass(a,"dijitCheckBoxCheckedDisabled")},_unselectCB:function(a){dojo.removeClass(a,"dijitChecked");dojo.removeClass(a,"dijitCheckBoxChecked");dojo.removeClass(a,"dijitCheckedHover");dojo.removeClass(a,"dijitCheckBoxCheckedHover")},_selectCB:function(a){dojo.addClass(a,"dijitChecked");dojo.addClass(a,"dijitCheckBoxChecked");dojo.hasClass(a,"dijitHover")&&
(dojo.addClass(a,"dijitCheckedHover"),dojo.addClass(a,"dijitCheckBoxCheckedHover"))},_isSelectedCB:function(a){return dojo.hasClass(a,"dijitChecked")},_onBoxClick:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||("true"==a.target.getAttribute("aria-checked")?(a.target.setAttribute("aria-checked",!1),this._unselectCB(a.target.parentNode)):(a.target.setAttribute("aria-checked",!0),this._selectCB(a.target.parentNode)),this[a.target.getAttribute("data-onclick")](a))},_onBoxMOver:function(a){dojo.hasClass(a.target.parentNode,
"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&(dojo.addClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.addClass(a.target.parentNode,"dijitCheckedHover")))},_onBoxMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.removeClass(a.target.parentNode,
"dijitCheckBoxCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitCheckedHover"))},_onRadioClick:function(a){if(!dojo.hasClass(a.target.parentNode,"dijitDisabled"))this[a.target.getAttribute("data-onclick")](a)},_onRadioMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&(dojo.addClass(a.target.parentNode,"dijitRadioCheckedHover"),
dojo.addClass(a.target.parentNode,"dijitRadioHover")))},_onRadioMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,"dijitRadioHover"),dojo.removeClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitRadioHover"))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&
(a.checkDepAndGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload",dojox.form.Uploader,{required:!1,constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1;a.disabled&&(setTimeout(this.set.bind(this,"disabled",!0),0),delete a.disabled)},_isEmpty:function(){return""==this.getValue()},isValid:function(a){return!this.required||
!this._isEmpty()},validate:function(a){var b="",c=this.disabled||this.isValid(a);dojo.setAttr(this.focusNode,"aria-invalid",c?"false":"true");b=this.getErrorMessage(a);this.set("message",b);return c},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang)},getErrorMessage:function(a){return this.messages.missingMessage},_createInput:function(){this.inherited(arguments);"image"==this.usefilter&&dojo.setAttr(this.inputNode,
"accept","image/*")},_onFocus:function(){this.focused=!0;this.displayMessage(this.message);this.inherited(arguments)},_onBlur:function(){this.focused=!1;this.displayMessage("");this.inherited(arguments)},displayMessage:function(a){a&&this.focused?dijit.Tooltip.show(a,this.titleNode):dijit.Tooltip.hide(this.titleNode)},_setRequiredAttr:function(a){this._set("required",a);dojo.setAttr(this.focusNode,"aria-required",a)},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},onChange:function(){this.inherited(arguments);
for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkDepAndGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload.Image",dojox.form.uploader._Base,{uploaderId:"",uploader:null,_upCheckCnt:0,imgheight:100,imgwidth:100,imgabs:!1,templateString:'<div class="firmosUploaderImage"></div>',constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);
this.setUploader();this.value?this._createImageTag(this.value):this.contentDiv=dojo.create("div",{"class":"firmosUploaderImageContent",style:"height:"+this.imgheight+"px; width:"+this.imgwidth+"px"},this.domNode)},_createImageTag:function(a){this.contentImg=dojo.create("img",{"class":"firmosUploaderImageContent",style:this.imgabs?"height:"+this.imgheight+"px; width:"+this.imgwidth+"px":"max-height:"+this.imgheight+"px; max-width:"+this.imgwidth+"px",src:a},this.domNode)},setUploader:function(){if(this.uploaderId||
this.uploader){if(this.uploaderId&&!this.uploader&&(this.uploader=dijit.byId(this.uploaderId),!this.uploader)){this._upCheckCnt++;5<this._upCheckCnt?console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload found with id "+this.uploaderId):setTimeout(this.setUploader.bind(this),250);return}this._events.push(dojo.connect(this.uploader,"onChange",this.selectionChange.bind(this)));this._events.push(dojo.connect(this.uploader,"reset",this.selectionReset.bind(this)))}else console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload set.")},
onloadCallback:function(a){this.contentImg?dojo.setAttr(this.contentImg,"src",a.target.result):(dojo.destroy(this.contentDiv),this._createImageTag(a.target.result))},selectionChange:function(){var a=new FileReader;a.onload=this.onloadCallback.bind(this);a.readAsDataURL(this.uploader._files[0])},selectionReset:function(){console.log("selectionReset")}});dojo.declare("FIRMOS.Form",dijit.form.Form,{constructor:function(a){this.sendChanged=dojo.fromJson(a.sendchanged);this.displayOnly=dojo.fromJson(a.displayonly);
delete a.sendchanged;this.groupRequiredFields={};a.dbos&&(this.id=a.id,G_UI_COM.registerFormDBOs(this,a.dbos));a.onChangeClassname&&(this._sendChangesParams={},this.sendChangesDelay=Number(a.onChangeDelay)||500)},destroy:function(){this.dbos&&G_UI_COM.unregisterFormDBOs(this.id,this.dbos);this.inherited(arguments)},onSubmit:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].isInstanceOf(FIRMOS.FormButton)&&"submit"==a[b].type){a[b].handleTypeSubmit();break}return!1},onShow:function(a){this.inherited(arguments);
this.initialData=this.get("value");for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].name){this.displayOnly&&!b[c].isInstanceOf(FIRMOS.FormButton)&&(b[c].set("disabled",!0),b[c].set("placeHolder",""));this.checkDepFields(b[c]);b[c].isInstanceOf(FIRMOS.FilteringSelect)&&b[c].init();var e=b[c].name.split(".");e.pop();0==e.length?b[c].groupRequired&&(b[c].set("required",!0),e=dojo.byId(b[c].id+"_label"),dojo.removeClass(e,"firmosFormLabel"),dojo.addClass(e,"firmosFormLabelRequired")):(e=e.join("."),
this.groupRequiredFields[e]||(this.groupRequiredFields[e]={},this.groupRequiredFields[e].grf=[],this.groupRequiredFields[e].required=!1,this.groupRequiredFields[e].fields=[]),b[c].groupRequired&&this.groupRequiredFields[e].grf.push(b[c].id),this.groupRequiredFields[e].fields.push(b[c].id))}for(c in this.groupRequiredFields)if(0==this.groupRequiredFields[c].grf.length)delete this.groupRequiredFields[c];else for(b=0;b<this.groupRequiredFields[c].fields.length;b++)if(e=dijit.byId(this.groupRequiredFields[c].fields[b]),
!e.isInstanceOf(FIRMOS.BoolCheckBox)&&!e.get("disabled")&&(e=e.get("value"))&&""!=e){this._setGroupRequired(c,!0);break}},_setGroupRequired:function(a,b){for(var c=0;c<this.groupRequiredFields[a].grf.length;c++){dijit.byId(this.groupRequiredFields[a].grf[c]).set("required",b);var e=dojo.byId(this.groupRequiredFields[a].grf[c]+"_label");b?(dojo.removeClass(e,"firmosFormLabel"),dojo.addClass(e,"firmosFormLabelRequired")):(dojo.removeClass(e,"firmosFormLabelRequired"),dojo.addClass(e,"firmosFormLabel"))}this.groupRequiredFields[a].required=
b},getFieldEmptyValue:function(a){return a.isInstanceOf(FIRMOS.BoolCheckBox)?"false":""},checkDepFields:function(a){emptyValue=this.getFieldEmptyValue(a);for(var b in a.depFields){var c=this.getInputById(b);c&&(a.get("value")==emptyValue&&!a.depFields[b]||a.get("value")!=emptyValue&&a.depFields[b]?c.set("disabled",!0):c.set("disabled",!1))}},checkDepAndGroupRequiredFields:function(a){this.checkDepFields(a);var b=a.name.split(".");b.pop();if(0<b.length&&(b=b.join("."),this.groupRequiredFields[b]))if((newValue=
a.get("value"))&&newValue!=this.getFieldEmptyValue(a))this.groupRequiredFields[b].required||this._setGroupRequired(b,!0);else{for(a=0;a<this.groupRequiredFields[b].fields.length;a++){var c=dijit.byId(this.groupRequiredFields[b].fields[a]);if(!c.isInstanceOf(FIRMOS.BoolCheckBox)&&!c.get("disabled")){var e=c.get("value");if(e&&e!=this.getFieldEmptyValue(c))return}}this._setGroupRequired(b,!1)}},_submitChange:function(){delete this._sendTimeout;var a=!1,b;for(b in this._sendChangesParams){a=!0;break}a&&
(dojo.clone(this.onChangeParams),G_SERVER_COM.callServerFunction(this.onChangeClassname,this.onChangeFunctionname,this.onChangeUidPath,this._sendChangesParams),this.updateValues(this._sendChangesParams),this._sendChangesParams={})},_getValueInObj:function(a,b){var c=a.shift();return 0==a.length?b[c]:this._getValueInObj(a,b[c])},submitOnChange:function(a){if(this.onChangeClassname&&(!a||!a.get("disabled"))){this._sendTimeout&&clearTimeout(this._sendTimeout);var b=a.get("value");this._getValueInObj(a.name.split("."),
this.initialData)==b?this._sendChangesParams[a.name]&&delete this._sendChangesParams[a.name]:this._sendChangesParams[a.name]=b;this._sendTimeout=setTimeout(this._submitChange.bind(this),this.sendChangesDelay)}},_clearObject:function(a,b){for(var c in a)if(a[c]instanceof Array){if(a[c].length==b[c].length){for(var e=!0,f=0;f<a[c].length;f++)if(a[c][f]!==b[c][f]){e=!1;break}e&&delete a[c]}}else if(a[c]instanceof Date||b[c]instanceof Date)a[c]instanceof Date&&b[c]instanceof Date&&a[c].getTime()==b[c].getTime()&&
delete a[c];else if("object"==typeof a[c]){this._clearObject(a[c],b[c]);e=!0;for(f in a[c]){e=!1;break}e&&delete a[c]}else a[c]===b[c]&&delete a[c]},_convertObjectData:function(a){for(var b in a)if(a[b]instanceof Array){for(var c=0;c<a[b].length;c++)a[b][c]instanceof Date&&(a[b][c]=a[b][c].getTime());0==a[b].length&&(a[b]=null)}else a[b]instanceof Date?a[b]=a[b].getTime():null!=a[b]&&("object"==typeof a[b]?this._convertObjectData(a[b]):""===a[b]&&(a[b]=null))},_getValueAttr:function(){for(var a=this.inherited(arguments),
b=this.getChildren(),c=0;c<b.length;c++)b[c].name&&b[c]._ignore&&a[b[c].name]&&delete a[b[c].name];return a},_handleFiles:function(a,b,c,e,f,g){for(var k=this.getChildren(),l=[],m=0;m<k.length;m++)if(k[m].name&&k[m].isInstanceOf(FIRMOS.FileUpload)&&k[m]._files)for(var p=0;p<k[m]._files.length;p++)l.push({field:k[m].name,file:k[m]._files[p]});0<l.length?(k=G_SERVER_COM.getBinaryDataKey(),this._sendFiles(a,b,c,e,f,g,l,k)):this._sendData(a,b,c,e,f,g)},_sendFilesCallback:function(a,b,c,e,f,g,k,l){0==
k.length?this._sendData(a,b,c,e,f,g,l):this._sendFiles(a,b,c,e,f,g,k,l)},_sendFiles:function(a,b,c,e,f,g,k,l){var m=k.pop(),p=m.file,q={data:{}};q.data.size=p.size;q.data.name=p.name;q.data.type=p.type;q.data.field=m.field;q.data.fieldIdx=0;q.data.fieldCount=1;q.data.chunksize=p.size;q.data.chunkIdx=0;a=this._sendFilesCallback.bind(this,a,b,c,e,f,g,k,l);G_SERVER_COM.callServerFunction("FIRMOS","binaryBulkTransfer",null,q,a,null,p,l)},_sendData:function(a,b,c,e,f,g,k){e.data=this.get("value");var l=
dojo.clone(e.data);this.sendChanged&&this._clearObject(e.data,this.initialData);this._convertObjectData(e.data);dojo.mixin(e.data,f);g&&G_UI_COM.isDialogAction();G_SERVER_COM.callServerFunction(a,b,c,e,this.submitCallback.bind(this),null,null,k);this.updateValues(l)},callServerFunction:function(a,b,c,e,f,g){if(!this.validate())return this.restoreAllButtons(),!1;this._handleFiles(a,b,c,e,f,g)},submitCallback:function(a,b,c,e){this.restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,c,
e)},disableAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b]._orgState=a[b].get("disabled"),a[b].set("disabled",!0))},restoreAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b].set("disabled",a[b]._orgState),delete a[b]._orgState)},_updateValues:function(a,b,c){for(var e in a)if("uid"!=e&&"domainid"!=e)if(a[e]instanceof Object)if(a[e]instanceof Array){var f=this.getInputById(b+
e);f&&(f.set("value",a[e]),c[e]=f.get("value"))}else c[e]||(c[e]={}),this._updateValues(a[e],b+e+".",c[e]);else if(f=this.getInputById(b+e)){if(f.isInstanceOf(FIRMOS.DateTextBox)){var g=f.get("value");null!=g&&g.getTime()==a[e]||f.set("displayedValue",a[e])}else f.get("value")!==a[e]&&f.set("value",a[e]);c[e]=f.get("value")}},resetValues:function(a){this._updateValues(this.initialData,"",this.initialData)},updateValues:function(a){this._updateValues(a,"",this.initialData)},getInputById:function(a){for(var b=
this.getChildren(),c=0;c<b.length;c++)if(b[c].name==a)return b[c];return null}});dojo.declare("FIRMOS.ToolbarButton",dijit.form.Button,{onClick:function(){this.downloadId&&dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0);this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams)}});dojo.declare("FIRMOS.Toolbar",dijit.Toolbar,{constructor:function(a){},postCreate:function(){this.inherited(arguments);
for(var a=0;a<this.menuDef.length;a++){if(this.menuDef[a].menu){var b={style:"display: none;"};this.menuDef[a].id&&(b.id=this.menuDef[a].id);var b=new dijit.DropDownMenu(b),c=G_UI_COM.addMenuEntries(b,this.menuDef[a].menu,this.menuDef[a].disabled);b.set("disabled",c);c={label:this.menuDef[a].caption,dropDown:b,disabled:c};c=new dijit.form.DropDownButton(c);b._parentUIElement=c}else{b=this.menuDef[a];c={};b.action&&(c.actionClassname=b.action["class"],c.actionFunctionname=b.action.func,c.actionUidPath=
b.action.uidPath,c.actionParams=b.action.params);b.downloadId&&(c.downloadId=b.downloadId);""==b.caption?c.showLabel=!1:c.label=b.caption;if(b.icon){var e=b.icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(e,"background-image: url('"+b.icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");c.iconClass=e}b.disabled&&(c.disabled=!0);b.id&&(c.id=b.id);c=new FIRMOS.ToolbarButton(c)}this.addChild(c)}}});dojo.declare("FIRMOS.Menu",dijit.Menu,{_clearEntries:function(){for(var a=
this.getChildren(),b=0;b<a.length;b++)this.removeChild(a[b]),a[b].destroyRecursive()},setCoords:function(a,b){this._openMyselfArgs||(this._openMyselfArgs={});this._openMyselfArgs.coords={x:a,y:b}},entriesLoaded:function(a){this._clearEntries();G_UI_COM.addMenuEntries(this,a,!1);this.startup();this._openMyself(this._openMyselfArgs,!0)},_openMyself:function(a,b){if(b)this.inherited(arguments,[a]);else switch(this.cType){case "tree":this._openMyselfArgs=a;this._handleTreeMenu(a);break;default:0<this.getChildren().length&&
this.inherited(arguments)}},_handleTreeMenu:function(a){var b=dijit.getEnclosingWidget(a.target);a={};var c,e;if(b.isInstanceOf(dijit._TreeNode)){var f=b.item,g=b.tree;dojo.mixin(a,g.model.store.params_);b=f.uidpath?f.uidpath instanceof Array?f.uidpath:[f.uidpath]:[f.uid];f._menufunc_&&f._funcclassname_?(c=f._funcclassname_,e=f._menufunc_):this.treeItemClassname&&(c=this.treeItemClassname,e=this.treeItemFunctionname,dojo.mixin(a,this.treeItemParams),this.treeItemUIDPath&&(b=this.treeItemUIDPath));
if(0<b.length||g.model.store.getIdentity(f)!=b[0])a.selected=[g.model.store.getIdentity(f)]}else g=b,dojo.mixin(a,g.model.store.params_),c=this.treeClassname,e=this.treeFunctionname,b=this.treeUidPath,dojo.mixin(a,this.treeParams);if(c){for(;g&&!g.isInstanceOf(dijit.Tree);)g=g.getParent();G_UI_COM.setMenu(this);G_SERVER_COM.callServerFunction(c,e,b,a)}},_handleGridMenu:function(a,b,c){this._openMyselfArgs={target:a.target,coords:{x:a.pageX,y:a.pageY}};a=dojo.clone(b.collection.params_);var e={};e.uidPath=
c.uidpath?c.uidpath instanceof Array?c.uidpath:[c.uidpath]:[c.uid];c._menufunc_&&c._funcclassname_?(e.classname=c._funcclassname_,e.functionname=c._menufunc_):this.gridClassname&&(e.classname=this.gridClassname,e.functionname=this.gridFunctionname,dojo.mixin(a,this.gridParams),this.gridUIDPath&&(e.uidPath=this.gridUIDPath));if(e&&e.classname){b=b.getSelectedIds();if(1<b.length||0<e.uidPath.length||b[0]!=e.uidPath[0])a.selected=b;G_UI_COM.setMenu(this);G_SERVER_COM.callServerFunction(e.classname,e.functionname,
e.uidPath,a)}}});dojo.declare("FIRMOS.FilteringSelect",dijit.form.FilteringSelect,{_hidden:!1,constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1;this.depGroup_={};if(a.depGroup){var b=dojo.fromJson(a.depGroup);delete a.depGroup;for(var c=0;c<b.length;c++)this.depGroup_[b[c].inputId]||(this.depGroup_[b[c].inputId]=
[]),this.depGroup_[b[c].inputId].push({value:b[c].value,visible:b[c].visible,caption:b[c].caption})}this.storeRefreshHandler_={};this.depStores_=[];if(a.depStores)for(b=dojo.fromJson(a.depStores),delete a.depStores,c=0;c<b.length;c++)this.depStores_.push({storeId:b[c].storeId,refId:b[c].refId})},destroy:function(a){for(var b=0;b<this.depStores_.length;b++)G_UI_COM.deleteStoreDependency(this.depStores_[b].storeId,this.depStores_[b].refId);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this.refreshDepStores(this.get("value"))},_refreshDepStoreViews:function(a){delete this.storeRefreshHandler_[a.store.id];for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},refreshDepStores:function(a){a=""==a?[]:[a];for(var b=0;b<this.depStores_.length;b++){G_UI_COM.setStoreDependency(this.depStores_[b].storeId,this.depStores_[b].refId,"G",a);var c=G_UI_COM.getStoreById(this.depStores_[b].storeId);c&&(this.storeRefreshHandler_[this.depStores_[b].storeId]&&(clearTimeout(this.storeRefreshHandler_[this.depStores_[b].storeId]),
delete this.storeRefreshHandler_[this.depStores_[b].storeId]),this.storeRefreshHandler_[this.depStores_[b].storeId]=setTimeout(this._refreshDepStoreViews.bind(this,c),0))}},_updateDepField:function(a,b,c,e){if(a=e.getInputById(a)){for(var f=a.domNode;f&&"TR"!=f.tagName;)f=f.parentNode;for(var g=!0,k=!0,l=!0,m=dojo.byId(a.id+"_label"),p=0;p<b.length;p++)"NONE"!=b[p].visible&&(k=!1,b[p].value==this.value&&(g="HIDDEN"==b[p].visible)),""!=b[p].caption&&b[p].value==this.value&&(m=dojo.byId(a.id+"_label"),
m._orgLabel||(m._orgLabel=m.innerHTML),m.innerHTML=b[p].caption+": ",l=!1);m._orgLabel&&l&&(m.innerHTML=m._orgLabel,delete m._orgLabel);!f||!c&&k||(c||g?(dojo.style(f,"display","none"),a._ignore=!0,a.get("required")&&(a._required=!0,a.set("required",!1)),a.isInstanceOf(FIRMOS.FilteringSelect)&&a.hide(e)):(dojo.style(f,"display",""),a._ignore&&delete a._ignore,a._required&&(a.set("required",a._required),delete a._required),a.isInstanceOf(FIRMOS.FilteringSelect)&&a.unhide(e)))}},hide:function(a){this._hidden=
!0;this._hideAllDepFields(a)},unhide:function(a){this._hidden=!1;this._updateDepGroup(a)},_updateDepGroup:function(a){for(var b in this.depGroup_)this._updateDepField(b,this.depGroup_[b],!1,a)},_hideAllDepFields:function(a){for(var b in this.depGroup_)this._updateDepField(b,this.depGroup_[b],!0,a)},init:function(){""==this.value&&(this.required||this._required)&&0<this.store.data.length&&this.set("value",this.store.data[0].value);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();
a&&a.isInstanceOf(FIRMOS.Form)&&(this._hidden?this._hideAllDepFields(a):this._updateDepGroup(a))},isValid:function(a){return this.get("value")||!this.required?this.inherited(arguments):!1},onChange:function(a){this.inherited(arguments);for(var b=this.getParent();b&&!b.isInstanceOf(dijit.form.Form);)b=b.getParent();b&&b.isInstanceOf(FIRMOS.Form)&&(this._hidden||this._updateDepGroup(b),b.checkDepAndGroupRequiredFields(this),b.submitOnChange(this));this.refreshDepStores(a)}});dojo.declare("FIRMOS.BoolCheckBox",
dijit.form.CheckBox,{constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&a.checkDepAndGroupRequiredFields(this)},_setValueAttr:function(a){a instanceof Array&&
(a=a[0]);switch(a){case "0":case "":case "false":a=!1;break;case "1":case "true":a=!0}this.inherited(arguments)},_getValueAttr:function(){return this.checked?"true":"false"}});dojo.declare("FIRMOS.MultiValText",dijit.form.Textarea,{constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_getValueAttr:function(){var a=
this.inherited(arguments);return""==a?[]:a.split("\n")},filter:function(a){var b="object"==typeof a?this.inherited(arguments,[a.join("\n")]):this.inherited(arguments),b=b.replace(/\n+/g,"\n");b.lastIndexOf("\n")==b.length-1&&(b=b.substring(0,b.length-1));return b},_setBlurValue:function(){},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkDepAndGroupRequiredFields(this),a.submitOnChange(this))}});
dojo.declare("FIRMOS.ValidationTextBox",dijit.form.ValidationTextBox,{constructor:function(a){a.forbiddenchars?(this.regExpForbidden=eval(a.forbiddenchars),delete a.forbiddenchars):this.regExpForbidden=null;a.replaceregexp?(this.regExpReplace=eval(a.replaceregexp),delete a.replaceregexp):this.regExpReplace=null;a.replacevalue&&(this.replaceValue=a.replacevalue,delete a.replacevalue);a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?
(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},isValid:function(a){if(this.confirms){var b=this.getParent().getInputById(this.confirms);if(b){if(this.get("value")!=b.get("value"))return!1}else console.warn("Confirmation not possible: Input field "+this.confirms+" not found!")}return this.inherited(arguments)},validate:function(a){if(this.regExpForbidden){var b=this.textbox.selectionStart,c=this.textbox.value.length,e=this.textbox.value.replace(this.regExpForbidden,
"");e.length<c&&(this.textbox.value=e,c-=e.length,this.textbox.selectionStart=b-c,this.textbox.selectionEnd=b-c)}this.regExpReplace&&(this.textbox.value=this.textbox.value.replace(this.regExpReplace,this.replaceValue));return this.inherited(arguments)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkDepAndGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberTextBox",
dijit.form.NumberTextBox,{constructor:function(a){a.constraints||(a.constraints={});a.constraints.places&&(0==a.constraints.places?this.regExpForbidden=/[^\d\-]/g:(this.regExpForbidden=/[^\d\.\,\-]/g,a.constraints.places="0,"+a.constraints.places));a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),delete a.dependentfields):this.depFields={};a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setBlurValue:function(){},validate:function(a){var b=
this.textbox.selectionStart,c=this.textbox.value.length,e=this.textbox.value.replace(this.regExpForbidden,"");e.length<c&&(this.textbox.value=e,c-=e.length,this.textbox.selectionStart=b-c,this.textbox.selectionEnd=b-c);return this.inherited(arguments)},_getValueAttr:function(){var a=this.inherited(arguments);isNaN(a)&&(a="");return a},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkDepAndGroupRequiredFields(this),
a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberSlider",dijit.form._FormValueWidget,{templateString:'<div data-dojo-attach-point="focusNode" id="${id}" role="presentation"><div id="${id}_number"></div><div id="${id}_slider"></div></div>',constructor:function(a){a.constraints=dojo.fromJson(a.constraints);this.sliderParams={};this.sliderParams.minimum=a.constraints.min;this.sliderParams.maximum=a.constraints.max;a.constraints.steps&&(this.sliderParams.discreteValues=a.constraints.steps);this.sliderParams.value=
a.value;this.sliderParams.intermediateChanges=a.intermediateChanges;a.showvalue&&(this.showvalue=eval(a.showvalue),delete a.showvalue);this.showvalue&&(this.sliderParams.style="width:75%;",this.numberParams={},this.numberParams.style="width:20%; float:right;",this.numberParams.value=a.value,this.numberParams.places=a.constraints.places,this.numberParams.disabled=!0);this._multi=1;for(var b=0;b<a.constraints.places;b++)this._multi*=10},startup:function(){this.inherited(arguments);this.sliderParams.onChange=
this._onSliderChange.bind(this);this.showvalue&&(this.number=new dijit.form.NumberTextBox(this.numberParams,this.id+"_number"));this.slider=new dijit.form.HorizontalSlider(this.sliderParams,this.id+"_slider")},_onSliderChange:function(){if(Math.round(this.slider.get("value")*this._multi)/this._multi!=this.value){this.value=Math.round(this.slider.get("value")*this._multi)/this._multi;this.showvalue&&this.number.set("value",this.value);var a=this.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&a.submitOnChange(this)}}});
dojo.declare("FIRMOS.TabContainer",dijit.layout.TabContainer,{constructor:function(){this.watch("selectedChildWidget",this.tabChange)},addTabs:function(a){a.sort(G_UI_COM.sortFuncSubSecOrd);for(var b=0;b<a.length;b++)this.addChild(a[b]),G_UI_COM.showSectionPathInProgress||!a[b].selected||a[b]._fixContent||this.tabChange("",null,a[b])},contentLoadedCallback:function(a,b,c,e,f){G_SERVER_COM.handleServerFunctionResponse(b,c,e,f);a._loadedCallback&&(a._loadedCallback(),delete a._loadedCallback)},selectChild:function(a,
b){b&&(a._fixContent?b():a._loadedCallback=b);!a._fixContent&&a.selected&&this.tabChange("",null,a);this.inherited(arguments)},selectDefault:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].selected){this.selectChild(a[b]);break}},tabChange:function(a,b,c){if(c._fixContent){var e=[];this._getDescendants(c,e,"visibilityChange");for(a=0;a<e.length;a++)e[a].visibilityChange(!0)}else G_SERVER_COM.callServerFunction(c._contentFunc["class"],c._contentFunc.func,c._contentFunc.uidPath,c._contentFuncParams,
this.contentLoadedCallback.bind(this,c),c._updateId);this.UIStateChangeClass&&(a=this.UIStateChangeParams,a.sectionId=c.id,G_SERVER_COM.callServerFunction(this.UIStateChangeClass,this.UIStateChangeFunc,this.UIStateChangeUidPath,a));if(b)if(b._fixContent)for(c=[],this._getDescendants(b,c,"visibilityChange"),a=0;a<c.length;a++)c[a].visibilityChange(!1);else{c=[];this._getDescendants(b,c,"destroyNotify");if(0<c.length){e=[];for(a=0;a<c.length;a++)e.push(c[a].id);G_SERVER_COM.callServerFunction("FIRMOS",
"destroy",null,{ids:e})}c=null;if(b.isTCElem)for(b=b.getChildren(),a=0;a<b.length;a++){if(!b[a].isInstanceOf(FIRMOS.Toolbar)){b=b[a].getChildren();0<b.length&&(c=b[0]);break}}else c=b.getChildren()[0];c&&c.destroyRecursive()}},_getDescendants:function(a,b,c){a[c]&&b.push(a);for(var e=a.getChildren(),f=0;f<e.length;f++)a.isInstanceOf(FIRMOS.TabContainer)&&!e[f].selected||this._getDescendants(e[f],b,c)},getChild:function(a){for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null}});
dojo.declare("FIRMOS.MultiContentTabController",null,{constructor:function(){this.domNode=dojo.create("div")},startup:function(){},destroy:function(){dojo.destroy(this.domNode)},pane2button:function(a){return{focus:function(){}}}});dojo.declare("FIRMOS.MultiContentContainer",FIRMOS.TabContainer,{baseClass:"firmosMultiContentContainer",constructor:function(a){this.animationSpeed=20;this.animationStep=0.1;this.controllerWidget=FIRMOS.MultiContentTabController},addTabs:function(a){this.inherited(arguments);
for(var b=0;b<a.length;b++)a[b].domNode.style.position="absolute"},_animateHideChild:function(a,b){0>b?(a.domNode.style.opacity=0,this.hideChildTO=null,this._hideChild(a,!0)):(a.domNode.style.opacity=b,this.hideChildTO=setTimeout(this._animateHideChild.bind(this,a,b-this.animationStep),this.animationSpeed))},_hideChild:function(a,b){this.hideChildTO?(clearTimeout(this.hideChildTO),this.hideChildTO=null,this.inherited(this.hideArgs),this.hideArgs=arguments):this.hideArgs||(this.hideArgs=arguments);
b?(this.inherited(this.hideArgs),this.hideArgs=null):this._animateHideChild(a,1)},_animateShowChild:function(a,b){1<b?(this.showChildTO=null,a.domNode.style.opacity=1):(a.domNode.style.opacity=b,this.showChildTO=setTimeout(this._animateShowChild.bind(this,a,b+this.animationStep),this.animationSpeed))},_showChild:function(a){this.showChildTO&&(clearTimeout(this.showChildTO),this.showChildTO=null);this.inherited(arguments);a.domNode.style.opacity=0;this._animateShowChild(a,0)}});dojo.declare("FIRMOS.SplitContainer",
dijit.layout.BorderContainer,{addChildren:function(a){var b;if(2<a.length){b=a.shift();b.region="top";var c=100-b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=a.pop();b.region="bottom";c-=b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=new FIRMOS.SplitContainer({id:this.id+"_child","class":"borderContainer",region:"center",gutters:!1});b.set("style","height: "+c+"%;");for(var e=0;e<a.length;e++)a[e]._height=a[e]._height/c*100;this.addChild(b);b.addChildren(a)}else 2==
a.length&&(b=a.shift(),b.region="top",b.set("style","height: "+b._height+"%;"),this.addChild(b)),b=a.pop(),b.region="center",b.set("style","height: "+b._height+"%;"),this.addChild(b)}});dojo.declare("FIRMOS.GridFilter",null,{texts:G_TEXTS.gridfilter,constructor:function(a){this._filterButtons=[];this._filterDialogs=[]},destroy:function(){for(;0<this._filterButtons.length;)this._filterButtons.pop().destroyRecursive();for(;0<this._filterDialogs.length;)this._filterDialogs.pop().destroyRecursive();this.inherited(arguments)},
renderHeader:function(){this.inherited(arguments);if(!this.filterDisabled)for(var a=dojo.query(".dgrid-cell",this.headerNode),b=0;b<a.length;b++){var c=a[b].columnId;if(this.columns[c]&&this.columns[c].filterable&&this.columns[c].dataType&&"ICO"!=this.columns[c].dataType){var e=dijit.byId(this.id+"_"+c+"_ddb");if(!e){switch(this.columns[c].dataType){case "STR":var e=this.getStringFilterDialog(this.columns[c]),f="setStringFilter";break;case "DAT":e=this.getDateFilterDialog(this.columns[c]);f="setDateFilter";
break;case "NUM":case "PRG":case "CUR":e=this.getNumberFilterDialog(this.columns[c]);f="setNumberFilter";break;case "BOO":e=this.getBooleanFilterDialog(this.columns[c]);f="setBooleanFilter";break;default:console.error('Grid filter error: Unknown data type set for column "'+this.columns[c].label.replace(/"/g,'"')+'": '+this.columns[c].dataType);continue}e='<form dojoType="dijit.form.Form" id="'+this.id+"_"+c+'" onsubmit="return false;"><table style="width:100%">'+e+'<tr><td colspan="2" class="firmosGridFilterDialogButtons"><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.'+
f+"('"+c+"',ttd.formValues); ttd.ddbutton.closeDropDown();\">"+this.texts.setButton+'</button><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].reset(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.clearFilter(\''+c+"'); ttd.ddbutton.closeDropDown();\">"+this.texts.clearButton+"</button></td></tr></table></form>";f=new dijit.TooltipDialog({id:this.id+"_"+c+"_td","class":"firmosGridFilterDialog"+
this.columns[c].dataType,content:e,onShow:function(a){this.formValues=this.getChildren()[0].get("value")},onOpen:function(a){this.getChildren()[0].set("value",this.formValues)},grid:this});this._filterDialogs.push(f);e=new dijit.form.DropDownButton({id:this.id+"_"+c+"_ddb",label:"",dropDown:f,"class":"firmosGridFilter",iconClass:"firmosGridFilterIconClass",onClick:function(a){a.preventDefault();dojo.stopEvent(a);return!1}});f.ddbutton=e;this._filterButtons.push(e)}a[b].appendChild(e.domNode)}}},clearFilter:function(a){G_UI_COM.deleteStoreDependency(this.collection.id,
a);a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.removeClass(a[0],"firmosGridFilterSet");this.refresh()},setStringFilter:function(a,b){""==b.filter?this.clearFilter(a):(this.column(a).filterValues?G_UI_COM.setStoreDependency(this.collection.id,a,"T",[b.filter],null,"EX"):G_UI_COM.setStoreDependency(this.collection.id,a,"T",[b.filter]),this.filterSet(a))},setNumberFilter:function(a,b){if(b.type==this.texts.numberOptions.gtlt){if(""===b.value1&&""===b.value2){this.clearFilter(a);
return}}else if(""===b.value){this.clearFilter(a);return}var c="CUR"==this.column(a).dataType?"C":"S";switch(b.type){case this.texts.numberOptions.eq:G_UI_COM.setStoreDependency(this.collection.id,a,c,[b.value],"EX");break;case this.texts.numberOptions.lt:G_UI_COM.setStoreDependency(this.collection.id,a,c,[b.value],"LE");break;case this.texts.numberOptions.gt:G_UI_COM.setStoreDependency(this.collection.id,a,c,[b.value],"GT");break;case this.texts.numberOptions.gtlt:G_UI_COM.setStoreDependency(this.collection.id,
a,c,[b.value1,b.value2],"REXB")}this.filterSet(a)},setDateFilter:function(a,b){if(b.type==this.texts.dateOptions.gtlt){if(!b.value1&&!b.value2){this.clearFilter(a);return}}else if(!b.value){this.clearFilter(a);return}switch(b.type){case this.texts.dateOptions.eq:var c=new Date(b.value.getTime());c.setHours(0,0,0,0);var e=new Date(b.value.getTime());e.setHours(23,59,59,999);G_UI_COM.setStoreDependency(this.collection.id,a,"D",[c.getTime(),e.getTime()],"RWIB");break;case this.texts.dateOptions.lt:G_UI_COM.setStoreDependency(this.collection.id,
a,"D",[b.value.getTime()],"LE");break;case this.texts.dateOptions.gt:G_UI_COM.setStoreDependency(this.collection.id,a,"D",[b.value.getTime()],"GT");break;case this.texts.dateOptions.gtlt:c=new Date(b.value1),c.setHours(0,0,0,0),e=new Date(b.value2),e.setHours(23,59,59,999),G_UI_COM.setStoreDependency(this.collection.id,a,"D",[c.getTime(),e.getTime()],"RWIB")}this.filterSet(a)},setIconFilter:function(a,b){this.filterSet(a)},setBooleanFilter:function(a,b){G_UI_COM.setStoreDependency(this.collection.id,
a,"B",[b.filter]);this.filterSet(a)},filterSet:function(a){a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.addClass(a[0],"firmosGridFilterSet");this.refresh()},getStringFilterDialog:function(a){if(a.filterValues){for(var b='<tr><td colspan=2 class="firmosGridFilterFormInputTD2Col"><select id="'+this.id+"_"+a.id+'_filter" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="filter">',c=0;c<a.filterValues.length;c++)b=b+"<option>"+a.filterValues[c]+"</option>";b+="</select></td></tr>"}else b=
'<tr><td colspan=2 class="firmosGridFilterFormInputTD2Col"><input data-dojo-type="dijit.form.TextBox" id="'+this.id+"_"+a.id+'_filter" name="filter" style="width:100%"></td></tr>';return b},numberFilterTypeChange:function(a,b,c){c=dijit.byId(b+"_value");var e=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.numberOptions.gtlt?(dojo.style(c.domNode,"display","none"),dojo.style(e.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(c.domNode,"display",""),dojo.style(e.domNode,
"display","none"),dojo.style(b.domNode,"display","none"))},dateFilterTypeChange:function(a,b,c){c=dijit.byId(b+"_value");var e=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.dateOptions.gtlt?(dojo.style(c.domNode,"display","none"),dojo.style(e.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(c.domNode,"display",""),dojo.style(e.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},getNumberFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+
this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.numberFilterTypeChange(value,\''+this.id+"_"+a.id+"',this);}\"><option>"+this.texts.numberOptions.eq+"</option><option>"+this.texts.numberOptions.lt+"</option><option>"+this.texts.numberOptions.gt+"</option><option>"+this.texts.numberOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+
this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},getDateFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.dateFilterTypeChange(value,\''+
this.id+"_"+a.id+"',this);}\"><option>"+this.texts.dateOptions.eq+"</option><option>"+this.texts.dateOptions.lt+"</option><option>"+this.texts.dateOptions.gt+"</option><option>"+this.texts.dateOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.DateTextBox" id="'+
this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},getIconFilterDialog:function(a){return""},getBooleanFilterDialog:function(a){return'<tr><td colspan=2 class="firmosGridFilterFormInputTD2Col"><select data-dojo-type="dojox.form.CheckedMultiSelect" style="width:100%" id="'+this.id+"_"+a.id+'_filter" name="filter" value="true"><option value="true">Yes</option><option value="false">No</option></select></td></tr>'}});dojo.declare("FIRMOS.D3Chart",dijit.layout.ContentPane,
{constructor:function(a){for(var b in a)this[b]=a[b];if(!this.seriesColor)for(this.seriesColor=[],b=0;b<this.seriesCount;b++)this.seriesColor[b]="000";G_UI_COM.createCSSRule("d3axis path, .axis line","fill: none;shape-rendering: crispedges;stroke: #000000;");this._events=[];this.scale_y=this.scale_x=this.chartCaption=this.clipPathRect=this.clipPath=this.svgMainG=this.svg=this.container=null;this.margin={top:20,right:20,bottom:20,left:40};this.axisYG=this.axisY=null;this.stopped=!0;this.axisXG=this.axisX=
null;this.axisXMargin=0;this.legend=this.axisYG=this.axisY=null;this.legendItems=[];this.legendSize=0;this.newLines=[];switch(a.type){case "lct_line":this.dataIdx=0;this.buffer=[];this._animationTime=this.updateInterval;this._animationStart_1=new Date;this._animationStart_2=new Date;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;this._dataToLate=this._doNotCalc=0;break;case "lct_column":this.data=[],this.rects=[]}this.dummyData=this.dataMin-this.dataMax;this.domainX=[];if("lct_line"==
a.type||"lct_sampledline"==a.type)this.interpolation="linear",this.path=[],this.line=[],this.data=[];G_UI_COM.registerLiveChart(this)},visibilityChange:function(a){a?this.start():this.stop()},destroy:function(){this.stop();G_UI_COM.unregisterLiveChart(this);for(this._removeSeriesCSS();0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},redefine:function(a){var b=!1;a.caption&&this.caption!=a.caption&&(this.caption=a.caption,this.chartCaption.text(this.caption));a.dataLabels&&
(this.dataLabels=a.dataLabels);if(a.dataCount&&this.dataCount!=a.dataCount){switch(this.type){case "lct_line":this.domainX=[1,a.dataCount-2];for(var c=0;c<this.seriesCount;c++)if(a.dataCount>this.dataCount)for(var e=0;e<a.dataCount-this.dataCount;e++)this.data[c].unshift(this.dummyData);else for(e=0;e<this.dataCount-a.dataCount;e++)this.data[c].shift();break;case "lct_sampledline":this.domainX=[0,a.dataCount-1];break;case "lct_column":this.domainX=this.dataLabels?d3.range(a.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):
d3.range(a.dataCount).map(function(a){return a})}this.dataCount=a.dataCount;this.scale_x.domain(this.domainX)}if(a.dataLabels||a.dataCount&&this.dataCount!=a.dataCount)this.axisXG.call(this.axisX).selectAll("text").style("text-anchor","end"),this._adjustAxisX(),b=!0;(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._removeSeriesCSS();a.seriesColor&&(this.seriesColor=a.seriesColor);if(a.seriesCount&&this.seriesCount!=a.seriesCount){if(a.seriesCount>this.seriesColor.length)for(c=
this.seriesColor.length;c<a.seriesCount;c++)this.seriesColor[c]="000";else if(a.seriesCount<this.seriesColor.length)for(c=this.seriesColor.length-1;c>=a.seriesCount;c--)this.seriesColor.pop();if(a.seriesCount>this.seriesCount)for(c=this.seriesCount;c<a.seriesCount;c++){if("lct_line"==this.type){this.buffer[c]=[];for(var f=0==this.seriesCount?this.bufferSize+1:this.buffer[0].length,e=0;e<f;e++)this.buffer[c][e]=this.dummyData;0==this.seriesCount?setTimeout(this.updateData.bind(this,c),0):this.newLines.push(c)}if("lct_line"==
this.type||"lct_sampledline"==this.type)this.data[c]=d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this)),this._createLine(c)}else for(c=this.seriesCount-1;c>=a.seriesCount;c--)if("lct_line"==this.type&&this.buffer.pop(),"lct_line"==this.type||"lct_sampledline"==this.type)this.data.pop(),this.line.pop(),this.path.pop().remove();this.seriesCount=a.seriesCount}(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._createSeriesCSS();if(this.legendLabels&&(a.seriesColor||
a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)this.legendLabels?this.legend.remove():(this.margin.bottom+=20,b=!0),a.legendLabels&&(this.legendLabels=a.legendLabels);b&&(this.height=dojo.position(this.container).h-this.margin.top-this.margin.bottom,this.clipPathRect.attr("height",this.height),this.scale_y.range([this.height,0]),this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")"));if(a.dataMin||a.dataMax)a.dataMin&&(this.dataMin=a.dataMin),a.dataMax&&(this.dataMax=
a.dataMax),this.scale_y.domain([this.dataMin,this.dataMax]),this.axisYG.call(this.axisY);(this.legendLabels&&(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)&&this._paintLegend();this._paintData()},_removeSeriesCSS:function(){for(var a=0;a<this.seriesCount;a++)G_UI_COM.removeCSSRule("series"+this.id+"_"+a)},_createSeriesCSS:function(){if("lct_line"==this.type||"lct_sampledline"==this.type)for(var a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+
a,"fill: none; stroke: #"+this.seriesColor[a]+"; stroke-width: 1.5px;");if("lct_column"==this.type)for(a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+a,"fill: #"+this.seriesColor[a])},_paintData:function(){switch(this.type){case "lct_line":case "lct_sampledline":this.scale_x.range([0,this.width]);for(var a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a]);break;case "lct_column":this.scale_x.rangeRoundBands([0,this.width],0.1),this._paintColumns()}},applyScale:function(){var a=
dojo.position(this.container);this.width=a.w-this.margin.left-this.margin.right;this.height=a.h-this.margin.top-this.margin.bottom;this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom);this.clipPathRect.attr("width",this.width).attr("height",this.height);this.scale_y.range([this.height,0]);this.axisYG.call(this.axisY);this._paintData();this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")").call(this.axisX).selectAll("text").style("text-anchor",
"end");this.chartCaption&&this.chartCaption.attr("x",this.width/2).attr("y",-(this.margin.top-20))},postCreate:function(){this.inherited(arguments);this.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%;"></div>');this.set("style","overflow: hidden");setTimeout(this.createChart.bind(this),0)},stop:function(){this.stopped=!0;this.sfParams.action="stop";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams)},start:function(){if(this.stopped){this.stopped=
!1;switch(this.type){case "lct_line":for(var a=0;a<this.seriesCount;a++)this._createLine(a);for(a=this.dataIdx=0;a<this.seriesCount;a++){this.buffer[a]=[];for(var b=0;b<=this.bufferSize;b++)this.buffer[a][b]=this.dummyData}break;case "lct_sampledline":for(a=0;a<this.seriesCount;a++)this._createLine(a)}this.initClass?G_SERVER_COM.callServerFunction(this.initClass,this.initFunc,this.initUidPath,this.initParams,this._initCallback.bind(this)):this._start()}},_initData:function(){for(var a=0;a<this.seriesCount;a++)this.data[a]=
d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this))},_createLine:function(a){this.line[a]=d3.svg.line().interpolate(this.interpolation).x(function(a,b){return this.scale_x(b)}.bind(this)).y(function(a,b){return this.scale_y(a)}.bind(this));this.path[a]=this.svgMainG.append("g").attr("clip-path","url(#clip)").append("path").data([this.data[a]]).attr("class","series"+this.id+"_"+a).attr("d",this.line[a])},_initCallback:function(a,b,c,e){if(b){a=dojo.fromJson(c.output);switch(this.type){case "lct_line":for(b=
0;b<a.length;b++){c=this.bufferSize+1;e=!0;this.buffer[b]=[];for(var f=a[b].length-1;0<=f;f--)if(e)c--,this.buffer[b][c]=a[b][f],0==c&&(e=!1,c=this.dataCount);else if(c--,this.data[b][c]=a[b][f],0==c)break;if(e&&0<c)for(f=c-1;0<=f;f--)this.buffer[b][f]=this.dummyData;e&&(c=this.dataCount);if(0<c)for(f=c-1;0<=f;f--)this.data[b][f]=this.dummyData}if(this.seriesCount>a.length)for(b=a.length;b<this.seriesCount;b++)this._fillWithDummyData(b);break;case "lct_sampledline":case "lct_column":this.setData(a)}this._start()}else c.output?
(a=dojo.fromJson(c.output),a.action&&eval(a.action)):console.error("Server Function Error => "+c.cn+"."+c.fn+": "+c.error)},_start:function(){this.sfParams.action="start";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams);switch(this.type){case "lct_line":this._animationStart_1=new Date-this.updateInterval;this._animationStart_2=this._animationStart_1-this.updateInterval;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;for(var a=this._doNotCalc=
0;a<this.seriesCount;a++)this.updateData(a)}},setData:function(a,b){if(!this.stopped)switch(this.type){case "lct_line":this._setLineData(a,b);break;case "lct_sampledline":this._setSampledLineData(a);break;case "lct_column":this._setColumnData(a)}},_setSampledLineData:function(a){if(this._setCompleteData(a))for(a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a])},_setLineData:function(a,b){if(a.length!=this.seriesCount)console.error("Live Chart "+this.id+": received data points count ("+
a.length+") does not match series count ("+this.seriesCount+")");else if(this.dataIdx==b){for(var c=0;c<this.seriesCount;c++)this.buffer[c].push(a[c]);this.dataIdx++}else if(b<this.dataIdx)this._dataToLate=10*this.bufferSize;else for(c=0;c<this.seriesCount;c++){for(var e=0;e<b-this.dataIdx;e++)this.buffer[c].push(this.dummyData);this.buffer[c].push(a[c]);this.dataIdx=this.dataIdx+(b-this.dataIdx)+1}},_setColumnData:function(a){this._setCompleteData(a)&&this._paintColumns()},_setCompleteData:function(a){if(a.length!=
this.seriesCount)return console.error("Live Chart "+this.id+": received data sets count ("+a.length+") does not match series count ("+this.seriesCount+")"),!1;for(var b=0;b<this.seriesCount;b++)for(var c=0;c<a[b].length;c++){if(a[b].length!=this.dataCount)return console.error("Live Chart "+this.id+": received data count ("+a[b].length+") for set "+b+" does not match data count ("+this.dataCount+")"),!1;this.data[b][c]=a[b][c]}return!0},updateData:function(a){if(!this.stopped)if(this.seriesCount<=
a)this._doNotCalc&&(this._doNotCalc=this._doNotClac-1);else{if(0==this.buffer[a].length){this.dataIdx++;for(var b=0;b<this.seriesCount;b++)this.buffer[b].push(this.dummyData)}this.data[a].push(this.buffer[a].shift());if(this._doNotCalc)this._doNotCalc=this._doNotClac-1;else for(this._doNotCalc=this.seriesCount-1,this._animationTime=this.updateInterval-(this._animationStart_1-this._animationStart_2-this._oldAnimationTime_2),this._animationTime<this.updateInterval/2&&(this._animationTime=this.updateInterval/
2),this.buffer[a].length>this.bufferSize&&(this._animationTime-=this.updateInterval/10),this.buffer[a].length<this.bufferSize&&(this._dataToLate=10),this._dataToLate&&(this._dataToLate-=1,this._animationTime+=this.updateInterval/10),this._oldAnimationTime_2=this._oldAnimationTime_1,this._oldAnimationTime_1=this._animationTime,this._animationStart_2=this._animationStart_1,this._animationStart_1=new Date;0<this.newLines.length;)setTimeout(this.updateData.bind(this,this.newLines.pop()),0);this.path[a].attr("d",
this.line[a]).attr("transform",null).transition().duration(this._animationTime).ease("linear").attr("transform","translate("+this.scale_x(0)+")").each("end",this.updateData.bind(this,a));this.data[a].shift()}},createChart:function(){this.container=dojo.byId(this.id+"_container");this._initData();this._createSeriesCSS();""!=this.caption&&(this.margin.top+=20);this.legendLabels&&(this.margin.bottom+=20);var a=dojo.position(this.container);this.svg=d3.select(this.container).append("svg").attr("width",
a.w).attr("height",a.h);this.svgMainG=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.width=a.w-this.margin.left-this.margin.right;""!=this.captiom&&(this.chartCaption=this.svgMainG.append("text").attr("x",this.width/2).attr("y",-(this.margin.top-20)).attr("text-anchor","middle").attr("class","firmosLiveChartCaption").text(this.caption));switch(this.type){case "lct_line":this.domainX=[1,this.dataCount-2];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,
this.width]);break;case "lct_sampledline":this.domainX=[0,this.dataCount-1];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_column":this.domainX=this.dataLabels?d3.range(this.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):d3.range(this.dataCount).map(function(a){return a}),this.scale_x=d3.scale.ordinal().domain(this.domainX).rangeRoundBands([0,this.width],0.1)}this.dataLabels&&(this.axisX=d3.svg.axis().scale(this.scale_x).orient("bottom"),
this.axisXG=this.svgMainG.append("g").attr("class","x d3axis").call(this.axisX),this._adjustAxisX());this.height=a.h-this.margin.top-this.margin.bottom;this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")");this.legendLabels&&this._paintLegend();this.clipPath=this.svgMainG.append("defs").append("clipPath").attr("id","clip");this.clipPathRect=this.clipPath.append("rect").attr("width",this.width).attr("height",this.height);this.scale_y=d3.scale.linear().domain([this.dataMin,this.dataMax]).range([this.height,
0]);this.axisY=d3.svg.axis().scale(this.scale_y).ticks(this.dataTickHint).orient("left");this.axisYG=this.svgMainG.append("g").attr("class","y d3axis").call(this.axisY);this.start();this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)))},_adjustAxisX:function(){var a=0;this.axisXG.selectAll("text").style("text-anchor","end").attr("transform",function(a){return"rotate(-90)"}).attr("transform",function(b){b=this.getBoundingClientRect();ySpace=b.bottom-b.top;ySpace>a&&(a=ySpace);return"rotate(-90) translate(-5,"+
(b.left-b.right)+")"});this.margin.bottom=this.margin.bottom-this.axisXMargin+a;this.axisXMargin=a},_paintLegend:function(){this.legendSize=0;this.legend=this.svgMainG.append("g");for(var a=0;a<this.seriesCount;a++){this.legendItems[a]=this.legend.append("g").attr("class","legend");this.legendItems[a].append("rect").attr("x",this.legendSize).attr("y",-5).attr("width",18).attr("height",2).style("fill","#"+this.seriesColor[a]);this.legendSize+=25;var b=this.legendItems[a].append("text").attr("x",this.legendSize).text(this.legendLabels[a]);
this.legendSize=this.legendSize+b[0][0].getBBox().width+20}this.legentSize=this.legendSize-20;this.legend.attr("transform","translate("+(this.width/2-this.legendSize/2)+","+(this.height+this.margin.top-10)+")")},_paintColumns:function(){for(var a=0;a<this.seriesCount;a++){var b=this.svgMainG.selectAll(".series"+this.id+"_"+a).data(this.data[a]);b.enter().append("rect").attr("class","series"+this.id+"_"+a);var c=0<this.dataMin?this.dataMin:0;b.attr("x",function(a,b){return this.scale_x(this.domainX[b])}.bind(this)).attr("width",
this.scale_x.rangeBand()).attr("y",function(a,b){return this.scale_y(a)}.bind(this)).attr("height",function(a,b){return a<this.dataMin?0:this.scale_y(c)-this.scale_y(a)}.bind(this));b.exit().remove()}}});dojo.declare("FIRMOS.TopMenu",dijit.layout.BorderContainer,{notificationMinWidth:0,notificationsClosed:!1,notificationPanelId:"",constructor:function(a){this._events=[];a.notificationPanel&&(this.notificationPanelId=a.notificationPanel.id)},_layoutChildren:function(a,b,c){this.inherited(arguments);
this.notificationsClosed&&a==this.notificationPanelId&&0<b&&(this.notificationsClosed=!1,dojo.style(this.openNotificationsButton,"display","none"),dojo.style(this.closeNotificationsButton,"display",""))},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},buildSVGDefs:function(){for(var a=this.buttonSurface.rawNode.getElementsByTagName("defs")[0],b=0;b<this.defs.length;b++){var c=G_UI_COM.buildSVGDef(this.defs[b]);a.appendChild(c)}},postCreate:function(){this.inherited(arguments);
var a=new dijit.layout.ContentPane({region:"top",splitter:!1,"class":"firmosTransparent"}),b;b='<div class="topMenu"><div class="topMenuLogoLeft"></div>';b+='<div class="topMenuLogoRight"></div>';b=b+'<div id="topMenuUserInfoRight" class="topMenuUserInfoRight"><div id="topMenuUserActionRight" class="topMenuUserActionRight"></div>'+this.uname+"</div>";""!=this.notificationPanelId&&(b+='<div class="topMenuNotificationToggleClose" id="topMenuNotificationToggleClose"></div>',b+='<div class="topMenuNotificationToggleOpen" id="topMenuNotificationToggleOpen" style="display:none;"></div>');
b+='<div class="buttonListWrapper">';b=b+'<div id="'+this.id+'_gfx" class="buttonListItem"></div>';b+="</div>";a.set("content",b);this.addChild(a);""!=this.notificationPanelId&&(this.notificationPanel.region="right",dojo.addClass(this.notificationPanel.domNode,"firmosNotificationPanel"),this.notificationPanel.splitter=!0,this.addChild(this.notificationPanel));setTimeout(this._handleButtons.bind(this),0)},notificationToggle:function(a){var b=dijit.byId(this.notificationPanelId);a?(this.notificationsClosed=
!1,dojo.style(this.openNotificationsButton,"display","none"),dojo.style(this.closeNotificationsButton,"display",""),b.resize({w:this.notificationStoreWidth})):(this.notificationsClosed=!0,dojo.style(this.openNotificationsButton,"display",""),dojo.style(this.closeNotificationsButton,"display","none"),this.notificationStoreWidth=dojo.position(b.domNode).w,b.resize({w:this.notificationMinWidth}));this.layout()},_handleButtons:function(){this.buttonContainer=dojo.byId(this.id+"_gfx");this.buttonSurface=
dojox.gfx.createSurface(this.id+"_gfx","100%","100%");this.buildSVGDefs();var a=this.buttonSurface.createGroup(),b=""!=this.homeCaption?this.homeIconSize+20+10:this.homeIconSize+10,c=b,e=a.createPath({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+c+"c-1.161,0-2.103-0.895-2.103-2v-"+b+"c0-1.104,0.941-2,2.103-2h"+c+"c1.161,0,2.103,0.896,2.103,2V49.496z"});e.applyTransform(dojox.gfx.matrix.translate(c-110,b-45));var f=a.createPath({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(c-2.879)+
"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(c-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"});f.applyTransform(dojox.gfx.matrix.translate(c-110,b-45));var g=e.getTransformedBoundingBox();a.createImage({x:g[0].x+(g[1].x-g[0].x)/2-this.homeIconSize/2,y:g[1].y+5,width:this.homeIconSize,height:this.homeIconSize,src:this.homeIcon,preserveAspectRatio:"meet"});""!=this.homeCaption&&(g=a.createText({x:g[0].x+(g[1].x-g[0].x)/2,y:g[1].y+this.homeIconSize+20,text:this.homeCaption,
align:"center"}).setFont({family:"Arial",size:"10pt"}).setFill("white"),g.applyTransform(dojox.gfx.matrix.translate(-g.getTextWidth()/2,0)),g.getTextWidth()>c-10&&(g=g.getTextWidth()-c+10,c+=g,e.setShape({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+c+"c-1.161,0-2.103-0.895-2.103-2v-"+b+"c0-1.104,0.941-2,2.103-2h"+c+"c1.161,0,2.103,0.896,2.103,2V49.496z"}),f.setShape({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(c-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+
(c-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"}),e.applyTransform(dojox.gfx.matrix.translate(g/2,0)),f.applyTransform(dojox.gfx.matrix.translate(g/2,0))));e.rawNode.setAttribute("class","firmosTopMenuHome");f.rawNode.setAttribute("class","firmosTopMenuHome2");b=a.getTransformedBoundingBox();c=b[1].x-b[0].x;e=b[2].y-b[1].y;a.createRect({x:b[0].x,y:b[1].y,width:c,height:e}).setFill([0,0,0,0]);this.buttonContainer.setAttribute("style","width: "+(c+10)+"px; height: "+(e+10)+"px; overflow: hidden");
this._events.push(dojo.connect(a.getEventSource(),dojox.gesture.tap,this.sectionToggle.bind(this)));this.layout();a=dojo.byId("topMenuUserInfoRight");this._events.push(dojo.connect(a,dojox.gesture.tap,this.openUserInfo.bind(this)));a=dojo.byId("topMenuUserActionRight");this.userInfoDim=dojo.position(a);""!=this.notificationPanelId&&(this.openNotificationsButton=dojo.byId("topMenuNotificationToggleOpen"),this._events.push(dojo.connect(this.openNotificationsButton,dojox.gesture.tap,this.notificationToggle.bind(this,
!0))),this.closeNotificationsButton=dojo.byId("topMenuNotificationToggleClose"),this._events.push(dojo.connect(this.closeNotificationsButton,dojox.gesture.tap,this.notificationToggle.bind(this,!1))),this.notificationInitialClosed&&this.notificationToggle(!1))},openJIRA:function(){window._showCollectorDialog?window._showCollectorDialog():console.error("JIRA integration not included!")},sectionToggle:function(a){G_UI_COM.showSectionPath(this.subSecsId,[this.mainSectionId],!0)},openUserInfo:function(a){G_UI_COM.setActionCoords({x:this.userInfoDim.x+
this.userInfoDim.w/2,y:this.userInfoDim.y+this.userInfoDim.h/2});G_SERVER_COM.callServerFunction(this.uClass,this.uFunc,this.uUidPath,this.uParams)}});dojo.declare("FIRMOS.Sitemap",dijit.layout.BorderContainer,{constructor:function(){this._events=[];this.mainEntriesBB=this.mainEntriesGroupGFX=this.mainEntriesSurface=this.mainEntriesContainer=this.detailsCP=this.mainEntriesCP=null;this.mainEntriesMoveCtrl=!1;this.mainEntriesMoveCtrlDownGFX=this.mainEntriesMoveCtrlUpGFX=null;this.mainEntriesPos=0;this.detailsDim=
this.detailsSurface=this.detailsContainer=null;this.detailsMinVisibleSection=100;this.animationRunning=!1;this.toggleAnimationDuration=500;this.focusElementAnimationDuration=250;this.minimizedScale=0.05;this.moveFactor=0.2;this.lastMove_=(new Date).getTime();this.moving_=!1;this.mouseWheelDivisor=this.moveToClickTimeMin=100;this.pinchDivisor=5;G_UI_COM.registerSitemap(this)},destroy:function(){for(G_UI_COM.unregisterSitemap(this);0<this._events.length;)this._events.pop().remove();this.inherited(arguments);
this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},postCreate:function(){this.inherited(arguments);this.mainEntriesCP=new dijit.layout.ContentPane({region:"left",splitter:!1,"class":"firmosTransparent"});this.mainEntriesCP.set("content",'<div id="'+this.id+'_me_gfx" style="width:100%; height:100%;"></div>');this.mainEntriesCP.set("style","width: 140px; overflow: hidden");this.detailsCP=new dijit.layout.ContentPane({region:"center",splitter:!1,
"class":"firmosTransparent"});this.detailsCP.set("content",'<div id="'+this.id+'_d_gfx" style="width:100%; height:100%;"></div>');this.detailsCP.set("style","width: 100%; overflow: hidden");this.addChild(this.mainEntriesCP);this.addChild(this.detailsCP);setTimeout(this.buildSitemap.bind(this),0)},buildSitemap:function(){for(var a=this.getParent(),b=this;a;)a.isInstanceOf(FIRMOS.TabContainer)&&(b._fixContent=!0),b=a,a=b.getParent();this.mainEntriesContainer=dojo.byId(this.id+"_me_gfx");this.mainEntriesSurface=
dojox.gfx.createSurface(this.id+"_me_gfx","100%","100%");this.detailsContainer=dojo.byId(this.id+"_d_gfx");this.detailsSurface=dojox.gfx.createSurface(this.id+"_d_gfx","100%","100%");this.buildSVGDefs();b=!1;for(a=0;a<this.entries.length;a++)this.entries[a].entries?(this.entries[a].collapsed=b,b=!0):this.entries[a].collapsed=!0;if(1==this.entries.length)this.mainEntriesCP.set("style","display: none"),this._fixEntriesDataType(this.entries[0]);else for(this.mainEntriesGroupGFX=this.mainEntriesSurface.createGroup(),
a=0;a<this.entries.length;a++)b=this.mainEntriesGroupGFX.createGroup(),this.entries[a].groupGFX=b,this.entries[a].x=80,this.entries[a].y=0==a?0:this.entries[a-1].y+this.entries[a-1].height+30,this.createEntry(b,this.entries[a],!0),this.entries[a].collapsed||(this.entries[a].elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapMainEntryPressed"),this.entries[a].elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapMainEntryPressed2"));b=[];this.detailsDim=dojo.position(this.detailsContainer);
for(a=0;a<this.entries.length;a++){this.entries[a].childrenGroupMoveGFX=this.detailsSurface.createGroup();this.entries[a].childrenGroupGFX=this.entries[a].childrenGroupMoveGFX.createGroup();this.entries[a].maxElemScale=1;this.entries[a].minElemScale=1;this.entries[a].detailScale=1;b[0]=a;if(0<this.entries[a].entries.length){this.buildDetails(this.entries[a],b,null,this.entries[a].childrenGroupGFX);var c=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect=this.entries[a].childrenGroupMoveGFX.createRect({x:c.x-
this.detailsDim.w,y:c.y-this.detailsDim.h,width:c.width+2*this.detailsDim.w,height:c.height+2*this.detailsDim.h}).setFill([0,0,0,0]).moveToBack();c=dojox.gfx.Moveable(this.entries[a].childrenGroupMoveGFX);this._events.push(dojo.connect(c,"onMoveStop",this._moveActionStop.bind(this)));this._events.push(dojo.connect(c,"onMove",this._moveAction.bind(this)));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),dojox.gesture.tap.doubletap,this.resetDisplay.bind(this,this.entries[a])));
this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),"gesturechange",this.gestureHandler.bind(this,this.entries[a])));c=dojo.isMozilla?"DOMMouseScroll":"onmousewheel";this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),"gesturechange",this.gestureHandler.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),c,this.gestureHandler.bind(this,this.entries[a])))}else this.entries[a].path=dojo.clone(b);
this.entries[a].maxDetailScale=this.entries[a].maxElemScale/this.entries[a].minElemScale*3}1<this.entries.length&&(this.mainEntriesBB=this.mainEntriesGroupGFX.getBoundingBox());this.resizeSVGHandler();this.layout();setTimeout(this._initialLayoutDetails.bind(this),0);this._events.push(dojo.connect(this,"resize",this.resizeSVGHandler.bind(this)))},gestureHandler:function(a,b){if(this.animationRunning)setTimeout(this.gestureHandler.bind(this,a,b),100);else{if(b.scale)var c=1+(b.scale-1)/this.pinchDivisor;
else c=b[dojo.isMozilla?"detail":"wheelDelta"]*(dojo.isMozilla?-1:1),c=1+c/this.mouseWheelDivisor;var e=a.detailScale*c;1>e&&(e=1,c=e/a.detailScale);e>a.maxDetailScale&&(e=a.maxDetailScale,c=e/a.detailScale);if(e<a.detailScale)var f=!1,g=(a.detailScale-e)/(a.detailScale-1);else f=!0;var k=dojo.position(this.domNode);a.detailScale=e;e=a.entries[0].elementGFX.getTransformedBoundingBox();if(f)if(b.clientX&&b.clientY){var l=a.childrenGroupGFX.getTransformedBoundingBox(),m=b.clientX-this.detailsDim.x,
p=b.clientY-this.detailsDim.y;m>l[0].x&&m<l[1].x&&p>l[1].y&&p<l[2].y||(m=k.w/2-this.detailsDim.x,p=k.h/2)}else m=k.w/2-this.detailsDim.x,p=k.h/2;else m=e[0].x+(e[1].x-e[0].x)/2,p=e[1].y+(e[2].y-e[1].y)/2;a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(c,m,p));f||a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.translate((k.w/2-this.detailsDim.x-(e[0].x+(e[1].x-e[0].x)/2))*g,(k.h/2-(e[1].y+(e[2].y-e[1].y)/2))*g))}},_initialLayoutDetails:function(){for(var a=0;a<this.entries.length;a++)0<
this.entries[a].entries.length&&this.layoutDetails(this.entries[a])},_moveAction:function(){this.moving_=!0},_moveActionStop:function(){this.moving_&&(this.lastMove_=(new Date).getTime(),this._checkDetailsVisibility());this.moving_=!1},_checkDetailsVisibility:function(){for(var a=0;a<this.entries.length;a++)if(!1==this.entries[a].collapsed){var b=this.entries[a].childrenGroupGFX.getTransformedBoundingBox(),c=this.detailsMinVisibleSection-b[1].x,e=this.detailsDim.w-this.detailsMinVisibleSection-b[0].x,
f=this.detailsMinVisibleSection-b[2].y,b=this.detailsDim.h-this.detailsMinVisibleSection-b[1].y,g=!1;0<c?g=!0:c=0;0>e?g=!0:e=0;0<f?g=!0:f=0;0>b?g=!0:b=0;g&&this.entries[a].childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(c+e,f+b));break}},layoutDetails:function(a){this._centerGFX(a.childrenGroupMoveGFX,a.entries[0].elementGFX);if(a.collapsed){var b=a.childrenGroupMoveGFX.getTransformedBoundingBox(),c=a.groupGFX.getTransformedBoundingBox(),e=dojo.position(this.mainEntriesContainer);c[0].x-=
e.w;c[1].x-=e.w;a.childrenGroupMoveGFX.moveToBack();a.childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(c[0].x+(c[1].x-c[0].x)/2-b[0].x-(b[1].x-b[0].x)/2,c[1].y+(c[2].y-c[1].y)/2-b[1].y-(b[2].y-b[1].y)/2));a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.minimizedScale,c[0].x+(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2));a.childrenGroupMoveGFX.rawNode.style.display="none"}},buildDetails:function(a,b,c,e){a.path=dojo.clone(b);if(c)var f=a.elementGFX.getTransformedBoundingBox(),
g=f[0].x+(f[1].x-f[0].x)/2,f=f[1].y+(f[2].y-f[1].y)/2;for(var k=0;k<a.entries.length;k++){var l=e.createGroup();a.entries[k].groupGFX=l;this.createEntry(l,a.entries[k],!1);this.entries[b[0]].maxElemScale=Math.max(this.entries[b[0]].maxElemScale,a.entries[k].scale);this.entries[b[0]].minElemScale=Math.min(this.entries[b[0]].minElemScale,a.entries[k].scale);var m=a.entries[k].groupGFX.getTransformedBoundingBox();if(c){var p=a.entries[k].elementGFX.getTransformedBoundingBox(),q=p[0].x+(p[1].x-p[0].x)/
2,p=p[1].y+(p[2].y-p[1].y)/2,r=e.createRect({x:0,y:0,width:0,height:0});a.entries[k].connector=r;r.rawNode.setAttribute("style",'fill: url("/#connectorgradient"); fill-opacity: 1;');this.repaintConnector(r,q,p,g,f,5*(a.scale+a.entries[k].scale))}b.push(k);this.buildDetails(a.entries[k],b,m,l);b.pop();c&&(l=(g-q)*this.moveFactor,m=(f-p)*this.moveFactor,a.entries[k].connector.applyLeftTransform(dojox.gfx.matrix.translate((g-q)*this.moveFactor,(f-p)*this.moveFactor)),a.entries[k].connector.applyLeftTransform(dojox.gfx.matrix.scaleAt(1-
this.moveFactor,q+(g-q)*this.moveFactor,p+(f-p)*this.moveFactor)),a.entries[k].groupGFX.applyTransform(dojox.gfx.matrix.translate(l,m)))}},repaintConnector:function(a,b,c,e,f,g){var k=e-b,l=f-c;f=b+k/2;c+=l/2;k=Math.sqrt(k*k+l*l);l=Math.asin(l/k);e<b&&(l=-l);a.setShape({x:f-k/2,y:c-g/2,width:k,height:g});a.applyTransform(dojox.gfx.matrix.rotateAt(l,f,c)).moveToBack();a._originalTrans=a.getTransform()},_fixEntriesDataType:function(a){a.entries?a.entries instanceof Array||(a.entries=[a.entries]):a.entries=
[]},createEntry:function(a,b,c){this._fixEntriesDataType(b);a=a.createGroup();a.rawNode.setAttribute("class","firmosSitemapEntryGroup");b.elementGFX=a;b.width=100;b.height=b.icon?78:35;var e="";c&&(e="Main");c=a.createPath({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"});c.applyTransform(dojox.gfx.matrix.translate(b.x-67.2,b.y+b.height));var f=a.createPath({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+
(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"});f.applyTransform(dojox.gfx.matrix.translate(b.x-67.2,b.y+b.height));var g=c.getTransformedBoundingBox();if(b.icon){a.createImage({x:g[0].x+(g[1].x-g[0].x)/2-24,y:g[1].y+5,width:48,height:48,src:b.icon,preserveAspectRatio:"meet"});var k=g[1].y+48+20}else k=g[1].y+(g[2].y-g[1].y)/2+5;g=a.createText({x:g[0].x+(g[1].x-g[0].x)/2,y:k,text:b.caption,
align:"center"}).setFont({family:"Arial",size:"10pt"}).setFill("white");g.applyTransform(dojox.gfx.matrix.translate(-g.getTextWidth()/2,0));g.getTextWidth()>b.width-10&&(k=g.getTextWidth()-b.width+10,b.width+=k,c.setShape({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"}),f.setShape({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+
(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"}),c.applyTransform(dojox.gfx.matrix.translate(k/2,0)),f.applyTransform(dojox.gfx.matrix.translate(k/2,0)));b.disabled?(c.rawNode.setAttribute("class","firmosSitemap"+e+"EntryDisabled"),f.rawNode.setAttribute("class","firmosSitemap"+e+"EntryDisabled2")):(c.rawNode.setAttribute("class","firmosSitemap"+e+"Entry"),f.rawNode.setAttribute("class","firmosSitemap"+e+"Entry2"));g.rawNode.setAttribute("class",
"firmosSitemap"+e+"EntryDisabled2");e=a.getTransformedBoundingBox();a.createRect({x:e[0].x,y:e[1].y,width:e[1].x-e[0].x,height:e[2].y-e[1].y}).setFill([0,0,0,0]);this._events.push(dojo.connect(a.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,b,!1)));1!=b.scale&&(e=a.getTransformedBoundingBox(),a.applyLeftTransform(dojox.gfx.matrix.scaleAt(b.scale,e[0].x+(e[1].x-e[0].x)/2,e[1].y+(e[2].y-e[1].y)/2)));this.createInfoUI(b)},createInfoUI:function(a){if(0<a.newscount)if(a.infoGFX){var b=
0;if(99<a.newscount){var c=8;100>a.newscount_old&&(b=-1)}else 99<a.newscount_old&&(b=1),c=10;delete a.newscount_old;var e=a.infoGFX.children[2],f=e.getTextWidth();e.setShape({text:a.newscount+""}).setFont({size:c+"pt"});e.applyTransform(dojox.gfx.matrix.translate(f/2-e.getTextWidth()/2,b))}else b=a.elementGFX.getBoundingBox(),f=a.groupGFX.createGroup(),f.createCircle({cx:b.x+b.width,cy:b.y,r:12}).setFill("white"),f.createCircle({cx:b.x+b.width,cy:b.y,r:10}).setFill("red"),c=99<a.newscount?8:10,e=
f.createText({x:b.x+b.width+1,y:b.y+c/2,text:a.newscount+""}).setFont({family:"Arial",size:c+"pt"}).setFill("white"),e.applyTransform(dojox.gfx.matrix.translate(-e.getTextWidth()/2,0)),1!=a.scale&&(f.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,b.x+b.width,b.y)),f.applyTransform(dojox.gfx.matrix.translate(-b.width*(1-a.scale)/2,b.height*(1-a.scale)/2))),a.infoGFX=f;else a.infoGFX&&(a.infoGFX.destroy(),delete a.infoGFX,delete a.newscount_old)},_isShortcutDisabled:function(a){if(!a.entries)return!0;
for(var b=0;b<a.entries.length;b++)if(!a.entries[b].disabled||this._isShortcutDisabled(a.entries[b]))return!1;return!0},createShortcut:function(a){var b=a.disabled||this._isShortcutDisabled(a),c=b?"firmosSMShortcutDisabled":"firmosSMShortcutEnabled",e=a.elementGFX.getBoundingBox(),f=a.groupGFX.createGroup(),g=f.createPath({path:"M19.158,32.64c-2.551,0-5.035-0.738-7.185-2.134c-2.961-1.922-4.995-4.882-5.729-8.334c-0.733-3.452-0.078-6.983,1.844-9.943c2.447-3.77,6.595-6.02,11.094-6.02c2.55,0,5.034,0.738,7.183,2.134c2.961,1.922,4.996,4.882,5.73,8.335c0.734,3.452,0.079,6.984-1.844,9.944C27.805,30.391,23.658,32.64,19.158,32.64z"});
g.rawNode.setAttribute("class",c+"1");g=f.createPath({path:"M19.184,5.709v1c2.453,0,4.842,0.71,6.91,2.053c2.849,1.85,4.807,4.698,5.513,8.02c0.706,3.321,0.076,6.72-1.774,9.568c-2.354,3.625-6.345,5.79-10.675,5.79c-2.454,0-4.844-0.71-6.913-2.053c-2.848-1.85-4.806-4.697-5.511-8.019c-0.706-3.321-0.076-6.719,1.774-9.567c2.354-3.626,6.345-5.792,10.674-5.792L19.184,5.709M19.183,5.709c-4.488,0-8.886,2.202-11.513,6.248C3.544,18.308,5.347,26.8,11.701,30.926c2.308,1.499,4.896,2.214,7.457,2.214c4.489,0,8.888-2.201,11.514-6.246c4.126-6.353,2.32-14.846-4.033-18.971C24.331,6.425,21.742,5.709,19.183,5.709L19.183,5.709z"});
g.rawNode.setAttribute("class",c+"2");g=f.createPath({path:"M0.2-20.001c-10.906,0-19.779,8.874-19.779,19.78c0,10.907,8.873,19.781,19.779,19.781c4.679,0,8.971-1.644,12.356-4.373l-9.806-8.48l25.828-3.813l-0.05,26.107l-9.07-7.845c-5.101,4.599-11.85,7.404-19.259,7.404c-15.894,0-28.779-12.887-28.779-28.781s12.886-28.78,28.779-28.78c12.468,0,23.081,7.928,27.08,19.016l-9.199,1.359C14.913-15.336,8.1-20.001,0.2-20.001z"});g.rawNode.setAttribute("class",c+"3");g.applyTransform({xx:-0.2177,yx:0.1947,xy:0.2037,
yy:0.2278,dx:19.4619,dy:18.75});f.applyTransform(dojox.gfx.matrix.translate(e.x+e.width-25,e.y+e.height-18));1!=a.scale&&(f.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,e.x+e.width,e.y)),f.applyTransform(dojox.gfx.matrix.translate(-e.width*(1-a.scale)/2,-e.height*(1-a.scale)/2)));a.scGFX=f;b||this._events.push(dojo.connect(f.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,a,!0)))},_getEntryByPath:function(a){for(var b,c=this;0<a.length;){var e=a.shift();b=!0;for(var f=0;f<
c.entries.length;f++)if(e==c.entries[f].id){c=c.entries[f];b=!1;break}if(b){console.error("_getEntryByPath: Child "+e+" not found");return}}return c},updateInfoUI:function(a,b){var c=this._getEntryByPath(a);c.newscount_old=c.newscount;c.newscount=b;this.createInfoUI(c)},buildSVGDefs:function(){for(var a=this.mainEntriesSurface.rawNode.getElementsByTagName("defs")[0],b=this.detailsSurface.rawNode.getElementsByTagName("defs")[0],c=0;c<this.defs.length;c++){var e=G_UI_COM.buildSVGDef(this.defs[c]);a.appendChild(e);
b.appendChild(e)}},_createEventRects:function(){this.detailsDim=dojo.position(this.detailsContainer);for(var a=0;a<this.entries.length;a++)if(0<this.entries[a].entries.length){var b=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect.setShape({x:b.x-this.detailsDim.w,y:b.y-this.detailsDim.h,width:b.width+2*this.detailsDim.w,height:b.height+2*this.detailsDim.h})}this._checkDetailsVisibility()},resizeSVGHandler:function(){if(1<this.entries.length)if(this.mainEntriesCP.set("style",
"width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width-1)+"px; overflow: hidden;"),setTimeout(function(){this.mainEntriesCP.set("style","width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width)+"px; overflow: hidden;")}.bind(this),0),this.mainEntriesContainerDim=dojo.position(this.mainEntriesContainer),this.mainEntriesBB.y+this.mainEntriesBB.height>this.mainEntriesContainerDim.h)if(this.mainEntriesMoveCtrl){var a=this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos-this.mainEntriesContainerDim.h;
0<a?(this._createMoveCtrlDown(),this._repositionMoveCtrlDown()):(this._removeMoveCtrlDown(),this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,-a)),this.mainEntriesPos-=a)}else this.mainEntriesMoveCtrl=!0,this._createMoveCtrlDown();else this.mainEntriesMoveCtrl&&(this._removeMoveCtrlDown(),this._removeMoveCtrlUp(),this.mainEntriesMoveCtrl=!1,this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,-this.mainEntriesPos)),this.mainEntriesPos=0);setTimeout(this._createEventRects.bind(this),
1)},_createMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX||(this.mainEntriesMoveCtrlDownGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlDownGFX.createRect({x:10,y:this.mainEntriesContainerDim.h-30,width:this.mainEntriesContainerDim.w-20,height:30}).setFill([0,0,0,0.5]),this.mainEntriesMoveCtrlDownGFX.createPolyline([{x:15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w-15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w/2,y:this.mainEntriesContainerDim.h-
5},{x:15,y:this.mainEntriesContainerDim.h-25}]).setFill("white"),this._repositionMoveCtrlDown(),this._events.push(dojo.connect(this.mainEntriesMoveCtrlDownGFX.getEventSource(),dojo.touch.press,this.mainEntriesMoveHandler.bind(this,-1))))},_createMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX||(this.mainEntriesMoveCtrlUpGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlUpGFX.createRect({x:10,y:0,width:this.mainEntriesContainerDim.w-20,height:30}).setFill([0,0,0,0.5]),this.mainEntriesMoveCtrlUpGFX.createPolyline([{x:15,
y:25},{x:this.mainEntriesContainerDim.w-15,y:25},{x:this.mainEntriesContainerDim.w/2,y:5},{x:15,y:25}]).setFill("white"),this._events.push(dojo.connect(this.mainEntriesMoveCtrlUpGFX.getEventSource(),dojo.touch.press,this.mainEntriesMoveHandler.bind(this,1))))},_removeMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX&&(this.mainEntriesMoveCtrlUpGFX.destroy(),this.mainEntriesMoveCtrlUpGFX=null)},_removeMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX&&(this.mainEntriesMoveCtrlDownGFX.destroy(),
this.mainEntriesMoveCtrlDownGFX=null)},_moveMainEntries:function(a){0>a?(this._createMoveCtrlUp(),this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos<=this.mainEntriesContainerDim.h&&(this._removeMoveCtrlDown(),this.mainEntriesMoveEndHandler())):(this._createMoveCtrlDown(),0<=this.mainEntriesPos&&(this._removeMoveCtrlUp(),this.mainEntriesMoveEndHandler()));this.mainEntriesMoveEndEvent&&(this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,a)),this.mainEntriesPos+=a,
setTimeout(this._moveMainEntries.bind(this,a),10))},mainEntriesMoveHandler:function(a){this.mainEntriesMoveEndEvent&&this.mainEntriesMoveEndHandler();this.mainEntriesMoveEndEvent=dojo.connect(document,dojo.touch.release,this.mainEntriesMoveEndHandler.bind(this));this._moveMainEntries(a)},mainEntriesMoveEndHandler:function(a){this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},_repositionMoveCtrlDown:function(){if(this.mainEntriesMoveCtrlDownGFX){var a=
this.mainEntriesMoveCtrlDownGFX.getTransformedBoundingBox()[2].y-this.mainEntriesContainerDim.h;0!=a&&this.mainEntriesMoveCtrlDownGFX.applyTransform(dojox.gfx.matrix.translate(0,-a))}},_centerGFX:function(a,b){var c=dojo.position(this.domNode),e=b.getTransformedBoundingBox();a.applyLeftTransform(dojox.gfx.matrix.translate(c.w/2-this.detailsDim.x-(e[1].x-e[0].x)/2-e[0].x,c.h/2-(e[2].y-e[1].y)/2-e[1].y))},resetDisplay:function(a){if(!this.animationRunning){this.animationRunning=!0;var b=this._centerAndScale(a,
a.detailScale);a.detailScale=1;this._events.push(dojo.connect(b,"onEnd",this.animationEnd.bind(this,a)))}},_centerAndScale:function(a,b){var c=dojo.position(this.domNode),e=a.entries[0].elementGFX.getTransformedBoundingBox();return(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,e[0].x+(e[1].x-e[0].x)/2,e[1].y+(e[2].y-e[1].y)/2],end:[1/b,c.w/2-this.detailsDim.x,c.h/2]},{name:"translate",start:[0,0],end:[c.w/
2-this.detailsDim.x-e[0].x-(e[1].x-e[0].x)/2,c.h/2-e[1].y-(e[2].y-e[1].y)/2]},{name:"original"}]})).play()},elementToggleCollapse:function(a){!this.animationRunning&&a.collapsed&&(this.animationRunning=!0,this._elementExpand(a,!0))},_elementExpand:function(a,b){a.childrenGroupMoveGFX.getTransformedBoundingBox();for(var c=0;c<this.entries.length;c++)this.entries[c].collapsed||this._elementCollapse(this.entries[c],!1);a.childrenGroupMoveGFX.rawNode.style.display="";c=this._centerAndScale(a,this.minimizedScale);
a.collapsed=!1;b&&(this._events.push(dojo.connect(c,"onEnd",this.animationEnd.bind(this,a))),this._events.push(dojo.connect(c,"onEnd",this.expandElementEnd.bind(this,a))))},_elementCollapse:function(a,b){var c=a.childrenGroupMoveGFX.getTransformedBoundingBox(),e=a.groupGFX.getTransformedBoundingBox(),f=dojo.position(this.mainEntriesContainer);e[0].x-=f.w;e[1].x-=f.w;c=(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",
start:[1,c[0].x+(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2],end:[this.minimizedScale,e[0].x+(e[1].x-e[0].x)/2,e[1].y+(e[2].y-e[1].y)/2]},{name:"translate",start:[0,0],end:[e[0].x+(e[1].x-e[0].x)/2-c[0].x-(c[1].x-c[0].x)/2,e[1].y+(e[2].y-e[1].y)/2-c[1].y-(c[2].y-c[1].y)/2]},{name:"original"}]})).play();a.collapsed=!0;this._events.push(dojo.connect(c,"onEnd",this.collapseElementEnd.bind(this,a)));b&&this._events.push(dojo.connect(c,"onEnd",this.animationEnd.bind(this,a)))},animationEnd:function(a){this.animationRunning=
!1},collapseElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapMainEntry");a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapMainEntry2")},expandElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapMainEntryPressed");a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapMainEntryPressed2")},elementOnClick:function(a,b,c){this.moving_||(new Date).getTime()-this.lastMove_<this.moveToClickTimeMin||
((c.preventDefault(),dojo.stopEvent(c),1!=a.path.length||b)?a.disabled||(b=a.sectionpath.sectionids instanceof Array?dojo.clone(a.sectionpath.sectionids):[a.sectionpath.sectionids],G_UI_COM.showSectionPathInProgress=!0,G_UI_COM.showSectionPath(a.sectionpath.basecontainerid,b,!1)||console.error("Could not resolve given section path: "+JSON.stringify(a.sectionpath))):this.elementToggleCollapse(a))}});dojo.declare("FIRMOS.gridPBColumn",null,{constructor:function(a){for(var b in a)this[b]=a[b]},renderCell:function(a,
b,c,e,f){c=new dijit.ProgressBar({style:"width: 100%"});c.set("value",b/this.maxValue*100);this.labelId&&c.set("label",a[this.labelId]+"");return c.domNode}});dojo.declare("FIRMOS.gridDetailsColumn",null,{constructor:function(){this.label="";this.className="dgrid-details";this.unhidable=!0;this._events=[];return this},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},renderCell:function(a,b,c,e,f){b=dojo.create("div");this.grid.detailsClassname||a._detailsfunc_&&a._funcclassname_?
(b.className="dgrid-details-closed",b.innerHTML="+",a=a&&this.grid.row(a),a._detailsOpen=!1,this._events.push(dojo.connect(b,"onclick",this.toggleDetails.bind(this,b,a)))):b.className="dgrid-details-none";return b},toggleDetails:function(a,b){b._detailsOpen?(a.className="dgrid-details-closed",a.innerHTML="+",this.grid.hideDetails(b)):(a.className="dgrid-details-open",a.innerHTML="-",this.grid.showDetails(b));b._detailsOpen=!b._detailsOpen},renderHeaderCell:function(a){return""}});dojo.declare("FIRMOS.OnDemandGrid",
[dgrid.OnDemandGrid,FIRMOS.GridBase,FIRMOS.Selection,FIRMOS.GridFilter,dgrid.Tree,dgrid.Editor,dgrid.ColumnResizer,FIRMOS.ColumnReorder,dgrid.ColumnHider,FIRMOS.GridDnD,dgrid.DijitRegistry]);dojo.declare("FIRMOS.SVG",dijit.layout.ContentPane,{postCreate:function(){this.inherited(arguments);this.set("content",this.svg);this.set("class","firmosSVGPanel");var a=this.containerNode.children;0<a.length&&(this.svgNode=a[0],this.svgNode.setAttribute("width","100%"),this.svgNode.setAttribute("height","100%"))},
updateElement:function(a,b,c){(a=dojo.byId(a,this.svgNode))&&a.setAttribute(b,c)}});dojo.declare("FIRMOS.Editor",dijit.layout.BorderContainer,{texts:G_TEXTS.editor,_editorStarted:!1,_savedContent:"",constructor:function(a){switch(a.contentType){case "ct_html":this.editorType="aloha";this.startEditAHandler=this.startEditA.bind(this);this.pauseEditAHandler=this.pauseEditA.bind(this);break;case "ct_javascript":case "ct_pascal":this.editorType="codemirror";this.startEditCMHandler=this.startEditCM.bind(this);
this.pauseEditCMHandler=this.pauseEditCM.bind(this);break;default:console.error("Unknown content type "+a.contentType)}this.readOnly=a.saveClass?!1:!0},destroy:function(){switch(this.editorType){case "aloha":$(Aloha,"body").unbind("aloha-editable-activated",this.startEditAHandler);$(Aloha,"body").unbind("aloha-editable-deactivated",this.pauseEditAHandler);break;case "codemirror":this.cm.off("focus",this.startEditCMHandler),this.cm.off("blur",this.pauseEditCMHandler)}this.editableContent&&this.editableContent.destroy();
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.editorCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.editorCP.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%; background-color:#fff; overflow-y:auto;" class="article"></div>');if(this.tbBottom){this.toolbar=new dijit.Toolbar({region:"bottom"});var a=""}else this.toolbar=new dijit.Toolbar({region:"top"}),a="float:right;";this.saveButton=new dijit.form.Button({label:this.texts.saveButton,
disabled:!0,onClick:this.save.bind(this),style:a});this.toolbar.addChild(this.saveButton);this.resetButton=new dijit.form.Button({label:this.texts.resetButton,disabled:!0,onClick:this.load.bind(this),style:a});this.toolbar.addChild(this.resetButton);this.addChild(this.toolbar);this.addChild(this.editorCP);setTimeout(this.startEditor.bind(this),0)},startEditor:function(){if(this.readOnly)this.readOnlyContent=dojo.byId(this.id+"_container"),dojo.addClass(this.readOnlyContent,"aloha-editable");else switch(this.editorType){case "aloha":$("#"+
this.id+"_container").aloha();this.editableContent=Aloha.getEditableById(this.id+"_container");Aloha.bind("aloha-editable-activated",this.startEditAHandler);Aloha.bind("aloha-editable-deactivated",this.pauseEditAHandler);break;case "codemirror":this.cm=CodeMirror(dojo.byId(this.id+"_container"),{lineNumbers:!0,mode:this.contentType.substring(3)});this.cm.on("focus",this.startEditCMHandler);this.cm.on("blur",this.pauseEditCMHandler);break;default:return}this.load()},loadCallback:function(a,b,c,e){b?
""!=c.output&&(a=dojo.fromJson(c.output),this._savedContent=a.value,this.setValue(a.value)):c.output&&(a=dojo.fromJson(c.output),a.action&&eval(a.action))},getValue:function(){switch(this.editorType){case "aloha":return this.editableContent.getContents();case "codemirror":return this.cm.getValue()}},setValue:function(a){if(this.readOnly)this.readOnlyContent.innerHTML=a;else switch(this.editorType){case "aloha":this.editableContent&&this.editableContent.setContents(a);break;case "codemirror":this.cm.setValue(a)}},
startEdit:function(){this._editorStarted||(this.saveButton.set("disabled",!1),this.resetButton.set("disabled",!1),this.startEditClass&&G_SERVER_COM.callServerFunction(this.startEditClass,this.startEditFunc,this.startEditUidPath,this.startEditParams),this._editorStarted=!0)},pauseEdit:function(){this._editorStarted&&this.getValue()==this._savedContent&&this.stopEdit()},startEditCM:function(a){this.startEdit()},pauseEditCM:function(a){this.pauseEdit()},startEditA:function(a,b){b.editable.getId()==this.id+
"_container"&&this.startEdit()},pauseEditA:function(a,b){b.editable.getId()==this.id+"_container"&&this.pauseEdit()},stopEdit:function(){this._editorStarted&&(this.stopEditClass&&G_SERVER_COM.callServerFunction(this.stopEditClass,this.stopEditFunc,this.stopEditUidPath,this.stopEditParams),this.saveButton.set("disabled",!0),this.resetButton.set("disabled",!0),this._editorStarted=!1)},save:function(){this.stopEdit();var a=dojo.clone,a=dojo.clone(this.saveParams);a.content=this.getValue();this._savedContent=
a.content;G_SERVER_COM.callServerFunction(this.saveClass,this.saveFunc,this.saveUidPath,a)},load:function(){this.stopEdit();G_SERVER_COM.callServerFunction(this.loadClass,this.loadFunc,this.loadUidPath,this.loadParams,this.loadCallback.bind(this))}});dojo.declare("FIRMOS.Shell",dijit.layout.ContentPane,{postCreate:function(){this.set("content",'<iframe id="'+this.id+'_frame" src="'+this.protocol+"://"+this.host+":"+this.port+this.path+'" style="width:100%; height:100%;">Iframe not supported.</iframe>');
this.set("style","overflow: hidden;");this.inherited(arguments)}});dojo.declare("FIRMOS.Horde",dijit.layout.ContentPane,{constructor:function(a){for(var b in a)this[b]=a[b];this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},postCreate:function(){this.set("content",'<div style="display: none;"><form id="'+this.id+'_form" action="'+this.protocol+"://"+this.host+":"+this.port+'/login.php" method="post" target="'+this.id+'_frame"><input name="login_post" value="1"></input><input name="horde_pass" value="KNOXdata"></input><input name="horde_user" value="test@demo.styriacloud.net"></input></form></div><iframe id="'+
this.id+'_frame" name="'+this.id+'_frame" style="width:100%; height:100%;"></iframe>');this.set("style","overflow: hidden");this.inherited(arguments);setTimeout(this._connect.bind(this),0)},_connect:function(){dojo.byId(this.id+"_form").submit()}});dojo.declare("FIRMOS.VNC",dijit.layout.BorderContainer,{texts:G_TEXTS.vnc,constructor:function(a){this.ws=null;this.state="disconnected";this.container=this.canvas=null;this.securityType=0;this.serverSettings={};this.tileImage=this.context=null;this.mouseButtonState=
0;this.intervalId=this.mouseCoords=null;this.scale=1;this.isActive=!1;this._events=[]},destroy:function(){this.disconnect();this.inherited(arguments)},postCreate:function(){this.vncCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.vncCP.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%;"><canvas  class="firmosVNCInactive" tabindex="0" id="'+this.id+'_vnc" style="width:0px; height:0px; cursor: none;">Canvas not supported.</canvas></div>');this.vncCP.set("style",
"overflow: hidden;");this.toolbar=new dijit.Toolbar({region:"top"});this.cadButton=new dijit.form.Button({label:this.texts.cadButton,onClick:this.sendCAD.bind(this)});this.toolbar.addChild(this.cadButton);this.wakeUpButton=new dijit.form.Button({label:this.texts.wakeUpButton,disabled:!0,onClick:this.wakeUp.bind(this)});this.toolbar.addChild(this.wakeUpButton);this.mountButton=new dijit.form.Button({label:this.texts.mountButton,disabled:!0,onClick:this.mountISO.bind(this)});this.toolbar.addChild(this.mountButton);
this.addChild(this.toolbar);this.addChild(this.vncCP);this.inherited(arguments);setTimeout(this.connect.bind(this),0)},sendCAD:function(){this.ws.send((new Uint8Array([4,1,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,1,0,0,0,0,255,233])).buffer);this.ws.send((new Uint8Array([4,1,0,0,0,0,255,255])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,233])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,255])).buffer)},
wakeUp:function(){},mountISO:function(){},stopEvent:function(a){dojo.stopEvent(a);a.preventDefault();a.stopPropagation();return!1},visibilityChange:function(a){a?this.connect():this.disconnect()},disconnect:function(){if("disconnected"!=this.state){this.canvas.style.width="0px";for(this.canvas.style.height="0px";0<this._events.length;)dojo.disconnect(this._events.pop());this.ws.onopen=null;this.ws.onmessage=null;this.ws.onerror=null;this.ws.close();this.ws=null;this.state="disconnected"}},connect:function(){this.state=
"connecting";this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-VC|"+this.host+"|"+this.port);this.ws.binaryType="arraybuffer";this.ws.onopen=this.wsOpenListener.bind(this);this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.canvas=dojo.byId(this.id+"_vnc");this.container=dojo.byId(this.id+"_container");this.context=this.canvas.getContext("2d");
this._events.push(dojo.connect(this.canvas,"onmousemove",this.mouseMoveListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmousedown",this.mouseDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseup",this.mouseUpListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onclick",this.mouseClickListener.bind(this)));this._events.push(dojo.connect(this.canvas,"oncontextmenu",this.contextMenuListener.bind(this)));this._events.push(dojo.connect(this.canvas,
"onmouseenter",this.mouseEnter.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseout",this.mouseOut.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeydown",this.keyDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeyup",this.keyUpListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeypress",this.keyPressListener.bind(this)));this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)));this.intervalId&&window.clearInterval(this.intervalId);
this.intervalId=window.setInterval(this.sendMouseCoords.bind(this),40);this.ws.onclose=this.wsCloseListener.bind(this)},decodeMessage2String:function(a){a=new Uint8Array(a);for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},encodeString2Message:function(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},byteArray2String:function(a,b,c){c=c||a.length;var e="";for(b=b||0;b<c;b++)e+=String.fromCharCode(a[b]);return e},applyScale:function(){var a=
dojo.position(this.container);a.w-=2;a.h-=2;if(a.w<this.serverSettings.width||a.h<this.serverSettings.height)this.scale=this.serverSettings.width/this.serverSettings.height>a.w/a.h?a.w/this.serverSettings.width:a.h/this.serverSettings.height;this.canvas.style.width=Math.floor(this.serverSettings.width*this.scale)+"px";this.canvas.style.height=Math.floor(this.serverSettings.height*this.scale)+"px"},wsMessageListener:function(a){switch(this.state){case "init":a=this.decodeMessage2String(a.data);switch(a){case "RFB 003.008\n":this.vncVersion=
3.8;this.state="security";this.ws.send(this.encodeString2Message(a));break;default:console.error('Version "'+a+'" not supported'),this.ws.close()}break;case "security":var b=new Uint8Array(a.data);0==b[0]&&(console.error("Got no valid security type"),this.ws.close());for(a=0;a<b[0];a++)1==b[a]&&(this.securityType=b[a]);switch(this.securityType){case 0:console.error("Got no valid security type");this.ws.close();break;case 1:this.state="securityResult";this.ws.send((new Uint8Array([this.securityType])).buffer);
break;case 2:console.error("VNC Authentication not supported"),this.ws.close()}break;case "securityResult":a=new Uint8Array(a.data);0!=(a[0]||a[1]||a[2]||a[3])?(console.error("Security handshake failed"),this.ws.close()):(this.state="serverInit",this.ws.send((new Uint8Array([1])).buffer));break;case "serverInit":a=new Uint8Array(a.data);this.serverSettings.width=256*a[0]+a[1];this.serverSettings.height=256*a[2]+a[3];this.applyScale();this.serverSettings.bitPerPixel=a[4];32!=this.serverSettings.bitPerPixel&&
console.error("Only True Color supported");this.serverSettings.depth=a[5];this.serverSettings.bigEndianFlag=a[6];this.serverSettings.trueColorFlag=a[7];this.serverSettings.redMax=256*a[8]+a[9];this.serverSettings.greenMax=256*a[10]+a[11];this.serverSettings.blueMax=256*a[12]+a[13];this.serverSettings.redShift=a[14];this.serverSettings.greenShift=a[15];this.serverSettings.blueShift=a[16];this.serverSettings.name=this.byteArray2String(a,24+256*(256*(256*a[20]+a[21])+a[22])+a[23]);this.state="connected";
this.tileImage=this.context.createImageData(16,16);this.canvas.width=this.serverSettings.width;this.canvas.height=this.serverSettings.height;this.ws.send((new Uint8Array([0,0,0,0,32,24,0,1,0,255,0,255,0,255,16,8,0,0,0,0])).buffer);this.ws.send((new Uint8Array([2,0,0,3,0,0,0,1,0,0,0,5,0,0,0,0])).buffer);this.ws.send((new Uint8Array([3,0,0,0,0,0,a[0],a[1],a[2],a[3]])).buffer);break;case "connected":b=new Uint8Array(a.data);switch(b[0]){case 0:var c=256*b[2]+b[3];if(0==c)break;var e=4;for(a=0;a<c;a++){var f=
256*b[e]+b[e+1],g=256*b[e+2]+b[e+3],k=256*b[e+4]+b[e+5],l=256*b[e+6]+b[e+7],e=e+8,m=b[e+3],e=e+4;switch(m){case 0:e=this.handleRaw(b,f,g,k,l,e);break;case 1:e=this.handleCopyrect(b,f,g,k,l,e);break;case 5:e=this.handleHextile(b,f,g,k,l,e);break;case 252:e=this.handleTightPng(b,f,g,k,l,e);break;default:console.error("Unknown Encoding "+b[12]+"-"+b[13]+"-"+b[14]+"-"+b[15])}}break;default:console.warn("Unknown Server Message "+b[0])}break;case "disconnected":break;default:console.error("State "+this.state+
" not implemented")}},reconnect:function(){console.log("RECONNECT!!!");this.disconnect()},_getMouseXY:function(a){for(var b=this.canvas,c=[0,0];b.offsetParent;)c[0]=c[0]+b.offsetLeft-b.scrollLeft,c[1]=c[1]+b.offsetTop-b.scrollTop,b=b.offsetParent;c[0]=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-c[0];c[1]=a.clientY+document.body.scrollTop+document.documentElement.scrollTop-c[1];c[0]/=this.scale;c[1]/=this.scale;return c},sendMouseCoords:function(){this.mouseCoords&&(this.ws.send((new Uint8Array([5,
this.mouseButtonState,this.mouseCoords[0]>>8,this.mouseCoords[0]&255,this.mouseCoords[1]>>8,this.mouseCoords[1]&255])).buffer),this.mouseCoords=null)},mouseEnter:function(a){this.canvas.focus();dojo.addClass(this.canvas,"firmosVNCActive");dojo.removeClass(this.canvas,"firmosVNCInactive");this.isActive=!0},mouseOut:function(a){dojo.addClass(this.canvas,"firmosVNCInactive");dojo.removeClass(this.canvas,"firmosVNCActive");this.isActive=!1},mouseMoveListener:function(a){this.isActive||this.mouseEnter(a);
this.mouseCoords=this._getMouseXY(a)},mouseDownListener:function(a){this.mouseButtonState|=1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseUpListener:function(a){this.mouseButtonState^=1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseClickListener:function(a){return!1},contextMenuListener:function(a){return!1},
getSpecialKeyCode:function(a){switch(a.keyCode){case 8:return 65288;case 9:return 65289;case 13:return 65293;case 27:return 65307;case 45:return 65379;case 46:return 65535;case 36:return 65360;case 35:return 65367;case 33:return 65365;case 34:return 65366;case 37:return 65361;case 38:return 65362;case 39:return 65363;case 40:return 65364;case 112:return 65470;case 113:return 65471;case 114:return 65472;case 115:return 65473;case 116:return 65474;case 117:return 65475;case 118:return 65476;case 119:return 65477;
case 120:return 65478;case 121:return 65479;case 122:return 65480;case 123:return 65481;case 16:return 65505;case 17:return 65507;case 18:return 65406}return 0},keyDownListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);0!=b&&(this.stopEvent(a),this.ws.send((new Uint8Array([4,1,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyUpListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);b&&(this.stopEvent(a),this.ws.send((new Uint8Array([4,0,0,0,b>>24&
255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyPressListener:function(a){if(this.isActive)return 0!=a.which&&0!=a.charCode&&(this.stopEvent(a),a=0<a.charCode?[a.charCode>>24&255,a.charCode>>16&255,a.charCode>>8&255,a.charCode&255]:[a.which>>24&255,a.which>>16&255,a.which>>8&255,a.which&255],this.ws.send((new Uint8Array([4,1,0,0,a[0],a[1],a[2],a[3],4,0,0,0,a[0],a[1],a[2],a[3]])).buffer)),!1},handleCopyrect:function(a,b,c,e,f,g){var k=256*a[g]+a[g+1];g+=2;a=256*a[g]+a[g+1];g+=2;this.context.drawImage(this.canvas,
k,a,e,f,b,c,e,f);return g},handleRaw:function(a,b,c,e,f,g){for(var k=this.context.createImageData(e,f),l,m,p=0;p<e*f;p++)l=4*p,m=l+g,k.data[l]=a[m+2],k.data[l+1]=a[m+1],k.data[l+2]=a[m],k.data[l+3]=255;this.context.putImageData(k,b,c);return m+4},handleHextile:function(a,b,c,e,f,g){for(var k=Math.ceil(e/16),l=Math.ceil(f/16),m=[0,0,0,255],p=[0,0,0,255],q=[0,0,0,255],r,s=0;s<l;s++)for(var t=0;t<k;t++){r=a[g];g++;var u=16,q=16;s==l-1&&(q=16-(16*l-f));t==k-1&&(u=16-(16*k-e));var Z=u*q;if(0==r)this.context.fillStyle=
"rgb("+m[2]+","+m[1]+","+m[0]+")",this.context.fillRect(b+16*t,c+16*s,u,q);else if(r&1){var N,x;r=256==Z?this.tileImage:this.context.createImageData(u,q);for(u=0;u<Z;u++)N=4*u,x=N+g,r.data[N]=a[x+2],r.data[N+1]=a[x+1],r.data[N+2]=a[x],r.data[N+3]=255;this.context.putImageData(r,b+16*t,c+16*s);g=x+4}else if(r&2&&(m=[a[g],a[g+1],a[g+2],a[g+3]],g+=4),r&4&&(p=[a[g],a[g+1],a[g+2],a[g+3]],g+=4),Z=b+16*t,N=c+16*s,this.context.fillStyle="rgb("+m[2]+","+m[1]+","+m[0]+")",this.context.fillRect(Z,N,u,q),r&8){var K=
a[g];g++;for(u=0;u<K;u++){r&16?(q=[a[g],a[g+1],a[g+2],a[g+3]],g+=4):q=p;var G=a[g]>>4,Q=a[g]&15;g++;var S=(a[g]>>4)+1,ha=(a[g]&15)+1;g++;this.context.fillStyle="rgb("+q[2]+","+q[1]+","+q[0]+")";this.context.fillRect(Z+G,N+Q,S,ha)}}}return g},wsErrorListener:function(a){console.error("wsError "+JSON.stringify(a));this.reconnect()},wsCloseListener:function(){this.state="disconnected";this.intervalId&&window.clearInterval(this.intervalId)},wsOpenListener:function(){this.state="init"}})});window.CodeMirror=function(){function r(a,b){if(!(this instanceof r))return new r(a,b);this.options=b=b||{};for(var c in Le)!b.hasOwnProperty(c)&&Le.hasOwnProperty(c)&&(b[c]=Le[c]);g(b);c=this.display=u(a,"string"==typeof b.value?0:b.value.first);c.wrapper.CodeMirror=this;f(this);b.autofocus&&!ef&&ca(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Cd};m(this);b.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");var d=b.value;"string"==typeof d&&(d=new Ib(b.value,b.mode));sa(this,Ve)(this,d);Yb&&setTimeout(uc(pa,this,!0),20);cb(this);var e;try{e=document.activeElement==c.input}catch(k){}e||b.autofocus&&!ef?setTimeout(uc(Sa,this),20):ab(this);sa(this,function(){for(var a in ld)if(ld.propertyIsEnumerable(a))ld[a](this,b[a],jf);for(a=0;a<Me.length;++a)Me[a](this)})()}function u(a,b){var c={},d=c.input=qa("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
Lb?d.style.width="1000px":d.setAttribute("wrap","off");je&&(d.style.border="1px solid black");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");c.inputDiv=qa("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=qa("div",[qa("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=qa("div",[qa("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=qa("div",null,"CodeMirror-scrollbar-filler");
c.gutterFiller=qa("div",null,"CodeMirror-gutter-filler");c.lineDiv=qa("div",null,"CodeMirror-code");c.selectionDiv=qa("div",null,null,"position: relative; z-index: 1");c.cursor=qa("div","\u00a0","CodeMirror-cursor");c.otherCursor=qa("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=qa("div",null,"CodeMirror-measure");c.lineSpace=qa("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=qa("div",[qa("div",[c.lineSpace],
"CodeMirror-lines")],null,"position: relative");c.sizer=qa("div",[c.mover],"CodeMirror-sizer");c.heightForcer=qa("div",null,null,"position: absolute; height: "+dc+"px; width: 1px;");c.gutters=qa("div",null,"CodeMirror-gutters");c.lineGutter=null;c.scroller=qa("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=qa("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror");Kd&&(c.gutters.style.zIndex=
-1,c.scroller.style.paddingRight=0);a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);je&&(d.style.width="0px");Lb||(c.scroller.draggable=!0);df?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):Kd&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new Cd;c.cachedCharWidth=c.cachedTextHeight=null;
c.measureLineCache=[];c.measureLineCachePos=0;c.inaccurateSelection=!1;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=!1;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function s(a){a.doc.mode=r.getMode(a.options,a.doc.modeOption);t(a)}function t(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;N(a,100);a.state.modeGen++;a.curOp&&Ia(a)}function l(a){var b=oa(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/
ka(a.display)-3);return function(e){return Jc(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function b(a){var b=a.doc,c=l(a);b.iter(function(a){var b=c(a);b!=a.height&&hc(a,b)})}function p(a){var b=Gc[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function m(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");U(a)}function k(a){f(a);
Ia(a);setTimeout(function(){d(a)},20)}function f(a){var b=a.display.gutters,c=a.options.gutters;jc(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(qa("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function c(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=Cc(e,!0);)d=d.find(),e=ta(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=Aa(e);)d=d.find(),c-=e.text.length-
d.from.ch,e=ta(a,d.to.line),c+=e.text.length-d.to.ch;return c}function e(a){var b=a.display,d=a.doc;b.maxLine=ta(d,d.first);b.maxLineLength=c(d,b.maxLine);b.maxLineChanged=!0;d.iter(function(a){var e=c(d,a);e>b.maxLineLength&&(b.maxLineLength=e,b.maxLine=a)})}function g(a){var b=pc(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function q(a){var b=a.display,c=
a.doc.height+(b.mover.offsetHeight-b.lineSpace.offsetHeight);b.sizer.style.minHeight=b.heightForcer.style.top=c+"px";b.gutters.style.height=Math.max(c,b.scroller.clientHeight-dc)+"px";var c=Math.max(c,b.scroller.scrollHeight),d=b.scroller.scrollWidth>b.scroller.clientWidth+1,e=c>b.scroller.clientHeight+1;e?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=d?Hd(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=c-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):(b.scrollbarV.style.display=
"",b.scrollbarV.firstChild.style.height="0");d?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=e?Hd(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):(b.scrollbarH.style.display="",b.scrollbarH.firstChild.style.width="0");d&&e?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=Hd(b.measure)+"px"):b.scrollbarFiller.style.display="";d&&a.options.coverGutterNextToScrollbar&&
a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=Hd(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="";og&&0===Hd(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=ng?"18px":"12px",b.scrollbarV.style.pointerEvents=b.scrollbarH.style.pointerEvents="none")}function a(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-
a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Mc(b,d),to:Mc(b,a)}}function d(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=y(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,k=f.alignable;g<k.length;++g)k[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function n(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=v(a.options,b.first+
b.size-1);a=a.display;if(b.length!=a.lineNumChars){var c=a.measure.appendChild(qa("div",[qa("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function v(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}
function y(a){return gb(a.scroller).left-gb(a.sizer).left}function A(b,c,d,e){for(var f=b.display.showingFrom,g=b.display.showingTo,k,l=a(b.display,b.doc,d),m=!0;;m=!1){var n=b.display.scroller.clientWidth;if(!z(b,c,l,e))break;k=!0;c=[];T(b);q(b);if(m&&b.options.lineWrapping&&n!=b.display.scroller.clientWidth)e=!0;else if(e=!1,d&&(d=Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,"number"==typeof d?d:d.top)),l=a(b.display,b.doc,d),l.from>=b.display.showingFrom&&l.to<=b.display.showingTo)break}k&&
(Xb(b,"update",b),b.display.showingFrom==f&&b.display.showingTo==g||Xb(b,"viewportChange",b,b.display.showingFrom,b.display.showingTo));return k}function z(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.offsetWidth)e.showingFrom=e.showingTo=f.first,e.viewOffset=0;else if(d||!(0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){n(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";g=Infinity;if(a.options.lineNumbers)for(var k=
0;k<b.length;++k)b[k].diff&&b[k].from<g&&(g=b[k].from);var k=f.first+f.size,l=Math.max(c.from-a.options.viewportMargin,f.first);c=Math.min(k,c.to+a.options.viewportMargin);e.showingFrom<l&&20>l-e.showingFrom&&(l=Math.max(f.first,e.showingFrom));e.showingTo>c&&20>e.showingTo-c&&(c=Math.min(k,e.showingTo));if(jd)for(l=ic(rc(f,ta(f,l)));c<k&&Jc(f,ta(f,c));)++c;var m=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,k)}],m=m[0].from>=m[0].to?[]:E(m,b);if(jd)for(k=0;k<m.length;++k){b=m[k];
for(var p;p=Aa(ta(f,b.to-1));)if(p=p.find().from.line,p>b.from)b.to=p;else{m.splice(k--,1);break}}for(k=f=0;k<m.length;++k)b=m[k],b.from<l&&(b.from=l),b.to>c&&(b.to=c),b.from>=b.to?m.splice(k--,1):f+=b.to-b.from;if(d||f!=c-l||l!=e.showingFrom||c!=e.showingTo){m.sort(function(a,b){return a.from-b.from});try{var q=document.activeElement}catch(r){}f<0.7*(c-l)&&(e.lineDiv.style.display="none");H(a,l,c,m,g);e.lineDiv.style.display="";q&&document.activeElement!=q&&q.offsetHeight&&q.focus();if(l!=e.showingFrom||
c!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight)e.lastSizeC=e.wrapper.clientHeight,N(a,400);e.showingFrom=l;e.showingTo=c;e.gutters.style.height="";B(a);C(a);return!0}C(a)}}function B(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=a.lineDiv.firstChild,d;c;c=c.nextSibling)if(c.lineObj){if(Kd){var e=c.offsetTop+c.offsetHeight;d=e-b;b=e}else d=gb(c),d=d.bottom-d.top;e=c.lineObj.height-d;2>d&&(d=oa(a));if(0.001<e||-0.001>e)if(hc(c.lineObj,d),d=c.lineObj.widgets)for(e=0;e<d.length;++e)d[e].height=
d[e].node.offsetHeight}}function C(a){var b=a.display.viewOffset=Ad(a,ta(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function E(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,k=0,l=a.length;k<l;++k){var m=a[k];e.to<=m.from&&e.diff?f.push({from:m.from+g,to:m.to+g}):e.to<=m.from||e.from>=m.to?f.push(m):(e.from>m.from&&f.push({from:m.from,to:e.from}),e.to<m.to&&f.push({from:e.to+g,to:m.to+g}))}a=f}return a}function D(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,
f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:y(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function H(a,b,c,d,e){function f(b){var c=b.nextSibling;Lb&&Yc&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b);return c}var g=D(a),k=a.display,l=a.options.lineNumbers;d.length||Lb&&a.display.currentWheelTarget||jc(k.lineDiv);
var m=k.lineDiv,n=m.firstChild,p=d.shift(),q=b;for(a.doc.iter(b,c,function(b){p&&p.to==q&&(p=d.shift());if(Jc(a.doc,b)){if(0!=b.height&&hc(b,0),b.widgets&&n&&n.previousSibling)for(var c=0;c<b.widgets.length;++c){var k=b.widgets[c];if(k.showIfHidden){var r=n.previousSibling;if(/pre/i.test(r.nodeName)){var W=qa("div",null,null,"position: relative");r.parentNode.replaceChild(W,r);W.appendChild(r);r=W}W=r.appendChild(qa("div",[k.node],"CodeMirror-linewidget"));k.handleMouseEvents||(W.ignoreEvents=!0);
L(k,W,r,g)}}}else if(p&&p.from<=q&&p.to>q){for(;n.lineObj!=b;)n=f(n);l&&e<=q&&n.lineNumber&&Wc(n.lineNumber,v(a.options,q));n=n.nextSibling}else{if(b.widgets)for(var W=0,s=n;s&&20>W;++W,s=s.nextSibling)if(s.lineObj==b&&/div/i.test(s.nodeName)){c=s;break}var W=a,t=q,u=c,Ba=Wd(W,b),s=Ba.pre,x=b.gutterMarkers,y=W.display,z=Ba.bgClass?Ba.bgClass+" "+(b.bgClass||""):b.bgClass;if(W.options.lineNumbers||x||z||b.wrapClass||b.widgets){if(u){u.alignable=null;for(var A=!0,B=0,C=null,D=u.firstChild,E;D;D=E)if(E=
D.nextSibling,/\bCodeMirror-linewidget\b/.test(D.className)){for(Ba=0;Ba<b.widgets.length;++Ba){var Mb=b.widgets[Ba];if(Mb.node==D.firstChild){Mb.above||C||(C=D);L(Mb,D,u,g);++B;break}}if(Ba==b.widgets.length){A=!1;break}}else u.removeChild(D);u.insertBefore(s,C);A&&B==b.widgets.length&&(k=u,u.className=b.wrapClass||"")}k||(k=qa("div",null,b.wrapClass,"position: relative"),k.appendChild(s));z&&k.insertBefore(qa("div",null,z+" CodeMirror-linebackground"),k.firstChild);if(W.options.lineNumbers||x)if(r=
k.insertBefore(qa("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(W.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),s),W.options.fixedGutter&&(k.alignable||(k.alignable=[])).push(r),!W.options.lineNumbers||x&&x["CodeMirror-linenumbers"]||(k.lineNumber=r.appendChild(qa("div",v(W.options,t),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+y.lineNumInnerWidth+"px"))),x)for(Ba=0;Ba<W.options.gutters.length;++Ba)Mb=
W.options.gutters[Ba],(t=x.hasOwnProperty(Mb)&&x[Mb])&&r.appendChild(qa("div",[t],"CodeMirror-gutter-elt","left: "+g.gutterLeft[Mb]+"px; width: "+g.gutterWidth[Mb]+"px"));Kd&&(k.style.zIndex=2);if(b.widgets&&k!=u)for(Ba=0,u=b.widgets;Ba<u.length;++Ba)Mb=u[Ba],x=qa("div",[Mb.node],"CodeMirror-linewidget"),Mb.handleMouseEvents||(x.ignoreEvents=!0),L(Mb,x,k,g),Mb.above?k.insertBefore(x,W.options.lineNumbers&&0!=b.height?r:s):k.appendChild(x),Xb(Mb,"redraw")}else k=s;if(k!=c)m.insertBefore(k,n);else{for(;n!=
c;)n=f(n);n=n.nextSibling}k.lineObj=b}++q});n;)n=f(n)}function L(a,b,c,d){a.noHScroll&&((c.alignable||(c.alignable=[])).push(b),c=d.wrapperWidth,b.style.left=d.fixedPos+"px",a.coverGutter||(c-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=c+"px");a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function T(a){var b=a.display,c=Da(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=
a.display,e=fa(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=e.other.top+"px",d.otherCursor.style.height=0.85*(e.other.bottom-e.other.top)+"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";c?b.selectionDiv.style.display=
"none":I(a);a.options.moveInputWithCursor&&(a=fa(a,a.doc.sel.head,"div"),c=gb(b.wrapper),d=gb(b.lineDiv),b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px")}function I(a){function b(a,c,d,e){0>c&&(c=0);g.appendChild(qa("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+c+"px; width: "+(null==d?k-a:d)+"px; height: "+(e-c)+"px"))}function c(d,
f,g){var m=ta(e,d),n=m.text.length,p,q;jg(sc(m),f||0,null==g?n:g,function(c,e,r){var s=X(a,ga(d,c),"div",m,"left"),t,u;c==e?(t=s,r=u=s.left):(t=X(a,ga(d,e-1),"div",m,"right"),"rtl"==r&&(r=s,s=t,t=r),r=s.left,u=t.right);null==f&&0==c&&(r=l);3<t.top-s.top&&(b(r,s.top,null,s.bottom),r=l,s.bottom<t.top&&b(r,s.bottom,null,t.top));null==g&&e==n&&(u=k);if(!p||s.top<p.top||s.top==p.top&&s.left<p.left)p=s;if(!q||t.bottom>q.bottom||t.bottom==q.bottom&&t.right>q.right)q=t;r<l+1&&(r=l);b(r,t.top,u-r,t.bottom)});
return{start:p,end:q}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),k=d.lineSpace.offsetWidth,l=vc(a.display.measure,qa("pre",null,null,"text-align: left")).appendChild(qa("span","x")).offsetLeft;if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var m=ta(e,f.from.line),n=ta(e,f.to.line),n=rc(e,m)==rc(e,n),m=c(f.from.line,f.from.ch,n?m.text.length:null).end,f=c(f.to.line,n?0:null,f.to.ch).start;n&&(m.top<f.top-2?(b(m.right,m.top,null,m.bottom),b(l,f.top,f.left,
f.bottom)):b(m.right,m.top,f.left-m.right,m.bottom));m.bottom<f.top&&b(l,m.bottom,null,f.top)}vc(d.selectionDiv,g);d.selectionDiv.style.display=""}function Z(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";0<a.options.cursorBlinkRate&&(b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function N(a,b){a.doc.mode.startState&&a.doc.frontier<
a.display.showingTo&&a.state.highlight.set(b,uc(x,a))}function x(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.showingTo)){var c=+new Date+a.options.workTime,d=fc(b.mode,G(a,b.frontier)),e=[],f;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var k=g.styles;g.styles=Lc(a,g,d,!0);for(var l=!k||k.length!=g.styles.length,m=0;!l&&m<k.length;++m)l=k[m]!=g.styles[m];l&&(f&&f.end==b.frontier?f.end++:
e.push(f={start:b.frontier,end:b.frontier+1}));g.stateAfter=fc(b.mode,d)}else sb(a,g.text,d),g.stateAfter=0==b.frontier%5?fc(b.mode,d):null;++b.frontier;if(+new Date>c)return N(a,a.options.workDelay),!0});e.length&&sa(a,function(){for(var a=0;a<e.length;++a)Ia(this,e[a].start,e[a].end)})()}}function K(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var k=ta(f,b-1);if(k.stateAfter&&(!c||b<=f.frontier))return b;k=Fc(k.text,null,a.options.tabSize);
if(null==e||d>k)e=b-1,d=k}return e}function G(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=K(a,b,c),g=f>d.first&&ta(d,f-1).stateAfter,g=g?fc(d.mode,g):gc(d.mode);d.iter(f,b,function(c){sb(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.showingFrom&&f<e.showingTo?fc(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Q(a,b,c,d,e){var f=-1;d=d||ba(a,b);if(d.crude)return c=d.left+c*d.width,{left:c,right:c+d.width,top:d.top,bottom:d.bottom};for(a=c;;a+=f){var g=d[a];if(g)break;
0>f&&0==a&&(f=1)}e=a>c?"left":a<c?"right":e;"left"==e&&g.leftSide?g=g.leftSide:"right"==e&&g.rightSide&&(g=g.rightSide);return{left:a<c?g.right:g.left,right:a>c?g.left:g.right,top:g.top,bottom:g.bottom}}function S(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.wrapClass)return e}}function ha(a,b){var c=S(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function ba(a,
b){var c=S(a,b);if(c)return c.measure;var c=V(a,b),d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e);return c}function V(a,b){function c(a){var b=a.top-r.top,d=a.bottom-r.top;d>t&&(d=t);0>b&&(b=0);for(var e=s.length-2;0<=e;e-=2){var f=s[e],g=s[e+1];if(!(f>d||g<b)&&(f<=b&&g>=d||b<=f&&d>=g||Math.min(d,g)-Math.max(b,f)>=d-b>>1)){s[e]=Math.min(b,
f);s[e+1]=Math.max(d,g);break}}0>e&&(e=s.length,s.push(b,d));return{left:a.left-r.left,right:a.right-r.left,top:e,bottom:null}}function d(a){a.bottom=s[a.top+1];a.top=s[a.top]}if(!a.options.lineWrapping&&b.text.length>=a.options.crudeMeasuringFrom)return M(a,b);var e=a.display,f=xf(b.text.length),g=Wd(a,b,f,!0).pre;if(Yb&&!Kd&&!a.options.lineWrapping&&100<g.childNodes.length){for(var k=document.createDocumentFragment(),l=g.childNodes.length,m=0,n=Math.ceil(l/10);m<n;++m){for(var p=qa("div",null,null,
"display: inline-block"),q=0;10>q&&l;++q)p.appendChild(g.firstChild),--l;k.appendChild(p)}g.appendChild(k)}vc(e.measure,g);var r=gb(e.lineDiv),s=[],k=xf(b.text.length),t=g.offsetHeight;Zb&&e.measure.first!=g&&vc(e.measure,g);for(m=0;m<f.length;++m)if(e=f[m])g=e,l=null,/\bCodeMirror-widget\b/.test(e.className)&&e.getClientRects&&(1==e.firstChild.nodeType&&(g=e.firstChild),n=g.getClientRects(),1<n.length&&(l=k[m]=c(n[0]),l.rightSide=c(n[n.length-1]))),l||(l=k[m]=c(gb(g))),e.measureRight&&(l.right=gb(e.measureRight).left-
r.left),e.leftSide&&(l.leftSide=c(gb(e.leftSide)));jc(a.display.measure);for(m=0;m<k.length;++m)if(e=k[m])d(e),e.leftSide&&d(e.leftSide),e.rightSide&&d(e.rightSide);return k}function M(a,b){var c=new Oc(b.text.slice(0,100),null);b.textClass&&(c.textClass=b.textClass);var d=V(a,c),e=Q(a,c,0,d,"left"),c=Q(a,c,99,d,"right");return{crude:!0,top:e.top,left:e.left,bottom:e.bottom,width:(c.right-e.left)/100}}function U(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=
a.display.cachedTextHeight=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function J(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=yd(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Ad(a,b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=gb(a.display.lineSpace),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),
d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function aa(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=gb(a.display.sizer),d+=c.left,b+=c.top);a=gb(a.display.lineSpace);return{left:d-a.left,top:b-a.top}}function X(a,
b,c,d,e){d||(d=ta(a.doc,b.line));return J(a,d,Q(a,d,b.ch,null,e),c)}function fa(a,b,c,d,e){function f(b,g){var k=Q(a,d,b,e,g?"right":"left");g?k.left=k.right:k.right=k.left;return J(a,d,k,c)}function g(a,b){var c=k[b],d=c.level%2;a==$e(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=af(c)-(c.level%2?0:1),d=!0):a==af(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=$e(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||ta(a.doc,b.line);e||(e=ba(a,d));var k=sc(d);b=b.ch;if(!k)return f(b);var l=
He(k,b),l=g(b,l);null!=oe&&(l.other=g(b,oe));return l}function ua(a,b,c,d){a=new ga(a,b);a.xRel=d;c&&(a.outside=!0);return a}function va(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return ua(d.first,0,!0,-1);var e=Mc(d,c),f=d.first+d.size-1;if(e>f)return ua(d.first+d.size-1,ta(d,f).text.length,!0,1);for(0>b&&(b=0);;){var f=ta(d,e),e=la(a,f,e,b,c),g=(f=Aa(f))&&f.find();if(f&&(e.ch>g.from.ch||e.ch==g.from.ch&&0<e.xRel))e=g.to.line;else return e}}function la(a,b,c,d,e){function f(d){d=fa(a,ga(c,
d),"line",b,m);k=!0;if(g>d.bottom)return d.left-l;if(g<d.top)return d.left+l;k=!1;return d.left}var g=e-Ad(a,b),k=!1,l=2*a.display.wrapper.clientWidth,m=ba(a,b),n=sc(b),p=b.text.length;e=Fe(b);var q=Ge(b),r=f(e),s=k,t=f(q),u=k;if(d>t)return ua(c,q,u,1);for(;;){if(n?q==e||q==Je(b,e,1):1>=q-e){n=d<r||d-r<=t-d?e:q;for(d-=n==e?r:t;Gd(b.text.charAt(n));)++n;return ua(c,n,n==e?s:u,0>d?-1:d?1:0)}var v=Math.ceil(p/2),x=e+v;if(n)for(var x=e,y=0;y<v;++y)x=Je(b,x,1);y=f(x);if(y>d){q=x;t=y;if(u=k)t+=1E3;p=v}else e=
x,r=y,s=k,p-=v}}function oa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==kd){kd=qa("pre");for(var b=0;49>b;++b)kd.appendChild(document.createTextNode("x")),kd.appendChild(qa("br"));kd.appendChild(document.createTextNode("x"))}vc(a.measure,kd);b=kd.offsetHeight/50;3<b&&(a.cachedTextHeight=b);jc(a.measure);return b||1}function ka(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=qa("span","x"),c=qa("pre",[b]);vc(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);
return b||10}function Fa(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Df};Qd++||(Pc=[])}function O(a){var b=a.curOp,c=a.doc,f=a.display;a.curOp=null;b.updateMaxLine&&e(a);if(f.maxLineChanged&&!a.options.lineWrapping&&f.maxLine){var g;g=f.maxLine;var k=!1;if(g.markedSpans)for(var l=0;l<g.markedSpans;++l){var m=g.markedSpans[l];!m.collapsed||null!=m.to&&m.to!=g.text.length||(k=
!0)}(k=!k&&S(a,g))||g.text.length>=a.options.crudeMeasuringFrom?g=Q(a,g,g.text.length,k&&k.measure,"right").right:(g=Wd(a,g,null,!0).pre,k=g.appendChild(Id(a.display.measure)),vc(a.display.measure,g),g=gb(k).right-gb(a.display.lineDiv).left);f.sizer.style.minWidth=Math.max(0,g+3+dc)+"px";f.maxLineChanged=!1;g=Math.max(0,f.sizer.offsetLeft+f.sizer.offsetWidth-f.scroller.clientWidth);g<c.scrollLeft&&!b.updateScrollPos&&hb(a,Math.min(f.scroller.scrollLeft,g),!0)}var n,p;b.updateScrollPos?n=b.updateScrollPos:
b.selectionChanged&&f.scroller.clientHeight&&(n=fa(a,c.sel.head),n=Ka(a,n.left,n.top,n.left,n.bottom));if(b.changes.length||b.forceUpdate||n&&null!=n.scrollTop)p=A(a,b.changes,n&&n.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop);!p&&b.selectionChanged&&T(a);b.updateScrollPos?(p=Math.max(0,Math.min(f.scroller.scrollHeight-f.scroller.clientHeight,n.scrollTop)),n=Math.max(0,Math.min(f.scroller.scrollWidth-f.scroller.clientWidth,n.scrollLeft)),
f.scroller.scrollTop=f.scrollbarV.scrollTop=c.scrollTop=p,f.scroller.scrollLeft=f.scrollbarH.scrollLeft=c.scrollLeft=n,d(a),b.scrollToPos&&Sb(a,ja(a.doc,b.scrollToPos.from),ja(a.doc,b.scrollToPos.to),b.scrollToPos.margin)):n&&(f=Sb(a,a.doc.sel.head,null,a.options.cursorScrollMargin),a.state.focused&&(n=a.display,p=gb(n.sizer),c=null,0>f.top+p.top?c=!0:f.bottom+p.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),null==c||pg||(f=qa("div","\u200b",null,"position: absolute; top: "+
(f.top-n.viewOffset)+"px; height: "+(f.bottom-f.top+dc)+"px; left: "+f.left+"px; width: 2px;"),a.display.lineSpace.appendChild(f),f.scrollIntoView(c),a.display.lineSpace.removeChild(f))));b.selectionChanged&&Z(a);a.state.focused&&b.updateInput&&pa(a,b.userSelChange);c=b.maybeHiddenMarkers;f=b.maybeUnhiddenMarkers;if(c)for(n=0;n<c.length;++n)c[n].lines.length||tb(c[n],"hide");if(f)for(n=0;n<f.length;++n)f[n].lines.length&&tb(f[n],"unhide");var q;--Qd||(q=Pc,Pc=null);b.textChanged&&tb(a,"change",a,
b.textChanged);b.cursorActivity&&tb(a,"cursorActivity",a);if(q)for(n=0;n<q.length;++n)q[n]()}function sa(a,b){return function(){var c=a||this,d=!c.curOp;d&&Fa(c);try{var e=b.apply(c,arguments)}finally{d&&O(c)}return e}}function kb(a){return function(){var b=this.cm&&!this.cm.curOp,c;b&&Fa(this.cm);try{c=a.apply(this,arguments)}finally{b&&O(this.cm)}return c}}function La(a,b){var c=!a.curOp,d;c&&Fa(a);try{d=b()}finally{c&&O(a)}return d}function Ia(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+
a.doc.size);a.curOp.changes.push({from:b,to:c,diff:d})}function Ra(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){pb(a);a.state.focused&&Ra(a)})}function Qa(a){function b(){pb(a)||c?(a.display.pollingFast=!1,Ra(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function pb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||Kf(b)||Ma(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&
a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var f=b.value;if(f==c&&Da(e.from,e.to))return!1;if(Xc&&!Zb&&a.display.inputHasSelection===f)return pa(a,!0),!1;var g=!a.curOp;g&&Fa(a);e.shift=!1;for(var k=0,l=Math.min(c.length,f.length);k<l&&c.charCodeAt(k)==f.charCodeAt(k);)++k;var m=e.from,n=e.to,l=f.slice(k);k<c.length?m=ga(m.line,m.ch-(c.length-k)):a.state.overwrite&&Da(m,n)&&!a.state.pasteIncoming&&(n=ga(n.line,Math.min(ta(d,n.line).text.length,
n.ch+l.length)));c=a.curOp.updateInput;d={from:m,to:n,text:$c(l),origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};vb(a.doc,d,"end");a.curOp.updateInput=c;Xb(a,"inputRead",a,d);if(l&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&100>e.head.ch&&(c=a.getModeAt(e.head).electricChars))for(d=0;d<c.length;d++)if(-1<l.indexOf(c.charAt(d))){ob(a,e.head.line,"smart");break}1E3<f.length||-1<f.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=f;
g&&O(a);a.state.pasteIncoming=a.state.cutIncoming=!1;return!0}function pa(a,b){var c,d,e=a.doc;Da(e.sel.from,e.sel.to)?b&&(a.display.prevInput=a.display.input.value="",Xc&&!Zb&&(a.display.inputHasSelection=null)):(a.display.prevInput="",d=(c=kf&&(100<e.sel.to.line-e.sel.from.line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&Dd(a.display.input),Xc&&!Zb&&(a.display.inputHasSelection=d));a.display.inaccurateSelection=c}function ca(a){"nocursor"==
a.options.readOnly||ef&&document.activeElement==a.display.input||a.display.input.focus()}function Ma(a){return a.options.readOnly||a.doc.cantEdit}function cb(a){function b(){a.state.focused&&setTimeout(uc(ca,a),0)}function c(){null==k&&(k=setTimeout(function(){k=null;g.cachedCharWidth=g.cachedTextHeight=Zc=null;U(a);La(a,uc(Ia,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5E3):cc(window,"resize",c)}function e(b){tc(a,b)||a.options.onDragEvent&&
a.options.onDragEvent(a,ee(b))||Bd(b)}function f(b){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Dd(g.input));"cut"==b.type&&(a.state.cutIncoming=!0)}var g=a.display;Ha(g.scroller,"mousedown",sa(a,R));Yb?Ha(g.scroller,"dblclick",sa(a,function(b){if(!tc(a,b)){var c=za(a,b);!c||Ga(a,b,"gutterClick",!0,Xb)||ma(a.display,b)||(zb(b),b=eb(ta(a.doc,c.line).text,c),Ua(a.doc,b.from,b.to))}})):Ha(g.scroller,"dblclick",function(b){tc(a,b)||zb(b)});Ha(g.lineSpace,
"selectstart",function(a){ma(g,a)||zb(a)});gf||Ha(g.scroller,"contextmenu",function(b){Ea(a,b)});Ha(g.scroller,"scroll",function(){g.scroller.clientHeight&&($a(a,g.scroller.scrollTop),hb(a,g.scroller.scrollLeft,!0),tb(a,"scroll",a))});Ha(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&$a(a,g.scrollbarV.scrollTop)});Ha(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&hb(a,g.scrollbarH.scrollLeft)});Ha(g.scroller,"mousewheel",function(b){ub(a,b)});Ha(g.scroller,"DOMMouseScroll",function(b){ub(a,
b)});Ha(g.scrollbarH,"mousedown",b);Ha(g.scrollbarV,"mousedown",b);Ha(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var k;Ha(window,"resize",c);setTimeout(d,5E3);Ha(g.input,"keyup",sa(a,function(b){tc(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,ee(b))||16!=b.keyCode||(a.doc.sel.shift=!1)}));Ha(g.input,"input",function(){Xc&&!Zb&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);Qa(a)});Ha(g.input,"keydown",sa(a,Ta));Ha(g.input,"keypress",sa(a,ac));
Ha(g.input,"focus",uc(Sa,a));Ha(g.input,"blur",uc(ab,a));a.options.dragDrop&&(Ha(g.scroller,"dragstart",function(b){var c=a;if(Xc&&(!c.state.draggingText||100>+new Date-ke))Bd(b);else if(!tc(c,b)&&!ma(c.display,b)){var d=c.getSelection();b.dataTransfer.setData("Text",d);b.dataTransfer.setDragImage&&!cf&&(d=qa("img",null,null,"position: fixed; left: 0; top: 0;"),d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",$b&&(d.width=d.height=1,c.display.wrapper.appendChild(d),
d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),$b&&d.parentNode.removeChild(d))}}),Ha(g.scroller,"dragenter",e),Ha(g.scroller,"dragover",e),Ha(g.scroller,"drop",sa(a,Ca)));Ha(g.scroller,"paste",function(b){ma(g,b)||(ca(a),Qa(a))});Ha(g.input,"paste",function(){if(Lb&&!(a.state.fakedLastChar||200>new Date-a.state.lastMiddleDown)){var b=g.input.selectionStart,c=g.input.selectionEnd;g.input.value+="$";g.input.selectionStart=b;g.input.selectionEnd=c;a.state.fakedLastChar=!0}a.state.pasteIncoming=
!0;Qa(a)});Ha(g.input,"cut",f);Ha(g.input,"copy",f);df&&Ha(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur();ca(a)})}function ma(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function za(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller||c==d.gutterFiller))return null;var e,
f,d=gb(d.lineSpace);try{e=b.clientX,f=b.clientY}catch(g){return null}return va(a,e-d.left,f-d.top)}function R(b){function c(a){if(!Da(t,a))if(t=a,"single"==p)Ua(f.doc,ja(k,m),a);else if(r=ja(k,r),s=ja(k,s),"double"==p){var b=eb(ta(k,a.line).text,a);Ja(a,r)?Ua(f.doc,b.from,s):Ua(f.doc,r,b.to)}else"triple"==p&&(Ja(a,r)?Ua(f.doc,s,ja(k,ga(a.line,0))):Ua(f.doc,r,ja(k,ga(a.line+1,0))))}function d(b){var e=++v,l=za(f,b,!0);if(l)if(Da(l,q)){var m=b.clientY<u.top?-20:b.clientY>u.bottom?20:0;m&&setTimeout(sa(f,
function(){v==e&&(g.scroller.scrollTop+=m,d(b))}),50)}else{f.state.focused||Sa(f);q=l;c(l);var n=a(g,k);(l.line>=n.to||l.line<n.from)&&setTimeout(sa(f,function(){v==e&&d(b)}),150)}}function e(a){v=Infinity;zb(a);ca(f);cc(document,"mousemove",x);cc(document,"mouseup",y)}if(!tc(this,b)){var f=this,g=f.display,k=f.doc,l=k.sel;l.shift=b.shiftKey;if(ma(g,b))Lb||(g.scroller.draggable=!1,setTimeout(function(){g.scroller.draggable=!0},100));else if(!Ga(f,b,"gutterClick",!0,Xb)){var m=za(f,b);switch(Ye(b)){case 3:gf&&
Ea.call(f,f,b);return;case 2:Lb&&(f.state.lastMiddleDown=+new Date);m&&Ua(f.doc,m);setTimeout(uc(ca,f),20);zb(b);return}if(m){f.state.focused||Sa(f);var n=+new Date,p="single";Md&&Md.time>n-400&&Da(Md.pos,m)?(p="triple",zb(b),setTimeout(uc(ca,f),20),Xa(f,m.line)):Ld&&Ld.time>n-400&&Da(Ld.pos,m)?(p="double",Md={time:n,pos:m},zb(b),n=eb(ta(k,m.line).text,m),Ua(f.doc,n.from,n.to)):Ld={time:n,pos:m};var q=m;if(!f.options.dragDrop||!Jf||Ma(f)||Da(l.from,l.to)||Ja(m,l.from)||Ja(l.to,m)||"single"!=p){zb(b);
"single"==p&&Ua(f.doc,ja(k,m));var r=l.from,s=l.to,t=m,u=gb(g.wrapper),v=0,x=sa(f,function(a){Yb||Ye(a)?d(a):e(a)}),y=sa(f,e);Ha(document,"mousemove",x);Ha(document,"mouseup",y)}else{var z=sa(f,function(a){Lb&&(g.scroller.draggable=!1);f.state.draggingText=!1;cc(document,"mouseup",z);cc(g.scroller,"drop",z);10>Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)&&(zb(a),Ua(f.doc,m),ca(f),Yb&&!Zb&&setTimeout(function(){document.body.focus();ca(f)},20))});Lb&&(g.scroller.draggable=!0);f.state.draggingText=
z;g.scroller.dragDrop&&g.scroller.dragDrop();Ha(document,"mouseup",z);Ha(g.scroller,"drop",z)}}else(b.target||b.srcElement)==g.scroller&&zb(b)}}}function Ga(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(k){return!1}if(f>=Math.floor(gb(a.display.gutters).right))return!1;d&&zb(b);d=a.display;var l=gb(d.lineDiv);if(g>l.bottom||!Ec(a,c))return Be(b);g-=l.top-d.viewOffset;for(l=0;l<a.options.gutters.length;++l){var m=d.gutters.childNodes[l];if(m&&gb(m).right>=f)return f=Mc(a.doc,g),e(a,c,a,f,a.options.gutters[l],
b),Be(b)}}function na(a,b){return Ec(a,"gutterContextMenu")?Ga(a,b,"gutterContextMenu",!1,tb):!1}function Ca(a){var b=this;if(!(tc(b,a)||ma(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,ee(a)))){zb(a);Xc&&(ke=+new Date);var c=za(b,a,!0),d=a.dataTransfer.files;if(c&&!Ma(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var k=new FileReader;k.onload=function(){f[d]=k.result;++g==e&&(c=ja(b.doc,c),vb(b.doc,{from:c,to:c,text:$c(f.join("\n")),
origin:"paste"},"around"))};k.readAsText(a)};for(var k=0;k<e;++k)a(d[k],k)}else if(!b.state.draggingText||Ja(c,b.doc.sel.from)||Ja(b.doc.sel.to,c))try{if(f=a.dataTransfer.getData("Text")){var k=b.doc.sel.from,l=b.doc.sel.to;bb(b.doc,c,c);b.state.draggingText&&Eb(b.doc,"",k,l,"paste");b.replaceSelection(f,null,"paste");ca(b)}}catch(m){}else b.state.draggingText(a),setTimeout(uc(ca,b),20)}}function $a(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Jd||A(a,[],b),a.display.scroller.scrollTop!=
b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Jd&&A(a,[]),N(a,100))}function hb(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,d(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function ub(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==
c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Yc&&Lb)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(!c||Jd||$b||null==wc){if(d&&null!=wc){var g=d*wc,k=a.doc.scrollTop,l=k+e.wrapper.clientHeight;0>g?k=Math.max(0,k+g-50):l=Math.min(a.doc.height,l+g+50);A(a,[],{top:k,
bottom:l})}20>Ke&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(wc=(wc*Ke+a)/(Ke+1),++Ke)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}else d&&$a(a,Math.max(0,Math.min(f.scrollTop+d*wc,f.scrollHeight-f.clientHeight))),hb(a,Math.max(0,Math.min(f.scrollLeft+c*
wc,f.scrollWidth-f.clientWidth))),zb(b),e.wheelStartX=null}}function ia(a,b,c){if("string"==typeof b&&(b=Ne[b],!b))return!1;a.display.pollingFast&&pb(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{Ma(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=Pe}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Na(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function ib(a,b){var c=Tb(a.options.keyMap),
d=c.auto;clearTimeout(Ef);d&&!Ub(b)&&(Ef=setTimeout(function(){Tb(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,p(a))},50));var e=ed(b,!0),f=!1;if(!e)return!1;f=Na(a);if(f=b.shiftKey?wb("Shift-"+e,f,function(b){return ia(a,b,!0)})||wb(e,f,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return ia(a,b)}):wb(e,f,function(b){return ia(a,b)}))zb(b),Z(a),Zb&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Xb(a,"keyHandled",a,e,b);return f}function Wa(a,b,c){var d=wb("'"+c+"'",Na(a),
function(b){return ia(a,b,!0)});d&&(zb(b),Z(a),Xb(a,"keyHandled",a,"'"+c+"'",b));return d}function Ta(a){this.state.focused||Sa(this);if(!(tc(this,a)||this.options.onKeyEvent&&this.options.onKeyEvent(this,ee(a)))){Yb&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.doc.sel.shift=16==b||a.shiftKey;var c=ib(this,a);$b&&(xc=c?b:null,!c&&88==b&&!kf&&(Yc?a.metaKey:a.ctrlKey)&&this.replaceSelection(""))}}function ac(a){if(!(tc(this,a)||this.options.onKeyEvent&&this.options.onKeyEvent(this,ee(a)))){var b=
a.keyCode,c=a.charCode;$b&&b==xc?(xc=null,zb(a)):($b&&(!a.which||10>a.which)||df)&&ib(this,a)||(b=String.fromCharCode(null==c?b:c),Wa(this,a,b)||(Xc&&!Zb&&(this.display.inputHasSelection=null),Qa(this)))}}function Sa(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(tb(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),a.curOp||(pa(a,!0),Lb&&setTimeout(uc(pa,a,!0),0))),Ra(a),Z(a))}function ab(a){a.state.focused&&
(tb(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Ea(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value="\u200b"+(Da(f.from,f.to)?"":e.input.value);e.prevInput="\u200b";e.input.selectionStart=1;e.input.selectionEnd=a.length}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=
l;Zb&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=k);Ra(a);if(null!=e.input.selectionStart){Yb&&!Zb||c();clearTimeout(hf);var b=0,f=function(){"\u200b"==e.prevInput&&0==e.input.selectionStart?sa(a,Ne.selectAll)(a):10>b++?hf=setTimeout(f,500):pa(a)};hf=setTimeout(f,200)}}if(!tc(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!ma(e,b)&&!na(a,b)){var g=za(a,b),k=e.scroller.scrollTop;if(g&&!$b){a.options.resetSelectionOnContextMenu&&(Da(f.from,f.to)||Ja(g,f.from)||!Ja(g,f.to))&&sa(a,bb)(a.doc,g,g);
var l=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: transparent; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";ca(a);pa(a,!0);Da(f.from,f.to)&&(e.input.value=e.prevInput=" ");Yb&&!Zb&&c();if(gf){Bd(b);var m=function(){cc(window,"mouseup",m);setTimeout(d,20)};Ha(window,
"mouseup",m)}else setTimeout(d,50)}}}}function jb(a,b,c){if(!Ja(b.from,c))return ja(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d)return b=c.line-d,d=a.first+a.size-1,b>d?ga(d,ta(a,d).text.length):Qb(c,ta(a,b).text.length);if(c.line==b.to.line+d)return Qb(c,Hb(b.text).length+(1==b.text.length?b.from.ch:0)+ta(a,b.to.line).text.length-b.to.ch);a=c.line-b.from.line;return Qb(c,b.text[a].length+(a?0:b.from.ch))}function Ya(a,b,c){if(c&&"object"==typeof c)return{anchor:jb(a,
b,c.anchor),head:jb(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=le(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};c=function(a){if(Ja(a,b.from))return a;if(!Ja(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=d.ch-b.to.ch);return ga(c,e)};return{anchor:c(a.sel.anchor),head:c(a.sel.head)}}function lb(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=
!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=ja(a,b));c&&(this.to=ja(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});tb(a,"beforeChange",a,b);a.cm&&tb(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function vb(a,b,c,d){if(a.cm){if(!a.cm.curOp)return sa(a.cm,vb)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(Ec(a,"beforeChange")||a.cm&&Ec(a.cm,"beforeChange"))if(b=lb(a,b,!0),!b)return;if(d=Cf&&!d&&sd(a,b.from,b.to)){for(var e=d.length-
1;1<=e;--e)Rb(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&Rb(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else Rb(a,b,c)}function Rb(a,b,c){if(1!=b.text.length||""!=b.text[0]||!Da(b.from,b.to)){c=Ya(a,b,c);hd(a,b,c,a.cm?a.cm.curOp.id:NaN);Oa(a,b,c,Kb(a,b));var d=[];Vc(a,function(a,c){c||-1!=pc(d,a.history)||(Xe(a.history,b),d.push(a.history));Oa(a,b,null,Kb(a,b))})}}function Db(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],
anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e);c.generation=d.generation||++c.maxGeneration;for(var f=Ec(a,"beforeChange")||a.cm&&Ec(a.cm,"beforeChange"),g=d.changes.length-1;0<=g;--g){var k=d.changes[g];k.origin=b;if(f&&!lb(a,k,!1)){("undo"==b?c.done:c.undone).length=0;break}e.changes.push(be(a,k));var l=g?Ya(a,k,null):{anchor:d.anchorBefore,head:d.headBefore};Oa(a,k,l,Vb(a,k));var m=
[];Vc(a,function(a,b){b||-1!=pc(m,a.history)||(Xe(a.history,k),m.push(a.history));Oa(a,k,null,Vb(a,k))})}}}}function mb(a,b){function c(a){return ga(a.line+b,a.ch)}a.first+=b;a.cm&&Ia(a.cm,a.first,a.first,b);a.sel.head=c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function Oa(a,b,c,d){if(a.cm&&!a.cm.curOp)return sa(a.cm,Oa)(a,b,c,d);if(b.to.line<a.first)mb(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=
b.text.length-1-(a.first-b.from.line);mb(a,e);b={from:ga(a.first,0),to:ga(b.to.line+e,b.to.ch),text:[Hb(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:ga(e,ta(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=we(a,b.from,b.to);c||(c=Ya(a,b,null));a.cm?Sc(a.cm,b,d,c):ve(a,b,d,c)}}function Sc(a,b,d,e){var f=a.doc,g=a.display,k=b.from,m=b.to,n=!1,p=k.line;a.options.lineWrapping||(p=ic(rc(f,ta(f,k.line))),f.iter(p,m.line+1,function(a){if(a==g.maxLine)return n=!0}));
Ja(f.sel.head,b.from)||Ja(b.to,f.sel.head)||(a.curOp.cursorActivity=!0);ve(f,b,d,e,l(a));a.options.lineWrapping||(f.iter(p,k.line+b.text.length,function(a){var b=c(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,n=!1)}),n&&(a.curOp.updateMaxLine=!0));f.frontier=Math.min(f.frontier,k.line);N(a,400);Ia(a,k.line,m.line+1,b.text.length-(m.line-k.line)-1);if(Ec(a,"change"))if(b={from:k,to:m,text:b.text,removed:b.removed,origin:b.origin},a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=
a.next);a.next=b}else a.curOp.textChanged=b}function Eb(a,b,c,d,e){d||(d=c);if(Ja(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=$c(b));vb(a,{from:c,to:d,text:b,origin:e},null)}function ga(a,b){if(!(this instanceof ga))return new ga(a,b);this.line=a;this.ch=b}function Da(a,b){return a.line==b.line&&a.ch==b.ch}function Ja(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function yb(a,b){return a.line-b.line||a.ch-b.ch}function Cb(a){return ga(a.line,a.ch)}function ja(a,b){if(b.line<a.first)return ga(a.first,
0);var c=a.first+a.size-1;return b.line>c?ga(c,ta(a,c).text.length):Qb(b,ta(a,b.line).text.length)}function Qb(a,b){var c=a.ch;return null==c||c>b?ga(a.line,b):0>c?ga(a.line,0):a}function Bb(a,b){return b>=a.first&&b<a.first+a.size}function Ua(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Ja(b,e);f!=Ja(c,e)?(e=b,b=c):f!=Ja(b,c)&&(b=c)}bb(a,e,b,d)}else bb(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function bb(a,b,c,d,e){if(!e&&Ec(a,"beforeSelectionChange")||a.cm&&Ec(a.cm,
"beforeSelectionChange"))b={anchor:b,head:c},tb(a,"beforeSelectionChange",a,b),a.cm&&tb(a.cm,"beforeSelectionChange",a.cm,b),b.anchor=ja(a,b.anchor),b.head=ja(a,b.head),c=b.head,b=b.anchor;var f=a.sel;f.goalColumn=null;null==d&&(d=Ja(c,f.head)?-1:1);if(e||!Da(b,f.anchor))b=Jb(a,b,d,"push"!=e);if(e||!Da(c,f.head))c=Jb(a,c,d,"push"!=e);Da(f.anchor,b)&&Da(f.head,c)||(f.anchor=b,f.head=c,d=Ja(c,b),f.from=d?c:b,f.to=d?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=
!0),Xb(a,"cursorActivity",a))}function db(a){bb(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function Jb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var k=ta(a,f.line);if(k.markedSpans)for(var l=0;l<k.markedSpans.length;++l){var m=k.markedSpans[l],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(tb(n,"beforeCursorEnter"),n.explicitlyCleared))if(k.markedSpans){--l;continue}else break;if(n.atomic){l=n.find()[0>
g?"from":"to"];if(Da(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?ja(a,ga(l.line-1)):null:l.ch>k.text.length&&(l=l.line<a.first+a.size-1?ga(l.line+1,0):null),!l)){if(e){if(!d)return Jb(a,b,c,!0);a.cantEdit=!0;return ga(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}}return f}}function Sb(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=fa(a,b),g=c&&c!=b?fa(a,c):f,g=Ka(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),k=a.doc.scrollTop,l=a.doc.scrollLeft;null!=g.scrollTop&&
($a(a,g.scrollTop),1<Math.abs(a.doc.scrollTop-k)&&(e=!0));null!=g.scrollLeft&&(hb(a,g.scrollLeft),1<Math.abs(a.doc.scrollLeft-l)&&(e=!0));if(!e)return f}}function Ka(a,b,c,d,e){var f=a.display,g=oa(a.display);0>c&&(c=0);var k=f.scroller.clientHeight-dc,l=f.scroller.scrollTop,m={};a=a.doc.height+(f.mover.offsetHeight-f.lineSpace.offsetHeight);var n=c<g,g=e>a-g;c<l?m.scrollTop=n?0:c:e>l+k&&(c=Math.min(c,(g?a:e)-k),c!=l&&(m.scrollTop=c));l=f.scroller.clientWidth-dc;c=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;
d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;e=b<f+10;b<c+f||e?(e&&(b=0),m.scrollLeft=Math.max(0,b-10-f)):d>l+c-3&&(m.scrollLeft=d+10-l);return m}function Fb(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function Va(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=
Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function ob(a,b,c,d){var e=a.doc;null==c&&(c="add");if("smart"==c)if(a.doc.mode.indent)var f=G(a,b);else c="prev";var g=a.options.tabSize,k=ta(e,b),l=Fc(k.text,null,g),m=k.text.match(/^\s*/)[0],n;if(!d&&!/\S/.test(k.text))n=0,c="not";else if("smart"==c&&(n=a.doc.mode.indent(f,k.text.slice(m.length),k.text),n==Pe)){if(!d)return;c="prev"}"prev"==c?n=b>e.first?Fc(ta(e,b-1).text,null,g):0:"add"==c?n=l+a.options.indentUnit:"subtract"==c?
n=l-a.options.indentUnit:"number"==typeof c&&(n=l+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(f=Math.floor(n/g);f;--f)d+=g,c+="\t";d<n&&(c+=fe(n-d));c!=m?Eb(a.doc,c,ga(b,0),ga(b,m.length),"+input"):e.sel.head.line==b&&e.sel.head.ch<m.length&&bb(e,ga(b,m.length),ga(b,m.length),1);k.stateAfter=null}function qb(a,b,c){var d=b,e=b,f=a.doc;"number"==typeof b?e=ta(f,Math.max(f.first,Math.min(b,f.first+f.size-1))):d=ic(b);if(null!=d&&c(e,d))Ia(a,d,d+1);else return null;return e}function rb(a,
b,c,d,e){function f(b){var d=(e?Je:bf)(l,k,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=m=!1:(g=b,b=l=ta(a,b));if(b)k=e?(0>c?Ge:Fe)(l):0>c?l.text.length:0;else return m=!1}else k=d;return!0}var g=b.line,k=b.ch;b=c;var l=ta(a,g),m=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var n=null;d="group"==d;for(var p=!0;!(0>c)||f(!p);p=!1){var q=l.text.charAt(k)||"\n",q=Ed(q)?"w":d?/\s/.test(q)?null:"p":null;if(n&&n!=q){0>c&&(c=1,f());break}q&&(n=q);if(0<c&&
!f(!p))break}}b=Jb(a,ga(g,k),b,!0);m||(b.hitSide=!0);return b}function zc(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(d=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(d-(0>c?1.5:0.5)*oa(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){var k=va(a,f,g);if(!k.outside)break;if(0>c?0>=g:g>=e.height){k.hitSide=!0;break}g+=5*c}return k}function eb(a,b){var c=b.ch,d=b.ch;if(a){(0>b.xRel||d==a.length)&&c?--c:++d;for(var e=a.charAt(c),
e=Ed(e)?Ed:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Ed(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:ga(b.line,c),to:ga(b.line,d)}}function Xa(a,b){Ua(a.doc,ga(b,0),ja(a.doc,ga(b+1,0)))}function ra(a,b,c,d){r.defaults[a]=b;c&&(ld[a]=d?function(a,b,d){d!=jf&&c(a,b,d)}:c)}function fc(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}
function gc(a,b,c){return a.startState?a.startState(b,c):!0}function Tb(a){return"string"==typeof a?Gc[a]:a}function wb(a,b,c){function d(b){b=Tb(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(var e=0,f=b.length;e<f;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function Ub(a){a=Qc[a.keyCode];
return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function ed(a,b){if($b&&34==a.keyCode&&a["char"])return!1;var c=Qc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(Bf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(Bf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c}function bc(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0}function xb(a,b){this.lines=[];this.type=b;this.doc=a}function fb(a,b,c,d,
e){if(d&&d.shared)return lc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return sa(a.cm,fb)(a,b,c,d,e);var f=new xb(a,e);d&&Ee(d,f);if(Ja(c,b)||Da(b,c)&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.replacedWith=qa("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0));if(f.collapsed){if(Xd(a,b.line,b,c,f)||b.line!=c.line&&Xd(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");jd=!0}f.addToHistory&&hd(a,
{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g=b.line,k=a.cm,l;a.iter(g,c.line+1,function(d){k&&f.collapsed&&!k.options.lineWrapping&&rc(a,d)==k.display.maxLine&&(l=!0);var e={from:null,to:null,marker:f};g==b.line&&(e.from=b.ch);g==c.line&&(e.to=c.ch);f.collapsed&&g!=b.line&&hc(d,0);d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e];e.marker.attachLine(d);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){Jc(a,b)&&hc(b,0)});f.clearOnEnter&&Ha(f,"beforeCursorEnter",
function(){f.clear()});f.readOnly&&(Cf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Gf,f.atomic=!0);k&&(l&&(k.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&Ia(k,b.line,c.line+1),f.atomic&&db(k));return f}function Y(a,b){this.markers=a;this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Ha(a[c],"clear",function(){d.clear()})}function lc(a,b,c,d,e){d=Ee(d);d.shared=!1;var f=[fb(a,b,c,d,e)],g=f[0],k=
d.replacedWith;Vc(a,function(a){k&&(d.replacedWith=k.cloneNode(!0));f.push(fb(a,ja(a,b),ja(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;g=Hb(f)});return new Y(f,g)}function mc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Kb(a,b){var c=Bb(a,b.from.line)&&ta(a,b.from.line).markedSpans,d=Bb(a,b.to.line)&&ta(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Da(b.from,b.to);if(c)for(var k=0,l;k<c.length;++k){var m=
c[k],n=m.marker;if(null==m.from||(n.inclusiveLeft?m.from<=e:m.from<e)||m.from==e&&!("bookmark"!=n.type||g&&m.marker.insertLeft)){var p=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push({from:m.from,to:p?null:m.to,marker:n})}}c=l;if(d)for(var k=0,q;k<d.length;++k)if(l=d[k],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=f:l.to>f)||l.from==f&&"bookmark"==m.type&&(!g||l.marker.insertLeft))n=null==l.from||(m.inclusiveLeft?l.from<=f:l.from<f),(q||(q=[])).push({from:n?null:l.from-f,to:null==
l.to?null:l.to-f,marker:m});d=q;g=1==b.text.length;q=Hb(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(k=c[f],null==k.to)(l=mc(d,k.marker),l)?g&&(k.to=null==l.to?null:l.to+q):k.to=e;if(d)for(f=0;f<d.length;++f)k=d[f],null!=k.to&&(k.to+=q),null==k.from?(l=mc(c,k.marker),l||(k.from=q,g&&(c||(c=[])).push(k))):(k.from+=q,g&&(c||(c=[])).push(k));c&&(c=fd(c));d&&d!=c&&(d=fd(d));e=[c];if(!g){var g=b.text.length-2,r;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(r||(r=[])).push({from:null,to:null,
marker:c[f].marker});for(f=0;f<g;++f)e.push(r);e.push(d)}return e}function fd(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Vb(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(ce(c[d]));c=e}else c=null;d=Kb(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var k=0;a:for(;k<g.length;++k){for(var l=g[k],m=0;m<f.length;++m)if(f[m].marker==
l.marker)continue a;f.push(l)}}else g&&(c[e]=g)}return c}function sd(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=pc(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),f=0;f<a.length;++f){var g=a[f];if(!Ja(g.to,e.from)&&!Ja(e.to,g.from)){var k=[f,1];(Ja(g.from,e.from)||!c.inclusiveLeft&&Da(g.from,e.from))&&k.push({from:g.from,
to:e.from});(Ja(e.to,g.to)||!c.inclusiveRight&&Da(g.to,e.to))&&k.push({from:e.to,to:g.to});a.splice.apply(a,k);f+=k.length-1}}}return a}function td(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=yb(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=yb(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Cc(a,b){var c=jd&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?
e.from:e.to)&&(!d||0>td(d,e.marker))&&(d=e.marker);return d}function Aa(a){return Cc(a,!1)}function Xd(a,b,c,d,e){a=ta(a,b);if(a=jd&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(!0),k=yb(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),l=yb(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=k&&0>=l||0>=k&&0<=l)&&(0>=k&&0<(yb(g.to,c)||(f.marker.inclusiveRight?1:0)-(e.inclusiveLeft?-1:0))||0<=k&&0>(yb(g.from,d)||(f.marker.inclusiveLeft?
-1:0)-(e.inclusiveRight?1:0))))return!0}}}function rc(a,b){for(var c;c=Cc(b,!0);)b=ta(a,c.find().from.line);return b}function Jc(a,b){var c=jd&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&vd(a,b,d)))return!0}function vd(a,b,c){if(null==c.to)return b=c.marker.find().to,b=ta(a,b.line),vd(a,b,mc(b.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=
b.markedSpans[e],d.marker.collapsed&&!d.marker.replacedWith&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&vd(a,b,d))return!0}function Wb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function wd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function xd(a){return function(){var b=!this.cm.curOp;b&&Fa(this.cm);try{var c=a.apply(this,arguments)}finally{b&&O(this.cm)}return c}}
function yd(a){if(null!=a.height)return a.height;a.node.parentNode&&1==a.node.parentNode.nodeType||vc(a.cm.display.measure,qa("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function te(a,b,c,d){var e=new Od(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);qb(a,b,function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;if(!Jc(a.doc,b)||e.showIfHidden)c=Ad(a,b)<a.doc.scrollTop,hc(b,b.height+
yd(e)),c&&Va(a,0,e.height);return!0});return e}function Dc(a,b,c,d,e,f){var g=c.flattenSpans;null==g&&(g=a.options.flattenSpans);var k=0,l=null,m=new bc(b,a.options.tabSize),n;for(""==b&&c.blankLine&&c.blankLine(d);!m.eol();){m.pos>a.options.maxHighlightLength?(g=!1,f&&sb(a,b,d,m.pos),m.pos=b.length,n=null):n=c.token(m,d);if(a.options.addModeClass){var p=r.innerMode(c,d).mode.name;p&&(n="m-"+(n?p+" "+n:p))}g&&l==n||(k<m.start&&e(m.start,l),k=m.start,l=n);m.start=m.pos}for(;k<m.pos;)a=Math.min(m.pos,
k+5E4),e(a,l),k=a}function Lc(a,b,c,d){var e=[a.state.modeGen];Dc(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},d);for(c=0;c<a.state.overlays.length;++c){var f=a.state.overlays[c],g=1,k=0;Dc(a,b.text,f.mode,!0,function(a,b){for(var c=g;k<a;){var d=e[g];d>a&&e.splice(g,1,a,e[g+1],d);g+=2;k=Math.min(a,d)}if(b)if(f.opaque)e.splice(c,g-c,a,b),g=c+2;else for(;c<g;c+=2)d=e[c+1],e[c+1]=d?d+" "+b:b})}return e}function Zd(a,b){b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Lc(a,b,b.stateAfter=G(a,ic(b))));
return b.styles}function sb(a,b,c,d){var e=a.doc.mode,f=new bc(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&e.blankLine&&e.blankLine(c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)e.token(f,c),f.start=f.pos}function Gb(a,b){if(!a)return null;for(;;){var c=a.match(/(?:^|\s)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}c=b.cm.options.addModeClass?
Oe:Pd;return c[a]||(c[a]="cm-"+a.replace(/ +/g," cm-"))}function Wd(a,b,c,d){for(var e,f=b,g=!0;e=Cc(f,!0);)f=ta(a.doc,e.find().from.line);d={pre:qa("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};do{f.text&&(g=!1);d.measure=f==b&&c;d.pos=0;d.addToken=d.measure?oc:Yd;(Yb||Lb)&&a.getOption("lineWrapping")&&(d.addToken=vf(d.addToken));a:{e=d;var k=Zd(a,f),l=f.markedSpans,m=f.text,n=0;if(l)for(var p=m.length,q=0,r=1,s="",t=void 0,u=0,v=void 0,x=void 0,y=void 0,z=void 0,A=void 0;;){if(u==
q){for(var v=x=y=z="",A=null,u=Infinity,B=[],C=0;C<l.length;++C){var D=l[C],E=D.marker;D.from<=q&&(null==D.to||D.to>q)?(null!=D.to&&u>D.to&&(u=D.to,x=""),E.className&&(v+=" "+E.className),E.startStyle&&D.from==q&&(y+=" "+E.startStyle),E.endStyle&&D.to==u&&(x+=" "+E.endStyle),E.title&&!z&&(z=E.title),E.collapsed&&(!A||0>td(A.marker,E))&&(A=D)):D.from>q&&u>D.from&&(u=D.from);"bookmark"==E.type&&D.from==q&&E.replacedWith&&B.push(E)}if(A&&(A.from||0)==q&&(ue(e,(null==A.to?p:A.to)-q,A.marker,null==A.from),
null==A.to)){e=A.marker.find();break a}if(!A&&B.length)for(C=0;C<B.length;++C)ue(e,0,B[C])}if(q>=p)break;for(B=Math.min(p,u);;){if(s){C=q+s.length;A||(D=C>B?s.slice(0,B-q):s,e.addToken(e,D,t?t+v:v,y,q+D.length==u?x:"",z));if(C>=B){s=s.slice(B-q);q=B;break}q=C;y=""}s=m.slice(n,n=k[r++]);t=Gb(k[r++],e)}}else for(var r=1;r<k.length;r+=2)e.addToken(e,m.slice(n,n=k[r]),Gb(k[r+1],e));e=void 0}c&&f==b&&!d.measuredSomething&&(c[0]=d.pre.appendChild(Id(a.display.measure)),d.measuredSomething=!0);e&&(f=ta(a.doc,
e.to.line))}while(e);!c||d.measuredSomething||c[0]||(c[0]=d.pre.appendChild(g?qa("span","\u00a0"):Id(a.display.measure)));d.pre.firstChild||Jc(a.doc,b)||d.pre.appendChild(document.createTextNode("\u00a0"));var ib;c&&Xc&&(ib=sc(f))&&(g=ib.length-1,ib[g].from==ib[g].to&&--g,f=ib[g],ib=ib[g-1],f.from+1==f.to&&ib&&f.level<ib.level&&(c=c[d.pos-1])&&c.parentNode.insertBefore(c.measureRight=Id(a.display.measure),c.nextSibling));if(c=d.textClass?d.textClass+" "+(b.textClass||""):b.textClass)d.pre.className=
c;tb(a,"renderLine",a,b,d.pre);return d}function Yd(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars;if(g.test(b))for(var k=document.createDocumentFragment(),l=0;;){g.lastIndex=l;var m=g.exec(b),n=m?m.index-l:b.length-l;n&&(k.appendChild(document.createTextNode(b.slice(l,l+n))),a.col+=n);if(!m)break;l+=n+1;"\t"==m[0]?(m=a.cm.options.tabSize,m-=a.col%m,k.appendChild(qa("span",fe(m),"cm-tab")),a.col+=m):(m=a.cm.options.specialCharPlaceholder(m[0]),k.appendChild(m),a.col+=1)}else{a.col+=b.length;var k=
document.createTextNode(b)}if(c||d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),m=qa("span",[k],b),f&&(m.title=f),a.pre.appendChild(m);a.pre.appendChild(k)}}function oc(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){for(var k=0==g,l=g+1;l<b.length&&Gd(b.charAt(l));)++l;var m=b.slice(g,l);(g=l-1)&&f&&ie(b,g)&&a.pre.appendChild(qa("wbr"));l=a.measure[a.pos];k=a.measure[a.pos]=Yd(a,m,c,k&&d,g==b.length-1&&e);l&&(k.leftSide=l.leftSide||l);Yb&&f&&" "==m&&g&&!/\s/.test(b.charAt(g-
1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(k.style.whiteSpace="normal");a.pos+=m.length}b.length&&(a.measuredSomething=!0)}function vf(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,f,g,k){return a(c,d.replace(/ {3,}/g,b),e,f,g,k)}}function ue(a,b,c,d){if(d=!d&&c.replacedWith)if(a.copyWidgets&&(d=d.cloneNode(!0)),a.pre.appendChild(d),a.measure){if(b)a.measure[a.pos]=d;else{var e=Id(a.cm.display.measure);if("bookmark"!=c.type||c.insertLeft){if(a.measure[a.pos])return;
a.measure[a.pos]=a.pre.insertBefore(e,d)}else a.measure[a.pos]=a.pre.appendChild(e)}a.measuredSomething=!0}a.pos+=b}function ve(a,b,c,d,e){function f(a,c,d){var g=e;a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Wb(a);wd(a,d);c=g?g(a):1;c!=a.height&&hc(a,c);Xb(a,"change",a,b)}var g=b.from,k=b.to,l=b.text,m=ta(a,g.line),n=ta(a,k.line),p=Hb(l),q=c?c[l.length-1]:null,r=k.line-g.line;if(0!=g.ch||0!=k.ch||""!=p||a.cm&&!a.cm.options.wholeLineUpdateBefore)if(m==
n)if(1==l.length)f(m,m.text.slice(0,g.ch)+p+m.text.slice(k.ch),q);else{u=[];s=1;for(t=l.length-1;s<t;++s)u.push(new Oc(l[s],c?c[s]:null,e));u.push(new Oc(p+m.text.slice(k.ch),q,e));f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);a.insert(g.line+1,u)}else if(1==l.length)f(m,m.text.slice(0,g.ch)+l[0]+n.text.slice(k.ch),c?c[0]:null),a.remove(g.line+1,r);else{f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);f(n,p+n.text.slice(k.ch),q);s=1;t=l.length-1;for(u=[];s<t;++s)u.push(new Oc(l[s],c?c[s]:null,e));1<r&&a.remove(g.line+
1,r-1);a.insert(g.line+1,u)}else{for(var s=0,t=l.length-1,u=[];s<t;++s)u.push(new Oc(l[s],c?c[s]:null,e));f(n,n.text,q);r&&a.remove(g.line,r);u.length&&a.insert(g.line,u)}Xb(a,"change",a,b);bb(a,d.anchor,d.head,null,!0)}function $d(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function zd(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=
null}function Vc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var k=a.linked[g];if(k.doc!=e){var l=f&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function Ve(a,c){if(c.cm)throw Error("This document is already in use.");a.doc=c;c.cm=a;b(a);s(a);a.options.lineWrapping||e(a);a.options.mode=c.modeOption;Ia(a)}function ta(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function we(a,
b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function ae(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function hc(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function ic(a){if(null==a.parent)return null;var b=a.parent;a=pc(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Mc(a,
b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function Ad(a,b){b=rc(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function sc(a){var b=
a.order;null==b&&(b=a.order=sg(a.text));return b}function gd(a){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function We(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function be(a,b){var c={from:{line:b.from.line,ch:b.from.ch},to:le(b),text:we(a,b.from,b.to)};We(a,c,b.from.line,b.to.line+1);Vc(a,function(a){We(a,
c,b.from.line,b.to.line+1)},!0);return c}function hd(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Hb(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var k=Hb(g.changes);Da(b.from,b.to)&&Da(b.from,k.to)?k.to=le(b):g.changes.push(be(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else for(g={changes:[be(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,
anchorAfter:c.anchor,headAfter:c.head},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift();e.generation=++e.maxGeneration;e.lastTime=f;e.lastOp=d;e.lastOrigin=b.origin}function ce(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function de(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,
headAfter:e.headAfter});for(e=0;e<f.length;++e){var k=f[e],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<pc(b,Number(l[1]))&&(Hb(g)[m]=k[m],delete k[m])}}return d}function xe(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function ye(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,k=0;k<f.changes.length;++k){var l=f.changes[k];f.copied||(l.from=Cb(l.from),l.to=Cb(l.to));if(c<l.from.line)l.from.line+=d,l.to.line+=d;else if(b<=l.to.line){g=
!1;break}}f.copied||(f.anchorBefore=Cb(f.anchorBefore),f.headBefore=Cb(f.headBefore),f.anchorAfter=Cb(f.anchorAfter),f.readAfter=Cb(f.headAfter),f.copied=!0);g?(xe(f.anchorBefore),xe(f.headBefore),xe(f.anchorAfter),xe(f.headAfter)):(a.splice(0,e+1),e=0)}}function Xe(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;ye(a.done,c,d,e);ye(a.undone,c,d,e)}function wf(){Bd(this)}function ee(a){a.stop||(a.stop=wf);return a}function zb(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ze(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0}function Be(a){return null!=a.defaultPrevented?a.defaultPrevented:!1==a.returnValue}function Bd(a){zb(a);ze(a)}function Ye(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Yc&&a.ctrlKey&&1==b&&(b=3);return b}function Ha(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function cc(a,b,c){if(a.removeEventListener)a.removeEventListener(b,
c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function tb(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Xb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);Pc||(++Qd,Pc=[],setTimeout(ge,0));for(var f=0;f<d.length;++f)Pc.push(c(d[f]))}}
function tc(a,b,c){tb(a,c||b.type,a,b);return Be(b)||b.codemirrorIgnore}function ge(){--Qd;var a=Pc;Pc=null;for(var b=0;b<a.length;++b)a[b]()}function Ec(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function Nc(a){a.prototype.on=function(a,b){Ha(this,a,b)};a.prototype.off=function(a,b){cc(this,a,b)}}function Cd(){this.id=null}function Fc(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function fe(a){for(;Rd.length<=
a;)Rd.push(Hb(Rd)+" ");return Rd[a]}function Hb(a){return a[a.length-1]}function Dd(a){if(je)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function pc(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function De(a,b){function c(){}c.prototype=a;var d=new c;b&&Ee(b,d);return d}function Ee(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function xf(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}
function uc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Ed(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||rg.test(a))}function Fd(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Gd(a){return 768<=a.charCodeAt(0)&&If.test(a)}function qa(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)Wc(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);
return a}function jc(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function vc(a,b){return jc(a).appendChild(b)}function Wc(a,b){Zb?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function gb(a){return a.getBoundingClientRect()}function ie(){return!1}function Hd(a){if(null!=Zc)return Zc;var b=qa("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");vc(a,b);b.offsetWidth&&(Zc=b.offsetHeight-b.clientHeight);return Zc||0}function Id(a){if(null==
Qe){var b=qa("span","\u200b");vc(a,qa("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Qe=1>=b.offsetWidth&&2<b.offsetHeight&&!Kd)}return Qe?qa("span","\u200b"):qa("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function jg(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function $e(a){return a.level%
2?a.to:a.from}function af(a){return a.level%2?a.from:a.to}function Fe(a){return(a=sc(a))?$e(a[0]):0}function Ge(a){var b=sc(a);return b?af(Hb(b)):a.text.length}function zf(a,b){var c=ta(a.doc,b),d=rc(a.doc,c);d!=c&&(b=ic(d));d=(c=sc(d))?c[0].level%2?Ge(d):Fe(d):0;return ga(b,d)}function kg(a,b){for(var c,d;c=Aa(d=ta(a.doc,b));)b=c.find().to.line;d=(c=sc(d))?c[0].level%2?Fe(d):Ge(d):d.text.length;return ga(b,d)}function He(a,b){oe=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;
if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,k=a[0].level;f=f==k?!0:g==k?!1:f<g;if(f)return e.from!=e.to&&(oe=d),c;e.from!=e.to&&(oe=c);break}}return d}function Ie(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Gd(a.text.charAt(b)));return b}function Je(a,b,c,d){var e=sc(a);if(!e)return bf(a,b,c,d);var f=He(e,b),g=e[f];for(b=Ie(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(He(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=
e[f+=c];if(!g)return null;b=0<c==g.level%2?Ie(a,g.to,-1,d):Ie(a,g.from,1,d)}}function bf(a,b,c,d){b+=c;if(d)for(;0<b&&Gd(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Jd=/gecko\/\d/i.test(navigator.userAgent),Yb=/MSIE \d/.test(navigator.userAgent),Kd=Yb&&(null==document.documentMode||8>document.documentMode),Zb=Yb&&(null==document.documentMode||9>document.documentMode),lg=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),Xc=Yb||lg,Lb=/WebKit\//.test(navigator.userAgent),mg=Lb&&
/Qt\/\d+\.\d+/.test(navigator.userAgent),Af=/Chrome\//.test(navigator.userAgent),$b=/Opera\//.test(navigator.userAgent),cf=/Apple Computer/.test(navigator.vendor),df=/KHTML\//.test(navigator.userAgent),og=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),ng=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),pg=/PhantomJS/.test(navigator.userAgent),je=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ef=je||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
Yc=je||/Mac/.test(navigator.platform),ff=/win/i.test(navigator.platform),id=$b&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);id&&(id=Number(id[1]));id&&15<=id&&($b=!1,Lb=!0);var Bf=Yc&&(mg||$b&&(null==id||12.11>id)),gf=Jd||Yb&&!Zb,Cf=!1,jd=!1,kd,Df=0,Ld,Md,ke=0,Ke=0,wc=null;Yb?wc=-0.53:Jd?wc=15:Af?wc=-0.7:cf&&(wc=-1/3);var Ef,xc=null,hf,le=r.changeEnd=function(a){return a.text?ga(a.from.line+a.text.length-1,Hb(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};r.Pos=ga;r.prototype={constructor:r,
focus:function(){window.focus();ca(this);Qa(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,ld.hasOwnProperty(a)&&sa(this,ld[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:sa(null,function(a,
b){var c=a.token?a:r.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;Ia(this)}),removeOverlay:sa(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Ia(this);break}}}),indentLine:sa(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?
"smart":"prev":b?"add":"subtract");Bb(this.doc,a)&&ob(this,a,b,c)}),indentSelection:sa(null,function(a){var b=this.doc.sel;if(Da(b.from,b.to))return ob(this,b.from.line,a,!0);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)ob(this,b,a)}),getTokenAt:function(a,b){var c=this.doc;a=ja(c,a);for(var d=G(this,a.line,b),e=this.doc.mode,c=ta(c,a.line),c=new bc(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var f=e.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:f||
null,type:f||null,state:d}},getTokenTypeAt:function(a){a=ja(this.doc,a);var b=Zd(this,ta(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)return b[2];for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else return b[2*e+2]}},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?r.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!md.hasOwnProperty(b))return md;var d=md[b],e=this.getModeAt(a);
if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==pc(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return G(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel;
c=null==a?c.head:"object"==typeof a?ja(this.doc,a):a?c.from:c.to;return fa(this,c,b||"page")},charCoords:function(a,b){return X(this,ja(this.doc,a),b||"page")},coordsChar:function(a,b){a=aa(this,a,b||"page");return va(this,a.left,a.top)},lineAtHeight:function(a,b){a=aa(this,{top:a,left:0},b||"page").top;return Mc(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=ta(this.doc,a);return J(this,
ta(this.doc,a),{top:0,left:0},b||"page").top+(c?d.height:0)},defaultTextHeight:function(){return oa(this.display)},defaultCharWidth:function(){return ka(this.display)},setGutterMarker:sa(null,function(a,b,c){return qb(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&Fd(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:sa(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Ia(b,d,d+1),Fd(c.gutterMarkers)&&
(c.gutterMarkers=null));++d})}),addLineClass:sa(null,function(a,b,c){return qb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:sa(null,function(a,b,c){return qb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;
var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:sa(null,function(a,b,c){return te(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!Bb(this.doc,a))return null;var b=a;a=ta(this.doc,a);if(!a)return null}else if(b=ic(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,
widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=fa(this,ja(this.doc,a));var g=a.bottom,k=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var l=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:
a.bottom+b.offsetHeight<=l&&(g=a.bottom);k+b.offsetWidth>m&&(k=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(k=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?k=0:"middle"==e&&(k=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=k+"px");c&&(a=Ka(this,k,g,k+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&$a(this,a.scrollTop),null!=a.scrollLeft&&hb(this,a.scrollLeft))},triggerOnKeyDown:sa(null,Ta),execCommand:function(a){if(Ne.hasOwnProperty(a))return Ne[a](this)},
findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ja(this.doc,a);f<b&&(a=rb(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:sa(null,function(a,b){var c=this.doc.sel,c=c.shift||c.extend||Da(c.from,c.to)?rb(this.doc,c.head,a,b,this.options.rtlMoveVisually):0>a?c.from:c.to;Ua(this.doc,c,c,a)}),deleteH:sa(null,function(a,b){var c=this.doc.sel;Da(c.from,c.to)?Eb(this.doc,"",c.from,rb(this.doc,c.head,a,b,!1),"+delete"):Eb(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),
findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ja(this.doc,a);f<b&&(a=fa(this,a,"div"),null==d?d=a.left:a.left=d,a=zc(this,a,e,c),!a.hitSide);++f);return a},moveV:sa(null,function(a,b){var c=this.doc.sel,d,e;c.shift||c.extend||Da(c.from,c.to)?(e=fa(this,c.head,"div"),null!=c.goalColumn&&(e.left=c.goalColumn),d=zc(this,e,a,b),"page"==b&&Va(this,0,X(this,d,"div").top-e.top),e=e.left):d=0>a?c.from:c.to;Ua(this.doc,d,d,a);null!=e&&(c.goalColumn=e)}),toggleOverwrite:function(a){if(null==
a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:sa(null,function(a,b){Fb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=dc;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-
b}},scrollIntoView:sa(null,function(a,b){null==a?a={from:this.doc.sel.head,to:null}:"number"==typeof a?a={from:ga(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);b||(b=0);var c=a;null!=a.from.line&&(this.curOp.scrollToPos={from:a.from,to:a.to,margin:b},c={from:fa(this,a.from),to:fa(this,a.to)});c=Ka(this,Math.min(c.from.left,c.to.left),Math.min(c.from.top,c.to.top)-b,Math.max(c.from.right,c.to.right),Math.max(c.from.bottom,c.to.bottom)+b);Fb(this,c.scrollLeft,c.scrollTop)}),setSize:sa(null,
function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0);this.curOp.forceUpdate=!0}),operation:function(a){return La(this,a)},refresh:sa(null,function(){var a=null==this.display.cachedTextHeight;U(this);Fb(this,this.doc.scrollLeft,this.doc.scrollTop);Ia(this);a&&b(this)}),
swapDoc:sa(null,function(a){var b=this.doc;b.cm=null;Ve(this,a);U(this);pa(this,!0);Fb(this,a.scrollLeft,a.scrollTop);Xb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Nc(r);var ld=r.optionHandlers={},Le=r.defaults={},jf=r.Init={toString:function(){return"CodeMirror.Init"}};ra("value",
"",function(a,b){a.setValue(b)},!0);ra("mode",null,function(a,b){a.doc.modeOption=b;s(a)},!0);ra("indentUnit",2,s,!0);ra("indentWithTabs",!1);ra("smartIndent",!0);ra("tabSize",4,function(a){t(a);U(a);Ia(a)},!0);ra("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},!0);ra("specialCharPlaceholder",function(a){var b=qa("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);
return b},function(a){a.refresh()},!0);ra("electricChars",!0);ra("rtlMoveVisually",!ff);ra("wholeLineUpdateBefore",!0);ra("theme","default",function(a){m(a);k(a)},!0);ra("keyMap","default",p);ra("extraKeys",null);ra("onKeyEvent",null);ra("onDragEvent",null);ra("lineWrapping",!1,function(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),e(a));b(a);Ia(a);
U(a);setTimeout(function(){q(a)},100)},!0);ra("gutters",[],function(a){g(a.options);k(a)},!0);ra("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?y(a.display)+"px":"0";a.refresh()},!0);ra("coverGutterNextToScrollbar",!1,q,!0);ra("lineNumbers",!1,function(a){g(a.options);k(a)},!0);ra("firstLineNumber",1,k,!0);ra("lineNumberFormatter",function(a){return a},k,!0);ra("showCursorWhenSelecting",!1,T,!0);ra("resetSelectionOnContextMenu",!0);ra("readOnly",!1,function(a,b){"nocursor"==b?(ab(a),
a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||pa(a,!0))});ra("disableInput",!1,function(a,b){b||pa(a,!0)},!0);ra("dragDrop",!0);ra("cursorBlinkRate",530);ra("cursorScrollMargin",0);ra("cursorHeight",1);ra("workTime",100);ra("workDelay",100);ra("flattenSpans",!0,t,!0);ra("addModeClass",!1,t,!0);ra("pollInterval",100);ra("undoDepth",40,function(a,b){a.doc.history.undoDepth=b});ra("historyEventDelay",500);ra("viewportMargin",10,function(a){a.refresh()},!0);ra("maxHighlightLength",
1E4,t,!0);ra("crudeMeasuringFrom",1E4);ra("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});ra("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});ra("autofocus",null);var Ff=r.modes={},me=r.mimeModes={};r.defineMode=function(a,b){r.defaults.mode||"null"==a||(r.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Ff[a]=b};r.defineMIME=function(a,b){me[a]=b};
r.resolveMode=function(a){if("string"==typeof a&&me.hasOwnProperty(a))a=me[a];else if(a&&"string"==typeof a.name&&me.hasOwnProperty(a.name)){var b=me[a.name];a=De(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return r.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};r.getMode=function(a,b){b=r.resolveMode(b);var c=Ff[b.name];if(!c)return r.getMode(a,"text/plain");c=c(a,b);if(Nd.hasOwnProperty(b.name)){var d=Nd[b.name],e;for(e in d)d.hasOwnProperty(e)&&
(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(e in b.modeProps)c[e]=b.modeProps[e];return c};r.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});r.defineMIME("text/plain","null");var Nd=r.modeExtensions={};r.extendMode=function(a,b){var c=Nd.hasOwnProperty(a)?Nd[a]:Nd[a]={};Ee(b,c)};r.defineExtension=function(a,b){r.prototype[a]=b};r.defineDocExtension=function(a,b){Ib.prototype[a]=b};r.defineOption=
ra;var Me=[];r.defineInitHook=function(a){Me.push(a)};var md=r.helpers={};r.registerHelper=function(a,b,c){md.hasOwnProperty(a)||(md[a]=r[a]={_global:[]});md[a][b]=c};r.registerGlobalHelper=function(a,b,c,d){r.registerHelper(a,b,d);md[a]._global.push({pred:c,val:d})};r.isWordChar=Ed;r.copyState=fc;r.startState=gc;r.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Ne=r.commands={selectAll:function(a){a.setSelection(ga(a.firstLine(),
0),ga(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Da(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:ga(b.line),"+delete"):a.replaceRange("",b,ga(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",ga(b,0),ga(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",ga(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(ga(a.firstLine(),
0))},goDocEnd:function(a){a.extendSelection(ga(a.lastLine()))},goLineStart:function(a){a.extendSelection(zf(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=zf(a,b.line),d=a.getLineHandle(c.line),e=sc(d);e&&0!=e[0].level?a.extendSelection(c):(d=Math.max(0,d.text.search(/\S/)),a.extendSelection(ga(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d)))},goLineEnd:function(a){a.extendSelection(kg(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+
5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,
"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,
"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),ga(b.line,b.ch-1),ga(b.line,
b.ch+1))},newlineAndIndent:function(a){sa(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},Gc=r.keyMap={};Gc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",
Insert:"toggleOverwrite"};Gc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",
"Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};Gc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev",
"Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};Gc["default"]=Yc?Gc.macDefault:Gc.pcDefault;Gc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter",
"Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};r.lookupKey=wb;r.isModifierKey=Ub;r.keyName=ed;r.fromTextArea=function(a,b){function c(){a.value=m.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=document.body;try{d=document.activeElement}catch(e){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(Ha(a.form,"submit",
c),!b.leaveSubmitMethodAlone)){var f=a.form,g=f.submit;try{var k=f.submit=function(){c();f.submit=g;f.submit();f.submit=k}}catch(l){}}a.style.display="none";var m=r(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);m.save=c;m.getTextArea=function(){return a};m.toTextArea=function(){c();a.parentNode.removeChild(m.getWrapperElement());a.style.display="";a.form&&(cc(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=g))};return m};bc.prototype={eol:function(){return this.pos>=
this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=Fc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?Fc(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Fc(this.string,
null,this.tabSize)-(this.lineStart?Fc(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=
a}}};r.StringStream=bc;r.TextMarker=xb;Nc(xb);xb.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Fa(a);if(Ec(this,"clear")){var d=this.find();d&&Xb(this,"clear",d.from,d.to)}for(var e=d=null,f=0;f<this.lines.length;++f){var g=this.lines[f],k=mc(g.markedSpans,this);null!=k.to&&(e=ic(g));for(var l=g,m=g.markedSpans,n=k,p=void 0,q=0;q<m.length;++q)m[q]!=n&&(p||(p=[])).push(m[q]);l.markedSpans=p;null!=k.from?d=ic(g):this.collapsed&&!Jc(this.doc,g)&&a&&hc(g,oa(a.display))}if(a&&
this.collapsed&&!a.options.lineWrapping)for(f=0;f<this.lines.length;++f)g=rc(a.doc,this.lines[f]),k=c(a.doc,g),k>a.display.maxLineLength&&(a.display.maxLine=g,a.display.maxLineLength=k,a.display.maxLineChanged=!0);null!=d&&a&&Ia(a,d,e+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&db(a));b&&O(a)}};xb.prototype.find=function(a){for(var b,c,d=0;d<this.lines.length;++d){var e=this.lines[d],f=mc(e.markedSpans,this);if(null!=f.from||null!=f.to)e=
ic(e),null!=f.from&&(b=ga(e,f.from)),null!=f.to&&(c=ga(e,f.to))}return"bookmark"!=this.type||a?b&&{from:b,to:c}:b};xb.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){"bookmark"!=this.type&&(a=a.from);var c=ta(this.doc,a.line);ha(b,c);if(a.line>=b.display.showingFrom&&a.line<b.display.showingTo){for(a=b.display.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj==c){a.offsetHeight!=c.height&&hc(c,a.offsetHeight);break}La(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=
b.curOp.updateMaxLine=!0})}}};xb.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=pc(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};xb.prototype.detachLine=function(a){this.lines.splice(pc(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var Gf=0;r.SharedTextMarker=Y;Nc(Y);Y.prototype.clear=
function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Xb(this,"clear")}};Y.prototype.find=function(){return this.primary.find()};var Od=r.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};Nc(Od);Od.prototype.clear=xd(function(){var a=this.line.widgets,b=ic(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);
a=Ad(this.cm,this.line)<this.cm.doc.scrollTop;hc(this.line,Math.max(0,this.line.height-yd(this)));a&&Va(this.cm,0,-this.height);Ia(this.cm,b,b+1)}});Od.prototype.changed=xd(function(){var a=this.height;this.height=null;if(a=yd(this)-a)hc(this.line,this.line.height+a),a=ic(this.line),Ia(this.cm,a,a+1)});var Oc=r.Line=function(a,b,c){this.text=a;wd(this,b);this.height=c?c(this):1};Nc(Oc);Oc.prototype.lineNo=function(){return ic(this)};var Pd={},Oe={};$d.prototype={chunkSize:function(){return this.lines.length},
removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Wb(f);Xb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};zd.prototype={chunkSize:function(){return this.size},
removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(c=[],this.collapse(c),this.children=[new $d(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=
b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertInner(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new $d(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new zd(b);if(a.parent){a.size-=b.size;a.height-=
b.height;var c=pc(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new zd(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var qg=0,Ib=r.Doc=function(a,b,c){if(!(this instanceof Ib))return new Ib(a,b,c);null==c&&(c=0);zd.call(this,
[new $d([new Oc("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=gd();this.cleanGeneration=1;this.frontier=c;c=ga(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++qg;this.modeOption=b;"string"==typeof a&&(a=$c(a));ve(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};Ib.prototype=De(zd.prototype,{constructor:Ib,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,
b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=ae(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=ga(this.first,0),c=this.first+this.size-1;vb(this,{from:b,to:ga(c,ta(this,c).text.length),text:$c(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=ja(this,b);c=c?ja(this,c):b;Eb(this,a,b,c,d)},getRange:function(a,
b,c){a=we(this,ja(this,a),ja(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},setLine:function(a,b){Bb(this,a)&&Eb(this,b,ga(a,0),ja(this,ga(a)))},removeLine:function(a){a?Eb(this,"",ja(this,ga(a-1)),ja(this,ga(a))):Eb(this,"",ga(0,0),ja(this,ga(1,0)))},getLineHandle:function(a){if(Bb(this,a))return ta(this,a)},getLineNumber:function(a){return ic(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=ta(this,a));return rc(this,a)},lineCount:function(){return this.size},
firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return ja(this,a)},getCursor:function(a){var b=this.sel;return Cb(null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||!1===a?b.to:b.from)},somethingSelected:function(){return!Da(this.sel.head,this.sel.anchor)},setCursor:kb(function(a,b,c){a=ja(this,"number"==typeof a?ga(a,b||0):a);c?Ua(this,a):bb(this,a,a)}),setSelection:kb(function(a,b,c){bb(this,ja(this,a),ja(this,b||a),c)}),extendSelection:kb(function(a,
b,c){Ua(this,ja(this,a),b&&ja(this,b),c)}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){vb(this,{from:this.sel.from,to:this.sel.to,text:$c(a),origin:c},b||"around")},undo:kb(function(){Db(this,"undo")}),redo:kb(function(){Db(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=gd(this.history.maxGeneration)},
markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:de(this.history.done),undone:de(this.history.undone)}},setHistory:function(a){var b=this.history=gd(this.history.maxGeneration);b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return fb(this,
ja(this,a),ja(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1};a=ja(this,a);return fb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=ja(this,a);var b=[],c=ta(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=
0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return ja(this,ga(c,b))},indexFromPos:function(a){a=ja(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new Ib(ae(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=
this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Ib(ae(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=
[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];return b},unlinkDoc:function(a){a instanceof r&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);break}if(a.history==this.history){var c=[a.id];Vc(a,function(a){c.push(a.id)},!0);a.history=gd();a.history.done=de(this.history.done,c);a.history.undone=de(this.history.undone,c)}},iterLinkedDocs:function(a){Vc(this,a)},getMode:function(){return this.mode},
getEditor:function(){return this.cm}});Ib.prototype.eachLine=Ib.prototype.iter;var Hf=["iter","insert","remove","copy","getEditor"],ne;for(ne in Ib.prototype)Ib.prototype.hasOwnProperty(ne)&&0>pc(Hf,ne)&&(r.prototype[ne]=function(a){return function(){return a.apply(this.doc,arguments)}}(Ib.prototype[ne]));Nc(Ib);r.e_stop=Bd;r.e_preventDefault=zb;r.e_stopPropagation=ze;var Pc,Qd=0;r.on=Ha;r.off=cc;r.signal=tb;var dc=30,Pe=r.Pass={toString:function(){return"CodeMirror.Pass"}};Cd.prototype={set:function(a,
b){clearTimeout(this.id);this.id=setTimeout(b,a)}};r.countColumn=Fc;var Rd=[""],rg=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,If=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
r.replaceGetRect=function(a){gb=a};var Jf=function(){if(Zb)return!1;var a=qa("div");return"draggable"in a||"dragDrop"in a}();Jd?ie=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:cf&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ie=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:Lb&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?ie=function(a,b){var c=a.charCodeAt(b-1);return 8208<=c&&8212>=c}:Lb&&(ie=function(a,b){if(1<b&&45==
a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;if(2<b&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var Zc,Qe,$c=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");
-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};r.splitLines=$c;var Kf=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},kf=function(){var a=qa("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Qc={3:"Enter",
8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",
63277:"PageDown",63302:"Insert"};r.keyNames=Qc;(function(){for(var a=0;10>a;a++)Qc[a+48]=Qc[a+96]=String(a);for(a=65;90>=a;a++)Qc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Qc[a+111]=Qc[a+63235]="F"+a})();var oe,sg=function(){function a(d){return 255>=d?b.charAt(d):1424<=d&&1524>=d?"R":1536<=d&&1791>=d?c.charAt(d-1536):1792<=d&&2220>=d?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",
c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,k=/[1n]/;return function(b){if(!d.test(b))return!1;for(var c=b.length,l=[],m=0,n;m<c;++m)l.push(a(b.charCodeAt(m)));for(var m=0,p="L";m<c;++m)n=l[m],"m"==n?l[m]=p:
p=n;m=0;for(p="L";m<c;++m)n=l[m],"1"==n&&"r"==p?l[m]="n":f.test(n)&&(p=n,"r"==n&&(l[m]="R"));m=1;for(p=l[0];m<c-1;++m)n=l[m],"+"==n&&"1"==p&&"1"==l[m+1]?l[m]="1":","!=n||p!=l[m+1]||"1"!=p&&"n"!=p||(l[m]=p),p=n;for(m=0;m<c;++m)if(n=l[m],","==n)l[m]="N";else if("%"==n){for(p=m+1;p<c&&"%"==l[p];++p);var q=m&&"!"==l[m-1]||p<c&&"1"==l[p]?"1":"N";for(n=m;n<p;++n)l[n]=q;m=p-1}m=0;for(p="L";m<c;++m)n=l[m],"L"==p&&"1"==n?l[m]="L":f.test(n)&&(p=n);for(m=0;m<c;++m)if(e.test(l[m])){for(p=m+1;p<c&&e.test(l[p]);++p);
n="L"==(p<c?l[p]:"L");q="L"==(m?l[m-1]:"L")||n?"L":"R";for(n=m;n<p;++n)l[n]=q;m=p-1}for(var p=[],r,m=0;m<c;)if(g.test(l[m])){n=m;for(++m;m<c&&g.test(l[m]);++m);p.push({from:n,to:m,level:0})}else{var s=m,q=p.length;for(++m;m<c&&"L"!=l[m];++m);for(n=s;n<m;)if(k.test(l[n])){s<n&&p.splice(q,0,{from:s,to:n,level:1});s=n;for(++n;n<m&&k.test(l[n]);++n);p.splice(q,0,{from:s,to:n,level:2});s=n}else++n;s<m&&p.splice(q,0,{from:s,to:m,level:1})}1==p[0].level&&(r=b.match(/^\s+/))&&(p[0].from=r[0].length,p.unshift({from:0,
to:r[0].length,level:0}));1==Hb(p).level&&(r=b.match(/\s+$/))&&(Hb(p).to-=r[0].length,p.push({from:c-r[0].length,to:c,level:0}));p[0].level!=Hb(p).level&&p.push({from:c,to:c,level:p[0].level});return p}}();r.version="3.21.0";return r}();CodeMirror.defineMode("javascript",function(r,u){function s(a,b,c){Ca=a;$a=c;return b}function t(a,c){var d=a.next();if('"'==d||"'"==d)return c.tokenize=l(d),c.tokenize(a,c);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return s("number","number");if("."==d&&a.match(".."))return s("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return s(d);if("="==d&&a.eat(">"))return s("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),s("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),
s("number","number");if("/"==d){if(a.eat("*"))return c.tokenize=b,b(a,c);if(a.eat("/"))return a.skipToEnd(),s("comment","comment");if("operator"==c.lastType||"keyword c"==c.lastType||"sof"==c.lastType||/^[\[{}\(,;:]$/.test(c.lastType)){a:for(var d=!1,e,f=!1;null!=(e=a.next());){if(!d){if("/"==e&&!f)break a;"["==e?f=!0:f&&"]"==e&&(f=!1)}d=!d&&"\\"==e}a.eatWhile(/[gimy]/);return s("regexp","string-2")}a.eatWhile(na);return s("operator","operator",a.current())}if("`"==d)return c.tokenize=p,p(a,c);if("#"==
d)return a.skipToEnd(),s("error","error");if(na.test(d))return a.eatWhile(na),s("operator","operator",a.current());a.eatWhile(/[\w\$_]/);d=a.current();return(e=Ga.propertyIsEnumerable(d)&&Ga[d])&&"."!=c.lastType?s(e.type,e.style,d):s("variable","variable",d)}function l(a){return function(b,c){for(var d=!1,e;null!=(e=b.next())&&(e!=a||d);)d=!d&&"\\"==e;d||(c.tokenize=t);return s("string","string")}}function b(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=t;break}c="*"==d}return s("comment",
"comment")}function p(a,b){for(var c=!1,d;null!=(d=a.next());){if(!c&&("`"==d||"$"==d&&a.eat("{"))){b.tokenize=t;break}c=!c&&"\\"==d}return s("quasi","string-2",a.current())}function m(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var f=a.string.charAt(c),g=hb.indexOf(f);if(0<=g&&3>g){if(!d){++c;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(/[$\w]/.test(f))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function k(a,
b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function f(){for(var a=arguments.length-1;0<=a;a--)ia.cc.push(arguments[a])}function c(){f.apply(null,arguments);return!0}function e(a){function b(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var c=ia.state;c.context?(ia.marked="def",b(c.localVars)||(c.localVars={name:a,next:c.localVars})):!b(c.globalVars)&&u.globalVars&&(c.globalVars={name:a,next:c.globalVars})}function g(){ia.state.context=
{prev:ia.state.context,vars:ia.state.localVars};ia.state.localVars=Na}function q(){ia.state.localVars=ia.state.context.vars;ia.state.context=ia.state.context.prev}function a(a,b){var c=function(){var c=ia.state,d=c.indented;"stat"==c.lexical.type&&(d=c.lexical.indented);c.lexical=new k(d,ia.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function d(){var a=ia.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function n(a){return function(b){return b==
a?c():";"==a?f():c(arguments.callee)}}function v(b,e){return"var"==b?c(a("vardef",e.length),V,n(";"),d):"keyword a"==b?c(a("form"),y,v,d):"keyword b"==b?c(a("form"),v,d):"{"==b?c(a("}"),S,d):";"==b?c():"if"==b?c(a("form"),y,v,d,X):"function"==b?c(ka):"for"==b?c(a("form"),fa,v,d):"variable"==b?c(a("stat"),I):"switch"==b?c(a("form"),y,a("}","switch"),n("{"),S,d,d):"case"==b?c(y,n(":")):"default"==b?c(n(":")):"catch"==b?c(a("form"),g,n("("),Fa,n(")"),v,d,q):"module"==b?c(a("form"),g,La,q,d):"class"==
b?c(a("form"),O,kb,d):"export"==b?c(a("form"),Ia,d):"import"==b?c(a("form"),Ra,d):f(a("stat"),y,n(";"),d)}function y(a){return z(a,!1)}function A(a){return z(a,!0)}function z(b,e){if(ia.state.fatArrowAt==ia.stream.start){var k=e?T:L;if("("==b)return c(g,a(")"),G(M,")"),d,n("=>"),k,q);if("variable"==b)return f(g,M,n("=>"),k,q)}k=e?D:E;return ub.hasOwnProperty(b)?c(k):"function"==b?c(ka):"keyword c"==b?c(e?C:B):"("==b?c(a(")"),B,Ma,n(")"),d,k):"operator"==b||"spread"==b?c(e?A:y):"["==b?c(a("]"),pa,
d,k):"{"==b?Q(N,"}",null,k):c()}function B(a){return a.match(/[;\}\)\],]/)?f():f(y)}function C(a){return a.match(/[;\}\)\],]/)?f():f(A)}function E(a,b){return","==a?c(y):D(a,b,!1)}function D(b,e,f){var k=!1==f?E:D,l=!1==f?y:A;if("=>"==e)return c(g,f?T:L,q);if("operator"==b)return/\+\+|--/.test(e)?c(k):"?"==e?c(y,n(":"),l):c(l);if("quasi"==b)return ia.cc.push(k),b="${"!=e.slice(e.length-2)?c():c(y,H),b;if(";"!=b){if("("==b)return Q(A,")","call",k);if("."==b)return c(Z,k);if("["==b)return c(a("]"),
B,n("]"),d,k)}}function H(a){if("}"==a)return ia.marked="string-2",ia.state.tokenize=p,c()}function L(a){m(ia.stream,ia.state);return"{"==a?f(v):f(y)}function T(a){m(ia.stream,ia.state);return"{"==a?f(v):f(A)}function I(a){return":"==a?c(d,v):f(E,n(";"),d)}function Z(a){if("variable"==a)return ia.marked="property",c()}function N(a,b){if("variable"==a){if(ia.marked="property","get"==b||"set"==b)return c(x)}else if("number"==a||"string"==a)ia.marked=a+" property";else if("["==a)return c(y,n("]"),K);
if(ub.hasOwnProperty(a))return c(K)}function x(a){if("variable"!=a)return f(K);ia.marked="property";return c(ka)}function K(a){if(":"==a)return c(A);if("("==a)return f(ka)}function G(a,b){function d(e){return","==e?(e=ia.state.lexical,"call"==e.info&&(e.pos=(e.pos||0)+1),c(a,d)):e==b?c():c(n(b))}return function(e){return e==b?c():f(a,d)}}function Q(b,e,f){for(var g=3;g<arguments.length;g++)ia.cc.push(arguments[g]);return c(a(e,f),G(b,e),d)}function S(a){return"}"==a?c():f(v,S)}function ha(a){if(R&&
":"==a)return c(ba)}function ba(a){if("variable"==a)return ia.marked="variable-3",c()}function V(){return f(M,ha,J,aa)}function M(a,b){if("variable"==a)return e(b),c();if("["==a)return Q(M,"]");if("{"==a)return Q(U,"}")}function U(a,b){if("variable"==a&&!ia.stream.match(/^\s*:/,!1))return e(b),c(J);"variable"==a&&(ia.marked="property");return c(n(":"),M,J)}function J(a,b){if("="==b)return c(A)}function aa(a){if(","==a)return c(V)}function X(b,e){if("keyword b"==b&&"else"==e)return c(a("form"),v,d)}
function fa(b){if("("==b)return c(a(")"),ua,n(")"),d)}function ua(a){return"var"==a?c(V,n(";"),la):";"==a?c(la):"variable"==a?c(va):f(y,n(";"),la)}function va(a,b){return"in"==b||"of"==b?(ia.marked="keyword",c(y)):c(E,la)}function la(a,b){return";"==a?c(oa):"in"==b||"of"==b?(ia.marked="keyword",c(y)):f(y,n(";"),oa)}function oa(a){")"!=a&&c(y)}function ka(b,f){if("*"==f)return ia.marked="keyword",c(ka);if("variable"==b)return e(f),c(ka);if("("==b)return c(g,a(")"),G(Fa,")"),d,v,q)}function Fa(a){return"spread"==
a?c(Fa):f(M,ha)}function O(a,b){if("variable"==a)return e(b),c(sa)}function sa(a,b){if("extends"==b)return c(y)}function kb(a){if("{"==a)return Q(N,"}")}function La(a,b){if("string"==a)return c(v);if("variable"==a)return e(b),c(pb)}function Ia(a,b){return"*"==b?(ia.marked="keyword",c(pb,n(";"))):"default"==b?(ia.marked="keyword",c(y,n(";"))):f(v)}function Ra(a){return"string"==a?c():f(Qa,pb)}function Qa(a,b){if("{"==a)return Q(Qa,"}");"variable"==a&&e(b);return c()}function pb(a,b){if("from"==b)return ia.marked=
"keyword",c(y)}function pa(a){return"]"==a?c():f(A,ca)}function ca(a){return"for"==a?f(Ma,n("]")):","==a?c(G(A,"]")):f(G(A,"]"))}function Ma(a){if("for"==a)return c(fa,Ma);if("if"==a)return c(y,Ma)}var cb=r.indentUnit,ma=u.statementIndent,za=u.json,R=u.typescript,Ga=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,
"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(R){var c={type:"variable",style:"variable-3"},
c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),string:c,number:c,bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),na=/[+\-*&%=<>!?|~^]/,Ca,$a,hb="([{}])",ub={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},ia={state:null,column:null,marked:null,cc:null},Na={name:"this",next:{name:"arguments"}};d.lex=!0;return{startState:function(a){a={tokenize:t,lastType:"sof",
cc:[],lexical:new k((a||0)-cb,0,"block",!1),localVars:u.localVars,context:u.localVars&&{vars:u.localVars},indented:0};u.globalVars&&(a.globalVars=u.globalVars);return a},token:function(a,c){a.sol()&&(c.lexical.hasOwnProperty("align")||(c.lexical.align=!1),c.indented=a.indentation(),m(a,c));if(c.tokenize!=b&&a.eatSpace())return null;var d=c.tokenize(a,c);if("comment"==Ca)return d;c.lastType="operator"!=Ca||"++"!=$a&&"--"!=$a?Ca:"incdec";a:{var e=Ca,f=$a,g=c.cc;ia.state=c;ia.stream=a;ia.marked=null;
ia.cc=g;c.lexical.hasOwnProperty("align")||(c.lexical.align=!0);for(;;)if((g.length?g.pop():za?y:v)(e,f)){for(;g.length&&g[g.length-1].lex;)g.pop()();if(ia.marked){d=ia.marked;break a}if(e="variable"==e)b:{for(e=c.localVars;e;e=e.next)if(e.name==f){e=!0;break b}for(g=c.context;g;g=g.prev)for(e=g.vars;e;e=e.next)if(e.name==f){e=!0;break b}e=void 0}if(e){d="variable-2";break a}break a}d=void 0}return d},indent:function(a,c){if(a.tokenize==b)return CodeMirror.Pass;if(a.tokenize!=t)return 0;for(var e=
c&&c.charAt(0),f=a.lexical,g=a.cc.length-1;0<=g;--g){var k=a.cc[g];if(k==d)f=f.prev;else if(k!=X)break}"stat"==f.type&&"}"==e&&(f=f.prev);ma&&")"==f.type&&"stat"==f.prev.type&&(f=f.prev);g=f.type;k=e==g;return"vardef"==g?f.indented+("operator"==a.lastType||","==a.lastType?f.info+1:0):"form"==g&&"{"==e?f.indented:"form"==g?f.indented+cb:"stat"==g?f.indented+("operator"==a.lastType||","==a.lastType?ma||cb:0):"switch"!=f.info||k||!1==u.doubleIndentSwitch?f.align?f.column+(k?0:1):f.indented+(k?0:cb):
f.indented+(/^(?:case|default)\b/.test(c)?cb:2*cb)},electricChars:":{}",blockCommentStart:za?null:"/*",blockCommentEnd:za?null:"*/",lineComment:za?null:"//",fold:"brace",helperType:za?"json":"javascript",jsonMode:za}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");
CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMode("pascal",function(){function r(p,m){var k=p.next();if("#"==k&&m.startOfLine)return p.skipToEnd(),"meta";if('"'==k||"'"==k)return m.tokenize=u(k),m.tokenize(p,m);if("("==k&&p.eat("*"))return m.tokenize=s,s(p,m);if(/[\[\]{}\(\),;\:\.]/.test(k))return null;if(/\d/.test(k))return p.eatWhile(/[\w\.]/),"number";if("/"==k&&p.eat("/"))return p.skipToEnd(),"comment";if(b.test(k))return p.eatWhile(b),"operator";p.eatWhile(/[\w\$_]/);k=p.current();return t.propertyIsEnumerable(k)?"keyword":
l.propertyIsEnumerable(k)?"atom":"variable"}function u(b){return function(l,k){for(var f=!1,c,e=!1;null!=(c=l.next());){if(c==b&&!f){e=!0;break}f=!f&&"\\"==c}if(e||!f)k.tokenize=null;return"string"}}function s(b,l){for(var k=!1,f;f=b.next();){if(")"==f&&k){l.tokenize=null;break}k="*"==f}return"comment"}var t=function(b){var l={};b=b.split(" ");for(var k=0;k<b.length;++k)l[b[k]]=!0;return l}("and array begin case const div do downto else end file for forward integer boolean char function goto if in label mod nil not of or packed procedure program record repeat set string then to type until var while with"),
l={"null":!0},b=/[+\-*&%=<>!?|\/]/;return{startState:function(){return{tokenize:null}},token:function(b,l){return b.eatSpace()?null:(l.tokenize||r)(b,l)},electricChars:"{}"}});CodeMirror.defineMIME("text/x-pascal","pascal");
